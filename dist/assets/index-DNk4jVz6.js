var GS=Object.defineProperty;var qS=(t,e,s)=>e in t?GS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Or=(t,e,s)=>qS(t,typeof e!="symbol"?e+"":e,s);function YS(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var $m=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function JS(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),s}var l1={exports:{}},V0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw;function WS(){if(Dw)return V0;Dw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(n,a,i){var c=null;if(i!==void 0&&(c=""+i),a.key!==void 0&&(c=""+a.key),"key"in a){i={};for(var A in a)A!=="key"&&(i[A]=a[A])}else i=a;return a=i.ref,{$$typeof:t,type:n,key:c,ref:a!==void 0?a:null,props:i}}return V0.Fragment=e,V0.jsx=s,V0.jsxs=s,V0}var Rw;function XS(){return Rw||(Rw=1,l1.exports=WS()),l1.exports}var r=XS(),o1={exports:{}},Qs={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw;function ZS(){if(Hw)return Qs;Hw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),c=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),x=Symbol.iterator;function m(ae){return ae===null||typeof ae!="object"?null:(ae=x&&ae[x]||ae["@@iterator"],typeof ae=="function"?ae:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function C(ae,R,P){this.props=ae,this.context=R,this.refs=S,this.updater=P||j}C.prototype.isReactComponent={},C.prototype.setState=function(ae,R){if(typeof ae!="object"&&typeof ae!="function"&&ae!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ae,R,"setState")},C.prototype.forceUpdate=function(ae){this.updater.enqueueForceUpdate(this,ae,"forceUpdate")};function F(){}F.prototype=C.prototype;function U(ae,R,P){this.props=ae,this.context=R,this.refs=S,this.updater=P||j}var _=U.prototype=new F;_.constructor=U,w(_,C.prototype),_.isPureReactComponent=!0;var z=Array.isArray;function I(){}var H={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function $(ae,R,P){var V=P.ref;return{$$typeof:t,type:ae,key:R,ref:V!==void 0?V:null,props:P}}function ce(ae,R){return $(ae.type,R,ae.props)}function Q(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===t}function q(ae){var R={"=":"=0",":":"=2"};return"$"+ae.replace(/[=:]/g,function(P){return R[P]})}var te=/\/+/g;function X(ae,R){return typeof ae=="object"&&ae!==null&&ae.key!=null?q(""+ae.key):R.toString(36)}function Ae(ae){switch(ae.status){case"fulfilled":return ae.value;case"rejected":throw ae.reason;default:switch(typeof ae.status=="string"?ae.then(I,I):(ae.status="pending",ae.then(function(R){ae.status==="pending"&&(ae.status="fulfilled",ae.value=R)},function(R){ae.status==="pending"&&(ae.status="rejected",ae.reason=R)})),ae.status){case"fulfilled":return ae.value;case"rejected":throw ae.reason}}throw ae}function W(ae,R,P,V,K){var ne=typeof ae;(ne==="undefined"||ne==="boolean")&&(ae=null);var pe=!1;if(ae===null)pe=!0;else switch(ne){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(ae.$$typeof){case t:case e:pe=!0;break;case u:return pe=ae._init,W(pe(ae._payload),R,P,V,K)}}if(pe)return K=K(ae),pe=V===""?"."+X(ae,0):V,z(K)?(P="",pe!=null&&(P=pe.replace(te,"$&/")+"/"),W(K,R,P,"",function(Ne){return Ne})):K!=null&&(Q(K)&&(K=ce(K,P+(K.key==null||ae&&ae.key===K.key?"":(""+K.key).replace(te,"$&/")+"/")+pe)),R.push(K)),1;pe=0;var Ce=V===""?".":V+":";if(z(ae))for(var Ue=0;Ue<ae.length;Ue++)V=ae[Ue],ne=Ce+X(V,Ue),pe+=W(V,R,P,ne,K);else if(Ue=m(ae),typeof Ue=="function")for(ae=Ue.call(ae),Ue=0;!(V=ae.next()).done;)V=V.value,ne=Ce+X(V,Ue++),pe+=W(V,R,P,ne,K);else if(ne==="object"){if(typeof ae.then=="function")return W(Ae(ae),R,P,V,K);throw R=String(ae),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(ae).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.")}return pe}function se(ae,R,P){if(ae==null)return ae;var V=[],K=0;return W(ae,V,"","",function(ne){return R.call(P,ne,K++)}),V}function Z(ae){if(ae._status===-1){var R=ae._result;R=R(),R.then(function(P){(ae._status===0||ae._status===-1)&&(ae._status=1,ae._result=P)},function(P){(ae._status===0||ae._status===-1)&&(ae._status=2,ae._result=P)}),ae._status===-1&&(ae._status=0,ae._result=R)}if(ae._status===1)return ae._result.default;throw ae._result}var re=typeof reportError=="function"?reportError:function(ae){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ae=="object"&&ae!==null&&typeof ae.message=="string"?String(ae.message):String(ae),error:ae});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ae);return}console.error(ae)},ve={map:se,forEach:function(ae,R,P){se(ae,function(){R.apply(this,arguments)},P)},count:function(ae){var R=0;return se(ae,function(){R++}),R},toArray:function(ae){return se(ae,function(R){return R})||[]},only:function(ae){if(!Q(ae))throw Error("React.Children.only expected to receive a single React element child.");return ae}};return Qs.Activity=p,Qs.Children=ve,Qs.Component=C,Qs.Fragment=s,Qs.Profiler=a,Qs.PureComponent=U,Qs.StrictMode=n,Qs.Suspense=d,Qs.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,Qs.__COMPILER_RUNTIME={__proto__:null,c:function(ae){return H.H.useMemoCache(ae)}},Qs.cache=function(ae){return function(){return ae.apply(null,arguments)}},Qs.cacheSignal=function(){return null},Qs.cloneElement=function(ae,R,P){if(ae==null)throw Error("The argument must be a React element, but you passed "+ae+".");var V=w({},ae.props),K=ae.key;if(R!=null)for(ne in R.key!==void 0&&(K=""+R.key),R)!ee.call(R,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&R.ref===void 0||(V[ne]=R[ne]);var ne=arguments.length-2;if(ne===1)V.children=P;else if(1<ne){for(var pe=Array(ne),Ce=0;Ce<ne;Ce++)pe[Ce]=arguments[Ce+2];V.children=pe}return $(ae.type,K,V)},Qs.createContext=function(ae){return ae={$$typeof:c,_currentValue:ae,_currentValue2:ae,_threadCount:0,Provider:null,Consumer:null},ae.Provider=ae,ae.Consumer={$$typeof:i,_context:ae},ae},Qs.createElement=function(ae,R,P){var V,K={},ne=null;if(R!=null)for(V in R.key!==void 0&&(ne=""+R.key),R)ee.call(R,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(K[V]=R[V]);var pe=arguments.length-2;if(pe===1)K.children=P;else if(1<pe){for(var Ce=Array(pe),Ue=0;Ue<pe;Ue++)Ce[Ue]=arguments[Ue+2];K.children=Ce}if(ae&&ae.defaultProps)for(V in pe=ae.defaultProps,pe)K[V]===void 0&&(K[V]=pe[V]);return $(ae,ne,K)},Qs.createRef=function(){return{current:null}},Qs.forwardRef=function(ae){return{$$typeof:A,render:ae}},Qs.isValidElement=Q,Qs.lazy=function(ae){return{$$typeof:u,_payload:{_status:-1,_result:ae},_init:Z}},Qs.memo=function(ae,R){return{$$typeof:f,type:ae,compare:R===void 0?null:R}},Qs.startTransition=function(ae){var R=H.T,P={};H.T=P;try{var V=ae(),K=H.S;K!==null&&K(P,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(I,re)}catch(ne){re(ne)}finally{R!==null&&P.types!==null&&(R.types=P.types),H.T=R}},Qs.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},Qs.use=function(ae){return H.H.use(ae)},Qs.useActionState=function(ae,R,P){return H.H.useActionState(ae,R,P)},Qs.useCallback=function(ae,R){return H.H.useCallback(ae,R)},Qs.useContext=function(ae){return H.H.useContext(ae)},Qs.useDebugValue=function(){},Qs.useDeferredValue=function(ae,R){return H.H.useDeferredValue(ae,R)},Qs.useEffect=function(ae,R){return H.H.useEffect(ae,R)},Qs.useEffectEvent=function(ae){return H.H.useEffectEvent(ae)},Qs.useId=function(){return H.H.useId()},Qs.useImperativeHandle=function(ae,R,P){return H.H.useImperativeHandle(ae,R,P)},Qs.useInsertionEffect=function(ae,R){return H.H.useInsertionEffect(ae,R)},Qs.useLayoutEffect=function(ae,R){return H.H.useLayoutEffect(ae,R)},Qs.useMemo=function(ae,R){return H.H.useMemo(ae,R)},Qs.useOptimistic=function(ae,R){return H.H.useOptimistic(ae,R)},Qs.useReducer=function(ae,R,P){return H.H.useReducer(ae,R,P)},Qs.useRef=function(ae){return H.H.useRef(ae)},Qs.useState=function(ae){return H.H.useState(ae)},Qs.useSyncExternalStore=function(ae,R,P){return H.H.useSyncExternalStore(ae,R,P)},Qs.useTransition=function(){return H.H.useTransition()},Qs.version="19.2.3",Qs}var Pw;function Pp(){return Pw||(Pw=1,o1.exports=ZS()),o1.exports}var L=Pp();const wi=qx(L),eE=YS({__proto__:null,default:wi},[L]);var c1={exports:{}},$0={},A1={exports:{}},d1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw;function tE(){return zw||(zw=1,(function(t){function e(W,se){var Z=W.length;W.push(se);e:for(;0<Z;){var re=Z-1>>>1,ve=W[re];if(0<a(ve,se))W[re]=se,W[Z]=ve,Z=re;else break e}}function s(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var se=W[0],Z=W.pop();if(Z!==se){W[0]=Z;e:for(var re=0,ve=W.length,ae=ve>>>1;re<ae;){var R=2*(re+1)-1,P=W[R],V=R+1,K=W[V];if(0>a(P,Z))V<ve&&0>a(K,P)?(W[re]=K,W[V]=Z,re=V):(W[re]=P,W[R]=Z,re=R);else if(V<ve&&0>a(K,Z))W[re]=K,W[V]=Z,re=V;else break e}}return se}function a(W,se){var Z=W.sortIndex-se.sortIndex;return Z!==0?Z:W.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var c=Date,A=c.now();t.unstable_now=function(){return c.now()-A}}var d=[],f=[],u=1,p=null,x=3,m=!1,j=!1,w=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function _(W){for(var se=s(f);se!==null;){if(se.callback===null)n(f);else if(se.startTime<=W)n(f),se.sortIndex=se.expirationTime,e(d,se);else break;se=s(f)}}function z(W){if(w=!1,_(W),!j)if(s(d)!==null)j=!0,I||(I=!0,q());else{var se=s(f);se!==null&&Ae(z,se.startTime-W)}}var I=!1,H=-1,ee=5,$=-1;function ce(){return S?!0:!(t.unstable_now()-$<ee)}function Q(){if(S=!1,I){var W=t.unstable_now();$=W;var se=!0;try{e:{j=!1,w&&(w=!1,F(H),H=-1),m=!0;var Z=x;try{t:{for(_(W),p=s(d);p!==null&&!(p.expirationTime>W&&ce());){var re=p.callback;if(typeof re=="function"){p.callback=null,x=p.priorityLevel;var ve=re(p.expirationTime<=W);if(W=t.unstable_now(),typeof ve=="function"){p.callback=ve,_(W),se=!0;break t}p===s(d)&&n(d),_(W)}else n(d);p=s(d)}if(p!==null)se=!0;else{var ae=s(f);ae!==null&&Ae(z,ae.startTime-W),se=!1}}break e}finally{p=null,x=Z,m=!1}se=void 0}}finally{se?q():I=!1}}}var q;if(typeof U=="function")q=function(){U(Q)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,X=te.port2;te.port1.onmessage=Q,q=function(){X.postMessage(null)}}else q=function(){C(Q,0)};function Ae(W,se){H=C(function(){W(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(W){switch(x){case 1:case 2:case 3:var se=3;break;default:se=x}var Z=x;x=se;try{return W()}finally{x=Z}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(W,se){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Z=x;x=W;try{return se()}finally{x=Z}},t.unstable_scheduleCallback=function(W,se,Z){var re=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?re+Z:re):Z=re,W){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Z+ve,W={id:u++,callback:se,priorityLevel:W,startTime:Z,expirationTime:ve,sortIndex:-1},Z>re?(W.sortIndex=Z,e(f,W),s(d)===null&&W===s(f)&&(w?(F(H),H=-1):w=!0,Ae(z,Z-re))):(W.sortIndex=ve,e(d,W),j||m||(j=!0,I||(I=!0,q()))),W},t.unstable_shouldYield=ce,t.unstable_wrapCallback=function(W){var se=x;return function(){var Z=x;x=se;try{return W.apply(this,arguments)}finally{x=Z}}}})(d1)),d1}var Kw;function sE(){return Kw||(Kw=1,A1.exports=tE()),A1.exports}var u1={exports:{}},Yi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw;function rE(){if(Vw)return Yi;Vw=1;var t=Pp();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)f+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var n={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,f,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:d,containerInfo:f,implementation:u}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function A(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Yi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Yi.createPortal=function(d,f){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return i(d,f,null,u)},Yi.flushSync=function(d){var f=c.T,u=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=f,n.p=u,n.d.f()}},Yi.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},Yi.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Yi.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var u=f.as,p=A(u,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,m=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;u==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:x,fetchPriority:m}):u==="script"&&n.d.X(d,{crossOrigin:p,integrity:x,fetchPriority:m,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Yi.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var u=A(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:u,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},Yi.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var u=f.as,p=A(u,f.crossOrigin);n.d.L(d,u,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Yi.preloadModule=function(d,f){if(typeof d=="string")if(f){var u=A(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:u,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},Yi.requestFormReset=function(d){n.d.r(d)},Yi.unstable_batchedUpdates=function(d,f){return d(f)},Yi.useFormState=function(d,f,u){return c.H.useFormState(d,f,u)},Yi.useFormStatus=function(){return c.H.useHostTransitionStatus()},Yi.version="19.2.3",Yi}var $w;function C4(){if($w)return u1.exports;$w=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),u1.exports=rE(),u1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gw;function nE(){if(Gw)return $0;Gw=1;var t=sE(),e=Pp(),s=C4();function n(l){var o="https://react.dev/errors/"+l;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var o=l,h=l;if(l.alternate)for(;o.return;)o=o.return;else{l=o;do o=l,(o.flags&4098)!==0&&(h=o.return),l=o.return;while(l)}return o.tag===3?h:null}function c(l){if(l.tag===13){var o=l.memoizedState;if(o===null&&(l=l.alternate,l!==null&&(o=l.memoizedState)),o!==null)return o.dehydrated}return null}function A(l){if(l.tag===31){var o=l.memoizedState;if(o===null&&(l=l.alternate,l!==null&&(o=l.memoizedState)),o!==null)return o.dehydrated}return null}function d(l){if(i(l)!==l)throw Error(n(188))}function f(l){var o=l.alternate;if(!o){if(o=i(l),o===null)throw Error(n(188));return o!==l?null:l}for(var h=l,g=o;;){var k=h.return;if(k===null)break;var T=k.alternate;if(T===null){if(g=k.return,g!==null){h=g;continue}break}if(k.child===T.child){for(T=k.child;T;){if(T===h)return d(k),l;if(T===g)return d(k),o;T=T.sibling}throw Error(n(188))}if(h.return!==g.return)h=k,g=T;else{for(var Y=!1,fe=k.child;fe;){if(fe===h){Y=!0,h=k,g=T;break}if(fe===g){Y=!0,g=k,h=T;break}fe=fe.sibling}if(!Y){for(fe=T.child;fe;){if(fe===h){Y=!0,h=T,g=k;break}if(fe===g){Y=!0,g=T,h=k;break}fe=fe.sibling}if(!Y)throw Error(n(189))}}if(h.alternate!==g)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?l:o}function u(l){var o=l.tag;if(o===5||o===26||o===27||o===6)return l;for(l=l.child;l!==null;){if(o=u(l),o!==null)return o;l=l.sibling}return null}var p=Object.assign,x=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),U=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function q(l){return l===null||typeof l!="object"?null:(l=Q&&l[Q]||l["@@iterator"],typeof l=="function"?l:null)}var te=Symbol.for("react.client.reference");function X(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===te?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case w:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case z:return"Suspense";case I:return"SuspenseList";case $:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case j:return"Portal";case U:return l.displayName||"Context";case F:return(l._context.displayName||"Context")+".Consumer";case _:var o=l.render;return l=l.displayName,l||(l=o.displayName||o.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case H:return o=l.displayName||null,o!==null?o:X(l.type)||"Memo";case ee:o=l._payload,l=l._init;try{return X(l(o))}catch{}}return null}var Ae=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},re=[],ve=-1;function ae(l){return{current:l}}function R(l){0>ve||(l.current=re[ve],re[ve]=null,ve--)}function P(l,o){ve++,re[ve]=l.current,l.current=o}var V=ae(null),K=ae(null),ne=ae(null),pe=ae(null);function Ce(l,o){switch(P(ne,o),P(K,l),P(V,null),o.nodeType){case 9:case 11:l=(l=o.documentElement)&&(l=l.namespaceURI)?ow(l):0;break;default:if(l=o.tagName,o=o.namespaceURI)o=ow(o),l=cw(o,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}R(V),P(V,l)}function Ue(){R(V),R(K),R(ne)}function Ne(l){l.memoizedState!==null&&P(pe,l);var o=V.current,h=cw(o,l.type);o!==h&&(P(K,l),P(V,h))}function Ie(l){K.current===l&&(R(V),R(K)),pe.current===l&&(R(pe),H0._currentValue=Z)}var Pe,ze;function gt(l){if(Pe===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);Pe=o&&o[1]||"",ze=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pe+l+ze}var ie=!1;function Be(l,o){if(!l||ie)return"";ie=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(o){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(at){var Ze=at}Reflect.construct(l,[],bt)}else{try{bt.call()}catch(at){Ze=at}l.call(bt.prototype)}}else{try{throw Error()}catch(at){Ze=at}(bt=l())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(at){if(at&&Ze&&typeof at.stack=="string")return[at.stack,Ze.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var k=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");k&&k.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=g.DetermineComponentFrameRoot(),Y=T[0],fe=T[1];if(Y&&fe){var ke=Y.split(`
`),Ye=fe.split(`
`);for(k=g=0;g<ke.length&&!ke[g].includes("DetermineComponentFrameRoot");)g++;for(;k<Ye.length&&!Ye[k].includes("DetermineComponentFrameRoot");)k++;if(g===ke.length||k===Ye.length)for(g=ke.length-1,k=Ye.length-1;1<=g&&0<=k&&ke[g]!==Ye[k];)k--;for(;1<=g&&0<=k;g--,k--)if(ke[g]!==Ye[k]){if(g!==1||k!==1)do if(g--,k--,0>k||ke[g]!==Ye[k]){var At=`
`+ke[g].replace(" at new "," at ");return l.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",l.displayName)),At}while(1<=g&&0<=k);break}}}finally{ie=!1,Error.prepareStackTrace=h}return(h=l?l.displayName||l.name:"")?gt(h):""}function tt(l,o){switch(l.tag){case 26:case 27:case 5:return gt(l.type);case 16:return gt("Lazy");case 13:return l.child!==o&&o!==null?gt("Suspense Fallback"):gt("Suspense");case 19:return gt("SuspenseList");case 0:case 15:return Be(l.type,!1);case 11:return Be(l.type.render,!1);case 1:return Be(l.type,!0);case 31:return gt("Activity");default:return""}}function Xe(l){try{var o="",h=null;do o+=tt(l,h),h=l,l=l.return;while(l);return o}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var et=Object.prototype.hasOwnProperty,Tt=t.unstable_scheduleCallback,Nt=t.unstable_cancelCallback,Mt=t.unstable_shouldYield,Qt=t.unstable_requestPaint,pt=t.unstable_now,rt=t.unstable_getCurrentPriorityLevel,Ut=t.unstable_ImmediatePriority,rs=t.unstable_UserBlockingPriority,Ot=t.unstable_NormalPriority,Dt=t.unstable_LowPriority,Oe=t.unstable_IdlePriority,Ge=t.log,ft=t.unstable_setDisableYieldValue,ht=null,vt=null;function kt(l){if(typeof Ge=="function"&&ft(l),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(ht,l)}catch{}}var Vt=Math.clz32?Math.clz32:Re,zt=Math.log,Bs=Math.LN2;function Re(l){return l>>>=0,l===0?32:31-(zt(l)/Bs|0)|0}var We=256,$t=262144,wt=4194304;function st(l){var o=l&42;if(o!==0)return o;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ct(l,o,h){var g=l.pendingLanes;if(g===0)return 0;var k=0,T=l.suspendedLanes,Y=l.pingedLanes;l=l.warmLanes;var fe=g&134217727;return fe!==0?(g=fe&~T,g!==0?k=st(g):(Y&=fe,Y!==0?k=st(Y):h||(h=fe&~l,h!==0&&(k=st(h))))):(fe=g&~T,fe!==0?k=st(fe):Y!==0?k=st(Y):h||(h=g&~l,h!==0&&(k=st(h)))),k===0?0:o!==0&&o!==k&&(o&T)===0&&(T=k&-k,h=o&-o,T>=h||T===32&&(h&4194048)!==0)?o:k}function as(l,o){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&o)===0}function ps(l,o){switch(l){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ct(){var l=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),l}function jt(l){for(var o=[],h=0;31>h;h++)o.push(l);return o}function Et(l,o){l.pendingLanes|=o,o!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function hs(l,o,h,g,k,T){var Y=l.pendingLanes;l.pendingLanes=h,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=h,l.entangledLanes&=h,l.errorRecoveryDisabledLanes&=h,l.shellSuspendCounter=0;var fe=l.entanglements,ke=l.expirationTimes,Ye=l.hiddenUpdates;for(h=Y&~h;0<h;){var At=31-Vt(h),bt=1<<At;fe[At]=0,ke[At]=-1;var Ze=Ye[At];if(Ze!==null)for(Ye[At]=null,At=0;At<Ze.length;At++){var at=Ze[At];at!==null&&(at.lane&=-536870913)}h&=~bt}g!==0&&Ys(l,g,0),T!==0&&k===0&&l.tag!==0&&(l.suspendedLanes|=T&~(Y&~o))}function Ys(l,o,h){l.pendingLanes|=o,l.suspendedLanes&=~o;var g=31-Vt(o);l.entangledLanes|=o,l.entanglements[g]=l.entanglements[g]|1073741824|h&261930}function Cs(l,o){var h=l.entangledLanes|=o;for(l=l.entanglements;h;){var g=31-Vt(h),k=1<<g;k&o|l[g]&o&&(l[g]|=o),h&=~k}}function Tr(l,o){var h=o&-o;return h=(h&42)!==0?1:qt(h),(h&(l.suspendedLanes|o))!==0?0:h}function qt(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function fr(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Ls(){var l=se.p;return l!==0?l:(l=window.event,l===void 0?32:Fw(l.type))}function yr(l,o){var h=se.p;try{return se.p=l,o()}finally{se.p=h}}var Hr=Math.random().toString(36).slice(2),pr="__reactFiber$"+Hr,Pr="__reactProps$"+Hr,xa="__reactContainer$"+Hr,Va="__reactEvents$"+Hr,ji="__reactListeners$"+Hr,oc="__reactHandles$"+Hr,li="__reactResources$"+Hr,Ni="__reactMarker$"+Hr;function Co(l){delete l[pr],delete l[Pr],delete l[Va],delete l[ji],delete l[oc]}function nl(l){var o=l[pr];if(o)return o;for(var h=l.parentNode;h;){if(o=h[xa]||h[pr]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(l=mw(l);l!==null;){if(h=l[pr])return h;l=mw(l)}return o}l=h,h=l.parentNode}return null}function al(l){if(l=l[pr]||l[xa]){var o=l.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return l}return null}function cc(l){var o=l.tag;if(o===5||o===26||o===27||o===6)return l.stateNode;throw Error(n(33))}function Nl(l){var o=l[li];return o||(o=l[li]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function hn(l){l[Ni]=!0}var Jl=new Set,$a={};function Ga(l,o){Bl(l,o),Bl(l+"Capture",o)}function Bl(l,o){for($a[l]=o,l=0;l<o.length;l++)Jl.add(o[l])}var Wl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),EA={},TA={};function Ac(l){return et.call(TA,l)?!0:et.call(EA,l)?!1:Wl.test(l)?TA[l]=!0:(EA[l]=!0,!1)}function aa(l,o,h){if(Ac(o))if(h===null)l.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":l.removeAttribute(o);return;case"boolean":var g=o.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(o);return}}l.setAttribute(o,""+h)}}function Xl(l,o,h){if(h===null)l.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(o);return}l.setAttribute(o,""+h)}}function il(l,o,h,g){if(g===null)l.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttributeNS(o,h,""+g)}}function cr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function So(l){var o=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function oi(l,o,h){var g=Object.getOwnPropertyDescriptor(l.constructor.prototype,o);if(!l.hasOwnProperty(o)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var k=g.get,T=g.set;return Object.defineProperty(l,o,{configurable:!0,get:function(){return k.call(this)},set:function(Y){h=""+Y,T.call(this,Y)}}),Object.defineProperty(l,o,{enumerable:g.enumerable}),{getValue:function(){return h},setValue:function(Y){h=""+Y},stopTracking:function(){l._valueTracker=null,delete l[o]}}}}function Bi(l){if(!l._valueTracker){var o=So(l)?"checked":"value";l._valueTracker=oi(l,o,""+l[o])}}function UA(l){if(!l)return!1;var o=l._valueTracker;if(!o)return!0;var h=o.getValue(),g="";return l&&(g=So(l)?l.checked?"true":"false":l.value),l=g,l!==h?(o.setValue(l),!0):!1}function wr(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var _n=/[\n"\\]/g;function wn(l){return l.replace(_n,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Rc(l,o,h,g,k,T,Y,fe){l.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?l.type=Y:l.removeAttribute("type"),o!=null?Y==="number"?(o===0&&l.value===""||l.value!=o)&&(l.value=""+cr(o)):l.value!==""+cr(o)&&(l.value=""+cr(o)):Y!=="submit"&&Y!=="reset"||l.removeAttribute("value"),o!=null?FA(l,Y,cr(o)):h!=null?FA(l,Y,cr(h)):g!=null&&l.removeAttribute("value"),k==null&&T!=null&&(l.defaultChecked=!!T),k!=null&&(l.checked=k&&typeof k!="function"&&typeof k!="symbol"),fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"?l.name=""+cr(fe):l.removeAttribute("name")}function bd(l,o,h,g,k,T,Y,fe){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(l.type=T),o!=null||h!=null){if(!(T!=="submit"&&T!=="reset"||o!=null)){Bi(l);return}h=h!=null?""+cr(h):"",o=o!=null?""+cr(o):h,fe||o===l.value||(l.value=o),l.defaultValue=o}g=g??k,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=fe?l.checked:!!g,l.defaultChecked=!!g,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(l.name=Y),Bi(l)}function FA(l,o,h){o==="number"&&wr(l.ownerDocument)===l||l.defaultValue===""+h||(l.defaultValue=""+h)}function Fa(l,o,h,g){if(l=l.options,o){o={};for(var k=0;k<h.length;k++)o["$"+h[k]]=!0;for(h=0;h<l.length;h++)k=o.hasOwnProperty("$"+l[h].value),l[h].selected!==k&&(l[h].selected=k),k&&g&&(l[h].defaultSelected=!0)}else{for(h=""+cr(h),o=null,k=0;k<l.length;k++){if(l[k].value===h){l[k].selected=!0,g&&(l[k].defaultSelected=!0);return}o!==null||l[k].disabled||(o=l[k])}o!==null&&(o.selected=!0)}}function LA(l,o,h){if(o!=null&&(o=""+cr(o),o!==l.value&&(l.value=o),h==null)){l.defaultValue!==o&&(l.defaultValue=o);return}l.defaultValue=h!=null?""+cr(h):""}function MA(l,o,h,g){if(o==null){if(g!=null){if(h!=null)throw Error(n(92));if(Ae(g)){if(1<g.length)throw Error(n(93));g=g[0]}h=g}h==null&&(h=""),o=h}h=cr(o),l.defaultValue=h,g=l.textContent,g===h&&g!==""&&g!==null&&(l.value=g),Bi(l)}function qa(l,o){if(o){var h=l.firstChild;if(h&&h===l.lastChild&&h.nodeType===3){h.nodeValue=o;return}}l.textContent=o}var dc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function QA(l,o,h){var g=o.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?g?l.setProperty(o,""):o==="float"?l.cssFloat="":l[o]="":g?l.setProperty(o,h):typeof h!="number"||h===0||dc.has(o)?o==="float"?l.cssFloat=h:l[o]=(""+h).trim():l[o]=h+"px"}function vd(l,o,h){if(o!=null&&typeof o!="object")throw Error(n(62));if(l=l.style,h!=null){for(var g in h)!h.hasOwnProperty(g)||o!=null&&o.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var k in o)g=o[k],o.hasOwnProperty(k)&&h[k]!==g&&QA(l,k,g)}else for(var T in o)o.hasOwnProperty(T)&&QA(l,T,o[T])}function _A(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jn(l){return Pc.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function ll(){}var Zl=null;function uc(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var ki=null,bs=null;function yd(l){var o=al(l);if(o&&(l=o.stateNode)){var h=l[Pr]||null;e:switch(l=o.stateNode,o.type){case"input":if(Rc(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),o=h.name,h.type==="radio"&&o!=null){for(h=l;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+wn(""+o)+'"][type="radio"]'),o=0;o<h.length;o++){var g=h[o];if(g!==l&&g.form===l.form){var k=g[Pr]||null;if(!k)throw Error(n(90));Rc(g,k.value,k.defaultValue,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name)}}for(o=0;o<h.length;o++)g=h[o],g.form===l.form&&UA(g)}break e;case"textarea":LA(l,h.value,h.defaultValue);break e;case"select":o=h.value,o!=null&&Fa(l,!!h.multiple,o,!1)}}}var IA=!1;function wd(l,o,h){if(IA)return l(o,h);IA=!0;try{var g=l(o);return g}finally{if(IA=!1,(ki!==null||bs!==null)&&(Da(),ki&&(o=ki,l=bs,bs=ki=null,yd(o),l)))for(o=0;o<l.length;o++)yd(l[o])}}function ci(l,o){var h=l.stateNode;if(h===null)return null;var g=h[Pr]||null;if(g===null)return null;h=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(h&&typeof h!="function")throw Error(n(231,o,typeof h));return h}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ya=!1;if(ia)try{var Eo={};Object.defineProperty(Eo,"passive",{get:function(){Ya=!0}}),window.addEventListener("test",Eo,Eo),window.removeEventListener("test",Eo,Eo)}catch{Ya=!1}var Ja=null,To=null,kl=null;function jd(){if(kl)return kl;var l,o=To,h=o.length,g,k="value"in Ja?Ja.value:Ja.textContent,T=k.length;for(l=0;l<h&&o[l]===k[l];l++);var Y=h-l;for(g=1;g<=Y&&o[h-g]===k[T-g];g++);return kl=k.slice(l,1<g?1-g:void 0)}function Ci(l){var o=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&o===13&&(l=13)):l=o,l===10&&(l=13),32<=l||l===13?l:0}function hc(){return!0}function fc(){return!1}function In(l){function o(h,g,k,T,Y){this._reactName=h,this._targetInst=k,this.type=g,this.nativeEvent=T,this.target=Y,this.currentTarget=null;for(var fe in l)l.hasOwnProperty(fe)&&(h=l[fe],this[fe]=h?h(T):T[fe]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?hc:fc,this.isPropagationStopped=fc,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=hc)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=hc)},persist:function(){},isPersistent:hc}),o}var Cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Si=In(Cl),zr=p({},Cl,{view:0,detail:0}),zc=In(zr),Ei,eo,to,pc=p({},zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ws,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==to&&(to&&l.type==="mousemove"?(Ei=l.screenX-to.screenX,eo=l.screenY-to.screenY):eo=Ei=0,to=l),Ei)},movementY:function(l){return"movementY"in l?l.movementY:eo}}),OA=In(pc),Ti=p({},pc,{dataTransfer:0}),Ui=In(Ti),DA=p({},zr,{relatedTarget:0}),so=In(DA),ol=p({},Cl,{animationName:0,elapsedTime:0,pseudoElement:0}),M=In(ol),le=p({},Cl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),je=In(le),Se=p({},Cl,{data:0}),De=In(Se),dt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ns(l){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(l):(l=Zt[l])?!!o[l]:!1}function ws(){return ns}var Us=p({},zr,{key:function(l){if(l.key){var o=dt[l.key]||l.key;if(o!=="Unidentified")return o}return l.type==="keypress"?(l=Ci(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?yt[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ws,charCode:function(l){return l.type==="keypress"?Ci(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Ci(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),tr=In(Us),Jr=p({},pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fn=In(Jr),mr=p({},zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ws}),On=In(mr),Nn=p({},Cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),la=In(Nn),ro=p({},pc,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),cl=In(ro),no=p({},Cl,{newState:0,oldState:0}),RA=In(no),Kc=[9,13,27,32],Fi=ia&&"CompositionEvent"in window,Li=null;ia&&"documentMode"in document&&(Li=document.documentMode);var Uo=ia&&"TextEvent"in window&&!Li,Ai=ia&&(!Fi||Li&&8<Li&&11>=Li),Wr=" ",$s=!1;function Fo(l,o){switch(l){case"keyup":return Kc.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lo(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Al=!1;function Bn(l,o){switch(l){case"compositionend":return Lo(o);case"keypress":return o.which!==32?null:($s=!0,Wr);case"textInput":return l=o.data,l===Wr&&$s?null:l;default:return null}}function $n(l,o){if(Al)return l==="compositionend"||!Fi&&Fo(l,o)?(l=jd(),kl=To=Ja=null,Al=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ai&&o.locale!=="ko"?null:o.data;default:return null}}var Vc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mi(l){var o=l&&l.nodeName&&l.nodeName.toLowerCase();return o==="input"?!!Vc[l.type]:o==="textarea"}function ar(l,o,h,g){ki?bs?bs.push(g):bs=[g]:ki=g,o=Um(o,"onChange"),0<o.length&&(h=new Si("onChange","change",null,h,g),l.push({event:h,listeners:o}))}var Qi=null,Ur=null;function mc(l){sw(l,0)}function Gn(l){var o=cc(l);if(UA(o))return l}function _i(l,o){if(l==="change")return o}var Os=!1;if(ia){var ba;if(ia){var dl="oninput"in document;if(!dl){var ul=document.createElement("div");ul.setAttribute("oninput","return;"),dl=typeof ul.oninput=="function"}ba=dl}else ba=!1;Os=ba&&(!document.documentMode||9<document.documentMode)}function Sl(){Qi&&(Qi.detachEvent("onpropertychange",ao),Ur=Qi=null)}function ao(l){if(l.propertyName==="value"&&Gn(Ur)){var o=[];ar(o,Ur,l,uc(l)),wd(mc,o)}}function gc(l,o,h){l==="focusin"?(Sl(),Qi=o,Ur=h,Qi.attachEvent("onpropertychange",ao)):l==="focusout"&&Sl()}function cn(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Gn(Ur)}function La(l,o){if(l==="click")return Gn(o)}function oa(l,o){if(l==="input"||l==="change")return Gn(o)}function ca(l,o){return l===o&&(l!==0||1/l===1/o)||l!==l&&o!==o}var Js=typeof Object.is=="function"?Object.is:ca;function va(l,o){if(Js(l,o))return!0;if(typeof l!="object"||l===null||typeof o!="object"||o===null)return!1;var h=Object.keys(l),g=Object.keys(o);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var k=h[g];if(!et.call(o,k)||!Js(l[k],o[k]))return!1}return!0}function xc(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function bc(l,o){var h=xc(l);l=0;for(var g;h;){if(h.nodeType===3){if(g=l+h.textContent.length,l<=o&&g>=o)return{node:h,offset:o-l};l=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=xc(h)}}function hl(l,o){return l&&o?l===o?!0:l&&l.nodeType===3?!1:o&&o.nodeType===3?hl(l,o.parentNode):"contains"in l?l.contains(o):l.compareDocumentPosition?!!(l.compareDocumentPosition(o)&16):!1:!1}function El(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var o=wr(l.document);o instanceof l.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)l=o.contentWindow;else break;o=wr(l.document)}return o}function Tl(l){var o=l&&l.nodeName&&l.nodeName.toLowerCase();return o&&(o==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||o==="textarea"||l.contentEditable==="true")}var fl=ia&&"documentMode"in document&&11>=document.documentMode,pn=null,io=null,ya=null,Ma=!1;function ir(l,o,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Ma||pn==null||pn!==wr(g)||(g=pn,"selectionStart"in g&&Tl(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ya&&va(ya,g)||(ya=g,g=Um(io,"onSelect"),0<g.length&&(o=new Si("onSelect","select",null,o,h),l.push({event:o,listeners:g}),o.target=pn)))}function sr(l,o){var h={};return h[l.toLowerCase()]=o.toLowerCase(),h["Webkit"+l]="webkit"+o,h["Moz"+l]="moz"+o,h}var Er={animationend:sr("Animation","AnimationEnd"),animationiteration:sr("Animation","AnimationIteration"),animationstart:sr("Animation","AnimationStart"),transitionrun:sr("Transition","TransitionRun"),transitionstart:sr("Transition","TransitionStart"),transitioncancel:sr("Transition","TransitionCancel"),transitionend:sr("Transition","TransitionEnd")},Ar={},pl={};ia&&(pl=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);function ml(l){if(Ar[l])return Ar[l];if(!Er[l])return l;var o=Er[l],h;for(h in o)if(o.hasOwnProperty(h)&&h in pl)return Ar[l]=o[h];return l}var vc=ml("animationend"),Mo=ml("animationiteration"),Iu=ml("animationstart"),Ou=ml("transitionrun"),Du=ml("transitionstart"),Ru=ml("transitioncancel"),Nd=ml("transitionend"),Bd=new Map,Qo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qo.push("scrollEnd");function di(l,o){Bd.set(l,o),Ga(o,[l])}var $c=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},ui=[],Ul=0,kd=0;function HA(){for(var l=Ul,o=kd=Ul=0;o<l;){var h=ui[o];ui[o++]=null;var g=ui[o];ui[o++]=null;var k=ui[o];ui[o++]=null;var T=ui[o];if(ui[o++]=null,g!==null&&k!==null){var Y=g.pending;Y===null?k.next=k:(k.next=Y.next,Y.next=k),g.pending=k}T!==0&&PA(h,k,T)}}function yc(l,o,h,g){ui[Ul++]=l,ui[Ul++]=o,ui[Ul++]=h,ui[Ul++]=g,kd|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function Cd(l,o,h,g){return yc(l,o,h,g),wa(l)}function Fl(l,o){return yc(l,null,null,o),wa(l)}function PA(l,o,h){l.lanes|=h;var g=l.alternate;g!==null&&(g.lanes|=h);for(var k=!1,T=l.return;T!==null;)T.childLanes|=h,g=T.alternate,g!==null&&(g.childLanes|=h),T.tag===22&&(l=T.stateNode,l===null||l._visibility&1||(k=!0)),l=T,T=T.return;return l.tag===3?(T=l.stateNode,k&&o!==null&&(k=31-Vt(h),l=T.hiddenUpdates,g=l[k],g===null?l[k]=[o]:g.push(o),o.lane=h|536870912),T):null}function wa(l){if(50<Ps)throw Ps=0,er=null,Error(n(185));for(var o=l.return;o!==null;)l=o,o=l.return;return l.tag===3?l.stateNode:null}var Aa={};function Sd(l,o,h,g){this.tag=l,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ja(l,o,h,g){return new Sd(l,o,h,g)}function lo(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Ii(l,o){var h=l.alternate;return h===null?(h=ja(l.tag,o,l.key,l.mode),h.elementType=l.elementType,h.type=l.type,h.stateNode=l.stateNode,h.alternate=l,l.alternate=h):(h.pendingProps=o,h.type=l.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=l.flags&65011712,h.childLanes=l.childLanes,h.lanes=l.lanes,h.child=l.child,h.memoizedProps=l.memoizedProps,h.memoizedState=l.memoizedState,h.updateQueue=l.updateQueue,o=l.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=l.sibling,h.index=l.index,h.ref=l.ref,h.refCleanup=l.refCleanup,h}function zA(l,o){l.flags&=65011714;var h=l.alternate;return h===null?(l.childLanes=0,l.lanes=o,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,o=h.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),l}function oo(l,o,h,g,k,T){var Y=0;if(g=l,typeof l=="function")lo(l)&&(Y=1);else if(typeof l=="string")Y=QS(l,h,V.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case $:return l=ja(31,h,o,k),l.elementType=$,l.lanes=T,l;case w:return _o(h.children,k,T,o);case S:Y=8,k|=24;break;case C:return l=ja(12,h,o,k|2),l.elementType=C,l.lanes=T,l;case z:return l=ja(13,h,o,k),l.elementType=z,l.lanes=T,l;case I:return l=ja(19,h,o,k),l.elementType=I,l.lanes=T,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case U:Y=10;break e;case F:Y=9;break e;case _:Y=11;break e;case H:Y=14;break e;case ee:Y=16,g=null;break e}Y=29,h=Error(n(130,l===null?"null":typeof l,"")),g=null}return o=ja(Y,h,o,k),o.elementType=l,o.type=g,o.lanes=T,o}function _o(l,o,h,g){return l=ja(7,l,g,o),l.lanes=h,l}function KA(l,o,h){return l=ja(6,l,null,o),l.lanes=h,l}function Ed(l){var o=ja(18,null,null,0);return o.stateNode=l,o}function Gc(l,o,h){return o=ja(4,l.children!==null?l.children:[],l.key,o),o.lanes=h,o.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},o}var wc=new WeakMap;function Oi(l,o){if(typeof l=="object"&&l!==null){var h=wc.get(l);return h!==void 0?h:(o={value:l,source:o,stack:Xe(o)},wc.set(l,o),o)}return{value:l,source:o,stack:Xe(o)}}var qc=[],jc=0,Td=null,Io=0,Di=[],Ri=0,Oo=null,Hi=1,Qa="";function hi(l,o){qc[jc++]=Io,qc[jc++]=Td,Td=l,Io=o}function Yh(l,o,h){Di[Ri++]=Hi,Di[Ri++]=Qa,Di[Ri++]=Oo,Oo=l;var g=Hi;l=Qa;var k=32-Vt(g)-1;g&=~(1<<k),h+=1;var T=32-Vt(o)+k;if(30<T){var Y=k-k%5;T=(g&(1<<Y)-1).toString(32),g>>=Y,k-=Y,Hi=1<<32-Vt(o)+k|h<<k|g,Qa=T+l}else Hi=1<<T|h<<k|g,Qa=l}function Hu(l){l.return!==null&&(hi(l,1),Yh(l,1,0))}function Ud(l){for(;l===Td;)Td=qc[--jc],qc[jc]=null,Io=qc[--jc],qc[jc]=null;for(;l===Oo;)Oo=Di[--Ri],Di[Ri]=null,Qa=Di[--Ri],Di[Ri]=null,Hi=Di[--Ri],Di[Ri]=null}function Jh(l,o){Di[Ri++]=Hi,Di[Ri++]=Qa,Di[Ri++]=Oo,Hi=o.id,Qa=o.overflow,Oo=l}var da=null,Fr=null,Gs=!1,_a=null,An=!1,Wa=Error(n(519));function Do(l){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw co(Oi(o,l)),Wa}function Pu(l){var o=l.stateNode,h=l.type,g=l.memoizedProps;switch(o[pr]=l,o[Pr]=g,h){case"dialog":nr("cancel",o),nr("close",o);break;case"iframe":case"object":case"embed":nr("load",o);break;case"video":case"audio":for(h=0;h<_0.length;h++)nr(_0[h],o);break;case"source":nr("error",o);break;case"img":case"image":case"link":nr("error",o),nr("load",o);break;case"details":nr("toggle",o);break;case"input":nr("invalid",o),bd(o,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":nr("invalid",o);break;case"textarea":nr("invalid",o),MA(o,g.value,g.defaultValue,g.children)}h=g.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||o.textContent===""+h||g.suppressHydrationWarning===!0||iw(o.textContent,h)?(g.popover!=null&&(nr("beforetoggle",o),nr("toggle",o)),g.onScroll!=null&&nr("scroll",o),g.onScrollEnd!=null&&nr("scrollend",o),g.onClick!=null&&(o.onclick=ll),o=!0):o=!1,o||Do(l,!0)}function Ll(l){for(da=l.return;da;)switch(da.tag){case 5:case 31:case 13:An=!1;return;case 27:case 3:An=!0;return;default:da=da.return}}function ua(l){if(l!==da)return!1;if(!Gs)return Ll(l),Gs=!0,!1;var o=l.tag,h;if((h=o!==3&&o!==27)&&((h=o===5)&&(h=l.type,h=!(h!=="form"&&h!=="button")||$b(l.type,l.memoizedProps)),h=!h),h&&Fr&&Do(l),Ll(l),o===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Fr=pw(l)}else if(o===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Fr=pw(l)}else o===27?(o=Fr,Zd(l.type)?(l=Wb,Wb=null,Fr=l):Fr=o):Fr=da?Yo(l.stateNode.nextSibling):null;return!0}function Nc(){Fr=da=null,Gs=!1}function VA(){var l=_a;return l!==null&&(Ee===null?Ee=l:Ee.push.apply(Ee,l),_a=null),l}function co(l){_a===null?_a=[l]:_a.push(l)}var Fd=ae(null),Ro=null,Ml=null;function Ho(l,o,h){P(Fd,o._currentValue),o._currentValue=h}function Pi(l){l._currentValue=Fd.current,R(Fd)}function Yc(l,o,h){for(;l!==null;){var g=l.alternate;if((l.childLanes&o)!==o?(l.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),l===h)break;l=l.return}}function Ql(l,o,h,g){var k=l.child;for(k!==null&&(k.return=l);k!==null;){var T=k.dependencies;if(T!==null){var Y=k.child;T=T.firstContext;e:for(;T!==null;){var fe=T;T=k;for(var ke=0;ke<o.length;ke++)if(fe.context===o[ke]){T.lanes|=h,fe=T.alternate,fe!==null&&(fe.lanes|=h),Yc(T.return,h,l),g||(Y=null);break e}T=fe.next}}else if(k.tag===18){if(Y=k.return,Y===null)throw Error(n(341));Y.lanes|=h,T=Y.alternate,T!==null&&(T.lanes|=h),Yc(Y,h,l),Y=null}else Y=k.child;if(Y!==null)Y.return=k;else for(Y=k;Y!==null;){if(Y===l){Y=null;break}if(k=Y.sibling,k!==null){k.return=Y.return,Y=k;break}Y=Y.return}k=Y}}function Po(l,o,h,g){l=null;for(var k=o,T=!1;k!==null;){if(!T){if((k.flags&524288)!==0)T=!0;else if((k.flags&262144)!==0)break}if(k.tag===10){var Y=k.alternate;if(Y===null)throw Error(n(387));if(Y=Y.memoizedProps,Y!==null){var fe=k.type;Js(k.pendingProps.value,Y.value)||(l!==null?l.push(fe):l=[fe])}}else if(k===pe.current){if(Y=k.alternate,Y===null)throw Error(n(387));Y.memoizedState.memoizedState!==k.memoizedState.memoizedState&&(l!==null?l.push(H0):l=[H0])}k=k.return}l!==null&&Ql(o,l,h,g),o.flags|=262144}function Ld(l){for(l=l.firstContext;l!==null;){if(!Js(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function zo(l){Ro=l,Ml=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ha(l){return Wh(Ro,l)}function Md(l,o){return Ro===null&&zo(l),Wh(l,o)}function Wh(l,o){var h=o._currentValue;if(o={context:o,memoizedValue:h,next:null},Ml===null){if(l===null)throw Error(n(308));Ml=o,l.dependencies={lanes:0,firstContext:o},l.flags|=524288}else Ml=Ml.next=o;return h}var r0=typeof AbortController<"u"?AbortController:function(){var l=[],o=this.signal={aborted:!1,addEventListener:function(h,g){l.push(g)}};this.abort=function(){o.aborted=!0,l.forEach(function(h){return h()})}},n0=t.unstable_scheduleCallback,a0=t.unstable_NormalPriority,mn={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jc(){return{controller:new r0,data:new Map,refCount:0}}function $A(l){l.refCount--,l.refCount===0&&n0(a0,function(){l.controller.abort()})}var Wc=null,Qd=0,v=0,E=null;function O(l,o){if(Wc===null){var h=Wc=[];Qd=0,v=Ib(),E={status:"pending",value:void 0,then:function(g){h.push(g)}}}return Qd++,o.then(G,G),o}function G(){if(--Qd===0&&Wc!==null){E!==null&&(E.status="fulfilled");var l=Wc;Wc=null,v=0,E=null;for(var o=0;o<l.length;o++)(0,l[o])()}}function oe(l,o){var h=[],g={status:"pending",value:null,reason:null,then:function(k){h.push(k)}};return l.then(function(){g.status="fulfilled",g.value=o;for(var k=0;k<h.length;k++)(0,h[k])(o)},function(k){for(g.status="rejected",g.reason=k,k=0;k<h.length;k++)(0,h[k])(void 0)}),g}var ue=W.S;W.S=function(l,o){ot=pt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&O(l,o),ue!==null&&ue(l,o)};var he=ae(null);function me(){var l=he.current;return l!==null?l:Qr.pooledCache}function ge(l,o){o===null?P(he,he.current):P(he,o.pool)}function we(){var l=me();return l===null?null:{parent:mn._currentValue,pool:l}}var Te=Error(n(460)),$e=Error(n(474)),ye=Error(n(542)),Le={then:function(){}};function Me(l){return l=l.status,l==="fulfilled"||l==="rejected"}function lt(l,o,h){switch(h=l[h],h===void 0?l.push(o):h!==o&&(o.then(ll,ll),o=h),o.status){case"fulfilled":return o.value;case"rejected":throw l=o.reason,Bt(l),l;default:if(typeof o.status=="string")o.then(ll,ll);else{if(l=Qr,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=o,l.status="pending",l.then(function(g){if(o.status==="pending"){var k=o;k.status="fulfilled",k.value=g}},function(g){if(o.status==="pending"){var k=o;k.status="rejected",k.reason=g}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw l=o.reason,Bt(l),l}throw it=o,Te}}function Ve(l){try{var o=l._init;return o(l._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(it=h,Te):h}}var it=null;function ut(){if(it===null)throw Error(n(459));var l=it;return it=null,l}function Bt(l){if(l===Te||l===ye)throw Error(n(483))}var xt=null,es=0;function Kt(l){var o=es;return es+=1,xt===null&&(xt=[]),lt(xt,l,o)}function ks(l,o){o=o.props.ref,l.ref=o!==void 0?o:null}function Wt(l,o){throw o.$$typeof===x?Error(n(525)):(l=Object.prototype.toString.call(o),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":l)))}function Hs(l){function o(He,Fe){if(l){var qe=He.deletions;qe===null?(He.deletions=[Fe],He.flags|=16):qe.push(Fe)}}function h(He,Fe){if(!l)return null;for(;Fe!==null;)o(He,Fe),Fe=Fe.sibling;return null}function g(He){for(var Fe=new Map;He!==null;)He.key!==null?Fe.set(He.key,He):Fe.set(He.index,He),He=He.sibling;return Fe}function k(He,Fe){return He=Ii(He,Fe),He.index=0,He.sibling=null,He}function T(He,Fe,qe){return He.index=qe,l?(qe=He.alternate,qe!==null?(qe=qe.index,qe<Fe?(He.flags|=67108866,Fe):qe):(He.flags|=67108866,Fe)):(He.flags|=1048576,Fe)}function Y(He){return l&&He.alternate===null&&(He.flags|=67108866),He}function fe(He,Fe,qe,mt){return Fe===null||Fe.tag!==6?(Fe=KA(qe,He.mode,mt),Fe.return=He,Fe):(Fe=k(Fe,qe),Fe.return=He,Fe)}function ke(He,Fe,qe,mt){var gs=qe.type;return gs===w?At(He,Fe,qe.props.children,mt,qe.key):Fe!==null&&(Fe.elementType===gs||typeof gs=="object"&&gs!==null&&gs.$$typeof===ee&&Ve(gs)===Fe.type)?(Fe=k(Fe,qe.props),ks(Fe,qe),Fe.return=He,Fe):(Fe=oo(qe.type,qe.key,qe.props,null,He.mode,mt),ks(Fe,qe),Fe.return=He,Fe)}function Ye(He,Fe,qe,mt){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==qe.containerInfo||Fe.stateNode.implementation!==qe.implementation?(Fe=Gc(qe,He.mode,mt),Fe.return=He,Fe):(Fe=k(Fe,qe.children||[]),Fe.return=He,Fe)}function At(He,Fe,qe,mt,gs){return Fe===null||Fe.tag!==7?(Fe=_o(qe,He.mode,mt,gs),Fe.return=He,Fe):(Fe=k(Fe,qe),Fe.return=He,Fe)}function bt(He,Fe,qe){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return Fe=KA(""+Fe,He.mode,qe),Fe.return=He,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case m:return qe=oo(Fe.type,Fe.key,Fe.props,null,He.mode,qe),ks(qe,Fe),qe.return=He,qe;case j:return Fe=Gc(Fe,He.mode,qe),Fe.return=He,Fe;case ee:return Fe=Ve(Fe),bt(He,Fe,qe)}if(Ae(Fe)||q(Fe))return Fe=_o(Fe,He.mode,qe,null),Fe.return=He,Fe;if(typeof Fe.then=="function")return bt(He,Kt(Fe),qe);if(Fe.$$typeof===U)return bt(He,Md(He,Fe),qe);Wt(He,Fe)}return null}function Ze(He,Fe,qe,mt){var gs=Fe!==null?Fe.key:null;if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return gs!==null?null:fe(He,Fe,""+qe,mt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case m:return qe.key===gs?ke(He,Fe,qe,mt):null;case j:return qe.key===gs?Ye(He,Fe,qe,mt):null;case ee:return qe=Ve(qe),Ze(He,Fe,qe,mt)}if(Ae(qe)||q(qe))return gs!==null?null:At(He,Fe,qe,mt,null);if(typeof qe.then=="function")return Ze(He,Fe,Kt(qe),mt);if(qe.$$typeof===U)return Ze(He,Fe,Md(He,qe),mt);Wt(He,qe)}return null}function at(He,Fe,qe,mt,gs){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return He=He.get(qe)||null,fe(Fe,He,""+mt,gs);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case m:return He=He.get(mt.key===null?qe:mt.key)||null,ke(Fe,He,mt,gs);case j:return He=He.get(mt.key===null?qe:mt.key)||null,Ye(Fe,He,mt,gs);case ee:return mt=Ve(mt),at(He,Fe,qe,mt,gs)}if(Ae(mt)||q(mt))return He=He.get(qe)||null,At(Fe,He,mt,gs,null);if(typeof mt.then=="function")return at(He,Fe,qe,Kt(mt),gs);if(mt.$$typeof===U)return at(He,Fe,qe,Md(Fe,mt),gs);Wt(Fe,mt)}return null}function ts(He,Fe,qe,mt){for(var gs=null,jr=null,ls=Fe,Rs=Fe=0,or=null;ls!==null&&Rs<qe.length;Rs++){ls.index>Rs?(or=ls,ls=null):or=ls.sibling;var Nr=Ze(He,ls,qe[Rs],mt);if(Nr===null){ls===null&&(ls=or);break}l&&ls&&Nr.alternate===null&&o(He,ls),Fe=T(Nr,Fe,Rs),jr===null?gs=Nr:jr.sibling=Nr,jr=Nr,ls=or}if(Rs===qe.length)return h(He,ls),Gs&&hi(He,Rs),gs;if(ls===null){for(;Rs<qe.length;Rs++)ls=bt(He,qe[Rs],mt),ls!==null&&(Fe=T(ls,Fe,Rs),jr===null?gs=ls:jr.sibling=ls,jr=ls);return Gs&&hi(He,Rs),gs}for(ls=g(ls);Rs<qe.length;Rs++)or=at(ls,He,Rs,qe[Rs],mt),or!==null&&(l&&or.alternate!==null&&ls.delete(or.key===null?Rs:or.key),Fe=T(or,Fe,Rs),jr===null?gs=or:jr.sibling=or,jr=or);return l&&ls.forEach(function(nu){return o(He,nu)}),Gs&&hi(He,Rs),gs}function Ns(He,Fe,qe,mt){if(qe==null)throw Error(n(151));for(var gs=null,jr=null,ls=Fe,Rs=Fe=0,or=null,Nr=qe.next();ls!==null&&!Nr.done;Rs++,Nr=qe.next()){ls.index>Rs?(or=ls,ls=null):or=ls.sibling;var nu=Ze(He,ls,Nr.value,mt);if(nu===null){ls===null&&(ls=or);break}l&&ls&&nu.alternate===null&&o(He,ls),Fe=T(nu,Fe,Rs),jr===null?gs=nu:jr.sibling=nu,jr=nu,ls=or}if(Nr.done)return h(He,ls),Gs&&hi(He,Rs),gs;if(ls===null){for(;!Nr.done;Rs++,Nr=qe.next())Nr=bt(He,Nr.value,mt),Nr!==null&&(Fe=T(Nr,Fe,Rs),jr===null?gs=Nr:jr.sibling=Nr,jr=Nr);return Gs&&hi(He,Rs),gs}for(ls=g(ls);!Nr.done;Rs++,Nr=qe.next())Nr=at(ls,He,Rs,Nr.value,mt),Nr!==null&&(l&&Nr.alternate!==null&&ls.delete(Nr.key===null?Rs:Nr.key),Fe=T(Nr,Fe,Rs),jr===null?gs=Nr:jr.sibling=Nr,jr=Nr);return l&&ls.forEach(function($S){return o(He,$S)}),Gs&&hi(He,Rs),gs}function Gr(He,Fe,qe,mt){if(typeof qe=="object"&&qe!==null&&qe.type===w&&qe.key===null&&(qe=qe.props.children),typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case m:e:{for(var gs=qe.key;Fe!==null;){if(Fe.key===gs){if(gs=qe.type,gs===w){if(Fe.tag===7){h(He,Fe.sibling),mt=k(Fe,qe.props.children),mt.return=He,He=mt;break e}}else if(Fe.elementType===gs||typeof gs=="object"&&gs!==null&&gs.$$typeof===ee&&Ve(gs)===Fe.type){h(He,Fe.sibling),mt=k(Fe,qe.props),ks(mt,qe),mt.return=He,He=mt;break e}h(He,Fe);break}else o(He,Fe);Fe=Fe.sibling}qe.type===w?(mt=_o(qe.props.children,He.mode,mt,qe.key),mt.return=He,He=mt):(mt=oo(qe.type,qe.key,qe.props,null,He.mode,mt),ks(mt,qe),mt.return=He,He=mt)}return Y(He);case j:e:{for(gs=qe.key;Fe!==null;){if(Fe.key===gs)if(Fe.tag===4&&Fe.stateNode.containerInfo===qe.containerInfo&&Fe.stateNode.implementation===qe.implementation){h(He,Fe.sibling),mt=k(Fe,qe.children||[]),mt.return=He,He=mt;break e}else{h(He,Fe);break}else o(He,Fe);Fe=Fe.sibling}mt=Gc(qe,He.mode,mt),mt.return=He,He=mt}return Y(He);case ee:return qe=Ve(qe),Gr(He,Fe,qe,mt)}if(Ae(qe))return ts(He,Fe,qe,mt);if(q(qe)){if(gs=q(qe),typeof gs!="function")throw Error(n(150));return qe=gs.call(qe),Ns(He,Fe,qe,mt)}if(typeof qe.then=="function")return Gr(He,Fe,Kt(qe),mt);if(qe.$$typeof===U)return Gr(He,Fe,Md(He,qe),mt);Wt(He,qe)}return typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint"?(qe=""+qe,Fe!==null&&Fe.tag===6?(h(He,Fe.sibling),mt=k(Fe,qe),mt.return=He,He=mt):(h(He,Fe),mt=KA(qe,He.mode,mt),mt.return=He,He=mt),Y(He)):h(He,Fe)}return function(He,Fe,qe,mt){try{es=0;var gs=Gr(He,Fe,qe,mt);return xt=null,gs}catch(ls){if(ls===Te||ls===ye)throw ls;var jr=ja(29,ls,null,He.mode);return jr.lanes=mt,jr.return=He,jr}finally{}}}var Lr=Hs(!0),Es=Hs(!1),nt=!1;function _t(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xr(l,o){l=l.updateQueue,o.updateQueue===l&&(o.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function ms(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function vs(l,o,h){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(vr&2)!==0){var k=g.pending;return k===null?o.next=o:(o.next=k.next,k.next=o),g.pending=o,o=wa(l),PA(l,null,h),o}return yc(l,g,o,h),wa(l)}function gr(l,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194048)!==0)){var g=o.lanes;g&=l.pendingLanes,h|=g,o.lanes=h,Cs(l,h)}}function kn(l,o){var h=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var k=null,T=null;if(h=h.firstBaseUpdate,h!==null){do{var Y={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};T===null?k=T=Y:T=T.next=Y,h=h.next}while(h!==null);T===null?k=T=o:T=T.next=o}else k=T=o;h={baseState:g.baseState,firstBaseUpdate:k,lastBaseUpdate:T,shared:g.shared,callbacks:g.callbacks},l.updateQueue=h;return}l=h.lastBaseUpdate,l===null?h.firstBaseUpdate=o:l.next=o,h.lastBaseUpdate=o}var gn=!1;function xr(){if(gn){var l=E;if(l!==null)throw l}}function Cn(l,o,h,g){gn=!1;var k=l.updateQueue;nt=!1;var T=k.firstBaseUpdate,Y=k.lastBaseUpdate,fe=k.shared.pending;if(fe!==null){k.shared.pending=null;var ke=fe,Ye=ke.next;ke.next=null,Y===null?T=Ye:Y.next=Ye,Y=ke;var At=l.alternate;At!==null&&(At=At.updateQueue,fe=At.lastBaseUpdate,fe!==Y&&(fe===null?At.firstBaseUpdate=Ye:fe.next=Ye,At.lastBaseUpdate=ke))}if(T!==null){var bt=k.baseState;Y=0,At=Ye=ke=null,fe=T;do{var Ze=fe.lane&-536870913,at=Ze!==fe.lane;if(at?(Zs&Ze)===Ze:(g&Ze)===Ze){Ze!==0&&Ze===v&&(gn=!0),At!==null&&(At=At.next={lane:0,tag:fe.tag,payload:fe.payload,callback:null,next:null});e:{var ts=l,Ns=fe;Ze=o;var Gr=h;switch(Ns.tag){case 1:if(ts=Ns.payload,typeof ts=="function"){bt=ts.call(Gr,bt,Ze);break e}bt=ts;break e;case 3:ts.flags=ts.flags&-65537|128;case 0:if(ts=Ns.payload,Ze=typeof ts=="function"?ts.call(Gr,bt,Ze):ts,Ze==null)break e;bt=p({},bt,Ze);break e;case 2:nt=!0}}Ze=fe.callback,Ze!==null&&(l.flags|=64,at&&(l.flags|=8192),at=k.callbacks,at===null?k.callbacks=[Ze]:at.push(Ze))}else at={lane:Ze,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},At===null?(Ye=At=at,ke=bt):At=At.next=at,Y|=Ze;if(fe=fe.next,fe===null){if(fe=k.shared.pending,fe===null)break;at=fe,fe=at.next,at.next=null,k.lastBaseUpdate=at,k.shared.pending=null}}while(!0);At===null&&(ke=bt),k.baseState=ke,k.firstBaseUpdate=Ye,k.lastBaseUpdate=At,T===null&&(k.shared.lanes=0),N|=Y,l.lanes=Y,l.memoizedState=bt}}function Na(l,o){if(typeof l!="function")throw Error(n(191,l));l.call(o)}function Sn(l,o){var h=l.callbacks;if(h!==null)for(l.callbacks=null,l=0;l<h.length;l++)Na(h[l],o)}var Ss=ae(null),Ws=ae(0);function Mr(l,o){l=b,P(Ws,l),P(Ss,o),b=l|o.baseLanes}function dr(){P(Ws,b),P(Ss,Ss.current)}function En(){b=Ws.current,R(Ss),R(Ws)}var Zr=ae(null),Xs=null;function xn(l){var o=l.alternate;P(rr,rr.current&1),P(Zr,l),Xs===null&&(o===null||Ss.current!==null||o.memoizedState!==null)&&(Xs=l)}function br(l){P(rr,rr.current),P(Zr,l),Xs===null&&(Xs=l)}function Tn(l){l.tag===22?(P(rr,rr.current),P(Zr,l),Xs===null&&(Xs=l)):Un()}function Un(){P(rr,rr.current),P(Zr,Zr.current)}function Br(l){R(Zr),Xs===l&&(Xs=null),R(rr)}var rr=ae(0);function Ba(l){for(var o=l;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Yb(h)||Jb(h)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break;for(;o.sibling===null;){if(o.return===null||o.return===l)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var dn=0,ds=null,fs=null,lr=null,Xa=!1,fi=!1,Ia=!1,en=0,Ko=0,_l=null,Xc=0;function kr(){throw Error(n(321))}function _d(l,o){if(o===null)return!1;for(var h=0;h<o.length&&h<l.length;h++)if(!Js(l[h],o[h]))return!1;return!0}function zu(l,o,h,g,k,T){return dn=T,ds=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,W.H=l===null||l.memoizedState===null?im:af,Ia=!1,T=h(g,k),Ia=!1,fi&&(T=gl(o,h,g,k)),GA(l),T}function GA(l){W.H=Xu;var o=fs!==null&&fs.next!==null;if(dn=0,lr=fs=ds=null,Xa=!1,Ko=0,_l=null,o)throw Error(n(300));l===null||tn||(l=l.dependencies,l!==null&&Ld(l)&&(tn=!0))}function gl(l,o,h,g){ds=l;var k=0;do{if(fi&&(_l=null),Ko=0,fi=!1,25<=k)throw Error(n(301));if(k+=1,lr=fs=null,l.updateQueue!=null){var T=l.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}W.H=lf,T=o(h,g)}while(fi);return T}function Ku(){var l=W.H,o=l.useState()[0];return o=typeof o.then=="function"?Vo(o):o,l=l.useState()[0],(fs!==null?fs.memoizedState:null)!==l&&(ds.flags|=1024),o}function Id(){var l=en!==0;return en=0,l}function Od(l,o,h){o.updateQueue=l.updateQueue,o.flags&=-2053,l.lanes&=~h}function qA(l){if(Xa){for(l=l.memoizedState;l!==null;){var o=l.queue;o!==null&&(o.pending=null),l=l.next}Xa=!1}dn=0,lr=fs=ds=null,fi=!1,Ko=en=0,_l=null}function Dn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lr===null?ds.memoizedState=lr=l:lr=lr.next=l,lr}function Kr(){if(fs===null){var l=ds.alternate;l=l!==null?l.memoizedState:null}else l=fs.next;var o=lr===null?ds.memoizedState:lr.next;if(o!==null)lr=o,fs=l;else{if(l===null)throw ds.alternate===null?Error(n(467)):Error(n(310));fs=l,l={memoizedState:fs.memoizedState,baseState:fs.baseState,baseQueue:fs.baseQueue,queue:fs.queue,next:null},lr===null?ds.memoizedState=lr=l:lr=lr.next=l}return lr}function YA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vo(l){var o=Ko;return Ko+=1,_l===null&&(_l=[]),l=lt(_l,l,o),o=ds,(lr===null?o.memoizedState:lr.next)===null&&(o=o.alternate,W.H=o===null||o.memoizedState===null?im:af),l}function Zc(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Vo(l);if(l.$$typeof===U)return ha(l)}throw Error(n(438,String(l)))}function qn(l){var o=null,h=ds.updateQueue;if(h!==null&&(o=h.memoCache),o==null){var g=ds.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(o={data:g.data.map(function(k){return k.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),h===null&&(h=YA(),ds.updateQueue=h),h.memoCache=o,h=o.data[o.index],h===void 0)for(h=o.data[o.index]=Array(l),g=0;g<l;g++)h[g]=ce;return o.index++,h}function zi(l,o){return typeof o=="function"?o(l):o}function Dd(l){var o=Kr();return eA(o,fs,l)}function eA(l,o,h){var g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=h;var k=l.baseQueue,T=g.pending;if(T!==null){if(k!==null){var Y=k.next;k.next=T.next,T.next=Y}o.baseQueue=k=T,g.pending=null}if(T=l.baseState,k===null)l.memoizedState=T;else{o=k.next;var fe=Y=null,ke=null,Ye=o,At=!1;do{var bt=Ye.lane&-536870913;if(bt!==Ye.lane?(Zs&bt)===bt:(dn&bt)===bt){var Ze=Ye.revertLane;if(Ze===0)ke!==null&&(ke=ke.next={lane:0,revertLane:0,gesture:null,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),bt===v&&(At=!0);else if((dn&Ze)===Ze){Ye=Ye.next,Ze===v&&(At=!0);continue}else bt={lane:0,revertLane:Ye.revertLane,gesture:null,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},ke===null?(fe=ke=bt,Y=T):ke=ke.next=bt,ds.lanes|=Ze,N|=Ze;bt=Ye.action,Ia&&h(T,bt),T=Ye.hasEagerState?Ye.eagerState:h(T,bt)}else Ze={lane:bt,revertLane:Ye.revertLane,gesture:Ye.gesture,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},ke===null?(fe=ke=Ze,Y=T):ke=ke.next=Ze,ds.lanes|=bt,N|=bt;Ye=Ye.next}while(Ye!==null&&Ye!==o);if(ke===null?Y=T:ke.next=fe,!Js(T,l.memoizedState)&&(tn=!0,At&&(h=E,h!==null)))throw h;l.memoizedState=T,l.baseState=Y,l.baseQueue=ke,g.lastRenderedState=T}return k===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function Rd(l){var o=Kr(),h=o.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=l;var g=h.dispatch,k=h.pending,T=o.memoizedState;if(k!==null){h.pending=null;var Y=k=k.next;do T=l(T,Y.action),Y=Y.next;while(Y!==k);Js(T,o.memoizedState)||(tn=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),h.lastRenderedState=T}return[T,g]}function Hd(l,o,h){var g=ds,k=Kr(),T=Gs;if(T){if(h===void 0)throw Error(n(407));h=h()}else h=o();var Y=!Js((fs||k).memoizedState,h);if(Y&&(k.memoizedState=h,tn=!0),k=k.queue,tf($u.bind(null,g,k,l),[l]),k.getSnapshot!==o||Y||lr!==null&&lr.memoizedState.tag&1){if(g.flags|=2048,kc(9,{destroy:void 0},Vu.bind(null,g,k,h,o),null),Qr===null)throw Error(n(349));T||(dn&127)!==0||Ao(g,o,h)}return h}function Ao(l,o,h){l.flags|=16384,l={getSnapshot:o,value:h},o=ds.updateQueue,o===null?(o=YA(),ds.updateQueue=o,o.stores=[l]):(h=o.stores,h===null?o.stores=[l]:h.push(l))}function Vu(l,o,h,g){o.value=h,o.getSnapshot=g,Xh(o)&&Gu(l)}function $u(l,o,h){return h(function(){Xh(o)&&Gu(l)})}function Xh(l){var o=l.getSnapshot;l=l.value;try{var h=o();return!Js(l,h)}catch{return!0}}function Gu(l){var o=Fl(l,2);o!==null&&_r(o,l,2)}function uo(l){var o=Dn();if(typeof l=="function"){var h=l;if(l=h(),Ia){kt(!0);try{h()}finally{kt(!1)}}}return o.memoizedState=o.baseState=l,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:l},o}function Zh(l,o,h,g){return l.baseState=h,eA(l,fs,typeof g=="function"?g:zi)}function Pd(l,o,h,g,k){if(JA(l))throw Error(n(485));if(l=o.action,l!==null){var T={payload:k,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){T.listeners.push(Y)}};W.T!==null?h(!0):T.isTransition=!1,g(T),h=o.pending,h===null?(T.next=o.pending=T,qu(o,T)):(T.next=h.next,o.pending=h.next=T)}}function qu(l,o){var h=o.action,g=o.payload,k=l.state;if(o.isTransition){var T=W.T,Y={};W.T=Y;try{var fe=h(k,g),ke=W.S;ke!==null&&ke(Y,fe),Rn(l,o,fe)}catch(Ye){Bc(l,o,Ye)}finally{T!==null&&Y.types!==null&&(T.types=Y.types),W.T=T}}else try{T=h(k,g),Rn(l,o,T)}catch(Ye){Bc(l,o,Ye)}}function Rn(l,o,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(g){tA(l,o,g)},function(g){return Bc(l,o,g)}):tA(l,o,h)}function tA(l,o,h){o.status="fulfilled",o.value=h,zd(o),l.state=h,o=l.pending,o!==null&&(h=o.next,h===o?l.pending=null:(h=h.next,o.next=h,qu(l,h)))}function Bc(l,o,h){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do o.status="rejected",o.reason=h,zd(o),o=o.next;while(o!==g)}l.action=null}function zd(l){l=l.listeners;for(var o=0;o<l.length;o++)(0,l[o])()}function sA(l,o){return o}function Ki(l,o){if(Gs){var h=Qr.formState;if(h!==null){e:{var g=ds;if(Gs){if(Fr){t:{for(var k=Fr,T=An;k.nodeType!==8;){if(!T){k=null;break t}if(k=Yo(k.nextSibling),k===null){k=null;break t}}T=k.data,k=T==="F!"||T==="F"?k:null}if(k){Fr=Yo(k.nextSibling),g=k.data==="F!";break e}}Do(g)}g=!1}g&&(o=h[0])}}return h=Dn(),h.memoizedState=h.baseState=o,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sA,lastRenderedState:o},h.queue=g,h=f0.bind(null,ds,g),g.dispatch=h,g=uo(!1),T=Wu.bind(null,ds,!1,g.queue),g=Dn(),k={state:o,dispatch:null,action:l,pending:null},g.queue=k,h=Pd.bind(null,ds,k,T,h),k.dispatch=h,g.memoizedState=l,[o,h,!1]}function ho(l){var o=Kr();return fo(o,fs,l)}function fo(l,o,h){if(o=eA(l,o,sA)[0],l=Dd(zi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var g=Vo(o)}catch(Y){throw Y===Te?ye:Y}else g=o;o=Kr();var k=o.queue,T=k.dispatch;return h!==o.memoizedState&&(ds.flags|=2048,kc(9,{destroy:void 0},Kd.bind(null,k,h),null)),[g,T,l]}function Kd(l,o){l.action=o}function Vd(l){var o=Kr(),h=fs;if(h!==null)return fo(o,h,l);Kr(),o=o.memoizedState,h=Kr();var g=h.queue.dispatch;return h.memoizedState=l,[o,g,!1]}function kc(l,o,h,g){return l={tag:l,create:h,deps:g,inst:o,next:null},o=ds.updateQueue,o===null&&(o=YA(),ds.updateQueue=o),h=o.lastEffect,h===null?o.lastEffect=l.next=l:(g=h.next,h.next=l,l.next=g,o.lastEffect=l),l}function ef(){return Kr().memoizedState}function rA(l,o,h,g){var k=Dn();ds.flags|=l,k.memoizedState=kc(1|o,{destroy:void 0},h,g===void 0?null:g)}function nA(l,o,h,g){var k=Kr();g=g===void 0?null:g;var T=k.memoizedState.inst;fs!==null&&g!==null&&_d(g,fs.memoizedState.deps)?k.memoizedState=kc(o,T,h,g):(ds.flags|=l,k.memoizedState=kc(1|o,T,h,g))}function i0(l,o){rA(8390656,8,l,o)}function tf(l,o){nA(2048,8,l,o)}function Xp(l){ds.flags|=4;var o=ds.updateQueue;if(o===null)o=YA(),ds.updateQueue=o,o.events=[l];else{var h=o.events;h===null?o.events=[l]:h.push(l)}}function l0(l){var o=Kr().memoizedState;return Xp({ref:o,nextImpl:l}),function(){if((vr&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function sf(l,o){return nA(4,2,l,o)}function Zp(l,o){return nA(4,4,l,o)}function em(l,o){if(typeof o=="function"){l=l();var h=o(l);return function(){typeof h=="function"?h():o(null)}}if(o!=null)return l=l(),o.current=l,function(){o.current=null}}function tm(l,o,h){h=h!=null?h.concat([l]):null,nA(4,4,em.bind(null,o,l),h)}function o0(){}function Yu(l,o){var h=Kr();o=o===void 0?null:o;var g=h.memoizedState;return o!==null&&_d(o,g[1])?g[0]:(h.memoizedState=[l,o],l)}function Ju(l,o){var h=Kr();o=o===void 0?null:o;var g=h.memoizedState;if(o!==null&&_d(o,g[1]))return g[0];if(g=l(),Ia){kt(!0);try{l()}finally{kt(!1)}}return h.memoizedState=[g,o],g}function c0(l,o,h){return h===void 0||(dn&1073741824)!==0&&(Zs&261930)===0?l.memoizedState=o:(l.memoizedState=h,l=Hn(),ds.lanes|=l,N|=l,h)}function A0(l,o,h,g){return Js(h,o)?h:Ss.current!==null?(l=c0(l,h,g),Js(l,o)||(tn=!0),l):(dn&42)===0||(dn&1073741824)!==0&&(Zs&261930)===0?(tn=!0,l.memoizedState=h):(l=Hn(),ds.lanes|=l,N|=l,o)}function rf(l,o,h,g,k){var T=se.p;se.p=T!==0&&8>T?T:8;var Y=W.T,fe={};W.T=fe,Wu(l,!1,o,h);try{var ke=k(),Ye=W.S;if(Ye!==null&&Ye(fe,ke),ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var At=oe(ke,g);$o(l,o,At,cs(l))}else $o(l,o,g,cs(l))}catch(bt){$o(l,o,{then:function(){},status:"rejected",reason:bt},cs())}finally{se.p=T,Y!==null&&fe.types!==null&&(Y.types=fe.types),W.T=Y}}function sm(){}function nf(l,o,h,g){if(l.tag!==5)throw Error(n(476));var k=d0(l).queue;rf(l,k,o,Z,h===null?sm:function(){return rm(l),h(g)})}function d0(l){var o=l.memoizedState;if(o!==null)return o;o={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:Z},next:null};var h={};return o.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:h},next:null},l.memoizedState=o,l=l.alternate,l!==null&&(l.memoizedState=o),o}function rm(l){var o=d0(l);o.next===null&&(o=l.alternate.memoizedState),$o(l,o.next.queue,{},cs())}function $d(){return ha(H0)}function u0(){return Kr().memoizedState}function h0(){return Kr().memoizedState}function Cb(l){for(var o=l.return;o!==null;){switch(o.tag){case 24:case 3:var h=cs();l=ms(h);var g=vs(o,l,h);g!==null&&(_r(g,o,h),gr(g,o,h)),o={cache:Jc()},l.payload=o;return}o=o.return}}function Sb(l,o,h){var g=cs();h={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},JA(l)?nm(o,h):(h=Cd(l,o,h,g),h!==null&&(_r(h,l,g),am(h,o,g)))}function f0(l,o,h){var g=cs();$o(l,o,h,g)}function $o(l,o,h,g){var k={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(JA(l))nm(o,k);else{var T=l.alternate;if(l.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var Y=o.lastRenderedState,fe=T(Y,h);if(k.hasEagerState=!0,k.eagerState=fe,Js(fe,Y))return yc(l,o,k,0),Qr===null&&HA(),!1}catch{}finally{}if(h=Cd(l,o,k,g),h!==null)return _r(h,l,g),am(h,o,g),!0}return!1}function Wu(l,o,h,g){if(g={lane:2,revertLane:Ib(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},JA(l)){if(o)throw Error(n(479))}else o=Cd(l,h,g,2),o!==null&&_r(o,l,2)}function JA(l){var o=l.alternate;return l===ds||o!==null&&o===ds}function nm(l,o){fi=Xa=!0;var h=l.pending;h===null?o.next=o:(o.next=h.next,h.next=o),l.pending=o}function am(l,o,h){if((h&4194048)!==0){var g=o.lanes;g&=l.pendingLanes,h|=g,o.lanes=h,Cs(l,h)}}var Xu={readContext:ha,use:Zc,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useLayoutEffect:kr,useInsertionEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useSyncExternalStore:kr,useId:kr,useHostTransitionStatus:kr,useFormState:kr,useActionState:kr,useOptimistic:kr,useMemoCache:kr,useCacheRefresh:kr};Xu.useEffectEvent=kr;var im={readContext:ha,use:Zc,useCallback:function(l,o){return Dn().memoizedState=[l,o===void 0?null:o],l},useContext:ha,useEffect:i0,useImperativeHandle:function(l,o,h){h=h!=null?h.concat([l]):null,rA(4194308,4,em.bind(null,o,l),h)},useLayoutEffect:function(l,o){return rA(4194308,4,l,o)},useInsertionEffect:function(l,o){rA(4,2,l,o)},useMemo:function(l,o){var h=Dn();o=o===void 0?null:o;var g=l();if(Ia){kt(!0);try{l()}finally{kt(!1)}}return h.memoizedState=[g,o],g},useReducer:function(l,o,h){var g=Dn();if(h!==void 0){var k=h(o);if(Ia){kt(!0);try{h(o)}finally{kt(!1)}}}else k=o;return g.memoizedState=g.baseState=k,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:k},g.queue=l,l=l.dispatch=Sb.bind(null,ds,l),[g.memoizedState,l]},useRef:function(l){var o=Dn();return l={current:l},o.memoizedState=l},useState:function(l){l=uo(l);var o=l.queue,h=f0.bind(null,ds,o);return o.dispatch=h,[l.memoizedState,h]},useDebugValue:o0,useDeferredValue:function(l,o){var h=Dn();return c0(h,l,o)},useTransition:function(){var l=uo(!1);return l=rf.bind(null,ds,l.queue,!0,!1),Dn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,o,h){var g=ds,k=Dn();if(Gs){if(h===void 0)throw Error(n(407));h=h()}else{if(h=o(),Qr===null)throw Error(n(349));(Zs&127)!==0||Ao(g,o,h)}k.memoizedState=h;var T={value:h,getSnapshot:o};return k.queue=T,i0($u.bind(null,g,T,l),[l]),g.flags|=2048,kc(9,{destroy:void 0},Vu.bind(null,g,T,h,o),null),h},useId:function(){var l=Dn(),o=Qr.identifierPrefix;if(Gs){var h=Qa,g=Hi;h=(g&~(1<<32-Vt(g)-1)).toString(32)+h,o="_"+o+"R_"+h,h=en++,0<h&&(o+="H"+h.toString(32)),o+="_"}else h=Xc++,o="_"+o+"r_"+h.toString(32)+"_";return l.memoizedState=o},useHostTransitionStatus:$d,useFormState:Ki,useActionState:Ki,useOptimistic:function(l){var o=Dn();o.memoizedState=o.baseState=l;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=h,o=Wu.bind(null,ds,!0,h),h.dispatch=o,[l,o]},useMemoCache:qn,useCacheRefresh:function(){return Dn().memoizedState=Cb.bind(null,ds)},useEffectEvent:function(l){var o=Dn(),h={impl:l};return o.memoizedState=h,function(){if((vr&2)!==0)throw Error(n(440));return h.impl.apply(void 0,arguments)}}},af={readContext:ha,use:Zc,useCallback:Yu,useContext:ha,useEffect:tf,useImperativeHandle:tm,useInsertionEffect:sf,useLayoutEffect:Zp,useMemo:Ju,useReducer:Dd,useRef:ef,useState:function(){return Dd(zi)},useDebugValue:o0,useDeferredValue:function(l,o){var h=Kr();return A0(h,fs.memoizedState,l,o)},useTransition:function(){var l=Dd(zi)[0],o=Kr().memoizedState;return[typeof l=="boolean"?l:Vo(l),o]},useSyncExternalStore:Hd,useId:u0,useHostTransitionStatus:$d,useFormState:ho,useActionState:ho,useOptimistic:function(l,o){var h=Kr();return Zh(h,fs,l,o)},useMemoCache:qn,useCacheRefresh:h0};af.useEffectEvent=l0;var lf={readContext:ha,use:Zc,useCallback:Yu,useContext:ha,useEffect:tf,useImperativeHandle:tm,useInsertionEffect:sf,useLayoutEffect:Zp,useMemo:Ju,useReducer:Rd,useRef:ef,useState:function(){return Rd(zi)},useDebugValue:o0,useDeferredValue:function(l,o){var h=Kr();return fs===null?c0(h,l,o):A0(h,fs.memoizedState,l,o)},useTransition:function(){var l=Rd(zi)[0],o=Kr().memoizedState;return[typeof l=="boolean"?l:Vo(l),o]},useSyncExternalStore:Hd,useId:u0,useHostTransitionStatus:$d,useFormState:Vd,useActionState:Vd,useOptimistic:function(l,o){var h=Kr();return fs!==null?Zh(h,fs,l,o):(h.baseState=l,[l,h.queue.dispatch])},useMemoCache:qn,useCacheRefresh:h0};lf.useEffectEvent=l0;function of(l,o,h,g){o=l.memoizedState,h=h(g,o),h=h==null?o:p({},o,h),l.memoizedState=h,l.lanes===0&&(l.updateQueue.baseState=h)}var cf={enqueueSetState:function(l,o,h){l=l._reactInternals;var g=cs(),k=ms(g);k.payload=o,h!=null&&(k.callback=h),o=vs(l,k,g),o!==null&&(_r(o,l,g),gr(o,l,g))},enqueueReplaceState:function(l,o,h){l=l._reactInternals;var g=cs(),k=ms(g);k.tag=1,k.payload=o,h!=null&&(k.callback=h),o=vs(l,k,g),o!==null&&(_r(o,l,g),gr(o,l,g))},enqueueForceUpdate:function(l,o){l=l._reactInternals;var h=cs(),g=ms(h);g.tag=2,o!=null&&(g.callback=o),o=vs(l,g,h),o!==null&&(_r(o,l,h),gr(o,l,h))}};function Af(l,o,h,g,k,T,Y){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,T,Y):o.prototype&&o.prototype.isPureReactComponent?!va(h,g)||!va(k,T):!0}function p0(l,o,h,g){l=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,g),o.state!==l&&cf.enqueueReplaceState(o,o.state,null)}function aA(l,o){var h=o;if("ref"in o){h={};for(var g in o)g!=="ref"&&(h[g]=o[g])}if(l=l.defaultProps){h===o&&(h=p({},h));for(var k in l)h[k]===void 0&&(h[k]=l[k])}return h}function lm(l){$c(l)}function Zu(l){console.error(l)}function eh(l){$c(l)}function th(l,o){try{var h=l.onUncaughtError;h(o.value,{componentStack:o.stack})}catch(g){setTimeout(function(){throw g})}}function m0(l,o,h){try{var g=l.onCaughtError;g(h.value,{componentStack:h.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(k){setTimeout(function(){throw k})}}function g0(l,o,h){return h=ms(h),h.tag=3,h.payload={element:null},h.callback=function(){th(l,o)},h}function x0(l){return l=ms(l),l.tag=3,l}function b0(l,o,h,g){var k=h.type.getDerivedStateFromError;if(typeof k=="function"){var T=g.value;l.payload=function(){return k(T)},l.callback=function(){m0(o,h,g)}}var Y=h.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(l.callback=function(){m0(o,h,g),typeof k!="function"&&(It===null?It=new Set([this]):It.add(this));var fe=g.stack;this.componentDidCatch(g.value,{componentStack:fe!==null?fe:""})})}function Eb(l,o,h,g,k){if(h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(o=h.alternate,o!==null&&Po(o,h,k,!0),h=Zr.current,h!==null){switch(h.tag){case 31:case 13:return Xs===null?Pl():h.alternate===null&&B===0&&(B=3),h.flags&=-257,h.flags|=65536,h.lanes=k,g===Le?h.flags|=16384:(o=h.updateQueue,o===null?h.updateQueue=new Set([g]):o.add(g),Mb(l,g,k)),!1;case 22:return h.flags|=65536,g===Le?h.flags|=16384:(o=h.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([g])},h.updateQueue=o):(h=o.retryQueue,h===null?o.retryQueue=new Set([g]):h.add(g)),Mb(l,g,k)),!1}throw Error(n(435,h.tag))}return Mb(l,g,k),Pl(),!1}if(Gs)return o=Zr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=k,g!==Wa&&(l=Error(n(422),{cause:g}),co(Oi(l,h)))):(g!==Wa&&(o=Error(n(423),{cause:g}),co(Oi(o,h))),l=l.current.alternate,l.flags|=65536,k&=-k,l.lanes|=k,g=Oi(g,h),k=g0(l.stateNode,g,k),kn(l,k),B!==4&&(B=2)),!1;var T=Error(n(520),{cause:g});if(T=Oi(T,h),be===null?be=[T]:be.push(T),B!==4&&(B=2),o===null)return!0;g=Oi(g,h),h=o;do{switch(h.tag){case 3:return h.flags|=65536,l=k&-k,h.lanes|=l,l=g0(h.stateNode,g,l),kn(h,l),!1;case 1:if(o=h.type,T=h.stateNode,(h.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(It===null||!It.has(T))))return h.flags|=65536,k&=-k,h.lanes|=k,k=x0(k),b0(k,l,h,g),kn(h,k),!1}h=h.return}while(h!==null);return!1}var v0=Error(n(461)),tn=!1;function ka(l,o,h,g){o.child=l===null?Es(o,null,h,g):Lr(o,l.child,h,g)}function Fn(l,o,h,g,k){h=h.render;var T=o.ref;if("ref"in g){var Y={};for(var fe in g)fe!=="ref"&&(Y[fe]=g[fe])}else Y=g;return zo(o),g=zu(l,o,h,Y,T,k),fe=Id(),l!==null&&!tn?(Od(l,o,k),Sc(l,o,k)):(Gs&&fe&&Hu(o),o.flags|=1,ka(l,o,g,k),o.child)}function iA(l,o,h,g,k){if(l===null){var T=h.type;return typeof T=="function"&&!lo(T)&&T.defaultProps===void 0&&h.compare===null?(o.tag=15,o.type=T,WA(l,o,T,g,k)):(l=oo(h.type,null,g,o,o.mode,k),l.ref=o.ref,l.return=o,o.child=l)}if(T=l.child,!S0(l,k)){var Y=T.memoizedProps;if(h=h.compare,h=h!==null?h:va,h(Y,g)&&l.ref===o.ref)return Sc(l,o,k)}return o.flags|=1,l=Ii(T,g),l.ref=o.ref,l.return=o,o.child=l}function WA(l,o,h,g,k){if(l!==null){var T=l.memoizedProps;if(va(T,g)&&l.ref===o.ref)if(tn=!1,o.pendingProps=g=T,S0(l,k))(l.flags&131072)!==0&&(tn=!0);else return o.lanes=l.lanes,Sc(l,o,k)}return rh(l,o,h,g,k)}function Cc(l,o,h,g){var k=g.children,T=l!==null?l.memoizedState:null;if(l===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((o.flags&128)!==0){if(T=T!==null?T.baseLanes|h:h,l!==null){for(g=o.child=l.child,k=0;g!==null;)k=k|g.lanes|g.childLanes,g=g.sibling;g=k&~T}else g=0,o.child=null;return Gd(l,o,T,h,g)}if((h&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},l!==null&&ge(o,T!==null?T.cachePool:null),T!==null?Mr(o,T):dr(),Tn(o);else return g=o.lanes=536870912,Gd(l,o,T!==null?T.baseLanes|h:h,h,g)}else T!==null?(ge(o,T.cachePool),Mr(o,T),Un(),o.memoizedState=null):(l!==null&&ge(o,null),dr(),Un());return ka(l,o,k,h),o.child}function Il(l,o){return l!==null&&l.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Gd(l,o,h,g,k){var T=me();return T=T===null?null:{parent:mn._currentValue,pool:T},o.memoizedState={baseLanes:h,cachePool:T},l!==null&&ge(o,null),dr(),Tn(o),l!==null&&Po(l,o,g,!0),o.childLanes=k,null}function Ol(l,o){return o=df({mode:o.mode,children:o.children},l.mode),o.ref=l.ref,l.child=o,o.return=l,o}function y0(l,o,h){return Lr(o,l.child,null,h),l=Ol(o,o.pendingProps),l.flags|=2,Br(o),o.memoizedState=null,l}function om(l,o,h){var g=o.pendingProps,k=(o.flags&128)!==0;if(o.flags&=-129,l===null){if(Gs){if(g.mode==="hidden")return l=Ol(o,g),o.lanes=536870912,Il(null,l);if(br(o),(l=Fr)?(l=fw(l,An),l=l!==null&&l.data==="&"?l:null,l!==null&&(o.memoizedState={dehydrated:l,treeContext:Oo!==null?{id:Hi,overflow:Qa}:null,retryLane:536870912,hydrationErrors:null},h=Ed(l),h.return=o,o.child=h,da=o,Fr=null)):l=null,l===null)throw Do(o);return o.lanes=536870912,null}return Ol(o,g)}var T=l.memoizedState;if(T!==null){var Y=T.dehydrated;if(br(o),k)if(o.flags&256)o.flags&=-257,o=y0(l,o,h);else if(o.memoizedState!==null)o.child=l.child,o.flags|=128,o=null;else throw Error(n(558));else if(tn||Po(l,o,h,!1),k=(h&l.childLanes)!==0,tn||k){if(g=Qr,g!==null&&(Y=Tr(g,h),Y!==0&&Y!==T.retryLane))throw T.retryLane=Y,Fl(l,Y),_r(g,l,Y),v0;Pl(),o=y0(l,o,h)}else l=T.treeContext,Fr=Yo(Y.nextSibling),da=o,Gs=!0,_a=null,An=!1,l!==null&&Jh(o,l),o=Ol(o,g),o.flags|=4096;return o}return l=Ii(l.child,{mode:g.mode,children:g.children}),l.ref=o.ref,o.child=l,l.return=o,l}function sh(l,o){var h=o.ref;if(h===null)l!==null&&l.ref!==null&&(o.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(l===null||l.ref!==h)&&(o.flags|=4194816)}}function rh(l,o,h,g,k){return zo(o),h=zu(l,o,h,g,void 0,k),g=Id(),l!==null&&!tn?(Od(l,o,k),Sc(l,o,k)):(Gs&&g&&Hu(o),o.flags|=1,ka(l,o,h,k),o.child)}function qd(l,o,h,g,k,T){return zo(o),o.updateQueue=null,h=gl(o,g,h,k),GA(l),g=Id(),l!==null&&!tn?(Od(l,o,T),Sc(l,o,T)):(Gs&&g&&Hu(o),o.flags|=1,ka(l,o,h,T),o.child)}function w0(l,o,h,g,k){if(zo(o),o.stateNode===null){var T=Aa,Y=h.contextType;typeof Y=="object"&&Y!==null&&(T=ha(Y)),T=new h(g,T),o.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=cf,o.stateNode=T,T._reactInternals=o,T=o.stateNode,T.props=g,T.state=o.memoizedState,T.refs={},_t(o),Y=h.contextType,T.context=typeof Y=="object"&&Y!==null?ha(Y):Aa,T.state=o.memoizedState,Y=h.getDerivedStateFromProps,typeof Y=="function"&&(of(o,h,Y,g),T.state=o.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(Y=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),Y!==T.state&&cf.enqueueReplaceState(T,T.state,null),Cn(o,g,T,k),xr(),T.state=o.memoizedState),typeof T.componentDidMount=="function"&&(o.flags|=4194308),g=!0}else if(l===null){T=o.stateNode;var fe=o.memoizedProps,ke=aA(h,fe);T.props=ke;var Ye=T.context,At=h.contextType;Y=Aa,typeof At=="object"&&At!==null&&(Y=ha(At));var bt=h.getDerivedStateFromProps;At=typeof bt=="function"||typeof T.getSnapshotBeforeUpdate=="function",fe=o.pendingProps!==fe,At||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(fe||Ye!==Y)&&p0(o,T,g,Y),nt=!1;var Ze=o.memoizedState;T.state=Ze,Cn(o,g,T,k),xr(),Ye=o.memoizedState,fe||Ze!==Ye||nt?(typeof bt=="function"&&(of(o,h,bt,g),Ye=o.memoizedState),(ke=nt||Af(o,h,ke,g,Ze,Ye,Y))?(At||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=Ye),T.props=g,T.state=Ye,T.context=Y,g=ke):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{T=o.stateNode,Xr(l,o),Y=o.memoizedProps,At=aA(h,Y),T.props=At,bt=o.pendingProps,Ze=T.context,Ye=h.contextType,ke=Aa,typeof Ye=="object"&&Ye!==null&&(ke=ha(Ye)),fe=h.getDerivedStateFromProps,(Ye=typeof fe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(Y!==bt||Ze!==ke)&&p0(o,T,g,ke),nt=!1,Ze=o.memoizedState,T.state=Ze,Cn(o,g,T,k),xr();var at=o.memoizedState;Y!==bt||Ze!==at||nt||l!==null&&l.dependencies!==null&&Ld(l.dependencies)?(typeof fe=="function"&&(of(o,h,fe,g),at=o.memoizedState),(At=nt||Af(o,h,At,g,Ze,at,ke)||l!==null&&l.dependencies!==null&&Ld(l.dependencies))?(Ye||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,at,ke),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,at,ke)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||Y===l.memoizedProps&&Ze===l.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||Y===l.memoizedProps&&Ze===l.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=at),T.props=g,T.state=at,T.context=ke,g=At):(typeof T.componentDidUpdate!="function"||Y===l.memoizedProps&&Ze===l.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||Y===l.memoizedProps&&Ze===l.memoizedState||(o.flags|=1024),g=!1)}return T=g,sh(l,o),g=(o.flags&128)!==0,T||g?(T=o.stateNode,h=g&&typeof h.getDerivedStateFromError!="function"?null:T.render(),o.flags|=1,l!==null&&g?(o.child=Lr(o,l.child,null,k),o.child=Lr(o,null,h,k)):ka(l,o,h,k),o.memoizedState=T.state,l=o.child):l=Sc(l,o,k),l}function j0(l,o,h,g){return Nc(),o.flags|=256,ka(l,o,h,g),o.child}var XA={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function N0(l){return{baseLanes:l,cachePool:we()}}function B0(l,o,h){return l=l!==null?l.childLanes&~h:0,o&&(l|=de),l}function cm(l,o,h){var g=o.pendingProps,k=!1,T=(o.flags&128)!==0,Y;if((Y=T)||(Y=l!==null&&l.memoizedState===null?!1:(rr.current&2)!==0),Y&&(k=!0,o.flags&=-129),Y=(o.flags&32)!==0,o.flags&=-33,l===null){if(Gs){if(k?xn(o):Un(),(l=Fr)?(l=fw(l,An),l=l!==null&&l.data!=="&"?l:null,l!==null&&(o.memoizedState={dehydrated:l,treeContext:Oo!==null?{id:Hi,overflow:Qa}:null,retryLane:536870912,hydrationErrors:null},h=Ed(l),h.return=o,o.child=h,da=o,Fr=null)):l=null,l===null)throw Do(o);return Jb(l)?o.lanes=32:o.lanes=536870912,null}var fe=g.children;return g=g.fallback,k?(Un(),k=o.mode,fe=df({mode:"hidden",children:fe},k),g=_o(g,k,h,null),fe.return=o,g.return=o,fe.sibling=g,o.child=fe,g=o.child,g.memoizedState=N0(h),g.childLanes=B0(l,Y,h),o.memoizedState=XA,Il(null,g)):(xn(o),k0(o,fe))}var ke=l.memoizedState;if(ke!==null&&(fe=ke.dehydrated,fe!==null)){if(T)o.flags&256?(xn(o),o.flags&=-257,o=nh(l,o,h)):o.memoizedState!==null?(Un(),o.child=l.child,o.flags|=128,o=null):(Un(),fe=g.fallback,k=o.mode,g=df({mode:"visible",children:g.children},k),fe=_o(fe,k,h,null),fe.flags|=2,g.return=o,fe.return=o,g.sibling=fe,o.child=g,Lr(o,l.child,null,h),g=o.child,g.memoizedState=N0(h),g.childLanes=B0(l,Y,h),o.memoizedState=XA,o=Il(null,g));else if(xn(o),Jb(fe)){if(Y=fe.nextSibling&&fe.nextSibling.dataset,Y)var Ye=Y.dgst;Y=Ye,g=Error(n(419)),g.stack="",g.digest=Y,co({value:g,source:null,stack:null}),o=nh(l,o,h)}else if(tn||Po(l,o,h,!1),Y=(h&l.childLanes)!==0,tn||Y){if(Y=Qr,Y!==null&&(g=Tr(Y,h),g!==0&&g!==ke.retryLane))throw ke.retryLane=g,Fl(l,g),_r(Y,l,g),v0;Yb(fe)||Pl(),o=nh(l,o,h)}else Yb(fe)?(o.flags|=192,o.child=l.child,o=null):(l=ke.treeContext,Fr=Yo(fe.nextSibling),da=o,Gs=!0,_a=null,An=!1,l!==null&&Jh(o,l),o=k0(o,g.children),o.flags|=4096);return o}return k?(Un(),fe=g.fallback,k=o.mode,ke=l.child,Ye=ke.sibling,g=Ii(ke,{mode:"hidden",children:g.children}),g.subtreeFlags=ke.subtreeFlags&65011712,Ye!==null?fe=Ii(Ye,fe):(fe=_o(fe,k,h,null),fe.flags|=2),fe.return=o,g.return=o,g.sibling=fe,o.child=g,Il(null,g),g=o.child,fe=l.child.memoizedState,fe===null?fe=N0(h):(k=fe.cachePool,k!==null?(ke=mn._currentValue,k=k.parent!==ke?{parent:ke,pool:ke}:k):k=we(),fe={baseLanes:fe.baseLanes|h,cachePool:k}),g.memoizedState=fe,g.childLanes=B0(l,Y,h),o.memoizedState=XA,Il(l.child,g)):(xn(o),h=l.child,l=h.sibling,h=Ii(h,{mode:"visible",children:g.children}),h.return=o,h.sibling=null,l!==null&&(Y=o.deletions,Y===null?(o.deletions=[l],o.flags|=16):Y.push(l)),o.child=h,o.memoizedState=null,h)}function k0(l,o){return o=df({mode:"visible",children:o},l.mode),o.return=l,l.child=o}function df(l,o){return l=ja(22,l,null,o),l.lanes=0,l}function nh(l,o,h){return Lr(o,l.child,null,h),l=k0(o,o.pendingProps.children),l.flags|=2,o.memoizedState=null,l}function Am(l,o,h){l.lanes|=o;var g=l.alternate;g!==null&&(g.lanes|=o),Yc(l.return,o,h)}function C0(l,o,h,g,k,T){var Y=l.memoizedState;Y===null?l.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:k,treeForkCount:T}:(Y.isBackwards=o,Y.rendering=null,Y.renderingStartTime=0,Y.last=g,Y.tail=h,Y.tailMode=k,Y.treeForkCount=T)}function dm(l,o,h){var g=o.pendingProps,k=g.revealOrder,T=g.tail;g=g.children;var Y=rr.current,fe=(Y&2)!==0;if(fe?(Y=Y&1|2,o.flags|=128):Y&=1,P(rr,Y),ka(l,o,g,h),g=Gs?Io:0,!fe&&l!==null&&(l.flags&128)!==0)e:for(l=o.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Am(l,h,o);else if(l.tag===19)Am(l,h,o);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(k){case"forwards":for(h=o.child,k=null;h!==null;)l=h.alternate,l!==null&&Ba(l)===null&&(k=h),h=h.sibling;h=k,h===null?(k=o.child,o.child=null):(k=h.sibling,h.sibling=null),C0(o,!1,k,h,T,g);break;case"backwards":case"unstable_legacy-backwards":for(h=null,k=o.child,o.child=null;k!==null;){if(l=k.alternate,l!==null&&Ba(l)===null){o.child=k;break}l=k.sibling,k.sibling=h,h=k,k=l}C0(o,!0,h,null,T,g);break;case"together":C0(o,!1,null,null,void 0,g);break;default:o.memoizedState=null}return o.child}function Sc(l,o,h){if(l!==null&&(o.dependencies=l.dependencies),N|=o.lanes,(h&o.childLanes)===0)if(l!==null){if(Po(l,o,h,!1),(h&o.childLanes)===0)return null}else return null;if(l!==null&&o.child!==l.child)throw Error(n(153));if(o.child!==null){for(l=o.child,h=Ii(l,l.pendingProps),o.child=h,h.return=o;l.sibling!==null;)l=l.sibling,h=h.sibling=Ii(l,l.pendingProps),h.return=o;h.sibling=null}return o.child}function S0(l,o){return(l.lanes&o)!==0?!0:(l=l.dependencies,!!(l!==null&&Ld(l)))}function E0(l,o,h){switch(o.tag){case 3:Ce(o,o.stateNode.containerInfo),Ho(o,mn,l.memoizedState.cache),Nc();break;case 27:case 5:Ne(o);break;case 4:Ce(o,o.stateNode.containerInfo);break;case 10:Ho(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,br(o),null;break;case 13:var g=o.memoizedState;if(g!==null)return g.dehydrated!==null?(xn(o),o.flags|=128,null):(h&o.child.childLanes)!==0?cm(l,o,h):(xn(o),l=Sc(l,o,h),l!==null?l.sibling:null);xn(o);break;case 19:var k=(l.flags&128)!==0;if(g=(h&o.childLanes)!==0,g||(Po(l,o,h,!1),g=(h&o.childLanes)!==0),k){if(g)return dm(l,o,h);o.flags|=128}if(k=o.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),P(rr,rr.current),g)break;return null;case 22:return o.lanes=0,Cc(l,o,h,o.pendingProps);case 24:Ho(o,mn,l.memoizedState.cache)}return Sc(l,o,h)}function uf(l,o,h){if(l!==null)if(l.memoizedProps!==o.pendingProps)tn=!0;else{if(!S0(l,h)&&(o.flags&128)===0)return tn=!1,E0(l,o,h);tn=(l.flags&131072)!==0}else tn=!1,Gs&&(o.flags&1048576)!==0&&Yh(o,Io,o.index);switch(o.lanes=0,o.tag){case 16:e:{var g=o.pendingProps;if(l=Ve(o.elementType),o.type=l,typeof l=="function")lo(l)?(g=aA(l,g),o.tag=1,o=w0(null,o,l,g,h)):(o.tag=0,o=rh(null,o,l,g,h));else{if(l!=null){var k=l.$$typeof;if(k===_){o.tag=11,o=Fn(null,o,l,g,h);break e}else if(k===H){o.tag=14,o=iA(null,o,l,g,h);break e}}throw o=X(l)||l,Error(n(306,o,""))}}return o;case 0:return rh(l,o,o.type,o.pendingProps,h);case 1:return g=o.type,k=aA(g,o.pendingProps),w0(l,o,g,k,h);case 3:e:{if(Ce(o,o.stateNode.containerInfo),l===null)throw Error(n(387));g=o.pendingProps;var T=o.memoizedState;k=T.element,Xr(l,o),Cn(o,g,null,h);var Y=o.memoizedState;if(g=Y.cache,Ho(o,mn,g),g!==T.cache&&Ql(o,[mn],h,!0),xr(),g=Y.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:Y.cache},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){o=j0(l,o,g,h);break e}else if(g!==k){k=Oi(Error(n(424)),o),co(k),o=j0(l,o,g,h);break e}else{switch(l=o.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Fr=Yo(l.firstChild),da=o,Gs=!0,_a=null,An=!0,h=Es(o,null,g,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Nc(),g===k){o=Sc(l,o,h);break e}ka(l,o,g,h)}o=o.child}return o;case 26:return sh(l,o),l===null?(h=vw(o.type,null,o.pendingProps,null))?o.memoizedState=h:Gs||(h=o.type,l=o.pendingProps,g=Fm(ne.current).createElement(h),g[pr]=o,g[Pr]=l,xi(g,h,l),hn(g),o.stateNode=g):o.memoizedState=vw(o.type,l.memoizedProps,o.pendingProps,l.memoizedState),null;case 27:return Ne(o),l===null&&Gs&&(g=o.stateNode=gw(o.type,o.pendingProps,ne.current),da=o,An=!0,k=Fr,Zd(o.type)?(Wb=k,Fr=Yo(g.firstChild)):Fr=k),ka(l,o,o.pendingProps.children,h),sh(l,o),l===null&&(o.flags|=4194304),o.child;case 5:return l===null&&Gs&&((k=g=Fr)&&(g=wS(g,o.type,o.pendingProps,An),g!==null?(o.stateNode=g,da=o,Fr=Yo(g.firstChild),An=!1,k=!0):k=!1),k||Do(o)),Ne(o),k=o.type,T=o.pendingProps,Y=l!==null?l.memoizedProps:null,g=T.children,$b(k,T)?g=null:Y!==null&&$b(k,Y)&&(o.flags|=32),o.memoizedState!==null&&(k=zu(l,o,Ku,null,null,h),H0._currentValue=k),sh(l,o),ka(l,o,g,h),o.child;case 6:return l===null&&Gs&&((l=h=Fr)&&(h=jS(h,o.pendingProps,An),h!==null?(o.stateNode=h,da=o,Fr=null,l=!0):l=!1),l||Do(o)),null;case 13:return cm(l,o,h);case 4:return Ce(o,o.stateNode.containerInfo),g=o.pendingProps,l===null?o.child=Lr(o,null,g,h):ka(l,o,g,h),o.child;case 11:return Fn(l,o,o.type,o.pendingProps,h);case 7:return ka(l,o,o.pendingProps,h),o.child;case 8:return ka(l,o,o.pendingProps.children,h),o.child;case 12:return ka(l,o,o.pendingProps.children,h),o.child;case 10:return g=o.pendingProps,Ho(o,o.type,g.value),ka(l,o,g.children,h),o.child;case 9:return k=o.type._context,g=o.pendingProps.children,zo(o),k=ha(k),g=g(k),o.flags|=1,ka(l,o,g,h),o.child;case 14:return iA(l,o,o.type,o.pendingProps,h);case 15:return WA(l,o,o.type,o.pendingProps,h);case 19:return dm(l,o,h);case 31:return om(l,o,h);case 22:return Cc(l,o,h,o.pendingProps);case 24:return zo(o),g=ha(mn),l===null?(k=me(),k===null&&(k=Qr,T=Jc(),k.pooledCache=T,T.refCount++,T!==null&&(k.pooledCacheLanes|=h),k=T),o.memoizedState={parent:g,cache:k},_t(o),Ho(o,mn,k)):((l.lanes&h)!==0&&(Xr(l,o),Cn(o,null,null,h),xr()),k=l.memoizedState,T=o.memoizedState,k.parent!==g?(k={parent:g,cache:g},o.memoizedState=k,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=k),Ho(o,mn,g)):(g=T.cache,Ho(o,mn,g),g!==k.cache&&Ql(o,[mn],h,!0))),ka(l,o,o.pendingProps.children,h),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Go(l){l.flags|=4}function T0(l,o,h,g,k){if((o=(l.mode&32)!==0)&&(o=!1),o){if(l.flags|=16777216,(k&335544128)===k)if(l.stateNode.complete)l.flags|=8192;else if(Tc())l.flags|=8192;else throw it=Le,$e}else l.flags&=-16777217}function um(l,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!Bw(o))if(Tc())l.flags|=8192;else throw it=Le,$e}function ah(l,o){o!==null&&(l.flags|=4),l.flags&16384&&(o=l.tag!==22?ct():536870912,l.lanes|=o,xe|=o)}function ih(l,o){if(!Gs)switch(l.tailMode){case"hidden":o=l.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?l.tail=null:h.sibling=null;break;case"collapsed":h=l.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?o||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function sn(l){var o=l.alternate!==null&&l.alternate.child===l.child,h=0,g=0;if(o)for(var k=l.child;k!==null;)h|=k.lanes|k.childLanes,g|=k.subtreeFlags&65011712,g|=k.flags&65011712,k.return=l,k=k.sibling;else for(k=l.child;k!==null;)h|=k.lanes|k.childLanes,g|=k.subtreeFlags,g|=k.flags,k.return=l,k=k.sibling;return l.subtreeFlags|=g,l.childLanes=h,o}function Tb(l,o,h){var g=o.pendingProps;switch(Ud(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(o),null;case 1:return sn(o),null;case 3:return h=o.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),o.memoizedState.cache!==g&&(o.flags|=2048),Pi(mn),Ue(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(l===null||l.child===null)&&(ua(o)?Go(o):l===null||l.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,VA())),sn(o),null;case 26:var k=o.type,T=o.memoizedState;return l===null?(Go(o),T!==null?(sn(o),um(o,T)):(sn(o),T0(o,k,null,g,h))):T?T!==l.memoizedState?(Go(o),sn(o),um(o,T)):(sn(o),o.flags&=-16777217):(l=l.memoizedProps,l!==g&&Go(o),sn(o),T0(o,k,l,g,h)),null;case 27:if(Ie(o),h=ne.current,k=o.type,l!==null&&o.stateNode!=null)l.memoizedProps!==g&&Go(o);else{if(!g){if(o.stateNode===null)throw Error(n(166));return sn(o),null}l=V.current,ua(o)?Pu(o):(l=gw(k,g,h),o.stateNode=l,Go(o))}return sn(o),null;case 5:if(Ie(o),k=o.type,l!==null&&o.stateNode!=null)l.memoizedProps!==g&&Go(o);else{if(!g){if(o.stateNode===null)throw Error(n(166));return sn(o),null}if(T=V.current,ua(o))Pu(o);else{var Y=Fm(ne.current);switch(T){case 1:T=Y.createElementNS("http://www.w3.org/2000/svg",k);break;case 2:T=Y.createElementNS("http://www.w3.org/1998/Math/MathML",k);break;default:switch(k){case"svg":T=Y.createElementNS("http://www.w3.org/2000/svg",k);break;case"math":T=Y.createElementNS("http://www.w3.org/1998/Math/MathML",k);break;case"script":T=Y.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof g.is=="string"?Y.createElement("select",{is:g.is}):Y.createElement("select"),g.multiple?T.multiple=!0:g.size&&(T.size=g.size);break;default:T=typeof g.is=="string"?Y.createElement(k,{is:g.is}):Y.createElement(k)}}T[pr]=o,T[Pr]=g;e:for(Y=o.child;Y!==null;){if(Y.tag===5||Y.tag===6)T.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===o)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===o)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}o.stateNode=T;e:switch(xi(T,k,g),k){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Go(o)}}return sn(o),T0(o,o.type,l===null?null:l.memoizedProps,o.pendingProps,h),null;case 6:if(l&&o.stateNode!=null)l.memoizedProps!==g&&Go(o);else{if(typeof g!="string"&&o.stateNode===null)throw Error(n(166));if(l=ne.current,ua(o)){if(l=o.stateNode,h=o.memoizedProps,g=null,k=da,k!==null)switch(k.tag){case 27:case 5:g=k.memoizedProps}l[pr]=o,l=!!(l.nodeValue===h||g!==null&&g.suppressHydrationWarning===!0||iw(l.nodeValue,h)),l||Do(o,!0)}else l=Fm(l).createTextNode(g),l[pr]=o,o.stateNode=l}return sn(o),null;case 31:if(h=o.memoizedState,l===null||l.memoizedState!==null){if(g=ua(o),h!==null){if(l===null){if(!g)throw Error(n(318));if(l=o.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[pr]=o}else Nc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;sn(o),l=!1}else h=VA(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=h),l=!0;if(!l)return o.flags&256?(Br(o),o):(Br(o),null);if((o.flags&128)!==0)throw Error(n(558))}return sn(o),null;case 13:if(g=o.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(k=ua(o),g!==null&&g.dehydrated!==null){if(l===null){if(!k)throw Error(n(318));if(k=o.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(n(317));k[pr]=o}else Nc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;sn(o),k=!1}else k=VA(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=k),k=!0;if(!k)return o.flags&256?(Br(o),o):(Br(o),null)}return Br(o),(o.flags&128)!==0?(o.lanes=h,o):(h=g!==null,l=l!==null&&l.memoizedState!==null,h&&(g=o.child,k=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(k=g.alternate.memoizedState.cachePool.pool),T=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==k&&(g.flags|=2048)),h!==l&&h&&(o.child.flags|=8192),ah(o,o.updateQueue),sn(o),null);case 4:return Ue(),l===null&&Hb(o.stateNode.containerInfo),sn(o),null;case 10:return Pi(o.type),sn(o),null;case 19:if(R(rr),g=o.memoizedState,g===null)return sn(o),null;if(k=(o.flags&128)!==0,T=g.rendering,T===null)if(k)ih(g,!1);else{if(B!==0||l!==null&&(l.flags&128)!==0)for(l=o.child;l!==null;){if(T=Ba(l),T!==null){for(o.flags|=128,ih(g,!1),l=T.updateQueue,o.updateQueue=l,ah(o,l),o.subtreeFlags=0,l=h,h=o.child;h!==null;)zA(h,l),h=h.sibling;return P(rr,rr.current&1|2),Gs&&hi(o,g.treeForkCount),o.child}l=l.sibling}g.tail!==null&&pt()>Ht&&(o.flags|=128,k=!0,ih(g,!1),o.lanes=4194304)}else{if(!k)if(l=Ba(T),l!==null){if(o.flags|=128,k=!0,l=l.updateQueue,o.updateQueue=l,ah(o,l),ih(g,!0),g.tail===null&&g.tailMode==="hidden"&&!T.alternate&&!Gs)return sn(o),null}else 2*pt()-g.renderingStartTime>Ht&&h!==536870912&&(o.flags|=128,k=!0,ih(g,!1),o.lanes=4194304);g.isBackwards?(T.sibling=o.child,o.child=T):(l=g.last,l!==null?l.sibling=T:o.child=T,g.last=T)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=pt(),l.sibling=null,h=rr.current,P(rr,k?h&1|2:h&1),Gs&&hi(o,g.treeForkCount),l):(sn(o),null);case 22:case 23:return Br(o),En(),g=o.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(o.flags|=8192):g&&(o.flags|=8192),g?(h&536870912)!==0&&(o.flags&128)===0&&(sn(o),o.subtreeFlags&6&&(o.flags|=8192)):sn(o),h=o.updateQueue,h!==null&&ah(o,h.retryQueue),h=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==h&&(o.flags|=2048),l!==null&&R(he),null;case 24:return h=null,l!==null&&(h=l.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Pi(mn),sn(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function Ub(l,o){switch(Ud(o),o.tag){case 1:return l=o.flags,l&65536?(o.flags=l&-65537|128,o):null;case 3:return Pi(mn),Ue(),l=o.flags,(l&65536)!==0&&(l&128)===0?(o.flags=l&-65537|128,o):null;case 26:case 27:case 5:return Ie(o),null;case 31:if(o.memoizedState!==null){if(Br(o),o.alternate===null)throw Error(n(340));Nc()}return l=o.flags,l&65536?(o.flags=l&-65537|128,o):null;case 13:if(Br(o),l=o.memoizedState,l!==null&&l.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Nc()}return l=o.flags,l&65536?(o.flags=l&-65537|128,o):null;case 19:return R(rr),null;case 4:return Ue(),null;case 10:return Pi(o.type),null;case 22:case 23:return Br(o),En(),l!==null&&R(he),l=o.flags,l&65536?(o.flags=l&-65537|128,o):null;case 24:return Pi(mn),null;case 25:return null;default:return null}}function hm(l,o){switch(Ud(o),o.tag){case 3:Pi(mn),Ue();break;case 26:case 27:case 5:Ie(o);break;case 4:Ue();break;case 31:o.memoizedState!==null&&Br(o);break;case 13:Br(o);break;case 19:R(rr);break;case 10:Pi(o.type);break;case 22:case 23:Br(o),En(),l!==null&&R(he);break;case 24:Pi(mn)}}function ZA(l,o){try{var h=o.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var k=g.next;h=k;do{if((h.tag&l)===l){g=void 0;var T=h.create,Y=h.inst;g=T(),Y.destroy=g}h=h.next}while(h!==k)}}catch(fe){Ir(o,o.return,fe)}}function lA(l,o,h){try{var g=o.updateQueue,k=g!==null?g.lastEffect:null;if(k!==null){var T=k.next;g=T;do{if((g.tag&l)===l){var Y=g.inst,fe=Y.destroy;if(fe!==void 0){Y.destroy=void 0,k=o;var ke=h,Ye=fe;try{Ye()}catch(At){Ir(k,ke,At)}}}g=g.next}while(g!==T)}}catch(At){Ir(o,o.return,At)}}function hf(l){var o=l.updateQueue;if(o!==null){var h=l.stateNode;try{Sn(o,h)}catch(g){Ir(l,l.return,g)}}}function fm(l,o,h){h.props=aA(l.type,l.memoizedProps),h.state=l.memoizedState;try{h.componentWillUnmount()}catch(g){Ir(l,o,g)}}function Rt(l,o){try{var h=l.ref;if(h!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof h=="function"?l.refCleanup=h(g):h.current=g}}catch(k){Ir(l,o,k)}}function pi(l,o){var h=l.ref,g=l.refCleanup;if(h!==null)if(typeof g=="function")try{g()}catch(k){Ir(l,o,k)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(k){Ir(l,o,k)}else h.current=null}function lh(l){var o=l.type,h=l.memoizedProps,g=l.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":h.autoFocus&&g.focus();break e;case"img":h.src?g.src=h.src:h.srcSet&&(g.srcset=h.srcSet)}}catch(k){Ir(l,l.return,k)}}function Vi(l,o,h){try{var g=l.stateNode;mS(g,l.type,h,o),g[Pr]=o}catch(k){Ir(l,l.return,k)}}function pm(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Zd(l.type)||l.tag===4}function hr(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||pm(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Zd(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Vr(l,o,h){var g=l.tag;if(g===5||g===6)l=l.stateNode,o?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(l,o):(o=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,o.appendChild(l),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=ll));else if(g!==4&&(g===27&&Zd(l.type)&&(h=l.stateNode,o=null),l=l.child,l!==null))for(Vr(l,o,h),l=l.sibling;l!==null;)Vr(l,o,h),l=l.sibling}function ed(l,o,h){var g=l.tag;if(g===5||g===6)l=l.stateNode,o?h.insertBefore(l,o):h.appendChild(l);else if(g!==4&&(g===27&&Zd(l.type)&&(h=l.stateNode),l=l.child,l!==null))for(ed(l,o,h),l=l.sibling;l!==null;)ed(l,o,h),l=l.sibling}function mm(l){var o=l.stateNode,h=l.memoizedProps;try{for(var g=l.type,k=o.attributes;k.length;)o.removeAttributeNode(k[0]);xi(o,g,h),o[pr]=l,o[Pr]=h}catch(T){Ir(l,l.return,T)}}var Dl=!1,Yn=!1,Yd=!1,gm=typeof WeakSet=="function"?WeakSet:Set,Ca=null;function xm(l,o){if(l=l.containerInfo,Kb=Dm,l=El(l),Tl(l)){if("selectionStart"in l)var h={start:l.selectionStart,end:l.selectionEnd};else e:{h=(h=l.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var k=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{h.nodeType,T.nodeType}catch{h=null;break e}var Y=0,fe=-1,ke=-1,Ye=0,At=0,bt=l,Ze=null;t:for(;;){for(var at;bt!==h||k!==0&&bt.nodeType!==3||(fe=Y+k),bt!==T||g!==0&&bt.nodeType!==3||(ke=Y+g),bt.nodeType===3&&(Y+=bt.nodeValue.length),(at=bt.firstChild)!==null;)Ze=bt,bt=at;for(;;){if(bt===l)break t;if(Ze===h&&++Ye===k&&(fe=Y),Ze===T&&++At===g&&(ke=Y),(at=bt.nextSibling)!==null)break;bt=Ze,Ze=bt.parentNode}bt=at}h=fe===-1||ke===-1?null:{start:fe,end:ke}}else h=null}h=h||{start:0,end:0}}else h=null;for(Vb={focusedElem:l,selectionRange:h},Dm=!1,Ca=o;Ca!==null;)if(o=Ca,l=o.child,(o.subtreeFlags&1028)!==0&&l!==null)l.return=o,Ca=l;else for(;Ca!==null;){switch(o=Ca,T=o.alternate,l=o.flags,o.tag){case 0:if((l&4)!==0&&(l=o.updateQueue,l=l!==null?l.events:null,l!==null))for(h=0;h<l.length;h++)k=l[h],k.ref.impl=k.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&T!==null){l=void 0,h=o,k=T.memoizedProps,T=T.memoizedState,g=h.stateNode;try{var ts=aA(h.type,k);l=g.getSnapshotBeforeUpdate(ts,T),g.__reactInternalSnapshotBeforeUpdate=l}catch(Ns){Ir(h,h.return,Ns)}}break;case 3:if((l&1024)!==0){if(l=o.stateNode.containerInfo,h=l.nodeType,h===9)qb(l);else if(h===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":qb(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=o.sibling,l!==null){l.return=o.return,Ca=l;break}Ca=o.return}}function bm(l,o,h){var g=h.flags;switch(h.tag){case 0:case 11:case 15:Rl(l,h),g&4&&ZA(5,h);break;case 1:if(Rl(l,h),g&4)if(l=h.stateNode,o===null)try{l.componentDidMount()}catch(Y){Ir(h,h.return,Y)}else{var k=aA(h.type,o.memoizedProps);o=o.memoizedState;try{l.componentDidUpdate(k,o,l.__reactInternalSnapshotBeforeUpdate)}catch(Y){Ir(h,h.return,Y)}}g&64&&hf(h),g&512&&Rt(h,h.return);break;case 3:if(Rl(l,h),g&64&&(l=h.updateQueue,l!==null)){if(o=null,h.child!==null)switch(h.child.tag){case 27:case 5:o=h.child.stateNode;break;case 1:o=h.child.stateNode}try{Sn(l,o)}catch(Y){Ir(h,h.return,Y)}}break;case 27:o===null&&g&4&&mm(h);case 26:case 5:Rl(l,h),o===null&&g&4&&lh(h),g&512&&Rt(h,h.return);break;case 12:Rl(l,h);break;case 31:Rl(l,h),g&4&&F0(l,h);break;case 13:Rl(l,h),g&4&&vm(l,h),g&64&&(l=h.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(h=nS.bind(null,h),NS(l,h))));break;case 22:if(g=h.memoizedState!==null||Dl,!g){o=o!==null&&o.memoizedState!==null||Yn,k=Dl;var T=Yn;Dl=g,(Yn=o)&&!T?Ec(l,h,(h.subtreeFlags&8772)!==0):Rl(l,h),Dl=k,Yn=T}break;case 30:break;default:Rl(l,h)}}function U0(l){var o=l.alternate;o!==null&&(l.alternate=null,U0(o)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(o=l.stateNode,o!==null&&Co(o)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var un=null,mi=!1;function qo(l,o,h){for(h=h.child;h!==null;)ff(l,o,h),h=h.sibling}function ff(l,o,h){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(ht,h)}catch{}switch(h.tag){case 26:Yn||pi(h,o),qo(l,o,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Yn||pi(h,o);var g=un,k=mi;Zd(h.type)&&(un=h.stateNode,mi=!1),qo(l,o,h),O0(h.stateNode),un=g,mi=k;break;case 5:Yn||pi(h,o);case 6:if(g=un,k=mi,un=null,qo(l,o,h),un=g,mi=k,un!==null)if(mi)try{(un.nodeType===9?un.body:un.nodeName==="HTML"?un.ownerDocument.body:un).removeChild(h.stateNode)}catch(T){Ir(h,o,T)}else try{un.removeChild(h.stateNode)}catch(T){Ir(h,o,T)}break;case 18:un!==null&&(mi?(l=un,uw(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,h.stateNode),wf(l)):uw(un,h.stateNode));break;case 4:g=un,k=mi,un=h.stateNode.containerInfo,mi=!0,qo(l,o,h),un=g,mi=k;break;case 0:case 11:case 14:case 15:lA(2,h,o),Yn||lA(4,h,o),qo(l,o,h);break;case 1:Yn||(pi(h,o),g=h.stateNode,typeof g.componentWillUnmount=="function"&&fm(h,o,g)),qo(l,o,h);break;case 21:qo(l,o,h);break;case 22:Yn=(g=Yn)||h.memoizedState!==null,qo(l,o,h),Yn=g;break;default:qo(l,o,h)}}function F0(l,o){if(o.memoizedState===null&&(l=o.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{wf(l)}catch(h){Ir(o,o.return,h)}}}function vm(l,o){if(o.memoizedState===null&&(l=o.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{wf(l)}catch(h){Ir(o,o.return,h)}}function ym(l){switch(l.tag){case 31:case 13:case 19:var o=l.stateNode;return o===null&&(o=l.stateNode=new gm),o;case 22:return l=l.stateNode,o=l._retryCache,o===null&&(o=l._retryCache=new gm),o;default:throw Error(n(435,l.tag))}}function pf(l,o){var h=ym(l);o.forEach(function(g){if(!h.has(g)){h.add(g);var k=aS.bind(null,l,g);g.then(k,k)}})}function $i(l,o){var h=o.deletions;if(h!==null)for(var g=0;g<h.length;g++){var k=h[g],T=l,Y=o,fe=Y;e:for(;fe!==null;){switch(fe.tag){case 27:if(Zd(fe.type)){un=fe.stateNode,mi=!1;break e}break;case 5:un=fe.stateNode,mi=!1;break e;case 3:case 4:un=fe.stateNode.containerInfo,mi=!0;break e}fe=fe.return}if(un===null)throw Error(n(160));ff(T,Y,k),un=null,mi=!1,T=k.alternate,T!==null&&(T.return=null),k.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)oh(o,l),o=o.sibling}var po=null;function oh(l,o){var h=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:$i(o,l),rn(l),g&4&&(lA(3,l,l.return),ZA(3,l),lA(5,l,l.return));break;case 1:$i(o,l),rn(l),g&512&&(Yn||h===null||pi(h,h.return)),g&64&&Dl&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(h=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=h===null?g:h.concat(g))));break;case 26:var k=po;if($i(o,l),rn(l),g&512&&(Yn||h===null||pi(h,h.return)),g&4){var T=h!==null?h.memoizedState:null;if(g=l.memoizedState,h===null)if(g===null)if(l.stateNode===null){e:{g=l.type,h=l.memoizedProps,k=k.ownerDocument||k;t:switch(g){case"title":T=k.getElementsByTagName("title")[0],(!T||T[Ni]||T[pr]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=k.createElement(g),k.head.insertBefore(T,k.querySelector("head > title"))),xi(T,g,h),T[pr]=l,hn(T),g=T;break e;case"link":var Y=jw("link","href",k).get(g+(h.href||""));if(Y){for(var fe=0;fe<Y.length;fe++)if(T=Y[fe],T.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&T.getAttribute("rel")===(h.rel==null?null:h.rel)&&T.getAttribute("title")===(h.title==null?null:h.title)&&T.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){Y.splice(fe,1);break t}}T=k.createElement(g),xi(T,g,h),k.head.appendChild(T);break;case"meta":if(Y=jw("meta","content",k).get(g+(h.content||""))){for(fe=0;fe<Y.length;fe++)if(T=Y[fe],T.getAttribute("content")===(h.content==null?null:""+h.content)&&T.getAttribute("name")===(h.name==null?null:h.name)&&T.getAttribute("property")===(h.property==null?null:h.property)&&T.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&T.getAttribute("charset")===(h.charSet==null?null:h.charSet)){Y.splice(fe,1);break t}}T=k.createElement(g),xi(T,g,h),k.head.appendChild(T);break;default:throw Error(n(468,g))}T[pr]=l,hn(T),g=T}l.stateNode=g}else Nw(k,l.type,l.stateNode);else l.stateNode=ww(k,g,l.memoizedProps);else T!==g?(T===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):T.count--,g===null?Nw(k,l.type,l.stateNode):ww(k,g,l.memoizedProps)):g===null&&l.stateNode!==null&&Vi(l,l.memoizedProps,h.memoizedProps)}break;case 27:$i(o,l),rn(l),g&512&&(Yn||h===null||pi(h,h.return)),h!==null&&g&4&&Vi(l,l.memoizedProps,h.memoizedProps);break;case 5:if($i(o,l),rn(l),g&512&&(Yn||h===null||pi(h,h.return)),l.flags&32){k=l.stateNode;try{qa(k,"")}catch(ts){Ir(l,l.return,ts)}}g&4&&l.stateNode!=null&&(k=l.memoizedProps,Vi(l,k,h!==null?h.memoizedProps:k)),g&1024&&(Yd=!0);break;case 6:if($i(o,l),rn(l),g&4){if(l.stateNode===null)throw Error(n(162));g=l.memoizedProps,h=l.stateNode;try{h.nodeValue=g}catch(ts){Ir(l,l.return,ts)}}break;case 3:if(Qm=null,k=po,po=Lm(o.containerInfo),$i(o,l),po=k,rn(l),g&4&&h!==null&&h.memoizedState.isDehydrated)try{wf(o.containerInfo)}catch(ts){Ir(l,l.return,ts)}Yd&&(Yd=!1,L0(l));break;case 4:g=po,po=Lm(l.stateNode.containerInfo),$i(o,l),rn(l),po=g;break;case 12:$i(o,l),rn(l);break;case 31:$i(o,l),rn(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,pf(l,g)));break;case 13:$i(o,l),rn(l),l.child.flags&8192&&l.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Ke=pt()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,pf(l,g)));break;case 22:k=l.memoizedState!==null;var ke=h!==null&&h.memoizedState!==null,Ye=Dl,At=Yn;if(Dl=Ye||k,Yn=At||ke,$i(o,l),Yn=At,Dl=Ye,rn(l),g&8192)e:for(o=l.stateNode,o._visibility=k?o._visibility&-2:o._visibility|1,k&&(h===null||ke||Dl||Yn||td(l)),h=null,o=l;;){if(o.tag===5||o.tag===26){if(h===null){ke=h=o;try{if(T=ke.stateNode,k)Y=T.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{fe=ke.stateNode;var bt=ke.memoizedProps.style,Ze=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;fe.style.display=Ze==null||typeof Ze=="boolean"?"":(""+Ze).trim()}}catch(ts){Ir(ke,ke.return,ts)}}}else if(o.tag===6){if(h===null){ke=o;try{ke.stateNode.nodeValue=k?"":ke.memoizedProps}catch(ts){Ir(ke,ke.return,ts)}}}else if(o.tag===18){if(h===null){ke=o;try{var at=ke.stateNode;k?hw(at,!0):hw(ke.stateNode,!1)}catch(ts){Ir(ke,ke.return,ts)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===l)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;h===o&&(h=null),o=o.return}h===o&&(h=null),o.sibling.return=o.return,o=o.sibling}g&4&&(g=l.updateQueue,g!==null&&(h=g.retryQueue,h!==null&&(g.retryQueue=null,pf(l,h))));break;case 19:$i(o,l),rn(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,pf(l,g)));break;case 30:break;case 21:break;default:$i(o,l),rn(l)}}function rn(l){var o=l.flags;if(o&2){try{for(var h,g=l.return;g!==null;){if(pm(g)){h=g;break}g=g.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var k=h.stateNode,T=hr(l);ed(l,T,k);break;case 5:var Y=h.stateNode;h.flags&32&&(qa(Y,""),h.flags&=-33);var fe=hr(l);ed(l,fe,Y);break;case 3:case 4:var ke=h.stateNode.containerInfo,Ye=hr(l);Vr(l,Ye,ke);break;default:throw Error(n(161))}}catch(At){Ir(l,l.return,At)}l.flags&=-3}o&4096&&(l.flags&=-4097)}function L0(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var o=l;L0(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),l=l.sibling}}function Rl(l,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)bm(l,o.alternate,o),o=o.sibling}function td(l){for(l=l.child;l!==null;){var o=l;switch(o.tag){case 0:case 11:case 14:case 15:lA(4,o,o.return),td(o);break;case 1:pi(o,o.return);var h=o.stateNode;typeof h.componentWillUnmount=="function"&&fm(o,o.return,h),td(o);break;case 27:O0(o.stateNode);case 26:case 5:pi(o,o.return),td(o);break;case 22:o.memoizedState===null&&td(o);break;case 30:td(o);break;default:td(o)}l=l.sibling}}function Ec(l,o,h){for(h=h&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var g=o.alternate,k=l,T=o,Y=T.flags;switch(T.tag){case 0:case 11:case 15:Ec(k,T,h),ZA(4,T);break;case 1:if(Ec(k,T,h),g=T,k=g.stateNode,typeof k.componentDidMount=="function")try{k.componentDidMount()}catch(Ye){Ir(g,g.return,Ye)}if(g=T,k=g.updateQueue,k!==null){var fe=g.stateNode;try{var ke=k.shared.hiddenCallbacks;if(ke!==null)for(k.shared.hiddenCallbacks=null,k=0;k<ke.length;k++)Na(ke[k],fe)}catch(Ye){Ir(g,g.return,Ye)}}h&&Y&64&&hf(T),Rt(T,T.return);break;case 27:mm(T);case 26:case 5:Ec(k,T,h),h&&g===null&&Y&4&&lh(T),Rt(T,T.return);break;case 12:Ec(k,T,h);break;case 31:Ec(k,T,h),h&&Y&4&&F0(k,T);break;case 13:Ec(k,T,h),h&&Y&4&&vm(k,T);break;case 22:T.memoizedState===null&&Ec(k,T,h),Rt(T,T.return);break;case 30:break;default:Ec(k,T,h)}o=o.sibling}}function ch(l,o){var h=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),l=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),l!==h&&(l!=null&&l.refCount++,h!=null&&$A(h))}function oA(l,o){l=null,o.alternate!==null&&(l=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==l&&(o.refCount++,l!=null&&$A(l))}function Gi(l,o,h,g){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)wm(l,o,h,g),o=o.sibling}function wm(l,o,h,g){var k=o.flags;switch(o.tag){case 0:case 11:case 15:Gi(l,o,h,g),k&2048&&ZA(9,o);break;case 1:Gi(l,o,h,g);break;case 3:Gi(l,o,h,g),k&2048&&(l=null,o.alternate!==null&&(l=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==l&&(o.refCount++,l!=null&&$A(l)));break;case 12:if(k&2048){Gi(l,o,h,g),l=o.stateNode;try{var T=o.memoizedProps,Y=T.id,fe=T.onPostCommit;typeof fe=="function"&&fe(Y,o.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ke){Ir(o,o.return,ke)}}else Gi(l,o,h,g);break;case 31:Gi(l,o,h,g);break;case 13:Gi(l,o,h,g);break;case 23:break;case 22:T=o.stateNode,Y=o.alternate,o.memoizedState!==null?T._visibility&2?Gi(l,o,h,g):Ah(l,o):T._visibility&2?Gi(l,o,h,g):(T._visibility|=2,mo(l,o,h,g,(o.subtreeFlags&10256)!==0||!1)),k&2048&&ch(Y,o);break;case 24:Gi(l,o,h,g),k&2048&&oA(o.alternate,o);break;default:Gi(l,o,h,g)}}function mo(l,o,h,g,k){for(k=k&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var T=l,Y=o,fe=h,ke=g,Ye=Y.flags;switch(Y.tag){case 0:case 11:case 15:mo(T,Y,fe,ke,k),ZA(8,Y);break;case 23:break;case 22:var At=Y.stateNode;Y.memoizedState!==null?At._visibility&2?mo(T,Y,fe,ke,k):Ah(T,Y):(At._visibility|=2,mo(T,Y,fe,ke,k)),k&&Ye&2048&&ch(Y.alternate,Y);break;case 24:mo(T,Y,fe,ke,k),k&&Ye&2048&&oA(Y.alternate,Y);break;default:mo(T,Y,fe,ke,k)}o=o.sibling}}function Ah(l,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var h=l,g=o,k=g.flags;switch(g.tag){case 22:Ah(h,g),k&2048&&ch(g.alternate,g);break;case 24:Ah(h,g),k&2048&&oA(g.alternate,g);break;default:Ah(h,g)}o=o.sibling}}var dh=8192;function sd(l,o,h){if(l.subtreeFlags&dh)for(l=l.child;l!==null;)jm(l,o,h),l=l.sibling}function jm(l,o,h){switch(l.tag){case 26:sd(l,o,h),l.flags&dh&&l.memoizedState!==null&&_S(h,po,l.memoizedState,l.memoizedProps);break;case 5:sd(l,o,h);break;case 3:case 4:var g=po;po=Lm(l.stateNode.containerInfo),sd(l,o,h),po=g;break;case 22:l.memoizedState===null&&(g=l.alternate,g!==null&&g.memoizedState!==null?(g=dh,dh=16777216,sd(l,o,h),dh=g):sd(l,o,h));break;default:sd(l,o,h)}}function M0(l){var o=l.alternate;if(o!==null&&(l=o.child,l!==null)){o.child=null;do o=l.sibling,l.sibling=null,l=o;while(l!==null)}}function uh(l){var o=l.deletions;if((l.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var g=o[h];Ca=g,Bm(g,l)}M0(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Nm(l),l=l.sibling}function Nm(l){switch(l.tag){case 0:case 11:case 15:uh(l),l.flags&2048&&lA(9,l,l.return);break;case 3:uh(l);break;case 12:uh(l);break;case 22:var o=l.stateNode;l.memoizedState!==null&&o._visibility&2&&(l.return===null||l.return.tag!==13)?(o._visibility&=-3,mf(l)):uh(l);break;default:uh(l)}}function mf(l){var o=l.deletions;if((l.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var g=o[h];Ca=g,Bm(g,l)}M0(l)}for(l=l.child;l!==null;){switch(o=l,o.tag){case 0:case 11:case 15:lA(8,o,o.return),mf(o);break;case 22:h=o.stateNode,h._visibility&2&&(h._visibility&=-3,mf(o));break;default:mf(o)}l=l.sibling}}function Bm(l,o){for(;Ca!==null;){var h=Ca;switch(h.tag){case 0:case 11:case 15:lA(8,h,o);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var g=h.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:$A(h.memoizedState.cache)}if(g=h.child,g!==null)g.return=h,Ca=g;else e:for(h=l;Ca!==null;){g=Ca;var k=g.sibling,T=g.return;if(U0(g),g===h){Ca=null;break e}if(k!==null){k.return=T,Ca=k;break e}Ca=T}}}var Fb={getCacheForType:function(l){var o=ha(mn),h=o.data.get(l);return h===void 0&&(h=l(),o.data.set(l,h)),h},cacheSignal:function(){return ha(mn).controller.signal}},Lb=typeof WeakMap=="function"?WeakMap:Map,vr=0,Qr=null,qs=null,Zs=0,Cr=0,xl=null,cA=!1,Jd=!1,y=!1,b=0,B=0,N=0,D=0,J=0,de=0,xe=0,be=null,Ee=null,Qe=!1,Ke=0,ot=0,Ht=1/0,Ft=null,It=null,is=0,Yt=null,Gt=null,Ds=0,Ms=0,js=null,Pt=null,Ps=0,er=null;function cs(){return(vr&2)!==0&&Zs!==0?Zs&-Zs:W.T!==null?Ib():Ls()}function Hn(){if(de===0)if((Zs&536870912)===0||Gs){var l=$t;$t<<=1,($t&3932160)===0&&($t=262144),de=l}else de=536870912;return l=Zr.current,l!==null&&(l.flags|=32),de}function _r(l,o,h){(l===Qr&&(Cr===2||Cr===9)||l.cancelPendingCommit!==null)&&(Hl(l,0),gi(l,Zs,de,!1)),Et(l,h),((vr&2)===0||l!==Qr)&&(l===Qr&&((vr&2)===0&&(D|=h),B===4&&gi(l,Zs,de,!1)),uA(l))}function qi(l,o,h){if((vr&6)!==0)throw Error(n(327));var g=!h&&(o&127)===0&&(o&l.expiredLanes)===0||as(l,o),k=g?Wd(l,o):Uc(l,o,!0),T=g;do{if(k===0){Jd&&!g&&gi(l,o,0,!1);break}else{if(h=l.current.alternate,T&&!Oa(h)){k=Uc(l,o,!1),T=!1;continue}if(k===2){if(T=o,l.errorRecoveryDisabledLanes&T)var Y=0;else Y=l.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){o=Y;e:{var fe=l;k=be;var ke=fe.current.memoizedState.isDehydrated;if(ke&&(Hl(fe,Y).flags|=256),Y=Uc(fe,Y,!1),Y!==2){if(y&&!ke){fe.errorRecoveryDisabledLanes|=T,D|=T,k=4;break e}T=Ee,Ee=k,T!==null&&(Ee===null?Ee=T:Ee.push.apply(Ee,T))}k=Y}if(T=!1,k!==2)continue}}if(k===1){Hl(l,0),gi(l,o,0,!0);break}e:{switch(g=l,T=k,T){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:gi(g,o,de,!cA);break e;case 2:Ee=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(k=Ke+300-pt(),10<k)){if(gi(g,o,de,!cA),Ct(g,0,!0)!==0)break e;Ds=o,g.timeoutHandle=Aw(Sr.bind(null,g,h,Ee,Ft,Qe,o,de,D,xe,cA,T,"Throttled",-0,0),k);break e}Sr(g,h,Ee,Ft,Qe,o,de,D,xe,cA,T,null,-0,0)}}break}while(!0);uA(l)}function Sr(l,o,h,g,k,T,Y,fe,ke,Ye,At,bt,Ze,at){if(l.timeoutHandle=-1,bt=o.subtreeFlags,bt&8192||(bt&16785408)===16785408){bt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ll},jm(o,T,bt);var ts=(T&62914560)===T?Ke-pt():(T&4194048)===T?ot-pt():0;if(ts=IS(bt,ts),ts!==null){Ds=T,l.cancelPendingCommit=ts(P2.bind(null,l,o,T,h,g,k,Y,fe,ke,At,bt,null,Ze,at)),gi(l,T,Y,!Ye);return}}P2(l,o,T,h,g,k,Y,fe,ke)}function Oa(l){for(var o=l;;){var h=o.tag;if((h===0||h===11||h===15)&&o.flags&16384&&(h=o.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var g=0;g<h.length;g++){var k=h[g],T=k.getSnapshot;k=k.value;try{if(!Js(T(),k))return!1}catch{return!1}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===l)break;for(;o.sibling===null;){if(o.return===null||o.return===l)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function gi(l,o,h,g){o&=~J,o&=~D,l.suspendedLanes|=o,l.pingedLanes&=~o,g&&(l.warmLanes|=o),g=l.expirationTimes;for(var k=o;0<k;){var T=31-Vt(k),Y=1<<T;g[T]=-1,k&=~Y}h!==0&&Ys(l,h,o)}function Da(){return(vr&6)===0?(Q0(0),!1):!0}function Za(){if(qs!==null){if(Cr===0)var l=qs.return;else l=qs,Ml=Ro=null,qA(l),xt=null,es=0,l=qs;for(;l!==null;)hm(l.alternate,l),l=l.return;qs=null}}function Hl(l,o){var h=l.timeoutHandle;h!==-1&&(l.timeoutHandle=-1,bS(h)),h=l.cancelPendingCommit,h!==null&&(l.cancelPendingCommit=null,h()),Ds=0,Za(),Qr=l,qs=h=Ii(l.current,null),Zs=o,Cr=0,xl=null,cA=!1,Jd=as(l,o),y=!1,xe=de=J=D=N=B=0,Ee=be=null,Qe=!1,(o&8)!==0&&(o|=o&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=o;0<g;){var k=31-Vt(g),T=1<<k;o|=l[k],g&=~T}return b=o,HA(),h}function go(l,o){ds=null,W.H=Xu,o===Te||o===ye?(o=ut(),Cr=3):o===$e?(o=ut(),Cr=4):Cr=o===v0?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,xl=o,qs===null&&(B=1,th(l,Oi(o,l.current)))}function Tc(){var l=Zr.current;return l===null?!0:(Zs&4194048)===Zs?Xs===null:(Zs&62914560)===Zs||(Zs&536870912)!==0?l===Xs:!1}function AA(){var l=W.H;return W.H=Xu,l===null?Xu:l}function dA(){var l=W.A;return W.A=Fb,l}function Pl(){B=4,cA||(Zs&4194048)!==Zs&&Zr.current!==null||(Jd=!0),(N&134217727)===0&&(D&134217727)===0||Qr===null||gi(Qr,Zs,de,!1)}function Uc(l,o,h){var g=vr;vr|=2;var k=AA(),T=dA();(Qr!==l||Zs!==o)&&(Ft=null,Hl(l,o)),o=!1;var Y=B;e:do try{if(Cr!==0&&qs!==null){var fe=qs,ke=xl;switch(Cr){case 8:Za(),Y=6;break e;case 3:case 2:case 9:case 6:Zr.current===null&&(o=!0);var Ye=Cr;if(Cr=0,xl=null,gf(l,fe,ke,Ye),h&&Jd){Y=0;break e}break;default:Ye=Cr,Cr=0,xl=null,gf(l,fe,ke,Ye)}}Fc(),Y=B;break}catch(At){go(l,At)}while(!0);return o&&l.shellSuspendCounter++,Ml=Ro=null,vr=g,W.H=k,W.A=T,qs===null&&(Qr=null,Zs=0,HA()),Y}function Fc(){for(;qs!==null;)D2(qs)}function Wd(l,o){var h=vr;vr|=2;var g=AA(),k=dA();Qr!==l||Zs!==o?(Ft=null,Ht=pt()+500,Hl(l,o)):Jd=as(l,o);e:do try{if(Cr!==0&&qs!==null){o=qs;var T=xl;t:switch(Cr){case 1:Cr=0,xl=null,gf(l,o,T,1);break;case 2:case 9:if(Me(T)){Cr=0,xl=null,R2(o);break}o=function(){Cr!==2&&Cr!==9||Qr!==l||(Cr=7),uA(l)},T.then(o,o);break e;case 3:Cr=7;break e;case 4:Cr=5;break e;case 7:Me(T)?(Cr=0,xl=null,R2(o)):(Cr=0,xl=null,gf(l,o,T,7));break;case 5:var Y=null;switch(qs.tag){case 26:Y=qs.memoizedState;case 5:case 27:var fe=qs;if(Y?Bw(Y):fe.stateNode.complete){Cr=0,xl=null;var ke=fe.sibling;if(ke!==null)qs=ke;else{var Ye=fe.return;Ye!==null?(qs=Ye,km(Ye)):qs=null}break t}}Cr=0,xl=null,gf(l,o,T,5);break;case 6:Cr=0,xl=null,gf(l,o,T,6);break;case 8:Za(),B=6;break e;default:throw Error(n(462))}}hh();break}catch(At){go(l,At)}while(!0);return Ml=Ro=null,W.H=g,W.A=k,vr=h,qs!==null?0:(Qr=null,Zs=0,HA(),B)}function hh(){for(;qs!==null&&!Mt();)D2(qs)}function D2(l){var o=uf(l.alternate,l,b);l.memoizedProps=l.pendingProps,o===null?km(l):qs=o}function R2(l){var o=l,h=o.alternate;switch(o.tag){case 15:case 0:o=qd(h,o,o.pendingProps,o.type,void 0,Zs);break;case 11:o=qd(h,o,o.pendingProps,o.type.render,o.ref,Zs);break;case 5:qA(o);default:hm(h,o),o=qs=zA(o,b),o=uf(h,o,b)}l.memoizedProps=l.pendingProps,o===null?km(l):qs=o}function gf(l,o,h,g){Ml=Ro=null,qA(o),xt=null,es=0;var k=o.return;try{if(Eb(l,k,o,h,Zs)){B=1,th(l,Oi(h,l.current)),qs=null;return}}catch(T){if(k!==null)throw qs=k,T;B=1,th(l,Oi(h,l.current)),qs=null;return}o.flags&32768?(Gs||g===1?l=!0:Jd||(Zs&536870912)!==0?l=!1:(cA=l=!0,(g===2||g===9||g===3||g===6)&&(g=Zr.current,g!==null&&g.tag===13&&(g.flags|=16384))),H2(o,l)):km(o)}function km(l){var o=l;do{if((o.flags&32768)!==0){H2(o,cA);return}l=o.return;var h=Tb(o.alternate,o,b);if(h!==null){qs=h;return}if(o=o.sibling,o!==null){qs=o;return}qs=o=l}while(o!==null);B===0&&(B=5)}function H2(l,o){do{var h=Ub(l.alternate,l);if(h!==null){h.flags&=32767,qs=h;return}if(h=l.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!o&&(l=l.sibling,l!==null)){qs=l;return}qs=l=h}while(l!==null);B=6,qs=null}function P2(l,o,h,g,k,T,Y,fe,ke){l.cancelPendingCommit=null;do Cm();while(is!==0);if((vr&6)!==0)throw Error(n(327));if(o!==null){if(o===l.current)throw Error(n(177));if(T=o.lanes|o.childLanes,T|=kd,hs(l,h,T,Y,fe,ke),l===Qr&&(qs=Qr=null,Zs=0),Gt=o,Yt=l,Ds=h,Ms=T,js=k,Pt=g,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,iS(Ot,function(){return G2(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||g){g=W.T,W.T=null,k=se.p,se.p=2,Y=vr,vr|=4;try{xm(l,o,h)}finally{vr=Y,se.p=k,W.T=g}}is=1,z2(),K2(),V2()}}function z2(){if(is===1){is=0;var l=Yt,o=Gt,h=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||h){h=W.T,W.T=null;var g=se.p;se.p=2;var k=vr;vr|=4;try{oh(o,l);var T=Vb,Y=El(l.containerInfo),fe=T.focusedElem,ke=T.selectionRange;if(Y!==fe&&fe&&fe.ownerDocument&&hl(fe.ownerDocument.documentElement,fe)){if(ke!==null&&Tl(fe)){var Ye=ke.start,At=ke.end;if(At===void 0&&(At=Ye),"selectionStart"in fe)fe.selectionStart=Ye,fe.selectionEnd=Math.min(At,fe.value.length);else{var bt=fe.ownerDocument||document,Ze=bt&&bt.defaultView||window;if(Ze.getSelection){var at=Ze.getSelection(),ts=fe.textContent.length,Ns=Math.min(ke.start,ts),Gr=ke.end===void 0?Ns:Math.min(ke.end,ts);!at.extend&&Ns>Gr&&(Y=Gr,Gr=Ns,Ns=Y);var He=bc(fe,Ns),Fe=bc(fe,Gr);if(He&&Fe&&(at.rangeCount!==1||at.anchorNode!==He.node||at.anchorOffset!==He.offset||at.focusNode!==Fe.node||at.focusOffset!==Fe.offset)){var qe=bt.createRange();qe.setStart(He.node,He.offset),at.removeAllRanges(),Ns>Gr?(at.addRange(qe),at.extend(Fe.node,Fe.offset)):(qe.setEnd(Fe.node,Fe.offset),at.addRange(qe))}}}}for(bt=[],at=fe;at=at.parentNode;)at.nodeType===1&&bt.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof fe.focus=="function"&&fe.focus(),fe=0;fe<bt.length;fe++){var mt=bt[fe];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}Dm=!!Kb,Vb=Kb=null}finally{vr=k,se.p=g,W.T=h}}l.current=o,is=2}}function K2(){if(is===2){is=0;var l=Yt,o=Gt,h=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||h){h=W.T,W.T=null;var g=se.p;se.p=2;var k=vr;vr|=4;try{bm(l,o.alternate,o)}finally{vr=k,se.p=g,W.T=h}}is=3}}function V2(){if(is===4||is===3){is=0,Qt();var l=Yt,o=Gt,h=Ds,g=Pt;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?is=5:(is=0,Gt=Yt=null,$2(l,l.pendingLanes));var k=l.pendingLanes;if(k===0&&(It=null),fr(h),o=o.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(ht,o,void 0,(o.current.flags&128)===128)}catch{}if(g!==null){o=W.T,k=se.p,se.p=2,W.T=null;try{for(var T=l.onRecoverableError,Y=0;Y<g.length;Y++){var fe=g[Y];T(fe.value,{componentStack:fe.stack})}}finally{W.T=o,se.p=k}}(Ds&3)!==0&&Cm(),uA(l),k=l.pendingLanes,(h&261930)!==0&&(k&42)!==0?l===er?Ps++:(Ps=0,er=l):Ps=0,Q0(0)}}function $2(l,o){(l.pooledCacheLanes&=o)===0&&(o=l.pooledCache,o!=null&&(l.pooledCache=null,$A(o)))}function Cm(){return z2(),K2(),V2(),G2()}function G2(){if(is!==5)return!1;var l=Yt,o=Ms;Ms=0;var h=fr(Ds),g=W.T,k=se.p;try{se.p=32>h?32:h,W.T=null,h=js,js=null;var T=Yt,Y=Ds;if(is=0,Gt=Yt=null,Ds=0,(vr&6)!==0)throw Error(n(331));var fe=vr;if(vr|=4,Nm(T.current),wm(T,T.current,Y,h),vr=fe,Q0(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(ht,T)}catch{}return!0}finally{se.p=k,W.T=g,$2(l,o)}}function q2(l,o,h){o=Oi(h,o),o=g0(l.stateNode,o,2),l=vs(l,o,2),l!==null&&(Et(l,2),uA(l))}function Ir(l,o,h){if(l.tag===3)q2(l,l,h);else for(;o!==null;){if(o.tag===3){q2(o,l,h);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(It===null||!It.has(g))){l=Oi(h,l),h=x0(2),g=vs(o,h,2),g!==null&&(b0(h,g,o,l),Et(g,2),uA(g));break}}o=o.return}}function Mb(l,o,h){var g=l.pingCache;if(g===null){g=l.pingCache=new Lb;var k=new Set;g.set(o,k)}else k=g.get(o),k===void 0&&(k=new Set,g.set(o,k));k.has(h)||(y=!0,k.add(h),l=rS.bind(null,l,o,h),o.then(l,l))}function rS(l,o,h){var g=l.pingCache;g!==null&&g.delete(o),l.pingedLanes|=l.suspendedLanes&h,l.warmLanes&=~h,Qr===l&&(Zs&h)===h&&(B===4||B===3&&(Zs&62914560)===Zs&&300>pt()-Ke?(vr&2)===0&&Hl(l,0):J|=h,xe===Zs&&(xe=0)),uA(l)}function Y2(l,o){o===0&&(o=ct()),l=Fl(l,o),l!==null&&(Et(l,o),uA(l))}function nS(l){var o=l.memoizedState,h=0;o!==null&&(h=o.retryLane),Y2(l,h)}function aS(l,o){var h=0;switch(l.tag){case 31:case 13:var g=l.stateNode,k=l.memoizedState;k!==null&&(h=k.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(o),Y2(l,h)}function iS(l,o){return Tt(l,o)}var Sm=null,xf=null,Qb=!1,Em=!1,_b=!1,Xd=0;function uA(l){l!==xf&&l.next===null&&(xf===null?Sm=xf=l:xf=xf.next=l),Em=!0,Qb||(Qb=!0,oS())}function Q0(l,o){if(!_b&&Em){_b=!0;do for(var h=!1,g=Sm;g!==null;){if(l!==0){var k=g.pendingLanes;if(k===0)var T=0;else{var Y=g.suspendedLanes,fe=g.pingedLanes;T=(1<<31-Vt(42|l)+1)-1,T&=k&~(Y&~fe),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(h=!0,Z2(g,T))}else T=Zs,T=Ct(g,g===Qr?T:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(T&3)===0||as(g,T)||(h=!0,Z2(g,T));g=g.next}while(h);_b=!1}}function lS(){J2()}function J2(){Em=Qb=!1;var l=0;Xd!==0&&xS()&&(l=Xd);for(var o=pt(),h=null,g=Sm;g!==null;){var k=g.next,T=W2(g,o);T===0?(g.next=null,h===null?Sm=k:h.next=k,k===null&&(xf=h)):(h=g,(l!==0||(T&3)!==0)&&(Em=!0)),g=k}is!==0&&is!==5||Q0(l),Xd!==0&&(Xd=0)}function W2(l,o){for(var h=l.suspendedLanes,g=l.pingedLanes,k=l.expirationTimes,T=l.pendingLanes&-62914561;0<T;){var Y=31-Vt(T),fe=1<<Y,ke=k[Y];ke===-1?((fe&h)===0||(fe&g)!==0)&&(k[Y]=ps(fe,o)):ke<=o&&(l.expiredLanes|=fe),T&=~fe}if(o=Qr,h=Zs,h=Ct(l,l===o?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,h===0||l===o&&(Cr===2||Cr===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&Nt(g),l.callbackNode=null,l.callbackPriority=0;if((h&3)===0||as(l,h)){if(o=h&-h,o===l.callbackPriority)return o;switch(g!==null&&Nt(g),fr(h)){case 2:case 8:h=rs;break;case 32:h=Ot;break;case 268435456:h=Oe;break;default:h=Ot}return g=X2.bind(null,l),h=Tt(h,g),l.callbackPriority=o,l.callbackNode=h,o}return g!==null&&g!==null&&Nt(g),l.callbackPriority=2,l.callbackNode=null,2}function X2(l,o){if(is!==0&&is!==5)return l.callbackNode=null,l.callbackPriority=0,null;var h=l.callbackNode;if(Cm()&&l.callbackNode!==h)return null;var g=Zs;return g=Ct(l,l===Qr?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(qi(l,g,o),W2(l,pt()),l.callbackNode!=null&&l.callbackNode===h?X2.bind(null,l):null)}function Z2(l,o){if(Cm())return null;qi(l,o,!0)}function oS(){vS(function(){(vr&6)!==0?Tt(Ut,lS):J2()})}function Ib(){if(Xd===0){var l=v;l===0&&(l=We,We<<=1,(We&261888)===0&&(We=256)),Xd=l}return Xd}function ew(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:jn(""+l)}function tw(l,o){var h=o.ownerDocument.createElement("input");return h.name=o.name,h.value=o.value,l.id&&h.setAttribute("form",l.id),o.parentNode.insertBefore(h,o),l=new FormData(l),h.parentNode.removeChild(h),l}function cS(l,o,h,g,k){if(o==="submit"&&h&&h.stateNode===k){var T=ew((k[Pr]||null).action),Y=g.submitter;Y&&(o=(o=Y[Pr]||null)?ew(o.formAction):Y.getAttribute("formAction"),o!==null&&(T=o,Y=null));var fe=new Si("action","action",null,g,k);l.push({event:fe,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Xd!==0){var ke=Y?tw(k,Y):new FormData(k);nf(h,{pending:!0,data:ke,method:k.method,action:T},null,ke)}}else typeof T=="function"&&(fe.preventDefault(),ke=Y?tw(k,Y):new FormData(k),nf(h,{pending:!0,data:ke,method:k.method,action:T},T,ke))},currentTarget:k}]})}}for(var Ob=0;Ob<Qo.length;Ob++){var Db=Qo[Ob],AS=Db.toLowerCase(),dS=Db[0].toUpperCase()+Db.slice(1);di(AS,"on"+dS)}di(vc,"onAnimationEnd"),di(Mo,"onAnimationIteration"),di(Iu,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(Ou,"onTransitionRun"),di(Du,"onTransitionStart"),di(Ru,"onTransitionCancel"),di(Nd,"onTransitionEnd"),Bl("onMouseEnter",["mouseout","mouseover"]),Bl("onMouseLeave",["mouseout","mouseover"]),Bl("onPointerEnter",["pointerout","pointerover"]),Bl("onPointerLeave",["pointerout","pointerover"]),Ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ga("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_0));function sw(l,o){o=(o&4)!==0;for(var h=0;h<l.length;h++){var g=l[h],k=g.event;g=g.listeners;e:{var T=void 0;if(o)for(var Y=g.length-1;0<=Y;Y--){var fe=g[Y],ke=fe.instance,Ye=fe.currentTarget;if(fe=fe.listener,ke!==T&&k.isPropagationStopped())break e;T=fe,k.currentTarget=Ye;try{T(k)}catch(At){$c(At)}k.currentTarget=null,T=ke}else for(Y=0;Y<g.length;Y++){if(fe=g[Y],ke=fe.instance,Ye=fe.currentTarget,fe=fe.listener,ke!==T&&k.isPropagationStopped())break e;T=fe,k.currentTarget=Ye;try{T(k)}catch(At){$c(At)}k.currentTarget=null,T=ke}}}}function nr(l,o){var h=o[Va];h===void 0&&(h=o[Va]=new Set);var g=l+"__bubble";h.has(g)||(rw(o,l,2,!1),h.add(g))}function Rb(l,o,h){var g=0;o&&(g|=4),rw(h,l,g,o)}var Tm="_reactListening"+Math.random().toString(36).slice(2);function Hb(l){if(!l[Tm]){l[Tm]=!0,Jl.forEach(function(h){h!=="selectionchange"&&(uS.has(h)||Rb(h,!1,l),Rb(h,!0,l))});var o=l.nodeType===9?l:l.ownerDocument;o===null||o[Tm]||(o[Tm]=!0,Rb("selectionchange",!1,o))}}function rw(l,o,h,g){switch(Fw(o)){case 2:var k=RS;break;case 8:k=HS;break;default:k=s1}h=k.bind(null,o,h,l),k=void 0,!Ya||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(k=!0),g?k!==void 0?l.addEventListener(o,h,{capture:!0,passive:k}):l.addEventListener(o,h,!0):k!==void 0?l.addEventListener(o,h,{passive:k}):l.addEventListener(o,h,!1)}function Pb(l,o,h,g,k){var T=g;if((o&1)===0&&(o&2)===0&&g!==null)e:for(;;){if(g===null)return;var Y=g.tag;if(Y===3||Y===4){var fe=g.stateNode.containerInfo;if(fe===k)break;if(Y===4)for(Y=g.return;Y!==null;){var ke=Y.tag;if((ke===3||ke===4)&&Y.stateNode.containerInfo===k)return;Y=Y.return}for(;fe!==null;){if(Y=nl(fe),Y===null)return;if(ke=Y.tag,ke===5||ke===6||ke===26||ke===27){g=T=Y;continue e}fe=fe.parentNode}}g=g.return}wd(function(){var Ye=T,At=uc(h),bt=[];e:{var Ze=Bd.get(l);if(Ze!==void 0){var at=Si,ts=l;switch(l){case"keypress":if(Ci(h)===0)break e;case"keydown":case"keyup":at=tr;break;case"focusin":ts="focus",at=so;break;case"focusout":ts="blur",at=so;break;case"beforeblur":case"afterblur":at=so;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=OA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=Ui;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=On;break;case vc:case Mo:case Iu:at=M;break;case Nd:at=la;break;case"scroll":case"scrollend":at=zc;break;case"wheel":at=cl;break;case"copy":case"cut":case"paste":at=je;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=fn;break;case"toggle":case"beforetoggle":at=RA}var Ns=(o&4)!==0,Gr=!Ns&&(l==="scroll"||l==="scrollend"),He=Ns?Ze!==null?Ze+"Capture":null:Ze;Ns=[];for(var Fe=Ye,qe;Fe!==null;){var mt=Fe;if(qe=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||qe===null||He===null||(mt=ci(Fe,He),mt!=null&&Ns.push(I0(Fe,mt,qe))),Gr)break;Fe=Fe.return}0<Ns.length&&(Ze=new at(Ze,ts,null,h,At),bt.push({event:Ze,listeners:Ns}))}}if((o&7)===0){e:{if(Ze=l==="mouseover"||l==="pointerover",at=l==="mouseout"||l==="pointerout",Ze&&h!==Zl&&(ts=h.relatedTarget||h.fromElement)&&(nl(ts)||ts[xa]))break e;if((at||Ze)&&(Ze=At.window===At?At:(Ze=At.ownerDocument)?Ze.defaultView||Ze.parentWindow:window,at?(ts=h.relatedTarget||h.toElement,at=Ye,ts=ts?nl(ts):null,ts!==null&&(Gr=i(ts),Ns=ts.tag,ts!==Gr||Ns!==5&&Ns!==27&&Ns!==6)&&(ts=null)):(at=null,ts=Ye),at!==ts)){if(Ns=OA,mt="onMouseLeave",He="onMouseEnter",Fe="mouse",(l==="pointerout"||l==="pointerover")&&(Ns=fn,mt="onPointerLeave",He="onPointerEnter",Fe="pointer"),Gr=at==null?Ze:cc(at),qe=ts==null?Ze:cc(ts),Ze=new Ns(mt,Fe+"leave",at,h,At),Ze.target=Gr,Ze.relatedTarget=qe,mt=null,nl(At)===Ye&&(Ns=new Ns(He,Fe+"enter",ts,h,At),Ns.target=qe,Ns.relatedTarget=Gr,mt=Ns),Gr=mt,at&&ts)t:{for(Ns=hS,He=at,Fe=ts,qe=0,mt=He;mt;mt=Ns(mt))qe++;mt=0;for(var gs=Fe;gs;gs=Ns(gs))mt++;for(;0<qe-mt;)He=Ns(He),qe--;for(;0<mt-qe;)Fe=Ns(Fe),mt--;for(;qe--;){if(He===Fe||Fe!==null&&He===Fe.alternate){Ns=He;break t}He=Ns(He),Fe=Ns(Fe)}Ns=null}else Ns=null;at!==null&&nw(bt,Ze,at,Ns,!1),ts!==null&&Gr!==null&&nw(bt,Gr,ts,Ns,!0)}}e:{if(Ze=Ye?cc(Ye):window,at=Ze.nodeName&&Ze.nodeName.toLowerCase(),at==="select"||at==="input"&&Ze.type==="file")var jr=_i;else if(Mi(Ze))if(Os)jr=oa;else{jr=cn;var ls=gc}else at=Ze.nodeName,!at||at.toLowerCase()!=="input"||Ze.type!=="checkbox"&&Ze.type!=="radio"?Ye&&_A(Ye.elementType)&&(jr=_i):jr=La;if(jr&&(jr=jr(l,Ye))){ar(bt,jr,h,At);break e}ls&&ls(l,Ze,Ye),l==="focusout"&&Ye&&Ze.type==="number"&&Ye.memoizedProps.value!=null&&FA(Ze,"number",Ze.value)}switch(ls=Ye?cc(Ye):window,l){case"focusin":(Mi(ls)||ls.contentEditable==="true")&&(pn=ls,io=Ye,ya=null);break;case"focusout":ya=io=pn=null;break;case"mousedown":Ma=!0;break;case"contextmenu":case"mouseup":case"dragend":Ma=!1,ir(bt,h,At);break;case"selectionchange":if(fl)break;case"keydown":case"keyup":ir(bt,h,At)}var Rs;if(Fi)e:{switch(l){case"compositionstart":var or="onCompositionStart";break e;case"compositionend":or="onCompositionEnd";break e;case"compositionupdate":or="onCompositionUpdate";break e}or=void 0}else Al?Fo(l,h)&&(or="onCompositionEnd"):l==="keydown"&&h.keyCode===229&&(or="onCompositionStart");or&&(Ai&&h.locale!=="ko"&&(Al||or!=="onCompositionStart"?or==="onCompositionEnd"&&Al&&(Rs=jd()):(Ja=At,To="value"in Ja?Ja.value:Ja.textContent,Al=!0)),ls=Um(Ye,or),0<ls.length&&(or=new De(or,l,null,h,At),bt.push({event:or,listeners:ls}),Rs?or.data=Rs:(Rs=Lo(h),Rs!==null&&(or.data=Rs)))),(Rs=Uo?Bn(l,h):$n(l,h))&&(or=Um(Ye,"onBeforeInput"),0<or.length&&(ls=new De("onBeforeInput","beforeinput",null,h,At),bt.push({event:ls,listeners:or}),ls.data=Rs)),cS(bt,l,Ye,h,At)}sw(bt,o)})}function I0(l,o,h){return{instance:l,listener:o,currentTarget:h}}function Um(l,o){for(var h=o+"Capture",g=[];l!==null;){var k=l,T=k.stateNode;if(k=k.tag,k!==5&&k!==26&&k!==27||T===null||(k=ci(l,h),k!=null&&g.unshift(I0(l,k,T)),k=ci(l,o),k!=null&&g.push(I0(l,k,T))),l.tag===3)return g;l=l.return}return[]}function hS(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function nw(l,o,h,g,k){for(var T=o._reactName,Y=[];h!==null&&h!==g;){var fe=h,ke=fe.alternate,Ye=fe.stateNode;if(fe=fe.tag,ke!==null&&ke===g)break;fe!==5&&fe!==26&&fe!==27||Ye===null||(ke=Ye,k?(Ye=ci(h,T),Ye!=null&&Y.unshift(I0(h,Ye,ke))):k||(Ye=ci(h,T),Ye!=null&&Y.push(I0(h,Ye,ke)))),h=h.return}Y.length!==0&&l.push({event:o,listeners:Y})}var fS=/\r\n?/g,pS=/\u0000|\uFFFD/g;function aw(l){return(typeof l=="string"?l:""+l).replace(fS,`
`).replace(pS,"")}function iw(l,o){return o=aw(o),aw(l)===o}function $r(l,o,h,g,k,T){switch(h){case"children":typeof g=="string"?o==="body"||o==="textarea"&&g===""||qa(l,g):(typeof g=="number"||typeof g=="bigint")&&o!=="body"&&qa(l,""+g);break;case"className":Xl(l,"class",g);break;case"tabIndex":Xl(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Xl(l,h,g);break;case"style":vd(l,g,T);break;case"data":if(o!=="object"){Xl(l,"data",g);break}case"src":case"href":if(g===""&&(o!=="a"||h!=="href")){l.removeAttribute(h);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(h);break}g=jn(""+g),l.setAttribute(h,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(h==="formAction"?(o!=="input"&&$r(l,o,"name",k.name,k,null),$r(l,o,"formEncType",k.formEncType,k,null),$r(l,o,"formMethod",k.formMethod,k,null),$r(l,o,"formTarget",k.formTarget,k,null)):($r(l,o,"encType",k.encType,k,null),$r(l,o,"method",k.method,k,null),$r(l,o,"target",k.target,k,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(h);break}g=jn(""+g),l.setAttribute(h,g);break;case"onClick":g!=null&&(l.onclick=ll);break;case"onScroll":g!=null&&nr("scroll",l);break;case"onScrollEnd":g!=null&&nr("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(h=g.__html,h!=null){if(k.children!=null)throw Error(n(60));l.innerHTML=h}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}h=jn(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(h,""+g):l.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(h,""):l.removeAttribute(h);break;case"capture":case"download":g===!0?l.setAttribute(h,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(h,g):l.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(h,g):l.removeAttribute(h);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(h):l.setAttribute(h,g);break;case"popover":nr("beforetoggle",l),nr("toggle",l),aa(l,"popover",g);break;case"xlinkActuate":il(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":il(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":il(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":il(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":il(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":il(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":il(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":il(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":il(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":aa(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Hc.get(h)||h,aa(l,h,g))}}function zb(l,o,h,g,k,T){switch(h){case"style":vd(l,g,T);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(h=g.__html,h!=null){if(k.children!=null)throw Error(n(60));l.innerHTML=h}}break;case"children":typeof g=="string"?qa(l,g):(typeof g=="number"||typeof g=="bigint")&&qa(l,""+g);break;case"onScroll":g!=null&&nr("scroll",l);break;case"onScrollEnd":g!=null&&nr("scrollend",l);break;case"onClick":g!=null&&(l.onclick=ll);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$a.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(k=h.endsWith("Capture"),o=h.slice(2,k?h.length-7:void 0),T=l[Pr]||null,T=T!=null?T[h]:null,typeof T=="function"&&l.removeEventListener(o,T,k),typeof g=="function")){typeof T!="function"&&T!==null&&(h in l?l[h]=null:l.hasAttribute(h)&&l.removeAttribute(h)),l.addEventListener(o,g,k);break e}h in l?l[h]=g:g===!0?l.setAttribute(h,""):aa(l,h,g)}}}function xi(l,o,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nr("error",l),nr("load",l);var g=!1,k=!1,T;for(T in h)if(h.hasOwnProperty(T)){var Y=h[T];if(Y!=null)switch(T){case"src":g=!0;break;case"srcSet":k=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:$r(l,o,T,Y,h,null)}}k&&$r(l,o,"srcSet",h.srcSet,h,null),g&&$r(l,o,"src",h.src,h,null);return;case"input":nr("invalid",l);var fe=T=Y=k=null,ke=null,Ye=null;for(g in h)if(h.hasOwnProperty(g)){var At=h[g];if(At!=null)switch(g){case"name":k=At;break;case"type":Y=At;break;case"checked":ke=At;break;case"defaultChecked":Ye=At;break;case"value":T=At;break;case"defaultValue":fe=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(n(137,o));break;default:$r(l,o,g,At,h,null)}}bd(l,T,fe,ke,Ye,Y,k,!1);return;case"select":nr("invalid",l),g=Y=T=null;for(k in h)if(h.hasOwnProperty(k)&&(fe=h[k],fe!=null))switch(k){case"value":T=fe;break;case"defaultValue":Y=fe;break;case"multiple":g=fe;default:$r(l,o,k,fe,h,null)}o=T,h=Y,l.multiple=!!g,o!=null?Fa(l,!!g,o,!1):h!=null&&Fa(l,!!g,h,!0);return;case"textarea":nr("invalid",l),T=k=g=null;for(Y in h)if(h.hasOwnProperty(Y)&&(fe=h[Y],fe!=null))switch(Y){case"value":g=fe;break;case"defaultValue":k=fe;break;case"children":T=fe;break;case"dangerouslySetInnerHTML":if(fe!=null)throw Error(n(91));break;default:$r(l,o,Y,fe,h,null)}MA(l,g,k,T);return;case"option":for(ke in h)if(h.hasOwnProperty(ke)&&(g=h[ke],g!=null))switch(ke){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:$r(l,o,ke,g,h,null)}return;case"dialog":nr("beforetoggle",l),nr("toggle",l),nr("cancel",l),nr("close",l);break;case"iframe":case"object":nr("load",l);break;case"video":case"audio":for(g=0;g<_0.length;g++)nr(_0[g],l);break;case"image":nr("error",l),nr("load",l);break;case"details":nr("toggle",l);break;case"embed":case"source":case"link":nr("error",l),nr("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ye in h)if(h.hasOwnProperty(Ye)&&(g=h[Ye],g!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:$r(l,o,Ye,g,h,null)}return;default:if(_A(o)){for(At in h)h.hasOwnProperty(At)&&(g=h[At],g!==void 0&&zb(l,o,At,g,h,void 0));return}}for(fe in h)h.hasOwnProperty(fe)&&(g=h[fe],g!=null&&$r(l,o,fe,g,h,null))}function mS(l,o,h,g){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var k=null,T=null,Y=null,fe=null,ke=null,Ye=null,At=null;for(at in h){var bt=h[at];if(h.hasOwnProperty(at)&&bt!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":ke=bt;default:g.hasOwnProperty(at)||$r(l,o,at,null,g,bt)}}for(var Ze in g){var at=g[Ze];if(bt=h[Ze],g.hasOwnProperty(Ze)&&(at!=null||bt!=null))switch(Ze){case"type":T=at;break;case"name":k=at;break;case"checked":Ye=at;break;case"defaultChecked":At=at;break;case"value":Y=at;break;case"defaultValue":fe=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,o));break;default:at!==bt&&$r(l,o,Ze,at,g,bt)}}Rc(l,Y,fe,ke,Ye,At,T,k);return;case"select":at=Y=fe=Ze=null;for(T in h)if(ke=h[T],h.hasOwnProperty(T)&&ke!=null)switch(T){case"value":break;case"multiple":at=ke;default:g.hasOwnProperty(T)||$r(l,o,T,null,g,ke)}for(k in g)if(T=g[k],ke=h[k],g.hasOwnProperty(k)&&(T!=null||ke!=null))switch(k){case"value":Ze=T;break;case"defaultValue":fe=T;break;case"multiple":Y=T;default:T!==ke&&$r(l,o,k,T,g,ke)}o=fe,h=Y,g=at,Ze!=null?Fa(l,!!h,Ze,!1):!!g!=!!h&&(o!=null?Fa(l,!!h,o,!0):Fa(l,!!h,h?[]:"",!1));return;case"textarea":at=Ze=null;for(fe in h)if(k=h[fe],h.hasOwnProperty(fe)&&k!=null&&!g.hasOwnProperty(fe))switch(fe){case"value":break;case"children":break;default:$r(l,o,fe,null,g,k)}for(Y in g)if(k=g[Y],T=h[Y],g.hasOwnProperty(Y)&&(k!=null||T!=null))switch(Y){case"value":Ze=k;break;case"defaultValue":at=k;break;case"children":break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(n(91));break;default:k!==T&&$r(l,o,Y,k,g,T)}LA(l,Ze,at);return;case"option":for(var ts in h)if(Ze=h[ts],h.hasOwnProperty(ts)&&Ze!=null&&!g.hasOwnProperty(ts))switch(ts){case"selected":l.selected=!1;break;default:$r(l,o,ts,null,g,Ze)}for(ke in g)if(Ze=g[ke],at=h[ke],g.hasOwnProperty(ke)&&Ze!==at&&(Ze!=null||at!=null))switch(ke){case"selected":l.selected=Ze&&typeof Ze!="function"&&typeof Ze!="symbol";break;default:$r(l,o,ke,Ze,g,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ns in h)Ze=h[Ns],h.hasOwnProperty(Ns)&&Ze!=null&&!g.hasOwnProperty(Ns)&&$r(l,o,Ns,null,g,Ze);for(Ye in g)if(Ze=g[Ye],at=h[Ye],g.hasOwnProperty(Ye)&&Ze!==at&&(Ze!=null||at!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(n(137,o));break;default:$r(l,o,Ye,Ze,g,at)}return;default:if(_A(o)){for(var Gr in h)Ze=h[Gr],h.hasOwnProperty(Gr)&&Ze!==void 0&&!g.hasOwnProperty(Gr)&&zb(l,o,Gr,void 0,g,Ze);for(At in g)Ze=g[At],at=h[At],!g.hasOwnProperty(At)||Ze===at||Ze===void 0&&at===void 0||zb(l,o,At,Ze,g,at);return}}for(var He in h)Ze=h[He],h.hasOwnProperty(He)&&Ze!=null&&!g.hasOwnProperty(He)&&$r(l,o,He,null,g,Ze);for(bt in g)Ze=g[bt],at=h[bt],!g.hasOwnProperty(bt)||Ze===at||Ze==null&&at==null||$r(l,o,bt,Ze,g,at)}function lw(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function gS(){if(typeof performance.getEntriesByType=="function"){for(var l=0,o=0,h=performance.getEntriesByType("resource"),g=0;g<h.length;g++){var k=h[g],T=k.transferSize,Y=k.initiatorType,fe=k.duration;if(T&&fe&&lw(Y)){for(Y=0,fe=k.responseEnd,g+=1;g<h.length;g++){var ke=h[g],Ye=ke.startTime;if(Ye>fe)break;var At=ke.transferSize,bt=ke.initiatorType;At&&lw(bt)&&(ke=ke.responseEnd,Y+=At*(ke<fe?1:(fe-Ye)/(ke-Ye)))}if(--g,o+=8*(T+Y)/(k.duration/1e3),l++,10<l)break}}if(0<l)return o/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var Kb=null,Vb=null;function Fm(l){return l.nodeType===9?l:l.ownerDocument}function ow(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cw(l,o){if(l===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&o==="foreignObject"?0:l}function $b(l,o){return l==="textarea"||l==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Gb=null;function xS(){var l=window.event;return l&&l.type==="popstate"?l===Gb?!1:(Gb=l,!0):(Gb=null,!1)}var Aw=typeof setTimeout=="function"?setTimeout:void 0,bS=typeof clearTimeout=="function"?clearTimeout:void 0,dw=typeof Promise=="function"?Promise:void 0,vS=typeof queueMicrotask=="function"?queueMicrotask:typeof dw<"u"?function(l){return dw.resolve(null).then(l).catch(yS)}:Aw;function yS(l){setTimeout(function(){throw l})}function Zd(l){return l==="head"}function uw(l,o){var h=o,g=0;do{var k=h.nextSibling;if(l.removeChild(h),k&&k.nodeType===8)if(h=k.data,h==="/$"||h==="/&"){if(g===0){l.removeChild(k),wf(o);return}g--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")g++;else if(h==="html")O0(l.ownerDocument.documentElement);else if(h==="head"){h=l.ownerDocument.head,O0(h);for(var T=h.firstChild;T;){var Y=T.nextSibling,fe=T.nodeName;T[Ni]||fe==="SCRIPT"||fe==="STYLE"||fe==="LINK"&&T.rel.toLowerCase()==="stylesheet"||h.removeChild(T),T=Y}}else h==="body"&&O0(l.ownerDocument.body);h=k}while(h);wf(o)}function hw(l,o){var h=l;l=0;do{var g=h.nextSibling;if(h.nodeType===1?o?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(o?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),g&&g.nodeType===8)if(h=g.data,h==="/$"){if(l===0)break;l--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||l++;h=g}while(h)}function qb(l){var o=l.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var h=o;switch(o=o.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":qb(h),Co(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}l.removeChild(h)}}function wS(l,o,h,g){for(;l.nodeType===1;){var k=h;if(l.nodeName.toLowerCase()!==o.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[Ni])switch(o){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(T=l.getAttribute("rel"),T==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(T!==k.rel||l.getAttribute("href")!==(k.href==null||k.href===""?null:k.href)||l.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin)||l.getAttribute("title")!==(k.title==null?null:k.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(T=l.getAttribute("src"),(T!==(k.src==null?null:k.src)||l.getAttribute("type")!==(k.type==null?null:k.type)||l.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin))&&T&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(o==="input"&&l.type==="hidden"){var T=k.name==null?null:""+k.name;if(k.type==="hidden"&&l.getAttribute("name")===T)return l}else return l;if(l=Yo(l.nextSibling),l===null)break}return null}function jS(l,o,h){if(o==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=Yo(l.nextSibling),l===null))return null;return l}function fw(l,o){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!o||(l=Yo(l.nextSibling),l===null))return null;return l}function Yb(l){return l.data==="$?"||l.data==="$~"}function Jb(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function NS(l,o){var h=l.ownerDocument;if(l.data==="$~")l._reactRetry=o;else if(l.data!=="$?"||h.readyState!=="loading")o();else{var g=function(){o(),h.removeEventListener("DOMContentLoaded",g)};h.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function Yo(l){for(;l!=null;l=l.nextSibling){var o=l.nodeType;if(o===1||o===3)break;if(o===8){if(o=l.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return l}var Wb=null;function pw(l){l=l.nextSibling;for(var o=0;l;){if(l.nodeType===8){var h=l.data;if(h==="/$"||h==="/&"){if(o===0)return Yo(l.nextSibling);o--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||o++}l=l.nextSibling}return null}function mw(l){l=l.previousSibling;for(var o=0;l;){if(l.nodeType===8){var h=l.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(o===0)return l;o--}else h!=="/$"&&h!=="/&"||o++}l=l.previousSibling}return null}function gw(l,o,h){switch(o=Fm(h),l){case"html":if(l=o.documentElement,!l)throw Error(n(452));return l;case"head":if(l=o.head,!l)throw Error(n(453));return l;case"body":if(l=o.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function O0(l){for(var o=l.attributes;o.length;)l.removeAttributeNode(o[0]);Co(l)}var Jo=new Map,xw=new Set;function Lm(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var rd=se.d;se.d={f:BS,r:kS,D:CS,C:SS,L:ES,m:TS,X:FS,S:US,M:LS};function BS(){var l=rd.f(),o=Da();return l||o}function kS(l){var o=al(l);o!==null&&o.tag===5&&o.type==="form"?rm(o):rd.r(l)}var bf=typeof document>"u"?null:document;function bw(l,o,h){var g=bf;if(g&&typeof o=="string"&&o){var k=wn(o);k='link[rel="'+l+'"][href="'+k+'"]',typeof h=="string"&&(k+='[crossorigin="'+h+'"]'),xw.has(k)||(xw.add(k),l={rel:l,crossOrigin:h,href:o},g.querySelector(k)===null&&(o=g.createElement("link"),xi(o,"link",l),hn(o),g.head.appendChild(o)))}}function CS(l){rd.D(l),bw("dns-prefetch",l,null)}function SS(l,o){rd.C(l,o),bw("preconnect",l,o)}function ES(l,o,h){rd.L(l,o,h);var g=bf;if(g&&l&&o){var k='link[rel="preload"][as="'+wn(o)+'"]';o==="image"&&h&&h.imageSrcSet?(k+='[imagesrcset="'+wn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(k+='[imagesizes="'+wn(h.imageSizes)+'"]')):k+='[href="'+wn(l)+'"]';var T=k;switch(o){case"style":T=vf(l);break;case"script":T=yf(l)}Jo.has(T)||(l=p({rel:"preload",href:o==="image"&&h&&h.imageSrcSet?void 0:l,as:o},h),Jo.set(T,l),g.querySelector(k)!==null||o==="style"&&g.querySelector(D0(T))||o==="script"&&g.querySelector(R0(T))||(o=g.createElement("link"),xi(o,"link",l),hn(o),g.head.appendChild(o)))}}function TS(l,o){rd.m(l,o);var h=bf;if(h&&l){var g=o&&typeof o.as=="string"?o.as:"script",k='link[rel="modulepreload"][as="'+wn(g)+'"][href="'+wn(l)+'"]',T=k;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=yf(l)}if(!Jo.has(T)&&(l=p({rel:"modulepreload",href:l},o),Jo.set(T,l),h.querySelector(k)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(R0(T)))return}g=h.createElement("link"),xi(g,"link",l),hn(g),h.head.appendChild(g)}}}function US(l,o,h){rd.S(l,o,h);var g=bf;if(g&&l){var k=Nl(g).hoistableStyles,T=vf(l);o=o||"default";var Y=k.get(T);if(!Y){var fe={loading:0,preload:null};if(Y=g.querySelector(D0(T)))fe.loading=5;else{l=p({rel:"stylesheet",href:l,"data-precedence":o},h),(h=Jo.get(T))&&Xb(l,h);var ke=Y=g.createElement("link");hn(ke),xi(ke,"link",l),ke._p=new Promise(function(Ye,At){ke.onload=Ye,ke.onerror=At}),ke.addEventListener("load",function(){fe.loading|=1}),ke.addEventListener("error",function(){fe.loading|=2}),fe.loading|=4,Mm(Y,o,g)}Y={type:"stylesheet",instance:Y,count:1,state:fe},k.set(T,Y)}}}function FS(l,o){rd.X(l,o);var h=bf;if(h&&l){var g=Nl(h).hoistableScripts,k=yf(l),T=g.get(k);T||(T=h.querySelector(R0(k)),T||(l=p({src:l,async:!0},o),(o=Jo.get(k))&&Zb(l,o),T=h.createElement("script"),hn(T),xi(T,"link",l),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(k,T))}}function LS(l,o){rd.M(l,o);var h=bf;if(h&&l){var g=Nl(h).hoistableScripts,k=yf(l),T=g.get(k);T||(T=h.querySelector(R0(k)),T||(l=p({src:l,async:!0,type:"module"},o),(o=Jo.get(k))&&Zb(l,o),T=h.createElement("script"),hn(T),xi(T,"link",l),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(k,T))}}function vw(l,o,h,g){var k=(k=ne.current)?Lm(k):null;if(!k)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(o=vf(h.href),h=Nl(k).hoistableStyles,g=h.get(o),g||(g={type:"style",instance:null,count:0,state:null},h.set(o,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){l=vf(h.href);var T=Nl(k).hoistableStyles,Y=T.get(l);if(Y||(k=k.ownerDocument||k,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(l,Y),(T=k.querySelector(D0(l)))&&!T._p&&(Y.instance=T,Y.state.loading=5),Jo.has(l)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Jo.set(l,h),T||MS(k,l,h,Y.state))),o&&g===null)throw Error(n(528,""));return Y}if(o&&g!==null)throw Error(n(529,""));return null;case"script":return o=h.async,h=h.src,typeof h=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=yf(h),h=Nl(k).hoistableScripts,g=h.get(o),g||(g={type:"script",instance:null,count:0,state:null},h.set(o,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function vf(l){return'href="'+wn(l)+'"'}function D0(l){return'link[rel="stylesheet"]['+l+"]"}function yw(l){return p({},l,{"data-precedence":l.precedence,precedence:null})}function MS(l,o,h,g){l.querySelector('link[rel="preload"][as="style"]['+o+"]")?g.loading=1:(o=l.createElement("link"),g.preload=o,o.addEventListener("load",function(){return g.loading|=1}),o.addEventListener("error",function(){return g.loading|=2}),xi(o,"link",h),hn(o),l.head.appendChild(o))}function yf(l){return'[src="'+wn(l)+'"]'}function R0(l){return"script[async]"+l}function ww(l,o,h){if(o.count++,o.instance===null)switch(o.type){case"style":var g=l.querySelector('style[data-href~="'+wn(h.href)+'"]');if(g)return o.instance=g,hn(g),g;var k=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),hn(g),xi(g,"style",k),Mm(g,h.precedence,l),o.instance=g;case"stylesheet":k=vf(h.href);var T=l.querySelector(D0(k));if(T)return o.state.loading|=4,o.instance=T,hn(T),T;g=yw(h),(k=Jo.get(k))&&Xb(g,k),T=(l.ownerDocument||l).createElement("link"),hn(T);var Y=T;return Y._p=new Promise(function(fe,ke){Y.onload=fe,Y.onerror=ke}),xi(T,"link",g),o.state.loading|=4,Mm(T,h.precedence,l),o.instance=T;case"script":return T=yf(h.src),(k=l.querySelector(R0(T)))?(o.instance=k,hn(k),k):(g=h,(k=Jo.get(T))&&(g=p({},h),Zb(g,k)),l=l.ownerDocument||l,k=l.createElement("script"),hn(k),xi(k,"link",g),l.head.appendChild(k),o.instance=k);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(g=o.instance,o.state.loading|=4,Mm(g,h.precedence,l));return o.instance}function Mm(l,o,h){for(var g=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),k=g.length?g[g.length-1]:null,T=k,Y=0;Y<g.length;Y++){var fe=g[Y];if(fe.dataset.precedence===o)T=fe;else if(T!==k)break}T?T.parentNode.insertBefore(l,T.nextSibling):(o=h.nodeType===9?h.head:h,o.insertBefore(l,o.firstChild))}function Xb(l,o){l.crossOrigin==null&&(l.crossOrigin=o.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=o.referrerPolicy),l.title==null&&(l.title=o.title)}function Zb(l,o){l.crossOrigin==null&&(l.crossOrigin=o.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=o.referrerPolicy),l.integrity==null&&(l.integrity=o.integrity)}var Qm=null;function jw(l,o,h){if(Qm===null){var g=new Map,k=Qm=new Map;k.set(h,g)}else k=Qm,g=k.get(h),g||(g=new Map,k.set(h,g));if(g.has(l))return g;for(g.set(l,null),h=h.getElementsByTagName(l),k=0;k<h.length;k++){var T=h[k];if(!(T[Ni]||T[pr]||l==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=T.getAttribute(o)||"";Y=l+Y;var fe=g.get(Y);fe?fe.push(T):g.set(Y,[T])}}return g}function Nw(l,o,h){l=l.ownerDocument||l,l.head.insertBefore(h,o==="title"?l.querySelector("head > title"):null)}function QS(l,o,h){if(h===1||o.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return l=o.disabled,typeof o.precedence=="string"&&l==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Bw(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function _S(l,o,h,g){if(h.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var k=vf(g.href),T=o.querySelector(D0(k));if(T){o=T._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(l.count++,l=_m.bind(l),o.then(l,l)),h.state.loading|=4,h.instance=T,hn(T);return}T=o.ownerDocument||o,g=yw(g),(k=Jo.get(k))&&Xb(g,k),T=T.createElement("link"),hn(T);var Y=T;Y._p=new Promise(function(fe,ke){Y.onload=fe,Y.onerror=ke}),xi(T,"link",g),h.instance=T}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(h,o),(o=h.state.preload)&&(h.state.loading&3)===0&&(l.count++,h=_m.bind(l),o.addEventListener("load",h),o.addEventListener("error",h))}}var e1=0;function IS(l,o){return l.stylesheets&&l.count===0&&Om(l,l.stylesheets),0<l.count||0<l.imgCount?function(h){var g=setTimeout(function(){if(l.stylesheets&&Om(l,l.stylesheets),l.unsuspend){var T=l.unsuspend;l.unsuspend=null,T()}},6e4+o);0<l.imgBytes&&e1===0&&(e1=62500*gS());var k=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Om(l,l.stylesheets),l.unsuspend)){var T=l.unsuspend;l.unsuspend=null,T()}},(l.imgBytes>e1?50:800)+o);return l.unsuspend=h,function(){l.unsuspend=null,clearTimeout(g),clearTimeout(k)}}:null}function _m(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Om(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Im=null;function Om(l,o){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Im=new Map,o.forEach(OS,l),Im=null,_m.call(l))}function OS(l,o){if(!(o.state.loading&4)){var h=Im.get(l);if(h)var g=h.get(null);else{h=new Map,Im.set(l,h);for(var k=l.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<k.length;T++){var Y=k[T];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(h.set(Y.dataset.precedence,Y),g=Y)}g&&h.set(null,g)}k=o.instance,Y=k.getAttribute("data-precedence"),T=h.get(Y)||g,T===g&&h.set(null,k),h.set(Y,k),this.count++,g=_m.bind(this),k.addEventListener("load",g),k.addEventListener("error",g),T?T.parentNode.insertBefore(k,T.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(k,l.firstChild)),o.state.loading|=4}}var H0={$$typeof:U,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function DS(l,o,h,g,k,T,Y,fe,ke){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.hiddenUpdates=jt(null),this.identifierPrefix=g,this.onUncaughtError=k,this.onCaughtError=T,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ke,this.incompleteTransitions=new Map}function kw(l,o,h,g,k,T,Y,fe,ke,Ye,At,bt){return l=new DS(l,o,h,Y,ke,Ye,At,bt,fe),o=1,T===!0&&(o|=24),T=ja(3,null,null,o),l.current=T,T.stateNode=l,o=Jc(),o.refCount++,l.pooledCache=o,o.refCount++,T.memoizedState={element:g,isDehydrated:h,cache:o},_t(T),l}function Cw(l){return l?(l=Aa,l):Aa}function Sw(l,o,h,g,k,T){k=Cw(k),g.context===null?g.context=k:g.pendingContext=k,g=ms(o),g.payload={element:h},T=T===void 0?null:T,T!==null&&(g.callback=T),h=vs(l,g,o),h!==null&&(_r(h,l,o),gr(h,l,o))}function Ew(l,o){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var h=l.retryLane;l.retryLane=h!==0&&h<o?h:o}}function t1(l,o){Ew(l,o),(l=l.alternate)&&Ew(l,o)}function Tw(l){if(l.tag===13||l.tag===31){var o=Fl(l,67108864);o!==null&&_r(o,l,67108864),t1(l,67108864)}}function Uw(l){if(l.tag===13||l.tag===31){var o=cs();o=qt(o);var h=Fl(l,o);h!==null&&_r(h,l,o),t1(l,o)}}var Dm=!0;function RS(l,o,h,g){var k=W.T;W.T=null;var T=se.p;try{se.p=2,s1(l,o,h,g)}finally{se.p=T,W.T=k}}function HS(l,o,h,g){var k=W.T;W.T=null;var T=se.p;try{se.p=8,s1(l,o,h,g)}finally{se.p=T,W.T=k}}function s1(l,o,h,g){if(Dm){var k=r1(g);if(k===null)Pb(l,o,g,Rm,h),Lw(l,g);else if(zS(k,l,o,h,g))g.stopPropagation();else if(Lw(l,g),o&4&&-1<PS.indexOf(l)){for(;k!==null;){var T=al(k);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var Y=st(T.pendingLanes);if(Y!==0){var fe=T;for(fe.pendingLanes|=2,fe.entangledLanes|=2;Y;){var ke=1<<31-Vt(Y);fe.entanglements[1]|=ke,Y&=~ke}uA(T),(vr&6)===0&&(Ht=pt()+500,Q0(0))}}break;case 31:case 13:fe=Fl(T,2),fe!==null&&_r(fe,T,2),Da(),t1(T,2)}if(T=r1(g),T===null&&Pb(l,o,g,Rm,h),T===k)break;k=T}k!==null&&g.stopPropagation()}else Pb(l,o,g,null,h)}}function r1(l){return l=uc(l),n1(l)}var Rm=null;function n1(l){if(Rm=null,l=nl(l),l!==null){var o=i(l);if(o===null)l=null;else{var h=o.tag;if(h===13){if(l=c(o),l!==null)return l;l=null}else if(h===31){if(l=A(o),l!==null)return l;l=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;l=null}else o!==l&&(l=null)}}return Rm=l,null}function Fw(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rt()){case Ut:return 2;case rs:return 8;case Ot:case Dt:return 32;case Oe:return 268435456;default:return 32}default:return 32}}var a1=!1,eu=null,tu=null,su=null,P0=new Map,z0=new Map,ru=[],PS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lw(l,o){switch(l){case"focusin":case"focusout":eu=null;break;case"dragenter":case"dragleave":tu=null;break;case"mouseover":case"mouseout":su=null;break;case"pointerover":case"pointerout":P0.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":z0.delete(o.pointerId)}}function K0(l,o,h,g,k,T){return l===null||l.nativeEvent!==T?(l={blockedOn:o,domEventName:h,eventSystemFlags:g,nativeEvent:T,targetContainers:[k]},o!==null&&(o=al(o),o!==null&&Tw(o)),l):(l.eventSystemFlags|=g,o=l.targetContainers,k!==null&&o.indexOf(k)===-1&&o.push(k),l)}function zS(l,o,h,g,k){switch(o){case"focusin":return eu=K0(eu,l,o,h,g,k),!0;case"dragenter":return tu=K0(tu,l,o,h,g,k),!0;case"mouseover":return su=K0(su,l,o,h,g,k),!0;case"pointerover":var T=k.pointerId;return P0.set(T,K0(P0.get(T)||null,l,o,h,g,k)),!0;case"gotpointercapture":return T=k.pointerId,z0.set(T,K0(z0.get(T)||null,l,o,h,g,k)),!0}return!1}function Mw(l){var o=nl(l.target);if(o!==null){var h=i(o);if(h!==null){if(o=h.tag,o===13){if(o=c(h),o!==null){l.blockedOn=o,yr(l.priority,function(){Uw(h)});return}}else if(o===31){if(o=A(h),o!==null){l.blockedOn=o,yr(l.priority,function(){Uw(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){l.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Hm(l){if(l.blockedOn!==null)return!1;for(var o=l.targetContainers;0<o.length;){var h=r1(l.nativeEvent);if(h===null){h=l.nativeEvent;var g=new h.constructor(h.type,h);Zl=g,h.target.dispatchEvent(g),Zl=null}else return o=al(h),o!==null&&Tw(o),l.blockedOn=h,!1;o.shift()}return!0}function Qw(l,o,h){Hm(l)&&h.delete(o)}function KS(){a1=!1,eu!==null&&Hm(eu)&&(eu=null),tu!==null&&Hm(tu)&&(tu=null),su!==null&&Hm(su)&&(su=null),P0.forEach(Qw),z0.forEach(Qw)}function Pm(l,o){l.blockedOn===o&&(l.blockedOn=null,a1||(a1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,KS)))}var zm=null;function _w(l){zm!==l&&(zm=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){zm===l&&(zm=null);for(var o=0;o<l.length;o+=3){var h=l[o],g=l[o+1],k=l[o+2];if(typeof g!="function"){if(n1(g||h)===null)continue;break}var T=al(h);T!==null&&(l.splice(o,3),o-=3,nf(T,{pending:!0,data:k,method:h.method,action:g},g,k))}}))}function wf(l){function o(ke){return Pm(ke,l)}eu!==null&&Pm(eu,l),tu!==null&&Pm(tu,l),su!==null&&Pm(su,l),P0.forEach(o),z0.forEach(o);for(var h=0;h<ru.length;h++){var g=ru[h];g.blockedOn===l&&(g.blockedOn=null)}for(;0<ru.length&&(h=ru[0],h.blockedOn===null);)Mw(h),h.blockedOn===null&&ru.shift();if(h=(l.ownerDocument||l).$$reactFormReplay,h!=null)for(g=0;g<h.length;g+=3){var k=h[g],T=h[g+1],Y=k[Pr]||null;if(typeof T=="function")Y||_w(h);else if(Y){var fe=null;if(T&&T.hasAttribute("formAction")){if(k=T,Y=T[Pr]||null)fe=Y.formAction;else if(n1(k)!==null)continue}else fe=Y.action;typeof fe=="function"?h[g+1]=fe:(h.splice(g,3),g-=3),_w(h)}}}function Iw(){function l(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(Y){return k=Y})},focusReset:"manual",scroll:"manual"})}function o(){k!==null&&(k(),k=null),g||setTimeout(h,20)}function h(){if(!g&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,k=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(h,100),function(){g=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),k!==null&&(k(),k=null)}}}function i1(l){this._internalRoot=l}Km.prototype.render=i1.prototype.render=function(l){var o=this._internalRoot;if(o===null)throw Error(n(409));var h=o.current,g=cs();Sw(h,g,l,o,null,null)},Km.prototype.unmount=i1.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var o=l.containerInfo;Sw(l.current,2,null,l,null,null),Da(),o[xa]=null}};function Km(l){this._internalRoot=l}Km.prototype.unstable_scheduleHydration=function(l){if(l){var o=Ls();l={blockedOn:null,target:l,priority:o};for(var h=0;h<ru.length&&o!==0&&o<ru[h].priority;h++);ru.splice(h,0,l),h===0&&Mw(l)}};var Ow=e.version;if(Ow!=="19.2.3")throw Error(n(527,Ow,"19.2.3"));se.findDOMNode=function(l){var o=l._reactInternals;if(o===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=f(o),l=l!==null?u(l):null,l=l===null?null:l.stateNode,l};var VS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vm.isDisabled&&Vm.supportsFiber)try{ht=Vm.inject(VS),vt=Vm}catch{}}return $0.createRoot=function(l,o){if(!a(l))throw Error(n(299));var h=!1,g="",k=lm,T=Zu,Y=eh;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(k=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(Y=o.onRecoverableError)),o=kw(l,1,!1,null,null,h,g,null,k,T,Y,Iw),l[xa]=o.current,Hb(l),new i1(o)},$0.hydrateRoot=function(l,o,h){if(!a(l))throw Error(n(299));var g=!1,k="",T=lm,Y=Zu,fe=eh,ke=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(k=h.identifierPrefix),h.onUncaughtError!==void 0&&(T=h.onUncaughtError),h.onCaughtError!==void 0&&(Y=h.onCaughtError),h.onRecoverableError!==void 0&&(fe=h.onRecoverableError),h.formState!==void 0&&(ke=h.formState)),o=kw(l,1,!0,o,h??null,g,k,ke,T,Y,fe,Iw),o.context=Cw(null),h=o.current,g=cs(),g=qt(g),k=ms(g),k.callback=null,vs(h,k,g),h=g,o.current.lanes=h,Et(o,h),uA(o),l[xa]=o.current,Hb(l),new Km(o)},$0.version="19.2.3",$0}var qw;function aE(){if(qw)return c1.exports;qw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),c1.exports=nE(),c1.exports}var iE=aE();const lE=qx(iE);var S4=C4();const E4=qx(S4);/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bp(){return Bp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Bp.apply(this,arguments)}var pu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(pu||(pu={}));const Yw="popstate";function oE(t){t===void 0&&(t={});function e(n,a){let{pathname:i,search:c,hash:A}=n.location;return jv("",{pathname:i,search:c,hash:A},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:T4(a)}return AE(e,s,null,t)}function Ta(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qy(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cE(){return Math.random().toString(36).substr(2,8)}function Jw(t,e){return{usr:t.state,key:t.key,idx:e}}function jv(t,e,s,n){return s===void 0&&(s=null),Bp({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Yf(e):e,{state:s,key:e&&e.key||n||cE()})}function T4(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Yf(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function AE(t,e,s,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,c=a.history,A=pu.Pop,d=null,f=u();f==null&&(f=0,c.replaceState(Bp({},c.state,{idx:f}),""));function u(){return(c.state||{idx:null}).idx}function p(){A=pu.Pop;let S=u(),C=S==null?null:S-f;f=S,d&&d({action:A,location:w.location,delta:C})}function x(S,C){A=pu.Push;let F=jv(w.location,S,C);f=u()+1;let U=Jw(F,f),_=w.createHref(F);try{c.pushState(U,"",_)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;a.location.assign(_)}i&&d&&d({action:A,location:w.location,delta:1})}function m(S,C){A=pu.Replace;let F=jv(w.location,S,C);f=u();let U=Jw(F,f),_=w.createHref(F);c.replaceState(U,"",_),i&&d&&d({action:A,location:w.location,delta:0})}function j(S){let C=a.location.origin!=="null"?a.location.origin:a.location.href,F=typeof S=="string"?S:T4(S);return F=F.replace(/ $/,"%20"),Ta(C,"No window.location.(origin|href) available to create URL for href: "+F),new URL(F,C)}let w={get action(){return A},get location(){return t(a,c)},listen(S){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Yw,p),d=S,()=>{a.removeEventListener(Yw,p),d=null}},createHref(S){return e(a,S)},createURL:j,encodeLocation(S){let C=j(S);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:x,replace:m,go(S){return c.go(S)}};return w}var Ww;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ww||(Ww={}));function dE(t,e,s){return s===void 0&&(s="/"),uE(t,e,s)}function uE(t,e,s,n){let a=typeof e=="string"?Yf(e):e,i=L4(a.pathname||"/",s);if(i==null)return null;let c=U4(t);hE(c);let A=null;for(let d=0;A==null&&d<c.length;++d){let f=BE(i);A=wE(c[d],f)}return A}function U4(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let a=(i,c,A)=>{let d={relativePath:A===void 0?i.path||"":A,caseSensitive:i.caseSensitive===!0,childrenIndex:c,route:i};d.relativePath.startsWith("/")&&(Ta(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let f=Bh([n,d.relativePath]),u=s.concat(d);i.children&&i.children.length>0&&(Ta(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),U4(i.children,e,u,f)),!(i.path==null&&!i.index)&&e.push({path:f,score:vE(f,i.index),routesMeta:u})};return t.forEach((i,c)=>{var A;if(i.path===""||!((A=i.path)!=null&&A.includes("?")))a(i,c);else for(let d of F4(i.path))a(i,c,d)}),e}function F4(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let c=F4(n.join("/")),A=[];return A.push(...c.map(d=>d===""?i:[i,d].join("/"))),a&&A.push(...c),A.map(d=>t.startsWith("/")&&d===""?"/":d)}function hE(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:yE(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const fE=/^:[\w-]+$/,pE=3,mE=2,gE=1,xE=10,bE=-2,Xw=t=>t==="*";function vE(t,e){let s=t.split("/"),n=s.length;return s.some(Xw)&&(n+=bE),e&&(n+=mE),s.filter(a=>!Xw(a)).reduce((a,i)=>a+(fE.test(i)?pE:i===""?gE:xE),n)}function yE(t,e){return t.length===e.length&&t.slice(0,-1).every((n,a)=>n===e[a])?t[t.length-1]-e[e.length-1]:0}function wE(t,e,s){let{routesMeta:n}=t,a={},i="/",c=[];for(let A=0;A<n.length;++A){let d=n[A],f=A===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",p=jE({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},u),x=d.route;if(!p)return null;Object.assign(a,p.params),c.push({params:a,pathname:Bh([i,p.pathname]),pathnameBase:TE(Bh([i,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(i=Bh([i,p.pathnameBase]))}return c}function jE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=NE(t.path,t.caseSensitive,t.end),a=e.match(s);if(!a)return null;let i=a[0],c=i.replace(/(.)\/+$/,"$1"),A=a.slice(1);return{params:n.reduce((f,u,p)=>{let{paramName:x,isOptional:m}=u;if(x==="*"){let w=A[p]||"";c=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const j=A[p];return m&&!j?f[x]=void 0:f[x]=(j||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:c,pattern:t}}function NE(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),Qy(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,A,d)=>(n.push({paramName:A,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),n]}function BE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qy(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function L4(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}const kE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CE=t=>kE.test(t);function SE(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:a=""}=typeof t=="string"?Yf(t):t,i;if(s)if(CE(s))i=s;else{if(s.includes("//")){let c=s;s=s.replace(/\/\/+/g,"/"),Qy(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+s))}s.startsWith("/")?i=Zw(s.substring(1),"/"):i=Zw(s,e)}else i=e;return{pathname:i,search:UE(n),hash:FE(a)}}function Zw(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function h1(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EE(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function M4(t,e){let s=EE(t);return e?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Q4(t,e,s,n){n===void 0&&(n=!1);let a;typeof t=="string"?a=Yf(t):(a=Bp({},t),Ta(!a.pathname||!a.pathname.includes("?"),h1("?","pathname","search",a)),Ta(!a.pathname||!a.pathname.includes("#"),h1("#","pathname","hash",a)),Ta(!a.search||!a.search.includes("#"),h1("#","search","hash",a)));let i=t===""||a.pathname==="",c=i?"/":a.pathname,A;if(c==null)A=s;else{let p=e.length-1;if(!n&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),p-=1;a.pathname=x.join("/")}A=p>=0?e[p]:"/"}let d=SE(a,A),f=c&&c!=="/"&&c.endsWith("/"),u=(i||c===".")&&s.endsWith("/");return!d.pathname.endsWith("/")&&(f||u)&&(d.pathname+="/"),d}const Bh=t=>t.join("/").replace(/\/\/+/g,"/"),TE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),UE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function LE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _4=["post","put","patch","delete"];new Set(_4);const ME=["get",..._4];new Set(ME);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kp(){return kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},kp.apply(this,arguments)}const _y=L.createContext(null),QE=L.createContext(null),zp=L.createContext(null),Yx=L.createContext(null),Fu=L.createContext({outlet:null,matches:[],isDataRoute:!1}),I4=L.createContext(null);function Kp(){return L.useContext(Yx)!=null}function Jf(){return Kp()||Ta(!1),L.useContext(Yx).location}function O4(t){L.useContext(zp).static||L.useLayoutEffect(t)}function za(){let{isDataRoute:t}=L.useContext(Fu);return t?qE():_E()}function _E(){Kp()||Ta(!1);let t=L.useContext(_y),{basename:e,future:s,navigator:n}=L.useContext(zp),{matches:a}=L.useContext(Fu),{pathname:i}=Jf(),c=JSON.stringify(M4(a,s.v7_relativeSplatPath)),A=L.useRef(!1);return O4(()=>{A.current=!0}),L.useCallback(function(f,u){if(u===void 0&&(u={}),!A.current)return;if(typeof f=="number"){n.go(f);return}let p=Q4(f,JSON.parse(c),i,u.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Bh([e,p.pathname])),(u.replace?n.replace:n.push)(p,u.state,u)},[e,n,c,i,t])}function Jx(){let{matches:t}=L.useContext(Fu),e=t[t.length-1];return e?e.params:{}}function IE(t,e){return OE(t,e)}function OE(t,e,s,n){Kp()||Ta(!1);let{navigator:a}=L.useContext(zp),{matches:i}=L.useContext(Fu),c=i[i.length-1],A=c?c.params:{};c&&c.pathname;let d=c?c.pathnameBase:"/";c&&c.route;let f=Jf(),u;if(e){var p;let S=typeof e=="string"?Yf(e):e;d==="/"||(p=S.pathname)!=null&&p.startsWith(d)||Ta(!1),u=S}else u=f;let x=u.pathname||"/",m=x;if(d!=="/"){let S=d.replace(/^\//,"").split("/");m="/"+x.replace(/^\//,"").split("/").slice(S.length).join("/")}let j=dE(t,{pathname:m}),w=zE(j&&j.map(S=>Object.assign({},S,{params:Object.assign({},A,S.params),pathname:Bh([d,a.encodeLocation?a.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?d:Bh([d,a.encodeLocation?a.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,s,n);return e&&w?L.createElement(Yx.Provider,{value:{location:kp({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:pu.Pop}},w):w}function DE(){let t=GE(),e=LE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),s?L.createElement("pre",{style:a},s):null,null)}const RE=L.createElement(DE,null);class HE extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?L.createElement(Fu.Provider,{value:this.props.routeContext},L.createElement(I4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PE(t){let{routeContext:e,match:s,children:n}=t,a=L.useContext(_y);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),L.createElement(Fu.Provider,{value:e},n)}function zE(t,e,s,n){var a;if(e===void 0&&(e=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var i;if(!s)return null;if(s.errors)t=s.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let c=t,A=(a=s)==null?void 0:a.errors;if(A!=null){let u=c.findIndex(p=>p.route.id&&(A==null?void 0:A[p.route.id])!==void 0);u>=0||Ta(!1),c=c.slice(0,Math.min(c.length,u+1))}let d=!1,f=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<c.length;u++){let p=c[u];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=u),p.route.id){let{loaderData:x,errors:m}=s,j=p.route.loader&&x[p.route.id]===void 0&&(!m||m[p.route.id]===void 0);if(p.route.lazy||j){d=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((u,p,x)=>{let m,j=!1,w=null,S=null;s&&(m=A&&p.route.id?A[p.route.id]:void 0,w=p.route.errorElement||RE,d&&(f<0&&x===0?(YE("route-fallback"),j=!0,S=null):f===x&&(j=!0,S=p.route.hydrateFallbackElement||null)));let C=e.concat(c.slice(0,x+1)),F=()=>{let U;return m?U=w:j?U=S:p.route.Component?U=L.createElement(p.route.Component,null):p.route.element?U=p.route.element:U=u,L.createElement(PE,{match:p,routeContext:{outlet:u,matches:C,isDataRoute:s!=null},children:U})};return s&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?L.createElement(HE,{location:s.location,revalidation:s.revalidation,component:w,error:m,children:F(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):F()},null)}var D4=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(D4||{}),R4=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(R4||{});function KE(t){let e=L.useContext(_y);return e||Ta(!1),e}function VE(t){let e=L.useContext(QE);return e||Ta(!1),e}function $E(t){let e=L.useContext(Fu);return e||Ta(!1),e}function H4(t){let e=$E(),s=e.matches[e.matches.length-1];return s.route.id||Ta(!1),s.route.id}function GE(){var t;let e=L.useContext(I4),s=VE(),n=H4();return e!==void 0?e:(t=s.errors)==null?void 0:t[n]}function qE(){let{router:t}=KE(D4.UseNavigateStable),e=H4(R4.UseNavigateStable),s=L.useRef(!1);return O4(()=>{s.current=!0}),L.useCallback(function(a,i){i===void 0&&(i={}),s.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,kp({fromRouteId:e},i)))},[t,e])}const e5={};function YE(t,e,s){e5[t]||(e5[t]=!0)}function JE(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function WE(t){let{to:e,replace:s,state:n,relative:a}=t;Kp()||Ta(!1);let{future:i,static:c}=L.useContext(zp),{matches:A}=L.useContext(Fu),{pathname:d}=Jf(),f=za(),u=Q4(e,M4(A,i.v7_relativeSplatPath),d,a==="path"),p=JSON.stringify(u);return L.useEffect(()=>f(JSON.parse(p),{replace:s,state:n,relative:a}),[f,p,a,s,n]),null}function Ra(t){Ta(!1)}function XE(t){let{basename:e="/",children:s=null,location:n,navigationType:a=pu.Pop,navigator:i,static:c=!1,future:A}=t;Kp()&&Ta(!1);let d=e.replace(/^\/*/,"/"),f=L.useMemo(()=>({basename:d,navigator:i,static:c,future:kp({v7_relativeSplatPath:!1},A)}),[d,A,i,c]);typeof n=="string"&&(n=Yf(n));let{pathname:u="/",search:p="",hash:x="",state:m=null,key:j="default"}=n,w=L.useMemo(()=>{let S=L4(u,d);return S==null?null:{location:{pathname:S,search:p,hash:x,state:m,key:j},navigationType:a}},[d,u,p,x,m,j,a]);return w==null?null:L.createElement(zp.Provider,{value:f},L.createElement(Yx.Provider,{children:s,value:w}))}function ZE(t){let{children:e,location:s}=t;return IE(Nv(e),s)}new Promise(()=>{});function Nv(t,e){e===void 0&&(e=[]);let s=[];return L.Children.forEach(t,(n,a)=>{if(!L.isValidElement(n))return;let i=[...e,a];if(n.type===L.Fragment){s.push.apply(s,Nv(n.props.children,i));return}n.type!==Ra&&Ta(!1),!n.props.index||!n.props.children||Ta(!1);let c={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=Nv(n.props.children,i)),s.push(c)}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bv(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let n=t[s];return e.concat(Array.isArray(n)?n.map(a=>[s,a]):[[s,n]])},[]))}function e6(t,e){let s=Bv(t);return e&&e.forEach((n,a)=>{s.has(a)||e.getAll(a).forEach(i=>{s.append(a,i)})}),s}const t6="6";try{window.__reactRouterVersion=t6}catch{}const s6="startTransition",t5=eE[s6];function r6(t){let{basename:e,children:s,future:n,window:a}=t,i=L.useRef();i.current==null&&(i.current=oE({window:a,v5Compat:!0}));let c=i.current,[A,d]=L.useState({action:c.action,location:c.location}),{v7_startTransition:f}=n||{},u=L.useCallback(p=>{f&&t5?t5(()=>d(p)):d(p)},[d,f]);return L.useLayoutEffect(()=>c.listen(u),[c,u]),L.useEffect(()=>JE(n),[n]),L.createElement(XE,{basename:e,children:s,location:A.location,navigationType:A.action,navigator:c,future:n})}var s5;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(s5||(s5={}));var r5;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(r5||(r5={}));function n6(t){let e=L.useRef(Bv(t)),s=L.useRef(!1),n=Jf(),a=L.useMemo(()=>e6(n.search,s.current?null:e.current),[n.search]),i=za(),c=L.useCallback((A,d)=>{const f=Bv(typeof A=="function"?A(a):A);s.current=!0,i("?"+f,d)},[i,a]);return[a,c]}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,n)=>n?n.toUpperCase():s.toLowerCase()),n5=t=>{const e=i6(t);return e.charAt(0).toUpperCase()+e.slice(1)},P4=(...t)=>t.filter((e,s,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===s).join(" ").trim(),l6=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=L.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:c,...A},d)=>L.createElement("svg",{ref:d,...o6,width:e,height:e,stroke:t,strokeWidth:n?Number(s)*24/Number(e):s,className:P4("lucide",a),...!i&&!l6(A)&&{"aria-hidden":"true"},...A},[...c.map(([f,u])=>L.createElement(f,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(t,e)=>{const s=L.forwardRef(({className:n,...a},i)=>L.createElement(c6,{ref:i,iconNode:e,className:P4(`lucide-${a6(n5(t))}`,`lucide-${t}`,n),...a}));return s.displayName=n5(t),s};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],wg=Je("arrow-down",A6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],u6=Je("arrow-left-right",d6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],jA=Je("arrow-left",h6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],f1=Je("arrow-right-left",f6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],hd=Je("arrow-right",p6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],g6=Je("arrow-up-right",m6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],jg=Je("arrow-up",x6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],v6=Je("ban",b6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]],w6=Je("bed-double",y6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],sc=Je("bell",j6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],B6=Je("bold",N6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Kg=Je("book-open",k6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],If=Je("bot",C6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],z4=Je("building-2",S6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]],Wx=Je("bus",E6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],U6=Je("calendar-days",T6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Mn=Je("calendar",F6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Xx=Je("camera",L6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],K4=Je("car",M6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],V4=Je("chart-column",Q6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],I6=Je("check-check",_6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ea=Je("check",O6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Of=Je("chevron-down",D6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Lu=Je("chevron-left",R6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ai=Je("chevron-right",H6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ur=Je("circle-alert",P6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zn=Je("circle-check-big",z6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],sa=Je("circle-check",K6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Zx=Je("circle-plus",V6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Vg=Je("circle-question-mark",$6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],rc=Je("circle-x",G6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Y6=Je("circle",q6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],on=Je("clock",J6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],X6=Je("code",W6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Vp=Je("coffee",Z6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],kv=Je("copy",eT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],sT=Je("cpu",tT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Df=Je("credit-card",rT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],wo=Je("crown",nT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Cv=Je("dollar-sign",aT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ip=Je("download",iT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],oT=Je("ellipsis",lT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Cp=Je("external-link",cT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],xA=Je("eye-off",AT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yn=Je("eye",dT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=[["path",{d:"M4 6.835V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-.343",key:"1vfytu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M2 19a2 2 0 0 1 4 0v1a2 2 0 0 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 0 1-4 0v-1a2 2 0 0 1 4 0",key:"1etmh7"}]],a5=Je("file-headphone",uT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]],i5=Je("file-pen",hT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Kl=Je("file-text",fT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],mT=Je("film",pT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],$g=Je("flag",gT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]],bT=Je("footprints",xT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],$4=Je("funnel",vT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Qh=Je("gift",yT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Gg=Je("globe",wT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],l5=Je("hash",jT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],BT=Je("heading-1",NT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],CT=Je("heading-2",kT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]],ET=Je("heading-3",ST);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],_h=Je("heart",TT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],FT=Je("history",UT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=[["path",{d:"M10 22v-6.57",key:"1wmca3"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M14 15.43V22",key:"1q2vjd"}],["path",{d:"M15 16a5 5 0 0 0-6 0",key:"o9wqvi"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],eb=Je("hotel",LT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Rf=Je("image",MT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Sp=Je("inbox",QT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],IT=Je("infinity",_T);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Pa=Je("info",OT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],RT=Je("italic",DT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],PT=Je("key-round",HT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],o5=Je("key",zT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],VT=Je("landmark",KT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],GT=Je("languages",$T);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Iy=Je("layout-dashboard",qT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],JT=Je("leaf",YT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],tb=Je("link",WT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],ZT=Je("list-ordered",XT);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],tU=Je("list",eU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Xt=Je("loader-circle",sU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Vl=Je("lock",rU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],sb=Je("log-out",nU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=[["path",{d:"M6 20a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2",key:"1m57jg"}],["path",{d:"M8 18V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v14",key:"1l99gc"}],["path",{d:"M10 20h4",key:"ni2waw"}],["circle",{cx:"16",cy:"20",r:"2",key:"1vifvg"}],["circle",{cx:"8",cy:"20",r:"2",key:"ckkr5m"}]],iU=Je("luggage",aU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ko=Je("mail",lU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ra=Je("map-pin",oU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],qg=Je("map",cU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],vA=Je("megaphone",AU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],G4=Je("menu",dU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ic=Je("message-circle",uU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Cu=Je("message-square",hU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],q4=Je("mic",fU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=[["path",{d:"M5 12h14",key:"1ays0h"}]],mU=Je("minus",pU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],xU=Je("moon",gU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]],c5=Je("mouse-pointer-click",bU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Y4=Je("navigation",vU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],Sv=Je("notebook-pen",yU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],p1=Je("package",wU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],NU=Je("palette",jU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],kU=Je("panel-left-close",BU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],SU=Je("panel-left",CU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],TU=Je("paperclip",EU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],FU=Je("party-popper",UU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],J4=Je("pause",LU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],W4=Je("pen-line",MU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Wf=Je("pen",QU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],rb=Je("pencil",_U);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],A5=Je("percent",IU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],NA=Je("plane",OU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ev=Je("play",DU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ln=Je("plus",RU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],PU=Je("printer",HU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],KU=Je("quote",zU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],X4=Je("receipt",VU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],GU=Je("redo",$U);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],yl=Je("refresh-cw",qU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],JU=Je("rotate-ccw",YU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],md=Je("save",WU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],tl=Je("search",XU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],vu=Je("send",ZU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nb=Je("settings",e8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Yg=Je("share-2",t8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],r8=Je("shield-alert",s8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hf=Je("shield-check",n8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],jo=Je("shield",a8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],ab=Je("shopping-bag",i8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Qn=Je("sparkles",l8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],c8=Je("square-check-big",o8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Oy=Je("square-pen",A8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],u8=Je("square",d8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],f8=Je("star-off",h8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],yA=Je("star",p8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],Z4=Je("sticky-note",m8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Dy=Je("store",g8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],b8=Je("strikethrough",x8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],y8=Je("sun",v8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Jg=Je("tag",w8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],d5=Je("target",j8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],B8=Je("text-align-center",N8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],C8=Je("text-align-end",k8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]],E8=Je("text-align-justify",S8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],U8=Je("text-align-start",T8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],L8=Je("ticket",F8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Tv=Je("timer",M8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],na=Je("trash-2",Q8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],I8=Je("trending-down",_8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ib=Je("trending-up",O8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ga=Je("triangle-alert",D8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],H8=Je("type",R8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],z8=Je("underline",P8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],V8=Je("undo",K8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Pf=Je("upload",$8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],q8=Je("user-cog",G8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ta=Je("user",Y8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Gl=Je("users",J8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],No=Je("utensils",W8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Uv=Je("volume-2",X8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],Kh=Je("wallet",Z8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Fv=Je("wand-sparkles",eF);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Xf=Je("wifi-off",tF);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Zf=Je("wifi",sF);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],As=Je("x",rF);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],aF=Je("zap",nF),iF={success:zn,error:ur,warning:ga,info:Pa},lF={success:"bg-emerald-50 dark:bg-emerald-900/30 border-emerald-200 dark:border-emerald-700 text-emerald-800 dark:text-emerald-200",error:"bg-red-50 dark:bg-red-900/30 border-red-200 dark:border-red-700 text-red-800 dark:text-red-200",warning:"bg-amber-50 dark:bg-amber-900/30 border-amber-200 dark:border-amber-700 text-amber-800 dark:text-amber-200",info:"bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-200"},oF={success:"text-emerald-500",error:"text-red-500",warning:"text-amber-500",info:"text-blue-500"},cF=({id:t,message:e,type:s,duration:n=4e3,onClose:a})=>{const[i,c]=L.useState(!1);L.useEffect(()=>{const f=setTimeout(()=>{c(!0)},n-300),u=setTimeout(()=>{a(t)},n);return()=>{clearTimeout(f),clearTimeout(u)}},[t,n,a]);const A=()=>{c(!0),setTimeout(()=>a(t),300)},d=iF[s];return r.jsxs("div",{className:`
        flex items-center gap-3 p-4 rounded-xl border shadow-lg backdrop-blur-sm
        ${lF[s]}
        ${i?"animate-slide-out-right":"animate-slide-in-right"}
        transition-all duration-300
      `,children:[r.jsx(d,{className:`w-5 h-5 flex-shrink-0 ${oF[s]}`}),r.jsx("span",{className:"font-medium text-sm flex-1",children:e}),r.jsx("button",{onClick:A,className:"p-1 rounded-lg hover:bg-black/5 dark:hover:bg-white/10 transition-colors",children:r.jsx(As,{className:"w-4 h-4"})})]})},AF=({toasts:t,onClose:e})=>r.jsx("div",{className:"fixed top-4 right-4 z-[200] flex flex-col gap-2 max-w-sm w-full pointer-events-none",children:t.map(s=>r.jsx("div",{className:"pointer-events-auto",children:r.jsx(cF,{id:s.id,message:s.message,type:s.type,duration:s.duration,onClose:e})},s.id))}),eB=L.createContext(null);let dF=0;const uF=({children:t})=>{const[e,s]=L.useState([]),n=L.useCallback(f=>{s(u=>u.filter(p=>p.id!==f))},[]),a=L.useCallback((f,u="info",p=4e3)=>{const x=`toast-${++dF}`;s(m=>[...m,{id:x,message:f,type:u,duration:p}])},[]),i=L.useCallback((f,u)=>{a(f,"success",u)},[a]),c=L.useCallback((f,u)=>{a(f,"error",u)},[a]),A=L.useCallback((f,u)=>{a(f,"warning",u)},[a]),d=L.useCallback((f,u)=>{a(f,"info",u)},[a]);return r.jsxs(eB.Provider,{value:{showToast:a,success:i,error:c,warning:A,info:d},children:[t,r.jsx(AF,{toasts:e,onClose:n})]})},lb=()=>{const t=L.useContext(eB);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},hF=({isOpen:t,isAdminUser:e,onSwitchToAdmin:s})=>{const n=za(),a=Jf(),[i,c]=L.useState(!1),[A,d]=L.useState(!1),[f,u]=L.useState(!1),p=L.useRef(null),x=[{path:"/",label:"Travel Dashboard",icon:Iy},{path:"/chat",label:"AI Planner",icon:Qn},{path:"/trips",label:"My Trips",icon:NA},{path:"/blogs",label:"Travel Stories",icon:Kg},{path:"/scheduler",label:"Notes",icon:Sv},{path:"/translate",label:"Translate",icon:GT},{path:"/expenses",label:"Expenses",icon:Kh},{path:"/calendar",label:"Calendar",icon:U6}];L.useEffect(()=>{const S=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const m=()=>{n("/support")},j=()=>{alert(`GogoTrip v2.0 Beta

AI-Powered Travel Companion.`)},w=S=>S==="/"||S==="/dashboard"?a.pathname==="/"||a.pathname==="/dashboard":a.pathname.startsWith(S);return r.jsxs(r.Fragment,{children:[r.jsx("aside",{className:`
          fixed inset-y-0 left-0 z-50 w-72 bg-white/95 dark:bg-slate-900/95 backdrop-blur-xl transition-transform duration-500 ease-apple
          ${t?"translate-x-0":"-translate-x-full"}
          md:hidden shadow-2xl overflow-y-auto
        `,children:r.jsxs("div",{className:"flex flex-col h-full p-4",children:[r.jsxs("div",{className:`mb-6 transition-all duration-500 delay-100 ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:[r.jsxs("button",{onClick:()=>u(!f),className:`w-full flex items-center justify-between p-2 rounded-2xl transition-all duration-300 active:scale-95 active:bg-slate-100 active:scale-95 ${f?"bg-slate-100 dark:bg-slate-800":""}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-sky-500 to-blue-600 flex items-center justify-center shadow-lg shadow-sky-500/30",children:r.jsx(If,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-xl font-bold text-slate-900 dark:text-white tracking-tight",children:"GogoTrip"})]}),r.jsx(Of,{className:`w-5 h-5 text-slate-400 transition-transform duration-300 ${f?"rotate-180":""}`})]}),r.jsx("div",{className:`
                overflow-hidden transition-all duration-300 ease-in-out
                ${f?"max-h-48 opacity-100 mt-2":"max-h-0 opacity-0"}
             `,children:r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-2 space-y-1",children:[r.jsxs("button",{onClick:m,className:"w-full flex items-center gap-3 px-3 py-3 rounded-lg text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-700 transition-colors active:scale-95",children:[r.jsx(Vg,{className:"w-4 h-4"}),"Help & Support"]}),r.jsxs("button",{onClick:j,className:"w-full flex items-center gap-3 px-3 py-3 rounded-lg text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-700 transition-colors active:scale-95",children:[r.jsx(Pa,{className:"w-4 h-4"}),"About"]})]})})]}),r.jsxs("nav",{className:"space-y-2",children:[x.map((S,C)=>r.jsxs("button",{onClick:()=>n(S.path),style:{animationDelay:`${C*100}ms`},className:`
                  w-full flex items-center gap-4 px-4 py-4 rounded-2xl transition-all duration-300 origin-left
                  ${t?"animate-fade-in-up":"opacity-0"}
                  ${w(S.path)?"bg-sky-50 text-sky-600 dark:bg-indigo-500/20 dark:text-indigo-300 font-bold shadow-sm scale-100":"text-slate-500 hover:bg-slate-50 hover:text-slate-900 dark:text-slate-400 dark:hover:bg-slate-800/50 dark:hover:text-slate-200 font-medium"}
                  active:scale-105 active:bg-slate-100 dark:active:bg-slate-800
                `,children:[r.jsx(S.icon,{className:`w-6 h-6 ${w(S.path)?"text-sky-600 dark:text-indigo-400":"text-slate-400"}`}),r.jsx("span",{className:"text-base",children:S.label})]},S.path)),e&&s&&r.jsxs("button",{onClick:s,className:"w-full flex items-center gap-4 px-4 py-4 rounded-2xl transition-all duration-300 origin-left mt-4 bg-violet-50 text-violet-700 dark:bg-violet-900/20 dark:text-violet-300 font-bold active:scale-95",children:[r.jsx(Hf,{className:"w-6 h-6"}),r.jsx("span",{className:"text-base",children:"Admin Portal"})]})]})]})}),r.jsx("div",{className:"hidden md:flex flex-col z-50 fixed left-4 top-4 bottom-4",onMouseEnter:()=>c(!0),onMouseLeave:()=>{c(!1),d(!1)},children:r.jsxs("div",{className:`
            h-full bg-white/90 dark:bg-slate-900/90 backdrop-blur-2xl shadow-xl dark:shadow-black/50 rounded-[2.5rem] flex flex-col transition-all duration-500 ease-apple border-none
            ${i?"w-[280px]":"w-[88px]"}
          `,children:[r.jsxs("div",{className:"relative pt-6 px-4 mb-2",ref:p,children:[r.jsxs("button",{onClick:()=>d(!A),className:`w-full flex items-center gap-4 p-4 rounded-2xl hover:bg-slate-100/50 dark:hover:bg-slate-800/50 transition-all duration-300 group ${A?"bg-slate-100 dark:bg-slate-800":""}`,children:[r.jsx("div",{className:"w-10 h-10 rounded-2xl bg-gradient-to-br from-sky-500 to-blue-600 flex-shrink-0 flex items-center justify-center shadow-lg shadow-sky-500/30 transition-transform duration-500 group-hover:scale-110",children:r.jsx(If,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{className:`flex flex-col items-start transition-all duration-300 delay-75 origin-left ${i?"opacity-100 translate-x-0 scale-100":"opacity-0 -translate-x-4 scale-95 pointer-events-none fixed"}`,children:[r.jsx("span",{className:"text-xl font-bold text-slate-900 dark:text-white tracking-tight leading-none group-hover:scale-105 origin-left transition-transform",children:"GogoTrip"}),r.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-medium uppercase tracking-wider mt-1",children:"v2.0 Beta"})]}),i&&r.jsx(ai,{className:`ml-auto w-4 h-4 text-slate-400 transition-transform duration-300 ${A?"rotate-90":""}`})]}),r.jsx("div",{className:`
                absolute top-full left-4 right-4 mt-2 bg-white dark:bg-slate-800 rounded-2xl shadow-xl overflow-hidden transition-all duration-300 origin-top z-50
                ${A&&i?"opacity-100 scale-100 translate-y-0 max-h-40":"opacity-0 scale-95 -translate-y-2 max-h-0 pointer-events-none"}
             `,children:r.jsxs("div",{className:"p-1.5 space-y-0.5",children:[r.jsxs("button",{onClick:m,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx(Vg,{className:"w-4 h-4"}),"Help & Support"]}),r.jsxs("button",{onClick:j,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[r.jsx(Pa,{className:"w-4 h-4"}),"About"]})]})})]}),r.jsxs("nav",{className:"flex-1 px-4 space-y-2 py-2 overflow-y-auto scrollbar-none",children:[x.map(S=>{const C=S.icon,F=w(S.path);return r.jsxs("button",{onClick:()=>n(S.path),className:`
                    relative w-full flex items-center h-14 rounded-full transition-all duration-300 group
                    ${F?"bg-sky-50 dark:bg-indigo-500/20":"hover:bg-slate-50 dark:hover:bg-slate-800/40"}
                  `,children:[r.jsx("div",{className:"absolute left-0 w-[56px] flex justify-center items-center transition-all duration-300",children:r.jsx(C,{className:`w-6 h-6 transition-colors duration-300 ${F?"text-sky-600 dark:text-indigo-400":"text-slate-400 group-hover:text-slate-600 dark:text-slate-500 dark:group-hover:text-slate-300"}`})}),r.jsx("span",{className:`
                    ml-[60px] text-sm font-medium whitespace-nowrap transition-all duration-300 ease-apple origin-left
                    ${i?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}
                    ${F?"text-sky-600 dark:text-indigo-300":"text-slate-600 dark:text-slate-400"}
                    group-hover:scale-105
                  `,children:S.label}),F&&r.jsx("div",{className:"absolute right-4 w-1.5 h-1.5 rounded-full bg-sky-500 dark:bg-indigo-400 shadow-[0_0_10px_rgba(14,165,233,0.6)]"})]},S.path)}),e&&s&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"my-2 border-t border-slate-100 dark:border-slate-800/50 mx-2"}),r.jsxs("button",{onClick:s,className:`
                    relative w-full flex items-center h-14 rounded-full transition-all duration-300 group
                    hover:bg-violet-50 dark:hover:bg-violet-900/20
                  `,title:"Back to Admin Dashboard",children:[r.jsx("div",{className:"absolute left-0 w-[56px] flex justify-center items-center transition-all duration-300",children:r.jsx(Hf,{className:"w-6 h-6 text-violet-600 dark:text-violet-400"})}),r.jsx("span",{className:`
                    ml-[60px] text-sm font-bold whitespace-nowrap transition-all duration-300 ease-apple origin-left
                    text-violet-700 dark:text-violet-300
                    ${i?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}
                  `,children:"Admin Portal"})]})]})]}),r.jsx("div",{className:"h-4"})]})}),r.jsx("div",{className:"hidden md:block w-[120px] flex-shrink-0"})]})},_e="",Gm=`${_e}/api/notifications`,qm={getNotifications:async()=>{try{const e=await(await fetch(`${Gm}/user`,{credentials:"include"})).json();return e.success?{notifications:e.notifications,unreadCount:e.unreadCount}:{notifications:[],unreadCount:0}}catch{return{notifications:[],unreadCount:0}}},markAsRead:async t=>{try{return(await(await fetch(`${Gm}/user/${t}/read`,{method:"POST",credentials:"include"})).json()).success}catch{return!1}},markAllAsRead:async()=>{try{return(await(await fetch(`${Gm}/user/read-all`,{method:"POST",credentials:"include"})).json()).success}catch{return!1}},deleteNotification:async t=>{try{return(await(await fetch(`${Gm}/user/${t}`,{method:"DELETE",credentials:"include"})).json()).success}catch{return!1}}},fF=({onToggleSidebar:t,title:e,isDarkMode:s,onToggleTheme:n,user:a,onLogout:i})=>{const c=za(),[A,d]=L.useState(!1),[f,u]=L.useState(!1),[p,x]=L.useState([]),[m,j]=L.useState(0),[w,S]=L.useState(!0),C=L.useRef(null),F=L.useRef(null),U=L.useCallback(async()=>{const Q=await qm.getNotifications();x(Q.notifications),j(Q.unreadCount),S(!1)},[]);L.useEffect(()=>{U();const Q=setInterval(U,3e4);return()=>clearInterval(Q)},[U]),L.useEffect(()=>{const Q=q=>{C.current&&!C.current.contains(q.target)&&d(!1),F.current&&!F.current.contains(q.target)&&u(!1)};return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[]);const _=async Q=>{await qm.markAsRead(Q)&&(x(te=>te.map(X=>X.id===Q?{...X,unread:!1}:X)),j(te=>Math.max(0,te-1)))},z=async()=>{await qm.markAllAsRead()&&(x(q=>q.map(te=>({...te,unread:!1}))),j(0))},I=async Q=>{const q=p.find(X=>X.id===Q);await qm.deleteNotification(Q)&&(x(X=>X.filter(Ae=>Ae.id!==Q)),q!=null&&q.unread&&j(X=>Math.max(0,X-1)))},H=async Q=>{Q.unread&&await _(Q.id),Q.hasTab&&Q.tabId&&(u(!1),c(`/announcements/${Q.tabId}`))},ee=Q=>{Q==="Account"||Q==="Preferences"?c("/settings"):Q==="Billing"&&c("/billing"),d(!1)},$=Q=>{switch(Q){case"success":return r.jsx(Qn,{className:"w-4 h-4 text-green-500"});case"warning":return r.jsx(ga,{className:"w-4 h-4 text-yellow-500"});case"alert":return r.jsx(ga,{className:"w-4 h-4 text-red-500"});case"promotion":return r.jsx(Qh,{className:"w-4 h-4 text-purple-500"});default:return r.jsx(Pa,{className:"w-4 h-4 text-blue-500"})}},ce=(Q,q)=>{const te=q?"bg-opacity-50":"";switch(Q){case"success":return`${te} ${q?"bg-green-50 dark:bg-green-900/10":""}`;case"warning":return`${te} ${q?"bg-yellow-50 dark:bg-yellow-900/10":""}`;case"alert":return`${te} ${q?"bg-red-50 dark:bg-red-900/10":""} border-l-4 border-l-red-500`;default:return`${te} ${q?"bg-sky-50 dark:bg-indigo-900/10":""}`}};return r.jsx("header",{className:"absolute top-0 left-0 right-0 z-20 px-3 md:px-4 pt-4 pb-2 transition-all duration-300 pointer-events-none",children:r.jsxs("div",{className:"mx-auto bg-slate-100/80 dark:bg-slate-900/80 backdrop-blur-xl border border-transparent hover:border-slate-300 dark:hover:border-slate-600 rounded-[2rem] shadow-sm shadow-slate-200/50 dark:shadow-black/20 pointer-events-auto h-20 px-4 md:px-8 flex items-center justify-between transition-all duration-300 ease-out hover:shadow-xl hover:-translate-y-0.5 hover:scale-[1.005]",children:[r.jsxs("div",{className:"flex items-center gap-3 md:gap-4 min-w-0 flex-1 mr-2",children:[r.jsx("button",{onClick:t,className:"p-2 -ml-2 text-slate-500 dark:text-slate-400 hover:bg-white dark:hover:bg-slate-800 rounded-full md:hidden transition-colors active:scale-95",children:r.jsx(G4,{size:24})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("h1",{className:"text-xl md:text-2xl font-black text-slate-900 dark:text-white tracking-tight truncate bg-clip-text text-transparent bg-gradient-to-r from-slate-900 to-slate-600 dark:from-white dark:to-slate-300",children:e}),r.jsx("span",{className:"text-[10px] md:text-xs font-bold text-slate-400 uppercase tracking-widest hidden sm:block",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]})]}),r.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-shrink-0",children:[r.jsxs("div",{className:"relative",ref:F,children:[r.jsxs("button",{onClick:()=>u(!f),className:"p-3 text-slate-500 dark:text-slate-400 hover:bg-white dark:hover:bg-slate-800 hover:text-sky-600 dark:hover:text-indigo-400 rounded-full transition-all duration-200 relative active:scale-95 group",children:[r.jsx(sc,{size:20,className:"transition-transform group-hover:rotate-12"}),m>0&&r.jsx("span",{className:"absolute top-2 right-2 w-2.5 h-2.5 bg-red-500 rounded-full ring-2 ring-slate-100 dark:ring-slate-900 animate-pulse"})]}),f&&r.jsxs("div",{className:"absolute right-0 mt-4 w-80 md:w-96 bg-white dark:bg-slate-900 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-800 overflow-hidden z-50 animate-in zoom-in-95 origin-top-right",children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50/50 dark:bg-slate-800/50 backdrop-blur-sm",children:[r.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Notifications"}),m>0&&r.jsxs("button",{onClick:z,className:"text-xs font-bold text-sky-600 hover:text-sky-700 dark:text-indigo-400 flex items-center gap-1 px-2 py-1 rounded-lg hover:bg-sky-50 dark:hover:bg-indigo-900/20 transition-colors",children:[r.jsx(ea,{className:"w-3 h-3"})," Mark all read"]})]}),r.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar",children:w?r.jsx("div",{className:"p-8 text-center text-slate-400",children:"Loading..."}):p.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-3 text-slate-300",children:r.jsx(sc,{className:"w-6 h-6"})}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"No notifications"})]}):r.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:p.map(Q=>r.jsx("div",{className:`p-4 transition-colors hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer group ${ce(Q.type,Q.unread)}`,onClick:()=>H(Q),children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"mt-1 w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 bg-white dark:bg-slate-800 shadow-sm border border-slate-100 dark:border-slate-700",children:$(Q.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-sm ${Q.unread?"font-bold text-slate-900 dark:text-white":"font-medium text-slate-600 dark:text-slate-300"}`,children:Q.title}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5 line-clamp-2 leading-relaxed",children:Q.message}),r.jsx("p",{className:"text-[10px] text-slate-400 mt-2 font-medium",children:new Date(Q.createdAt).toLocaleDateString()})]}),r.jsx("button",{onClick:q=>{q.stopPropagation(),I(Q.id)},className:"self-start p-1.5 text-slate-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg opacity-0 group-hover:opacity-100 transition-all",children:r.jsx(As,{className:"w-3 h-3"})})]})},Q.id))})}),r.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-100 dark:border-slate-800 text-center",children:r.jsxs("button",{onClick:()=>{u(!1),c("/announcements")},className:"text-xs font-bold text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors flex items-center justify-center gap-1 w-full py-1",children:["View all announcements ",r.jsx(ai,{className:"w-3 h-3"})]})})]})]}),r.jsx("button",{onClick:n,className:"p-3 text-slate-500 dark:text-slate-400 hover:bg-white dark:hover:bg-slate-800 hover:text-amber-500 dark:hover:text-yellow-400 rounded-full transition-all duration-200 active:scale-95",children:s?r.jsx(y8,{size:20}):r.jsx(xU,{size:20})}),r.jsxs("div",{className:"relative ml-2",ref:C,children:[r.jsxs("button",{onClick:()=>d(!A),className:"flex items-center gap-3 pl-1 pr-2 py-1 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/50 rounded-full border border-slate-200 dark:border-slate-700 transition-all duration-200 active:scale-95",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-sky-500 to-blue-600 flex items-center justify-center text-white shadow-md ring-2 ring-white dark:ring-slate-800 overflow-hidden",children:a.avatarUrl?r.jsx("img",{src:a.avatarUrl,alt:a.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"font-bold text-sm",children:a.name.charAt(0)})}),r.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200 max-w-[80px] truncate hidden md:block",children:a.name})]}),A&&r.jsxs("div",{className:"absolute right-0 mt-4 w-64 bg-white dark:bg-slate-900 rounded-2xl shadow-2xl border border-slate-200 dark:border-slate-800 overflow-hidden z-50 animate-in zoom-in-95 origin-top-right",children:[r.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50",children:[r.jsx("p",{className:"font-bold text-slate-900 dark:text-white truncate",children:a.name}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:a.email}),a.isPremium&&r.jsx("div",{className:"mt-2 inline-flex items-center gap-1.5 px-2 py-1 bg-gradient-to-r from-amber-200 to-yellow-400 rounded-lg shadow-sm",children:r.jsxs("span",{className:"text-[10px] font-black text-yellow-900 uppercase tracking-wider flex items-center gap-1",children:[r.jsx(Qh,{className:"w-3 h-3"})," Premium"]})})]}),r.jsxs("div",{className:"p-2 space-y-1",children:[r.jsxs("button",{onClick:()=>ee("Account"),className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[r.jsx(ta,{size:16}),"Account"]}),r.jsxs("button",{onClick:()=>ee("Billing"),className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:[r.jsx(Df,{size:16}),"Billing & Plan"]})]}),r.jsx("div",{className:"p-2 border-t border-slate-100 dark:border-slate-800",children:r.jsxs("button",{onClick:i,className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-bold text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[r.jsx(sb,{size:16}),"Sign Out"]})})]})]})]})]})})},BA=Object.create(null);BA.open="0";BA.close="1";BA.ping="2";BA.pong="3";BA.message="4";BA.upgrade="5";BA.noop="6";const Ng=Object.create(null);Object.keys(BA).forEach(t=>{Ng[BA[t]]=t});const Lv={type:"error",data:"parser error"},tB=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",sB=typeof ArrayBuffer=="function",rB=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Ry=({type:t,data:e},s,n)=>tB&&e instanceof Blob?s?n(e):u5(e,n):sB&&(e instanceof ArrayBuffer||rB(e))?s?n(e):u5(new Blob([e]),n):n(BA[t]+(e||"")),u5=(t,e)=>{const s=new FileReader;return s.onload=function(){const n=s.result.split(",")[1];e("b"+(n||""))},s.readAsDataURL(t)};function h5(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let m1;function pF(t,e){if(tB&&t.data instanceof Blob)return t.data.arrayBuffer().then(h5).then(e);if(sB&&(t.data instanceof ArrayBuffer||rB(t.data)))return e(h5(t.data));Ry(t,!1,s=>{m1||(m1=new TextEncoder),e(m1.encode(s))})}const f5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tp=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<f5.length;t++)tp[f5.charCodeAt(t)]=t;const mF=t=>{let e=t.length*.75,s=t.length,n,a=0,i,c,A,d;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const f=new ArrayBuffer(e),u=new Uint8Array(f);for(n=0;n<s;n+=4)i=tp[t.charCodeAt(n)],c=tp[t.charCodeAt(n+1)],A=tp[t.charCodeAt(n+2)],d=tp[t.charCodeAt(n+3)],u[a++]=i<<2|c>>4,u[a++]=(c&15)<<4|A>>2,u[a++]=(A&3)<<6|d&63;return f},gF=typeof ArrayBuffer=="function",Hy=(t,e)=>{if(typeof t!="string")return{type:"message",data:nB(t,e)};const s=t.charAt(0);return s==="b"?{type:"message",data:xF(t.substring(1),e)}:Ng[s]?t.length>1?{type:Ng[s],data:t.substring(1)}:{type:Ng[s]}:Lv},xF=(t,e)=>{if(gF){const s=mF(t);return nB(s,e)}else return{base64:!0,data:t}},nB=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},aB="",bF=(t,e)=>{const s=t.length,n=new Array(s);let a=0;t.forEach((i,c)=>{Ry(i,!1,A=>{n[c]=A,++a===s&&e(n.join(aB))})})},vF=(t,e)=>{const s=t.split(aB),n=[];for(let a=0;a<s.length;a++){const i=Hy(s[a],e);if(n.push(i),i.type==="error")break}return n};function yF(){return new TransformStream({transform(t,e){pF(t,s=>{const n=s.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(a[0]|=128),e.enqueue(a),e.enqueue(s)})}})}let g1;function Ym(t){return t.reduce((e,s)=>e+s.length,0)}function Jm(t,e){if(t[0].length===e)return t.shift();const s=new Uint8Array(e);let n=0;for(let a=0;a<e;a++)s[a]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),s}function wF(t,e){g1||(g1=new TextDecoder);const s=[];let n=0,a=-1,i=!1;return new TransformStream({transform(c,A){for(s.push(c);;){if(n===0){if(Ym(s)<1)break;const d=Jm(s,1);i=(d[0]&128)===128,a=d[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(Ym(s)<2)break;const d=Jm(s,2);a=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),n=3}else if(n===2){if(Ym(s)<8)break;const d=Jm(s,8),f=new DataView(d.buffer,d.byteOffset,d.length),u=f.getUint32(0);if(u>Math.pow(2,21)-1){A.enqueue(Lv);break}a=u*Math.pow(2,32)+f.getUint32(4),n=3}else{if(Ym(s)<a)break;const d=Jm(s,a);A.enqueue(Hy(i?d:g1.decode(d),e)),n=0}if(a===0||a>t){A.enqueue(Lv);break}}}})}const iB=4;function Sa(t){if(t)return jF(t)}function jF(t){for(var e in Sa.prototype)t[e]=Sa.prototype[e];return t}Sa.prototype.on=Sa.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Sa.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this};Sa.prototype.off=Sa.prototype.removeListener=Sa.prototype.removeAllListeners=Sa.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,a=0;a<s.length;a++)if(n=s[a],n===e||n.fn===e){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+t],this};Sa.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(s){s=s.slice(0);for(var n=0,a=s.length;n<a;++n)s[n].apply(this,e)}return this};Sa.prototype.emitReserved=Sa.prototype.emit;Sa.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Sa.prototype.hasListeners=function(t){return!!this.listeners(t).length};const ob=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,s)=>s(e,0),ec=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),NF="arraybuffer";function lB(t,...e){return e.reduce((s,n)=>(t.hasOwnProperty(n)&&(s[n]=t[n]),s),{})}const BF=ec.setTimeout,kF=ec.clearTimeout;function cb(t,e){e.useNativeTimers?(t.setTimeoutFn=BF.bind(ec),t.clearTimeoutFn=kF.bind(ec)):(t.setTimeoutFn=ec.setTimeout.bind(ec),t.clearTimeoutFn=ec.clearTimeout.bind(ec))}const CF=1.33;function SF(t){return typeof t=="string"?EF(t):Math.ceil((t.byteLength||t.size)*CF)}function EF(t){let e=0,s=0;for(let n=0,a=t.length;n<a;n++)e=t.charCodeAt(n),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(n++,s+=4);return s}function oB(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function TF(t){let e="";for(let s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}function UF(t){let e={},s=t.split("&");for(let n=0,a=s.length;n<a;n++){let i=s[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class FF extends Error{constructor(e,s,n){super(e),this.description=s,this.context=n,this.type="TransportError"}}class Py extends Sa{constructor(e){super(),this.writable=!1,cb(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,s,n){return super.emitReserved("error",new FF(e,s,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const s=Hy(e,this.socket.binaryType);this.onPacket(s)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,s={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const s=TF(e);return s.length?"?"+s:""}}class LF extends Py{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const s=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||s()})),this.writable||(n++,this.once("drain",function(){--n||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const s=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};vF(e,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,bF(e,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=oB()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(e,s)}}let cB=!1;try{cB=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const MF=cB;function QF(){}class _F extends LF{constructor(e){if(super(e),typeof location<"u"){const s=location.protocol==="https:";let n=location.port;n||(n=s?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,s){const n=this.request({method:"POST",data:e});n.on("success",s),n.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(s,n)=>{this.onError("xhr poll error",s,n)}),this.pollXhr=e}}class wA extends Sa{constructor(e,s,n){super(),this.createRequest=e,cb(this,n),this._opts=n,this._method=n.method||"GET",this._uri=s,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const s=lB(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(s);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=wA.requestsCount++,wA.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=QF,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete wA.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}wA.requestsCount=0;wA.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",p5);else if(typeof addEventListener=="function"){const t="onpagehide"in ec?"pagehide":"unload";addEventListener(t,p5,!1)}}function p5(){for(let t in wA.requests)wA.requests.hasOwnProperty(t)&&wA.requests[t].abort()}const IF=(function(){const t=AB({xdomain:!1});return t&&t.responseType!==null})();class OF extends _F{constructor(e){super(e);const s=e&&e.forceBase64;this.supportsBinary=IF&&!s}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new wA(AB,this.uri(),e)}}function AB(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||MF))return new XMLHttpRequest}catch{}if(!e)try{return new ec[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const dB=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class DF extends Py{get name(){return"websocket"}doOpen(){const e=this.uri(),s=this.opts.protocols,n=dB?{}:lB(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,s,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const n=e[s],a=s===e.length-1;Ry(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}a&&ob(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=oB()),this.supportsBinary||(s.b64=1),this.createUri(e,s)}}const x1=ec.WebSocket||ec.MozWebSocket;let RF=class extends DF{createSocket(e,s,n){return dB?new x1(e,s,n):s?new x1(e,s):new x1(e)}doWrite(e,s){this.ws.send(s)}};class HF extends Py{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const s=wF(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(s).getReader(),a=yF();a.readable.pipeTo(e.writable),this._writer=a.writable.getWriter();const i=()=>{n.read().then(({done:A,value:d})=>{A||(this.onPacket(d),i())}).catch(A=>{})};i();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const n=e[s],a=s===e.length-1;this._writer.write(n).then(()=>{a&&ob(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const PF={websocket:RF,webtransport:HF,polling:OF},zF=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,KF=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Mv(t){if(t.length>8e3)throw"URI too long";const e=t,s=t.indexOf("["),n=t.indexOf("]");s!=-1&&n!=-1&&(t=t.substring(0,s)+t.substring(s,n).replace(/:/g,";")+t.substring(n,t.length));let a=zF.exec(t||""),i={},c=14;for(;c--;)i[KF[c]]=a[c]||"";return s!=-1&&n!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=VF(i,i.path),i.queryKey=$F(i,i.query),i}function VF(t,e){const s=/\/{2,9}/g,n=e.replace(s,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function $F(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,i){a&&(s[a]=i)}),s}const Qv=typeof addEventListener=="function"&&typeof removeEventListener=="function",Bg=[];Qv&&addEventListener("offline",()=>{Bg.forEach(t=>t())},!1);class yu extends Sa{constructor(e,s){if(super(),this.binaryType=NF,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(s=e,e=null),e){const n=Mv(e);s.hostname=n.host,s.secure=n.protocol==="https"||n.protocol==="wss",s.port=n.port,n.query&&(s.query=n.query)}else s.host&&(s.hostname=Mv(s.host).host);cb(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=UF(this.opts.query)),Qv&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Bg.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const s=Object.assign({},this.opts.query);s.EIO=iB,s.transport=e,this.id&&(s.sid=this.id);const n=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&yu.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(e);s.open(),this.setTransport(s)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",yu.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=e.data,this._onError(s);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(s+=SF(a)),n>0&&s>this._maxPayload)return this.writeBuffer.slice(0,n);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,ob(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,s,n){return this._sendPacket("message",e,s,n),this}send(e,s,n){return this._sendPacket("message",e,s,n),this}_sendPacket(e,s,n,a){if(typeof s=="function"&&(a=s,s=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:e,data:s,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),e()},n=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(yu.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Qv&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Bg.indexOf(this._offlineEventListener);n!==-1&&Bg.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,s),this.writeBuffer=[],this._prevBufferLen=0}}}yu.protocol=iB;class GF extends yu{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let s=this.createTransport(e),n=!1;yu.priorWebsocketSuccess=!1;const a=()=>{n||(s.send([{type:"ping",data:"probe"}]),s.once("packet",p=>{if(!n)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;yu.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const x=new Error("probe error");x.transport=s.name,this.emitReserved("upgradeError",x)}}))};function i(){n||(n=!0,u(),s.close(),s=null)}const c=p=>{const x=new Error("probe error: "+p);x.transport=s.name,i(),this.emitReserved("upgradeError",x)};function A(){c("transport closed")}function d(){c("socket closed")}function f(p){s&&p.name!==s.name&&i()}const u=()=>{s.removeListener("open",a),s.removeListener("error",c),s.removeListener("close",A),this.off("close",d),this.off("upgrading",f)};s.once("open",a),s.once("error",c),s.once("close",A),this.once("close",d),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||s.open()},200):s.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const s=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&s.push(e[n]);return s}}let qF=class extends GF{constructor(e,s={}){const n=typeof e=="object"?e:s;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>PF[a]).filter(a=>!!a)),super(e,n)}};function YF(t,e="",s){let n=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),n=Mv(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+e,n.href=n.protocol+"://"+i+(s&&s.port===n.port?"":":"+n.port),n}const JF=typeof ArrayBuffer=="function",WF=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,uB=Object.prototype.toString,XF=typeof Blob=="function"||typeof Blob<"u"&&uB.call(Blob)==="[object BlobConstructor]",ZF=typeof File=="function"||typeof File<"u"&&uB.call(File)==="[object FileConstructor]";function zy(t){return JF&&(t instanceof ArrayBuffer||WF(t))||XF&&t instanceof Blob||ZF&&t instanceof File}function kg(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,n=t.length;s<n;s++)if(kg(t[s]))return!0;return!1}if(zy(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return kg(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&kg(t[s]))return!0;return!1}function eL(t){const e=[],s=t.data,n=t;return n.data=_v(s,e),n.attachments=e.length,{packet:n,buffers:e}}function _v(t,e){if(!t)return t;if(zy(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let n=0;n<t.length;n++)s[n]=_v(t[n],e);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=_v(t[n],e));return s}return t}function tL(t,e){return t.data=Iv(t.data,e),delete t.attachments,t}function Iv(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=Iv(t[s],e);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=Iv(t[s],e));return t}const hB=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],sL=5;var Ks;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ks||(Ks={}));class rL{constructor(e){this.replacer=e}encode(e){return(e.type===Ks.EVENT||e.type===Ks.ACK)&&kg(e)?this.encodeAsBinary({type:e.type===Ks.EVENT?Ks.BINARY_EVENT:Ks.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let s=""+e.type;return(e.type===Ks.BINARY_EVENT||e.type===Ks.BINARY_ACK)&&(s+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(s+=e.nsp+","),e.id!=null&&(s+=e.id),e.data!=null&&(s+=JSON.stringify(e.data,this.replacer)),s}encodeAsBinary(e){const s=eL(e),n=this.encodeAsString(s.packet),a=s.buffers;return a.unshift(n),a}}class Ky extends Sa{constructor(e){super(),this.reviver=e}add(e){let s;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(e);const n=s.type===Ks.BINARY_EVENT;n||s.type===Ks.BINARY_ACK?(s.type=n?Ks.EVENT:Ks.ACK,this.reconstructor=new nL(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(zy(e)||e.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(e),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let s=0;const n={type:Number(e.charAt(0))};if(Ks[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Ks.BINARY_EVENT||n.type===Ks.BINARY_ACK){const i=s+1;for(;e.charAt(++s)!=="-"&&s!=e.length;);const c=e.substring(i,s);if(c!=Number(c)||e.charAt(s)!=="-")throw new Error("Illegal attachments");n.attachments=Number(c)}if(e.charAt(s+1)==="/"){const i=s+1;for(;++s&&!(e.charAt(s)===","||s===e.length););n.nsp=e.substring(i,s)}else n.nsp="/";const a=e.charAt(s+1);if(a!==""&&Number(a)==a){const i=s+1;for(;++s;){const c=e.charAt(s);if(c==null||Number(c)!=c){--s;break}if(s===e.length)break}n.id=Number(e.substring(i,s+1))}if(e.charAt(++s)){const i=this.tryParse(e.substr(s));if(Ky.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,s){switch(e){case Ks.CONNECT:return Wg(s);case Ks.DISCONNECT:return s===void 0;case Ks.CONNECT_ERROR:return typeof s=="string"||Wg(s);case Ks.EVENT:case Ks.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&hB.indexOf(s[0])===-1);case Ks.ACK:case Ks.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class nL{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const s=tL(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function aL(t){return typeof t=="string"}const iL=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function lL(t){return t===void 0||iL(t)}function Wg(t){return Object.prototype.toString.call(t)==="[object Object]"}function oL(t,e){switch(t){case Ks.CONNECT:return e===void 0||Wg(e);case Ks.DISCONNECT:return e===void 0;case Ks.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&hB.indexOf(e[0])===-1);case Ks.ACK:return Array.isArray(e);case Ks.CONNECT_ERROR:return typeof e=="string"||Wg(e);default:return!1}}function cL(t){return aL(t.nsp)&&lL(t.id)&&oL(t.type,t.data)}const AL=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ky,Encoder:rL,get PacketType(){return Ks},isPacketValid:cL,protocol:sL},Symbol.toStringTag,{value:"Module"}));function Mc(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const dL=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class fB extends Sa{constructor(e,s,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=s,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Mc(e,"open",this.onopen.bind(this)),Mc(e,"packet",this.onpacket.bind(this)),Mc(e,"error",this.onerror.bind(this)),Mc(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...s){var n,a,i;if(dL.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(s.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const c={type:Ks.EVENT,data:s};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const u=this.ids++,p=s.pop();this._registerAckCallback(u,p),c.id=u}const A=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,d=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!A||(d?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(e,s){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[e]=s;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let A=0;A<this.sendBuffer.length;A++)this.sendBuffer[A].id===e&&this.sendBuffer.splice(A,1);s.call(this,new Error("operation has timed out"))},a),c=(...A)=>{this.io.clearTimeoutFn(i),s.apply(this,A)};c.withError=!0,this.acks[e]=c}emitWithAck(e,...s){return new Promise((n,a)=>{const i=(c,A)=>c?a(c):n(A);i.withError=!0,s.push(i),this.emit(e,...s)})}_addToQueue(e){let s;typeof e[e.length-1]=="function"&&(s=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((a,...i)=>(this._queue[0],a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(a)):(this._queue.shift(),s&&s(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!e||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ks.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ks.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ks.EVENT:case Ks.BINARY_EVENT:this.onevent(e);break;case Ks.ACK:case Ks.BINARY_ACK:this.onack(e);break;case Ks.DISCONNECT:this.ondisconnect();break;case Ks.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const s=e.data||[];e.id!=null&&s.push(this.ack(e.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const n of s)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const s=this;let n=!1;return function(...a){n||(n=!0,s.packet({type:Ks.ACK,id:e,data:a}))}}onack(e){const s=this.acks[e.id];typeof s=="function"&&(delete this.acks[e.id],s.withError&&e.data.unshift(null),s.apply(this,e.data))}onconnect(e,s){this.id=e,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ks.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const s=this._anyListeners;for(let n=0;n<s.length;n++)if(e===s[n])return s.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const s=this._anyOutgoingListeners;for(let n=0;n<s.length;n++)if(e===s[n])return s.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const n of s)n.apply(this,e.data)}}}function e0(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}e0.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0};e0.prototype.reset=function(){this.attempts=0};e0.prototype.setMin=function(t){this.ms=t};e0.prototype.setMax=function(t){this.max=t};e0.prototype.setJitter=function(t){this.jitter=t};class Ov extends Sa{constructor(e,s){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(s=e,e=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,cb(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((n=s.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new e0({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=e;const a=s.parser||AL;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var s;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(s=this.backoff)===null||s===void 0||s.setMin(e),this)}randomizationFactor(e){var s;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(s=this.backoff)===null||s===void 0||s.setJitter(e),this)}reconnectionDelayMax(e){var s;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(s=this.backoff)===null||s===void 0||s.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new qF(this.uri,this.opts);const s=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=Mc(s,"open",function(){n.onopen(),e&&e()}),i=A=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",A),e?e(A):this.maybeReconnectOnOpen()},c=Mc(s,"error",i);if(this._timeout!==!1){const A=this._timeout,d=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),s.close()},A);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(a),this.subs.push(c),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Mc(e,"ping",this.onping.bind(this)),Mc(e,"data",this.ondata.bind(this)),Mc(e,"error",this.onerror.bind(this)),Mc(e,"close",this.onclose.bind(this)),Mc(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(s){this.onclose("parse error",s)}}ondecoded(e){ob(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,s){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new fB(this,e,s),this.nsps[e]=n),n}_destroy(e){const s=Object.keys(this.nsps);for(const n of s)if(this.nsps[n].active)return;this._close()}_packet(e){const s=this.encoder.encode(e);for(let n=0;n<s.length;n++)this.engine.write(s[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,s){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(a=>{a?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",a)):e.onreconnect()}))},s);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const G0={};function lp(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const s=YF(t,e.path||"/socket.io"),n=s.source,a=s.id,i=s.path,c=G0[a]&&i in G0[a].nsps,A=e.forceNew||e["force new connection"]||e.multiplex===!1||c;let d;return A?d=new Ov(n,e):(G0[a]||(G0[a]=new Ov(n,e)),d=G0[a]),s.query&&!e.query&&(e.query=s.queryKey),d.socket(s.path,e)}Object.assign(lp,{Manager:Ov,Socket:fB,io:lp,connect:lp});const pB=L.createContext(null),uL=({children:t,userId:e,isAuthenticated:s})=>{const[n,a]=L.useState(null),[i,c]=L.useState(!1),A=L.useRef(null);L.useEffect(()=>{if(!s||!e){A.current&&(A.current.disconnect(),A.current=null,a(null),c(!1));return}const I=lp(_e,{withCredentials:!0,transports:["websocket","polling"],autoConnect:!0,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3,reconnectionDelayMax:5e3});return A.current=I,a(I),I.on("connect",()=>{console.log(" Socket connected:",I.id),c(!0)}),I.on("disconnect",H=>{console.log(" Socket disconnected:",H),c(!1)}),I.on("connect_error",H=>{console.error(" Socket connection error:",H),c(!1)}),I.on("connected",H=>{console.log(" Authenticated connection:",H)}),I.on("error",H=>{console.error(" Socket error:",H.message)}),()=>{console.log(" Cleaning up socket connection"),I.disconnect(),A.current=null}},[s,e]);const d=L.useCallback(I=>{var H;(H=A.current)!=null&&H.connected&&A.current.emit("join_ticket",{ticketId:I})},[]),f=L.useCallback(I=>{var H;(H=A.current)!=null&&H.connected&&A.current.emit("leave_ticket",{ticketId:I})},[]),u=L.useCallback((I,H)=>{var ee;(ee=A.current)!=null&&ee.connected&&A.current.emit("ticket_message",{ticketId:I,content:H})},[]),p=L.useCallback((I,H)=>{var ee;(ee=A.current)!=null&&ee.connected&&A.current.emit("ticket_typing",{ticketId:I,isTyping:H})},[]),x=L.useCallback((I,H,ee,$)=>{var ce;(ce=A.current)!=null&&ce.connected&&A.current.emit("admin_message",{recipientId:I,isBroadcast:I===null,content:H,subject:ee,priority:$||"normal"})},[]),m=L.useCallback(I=>H=>A.current?(A.current.on(I,H),()=>{var ee;(ee=A.current)==null||ee.off(I,H)}):()=>{},[]),j=L.useCallback(m("new_ticket_message"),[m]),w=L.useCallback(m("ticket_activity"),[m]),S=L.useCallback(m("user_typing"),[m]),C=L.useCallback(m("new_admin_message"),[m]),F=L.useCallback(m("new_ticket"),[m]),U=L.useCallback(m("ticket_accepted"),[m]),_=L.useCallback(m("ticket_resolved"),[m]),z={socket:n,isConnected:i,joinTicket:d,leaveTicket:f,sendTicketMessage:u,sendTypingStatus:p,sendAdminMessage:x,onNewTicketMessage:j,onTicketActivity:w,onUserTyping:S,onNewAdminMessage:C,onNewTicket:F,onTicketAccepted:U,onTicketResolved:_};return r.jsx(pB.Provider,{value:z,children:t})},$p=()=>{const t=L.useContext(pB);if(!t)throw new Error("useSocket must be used within a SocketProvider");return t},Xg={getTickets:async()=>{const e=await(await fetch(`${_e}/api/tickets/user`,{credentials:"include"})).json();return e.success?e.tickets:[]},getTicketDetail:async t=>{const s=await(await fetch(`${_e}/api/tickets/user/${t}`,{credentials:"include"})).json();return s.success?{ticket:s.ticket,messages:s.messages}:null},createTicket:async(t,e,s,n)=>(await fetch(`${_e}/api/tickets/user`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({subject:t,category:e,priority:s,message:n})})).json(),closeTicket:async t=>(await fetch(`${_e}/api/tickets/user/${t}/close`,{method:"POST",credentials:"include"})).json()},mB=({status:t})=>{const e={pending:{color:"yellow",icon:r.jsx(on,{className:"w-3 h-3"}),label:"Waiting"},accepted:{color:"blue",icon:r.jsx(zn,{className:"w-3 h-3"}),label:"Accepted"},in_progress:{color:"indigo",icon:r.jsx(ic,{className:"w-3 h-3"}),label:"In Progress"},resolved:{color:"green",icon:r.jsx(zn,{className:"w-3 h-3"}),label:"Resolved"},expired:{color:"red",icon:r.jsx(ga,{className:"w-3 h-3"}),label:"Expired"},closed:{color:"slate",icon:r.jsx(As,{className:"w-3 h-3"}),label:"Closed"}},{color:s,icon:n,label:a}=e[t]||e.pending,i={yellow:"bg-yellow-100 text-yellow-700",blue:"bg-blue-100 text-blue-700",indigo:"bg-indigo-100 text-indigo-700",green:"bg-green-100 text-green-700",red:"bg-red-100 text-red-700",slate:"bg-slate-100 text-slate-700"};return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${i[s]}`,children:[n,a]})},hL=({category:t})=>{const e={general:r.jsx(Vg,{className:"w-5 h-5"}),billing:r.jsx(Df,{className:"w-5 h-5"}),technical:r.jsx(nb,{className:"w-5 h-5"}),feedback:r.jsx(Cu,{className:"w-5 h-5"})};return r.jsx(r.Fragment,{children:e[t]||e.general})},gB=t=>{if(t<=0)return"Expired";const e=Math.floor(t/3600),s=Math.floor(t%3600/60);return e>0?`${e}h ${s}m remaining`:`${s}m remaining`},fL=()=>{const t=za(),{onTicketAccepted:e,onTicketResolved:s,isConnected:n}=$p(),[a,i]=L.useState([]),[c,A]=L.useState(!0),[d,f]=L.useState(!1);L.useEffect(()=>{u()},[]),L.useEffect(()=>{const p=e(m=>{i(j=>j.map(w=>w.id===m.ticketId?{...w,status:"accepted",assignedAdminName:m.adminName}:w))}),x=s(m=>{i(j=>j.map(w=>w.id===m.ticketId?{...w,status:"resolved"}:w))});return()=>{p(),x()}},[e,s]);const u=async()=>{A(!0);const p=await Xg.getTickets();i(p),A(!1)};return c?r.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:r.jsx(Xt,{className:"w-8 h-8 animate-spin text-blue-500"})}):r.jsxs("div",{className:"p-6 md:p-8 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Support Tickets"}),r.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-full text-xs ${n?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[n?r.jsx(Zf,{className:"w-3 h-3"}):r.jsx(Xf,{className:"w-3 h-3"}),n?"Live":"Offline"]})]}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Get help from our support team"})]}),r.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors",children:[r.jsx(ln,{className:"w-4 h-4"}),"New Ticket"]})]}),a.length===0?r.jsxs("div",{className:"text-center py-16 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800",children:[r.jsx(ic,{className:"w-16 h-16 text-slate-200 dark:text-slate-700 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2",children:"No tickets yet"}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Create a ticket to get support from our team"}),r.jsx("button",{onClick:()=>f(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors",children:"Create Your First Ticket"})]}):r.jsx("div",{className:"space-y-3",children:a.map(p=>r.jsx("div",{onClick:()=>t(`/support/${p.id}`),className:"bg-white dark:bg-slate-900 rounded-2xl p-5 border border-slate-200 dark:border-slate-800 hover:shadow-lg hover:-translate-y-0.5 transition-all cursor-pointer group",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${p.status==="expired"?"bg-red-100 text-red-600":p.status==="resolved"?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"}`,children:r.jsx(hL,{category:p.category})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(mB,{status:p.status}),r.jsxs("span",{className:"text-xs text-slate-400",children:["#",p.id]})]}),r.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white group-hover:text-blue-600 transition-colors truncate",children:p.subject}),p.lastMessage&&r.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate mt-1",children:[p.lastMessage.senderType==="admin"?" ":"",p.lastMessage.text]}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-400",children:[r.jsx("span",{children:p.createdAt}),p.status==="pending"&&!p.isExpired&&r.jsxs("span",{className:"flex items-center gap-1 text-orange-500",children:[r.jsx(Tv,{className:"w-3 h-3"}),gB(p.timeRemaining)]})]})]}),r.jsx(ai,{className:"w-5 h-5 text-slate-300 group-hover:text-blue-500 group-hover:translate-x-1 transition-all self-center"})]})},p.id))}),d&&r.jsx(pL,{onClose:()=>f(!1),onCreated:()=>{f(!1),u()}})]})},pL=({onClose:t,onCreated:e})=>{const[s,n]=L.useState(""),[a,i]=L.useState("general"),[c,A]=L.useState("normal"),[d,f]=L.useState(""),[u,p]=L.useState(!1),[x,m]=L.useState(""),j=async()=>{if(!s.trim()||!d.trim()){m("Please fill in all required fields");return}p(!0),m("");const w=await Xg.createTicket(s,a,c,d);w.success?e():m(w.error||"Failed to create ticket"),p(!1)};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-800",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Create Support Ticket"}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl",children:r.jsx(As,{className:"w-5 h-5"})})]})}),r.jsxs("div",{className:"p-6 space-y-5",children:[x&&r.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-xl text-sm",children:x}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Subject *"}),r.jsx("input",{type:"text",value:s,onChange:w=>n(w.target.value),placeholder:"Brief description of your issue",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Category"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"general",label:"General",icon:r.jsx(Vg,{className:"w-4 h-4"})},{id:"billing",label:"Billing",icon:r.jsx(Df,{className:"w-4 h-4"})},{id:"technical",label:"Technical",icon:r.jsx(nb,{className:"w-4 h-4"})},{id:"feedback",label:"Feedback",icon:r.jsx(Cu,{className:"w-4 h-4"})}].map(w=>r.jsxs("button",{type:"button",onClick:()=>i(w.id),className:`flex items-center gap-2 px-4 py-3 rounded-xl border transition-colors ${a===w.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-600":"border-slate-200 dark:border-slate-700 hover:border-slate-300"}`,children:[w.icon,w.label]},w.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Priority"}),r.jsxs("select",{value:c,onChange:w=>A(w.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[r.jsx("option",{value:"low",children:"Low"}),r.jsx("option",{value:"normal",children:"Normal"}),r.jsx("option",{value:"high",children:"High"}),r.jsx("option",{value:"urgent",children:"Urgent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Description *"}),r.jsx("textarea",{value:d,onChange:w=>f(w.target.value),placeholder:"Please describe your issue in detail...",rows:4,className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(on,{className:"w-5 h-5 text-amber-500 shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-amber-700 dark:text-amber-400",children:[r.jsx("p",{className:"font-medium",children:"24-Hour Response Window"}),r.jsx("p",{className:"mt-1 opacity-80",children:"Your ticket will be active for 24 hours. If not resolved within this time, it will expire automatically."})]})]})})]}),r.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-800 flex gap-3",children:[r.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 bg-slate-100 dark:bg-slate-800 rounded-xl font-medium hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:j,disabled:u,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:u?r.jsx(Xt,{className:"w-4 h-4 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(ln,{className:"w-4 h-4"}),"Create Ticket"]})})]})]})})},mL=()=>{const{id:t}=Jx(),e=za(),s=L.useRef(null),n=L.useRef(null),{isConnected:a,joinTicket:i,leaveTicket:c,sendTicketMessage:A,sendTypingStatus:d,onNewTicketMessage:f,onUserTyping:u,onTicketAccepted:p,onTicketResolved:x}=$p(),[m,j]=L.useState(null),[w,S]=L.useState([]),[C,F]=L.useState(!0),[U,_]=L.useState(""),[z,I]=L.useState(!1),[H,ee]=L.useState(null),$=L.useRef();L.useEffect(()=>{t&&ce()},[t]),L.useEffect(()=>{if(t&&a)return i(Number(t)),()=>{c(Number(t))}},[t,a,i,c]),L.useEffect(()=>{const W=f(se=>{se.ticketId===Number(t)&&(S(Z=>Z.some(re=>re.id===se.id)?Z:[...Z,se]),ee(null))});return()=>W()},[t,f]),L.useEffect(()=>{const W=u(se=>{se.ticketId===Number(t)&&se.isAdmin&&(se.isTyping?ee(se.userName):ee(null))});return()=>W()},[t,u]),L.useEffect(()=>{const W=p(Z=>{Z.ticketId===Number(t)&&j(re=>re&&{...re,status:"accepted",assignedAdminName:Z.adminName})}),se=x(Z=>{Z.ticketId===Number(t)&&j(re=>re&&{...re,status:"resolved"})});return()=>{W(),se()}},[t,p,x]),L.useEffect(()=>{Q()},[w,H]);const ce=async()=>{F(!0);const W=await Xg.getTicketDetail(Number(t));W&&(j(W.ticket),S(W.messages)),F(!1)},Q=()=>{var W;(W=s.current)==null||W.scrollIntoView({behavior:"smooth"})},q=L.useCallback(()=>{var W;!U.trim()||!m||!a||(I(!0),A(m.id,U.trim()),_(""),I(!1),(W=n.current)==null||W.focus(),d(m.id,!1))},[U,m,a,A,d]),te=W=>{_(W.target.value),m&&a&&(d(m.id,!0),$.current&&clearTimeout($.current),$.current=setTimeout(()=>{d(m.id,!1)},2e3))},X=async()=>{if(!m||!confirm("Are you sure you want to close this ticket?"))return;(await Xg.closeTicket(m.id)).success&&ce()};if(C)return r.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:r.jsx(Xt,{className:"w-8 h-8 animate-spin text-blue-500"})});if(!m)return r.jsxs("div",{className:"text-center py-16",children:[r.jsx("p",{className:"text-slate-500",children:"Ticket not found"}),r.jsx("button",{onClick:()=>e("/support"),className:"mt-4 text-blue-600",children:"Back to tickets"})]});const Ae=["accepted","in_progress"].includes(m.status);return r.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)] max-w-4xl mx-auto",children:[r.jsxs("div",{className:"p-4 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e("/support"),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl",children:r.jsx(jA,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(mB,{status:m.status}),r.jsxs("span",{className:"text-xs text-slate-400",children:["#",m.id]}),r.jsxs("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-xs ${a?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[a?r.jsx(Zf,{className:"w-3 h-3"}):r.jsx(Xf,{className:"w-3 h-3"}),a?"Live":"Reconnecting..."]})]}),r.jsx("h1",{className:"font-bold text-slate-900 dark:text-white truncate",children:m.subject})]}),m.status!=="closed"&&m.status!=="expired"&&r.jsx("button",{onClick:X,className:"px-4 py-2 text-sm text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl",children:"Close Ticket"})]}),m.status==="pending"&&r.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl text-sm text-yellow-700 dark:text-yellow-400",children:[r.jsx("p",{children:" Waiting for an admin to accept your ticket..."}),r.jsx("p",{className:"text-xs mt-1 opacity-80",children:gB(m.timeRemaining)})]}),m.assignedAdminName&&r.jsxs("div",{className:"mt-3 text-sm text-slate-500",children:["Assigned to: ",r.jsx("span",{className:"font-medium",children:m.assignedAdminName})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50 dark:bg-slate-950",children:[w.map(W=>r.jsx("div",{className:`flex ${W.senderType==="user"?"justify-end":"justify-start"}`,children:W.senderType==="system"?r.jsx("div",{className:"text-center text-xs text-slate-400 py-2 w-full",children:W.content}):r.jsxs("div",{className:`max-w-[80%] ${W.senderType==="user"?"order-1":""}`,children:[r.jsx("div",{className:`px-4 py-3 rounded-2xl ${W.senderType==="user"?"bg-blue-600 text-white rounded-br-md":"bg-white dark:bg-slate-800 rounded-bl-md"}`,children:r.jsx("p",{className:"text-sm",children:W.content})}),r.jsxs("div",{className:`flex items-center gap-2 mt-1 text-xs text-slate-400 ${W.senderType==="user"?"justify-end":""}`,children:[r.jsx("span",{children:W.senderName}),r.jsx("span",{children:""}),r.jsx("span",{children:new Date(W.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},W.id)),H&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-white dark:bg-slate-800 px-4 py-3 rounded-2xl rounded-bl-md",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[r.jsxs("span",{className:"flex gap-1",children:[r.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),r.jsxs("span",{children:[H," is typing..."]})]})})}),r.jsx("div",{ref:s})]}),Ae?r.jsx("div",{className:"p-4 bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("input",{ref:n,type:"text",value:U,onChange:te,onKeyDown:W=>W.key==="Enter"&&!W.shiftKey&&q(),placeholder:a?"Type your message...":"Connecting...",disabled:!a,className:"flex-1 px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50"}),r.jsx("button",{onClick:q,disabled:z||!U.trim()||!a,className:"px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 transition-colors",children:z?r.jsx(Xt,{className:"w-5 h-5 animate-spin"}):r.jsx(vu,{className:"w-5 h-5"})})]})}):r.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 text-center text-sm text-slate-500",children:m.status==="pending"?"You can send messages once an admin accepts your ticket":"This ticket is closed"})]})},gL=({isPremium:t})=>{const e=za(),[s,n]=L.useState([]),[a,i]=L.useState(0),[c,A]=L.useState(!0),[d,f]=L.useState(!1);L.useEffect(()=>{t||u()},[t]),L.useEffect(()=>{if(s.length===0||t)return;p(s[a].id);const S=setInterval(()=>{i(C=>(C+1)%s.length)},3e4);return()=>clearInterval(S)},[s,a,t]);const u=async()=>{try{const S=await fetch(`${_e}/api/advertisements/active`);if(S.ok){const C=await S.json();C.length>0?(n(C),f(!1)):(n([]),f(!0))}else n([]),f(!0)}catch(S){console.error("Error fetching advertisements:",S),n([]),f(!0)}},p=async S=>{try{await fetch(`${_e}/api/advertisements/${S}/view`,{method:"POST",headers:{"Content-Type":"application/json"}})}catch(C){console.error("Error recording view:",C)}},x=async S=>{try{await fetch(`${_e}/api/advertisements/${S}/click`,{method:"POST",headers:{"Content-Type":"application/json"}})}catch(C){console.error("Error recording click:",C)}},m=S=>{x(S.id),window.open(S.link,"_blank","noopener,noreferrer")},j=()=>{A(!1),sessionStorage.setItem("adDismissed","true")};if(t||!c||sessionStorage.getItem("adDismissed")==="true")return null;const w=s.length>0?s[a]:null;return r.jsxs("div",{className:"relative bg-white/60 dark:bg-slate-900/60 backdrop-blur-xl rounded-[2.5rem] p-6 shadow-sm border border-transparent hover:border-sky-300 dark:hover:border-indigo-500 transition-all duration-500 ease-out overflow-hidden group",children:[r.jsx("button",{onClick:j,className:"absolute top-4 right-4 z-10 p-2 bg-white/80 dark:bg-slate-800/80 hover:bg-white dark:hover:bg-slate-800 rounded-full transition-colors shadow-sm",title:"Dismiss ad",children:r.jsx(As,{size:16,className:"text-slate-600 dark:text-slate-400"})}),d?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-4",children:r.jsx(ur,{size:32,className:"text-slate-400 dark:text-slate-500"})}),r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2 text-center",children:""}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 text-center",children:""})]}):w?r.jsxs("div",{onClick:()=>m(w),className:"cursor-pointer",children:[w.imageUrl&&r.jsx("div",{className:"mb-4 rounded-2xl overflow-hidden",children:r.jsx("img",{src:`${_e}${w.imageUrl}`,alt:w.title,className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex items-start justify-between gap-2",children:r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white group-hover:text-sky-600 dark:group-hover:text-indigo-400 transition-colors",children:w.title})}),w.description&&r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 line-clamp-2",children:w.description}),r.jsxs("div",{className:"flex items-center justify-between pt-2",children:[r.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500 font-medium",children:"Sponsored"}),s.length>1&&r.jsx("div",{className:"flex gap-1",children:s.map((S,C)=>r.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all ${C===a?"bg-sky-600 dark:bg-indigo-400 w-4":"bg-slate-300 dark:bg-slate-600"}`},C))})]})]})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx("div",{className:"w-10 h-10 border-4 border-slate-200 dark:border-slate-700 border-t-sky-600 dark:border-t-indigo-600 rounded-full animate-spin mb-4"}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"..."})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:r.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center",children:["Upgrade to Premium to remove ads "," ",r.jsx("button",{onClick:()=>e("/billing"),className:"text-sky-600 dark:text-indigo-400 hover:underline font-medium cursor-pointer bg-transparent border-none p-0 inline",children:"Learn more"})]})})]})},b1=({title:t,value:e,badgeText:s,badgeColor:n="default",icon:a})=>r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-5 shadow-sm border border-transparent hover:border-sky-400 dark:hover:border-indigo-400 transition-all duration-300 ease-out group relative overflow-hidden hover:-translate-y-2 hover:scale-105 hover:shadow-2xl hover:shadow-sky-100 dark:hover:shadow-indigo-900/20",children:[r.jsxs("div",{className:"flex justify-between items-start mb-8",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 dark:bg-slate-700/50 flex items-center justify-center text-slate-600 dark:text-slate-300 group-hover:bg-sky-50 group-hover:text-sky-600 dark:group-hover:bg-indigo-500/20 dark:group-hover:text-indigo-400 transition-colors",children:a}),s&&r.jsx("span",{className:`
          text-[10px] font-bold uppercase tracking-wider px-2.5 py-1 rounded-full
          ${n==="green"?"bg-emerald-50 text-emerald-600 dark:bg-emerald-500/10 dark:text-emerald-400":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300"}
        `,children:s})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-slate-500 dark:text-slate-400 text-xs font-bold uppercase tracking-wider mb-1",children:t}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:e})]})]}),xL=({appointment:t})=>{const e=new Date(t.date),s=()=>{switch(t.type){case"flight":return r.jsx(NA,{className:"w-4 h-4"});case"activity":return r.jsx(No,{className:"w-4 h-4"});case"stay":return r.jsx(w6,{className:"w-4 h-4"});default:return r.jsx(on,{className:"w-4 h-4"})}},n=t.status==="confirmed"?"bg-emerald-500":"bg-amber-500",a=t.status==="confirmed"?"bg-emerald-50 dark:bg-emerald-500/10":"bg-amber-50 dark:bg-amber-500/10",i=t.status==="confirmed"?"text-emerald-700 dark:text-emerald-400":"text-amber-700 dark:text-amber-400";return r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white dark:bg-slate-800 rounded-3xl border border-slate-100 dark:border-slate-700/50 hover:border-sky-400 dark:hover:border-indigo-400 hover:shadow-2xl hover:shadow-sky-100 dark:hover:shadow-indigo-900/20 transition-all duration-300 ease-out group cursor-pointer hover:-translate-y-1 hover:scale-[1.02]",children:[r.jsxs("div",{className:`flex flex-col items-center justify-center w-14 h-14 rounded-2xl ${a} relative overflow-hidden flex-shrink-0 transition-transform group-hover:scale-110 duration-300`,children:[r.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1.5 ${n}`}),r.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${i} mb-0.5`,children:e.toLocaleString("en-US",{month:"short"})}),r.jsx("span",{className:`text-xl font-bold ${t.status==="confirmed"?"text-emerald-900 dark:text-emerald-200":"text-amber-900 dark:text-amber-200"}`,children:e.getDate()})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-base font-bold text-slate-900 dark:text-white truncate group-hover:text-sky-600 dark:group-hover:text-indigo-400 transition-colors",children:t.title}),r.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-sm font-medium text-slate-500 dark:text-slate-400",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(on,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),t.location&&r.jsxs("div",{className:"flex items-center gap-1.5 truncate",children:[r.jsx(ra,{className:"w-3.5 h-3.5"}),r.jsx("span",{className:"truncate",children:t.location})]})]})]}),r.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 dark:bg-slate-700/50 flex items-center justify-center text-slate-400 dark:text-slate-500 group-hover:bg-white group-hover:text-sky-600 dark:group-hover:text-indigo-400 dark:group-hover:bg-slate-700 transition-all shadow-sm group-hover:scale-110 group-hover:rotate-12",children:s()})]})},bL=({user:t})=>{var f;const e=za(),[s,n]=L.useState({upcomingTrips:0,countriesVisited:0,savedItineraries:0,nextTrip:null,upcomingAppointments:[],savedDrafts:[]}),[a,i]=L.useState(!0);L.useEffect(()=>{c()},[]);const c=async()=>{try{const u=await fetch(`${_e}/api/user/dashboard`,{credentials:"include"});if(u.ok){const p=await u.json();n(p)}}catch(u){console.error("Error fetching dashboard data:",u)}finally{i(!1)}};if(!t)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"text-slate-500",children:"Loading user data..."})});if(a)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-sky-600"})});const A=s.nextTrip?`NEXT: ${s.nextTrip.destination.toUpperCase()} (${s.nextTrip.daysUntil}D)`:"NO TRIPS PLANNED",d=s.nextTrip?`Your next adventure to ${s.nextTrip.destination} begins in ${s.nextTrip.daysUntil} days.`:"Plan your next adventure today!";return r.jsxs("div",{className:"p-6 md:p-8 w-full mx-auto space-y-8 animate-fade-in-up",children:[r.jsxs("div",{className:"bg-white/60 dark:bg-slate-900/60 backdrop-blur-xl rounded-[2.5rem] p-8 relative overflow-hidden shadow-sm border border-transparent hover:border-sky-300 dark:hover:border-indigo-500 transition-all duration-500 ease-out hover:shadow-xl hover:bg-white/70 dark:hover:bg-slate-900/70",children:[r.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-gradient-to-br from-white/40 to-transparent dark:from-indigo-500/10 dark:to-transparent rounded-full blur-3xl -mr-32 -mt-32 pointer-events-none"}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-6 mb-10",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-black text-slate-900 dark:text-white tracking-tight mb-2",children:"Travel Dashboard"}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium text-lg",children:d})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>e("/trips"),className:"px-5 py-3 bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 rounded-xl text-sm font-bold hover:bg-slate-50 dark:hover:bg-slate-700 transition-all shadow-sm active:scale-95 border border-transparent hover:border-slate-300 dark:hover:border-slate-500 hover:-translate-y-1 hover:shadow-md",children:"View All Trips"}),r.jsxs("button",{onClick:()=>e("/chat"),className:"px-5 py-3 bg-sky-600 dark:bg-indigo-600 text-white rounded-xl text-sm font-bold hover:bg-sky-500 dark:hover:bg-indigo-500 transition-all shadow-lg shadow-sky-600/30 dark:shadow-indigo-600/30 flex items-center gap-2 active:scale-95 hover:-translate-y-1 hover:shadow-xl",children:[r.jsx(Qn,{className:"w-4 h-4"}),"Start AI Planning"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(b1,{title:"Upcoming Trips",value:s.upcomingTrips.toString(),badgeText:A,icon:r.jsx(NA,{className:"w-5 h-5"})}),r.jsx(b1,{title:"Countries Visited",value:s.countriesVisited.toString(),badgeText:"EXPLORED",badgeColor:"green",icon:r.jsx(Gg,{className:"w-5 h-5"})}),r.jsx(b1,{title:"Saved Itineraries",value:s.savedItineraries.toString(),badgeText:"READY TO GO",badgeColor:"green",icon:r.jsx(qg,{className:"w-5 h-5"})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white/60 dark:bg-slate-900/60 backdrop-blur-xl rounded-[2.5rem] p-8 h-fit shadow-sm border border-transparent hover:border-sky-300 dark:hover:border-indigo-500 transition-all duration-500 ease-out hover:shadow-xl hover:bg-white/70 dark:hover:bg-slate-900/70",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Upcoming Itinerary"}),r.jsx("button",{onClick:()=>e("/calendar"),className:"text-sm text-sky-600 hover:text-sky-500 dark:text-indigo-400 dark:hover:text-indigo-300 font-bold hover:underline",children:"View Full Schedule"})]}),r.jsx("div",{className:"space-y-4",children:s.upcomingAppointments.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No upcoming appointments"}),r.jsx("button",{onClick:()=>e("/chat"),className:"mt-4 text-sky-600 dark:text-indigo-400 hover:underline font-medium",children:"Plan your first trip"})]}):s.upcomingAppointments.map((u,p)=>r.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:`${(p+1)*100}ms`},children:r.jsx(xL,{appointment:u})},u.id))})]}),r.jsxs("div",{className:"space-y-8 animate-fade-in-up",style:{animationDelay:"300ms"},children:[r.jsx(gL,{isPremium:((f=t.subscription)==null?void 0:f.status)==="active"||t.isPremium||!1}),r.jsxs("div",{className:"bg-gradient-to-b from-sky-500 to-blue-600 dark:from-indigo-600 dark:to-violet-700 rounded-[2.5rem] p-8 relative overflow-hidden shadow-xl shadow-sky-500/20 dark:shadow-indigo-500/20 group text-center border border-transparent hover:border-white/50 transition-all duration-300 hover:-translate-y-2 hover:scale-[1.02] hover:shadow-2xl",children:[r.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 dark:bg-white/5 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none group-hover:scale-125 transition-transform duration-700"}),r.jsx("h3",{className:"text-2xl font-bold text-white mb-2 relative z-10 tracking-tight",children:"Trip Idea?"}),r.jsx("p",{className:"text-sky-100 dark:text-indigo-100 font-medium leading-relaxed mb-8 relative z-10 px-4",children:"Not sure where to go next? Ask the AI Planner to suggest destinations."}),r.jsx("div",{className:"relative z-10",children:r.jsx("button",{onClick:()=>e("/chat"),className:"w-full py-3.5 bg-white text-sky-600 hover:bg-sky-50 dark:bg-white/10 dark:backdrop-blur-md dark:text-white dark:hover:bg-white/20 text-sm font-bold rounded-xl transition-all shadow-lg active:scale-95 border border-transparent hover:border-sky-100 hover:shadow-xl hover:-translate-y-1",children:"Ask AI Planner"})})]}),r.jsxs("div",{className:"bg-white/60 dark:bg-slate-900/60 backdrop-blur-xl rounded-[2.5rem] p-8 shadow-sm border border-transparent hover:border-sky-300 dark:hover:border-indigo-500 transition-all duration-500 ease-out hover:shadow-xl hover:bg-white/70 dark:hover:bg-slate-900/70",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Saved Drafts"}),r.jsx("div",{className:"space-y-3",children:s.savedDrafts.length===0?r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center py-4",children:"No saved drafts yet"}):s.savedDrafts.map(u=>r.jsxs("div",{onClick:()=>e("/chat"),className:"flex gap-4 p-4 bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 rounded-2xl transition-all cursor-pointer group border border-slate-100 dark:border-slate-700/50 hover:border-sky-400 dark:hover:border-indigo-400 hover:shadow-xl hover:-translate-y-1 hover:scale-[1.02] duration-300",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-slate-50 dark:bg-slate-700 flex-shrink-0 flex items-center justify-center group-hover:scale-110 group-hover:bg-white group-hover:text-sky-600 dark:group-hover:text-indigo-400 transition-all ease-out",children:r.jsx(ra,{className:"w-6 h-6 text-slate-400 dark:text-slate-300 group-hover:text-sky-500 dark:group-hover:text-indigo-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-900 dark:text-white font-bold group-hover:text-sky-600 dark:group-hover:text-indigo-400 transition-colors",children:u.title}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5 font-medium",children:u.details})]})]},u.id))})]})]})]})]})},vL=({isOpen:t,onClose:e})=>{const s=za(),[n,a]=L.useState(null),[i,c]=L.useState(5),[A,d]=L.useState(!1),[f,u]=L.useState(!1);L.useEffect(()=>{t&&(c(5),d(!1),u(!1),p())},[t]),L.useEffect(()=>{if(!t||i===0)return;const C=setInterval(()=>{c(F=>F<=1?(d(!0),0):F-1)},1e3);return()=>clearInterval(C)},[t,i]);const p=async()=>{try{const C=await fetch(`${_e}/api/advertisements/active`);if(!C.ok)throw new Error;const F=await C.json();if(F.length>0){const U=F[Math.floor(Math.random()*F.length)];a(U),u(!1),x(U.id)}else a(null),u(!0)}catch{a(null),u(!0)}},x=async C=>{try{await fetch(`${_e}/api/advertisements/${C}/view`,{method:"POST",headers:{"Content-Type":"application/json"}})}catch{}},m=async C=>{try{await fetch(`${_e}/api/advertisements/${C}/click`,{method:"POST",headers:{"Content-Type":"application/json"}})}catch{}},j=C=>{C&&(C.preventDefault(),C.stopPropagation()),n&&(m(n.id),window.open(n.link,"_blank","noopener,noreferrer"))},w=C=>{C&&(C.preventDefault(),C.stopPropagation()),e(),s("/billing")},S=C=>{C&&(C.preventDefault(),C.stopPropagation()),A&&e()};return t?r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-300",onClick:C=>C.stopPropagation(),children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl max-w-md w-full shadow-2xl relative animate-in zoom-in-95 duration-300",onClick:C=>C.stopPropagation(),children:[r.jsx("button",{type:"button",onClick:S,disabled:!A,className:`absolute top-4 right-4 z-10 p-2 rounded-full transition-all ${A?"bg-white/80 dark:bg-slate-700/80 hover:bg-white dark:hover:bg-slate-700 text-slate-600 dark:text-slate-400 cursor-pointer":"bg-slate-100 dark:bg-slate-700/50 text-slate-400 dark:text-slate-500 cursor-not-allowed"}`,title:A?"Close":`Wait ${i}s`,children:A?r.jsx(As,{size:20}):r.jsx("span",{className:"text-sm font-bold w-5 h-5 flex items-center justify-center",children:i})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500 font-semibold uppercase tracking-wider",children:f?"Notice":"Sponsored Content"}),!A&&!f&&r.jsxs("span",{className:"text-xs text-sky-600 dark:text-indigo-400 font-semibold",children:["Closing in ",i,"s"]})]}),f?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4",children:[r.jsx("div",{className:"w-24 h-24 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center mb-6",children:r.jsx(ur,{size:48,className:"text-slate-400 dark:text-slate-500"})}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2 text-center",children:""}),r.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 text-center mb-6",children:["",r.jsx("br",{}),""]}),r.jsx("div",{className:"w-full max-w-xs",children:r.jsx("div",{className:"h-1 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-sky-500 to-blue-600 dark:from-indigo-500 dark:to-purple-600 transition-all duration-1000",style:{width:`${(5-i)/5*100}%`}})})})]}):n?r.jsxs(r.Fragment,{children:[n.imageUrl&&r.jsx("div",{onClick:j,className:"mb-4 rounded-2xl overflow-hidden cursor-pointer group",children:r.jsx("img",{src:`${_e}${n.imageUrl}`,alt:n.title,className:"w-full h-64 object-cover transition-transform duration-300 group-hover:scale-105"})}),r.jsxs("div",{onClick:j,className:"cursor-pointer group",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2 group-hover:text-sky-600 dark:group-hover:text-indigo-400 transition-colors",children:n.title}),n.description&&r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:n.description}),r.jsx("button",{type:"button",onClick:j,className:"w-full py-3 bg-sky-600 dark:bg-indigo-600 text-white rounded-xl font-semibold hover:bg-sky-500 dark:hover:bg-indigo-500 transition-colors shadow-lg",children:"Learn More"})]})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 dark:border-slate-700 border-t-sky-600 dark:border-t-indigo-600 rounded-full animate-spin mb-4"}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"..."})]}),r.jsx("div",{className:"mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:r.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 text-center",children:["Premium members enjoy ad-free experience "," ",r.jsx("button",{onClick:w,className:"text-sky-600 dark:text-indigo-400 hover:underline font-semibold bg-transparent border-none p-0 inline cursor-pointer",children:"Upgrade now"})]})})]})]})}):null},yL=[{id:"relaxed",label:"Relaxed",icon:Vp},{id:"energetic",label:"Energetic",icon:Qn},{id:"romantic",label:"Romantic",icon:_h},{id:"family",label:"Family Fun",icon:Gl}],wL=[{id:"solo",label:"Solo"},{id:"couple",label:"Couple"},{id:"family",label:"Family"},{id:"friends",label:"Friends"}],jL=[{id:"car",label:"Car",icon:K4},{id:"public",label:"Public Transport",icon:ra},{id:"walk",label:"Walking",icon:bT}],NL=[{id:"low",label:"Budget",desc:"Cheap & Cheerful"},{id:"medium",label:"Standard",desc:"Balanced"},{id:"high",label:"Premium",desc:"Treat Yourself"},{id:"luxury",label:"Luxury",desc:"Spare No Expense"}],BL=["Halal","Vegetarian","Vegan","No Beef","No Pork","Gluten Free"],kL=({isOpen:t,onClose:e,onComplete:s})=>{const[n,a]=L.useState(1),[i,c]=L.useState({mood:"",companions:"",budget:"medium",transport:"",dietary:[]});if(!t)return null;const A=()=>{n<3?a(n+1):s(i)},d=f=>{c(u=>({...u,dietary:u.dietary.includes(f)?u.dietary.filter(p=>p!==f):[...u.dietary,f]}))};return r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden border border-slate-200 dark:border-slate-800 flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50/50 dark:bg-slate-900/50",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Trip Wizard"}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Step ",n," of 3"]})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full transition-colors",children:r.jsx(As,{className:"w-5 h-5 text-slate-500"})})]}),r.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[n===1&&r.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"What's the vibe today?"}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:yL.map(f=>r.jsxs("button",{onClick:()=>c({...i,mood:f.id}),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border transition-all ${i.mood===f.id?"border-sky-500 bg-sky-50 dark:bg-sky-900/20 text-sky-600 dark:text-sky-400 ring-1 ring-sky-500":"border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[r.jsx(f.icon,{className:"w-6 h-6"}),r.jsx("span",{className:"text-sm font-medium",children:f.label})]},f.id))})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Who are you with?"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:wL.map(f=>r.jsx("button",{onClick:()=>c({...i,companions:f.id}),className:`px-4 py-2 rounded-full text-sm font-medium border transition-all ${i.companions===f.id?"bg-slate-900 text-white dark:bg-white dark:text-slate-900 border-transparent":"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-100"}`,children:f.label},f.id))})]})]}),n===2&&r.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[r.jsx(Kh,{className:"w-4 h-4"})," Budget Level"]}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:NL.map(f=>r.jsxs("button",{onClick:()=>c({...i,budget:f.id}),className:`flex items-center justify-between p-3 rounded-xl border transition-all ${i.budget===f.id?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20 ring-1 ring-emerald-500":"border-slate-200 dark:border-slate-700"}`,children:[r.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white",children:f.label}),r.jsx("span",{className:"text-xs text-slate-500",children:f.desc})]},f.id))})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"How are you getting around?"}),r.jsx("div",{className:"flex gap-2",children:jL.map(f=>r.jsxs("button",{onClick:()=>c({...i,transport:f.id}),className:`flex-1 flex flex-col items-center gap-2 p-3 rounded-xl border transition-all ${i.transport===f.id?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400":"border-slate-200 dark:border-slate-700"}`,children:[r.jsx(f.icon,{className:"w-5 h-5"}),r.jsx("span",{className:"text-xs font-medium",children:f.label})]},f.id))})]})]}),n===3&&r.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[r.jsx(No,{className:"w-4 h-4"})," Dietary Preferences"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:BL.map(f=>r.jsx("button",{onClick:()=>d(f),className:`px-3 py-1.5 rounded-lg text-sm font-medium border transition-all ${i.dietary.includes(f)?"bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-900/30 dark:text-rose-300 dark:border-rose-800":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700"}`,children:f},f))})]}),r.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl border border-slate-100 dark:border-slate-800 text-sm text-slate-600 dark:text-slate-400",children:r.jsx("p",{children:"Ready to generate your custom plan? The AI will use these preferences to find the best spots for you."})})]})]}),r.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900",children:r.jsx("button",{onClick:A,disabled:n===1&&(!i.mood||!i.companions),className:"w-full py-3 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-bold rounded-xl shadow-lg shadow-sky-500/20 hover:shadow-sky-500/30 active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n===3?r.jsxs(r.Fragment,{children:[r.jsx(Qn,{className:"w-5 h-5"})," Generate My Plan"]}):r.jsxs(r.Fragment,{children:["Next Step ",r.jsx(hd,{className:"w-5 h-5"})]})})})]})})},CL=[{id:"local",label:"Local",icon:""},{id:"chinese",label:"Chinese",icon:""},{id:"japanese",label:"Japanese",icon:""},{id:"korean",label:"Korean",icon:""},{id:"western",label:"Western",icon:""},{id:"indian",label:"Indian",icon:""},{id:"thai",label:"Thai",icon:""},{id:"malay",label:"Malay",icon:""}],m5=[{id:"quick",label:"Quick Bite",icon:on,desc:"Fast & convenient"},{id:"casual",label:"Casual",icon:Vp,desc:"Relaxed dining"},{id:"romantic",label:"Date Night",icon:_h,desc:"Special occasion"},{id:"group",label:"Group Feast",icon:Gl,desc:"Friends & family"}],g5=[{id:"breakfast",label:"Breakfast",icon:""},{id:"lunch",label:"Lunch",icon:""},{id:"dinner",label:"Dinner",icon:""},{id:"supper",label:"Supper",icon:""},{id:"cafe",label:"Cafe/Dessert",icon:""}],x5=[{id:"low",label:"Budget",desc:"Under RM 15/pax",icon:"$"},{id:"medium",label:"Moderate",desc:"RM 15-40/pax",icon:"$$"},{id:"high",label:"Upscale",desc:"RM 40-80/pax",icon:"$$$"},{id:"luxury",label:"Fine Dining",desc:"RM 80+/pax",icon:"$$$$"}],SL=[{id:"halal",label:"Halal",icon:""},{id:"vegetarian",label:"Vegetarian",icon:""},{id:"vegan",label:"Vegan",icon:""},{id:"no-pork",label:"No Pork",icon:""},{id:"no-beef",label:"No Beef",icon:""},{id:"gluten-free",label:"Gluten Free",icon:""}],EL=[{id:"nearby",label:"Walking (< 1km)",value:"1"},{id:"short",label:"Short drive (< 5km)",value:"5"},{id:"any",label:"Any distance",value:"15"}],TL=({isOpen:t,onClose:e,onComplete:s,userLocation:n})=>{var x,m,j;const[a,i]=L.useState(1),[c,A]=L.useState({cuisine:[],mood:"",budget:"medium",dietary:[],mealType:"",distance:"5"});if(!t)return null;const d=()=>{a<3?i(a+1):s(c)},f=w=>{A(S=>({...S,cuisine:S.cuisine.includes(w)?S.cuisine.filter(C=>C!==w):[...S.cuisine,w]}))},u=w=>{A(S=>({...S,dietary:S.dietary.includes(w)?S.dietary.filter(C=>C!==w):[...S.dietary,w]}))},p=()=>a===1?c.mealType&&c.mood:!0;return r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden border border-slate-200 dark:border-slate-800 flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl shadow-lg shadow-orange-500/20",children:r.jsx(No,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Food Finder"}),r.jsxs("p",{className:"text-xs text-slate-500",children:["Step ",a," of 3  Quick recommendations"]})]})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-white/50 dark:hover:bg-slate-800 rounded-full transition-colors",children:r.jsx(As,{className:"w-5 h-5 text-slate-500"})})]}),r.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[a===1&&r.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[r.jsx(on,{className:"w-4 h-4 text-orange-500"})," What meal are you looking for?"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:g5.map(w=>r.jsxs("button",{onClick:()=>A({...c,mealType:w.id}),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl border transition-all ${c.mealType===w.id?"border-orange-500 bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 ring-1 ring-orange-500":"border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[r.jsx("span",{className:"text-lg",children:w.icon}),r.jsx("span",{className:"text-sm font-medium",children:w.label})]},w.id))})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"What's the vibe?"}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:m5.map(w=>r.jsxs("button",{onClick:()=>A({...c,mood:w.id}),className:`flex flex-col items-center justify-center gap-2 p-4 rounded-xl border transition-all ${c.mood===w.id?"border-orange-500 bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 ring-1 ring-orange-500":"border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[r.jsx(w.icon,{className:"w-6 h-6"}),r.jsx("span",{className:"text-sm font-bold",children:w.label}),r.jsx("span",{className:"text-[10px] text-slate-500",children:w.desc})]},w.id))})]})]}),a===2&&r.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[r.jsx(Kh,{className:"w-4 h-4 text-emerald-500"})," Budget per person"]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:x5.map(w=>r.jsxs("button",{onClick:()=>A({...c,budget:w.id}),className:`flex items-center justify-between p-3 rounded-xl border transition-all ${c.budget===w.id?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/20 ring-1 ring-emerald-500":"border-slate-200 dark:border-slate-700 hover:bg-slate-50"}`,children:[r.jsxs("div",{className:"text-left",children:[r.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white block",children:w.label}),r.jsx("span",{className:"text-[10px] text-slate-500",children:w.desc})]}),r.jsx("span",{className:"text-lg font-bold text-emerald-600",children:w.icon})]},w.id))})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[r.jsx(JT,{className:"w-4 h-4 text-green-500"})," Dietary requirements (optional)"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:SL.map(w=>r.jsxs("button",{onClick:()=>u(w.id),className:`flex items-center gap-2 px-3 py-2 rounded-xl text-sm font-medium border transition-all ${c.dietary.includes(w.id)?"bg-green-100 text-green-700 border-green-300 dark:bg-green-900/30 dark:text-green-300 dark:border-green-800":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:bg-slate-50"}`,children:[r.jsx("span",{children:w.icon}),r.jsx("span",{children:w.label})]},w.id))})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[r.jsx(ra,{className:"w-4 h-4 text-blue-500"})," Distance"]}),r.jsx("div",{className:"flex gap-2",children:EL.map(w=>r.jsx("button",{onClick:()=>A({...c,distance:w.value}),className:`flex-1 py-2.5 px-3 rounded-xl text-sm font-medium border transition-all ${c.distance===w.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-600":"border-slate-200 dark:border-slate-700 hover:bg-slate-50"}`,children:w.label},w.id))})]})]}),a===3&&r.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[r.jsx(No,{className:"w-4 h-4 text-orange-500"})," What are you craving? (optional)"]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Select one or more, or skip for varied suggestions"}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:CL.map(w=>r.jsxs("button",{onClick:()=>f(w.id),className:`flex flex-col items-center gap-1 p-3 rounded-xl border transition-all ${c.cuisine.includes(w.id)?"border-orange-500 bg-orange-50 dark:bg-orange-900/20 ring-1 ring-orange-500":"border-slate-200 dark:border-slate-700 hover:bg-slate-50"}`,children:[r.jsx("span",{className:"text-2xl",children:w.icon}),r.jsx("span",{className:"text-[10px] font-bold text-slate-700 dark:text-slate-300",children:w.label})]},w.id))})]}),r.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 p-4 rounded-xl border border-orange-100 dark:border-orange-800/30",children:[r.jsxs("h4",{className:"text-sm font-bold text-orange-800 dark:text-orange-300 mb-2 flex items-center gap-2",children:[r.jsx(Qn,{className:"w-4 h-4"})," Ready to find your perfect meal!"]}),r.jsxs("div",{className:"text-xs text-orange-700 dark:text-orange-400 space-y-1",children:[r.jsxs("p",{children:[" ",((x=g5.find(w=>w.id===c.mealType))==null?void 0:x.label)||"Any meal","  ",((m=m5.find(w=>w.id===c.mood))==null?void 0:m.label)||"Any mood"]}),r.jsxs("p",{children:[" Budget: ",(j=x5.find(w=>w.id===c.budget))==null?void 0:j.desc]}),c.dietary.length>0&&r.jsxs("p",{children:[" Dietary: ",c.dietary.join(", ")]}),c.cuisine.length>0&&r.jsxs("p",{children:[" Cuisine: ",c.cuisine.join(", ")]})]})]})]})]}),r.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 flex gap-3",children:[a>1&&r.jsx("button",{onClick:()=>i(a-1),className:"px-4 py-3 text-slate-600 dark:text-slate-400 font-medium rounded-xl hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:"Back"}),r.jsx("button",{onClick:d,disabled:!p(),className:"flex-1 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white font-bold rounded-xl shadow-lg shadow-orange-500/20 hover:shadow-orange-500/30 active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a===3?r.jsxs(r.Fragment,{children:[r.jsx(Qn,{className:"w-5 h-5"})," Find Food"]}):r.jsxs(r.Fragment,{children:["Next ",r.jsx(hd,{className:"w-5 h-5"})]})})]})]})})},UL=t=>t.place_id?`${_e}/proxy_image?place_id=${t.place_id}`:t.google_place_id?`${_e}/proxy_image?google_place_id=${encodeURIComponent(t.google_place_id)}`:t.photo_reference&&t.photo_reference!=="N/A"?`${_e}/proxy_image?ref=${encodeURIComponent(t.photo_reference)}`:t.name?`${_e}/proxy_image?name=${encodeURIComponent(t.name)}`:`${_e}/proxy_image/default`,FL=({place:t,onAddToItinerary:e,onViewDetails:s,compact:n=!1})=>{const[a,i]=L.useState(!1),c=UL(t),A=()=>{},d=u=>u?typeof u=="string"?u:"$".repeat(Math.min(u,4)):null,f=u=>{u.stopPropagation(),i(!a)};return n?r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-slate-800 rounded-xl border border-slate-100 dark:border-slate-700 hover:shadow-md transition-all cursor-pointer group",onClick:()=>s==null?void 0:s(t),children:[r.jsx("img",{src:c,onError:A,alt:t.name,className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-sm truncate",children:t.name}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mt-0.5",children:[t.rating&&r.jsxs("span",{className:"flex items-center gap-0.5",children:[r.jsx(yA,{className:"w-3 h-3 text-amber-500 fill-amber-500"}),t.rating.toFixed(1)]}),d(t.price_level)&&r.jsx("span",{className:"text-emerald-600 font-bold",children:d(t.price_level)}),t.distance&&r.jsx("span",{children:t.distance})]})]}),e&&r.jsx("button",{onClick:u=>{u.stopPropagation(),e(t)},className:"p-2 text-slate-400 hover:text-orange-500 hover:bg-orange-50 dark:hover:bg-orange-900/20 rounded-lg opacity-0 group-hover:opacity-100 transition-all",children:r.jsx(ln,{className:"w-4 h-4"})})]}):r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-100 dark:border-slate-700 overflow-hidden shadow-sm hover:shadow-xl transition-all group",children:[r.jsxs("div",{className:"relative h-40 overflow-hidden",children:[r.jsx("img",{src:c,onError:A,alt:t.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),r.jsxs("div",{className:"absolute top-3 left-3 flex gap-2",children:[t.is_open_now!==void 0&&r.jsx("span",{className:`px-2 py-1 rounded-lg text-[10px] font-bold uppercase ${t.is_open_now?"bg-emerald-500 text-white":"bg-red-500 text-white"}`,children:t.is_open_now?"Open":"Closed"}),t.cuisine_type&&r.jsx("span",{className:"px-2 py-1 rounded-lg text-[10px] font-bold uppercase bg-white/90 text-slate-700",children:t.cuisine_type})]}),r.jsx("button",{onClick:f,className:`absolute top-3 right-3 p-2 rounded-full transition-all ${a?"bg-rose-500 text-white":"bg-white/90 text-slate-600 hover:bg-rose-500 hover:text-white"}`,children:r.jsx(_h,{className:`w-4 h-4 ${a?"fill-current":""}`})}),r.jsxs("div",{className:"absolute bottom-3 left-3 right-3 flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center gap-2",children:t.rating&&r.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-white/95 rounded-lg text-xs font-bold text-slate-800",children:[r.jsx(yA,{className:"w-3 h-3 text-amber-500 fill-amber-500"}),t.rating.toFixed(1),t.review_count&&r.jsxs("span",{className:"text-slate-400 font-normal",children:["(",t.review_count,")"]})]})}),d(t.price_level)&&r.jsx("span",{className:"px-2 py-1 bg-emerald-500 text-white rounded-lg text-xs font-bold",children:d(t.price_level)})]})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white mb-1 line-clamp-1",children:t.name}),r.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-start gap-1 mb-3 line-clamp-2",children:[r.jsx(ra,{className:"w-3.5 h-3.5 flex-shrink-0 mt-0.5"}),t.address]}),t.dietary_tags&&t.dietary_tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:t.dietary_tags.map((u,p)=>r.jsx("span",{className:"px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded text-[10px] font-bold",children:u},p))}),t.description&&r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mb-3 line-clamp-2",children:t.description}),r.jsxs("div",{className:"flex gap-2 pt-2 border-t border-slate-100 dark:border-slate-700",children:[t.google_place_id&&r.jsxs("a",{href:`https://www.google.com/maps/place/?q=place_id:${t.google_place_id}`,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center gap-1 py-2 text-sm font-medium text-slate-600 dark:text-slate-400 hover:text-sky-600 dark:hover:text-sky-400 hover:bg-sky-50 dark:hover:bg-sky-900/20 rounded-lg transition-colors",children:[r.jsx(Y4,{className:"w-4 h-4"}),"Directions"]}),e&&r.jsxs("button",{onClick:()=>e(t),className:"flex-1 flex items-center justify-center gap-1 py-2 text-sm font-bold text-white bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 rounded-lg transition-all",children:[r.jsx(ln,{className:"w-4 h-4"}),"Add to Plan"]})]})]})]})},LL=({places:t,onAddToItinerary:e,title:s="Food Recommendations",loading:n=!1})=>{const[a,i]=L.useState(0),c=wi.useRef(null),A=d=>{if(!c.current)return;const f=296,u=d==="left"?Math.max(0,a-1):Math.min(t.length-1,a+1);i(u),c.current.scrollTo({left:u*f,behavior:"smooth"})};return n?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(No,{className:"w-5 h-5 text-orange-500"}),s]}),r.jsx("div",{className:"flex gap-4 overflow-hidden",children:[1,2,3].map(d=>r.jsxs("div",{className:"w-[280px] flex-shrink-0 bg-slate-100 dark:bg-slate-800 rounded-2xl animate-pulse",children:[r.jsx("div",{className:"h-40 bg-slate-200 dark:bg-slate-700 rounded-t-2xl"}),r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx("div",{className:"h-5 bg-slate-200 dark:bg-slate-700 rounded w-3/4"}),r.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full"}),r.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/2"})]})]},d))})]}):!t||t.length===0?r.jsxs("div",{className:"text-center py-8 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-700",children:[r.jsx(No,{className:"w-12 h-12 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No food recommendations found"}),r.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500 mt-1",children:"Try adjusting your preferences"})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(No,{className:"w-5 h-5 text-orange-500"}),s,r.jsxs("span",{className:"text-sm font-normal text-slate-500",children:["(",t.length," found)"]})]}),t.length>2&&r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>A("left"),disabled:a===0,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:r.jsx(Lu,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>A("right"),disabled:a>=t.length-2,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:r.jsx(ai,{className:"w-5 h-5"})})]})]}),r.jsx("div",{ref:c,className:"flex gap-4 overflow-x-auto pb-4 scroll-smooth [&::-webkit-scrollbar]:hidden",children:t.map((d,f)=>r.jsx("div",{className:"w-[280px] flex-shrink-0",children:r.jsx(FL,{place:d,onAddToItinerary:e})},d.id||f))})]})},ML=(t,e,s)=>{if(e)return`${_e}/proxy_image?place_id=${e}`;if(s)return`${_e}/proxy_image?name=${encodeURIComponent(s)}`;if(t&&!t.includes("unsplash.com")&&(t.includes("photo_reference")||t.includes("AF1Qip")||t.includes("photos/"))){const n=t.includes("photos/")?t.split("photos/").pop():t;if(n)return`${_e}/proxy_image?ref=${encodeURIComponent(n)}`}return`${_e}/proxy_image/default`},QL=({type:t,className:e="w-4 h-4"})=>{switch(t){case"food":return r.jsx(No,{className:e});case"attraction":return r.jsx(Xx,{className:e});case"cafe":return r.jsx(Vp,{className:e});case"hotel":return r.jsx(eb,{className:e});case"shopping":return r.jsx(ab,{className:e});case"transport":return r.jsx(Wx,{className:e});default:return r.jsx(ra,{className:e})}},_L=({slot:t})=>{const e={morning:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",lunch:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",afternoon:"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-400",evening:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400",night:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400"},s={morning:"",lunch:"",afternoon:"",evening:"",night:""};return r.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider ${e[t]||e.morning}`,children:s[t]||t})},IL=({activity:t,onSave:e,onCancel:s,onDelete:n})=>{const[a,i]=L.useState({...t}),c=[{value:"morning",label:" Morning"},{value:"lunch",label:" Lunch"},{value:"afternoon",label:" Afternoon"},{value:"evening",label:" Evening"},{value:"night",label:" Night"}],A=[{value:"attraction",label:" Attraction"},{value:"food",label:" Food"},{value:"cafe",label:" Cafe"},{value:"hotel",label:" Hotel"},{value:"shopping",label:" Shopping"},{value:"transport",label:" Transport"}];return r.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:""}),r.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg",children:r.jsx(As,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-5",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:""}),r.jsx("input",{type:"time",value:a.start_time,onChange:d=>i({...a,start_time:d.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-sky-500 outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:""}),r.jsx("input",{type:"time",value:a.end_time,onChange:d=>i({...a,end_time:d.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-sky-500 outline-none"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:""}),r.jsx("select",{value:a.time_slot,onChange:d=>i({...a,time_slot:d.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-sky-500 outline-none",children:c.map(d=>r.jsx("option",{value:d.value,children:d.label},d.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:""}),r.jsx("select",{value:a.activity_type,onChange:d=>i({...a,activity_type:d.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-sky-500 outline-none",children:A.map(d=>r.jsx("option",{value:d.value,children:d.label},d.value))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:""}),r.jsx("input",{type:"text",value:a.place_name,onChange:d=>i({...a,place_name:d.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-sky-500 outline-none",placeholder:""})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:""}),r.jsx("input",{type:"text",value:a.place_address,onChange:d=>i({...a,place_address:d.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-sky-500 outline-none",placeholder:""})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:""}),r.jsx("textarea",{value:a.description,onChange:d=>i({...a,description:d.target.value}),rows:3,className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-sky-500 outline-none resize-none",placeholder:""})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:""}),r.jsx("input",{type:"text",value:a.budget_estimate,onChange:d=>i({...a,budget_estimate:d.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-sky-500 outline-none",placeholder:"RM 50"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:""}),r.jsx("input",{type:"text",value:a.tips||"",onChange:d=>i({...a,tips:d.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-sky-500 outline-none",placeholder:""})]})]})]}),r.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[r.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl text-sm font-medium transition-colors",children:[r.jsx(na,{className:"w-4 h-4"}),""]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:s,className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl text-sm font-medium transition-colors",children:""}),r.jsxs("button",{onClick:()=>e(a),className:"flex items-center gap-2 px-5 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-xl text-sm font-bold transition-colors",children:[r.jsx(md,{className:"w-4 h-4"}),""]})]})]})]})})},OL=({selectedCount:t,onSubmit:e,onCancel:s,isLoading:n})=>{const[a,i]=L.useState(""),c=["1","","","","",""];return r.jsx("div",{className:"fixed inset-0 z-[80] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl",children:r.jsx(Fv,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"AI "}),r.jsxs("p",{className:"text-xs text-slate-500",children:[" ",t," "]})]})]}),r.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg",children:r.jsx(As,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:" AI "}),r.jsx("textarea",{value:a,onChange:A=>i(A.target.value),placeholder:"2...",rows:4,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none resize-none",disabled:n})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:""}),r.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((A,d)=>r.jsx("button",{onClick:()=>i(A),className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 text-xs rounded-full hover:bg-purple-100 dark:hover:bg-purple-900/30 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",disabled:n,children:A},d))})]})]}),r.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-800 flex justify-end gap-3",children:[r.jsx("button",{onClick:s,className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl text-sm font-medium transition-colors",disabled:n,children:""}),r.jsx("button",{onClick:()=>e(a),disabled:!a.trim()||n,className:"flex items-center gap-2 px-5 py-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-xl text-sm font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:n?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Fv,{className:"w-4 h-4"}),""]})})]})]})})},DL=({plan:t,onClose:e,onSave:s,onEditActivity:n})=>{const[a,i]=L.useState(t),[c,A]=L.useState(0),[d,f]=L.useState(null),[u,p]=L.useState(!1),[x,m]=L.useState(!1),[j,w]=L.useState(new Set),[S,C]=L.useState(!1),[F,U]=L.useState(!1),_=a.days[c],z=()=>A(se=>Math.max(0,se-1)),I=()=>A(se=>Math.min(a.days.length-1,se+1)),H=se=>{se.currentTarget.src=`${_e}/proxy_image/default`},ee=(se,Z,re)=>{f({dayIdx:se,actIdx:Z,activity:re})},$=se=>{if(!d)return;const Z={...a};Z.days=[...a.days],Z.days[d.dayIdx]={...a.days[d.dayIdx]},Z.days[d.dayIdx].activities=[...a.days[d.dayIdx].activities],Z.days[d.dayIdx].activities[d.actIdx]=se,Z.days[d.dayIdx].day_summary={...Z.days[d.dayIdx].day_summary,total_activities:Z.days[d.dayIdx].activities.length},i(Z),p(!0),f(null),n(d.dayIdx,d.actIdx,se)},ce=()=>{if(!d)return;const se={...a};se.days=[...a.days],se.days[d.dayIdx]={...a.days[d.dayIdx]},se.days[d.dayIdx].activities=a.days[d.dayIdx].activities.filter((Z,re)=>re!==d.actIdx),se.days[d.dayIdx].day_summary={...se.days[d.dayIdx].day_summary,total_activities:se.days[d.dayIdx].activities.length},i(se),p(!0),f(null)},Q=()=>{f(null)},q=()=>{x&&w(new Set),m(!x)},te=(se,Z)=>{const re=`${se}-${Z}`,ve=new Set(j);ve.has(re)?ve.delete(re):ve.add(re),w(ve)},X=(se,Z)=>j.has(`${se}-${Z}`),Ae=()=>{const se=[];return j.forEach(Z=>{const[re,ve]=Z.split("-"),ae=parseInt(re),R=parseInt(ve);a.days[ae]&&a.days[ae].activities[R]&&se.push({dayIdx:ae,actIdx:R,activity:a.days[ae].activities[R]})}),se},W=async se=>{const Z=Ae();if(Z.length!==0){U(!0);try{const re=await fetch(`${_e}/api/ai/edit-activities`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({activities:Z.map(ae=>({day_index:ae.dayIdx,activity_index:ae.actIdx,activity:ae.activity})),instructions:se,plan_context:{title:a.title,destination:a.title,preferences:a.user_preferences_applied}})});if(!re.ok)throw new Error("AI edit request failed");const ve=await re.json();if(ve.success&&ve.updated_activities){const ae={...a};ae.days=a.days.map((R,P)=>({...R,activities:R.activities.map((V,K)=>{const ne=ve.updated_activities.find(pe=>pe.day_index===P&&pe.activity_index===K);return ne?ne.activity:V})})),i(ae),p(!0),m(!1),w(new Set)}}catch(re){console.error("AI Edit failed:",re),alert("AI ")}finally{U(!1),C(!1)}}};return r.jsxs("div",{className:"fixed inset-0 z-[70] bg-white dark:bg-slate-900 flex flex-col overflow-hidden animate-in fade-in duration-200",children:[r.jsx("div",{className:"shrink-0 border-b border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-colors",children:r.jsx(As,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white",children:a.title}),r.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-2",children:[r.jsx("span",{children:a.duration}),r.jsx("span",{children:""}),r.jsx("span",{children:a.total_budget_estimate})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:q,className:`flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium text-sm transition-all ${x?"bg-purple-500 text-white shadow-lg shadow-purple-500/20":"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-purple-100 dark:hover:bg-purple-900/30 hover:text-purple-600 dark:hover:text-purple-400"}`,children:[r.jsx(Fv,{className:"w-4 h-4"}),x?"":"AI "]}),x&&j.size>0&&r.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-bold text-sm shadow-lg shadow-purple-500/20 hover:from-purple-600 hover:to-pink-600 transition-all animate-in slide-in-from-right-2",children:[r.jsx(Qn,{className:"w-4 h-4"})," ",j.size," "]}),r.jsxs("button",{onClick:()=>s(a),className:`flex items-center gap-2 px-5 py-2.5 text-white font-bold rounded-xl shadow-lg transition-all active:scale-95 ${u?"bg-emerald-500 hover:bg-emerald-600 shadow-emerald-500/20":"bg-sky-500 hover:bg-sky-600 shadow-sky-500/20"}`,children:[u?r.jsx(md,{className:"w-4 h-4"}):r.jsx(Zx,{className:"w-4 h-4"}),u?"":""]})]})]})}),r.jsx("div",{className:"shrink-0 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:z,disabled:c===0,className:"p-2 hover:bg-white dark:hover:bg-slate-800 rounded-lg disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:r.jsx(Lu,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex-1 flex gap-2 overflow-x-auto py-1 [&::-webkit-scrollbar]:hidden",children:a.days.map((se,Z)=>r.jsx("button",{onClick:()=>A(Z),className:`shrink-0 px-4 py-2 rounded-xl font-medium text-sm transition-all ${c===Z?"bg-sky-500 text-white shadow-md shadow-sky-500/20":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-sky-50 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-700"}`,children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("span",{className:"font-bold",children:["Day ",se.day_number]}),r.jsx("span",{className:"text-[10px] opacity-75",children:se.theme})]})},se.day_number))}),r.jsx("button",{onClick:I,disabled:c===a.days.length-1,className:"p-2 hover:bg-white dark:hover:bg-slate-800 rounded-lg disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:r.jsx(ai,{className:"w-5 h-5"})})]})})}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6 space-y-8",children:[_.top_locations&&_.top_locations.length>0&&r.jsxs("section",{children:[r.jsxs("h2",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[r.jsx(Qn,{className:"w-4 h-4"})," "]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:_.top_locations.map((se,Z)=>r.jsxs("div",{className:"relative h-48 rounded-2xl overflow-hidden group cursor-pointer shadow-lg",children:[r.jsx("img",{src:ML(se.image_url,se.place_id,se.name),onError:H,alt:se.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[r.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:se.name}),r.jsx("p",{className:"text-white/80 text-xs",children:se.highlight_reason})]})]},Z))})]}),r.jsx("section",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-5 border border-slate-100 dark:border-slate-700",children:r.jsxs("div",{className:"flex flex-wrap gap-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-sky-100 dark:bg-sky-900/30 rounded-lg",children:r.jsx(Mn,{className:"w-5 h-5 text-sky-600 dark:text-sky-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:""}),r.jsxs("p",{className:"font-bold text-slate-900 dark:text-white",children:[_.day_summary.total_activities," "]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:r.jsx(Kh,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:""}),r.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:_.day_summary.total_budget})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg",children:r.jsx(Wx,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:""}),r.jsx("p",{className:"font-bold text-slate-900 dark:text-white text-sm",children:_.day_summary.transport_notes})]})]})]})}),r.jsxs("section",{children:[r.jsxs("h2",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[r.jsx(on,{className:"w-4 h-4"})," "]}),r.jsx("div",{className:"space-y-4",children:_.activities.map((se,Z)=>r.jsxs("div",{className:"relative pl-8 group",children:[Z<_.activities.length-1&&r.jsx("div",{className:"absolute left-[11px] top-10 bottom-0 w-0.5 bg-slate-200 dark:bg-slate-700"}),r.jsx("div",{className:`absolute left-0 top-2 w-6 h-6 rounded-full flex items-center justify-center shadow-md ${se.activity_type==="food"?"bg-orange-500":se.activity_type==="attraction"?"bg-sky-500":se.activity_type==="cafe"?"bg-amber-500":"bg-slate-500"}`,children:r.jsx(QL,{type:se.activity_type,className:"w-3 h-3 text-white"})}),r.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-2xl border p-5 shadow-sm hover:shadow-lg transition-all cursor-pointer ${x&&X(c,Z)?"border-purple-400 dark:border-purple-500 ring-2 ring-purple-400/30":"border-slate-100 dark:border-slate-700"}`,onClick:()=>x&&te(c,Z),children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[x&&r.jsx("button",{onClick:re=>{re.stopPropagation(),te(c,Z)},className:`p-1 rounded-md transition-all ${X(c,Z)?"bg-purple-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:X(c,Z)?r.jsx(ea,{className:"w-4 h-4"}):r.jsx(u8,{className:"w-4 h-4"})}),r.jsx(_L,{slot:se.time_slot}),r.jsxs("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:[se.start_time," - ",se.end_time]})]}),!x&&r.jsx("button",{onClick:()=>ee(c,Z,se),className:"p-1.5 text-slate-300 hover:text-sky-500 hover:bg-sky-50 dark:hover:bg-sky-900/30 rounded-lg opacity-0 group-hover:opacity-100 transition-all",children:r.jsx(W4,{className:"w-4 h-4"})})]}),r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1",children:se.place_name}),r.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-1 mb-3",children:[r.jsx(ra,{className:"w-3 h-3"}),se.place_address]}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed mb-4",children:se.description}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[r.jsx("span",{className:"px-2 py-1 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400 rounded-lg font-bold",children:se.budget_estimate}),se.dietary_info&&r.jsx("span",{className:"px-2 py-1 bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-400 rounded-lg font-medium",children:se.dietary_info}),se.tips&&r.jsxs("span",{className:"text-slate-400 flex items-center gap-1",children:[r.jsx(Pa,{className:"w-3 h-3"})," ",se.tips]})]})]})]},Z))})]}),a.practical_info&&r.jsxs("section",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-2xl p-5 border border-amber-100 dark:border-amber-800/30",children:[r.jsxs("h2",{className:"text-sm font-bold text-amber-800 dark:text-amber-400 mb-3 flex items-center gap-2",children:[r.jsx(Pa,{className:"w-4 h-4"})," "]}),r.jsxs("div",{className:"space-y-2 text-sm text-amber-700 dark:text-amber-300",children:[a.practical_info.best_transport&&r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",a.practical_info.best_transport]}),a.practical_info.weather_advisory&&r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",a.practical_info.weather_advisory]}),a.practical_info.booking_recommendations&&a.practical_info.booking_recommendations.length>0&&r.jsxs("div",{children:[r.jsx("strong",{children:":"}),r.jsx("ul",{className:"list-disc list-inside mt-1",children:a.practical_info.booking_recommendations.map((se,Z)=>r.jsx("li",{children:se},Z))})]})]})]})]})}),d&&r.jsx(IL,{activity:d.activity,onSave:$,onCancel:Q,onDelete:ce}),S&&r.jsx(OL,{selectedCount:j.size,onSubmit:W,onCancel:()=>C(!1),isLoading:F})]})},Wm=["Describe your dream trip to Kyoto...","Plan a weekend getaway to Napa Valley...","Find the best sushi restaurants in Tokyo...","Suggest a 7-day itinerary for Italy...","Looking for family-friendly activities in London...","Show me flights to New York under RM 2000..."],RL=({suggestion:t,onClose:e,onSave:s,onUpdate:n,isSaved:a})=>{const[i,c]=L.useState(null),[A,d]=L.useState(null),f=(x,m)=>{c(x),d({...m})},u=()=>{if(i!==null&&t.itinerary){const x=[...t.itinerary];x[i]=A,n({...t,itinerary:x}),c(null)}},p=x=>{x.currentTarget.src=`${_e}/proxy_image/default`};return r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-2xl rounded-[2.5rem] shadow-2xl border border-white/20 dark:border-slate-700 relative flex flex-col max-h-[85vh] overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"relative h-48 sm:h-64 shrink-0 group",children:[r.jsx("img",{src:t.imageUrl,onError:p,alt:t.title,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),r.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-black/30 hover:bg-black/50 text-white rounded-full backdrop-blur-md transition-colors",children:r.jsx(As,{className:"w-5 h-5"})}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:[r.jsx("h3",{className:"text-2xl sm:text-3xl font-bold text-white mb-2 drop-shadow-md",children:t.title}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.tags.map(x=>r.jsx("span",{className:"px-2.5 py-1 rounded-lg bg-white/20 backdrop-blur-md text-white text-xs font-bold uppercase tracking-wider border border-white/10",children:x},x)),r.jsxs("span",{className:"px-2.5 py-1 rounded-lg bg-emerald-500/80 backdrop-blur-md text-white text-xs font-bold flex items-center gap-1 border border-white/10",children:[r.jsx("span",{className:"opacity-75",children:"Est."})," ",t.priceEstimate]})]})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 sm:p-8 space-y-8 custom-scrollbar bg-white dark:bg-slate-900",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[r.jsx(Pa,{className:"w-3 h-3"})," About"]}),r.jsx("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed text-sm sm:text-base bg-slate-50 dark:bg-slate-800/50 p-4 rounded-2xl border border-slate-100 dark:border-slate-800",children:t.description})]}),t.itinerary&&Array.isArray(t.itinerary)&&t.itinerary.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[r.jsx(Mn,{className:"w-3 h-3"})," Itinerary"]}),r.jsx("div",{className:"space-y-4",children:t.itinerary.map((x,m)=>{var j,w,S;return r.jsxs("div",{className:"relative pl-6 pb-2 border-l-2 border-slate-100 dark:border-slate-800 last:border-0 group/item",children:[r.jsx("div",{className:"absolute left-[-5px] top-0 w-2.5 h-2.5 rounded-full bg-sky-500 ring-4 ring-white dark:ring-slate-900"}),i===m?r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border-2 border-sky-500 shadow-lg space-y-3",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{value:A.day_number,onChange:C=>d({...A,day_number:C.target.value}),className:"w-16 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg px-2 py-1 text-xs font-bold",placeholder:"Day"}),r.jsx("input",{value:A.start_time,onChange:C=>d({...A,start_time:C.target.value}),className:"w-20 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg px-2 py-1 text-xs font-bold",placeholder:"Time"})]}),r.jsx("input",{value:A.custom_title||((j=A.place)==null?void 0:j.name),onChange:C=>d({...A,custom_title:C.target.value}),className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2 text-sm font-bold",placeholder:"Activity Title"}),r.jsx("textarea",{value:A.custom_notes,onChange:C=>d({...A,custom_notes:C.target.value}),className:"w-full bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg px-3 py-2 text-sm",placeholder:"Notes",rows:2}),r.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[r.jsx("button",{onClick:()=>c(null),className:"px-3 py-1.5 text-xs font-bold text-slate-500 hover:bg-slate-100 rounded-lg",children:"Cancel"}),r.jsx("button",{onClick:u,className:"px-3 py-1.5 text-xs font-bold bg-sky-500 text-white rounded-lg hover:bg-sky-600",children:"Save Changes"})]})]}):r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4 border border-slate-100 dark:border-slate-700 hover:border-sky-200 dark:hover:border-sky-900 transition-all hover:shadow-md group relative",children:[r.jsx("button",{onClick:()=>f(m,x),className:"absolute top-2 right-2 p-1.5 text-slate-300 hover:text-sky-500 hover:bg-sky-50 dark:hover:bg-sky-900/30 rounded-lg opacity-0 group-hover:opacity-100 transition-all",children:r.jsx(rb,{className:"w-3.5 h-3.5"})}),r.jsx("div",{className:"flex items-start justify-between mb-1.5",children:r.jsxs("span",{className:"text-[10px] font-bold text-sky-600 dark:text-sky-400 bg-sky-50 dark:bg-sky-900/20 px-2 py-0.5 rounded uppercase tracking-wider",children:["Day ",x.day_number,"  ",x.start_time]})}),r.jsx("p",{className:"font-bold text-slate-900 dark:text-white mb-1 text-sm",children:x.custom_title||((w=x.place)==null?void 0:w.name)||"Activity"}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 line-clamp-2 leading-relaxed",children:x.custom_notes||((S=x.place)==null?void 0:S.address)})]})]},m)})})]}),t.reviews&&t.reviews.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[r.jsx(yA,{className:"w-3 h-3"})," Reviews"]}),r.jsx("div",{className:"space-y-3",children:t.reviews.slice(0,3).map((x,m)=>r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-xl text-sm border border-slate-100 dark:border-slate-700",children:[r.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[r.jsx("div",{className:"flex text-amber-400",children:[...Array(5)].map((j,w)=>r.jsx(yA,{className:`w-3 h-3 ${w<Math.round(x.rating)?"fill-current":"opacity-30"}`},w))}),r.jsx("span",{className:"font-bold text-xs text-slate-700 dark:text-slate-300",children:x.rating})]}),r.jsxs("p",{className:"text-slate-600 dark:text-slate-400 italic text-xs leading-relaxed",children:['"',x.text,'"']})]},m))})]})]}),r.jsxs("div",{className:"p-5 border-t border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 flex gap-3",children:[r.jsx("button",{onClick:e,className:"px-6 py-3.5 rounded-xl font-bold text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-all",children:"Close"}),r.jsxs("button",{onClick:()=>s(t),className:`flex-1 py-3.5 rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg active:scale-[0.98] ${a?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-800":"bg-gradient-to-r from-sky-500 to-blue-600 hover:from-sky-400 hover:to-blue-500 text-white shadow-sky-500/25"}`,children:[a?r.jsx(sa,{className:"w-5 h-5"}):r.jsx(Zx,{className:"w-5 h-5"}),a?"Saved to My Trips":"Save Trip Plan"]})]})]})})},HL=wi.memo(({suggestion:t,isSaved:e,onViewDetails:s,onToggleSave:n})=>r.jsxs("div",{className:"w-full md:w-auto md:min-w-[280px] md:max-w-[320px] bg-white dark:bg-slate-900/80 backdrop-blur-md border border-slate-200 dark:border-slate-700/50 rounded-2xl isolate transform-gpu flex-shrink-0 snap-start transition-all duration-300 ease-out cursor-pointer group hover:scale-105",children:[r.jsxs("div",{className:"h-36 overflow-hidden relative rounded-t-2xl",children:[r.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),r.jsx("div",{className:"absolute bottom-3 left-4",children:r.jsx("h4",{className:"text-white font-bold text-lg leading-tight tracking-tight",children:t.title})})]}),r.jsxs("div",{className:"p-5 space-y-4",children:[r.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 leading-relaxed line-clamp-2",children:t.description}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(a=>r.jsx("span",{className:"text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300 px-2.5 py-1 rounded-lg uppercase tracking-wider",children:a},a))}),r.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-100 dark:border-slate-700/50",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Est. Cost"}),r.jsx("p",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400",children:t.priceEstimate})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:a=>{a.stopPropagation(),s(t)},className:"p-2 rounded-xl text-slate-400 hover:text-sky-600 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all",title:"View Details",children:r.jsx(Pa,{className:"w-4 h-4"})}),r.jsxs("button",{onClick:a=>{a.stopPropagation(),n(t)},className:`flex items-center gap-1.5 px-4 py-2 rounded-xl text-xs font-bold transition-all ${e?"bg-emerald-50 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-400":"bg-sky-600 hover:bg-sky-500 dark:bg-indigo-600 text-white"}`,children:[e?r.jsx(sa,{className:"w-3.5 h-3.5"}):r.jsx(Zx,{className:"w-3.5 h-3.5"}),e?"Added":"Add"]})]})]})]})]})),PL=({suggestions:t,savedSuggestions:e,onViewDetails:s,onToggleSave:n})=>{const a=L.useRef(null),[i,c]=L.useState(0),A=()=>{var u;if(a.current){const p=a.current.scrollLeft,x=((u=a.current.firstElementChild)==null?void 0:u.clientWidth)||300;c(Math.round(p/x))}},d=()=>{var u;return(u=a.current)==null?void 0:u.scrollBy({left:-340,behavior:"smooth"})},f=()=>{var u;return(u=a.current)==null?void 0:u.scrollBy({left:340,behavior:"smooth"})};return r.jsxs("div",{className:"relative group/list",children:[r.jsxs("div",{className:"hidden md:block opacity-0 group-hover/list:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:d,className:"absolute left-0 top-1/2 -translate-y-1/2 -ml-5 z-20 p-2 bg-white dark:bg-slate-800 rounded-full shadow-lg",children:r.jsx(Lu,{className:"w-5 h-5"})}),r.jsx("button",{onClick:f,className:"absolute right-0 top-1/2 -translate-y-1/2 -mr-1 z-20 p-2 bg-white dark:bg-slate-800 rounded-full shadow-lg",children:r.jsx(ai,{className:"w-5 h-5"})})]}),r.jsx("div",{ref:a,onScroll:A,className:"flex flex-row gap-4 overflow-x-auto pb-4 pl-1 [&::-webkit-scrollbar]:hidden scroll-smooth snap-x",children:t.map(u=>r.jsx(HL,{suggestion:u,isSaved:e.includes(u.id),onViewDetails:s,onToggleSave:n},u.id))}),r.jsx("div",{className:"flex justify-center gap-1.5 mt-2",children:t.map((u,p)=>r.jsx("div",{className:`h-1.5 rounded-full transition-all ${p===i?"w-6 bg-sky-500":"w-1.5 bg-slate-200 dark:bg-slate-700"}`},p))})]})},zL=wi.memo(({plan:t,onViewDetails:e,onSave:s,isSaved:n})=>{const a=()=>{var d,f,u;const A=(u=(f=(d=t.days)==null?void 0:d[0])==null?void 0:f.top_locations)==null?void 0:u[0];return A!=null&&A.place_id?`${_e}/proxy_image?place_id=${A.place_id}`:A!=null&&A.name?`${_e}/proxy_image?name=${encodeURIComponent(A.name)}`:`${_e}/proxy_image/default`},i=A=>{A.currentTarget.src=`${_e}/proxy_image/default`},c=t.days.reduce((A,d)=>{var f;return A+(((f=d.activities)==null?void 0:f.length)||0)},0);return r.jsxs("div",{className:"w-full md:w-auto md:min-w-[320px] md:max-w-[380px] bg-white dark:bg-slate-900/80 backdrop-blur-md border border-slate-200 dark:border-slate-700/50 rounded-2xl isolate transform-gpu flex-shrink-0 snap-start transition-all duration-300 ease-out cursor-pointer group hover:scale-[1.02] hover:shadow-xl",children:[r.jsxs("div",{className:"h-40 overflow-hidden relative rounded-t-2xl",children:[r.jsx("img",{src:a(),onError:i,alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"}),r.jsxs("div",{className:"absolute top-3 left-3 px-3 py-1 bg-sky-500/90 backdrop-blur-sm rounded-full text-white text-xs font-bold flex items-center gap-1.5",children:[r.jsx(Mn,{className:"w-3 h-3"}),t.duration]}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:r.jsx("h4",{className:"text-white font-bold text-lg leading-tight tracking-tight drop-shadow-md",children:t.title})})]}),r.jsxs("div",{className:"p-5 space-y-4",children:[r.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 leading-relaxed line-clamp-2",children:t.description}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.slice(0,4).map(A=>r.jsx("span",{className:"text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300 px-2.5 py-1 rounded-lg uppercase tracking-wider",children:A},A))}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 dark:text-slate-400",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Mn,{className:"w-3.5 h-3.5"}),t.days.length," "]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ra,{className:"w-3.5 h-3.5"}),c," "]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-100 dark:border-slate-700/50",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:""}),r.jsx("p",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400",children:t.total_budget_estimate})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:A=>{A.stopPropagation(),e(t)},className:"flex items-center gap-1.5 px-4 py-2 rounded-xl text-xs font-bold bg-sky-600 hover:bg-sky-500 dark:bg-indigo-600 text-white transition-all",children:[r.jsx(Pa,{className:"w-3.5 h-3.5"}),""]}),r.jsx("button",{onClick:A=>{A.stopPropagation(),s(t)},className:`p-2 rounded-xl transition-all ${n?"bg-emerald-50 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-400":"bg-slate-100 dark:bg-slate-800 text-slate-400 hover:text-sky-600"}`,children:n?r.jsx(sa,{className:"w-4 h-4"}):r.jsx(Zx,{className:"w-4 h-4"})})]})]})]})]})}),KL=({plans:t,savedPlans:e,onViewDetails:s,onSave:n})=>{const a=L.useRef(null),i=()=>{var A;return(A=a.current)==null?void 0:A.scrollBy({left:-380,behavior:"smooth"})},c=()=>{var A;return(A=a.current)==null?void 0:A.scrollBy({left:380,behavior:"smooth"})};return r.jsxs("div",{className:"relative group/list",children:[t.length>1&&r.jsxs("div",{className:"hidden md:block opacity-0 group-hover/list:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:i,className:"absolute left-0 top-1/2 -translate-y-1/2 -ml-5 z-20 p-2 bg-white dark:bg-slate-800 rounded-full shadow-lg",children:r.jsx(Lu,{className:"w-5 h-5"})}),r.jsx("button",{onClick:c,className:"absolute right-0 top-1/2 -translate-y-1/2 -mr-1 z-20 p-2 bg-white dark:bg-slate-800 rounded-full shadow-lg",children:r.jsx(ai,{className:"w-5 h-5"})})]}),r.jsx("div",{ref:a,className:"flex flex-row gap-4 overflow-x-auto pb-4 pl-1 [&::-webkit-scrollbar]:hidden scroll-smooth snap-x",children:t.map((A,d)=>r.jsx(zL,{plan:A,isSaved:e.includes(A.title),onViewDetails:s,onSave:n},`${A.title}-${d}`))})]})},VL=({conversations:t,activeConversationId:e,isLoading:s,isPremium:n,isOpen:a,onSelectConversation:i,onNewConversation:c,onDeleteConversation:A,onRenameConversation:d,onToggleSidebar:f,onUpgrade:u})=>{const[p,x]=L.useState(null),[m,j]=L.useState(""),[w,S]=L.useState(null),C=z=>{x(z.id),j(z.title),S(null)},F=()=>{p&&m.trim()&&d(p,m.trim()),x(null),j("")},U=z=>{const I=new Date(z),ee=Math.floor((new Date().getTime()-I.getTime())/(1e3*60*60*24));return ee===0?"Today":ee===1?"Yesterday":ee<7?`${ee} days ago`:I.toLocaleDateString()},_=t.reduce((z,I)=>{const H=U(I.updatedAt);return z[H]||(z[H]=[]),z[H].push(I),z},{});return r.jsxs(r.Fragment,{children:[a&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:f}),r.jsxs("div",{className:`
        fixed md:relative inset-y-0 left-0 z-50 
        w-72 bg-slate-50 dark:bg-slate-900 border-r border-slate-200 dark:border-slate-800
        flex flex-col transition-transform duration-300 ease-in-out
        ${a?"translate-x-0":"-translate-x-full md:translate-x-0 md:w-0 md:overflow-hidden"}
      `,children:[r.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-800",children:r.jsxs("button",{onClick:c,disabled:!n,className:`w-full flex items-center justify-center gap-2 px-4 py-3 bg-white dark:bg-slate-800 
                       border border-slate-200 dark:border-slate-700 rounded-xl
                       hover:bg-slate-50 dark:hover:bg-slate-700 transition-all
                       disabled:opacity-50 disabled:cursor-not-allowed`,children:[r.jsx(ln,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:"New Chat"})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:n?s?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(Xt,{className:"w-6 h-6 text-slate-400 animate-spin"})}):t.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-500",children:[r.jsx(Cu,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"No conversations yet"}),r.jsx("p",{className:"text-xs mt-1",children:"Start a new chat!"})]}):Object.entries(_).map(([z,I])=>r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:z}),I.map(H=>r.jsxs("div",{className:`
                      group relative flex items-center gap-2 px-3 py-2.5 rounded-lg cursor-pointer
                      transition-all duration-150
                      ${e===H.id?"bg-sky-100 dark:bg-sky-900/30 text-sky-700 dark:text-sky-300":"hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-300"}
                    `,onClick:()=>i(H.id),children:[r.jsx(Cu,{className:"w-4 h-4 flex-shrink-0 opacity-60"}),p===H.id?r.jsx("input",{type:"text",value:m,onChange:ee=>j(ee.target.value),onBlur:F,onKeyDown:ee=>ee.key==="Enter"&&F(),className:"flex-1 bg-white dark:bg-slate-700 px-2 py-1 rounded text-sm outline-none",autoFocus:!0,onClick:ee=>ee.stopPropagation()}):r.jsx("span",{className:"flex-1 truncate text-sm font-medium",children:H.title}),r.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:ee=>{ee.stopPropagation(),S(w===H.id?null:H.id)},className:"p-1 hover:bg-slate-200 dark:hover:bg-slate-700 rounded",children:r.jsx(oT,{className:"w-4 h-4"})}),w===H.id&&r.jsxs("div",{className:"absolute right-2 top-full mt-1 py-1 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 z-10 min-w-[120px]",children:[r.jsxs("button",{onClick:ee=>{ee.stopPropagation(),C(H)},className:"w-full px-3 py-2 text-left text-sm hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[r.jsx(rb,{className:"w-3.5 h-3.5"}),"Rename"]}),r.jsxs("button",{onClick:ee=>{ee.stopPropagation(),A(H.id),S(null)},className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[r.jsx(na,{className:"w-3.5 h-3.5"}),"Delete"]})]})]})]},H.id))]},z)):r.jsxs("div",{className:"p-4 text-center",children:[r.jsxs("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl mb-3",children:[r.jsx(wo,{className:"w-8 h-8 text-amber-500 mx-auto mb-2"}),r.jsx("p",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Upgrade to Premium"}),r.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:"Save & access your chat history"})]}),u&&r.jsx("button",{onClick:u,className:"w-full px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white text-sm font-bold rounded-xl transition-all",children:"Upgrade Now"})]})}),n&&r.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-800",children:r.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-amber-50 to-yellow-50 dark:from-amber-900/20 dark:to-yellow-900/20 rounded-lg",children:[r.jsx(wo,{className:"w-4 h-4 text-amber-500"}),r.jsx("span",{className:"text-xs font-bold text-amber-700 dark:text-amber-300",children:"Premium Active"})]})})]})]})},b5=({user:t})=>{var as,ps;const{conversationId:e}=Jx();za();const[s,n]=L.useState([]),[a,i]=L.useState(null),[c,A]=L.useState(!1),[d,f]=L.useState(!0),[u,p]=L.useState(!1),[x,m]=L.useState(!1),[j,w]=L.useState([]),[S,C]=L.useState(!1),[F,U]=L.useState(!1),[_,z]=L.useState(null),[I,H]=L.useState(!1),[ee,$]=L.useState(!1),[ce,Q]=L.useState([]),[q,te]=L.useState(""),[X,Ae]=L.useState([]),[W,se]=L.useState([]),[Z,re]=L.useState(null),[ve,ae]=L.useState(null),[R,P]=L.useState(Wm[0]),[V,K]=L.useState(!0),[ne,pe]=L.useState(0),[Ce,Ue]=L.useState(null),[Ne,Ie]=L.useState(null),[Pe,ze]=L.useState(null),[gt,ie]=L.useState(null),[Be,tt]=L.useState(!1),[Xe,et]=L.useState(!1),[Tt,Nt]=L.useState(null),Mt=L.useRef(null),Qt=L.useRef(null),pt=(t==null?void 0:t.isPremium)||((as=t==null?void 0:t.subscription)==null?void 0:as.status)==="active"||!1,rt=(ct,jt="info")=>{ae({message:ct,type:jt}),setTimeout(()=>ae(null),3e3)},Ut=ct=>ct.map((jt,Et)=>{const hs=()=>jt.id||jt.place_id?`${_e}/proxy_image?place_id=${jt.id||jt.place_id}`:jt.google_place_id?`${_e}/proxy_image?google_place_id=${encodeURIComponent(jt.google_place_id)}`:jt.photo_reference&&jt.photo_reference!=="N/A"?`${_e}/proxy_image?ref=${encodeURIComponent(jt.photo_reference)}`:jt.name?`${_e}/proxy_image?name=${encodeURIComponent(jt.name)}`:`${_e}/proxy_image/default`;return jt.itinerary&&Array.isArray(jt.itinerary)?{id:jt.id||`ai-plan-${Et}-${Date.now()}`,title:jt.title||"",description:jt.description||"",duration:jt.duration||"Custom Trip",priceEstimate:jt.priceEstimate||"N/A",tags:jt.tags||["Plan"],imageUrl:hs(),itinerary:jt.itinerary,reviews:[],fullAddress:jt.description,rating:5}:{id:`g-place-${Et}-${Date.now()}`,title:jt.name||"",description:`${jt.address||""} | : ${jt.rating||"N/A"}`,duration:"Place",priceEstimate:jt.price_level?"$".repeat(jt.price_level.length):"N/A",tags:jt.business_status==="OPERATIONAL"?["",""]:[""],imageUrl:hs(),itinerary:null,reviews:jt.review_list||[],fullAddress:jt.address,rating:jt.rating}}),rs=L.useCallback(async()=>{if(pt){A(!0);try{const ct=await fetch(`${_e}/api/conversations`,{credentials:"include"});if(ct.status===403)return;if(!ct.ok)throw new Error("Failed to fetch");const jt=await ct.json();n(jt.conversations||[])}catch(ct){console.error("Failed to fetch conversations:",ct)}finally{A(!1)}}},[pt]),Ot=async ct=>{try{const jt=await fetch(`${_e}/api/conversations/${ct}`,{credentials:"include"});if(!jt.ok)throw new Error("Failed to load");const hs=(await jt.json()).conversation;if(hs!=null&&hs.messages){const Ys=hs.messages.map(Cs=>{let Tr,qt,fr,Ls=Cs.content;if(Cs.content.startsWith("DAILY_PLAN::"))try{const yr=Cs.content.substring(12),Hr=JSON.parse(yr);qt=[Hr],Ls=` ${Hr.duration} `}catch(yr){console.error("Failed to parse daily plan from history:",yr)}else if(Cs.content.startsWith("FOOD_DATA::"))try{const yr=Cs.content.substring(11),Hr=JSON.parse(yr);Hr.recommendations&&(fr=Hr.recommendations,Ls=` ${Hr.recommendations.length} `)}catch(yr){console.error("Failed to parse food data from history:",yr)}else if(Cs.content.startsWith("POPUP_DATA::"))try{const yr=Cs.content.substring(12);Tr=Ut(JSON.parse(yr)),Ls=` ${Tr.length} `}catch{}else if(Cs.suggestions)try{Tr=Ut(Cs.suggestions)}catch{}else Cs.dailyPlans&&(qt=Cs.dailyPlans);return{id:`msg-${Cs.id}`,sender:Cs.role==="user"?"user":"ai",text:Ls,timestamp:new Date(Cs.createdAt),suggestions:Tr,dailyPlans:qt,foodRecommendations:fr}});Q(Ys),i(ct)}}catch(jt){console.error("Failed to load conversation:",jt),rt("Failed to load conversation","error")}},Dt=()=>{i(null),Q([])},Oe=async ct=>{if(confirm("Delete this conversation?"))try{if(!(await fetch(`${_e}/api/conversations/${ct}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to delete");n(Et=>Et.filter(hs=>hs.id!==ct)),a===ct&&(i(null),Q([])),rt("Conversation deleted","success")}catch{rt("Failed to delete","error")}},Ge=async(ct,jt)=>{try{if(!(await fetch(`${_e}/api/conversations/${ct}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:jt})})).ok)throw new Error("Failed to rename");n(hs=>hs.map(Ys=>Ys.id===ct?{...Ys,title:jt}:Ys))}catch{rt("Failed to rename","error")}},ft=async()=>{if(!(!a||!pt)){U(!0);try{const ct=await fetch(`${_e}/api/conversations/${a}/share`,{method:"POST",credentials:"include"});if(!ct.ok)throw new Error("Failed to share");const jt=await ct.json(),Et=`${window.location.origin}${jt.shareUrl}`;z(Et),H(!0)}catch{rt("Failed to share conversation","error")}finally{U(!1)}}},ht=async()=>{if(_)try{await navigator.clipboard.writeText(_),$(!0),rt("Link copied to clipboard!","success"),setTimeout(()=>$(!1),2e3)}catch{rt("Failed to copy link","error")}},vt=()=>{H(!1),z(null),$(!1)},kt=async ct=>{p(!1);const jt=`I need a daily plan with these preferences:
- Mood: ${ct.mood}
- Companions: ${ct.companions}
- Budget: ${ct.budget}
- Transport: ${ct.transport}
- Dietary: ${ct.dietary.join(", ")||"None"}

Please suggest a destination or ask for one if needed.`;Dt(),te(jt),te(`Plan a trip based on my preferences:
Mood: ${ct.mood}, Budget: ${ct.budget}, Group: ${ct.companions}...

(Type your destination here)`),Qt.current&&Qt.current.focus()},Vt=async ct=>{m(!1),C(!0),w([]);const jt={id:`food-search-${Date.now()}`,sender:"ai",text:` Finding the best ${ct.mealType} spots for you based on your preferences...`,timestamp:new Date};Q(Et=>[...Et,jt]);try{const hs=await(await fetch(`${_e}/api/food/recommendations`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({preferences:ct,coordinates:Pe})})).json();if(hs.success&&hs.recommendations){w(hs.recommendations);const Ys={id:`food-result-${Date.now()}`,sender:"ai",text:`Found ${hs.recommendations.length} great options for you! Check them out below:`,timestamp:new Date,foodRecommendations:hs.recommendations};Q(Cs=>[...Cs.filter(Tr=>Tr.id!==jt.id),Ys])}else throw new Error(hs.error||"Failed to get recommendations")}catch(Et){console.error("Food recommendations error:",Et),Q(hs=>hs.map(Ys=>Ys.id===jt.id?{...Ys,text:""}:Ys))}finally{C(!1)}},zt=ct=>{rt(`Added "${ct.name}" to your plans!`,"success")},Bs=async()=>{if(!q.trim()||Be)return;const ct={id:Date.now().toString(),sender:"user",text:q,timestamp:new Date};Q(Et=>[...Et,ct]);const jt=q;te(""),tt(!0);try{const Et=ce.map(Ls=>({role:Ls.sender==="user"?"user":"model",parts:[Ls.text]})),hs=await fetch(`${_e}/chat_message`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({message:jt,conversationId:a,history:Et,coordinates:Pe})});if(!hs.ok){const Ls=await hs.json();throw new Error(Ls.error||`HTTP error: ${hs.status}`)}const Ys=await hs.json();let Cs=Ys.reply||"AI ",Tr,qt;if(Cs.startsWith("DAILY_PLAN::"))try{const Ls=JSON.parse(Cs.substring(12));qt=[Ls],Cs=` ${Ls.duration} `}catch(Ls){console.error("Failed to parse daily plan:",Ls),Cs=""}else if(Cs.startsWith("POPUP_DATA::"))try{const Ls=JSON.parse(Cs.substring(12));Tr=Ut(Ls),Cs=` ${Tr.length} `}catch{Cs=""}const fr={id:(Date.now()+1).toString(),sender:"ai",text:Cs,timestamp:new Date,suggestions:Tr,dailyPlans:qt};Ys.conversationId&&!a&&(i(Ys.conversationId),rs()),pt?(tt(!1),Q(Ls=>[...Ls,fr])):(Nt(fr),et(!0))}catch(Et){console.error("Send message error:",Et),tt(!1),Q(hs=>[...hs,{id:(Date.now()+1).toString(),sender:"ai",text:`: ${Et.message||Et}`,timestamp:new Date}])}},Re=()=>{et(!1),tt(!1),Tt&&(Q(ct=>[...ct,Tt]),Nt(null))},We=ct=>{ct.key==="Enter"&&!ct.shiftKey&&(ct.preventDefault(),Bs())},$t=L.useCallback(async ct=>{const jt=ct.id,Et=X.includes(jt);if(Ae(hs=>Et?hs.filter(Ys=>Ys!==jt):[...hs,jt]),!Et)try{if(!(await fetch(`${_e}/api/trips/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ct),credentials:"include"})).ok)throw new Error("Failed to save trip");rt("Trip saved!","success")}catch{Ae(Ys=>Ys.filter(Cs=>Cs!==jt)),rt("Failed to save trip","error")}},[X]),wt=ct=>{Ue(ct)},st=ct=>{ie(ct)},Ct=L.useCallback(async ct=>{const jt=ct.title,Et=W.includes(jt);if(se(hs=>Et?hs.filter(Ys=>Ys!==jt):[...hs,jt]),!Et)try{if(!(await fetch(`${_e}/api/trips/save_daily_plan`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ct),credentials:"include"})).ok)throw new Error("Failed to save");rt("!","success")}catch{se(Ys=>Ys.filter(Cs=>Cs!==jt)),rt("","error")}},[W]);return L.useEffect(()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(ct=>{ze({latitude:ct.coords.latitude,longitude:ct.coords.longitude})},ct=>console.warn("GPS Error:",ct),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},[]),L.useEffect(()=>{pt&&rs()},[pt,rs]),L.useEffect(()=>{if(e){const ct=parseInt(e,10);!isNaN(ct)&&ct!==a&&Ot(ct)}else pt&&s.length>0&&!a&&Ot(s[0].id)},[pt,s,e]),L.useEffect(()=>{const ct=setTimeout(()=>{var jt;(jt=Mt.current)==null||jt.scrollIntoView({behavior:"smooth"})},100);return()=>clearTimeout(ct)},[ce,Be]),L.useEffect(()=>{Qt.current&&(Qt.current.style.height="56px",Qt.current.style.height=Math.min(Qt.current.scrollHeight,200)+"px")},[q]),L.useEffect(()=>{const ct=setInterval(()=>{K(!1),setTimeout(()=>{P(jt=>{const Et=Wm.indexOf(jt);return Wm[(Et+1)%Wm.length]}),K(!0)},300)},4e3);return()=>clearInterval(ct)},[]),r.jsxs("div",{className:"flex h-full bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900",children:[r.jsx(VL,{conversations:s,activeConversationId:a,isLoading:c,isPremium:pt,isOpen:d,onSelectConversation:Ot,onNewConversation:Dt,onDeleteConversation:Oe,onRenameConversation:Ge,onToggleSidebar:()=>f(!d),onUpgrade:()=>window.location.href="/pricing"}),r.jsxs("div",{className:"flex-1 flex flex-col relative overflow-hidden",children:[ve&&r.jsxs("div",{className:`absolute top-4 right-4 z-50 px-4 py-3 rounded-xl shadow-lg flex items-center gap-2 ${ve.type==="success"?"bg-emerald-500 text-white":ve.type==="error"?"bg-red-500 text-white":"bg-slate-800 text-white"}`,children:[ve.type==="success"&&r.jsx(sa,{className:"w-4 h-4"}),ve.type==="error"&&r.jsx(ga,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:ve.message})]}),r.jsxs("div",{className:"px-4 py-3 border-b border-slate-200 dark:border-slate-800 bg-white/50 dark:bg-slate-900/50 backdrop-blur-sm flex items-center gap-3",children:[r.jsx("button",{onClick:()=>f(!d),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:d?r.jsx(kU,{className:"w-5 h-5"}):r.jsx(SU,{className:"w-5 h-5"})}),pt&&r.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-gradient-to-r from-amber-100 to-yellow-100 dark:from-amber-900/30 dark:to-yellow-900/30 rounded-full",children:[r.jsx(wo,{className:"w-3.5 h-3.5 text-amber-600"}),r.jsx("span",{className:"text-xs font-bold text-amber-700 dark:text-amber-300",children:"PRO"})]}),a&&r.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 truncate flex-1",children:((ps=s.find(ct=>ct.id===a))==null?void 0:ps.title)||"Chat"}),a&&pt&&ce.length>0&&r.jsxs("button",{onClick:ft,disabled:F,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors disabled:opacity-50",title:"Share conversation",children:[F?r.jsx(Xt,{className:"w-4 h-4 animate-spin"}):r.jsx(Yg,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Share"})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto px-4 sm:px-8 py-8",children:[r.jsxs("div",{className:"flex flex-col space-y-8",children:[ce.length===0&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center space-y-6",children:[r.jsx("div",{className:"w-20 h-20 rounded-3xl bg-slate-100 dark:bg-slate-900 flex items-center justify-center border border-slate-200 dark:border-slate-800 shadow-sm mb-4",children:r.jsx(qg,{className:"w-10 h-10 text-sky-500 dark:text-indigo-400"})}),r.jsxs("div",{className:"space-y-2 max-w-md",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Where to next?"}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"I can help you plan the perfect trip based on your budget, mood, and preferences."})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-6 py-3 bg-sky-500 hover:bg-sky-600 text-white font-bold rounded-full shadow-lg shadow-sky-500/20 transition-all hover:scale-105 active:scale-95",children:[r.jsx(Qn,{className:"w-4 h-4"}),"Plan a Trip"]}),r.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-bold rounded-full shadow-lg shadow-orange-500/20 transition-all hover:scale-105 active:scale-95",children:[r.jsx(No,{className:"w-4 h-4"}),"Find Food"]})]})]}),ce.map(ct=>{const jt=ct.sender==="user";return r.jsxs("div",{className:`flex w-full flex-col ${jt?"items-end":"items-start"}`,children:[r.jsxs("div",{className:`flex gap-4 max-w-[90%] md:max-w-[70%] ${jt?"flex-row-reverse":"flex-row"}`,children:[r.jsx("div",{className:"flex-shrink-0 mt-2",children:jt?r.jsx("img",{src:t.avatarUrl,alt:"User",className:"w-10 h-10 rounded-full border-2 border-white dark:border-slate-800 shadow-sm object-cover"}):r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-sky-500 to-blue-600 flex items-center justify-center shadow-md",children:r.jsx(If,{className:"w-5 h-5 text-white"})})}),r.jsxs("div",{className:`flex flex-col gap-1 p-5 rounded-[1.5rem] shadow-sm ${jt?"bg-sky-600 dark:bg-indigo-600 text-white rounded-tr-sm":"bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 border border-slate-100 dark:border-slate-800 rounded-tl-sm"}`,children:[r.jsx("p",{className:"text-[15px] leading-relaxed whitespace-pre-wrap font-medium",children:ct.text}),r.jsx("span",{className:`text-[10px] font-bold ${jt?"text-sky-100":"text-slate-400"} self-end mt-1`,children:ct.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),ct.suggestions&&ct.suggestions.length>0&&r.jsx("div",{className:"mt-8 ml-0 md:ml-14 w-full md:w-auto md:max-w-[95%]",children:r.jsx(PL,{suggestions:ct.suggestions,savedSuggestions:X,onViewDetails:wt,onToggleSave:$t})}),ct.dailyPlans&&ct.dailyPlans.length>0&&r.jsx("div",{className:"mt-8 ml-0 md:ml-14 w-full md:w-auto md:max-w-[95%]",children:r.jsx(KL,{plans:ct.dailyPlans,savedPlans:W,onViewDetails:st,onSave:Ct})}),ct.foodRecommendations&&ct.foodRecommendations.length>0&&r.jsx("div",{className:"mt-8 ml-0 md:ml-14 w-full md:w-auto md:max-w-[95%]",children:r.jsx(LL,{places:ct.foodRecommendations,onAddToItinerary:zt,title:"Recommended for You"})})]},ct.id)}),Be&&r.jsx("div",{className:"flex w-full flex-col items-start",children:r.jsxs("div",{className:"flex gap-4 max-w-[90%] md:max-w-[70%]",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-sky-500 to-blue-600 flex items-center justify-center shadow-md animate-pulse",children:r.jsx(If,{className:"w-5 h-5 text-white animate-spin"})}),r.jsx("div",{className:"flex flex-col gap-1 p-5 rounded-[1.5rem] shadow-sm bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-tl-sm",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-2 h-2 bg-sky-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("div",{className:"w-2 h-2 bg-sky-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("div",{className:"w-2 h-2 bg-sky-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}}),r.jsx("span",{className:"text-sm text-slate-500 ml-2",children:"AI is thinking..."})]})})]})})]}),r.jsx("div",{ref:Mt})]}),r.jsx("div",{className:"px-4 md:px-6 pb-6 pt-4",children:r.jsxs("div",{className:"relative w-full max-w-3xl mx-auto bg-white dark:bg-slate-900 rounded-[2rem] shadow-2xl border border-slate-200 dark:border-slate-800 flex items-end",children:[r.jsxs("div",{className:"absolute left-4 bottom-[8px] flex gap-1 z-10",children:[r.jsx("button",{className:"p-2.5 text-slate-400 hover:text-sky-600 transition-all rounded-xl",children:r.jsx(TU,{className:"w-5 h-5"})}),r.jsx("button",{className:"p-2.5 text-slate-400 hover:text-sky-600 transition-all rounded-xl",children:r.jsx(q4,{className:"w-5 h-5"})})]}),!q&&r.jsx("div",{className:`absolute left-28 right-20 top-[18px] pointer-events-none text-slate-400 font-medium text-base transition-all duration-500 truncate ${V?"opacity-100":"opacity-0"}`,children:R}),r.jsx("textarea",{ref:Qt,value:q,onChange:ct=>te(ct.target.value),onKeyDown:We,className:"w-full bg-transparent text-slate-900 dark:text-slate-100 font-medium rounded-[2rem] pt-[18px] pb-[14px] pl-28 pr-16 focus:outline-none resize-none h-auto overflow-hidden leading-normal",style:{minHeight:"56px"}}),r.jsx("div",{className:"absolute right-5 bottom-[8px]",children:r.jsx("button",{onClick:Bs,disabled:!q.trim()||Be,className:"p-2.5 bg-sky-600 hover:bg-sky-500 dark:bg-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-2xl transition-all",children:r.jsx(vu,{className:"w-5 h-4"})})})]})}),r.jsx(vL,{isOpen:Xe,onClose:Re}),r.jsx(kL,{isOpen:u,onClose:()=>p(!1),onComplete:kt}),r.jsx(TL,{isOpen:x,onClose:()=>m(!1),onComplete:Vt,userLocation:Pe}),Ce&&r.jsx(RL,{suggestion:Ce,onClose:()=>Ue(null),onSave:$t,onUpdate:Ue,isSaved:X.includes(Ce.id)}),gt&&r.jsx(DL,{plan:gt,onClose:()=>ie(null),onSave:async ct=>{try{(await fetch(`${_e}/api/trips/save_daily_plan`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(ct)})).ok?(se(Et=>Et.includes(ct.title)?Et:[...Et,ct.title]),rt("!","success"),ie(null)):rt("","error")}catch{rt("","error")}},onEditActivity:(ct,jt,Et)=>{console.log("Edit activity:",ct,jt,Et)}}),I&&_&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(Yg,{className:"w-5 h-5 text-sky-500"}),"Share Conversation"]}),r.jsx("button",{onClick:vt,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:r.jsx(As,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Anyone with this link can view this conversation."}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-100 dark:bg-slate-800 rounded-xl",children:[r.jsx(tb,{className:"w-4 h-4 text-slate-400 flex-shrink-0"}),r.jsx("input",{type:"text",value:_,readOnly:!0,className:"flex-1 bg-transparent text-sm text-slate-700 dark:text-slate-300 outline-none truncate"}),r.jsx("button",{onClick:ht,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${ee?"bg-emerald-500 text-white":"bg-sky-500 hover:bg-sky-600 text-white"}`,children:ee?r.jsxs(r.Fragment,{children:[r.jsx(ea,{className:"w-4 h-4"}),"Copied"]}):r.jsxs(r.Fragment,{children:[r.jsx(kv,{className:"w-4 h-4"}),"Copy"]})})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:r.jsx("button",{onClick:vt,className:"w-full py-2.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-colors",children:"Done"})})]})})]})]})},Zg=0,$L=24,q0=Array.from({length:$L-Zg},(t,e)=>e+Zg),v5=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],GL=["January","February","March","April","May","June","July","August","September","October","November","December"],qL=()=>{const[t,e]=L.useState(new Date),[s,n]=L.useState("week"),[a,i]=L.useState([]),[c,A]=L.useState(!1),[d,f]=L.useState(!1),[u,p]=L.useState(!1),[x,m]=L.useState(!1),[j,w]=L.useState(null),[S,C]=L.useState(null),[F,U]=L.useState({title:"",dateStr:"",startTime:"09:00",endTime:"10:00",type:"activity"}),_=(re,ve="success")=>{w({message:re,type:ve}),setTimeout(()=>w(null),3e3)},z=async()=>{try{const re=await fetch(`${_e}/api/calendar/events`,{credentials:"include"});if(re.ok){const ae=(await re.json()).map(R=>{const P=new Date(R.startTime),V=new Date(R.endTime),K=ne=>ne.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1});return{id:R.id,title:R.title,date:P,startTime:K(P),endTime:K(V),fullStart:R.startTime,fullEnd:R.endTime,type:"activity",color:"bg-sky-500 border-sky-600"}});i(ae)}}catch(re){console.error("Failed to fetch events:",re),_("Failed to load events","error")}};L.useEffect(()=>{z()},[]);const I=async()=>{A(!0),f(!1);try{const re=await fetch(`${_e}/api/calendar/sync`,{method:"POST",credentials:"include"});if(re.status===401){window.location.href=`${_e}/authorize`;return}re.ok?(f(!0),_("Calendar synced successfully!"),await z(),setTimeout(()=>f(!1),3e3)):_("Sync failed","error")}catch(re){console.error("Sync error:",re),_("Sync error occurred","error")}finally{A(!1)}},H=async()=>{if(!F.title||!F.dateStr)return;const re=new Date(`${F.dateStr}T${F.startTime}:00`),ve=new Date(`${F.dateStr}T${F.endTime}:00`);try{(await fetch(`${_e}/api/calendar/add_manual`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:F.title,startTime:re.toISOString(),endTime:ve.toISOString()})})).ok?(p(!1),await z(),U({title:"",dateStr:"",startTime:"09:00",endTime:"10:00",type:"activity"}),_("Event added successfully!")):_("Failed to add event. Check network or auth.","error")}catch(ae){console.error(ae),_("An error occurred while adding event.","error")}},ee=async()=>{if(S&&window.confirm("Are you sure you want to delete this event?"))try{(await fetch(`${_e}/api/calendar/delete/${S.id}`,{method:"DELETE",credentials:"include"})).ok?(m(!1),C(null),await z(),_("Event deleted successfully!")):_("Failed to delete event.","error")}catch(re){console.error(re),_("An error occurred while deleting.","error")}},$=(re,ve)=>{const ae=re.getFullYear(),R=String(re.getMonth()+1).padStart(2,"0"),P=String(re.getDate()).padStart(2,"0"),V=`${ae}-${R}-${P}`;let K="09:00",ne="10:00";ve!==void 0&&(K=`${String(ve).padStart(2,"0")}:00`,ne=`${String(ve+1).padStart(2,"0")}:00`),U({...F,dateStr:V,startTime:K,endTime:ne,title:""}),p(!0)},ce=(re,ve)=>{re.stopPropagation(),C(ve),m(!0)},Q=()=>{const re=new Date(t);s==="month"?re.setMonth(re.getMonth()-1):s==="week"?re.setDate(re.getDate()-7):re.setDate(re.getDate()-1),e(re)},q=()=>{const re=new Date(t);s==="month"?re.setMonth(re.getMonth()+1):s==="week"?re.setDate(re.getDate()+7):re.setDate(re.getDate()+1),e(re)},te=re=>{const ve=re.getFullYear(),ae=re.getMonth(),R=new Date(ve,ae,1).getDay(),P=new Date(ve,ae+1,0).getDate(),V=R===0?6:R-1,K=[];for(let ne=0;ne<V;ne++)K.push(null);for(let ne=1;ne<=P;ne++)K.push(new Date(ve,ae,ne));return K},X=re=>{const ve=te(re).length;return Math.ceil(ve/7)},Ae=re=>{const ve=new Date(re),ae=ve.getDay(),R=ve.getDate()-ae+(ae===0?-6:1);ve.setDate(R);const P=[];for(let V=0;V<7;V++){const K=new Date(ve);K.setDate(ve.getDate()+V),P.push(K)}return P},W=re=>{if(re.fullStart){const R=new Date(re.fullStart);return(R.getHours()*60+R.getMinutes()-Zg*60)/60*80+2}const ve=parseInt(re.startTime.split(":")[0]),ae=parseInt(re.startTime.split(":")[1])||0;return(ve-Zg+ae/60)*80+2},se=re=>{if(re.fullStart&&re.fullEnd){const ve=new Date(re.fullStart),R=(new Date(re.fullEnd).getTime()-ve.getTime())/(1e3*60);return Math.max(R/60*80-4,20)}return 76},Z=(re,ve)=>{if(re.fullStart&&re.fullEnd){const R=new Date(re.fullStart),P=new Date(re.fullEnd),V=ve,K=ve+1,ne=R.getHours()+R.getMinutes()/60,pe=P.getHours()+P.getMinutes()/60;return ne<K&&pe>V}return parseInt(re.startTime.split(":")[0])===ve};return r.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] w-full p-6 overflow-hidden animate-fade-in-up relative",children:[j&&r.jsxs("div",{className:`fixed bottom-6 right-6 z-[60] flex items-center gap-3 px-4 py-3 rounded-xl shadow-2xl animate-fade-in-up transition-all ${j.type==="error"?"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/30 dark:text-red-300 dark:border-red-800":"bg-emerald-50 text-emerald-700 border border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-800"}`,children:[j.type==="error"?r.jsx(ur,{className:"w-5 h-5"}):r.jsx(ea,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:j.message}),r.jsx("button",{onClick:()=>w(null),className:"ml-2 hover:opacity-70",children:r.jsx(As,{className:"w-4 h-4"})})]}),u&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/30 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-[2rem] p-8 shadow-2xl border border-white/20 dark:border-slate-700 animate-scale-in",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Add New Event"}),r.jsx("button",{onClick:()=>p(!1),children:r.jsx(As,{className:"w-5 h-5 text-slate-400 hover:text-slate-900"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 block",children:"Title"}),r.jsx("input",{type:"text",className:"w-full bg-slate-50 dark:bg-slate-800 rounded-xl p-3 outline-none font-medium dark:text-white",autoFocus:!0,placeholder:"e.g. Meeting",value:F.title,onChange:re=>U({...F,title:re.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 block",children:"Date"}),r.jsx("input",{type:"date",className:"w-full bg-slate-50 dark:bg-slate-800 rounded-xl p-3 outline-none font-medium dark:text-white",value:F.dateStr,onChange:re=>U({...F,dateStr:re.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 block",children:"Start"}),r.jsx("input",{type:"time",className:"w-full bg-slate-50 dark:bg-slate-800 rounded-xl p-3 outline-none font-medium dark:text-white",value:F.startTime,onChange:re=>U({...F,startTime:re.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 block",children:"End"}),r.jsx("input",{type:"time",className:"w-full bg-slate-50 dark:bg-slate-800 rounded-xl p-3 outline-none font-medium dark:text-white",value:F.endTime,onChange:re=>U({...F,endTime:re.target.value})})]})]}),r.jsx("button",{onClick:H,className:"w-full py-3 bg-sky-600 text-white font-bold rounded-xl hover:bg-sky-500 shadow-lg mt-2",children:"Save Event"})]})]})}),x&&S&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/30 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-[2rem] p-8 shadow-2xl border border-white/20 dark:border-slate-700 animate-scale-in",children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white break-words w-10/12",children:S.title}),r.jsx("button",{onClick:()=>m(!1),children:r.jsx(As,{className:"w-5 h-5 text-slate-400 hover:text-slate-900"})})]}),r.jsxs("div",{className:"space-y-6 mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 text-slate-600 dark:text-slate-300",children:[r.jsx(Mn,{className:"w-5 h-5 text-sky-500"}),r.jsx("span",{className:"font-medium",children:S.date.toDateString()})]}),r.jsxs("div",{className:"flex items-center gap-3 text-slate-600 dark:text-slate-300",children:[r.jsx(on,{className:"w-5 h-5 text-sky-500"}),r.jsxs("span",{className:"font-medium",children:[S.startTime," - ",S.endTime]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:ee,className:"flex-1 py-3 bg-red-50 text-red-600 font-bold rounded-xl hover:bg-red-100 transition-colors flex items-center justify-center gap-2",children:[r.jsx(na,{className:"w-4 h-4"}),"Delete"]}),r.jsx("button",{onClick:()=>m(!1),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-white font-bold rounded-xl hover:bg-slate-200 transition-colors",children:"Close"})]})]})}),r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white w-64",children:[GL[t.getMonth()]," ",t.getFullYear()]}),r.jsxs("div",{className:"flex bg-white dark:bg-slate-800 rounded-lg p-1 border border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:[r.jsx("button",{onClick:Q,className:"p-1 hover:bg-slate-50 dark:hover:bg-slate-700 rounded text-slate-500 dark:text-slate-400",children:r.jsx(Lu,{className:"w-5 h-5"})}),r.jsx("button",{onClick:q,className:"p-1 hover:bg-slate-50 dark:hover:bg-slate-700 rounded text-slate-500 dark:text-slate-400",children:r.jsx(ai,{className:"w-5 h-5"})})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs("button",{onClick:I,className:`flex items-center gap-2 px-3 py-2 bg-white text-slate-700 dark:text-slate-900 rounded-lg text-sm font-semibold hover:bg-slate-50 transition-colors border border-slate-200 shadow-sm ${d?"bg-emerald-50 text-emerald-600 border-emerald-200":""}`,children:[c?r.jsx(yl,{className:"w-4 h-4 animate-spin text-blue-500"}):d?r.jsx(ea,{className:"w-4 h-4 text-emerald-500"}):r.jsx("span",{className:"flex items-center gap-2",children:r.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500 text-white flex items-center justify-center text-[10px] font-bold",children:"G"})}),d?"Synced!":"Sync"]}),r.jsx("div",{className:"flex bg-white dark:bg-slate-800 rounded-lg p-1 border border-slate-200 dark:border-slate-700 shadow-sm dark:shadow-none",children:["month","week","day"].map(re=>r.jsx("button",{onClick:()=>n(re),className:`px-3 py-1.5 text-sm font-medium rounded capitalize transition-all ${s===re?"bg-sky-600 dark:bg-indigo-600 text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:re},re))}),r.jsxs("button",{onClick:()=>$(new Date),className:"flex items-center gap-2 px-4 py-2 bg-sky-600 hover:bg-sky-500 text-white text-sm font-medium rounded-lg shadow-lg",children:[r.jsx(ln,{className:"w-4 h-4"})," Add"]})]})]}),r.jsxs("div",{className:"flex-1 bg-white dark:bg-slate-800/20 border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden flex flex-col shadow-sm dark:shadow-none relative",children:[s==="month"&&r.jsxs("div",{className:"flex-1 grid grid-cols-7 grid-rows-[auto_1fr]",children:[v5.map(re=>r.jsx("div",{className:"p-4 text-center border-b border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/50",children:r.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase",children:re})},re)),r.jsx("div",{className:"grid grid-cols-7 col-span-7",style:{gridTemplateRows:`repeat(${X(t)}, 1fr)`},children:te(t).map((re,ve)=>{const ae=re?a.filter(R=>R.date.getDate()===re.getDate()&&R.date.getMonth()===re.getMonth()):[];return r.jsx("div",{onClick:()=>re&&$(re),className:`border-r border-b border-slate-100 dark:border-slate-800/50 p-2 min-h-[100px] hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors cursor-pointer ${re?"":"bg-slate-50/50 dark:bg-slate-900/50"}`,children:re&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:`text-sm font-medium ${re.getDate()===new Date().getDate()&&re.getMonth()===new Date().getMonth()?"bg-sky-600 text-white w-7 h-7 flex items-center justify-center rounded-full":"text-slate-700 dark:text-slate-300"}`,children:re.getDate()}),r.jsx("div",{className:"mt-2 space-y-1",children:ae.map(R=>r.jsx("div",{onClick:P=>ce(P,R),className:`text-[10px] px-1.5 py-0.5 rounded truncate text-white ${R.color.split(" ")[0]} cursor-pointer hover:brightness-110 shadow-sm`,children:R.title},R.id))})]})},ve)})})]}),s==="week"&&r.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[r.jsxs("div",{className:"grid grid-cols-8 border-b border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/50 flex-shrink-0 sticky top-0 z-20",children:[r.jsx("div",{className:"p-4 border-r border-slate-200 dark:border-slate-800 w-20"}),Ae(t).map((re,ve)=>r.jsxs("div",{className:`p-4 text-center border-r border-slate-200 dark:border-slate-800 last:border-r-0 ${re.getDate()===new Date().getDate()&&re.getMonth()===new Date().getMonth()?"bg-sky-50 dark:bg-indigo-900/20":""}`,children:[r.jsx("span",{className:"text-xs font-semibold text-slate-500 uppercase block mb-1",children:v5[ve]}),r.jsx("div",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium ${re.getDate()===new Date().getDate()&&re.getMonth()===new Date().getMonth()?"bg-sky-600 dark:bg-indigo-600 text-white":"text-slate-700 dark:text-slate-300"}`,children:re.getDate()})]},ve))]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:r.jsxs("div",{className:"grid grid-cols-8 relative",style:{minHeight:`${q0.length*80}px`},children:[r.jsx("div",{className:"border-r border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/30 w-20 flex-shrink-0",children:q0.map(re=>r.jsx("div",{className:"h-20 border-b border-slate-100 dark:border-slate-800/50 text-xs text-slate-400 dark:text-slate-500 p-2 text-right relative",children:r.jsxs("span",{className:"-top-3 relative block",children:[String(re).padStart(2,"0"),":00"]})},re))}),Ae(t).map((re,ve)=>{const ae=a.filter(R=>R.date.getDate()===re.getDate()&&R.date.getMonth()===re.getMonth());return r.jsxs("div",{className:"border-r border-slate-100 dark:border-slate-800/50 last:border-r-0 relative",children:[q0.map(R=>r.jsx("div",{onClick:()=>$(re,R),className:"h-20 border-b border-slate-100 dark:border-slate-800/50 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/20"},R)),ae.map(R=>{const P=W(R),V=se(R);return P<0||P>q0.length*80?null:r.jsxs("div",{onClick:K=>ce(K,R),className:`absolute left-1 right-1 p-2 rounded border-l-4 text-white text-xs cursor-pointer hover:brightness-110 transition-all shadow-md z-10 ${R.color}`,style:{top:`${P}px`,height:`${V}px`,minHeight:"20px"},children:[r.jsx("div",{className:"font-bold truncate",children:R.title}),r.jsxs("div",{className:"opacity-80",children:[R.startTime," - ",R.endTime]})]},R.id)})]},ve)})]})})]}),s==="day"&&r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4",children:r.jsx("div",{className:"max-w-3xl mx-auto space-y-4",children:q0.map(re=>{const ve=a.filter(ae=>ae.date.getDate()===t.getDate()&&ae.date.getMonth()===t.getMonth()&&Z(ae,re));return r.jsxs("div",{className:"flex gap-4 border-b border-slate-100 dark:border-slate-800 pb-4",children:[r.jsxs("div",{className:"w-16 text-right text-sm text-slate-400 pt-2",children:[String(re).padStart(2,"0"),":00"]}),r.jsx("div",{className:"flex-1 min-h-[60px] relative",children:ve.length>0?ve.map(ae=>r.jsx("div",{onClick:R=>ce(R,ae),className:`p-3 rounded-xl mb-2 border-l-4 ${ae.color} bg-opacity-10 dark:bg-opacity-20 flex justify-between items-center bg-slate-50 dark:bg-slate-800 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors`,children:r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:ae.title}),r.jsxs("p",{className:"text-xs text-slate-500",children:[ae.startTime," - ",ae.endTime]})]})},ae.id)):r.jsx("div",{onClick:()=>$(t,re),className:"border-b border-dashed border-slate-200 dark:border-slate-800/50 h-full w-full cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/20"})})]},re)})})})]})]})},YL=t=>{if(!t)return"";try{const[e,s]=t.split(":"),n=parseInt(e),a=n>=12?"PM":"AM";return`${n%12||12}:${s} ${a}`}catch{return t}},JL=(t,e)=>{if(!t)return null;try{const s=new Date(t);return s.setDate(s.getDate()+(e-1)),s.toLocaleDateString("en-US",{month:"short",day:"numeric",weekday:"short"})}catch{return null}},WL=(t="",e="")=>{const s=(t+e).toLowerCase();return["","","","","food","restaurant","dinner","lunch","breakfast","buffet"].some(n=>s.includes(n))?{type:"Food & Dining",icon:No,color:"text-orange-600 dark:text-orange-400",bg:"bg-orange-50 dark:bg-orange-500/10",border:"border-orange-100 dark:border-orange-500/20",iconBg:"bg-orange-100 dark:bg-orange-500/20"}:["","","","visit","tour","sightseeing","park","museum","attraction","ticket"].some(n=>s.includes(n))?{type:"Attraction",icon:VT,color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-500/10",border:"border-blue-100 dark:border-blue-500/20",iconBg:"bg-blue-100 dark:bg-blue-500/20"}:["","","","mall","shop","store","market","souvenir"].some(n=>s.includes(n))?{type:"Shopping",icon:ab,color:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-500/10",border:"border-emerald-100 dark:border-emerald-500/20",iconBg:"bg-emerald-100 dark:bg-emerald-500/20"}:{type:e||"Activity",icon:ra,color:"text-slate-600 dark:text-slate-400",bg:"bg-slate-50 dark:bg-slate-800/50",border:"border-slate-200 dark:border-slate-700",iconBg:"bg-slate-200 dark:bg-slate-700"}},XL=()=>{const t=za(),[e,s]=L.useState(null),[n,a]=L.useState(!1),[i,c]=L.useState(!1),[A,d]=L.useState([]),[f,u]=L.useState(!0),[p,x]=L.useState(!1),[m,j]=L.useState(!1),[w,S]=L.useState(null),[C,F]=L.useState(!1),[U,_]=L.useState(null),[z,I]=L.useState(""),[H,ee]=L.useState(null),[$,ce]=L.useState(null),[Q,q]=L.useState(!1),[te,X]=L.useState({show:!1,message:"",type:"success"}),[Ae,W]=L.useState({show:!1,title:"",message:"",onConfirm:()=>{}}),se=A.length>0?A[0]:null,Z=(Ne,Ie="success")=>{X({show:!0,message:Ne,type:Ie}),setTimeout(()=>{X(Pe=>({...Pe,show:!1}))},3e3)},re=async()=>{u(!0);try{const Ne=await fetch(`${_e}/api/trips/list`,{credentials:"include"});if(Ne.ok){const Pe=(await Ne.json()).map(ze=>({id:ze.id,destination:ze.destination||ze.title,title:ze.title,dates:ze.dates||`${ze.start_date||""} - ${ze.end_date||""}`,status:ze.status||"planning",weather:"25C",imageUrl:ze.imageUrl||"https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?auto=format&fit=crop&q=80&w=400",flight:ze.flight||null,hotel:ze.hotel||null,total_expenses:ze.total_expenses||0}));d(Pe)}else console.error("Failed to fetch trips")}catch(Ne){console.error("Error fetching trips:",Ne)}finally{u(!1)}},ve=async Ne=>{try{const Ie=await fetch(`${_e}/api/trips/${Ne}`,{credentials:"include"});if(Ie.ok){const Pe=await Ie.json();S(Pe),j(!0)}else Z("Failed to load trip details","error")}catch(Ie){console.error("Error fetching trip details:",Ie),Z("Error loading trip details","error")}},ae=Ne=>{_(Ne);const Ie=new Date().toISOString().split("T")[0];I(Ie),F(!0)},R=async(Ne,Ie)=>{x(!0);try{const Pe=await fetch(`${_e}/api/trips/${Ne}/export_calendar`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({start_date:Ie})});if(Pe.ok)(await Pe.json()).status==="success"&&(Z("Successfully exported events to Calendar!","success"),F(!1),re());else if(Pe.status===401)W({show:!0,title:"Authorization Required",message:"You need to authorize Google Calendar first. Redirect to authorization page?",confirmText:"Authorize",isDestructive:!1,onConfirm:()=>{window.location.href=`${_e}/auth/authorize`,W(ze=>({...ze,show:!1}))}});else{const ze=await Pe.json();Z(`Export failed: ${ze.error||"Unknown error"}`,"error")}}catch(Pe){console.error("Export error:",Pe),Z("Failed to export to Google Calendar.","error")}finally{x(!1)}},P=Ne=>{W({show:!0,title:"Delete Trip",message:"Are you sure you want to delete this trip? This action cannot be undone.",confirmText:"Delete",isDestructive:!0,onConfirm:()=>V(Ne)})},V=async Ne=>{W(Ie=>({...Ie,show:!1}));try{(await fetch(`${_e}/api/trips/${Ne}`,{method:"DELETE",credentials:"include"})).ok?(Z("Trip deleted successfully","success"),re()):Z("Failed to delete trip","error")}catch(Ie){console.error("Delete error:",Ie),Z("Failed to delete trip","error")}},K=()=>{if(!navigator.geolocation){ce("Geolocation is not supported by your browser");return}q(!0),navigator.geolocation.getCurrentPosition(Ne=>{ee({lat:Ne.coords.latitude,lng:Ne.coords.longitude}),ce(null),q(!1)},Ne=>{console.error("Error getting location:",Ne),ce("Unable to retrieve your location"),q(!1)})};if(L.useEffect(()=>{K(),re()},[]),f)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-96 space-y-4 animate-fade-in",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-sky-600 rounded-full animate-spin"}),r.jsx("p",{className:"text-slate-500 font-medium",children:"Loading your adventures..."})]});if(A.length===0)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-96 space-y-6 animate-fade-in p-8",children:[r.jsx("div",{className:"w-20 h-20 rounded-3xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:r.jsx(NA,{className:"w-10 h-10 text-slate-400"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:"No trips yet"}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Start planning your next adventure!"})]}),r.jsxs("button",{type:"button",onClick:()=>t("/chat"),className:"px-8 py-4 bg-sky-600 dark:bg-indigo-600 text-white rounded-2xl text-sm font-bold hover:bg-sky-500 dark:hover:bg-indigo-500 transition-all shadow-lg flex items-center gap-2",children:[r.jsx(ln,{className:"w-5 h-5"}),"Plan Your First Trip"]})]});const ne=se!=null&&se.hotel?[{id:"hotel-1",type:"hotel",title:se.hotel.name||"Luxury Hotel",subtitle:se.hotel.address||"Location",rating:se.hotel.rating||5,top:"40%",left:"45%",icon:eb,color:"emerald",description:"Experience luxury accommodations with world-class amenities.",image:"https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&q=80&w=800",tags:["Luxury","Spa","View"]}]:[],pe=["Passport & Visa","Travel Insurance","Universal Adapter","Light Jacket","Comfortable Walking Shoes","Portable Charger","Local Currency","Toiletries","Camera","Prescription Meds"],Ce=ne.find(Ne=>Ne.id===e),Ue=()=>{const Pe=H?H.lat:35.0116,ze=H?H.lng:135.7681;return r.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/60 backdrop-blur-md border border-white/50 dark:border-slate-700/50 hover:border-sky-400 dark:hover:border-indigo-400 rounded-[2rem] p-1.5 shadow-sm relative group overflow-hidden isolate h-[450px] transition-all duration-500 ease-out hover:-translate-y-1 hover:shadow-2xl",children:[Ce&&r.jsx("div",{className:"absolute inset-2 z-50 bg-white/95 dark:bg-slate-900/95 backdrop-blur-2xl rounded-[1.7rem] overflow-hidden shadow-2xl animate-scale-in",children:r.jsxs("div",{className:"h-full flex flex-col md:flex-row",children:[r.jsxs("div",{className:"w-full md:w-5/12 h-48 md:h-full relative shrink-0",children:[r.jsx("img",{src:Ce.image,alt:Ce.title,className:"w-full h-full object-cover"}),r.jsx("button",{onClick:()=>s(null),className:"absolute top-4 left-4 p-2 bg-black/20 backdrop-blur-md hover:bg-black/40 text-white rounded-full transition-colors",children:r.jsx(As,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex-1 p-6 md:p-8 flex flex-col overflow-y-auto",children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-1",children:Ce.title}),r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-4",children:Ce.subtitle}),r.jsx("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed mb-6 text-sm",children:Ce.description}),r.jsx("div",{className:"mt-auto flex gap-3",children:r.jsxs("button",{onClick:()=>window.open("https://maps.google.com","_blank"),className:"flex-1 py-3 bg-sky-600 hover:bg-sky-500 text-white rounded-xl text-sm font-bold flex items-center justify-center gap-2",children:[r.jsx(Y4,{className:"w-4 h-4"}),"Directions"]})})]})]})}),r.jsx("div",{className:"w-full h-full relative bg-slate-100 dark:bg-slate-800 rounded-[1.7rem] overflow-hidden",children:r.jsx("iframe",{width:"100%",height:"100%",frameBorder:"0",style:{border:0},src:`https://maps.google.com/maps?q=${Pe},${ze}&z=14&output=embed`,allowFullScreen:!0,className:"grayscale-[20%] hover:grayscale-0 transition-all duration-700"})})]})};return r.jsxs("div",{className:"p-6 md:p-8 w-full mx-auto space-y-10 animate-fade-in-up relative",children:[te.show&&r.jsx("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-[100] animate-fade-in-down",children:r.jsxs("div",{className:`flex items-center gap-3 px-6 py-4 rounded-2xl shadow-2xl backdrop-blur-md border border-white/10 ${te.type==="success"?"bg-emerald-500/90 text-white":te.type==="error"?"bg-red-500/90 text-white":"bg-slate-800/90 text-white"}`,children:[te.type==="success"?r.jsx(sa,{className:"w-5 h-5"}):te.type==="error"?r.jsx(ur,{className:"w-5 h-5"}):r.jsx(ur,{className:"w-5 h-5"}),r.jsx("span",{className:"font-bold text-sm",children:te.message})]})}),Ae.show&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-fade-in",children:r.jsx("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-[2rem] p-6 shadow-2xl border border-white/20 dark:border-slate-700 relative animate-scale-in",children:r.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[r.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center ${Ae.isDestructive?"bg-red-100 dark:bg-red-900/30 text-red-500":"bg-sky-100 dark:bg-indigo-900/30 text-sky-500"}`,children:Ae.isDestructive?r.jsx(na,{className:"w-7 h-7"}):r.jsx(ga,{className:"w-7 h-7"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:Ae.title}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 leading-relaxed",children:Ae.message})]}),r.jsxs("div",{className:"flex gap-3 w-full pt-2",children:[r.jsx("button",{onClick:()=>W(Ne=>({...Ne,show:!1})),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-xl text-sm font-bold hover:bg-slate-200 dark:hover:bg-slate-700 transition-all",children:"Cancel"}),r.jsx("button",{onClick:Ae.onConfirm,className:`flex-1 py-3 text-white rounded-xl text-sm font-bold shadow-lg transition-all active:scale-95 ${Ae.isDestructive?"bg-red-500 hover:bg-red-600":"bg-sky-600 hover:bg-sky-500"}`,children:Ae.confirmText||"Confirm"})]})]})})}),C&&U&&r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-[2.5rem] p-8 shadow-2xl border border-white/20 dark:border-slate-700 relative animate-scale-in",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(Mn,{className:"w-6 h-6 text-sky-500"}),"Select Start Date"]}),r.jsx("button",{onClick:()=>F(!1),className:"p-2 text-slate-400 hover:text-slate-900 dark:hover:text-white bg-slate-100 dark:bg-slate-800 rounded-full transition-colors hover:scale-105",children:r.jsx(As,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 text-sm leading-relaxed",children:"Choose when you want your trip to start. All itinerary items will be scheduled from this date."}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Start Date"}),r.jsx("input",{type:"date",value:z,onChange:Ne=>I(Ne.target.value),min:new Date().toISOString().split("T")[0],className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-2xl py-4 px-4 text-slate-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 dark:focus:border-indigo-500 transition-all hover:border-sky-300 dark:hover:border-indigo-500/50"})]}),r.jsx("div",{className:"bg-sky-50 dark:bg-indigo-900/20 rounded-2xl p-4 border border-sky-100 dark:border-indigo-500/30",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 bg-sky-100 dark:bg-indigo-500/20 rounded-lg",children:r.jsx(Mn,{className:"w-5 h-5 text-sky-600 dark:text-indigo-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white mb-1",children:"Trip Schedule Preview"}),r.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:z?r.jsxs(r.Fragment,{children:["Your trip will start on ",r.jsx("span",{className:"font-bold text-sky-600 dark:text-indigo-400",children:new Date(z).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}):"Please select a start date"})]})]})}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{onClick:()=>F(!1),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-xl text-sm font-bold hover:bg-slate-200 dark:hover:bg-slate-700 transition-all border border-transparent hover:border-slate-300 dark:hover:border-slate-600",children:"Cancel"}),r.jsx("button",{onClick:()=>R(U,z),disabled:!z||p,className:"flex-[2] py-3 bg-sky-600 hover:bg-sky-500 dark:bg-indigo-600 dark:hover:bg-indigo-500 text-white rounded-xl text-sm font-bold shadow-lg transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"w-4 h-4 animate-spin"}),"Exporting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ip,{className:"w-4 h-4"}),"Export to Calendar"]})})]})]})]})}),m&&w&&r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-3xl rounded-[2.5rem] shadow-2xl border border-white/20 dark:border-slate-700 relative animate-scale-in flex flex-col max-h-[85vh]",children:[r.jsxs("div",{className:"p-8 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-white/50 dark:bg-slate-900/50 backdrop-blur-xl z-20 rounded-t-[2.5rem]",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:w.title}),r.jsxs("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 flex items-center gap-2 mt-1",children:[r.jsx(Mn,{className:"w-4 h-4"}),w.dates||"Trip Itinerary"]})]}),r.jsx("button",{onClick:()=>j(!1),className:"p-2 text-slate-400 hover:text-slate-900 dark:hover:text-white bg-slate-100 dark:bg-slate-800 rounded-full transition-colors hover:rotate-90 duration-300",children:r.jsx(As,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-white dark:bg-slate-900",children:w.items&&w.items.length>0?r.jsx("div",{className:"p-8 space-y-10",children:Object.entries(w.items.reduce((Ne,Ie)=>{const Pe=Ie.day_number;return Ne[Pe]||(Ne[Pe]=[]),Ne[Pe].push(Ie),Ne},{})).map(([Ne,Ie])=>{const Pe=Ie.sort((ze,gt)=>ze.start_time.localeCompare(gt.start_time));return r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 sticky top-0 bg-white/95 dark:bg-slate-900/95 backdrop-blur-md z-10 py-3 border-b border-slate-100 dark:border-slate-800",children:[r.jsx("div",{children:r.jsxs("h4",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:["DAY ",Ne,w.start_date&&r.jsx("span",{className:"text-sm font-medium text-slate-400 font-normal border-l border-slate-200 dark:border-slate-700 pl-3",children:JL(w.start_date,parseInt(Ne))})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>Z("AI Day Optimization coming soon!","info"),className:"text-xs font-bold text-sky-600 dark:text-sky-400 bg-sky-50 dark:bg-sky-500/10 hover:bg-sky-100 dark:hover:bg-sky-500/20 px-3 py-1.5 rounded-full transition-colors flex items-center gap-1.5",children:[r.jsx(Qn,{className:"w-3 h-3"})," Optimize Day"]}),r.jsxs("button",{onClick:()=>Z("Relax Mode coming soon!","info"),className:"text-xs font-bold text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800 hover:bg-slate-100 dark:hover:bg-slate-700 px-3 py-1.5 rounded-full transition-colors flex items-center gap-1.5",children:[r.jsx(Vp,{className:"w-3 h-3"})," Relax"]})]})]}),r.jsxs("div",{className:"space-y-6 relative pl-4",children:[r.jsx("div",{className:"absolute left-[85px] top-4 bottom-4 w-0.5 bg-slate-100 dark:bg-slate-800/50"}),Pe.map((ze,gt)=>{var Nt;const{type:ie,icon:Be,color:tt,bg:Xe,border:et,iconBg:Tt}=WL(ze.notes,ze.type);return r.jsxs("div",{className:"flex gap-6 relative group",children:[r.jsx("div",{className:"w-[70px] shrink-0 pt-1 text-right",children:r.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 px-2.5 py-1 rounded-lg border border-transparent group-hover:border-slate-200 dark:group-hover:border-slate-700 transition-all",children:YL(ze.start_time)})}),r.jsx("div",{className:`absolute left-[81px] top-3 w-2.5 h-2.5 rounded-full z-10 border-2 border-white dark:border-slate-900 transition-all duration-300 ${tt.replace("text-","bg-")} group-hover:scale-125 shadow-sm`}),r.jsx("div",{className:`flex-1 ${Xe} rounded-2xl p-4 border ${et} hover:shadow-lg hover:shadow-sky-100/50 dark:hover:shadow-none transition-all duration-300 group-hover:-translate-y-0.5 relative overflow-hidden`,children:r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`p-1.5 rounded-lg ${Tt}`,children:r.jsx(Be,{className:`w-4 h-4 ${tt}`})}),r.jsx("h5",{className:"font-bold text-slate-900 dark:text-white text-base",children:((Nt=ze.place)==null?void 0:Nt.name)||ze.type||"Activity"})]}),r.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 transform translate-x-2 group-hover:translate-x-0",children:[r.jsx("button",{onClick:()=>Z("Edit item coming soon","info"),className:"p-1.5 text-slate-400 hover:text-sky-500 hover:bg-white dark:hover:bg-slate-700 rounded-lg transition-colors",title:"Edit",children:r.jsx(Wf,{className:"w-3.5 h-3.5"})}),r.jsx("button",{onClick:()=>Z("AI Replace coming soon","info"),className:"p-1.5 text-slate-400 hover:text-purple-500 hover:bg-white dark:hover:bg-slate-700 rounded-lg transition-colors",title:"AI Replace",children:r.jsx(yl,{className:"w-3.5 h-3.5"})}),r.jsx("button",{onClick:()=>Z("Delete item coming soon","info"),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-white dark:hover:bg-slate-700 rounded-lg transition-colors",title:"Delete",children:r.jsx(na,{className:"w-3.5 h-3.5"})})]})]}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed pl-[34px]",children:ze.notes})]})})]},gt)})]})]},Ne)})}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500 py-12 space-y-4",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-50 dark:bg-slate-800 rounded-full flex items-center justify-center",children:r.jsx(ra,{className:"w-8 h-8 text-slate-300"})}),r.jsx("p",{children:"No itinerary items yet"}),r.jsx("button",{className:"text-sky-600 font-bold text-sm hover:underline",children:"Start Planning with AI"})]})}),r.jsx("div",{className:"p-6 border-t border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-900 rounded-b-[2.5rem] z-20",children:r.jsxs("button",{onClick:()=>ae(w.id),disabled:p,className:"w-full py-4 bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400 text-white rounded-xl text-sm font-bold shadow-lg shadow-emerald-500/20 flex items-center justify-center gap-2 disabled:opacity-50 transition-all hover:scale-[1.02] active:scale-[0.98]",children:[p?r.jsx(Xt,{className:"w-5 h-5 animate-spin"}):r.jsx(ip,{className:"w-5 h-5"}),p?"Exporting to Calendar...":"Export Itinerary to Calendar"]})})]})}),i&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/30 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-[2.5rem] p-8 shadow-2xl border border-white/20 dark:border-slate-700 relative animate-scale-in flex flex-col max-h-[80vh]",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(iU,{className:"w-6 h-6 text-sky-500"}),"Packing List"]}),r.jsx("button",{onClick:()=>c(!1),className:"p-2 text-slate-400 hover:text-slate-900 dark:hover:text-white bg-slate-100 dark:bg-slate-800 rounded-full transition-colors",children:r.jsx(As,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-3",children:pe.map((Ne,Ie)=>r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl hover:bg-sky-50 dark:hover:bg-indigo-900/20 cursor-pointer transition-colors group",children:[r.jsx(c8,{className:"w-5 h-5 text-slate-300 group-hover:text-sky-500 dark:group-hover:text-indigo-400"}),r.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:Ne})]},Ie))}),r.jsx("div",{className:"mt-6 pt-4 border-t border-slate-100 dark:border-slate-700",children:r.jsx("button",{onClick:()=>c(!1),className:"w-full py-3 bg-sky-600 text-white font-bold rounded-xl shadow-lg hover:bg-sky-500 active:scale-95 transition-all",children:"Done"})})]})}),r.jsx("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Travel Hub"}),r.jsxs("p",{className:"text-lg font-medium text-slate-500 dark:text-slate-400 mt-1",children:[A.length," ",A.length===1?"trip":"trips"," planned"]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((Ne,Ie)=>r.jsxs("div",{className:"bg-white/70 dark:bg-slate-800/40 backdrop-blur-xl border border-white/60 dark:border-slate-700/50 rounded-[2rem] overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-300 group hover:-translate-y-2",style:{animationDelay:`${Ie*100}ms`},children:[r.jsxs("div",{className:"relative h-48 overflow-hidden",children:[r.jsx("img",{src:Ne.imageUrl,alt:Ne.destination,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase backdrop-blur-md ${Ne.status==="completed"?"bg-emerald-500/80 text-white":Ne.status==="upcoming"||Ne.status==="planning"?"bg-sky-500/80 text-white":"bg-amber-500/80 text-white"}`,children:Ne.status})}),r.jsx("div",{className:"absolute bottom-4 left-4",children:r.jsx("h3",{className:"text-2xl font-bold text-white tracking-tight",children:Ne.destination})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[r.jsx(Mn,{className:"w-4 h-4"}),r.jsx("span",{className:"font-medium",children:Ne.dates})]}),Ne.total_expenses>0&&r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-xl p-3",children:[r.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-1",children:"Total Expenses"}),r.jsxs("p",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400",children:["$",Ne.total_expenses.toFixed(2)]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsxs("button",{onClick:()=>ve(Ne.id),className:"flex-1 py-2.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-white rounded-xl text-sm font-bold hover:bg-slate-200 dark:hover:bg-slate-600 transition-all flex items-center justify-center gap-2",children:[r.jsx(yn,{className:"w-4 h-4"}),"View"]}),r.jsxs("button",{onClick:()=>ae(Ne.id),disabled:p,className:"flex-1 py-2.5 bg-sky-600 hover:bg-sky-500 text-white rounded-xl text-sm font-bold shadow-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:[p?r.jsx(Xt,{className:"w-4 h-4 animate-spin"}):r.jsx(ip,{className:"w-4 h-4"}),"Export"]}),r.jsx("button",{onClick:()=>P(Ne.id),className:"p-2.5 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl hover:bg-red-100 dark:hover:bg-red-900/40 transition-all",children:r.jsx(na,{className:"w-4 h-4"})})]})]})]},Ne.id))}),se&&r.jsxs("div",{className:"relative h-80 rounded-[2.5rem] overflow-hidden isolate group shadow-2xl border border-transparent hover:border-sky-500/30 transition-all duration-500 hover:scale-[1.01]",children:[r.jsx("img",{src:se.imageUrl,alt:se.destination,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-[1.5s] group-hover:scale-105"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-10",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/20 backdrop-blur-md border border-white/20 text-xs font-bold text-white mb-4 uppercase tracking-wider",children:[r.jsx(NA,{className:"w-3.5 h-3.5"}),"Next Adventure"]}),r.jsx("h3",{className:"text-5xl font-bold text-white mb-4 tracking-tighter",children:se.destination}),r.jsx("div",{className:"flex items-center gap-4 text-slate-200",children:r.jsxs("div",{className:"flex items-center gap-2.5 text-sm font-medium bg-black/40 px-4 py-2 rounded-xl backdrop-blur-md",children:[r.jsx(Mn,{className:"w-4 h-4 text-sky-400"}),se.dates]})})]})]}),se&&ne.length>0&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-sky-100 dark:bg-slate-800 flex items-center justify-center",children:r.jsx(ra,{className:"w-5 h-5 text-sky-600 dark:text-indigo-400"})}),"Trip Map"]}),r.jsx(Ue,{})]})]})};new Date(new Date().getFullYear(),new Date().getMonth()-11,1),new Date(new Date().setMonth(new Date().getMonth()-1)),new Date(new Date().setMonth(new Date().getMonth()-2)),new Date(new Date().setMonth(new Date().getMonth()-3));new Date(new Date().setHours(10,30,0,0)),new Date(new Date().setHours(15,0,0,0)),new Date(new Date().setDate(new Date().getDate()+1));const ZL=[{id:"si-1",content:"Remember to buy JR Rail Pass before leaving",category:"note",timestamp:new Date,isCompleted:!1,priority:"high"},{id:"si-2",content:"Visit Fushimi Inari Shrine early morning to avoid crowds",category:"ai-suggestion",timestamp:new Date(Date.now()-864e5),isCompleted:!1,priority:"medium"},{id:"si-3",content:"Restaurant reservation: Monk (confirm 2 days prior)",category:"activity",timestamp:new Date(Date.now()-1728e5),isCompleted:!0,priority:"high"}],eM=()=>{const[t,e]=L.useState(ZL),[s,n]=L.useState(""),[a,i]=L.useState("all"),[c,A]=L.useState(null),d=(j,w="success")=>{A({message:j,type:w}),setTimeout(()=>A(null),3e3)},f=()=>{if(!s.trim())return;const j={id:Date.now().toString(),content:s,category:"note",timestamp:new Date,isCompleted:!1,priority:"medium"};e(w=>[j,...w]),n(""),d("Note added successfully!","success")},u=j=>{e(w=>w.map(S=>S.id===j?{...S,isCompleted:!S.isCompleted}:S))},p=j=>{e(w=>w.filter(S=>S.id!==j)),d("Item deleted","info")},x=j=>{switch(j){case"ai-suggestion":return r.jsx(If,{className:"w-4 h-4"});case"activity":return r.jsx(No,{className:"w-4 h-4"});case"logistics":return r.jsx(NA,{className:"w-4 h-4"});default:return r.jsx(Z4,{className:"w-4 h-4"})}},m=a==="all"?t:t.filter(j=>j.category===a);return r.jsxs("div",{className:"p-6 md:p-8 w-full mx-auto flex flex-col h-[calc(100vh-6rem)] animate-fade-in-up relative",children:[c&&r.jsxs("div",{className:`fixed bottom-6 right-6 z-[60] flex items-center gap-3 px-4 py-3 rounded-xl shadow-2xl animate-fade-in-up transition-all ${c.type==="error"?"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/30 dark:text-red-300 dark:border-red-800":c.type==="success"?"bg-emerald-50 text-emerald-700 border border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-800":"bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700"}`,children:[c.type==="error"?r.jsx(ur,{className:"w-5 h-5"}):c.type==="success"?r.jsx(ea,{className:"w-5 h-5"}):r.jsx(Pa,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:c.message}),r.jsx("button",{onClick:()=>A(null),className:"ml-2 hover:opacity-70",children:r.jsx(As,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-10",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:r.jsx(Sv,{className:"w-6 h-6 text-amber-600 dark:text-amber-400"})}),r.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Trip Notebook"})]}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"Capture ideas, AI suggestions, and tasks for your trip."})]}),r.jsx("div",{className:"flex bg-white dark:bg-slate-800 rounded-xl p-1 shadow-sm border border-slate-200 dark:border-slate-700/50 hover:border-slate-300 dark:hover:border-slate-600 transition-colors",children:["all","note","activity","ai-suggestion"].map(j=>r.jsx("button",{onClick:()=>i(j),className:`
                 px-4 py-2 rounded-lg text-sm font-bold capitalize transition-all
                 ${a===j?"bg-amber-100 text-amber-700 dark:bg-amber-500/20 dark:text-amber-300":"text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white hover:bg-slate-50 dark:hover:bg-slate-700"}
               `,children:j==="ai-suggestion"?"AI Tips":j},j))})]}),r.jsxs("div",{className:"relative mb-8 z-20 group",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-200 to-orange-100 dark:from-amber-900/20 dark:to-orange-900/20 rounded-2xl blur opacity-25 group-hover:opacity-50 transition-opacity duration-500"}),r.jsxs("div",{className:"relative flex items-center bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-2xl shadow-lg p-2 transition-all focus-within:ring-4 focus-within:ring-amber-500/10 focus-within:border-amber-500/50 hover:border-amber-400 dark:hover:border-amber-400 hover:-translate-y-1 hover:shadow-xl duration-300 ease-out",children:[r.jsx("div",{className:"pl-4 pr-3 text-slate-400",children:r.jsx(ln,{className:"w-5 h-5"})}),r.jsx("input",{type:"text",value:s,onChange:j=>n(j.target.value),onKeyDown:j=>j.key==="Enter"&&f(),placeholder:"Add a note, restaurant idea, or reminder...",className:"flex-1 bg-transparent border-none outline-none py-3 text-slate-900 dark:text-white placeholder-slate-400 font-medium"}),r.jsx("button",{onClick:f,disabled:!s.trim(),className:"bg-slate-900 dark:bg-white text-white dark:text-slate-900 px-6 py-2.5 rounded-xl font-bold text-sm hover:opacity-90 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg hover:-translate-y-0.5",children:"Add Note"})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar -mr-4 pr-4 space-y-4 pb-10",children:m.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center space-y-4 opacity-50",children:[r.jsx(Sv,{className:"w-12 h-12 text-slate-300 dark:text-slate-600"}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:"No items found. Start typing above!"})]}):m.map((j,w)=>r.jsxs("div",{className:"group flex items-start gap-4 p-5 bg-white/70 dark:bg-slate-800/40 backdrop-blur-md border border-white/60 dark:border-slate-700/50 rounded-2xl shadow-sm transition-all duration-300 animate-scale-in hover:border-amber-400 dark:hover:border-amber-500 hover:-translate-y-1 hover:scale-[1.01] hover:shadow-xl",style:{animationDelay:`${w*50}ms`},children:[r.jsx("button",{onClick:()=>u(j.id),className:`mt-0.5 flex-shrink-0 transition-all hover:scale-110 ${j.isCompleted?"text-emerald-500":"text-slate-300 dark:text-slate-600 hover:text-emerald-500"}`,children:j.isCompleted?r.jsx(sa,{className:"w-6 h-6"}):r.jsx(Y6,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`text-base font-medium leading-relaxed transition-all duration-300 ${j.isCompleted?"text-slate-400 line-through decoration-slate-300":"text-slate-900 dark:text-white"}`,children:j.content}),r.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[r.jsxs("span",{className:`
                     inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-transform group-hover:scale-105
                     ${j.category==="ai-suggestion"?"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-300":j.category==="activity"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300":"bg-slate-100 text-slate-600 dark:bg-slate-700/50 dark:text-slate-400"}
                   `,children:[x(j.category),j.category==="ai-suggestion"?"AI Suggestion":j.category]}),r.jsx("span",{className:"text-xs text-slate-400 font-medium",children:j.timestamp.toLocaleDateString()})]})]}),r.jsx("button",{onClick:()=>p(j.id),className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl opacity-0 group-hover:opacity-100 transition-all border border-transparent hover:border-red-200 hover:scale-110",children:r.jsx(na,{className:"w-5 h-5"})})]},j.id))})]})},fh=[{code:"en",name:"English",flag:""},{code:"ja",name:"Japanese",flag:""},{code:"zh",name:"Chinese",flag:""},{code:"ko",name:"Korean",flag:""},{code:"es",name:"Spanish",flag:""},{code:"fr",name:"French",flag:""},{code:"de",name:"German",flag:""},{code:"it",name:"Italian",flag:""},{code:"my",name:"Malay",flag:""},{code:"th",name:"Thai",flag:""},{code:"vi",name:"Vietnamese",flag:""},{code:"id",name:"Indonesian",flag:""},{code:"pt",name:"Portuguese",flag:""},{code:"ru",name:"Russian",flag:""},{code:"ar",name:"Arabic",flag:""}],v1=[{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",premiumOnly:!1},{id:"gemini-1.5-pro",name:"Gemini 1.5 Pro",premiumOnly:!0}],y1=({active:t,onClick:e,icon:s,label:n,badge:a})=>r.jsxs("button",{onClick:e,className:`
      relative flex items-center gap-2 px-5 py-2.5 rounded-xl font-semibold text-sm transition-all duration-300
      ${t?"bg-gradient-to-r from-sky-500 to-indigo-500 text-white shadow-lg shadow-sky-500/25":"bg-white/50 dark:bg-slate-800/50 text-slate-600 dark:text-slate-400 hover:bg-white dark:hover:bg-slate-800"}
    `,children:[s,n,a&&r.jsxs("span",{className:"absolute -top-1 -right-1 px-1.5 py-0.5 bg-amber-400 text-amber-900 text-[10px] font-bold rounded-full flex items-center gap-0.5",children:[r.jsx(wo,{className:"w-2.5 h-2.5"}),a]})]}),tM=({engine:t,setEngine:e,disabled:s,isPremium:n,onUpgrade:a})=>r.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded-xl",children:[r.jsxs("button",{onClick:()=>!s&&e("google"),disabled:s,className:`
        flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold transition-all
        ${t==="google"?"bg-white dark:bg-slate-700 text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}
        ${s?"opacity-50 cursor-not-allowed":""}
      `,children:[r.jsx(Gg,{className:"w-3.5 h-3.5"}),"Google Cloud"]}),r.jsxs("button",{onClick:()=>{if(!s){if(!n){a();return}e("ai")}},disabled:s,className:`
        flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold transition-all relative
        ${t==="ai"?"bg-white dark:bg-slate-700 text-indigo-600 shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}
        ${s?"opacity-50 cursor-not-allowed":""}
      `,children:[r.jsx(Qn,{className:"w-3.5 h-3.5"}),"AI Enhanced",!n&&r.jsx(Vl,{className:"w-3 h-3 text-amber-500 ml-1"})]})]}),sM=({selectedModel:t,onSelect:e,isPremium:s,disabled:n,onUpgrade:a})=>{const[i,c]=L.useState(!1),A=L.useRef(null),[d,f]=L.useState({top:0,left:0,width:0}),u=()=>{if(A.current){const x=A.current.getBoundingClientRect();f({top:x.bottom+window.scrollY+8,left:x.left+window.scrollX,width:Math.max(x.width,200)})}};L.useEffect(()=>(i&&(u(),window.addEventListener("scroll",u),window.addEventListener("resize",u)),()=>{window.removeEventListener("scroll",u),window.removeEventListener("resize",u)}),[i]),L.useEffect(()=>{const x=m=>{A.current&&A.current.contains(m.target)||c(!1)};return i&&document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[i]);const p=v1.find(x=>x.id===t)||v1[0];return r.jsxs(r.Fragment,{children:[r.jsx("button",{ref:A,onClick:()=>!n&&c(!i),disabled:n,className:`
          flex items-center gap-2 px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl
          hover:border-indigo-400 transition-colors text-xs font-medium min-w-[160px] justify-between
          ${n?"opacity-50 cursor-not-allowed":""}
        `,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(sT,{className:"w-4 h-4 text-indigo-500"}),r.jsx("span",{className:"text-slate-700 dark:text-slate-200 truncate max-w-[120px]",children:p.name})]})}),i&&S4.createPortal(r.jsxs("div",{className:"fixed z-[9999] bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden animate-in fade-in zoom-in-95 duration-100",style:{top:d.top,left:d.left,width:d.width},onMouseDown:x=>x.stopPropagation(),children:[v1.map(x=>{const m=x.premiumOnly&&!s;return r.jsxs("button",{onClick:()=>{m?(a(),c(!1)):(e(x.id),c(!1))},className:`
                  w-full flex items-center justify-between p-3 text-left border-b last:border-0 border-slate-50 dark:border-slate-700/50
                  ${t===x.id?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600":"text-slate-600 dark:text-slate-300"}
                  hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors
                `,children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-xs font-medium",children:x.name}),x.premiumOnly&&r.jsx("span",{className:"text-[10px] text-amber-600 dark:text-amber-500",children:"PRO Model"})]}),m?r.jsx(Vl,{className:"w-3.5 h-3.5 text-amber-500"}):t===x.id&&r.jsx(ea,{className:"w-3.5 h-3.5"})]},x.id)}),!s&&r.jsx("button",{onClick:()=>{a(),c(!1)},className:"w-full p-2 bg-amber-50 dark:bg-amber-900/20 text-center hover:bg-amber-100 dark:hover:bg-amber-900/40 transition-colors",children:r.jsxs("p",{className:"text-[10px] font-bold text-amber-700 dark:text-amber-400 flex items-center justify-center gap-1",children:[r.jsx(wo,{className:"w-3 h-3"}),"Upgrade to Unlock All"]})})]}),document.body)]})},y5=({speaker:t,flag:e,langName:s,isActive:n,isRecording:a,isProcessing:i,disabled:c,onPress:A,onRelease:d})=>r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsxs("span",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:["Speaker ",t]}),r.jsxs("div",{className:"relative",children:[a&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute inset-0 rounded-full bg-red-500/30 animate-ping",style:{animationDuration:"1s"}}),r.jsx("div",{className:"absolute -inset-2 rounded-full bg-red-500/20 animate-ping",style:{animationDuration:"1.5s"}}),r.jsx("div",{className:"absolute -inset-4 rounded-full bg-red-500/10 animate-ping",style:{animationDuration:"2s"}})]}),r.jsx("button",{onMouseDown:A,onMouseUp:d,onMouseLeave:d,onTouchStart:f=>{f.preventDefault(),A()},onTouchEnd:f=>{f.preventDefault(),d()},disabled:c,className:`
          relative w-24 h-24 rounded-full flex flex-col items-center justify-center gap-1 transition-all duration-300
          ${a?"bg-gradient-to-br from-red-500 to-rose-600 scale-110 shadow-2xl shadow-red-500/50":i?"bg-gradient-to-br from-amber-500 to-orange-500 shadow-xl shadow-amber-500/30":n?"bg-gradient-to-br from-sky-500 to-indigo-500 shadow-xl shadow-sky-500/30 hover:scale-105":"bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600"}
          ${c&&!i?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        `,children:i?r.jsxs("div",{className:"flex flex-col items-center gap-1",children:[r.jsx(Xt,{className:"w-7 h-7 text-white animate-spin"}),r.jsx("span",{className:"text-[10px] text-white/80 font-medium",children:"Processing"})]}):a?r.jsxs("div",{className:"flex flex-col items-center gap-1",children:[r.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(f=>r.jsx("div",{className:"w-1 bg-white rounded-full animate-pulse",style:{height:`${12+Math.random()*16}px`,animationDelay:`${f*.1}s`,animationDuration:"0.5s"}},f))}),r.jsx("span",{className:"text-[10px] text-white/80 font-medium",children:"Recording"})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-2xl",children:e}),r.jsx(q4,{className:`w-5 h-5 ${n?"text-white":"text-slate-500 dark:text-slate-400"}`})]})})]}),r.jsx("span",{className:`text-sm font-medium transition-colors ${a?"text-red-500":i?"text-amber-600 dark:text-amber-400":n?"text-sky-600 dark:text-indigo-400":"text-slate-600 dark:text-slate-400"}`,children:s}),a&&r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsxs("span",{className:"relative flex h-2 w-2",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]}),r.jsx("span",{className:"text-xs text-red-500 font-semibold",children:"Streaming live..."})]}),i&&!a&&r.jsx("span",{className:"text-xs text-amber-600 dark:text-amber-400 font-medium",children:"Translating..."})]}),rM=({message:t,onPlayAudio:e,isPlaying:s})=>{const n=t.speaker==="A",a=t.type==="translated";return r.jsx("div",{className:`flex ${n?"justify-end":"justify-start"} mb-3`,children:r.jsxs("div",{className:`max-w-[80%] ${n?"items-end":"items-start"} flex flex-col gap-1`,children:[r.jsxs("div",{className:`flex items-center gap-1.5 text-xs ${n?"flex-row-reverse":""}`,children:[r.jsx("span",{children:t.flag}),r.jsx("span",{className:"font-medium text-slate-500 dark:text-slate-400",children:a?"Translation":`Speaker ${t.speaker}`})]}),r.jsx("div",{className:`
            px-4 py-3 rounded-2xl
            ${a?"bg-gradient-to-r from-indigo-500 to-purple-500 text-white":n?"bg-sky-500 text-white":"bg-white dark:bg-slate-800 text-slate-900 dark:text-white border border-slate-200 dark:border-slate-700"}
            ${n?"rounded-tr-sm":"rounded-tl-sm"}
          `,children:r.jsx("p",{className:"text-sm leading-relaxed",children:t.text})}),a&&t.audioBase64&&e&&r.jsxs("button",{onClick:e,className:"flex items-center gap-1.5 px-2 py-1 text-xs text-slate-500 dark:text-slate-400 hover:text-indigo-500 transition-colors",children:[s?r.jsx(J4,{className:"w-3 h-3"}):r.jsx(Uv,{className:"w-3 h-3"}),s?"Playing...":"Play audio"]})]})})},nM=({user:t})=>{const[e,s]=L.useState("text"),[n,a]=L.useState("en"),[i,c]=L.useState("ja"),[A,d]=L.useState("google"),[f,u]=L.useState("gemini-2.5-flash"),[p,x]=L.useState(""),[m,j]=L.useState(""),[w,S]=L.useState(!1),[C,F]=L.useState(!1),[U,_]=L.useState(!1),[z,I]=L.useState("A"),[H,ee]=L.useState(!1),[$,ce]=L.useState(!1),[Q,q]=L.useState([]),[te,X]=L.useState(null),[Ae,W]=L.useState(null),[se,Z]=L.useState(""),[re,ve]=L.useState(""),[ae,R]=L.useState(!1),[P,V]=L.useState(null),[K,ne]=L.useState(null),[pe,Ce]=L.useState(!1),[Ue,Ne]=L.useState(!1),[Ie,Pe]=L.useState(null),ze=L.useRef(null),gt=L.useRef(null);L.useRef([]);const ie=L.useRef(null),Be=L.useRef(null),tt=L.useRef(null),Xe=L.useRef(null),et=L.useRef(0),Tt=(t==null?void 0:t.isPremium)??!1,Nt=Re=>fh.find(We=>We.code===Re)||{code:Re,name:Re,flag:""};L.useEffect(()=>{var Re;(Re=ie.current)==null||Re.scrollIntoView({behavior:"smooth"})},[Q]),L.useEffect(()=>()=>{ze.current&&ze.current.disconnect(),gt.current&&gt.current.state!=="inactive"&&gt.current.stop()},[]),L.useEffect(()=>{!Tt&&A==="ai"&&d("google")},[Tt,A]);const Mt=()=>{confirm("This feature requires a Premium subscription. Unlock the full power of AI translation now!")&&(window.location.href="/billing")},Qt=()=>{a(i),c(n),ze.current&&U&&ze.current.emit("swap_languages"),e==="text"&&(x(m),j(p))},pt=async()=>{if(p.trim()){S(!0),j("");try{const Re=await fetch(`${_e}/api/translate`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({text:p,source_lang:n,target_lang:i,engine:A,model:A==="ai"?f:void 0})}),We=await Re.json();Re.ok&&We.status==="success"?j(We.translation):j(We.error||"Error: Could not translate.")}catch{j("Error: Failed to connect to translation service.")}finally{S(!1)}}},rt=L.useCallback(()=>{if(!Tt){Mt();return}W(null);const Re=lp(`${_e}/translate-stream`,{withCredentials:!0,transports:["websocket","polling"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3});Re.on("connect",()=>{console.log("[StreamingConversation] Socket connected")}),Re.on("connected",We=>{console.log("[StreamingConversation] Authenticated:",We),F(!0),W(null)}),Re.on("error",We=>{console.error("[StreamingConversation] Error:",We),W(We.message),ce(!1),R(!1),Z(""),(We.code==="PREMIUM_REQUIRED"||We.code==="AUTH_REQUIRED")&&(Re.disconnect(),F(!1))}),Re.on("streaming_started",We=>{console.log("[StreamingConversation] Streaming started:",We),R(!0),_(!0),I(We.speaker),Z(""),et.current=0,We.session_info&&X({langA:We.session_info.lang_a,langB:We.session_info.lang_b,langAName:We.session_info.lang_a_name,langBName:We.session_info.lang_b_name,langAFlag:We.session_info.lang_a_flag,langBFlag:We.session_info.lang_b_flag})}),Re.on("partial_transcription",We=>{Z(We.text)}),Re.on("partial_translation",We=>{ve(We.translated_text)}),Re.on("final_transcription",We=>{Z(""),ve("");const $t={id:`${Date.now()}-orig-${We.speaker}`,speaker:We.speaker,type:"original",text:We.text,language:We.language,languageName:We.language_name,flag:We.flag,timestamp:new Date};q(wt=>[...wt,$t])}),Re.on("translation",We=>{ve("");const $t={id:`${Date.now()}-trans-${We.speaker}`,speaker:We.speaker,type:"translated",text:We.translated_text,language:We.target_lang,languageName:We.target_lang_name,flag:We.target_flag,timestamp:new Date};q(wt=>[...wt,$t])}),Re.on("audio_response",We=>{q($t=>{const wt=[...$t];for(let st=wt.length-1;st>=0;st--)if(wt[st].type==="translated"&&!wt[st].audioBase64){wt[st]={...wt[st],audioBase64:We.audio};break}return wt}),We.auto_play&&Ge(We.audio)}),Re.on("streaming_ended",We=>{console.log("[StreamingConversation] Streaming ended:",We),R(!1),ce(!1),Z("")}),Re.on("speaker_switched",We=>{console.log("[StreamingConversation] Speaker switched:",We),I(We.speaker),Z("")}),Re.on("languages_swapped",We=>{X({langA:We.lang_a,langB:We.lang_b,langAName:We.lang_a_name,langBName:We.lang_b_name,langAFlag:We.lang_a_flag,langBFlag:We.lang_b_flag}),a(We.lang_a),c(We.lang_b)}),Re.on("session_ended",We=>{console.log("[StreamingConversation] Session ended:",We),_(!1),R(!1),X(null),Z("")}),Re.on("disconnect",()=>{F(!1),_(!1),R(!1),Z("")}),ze.current=Re},[Tt]),Ut=()=>{Xe.current&&(Xe.current.getTracks().forEach(Re=>Re.stop()),Xe.current=null),gt.current&&gt.current.state!=="inactive"&&gt.current.stop(),ze.current&&(ze.current.emit("end_session"),ze.current.disconnect(),ze.current=null),F(!1),_(!1),ee(!1),ce(!1),R(!1),Z(""),ve("")},rs=Re=>{!ze.current||!C||(et.current=0,ze.current.emit("start_streaming",{lang_a:n,lang_b:i,speaker:Re}))},Ot=L.useCallback(()=>{gt.current&&gt.current.state!=="inactive"&&gt.current.stop(),Xe.current&&(Xe.current.getTracks().forEach(Re=>{Re.stop(),Re.enabled=!1}),Xe.current=null),gt.current=null},[]),Dt=async Re=>{if(!ze.current||!C){W("Not connected to server");return}Ot(),I(Re),Z(""),W(null);try{const We=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:16e3}});Xe.current=We;let $t="audio/webm;codecs=opus";MediaRecorder.isTypeSupported($t)||($t=MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"");const wt=new MediaRecorder(We,{mimeType:$t||void 0});wt.ondataavailable=async st=>{var Ct;if(st.data.size>0&&((Ct=ze.current)!=null&&Ct.connected))try{const as=new FileReader;as.onloadend=()=>{var ct;const ps=as.result.split(",")[1];(ct=ze.current)!=null&&ct.connected&&ze.current.emit("audio_chunk",{audio:ps,speaker:Re,seq:et.current++})},as.readAsDataURL(st.data)}catch(as){console.error("Failed to send audio chunk:",as)}},wt.onerror=st=>{console.error("MediaRecorder error:",st.error),W("Recording error occurred"),Oe()},rs(Re),await new Promise(st=>setTimeout(st,100)),wt.start(200),gt.current=wt,ee(!0)}catch(We){console.error("Failed to start recording:",We),Ot(),We.name==="NotAllowedError"||We.name==="PermissionDeniedError"?W("Microphone access denied. Please allow permission."):We.name==="NotFoundError"||We.name==="DevicesNotFoundError"?W("No microphone found."):We.name==="NotReadableError"||We.name==="TrackStartError"?W("Microphone is busy or not readable."):W("Microphone access denied or not available")}},Oe=L.useCallback(()=>{var Re;Ot(),(Re=ze.current)!=null&&Re.connected&&ze.current.emit("stop_streaming",{speaker:z}),ee(!1),ce(!0),setTimeout(()=>{ce(We=>We&&(console.warn("Processing state reset by timeout"),!1))},5e3)},[z,Ot]),Ge=Re=>{Be.current&&Be.current.pause();try{const We=zt(Re,"audio/mp3"),$t=URL.createObjectURL(We),wt=new Audio($t);wt.onended=()=>{URL.revokeObjectURL($t),Pe(null)},wt.onerror=Ct=>{console.error("Audio error:",Ct),URL.revokeObjectURL($t),Pe(null)};const st=wt.play();st!==void 0&&st.catch(Ct=>{console.error("Audio playback failed:",Ct)}),Be.current=wt}catch(We){console.error("Failed to setup audio playback:",We)}},ft=(Re,We)=>{Pe(Re),Ge(We)},ht=Re=>{var $t;const We=($t=Re.target.files)==null?void 0:$t[0];We&&(V(We),ne(null))},vt=async()=>{if(P){Ce(!0),ne(null);try{const Re=new FormData;Re.append("file",P),Re.append("source_lang",n),Re.append("target_lang",i),Re.append("engine",A),A==="ai"&&Re.append("model",f);const We=await fetch(`${_e}/api/translate/audio`,{method:"POST",credentials:"include",body:Re}),$t=await We.json();We.ok&&$t.status==="success"?ne({originalText:$t.original_text,translatedText:$t.translated_text,audioBase64:$t.audio_base64}):W($t.error||"Translation failed")}catch{W("Failed to connect to translation service")}finally{Ce(!1)}}},kt=async(Re,We)=>{if(Re)try{const $t=await fetch(`${_e}/tts`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({text:Re,lang:We})});if(!$t.ok)throw new Error("TTS Failed");const wt=await $t.blob(),st=URL.createObjectURL(wt),Ct=new Audio(st);Ct.onended=()=>URL.revokeObjectURL(st),Ct.play(),Be.current=Ct}catch($t){console.error("TTS error",$t)}},Vt=Re=>{navigator.clipboard.writeText(Re),Ne(!0),setTimeout(()=>Ne(!1),2e3)},zt=(Re,We)=>{const $t=atob(Re),wt=new Array($t.length);for(let Ct=0;Ct<$t.length;Ct++)wt[Ct]=$t.charCodeAt(Ct);const st=new Uint8Array(wt);return new Blob([st],{type:We})},Bs=()=>{q([]),I("A")};return r.jsxs("div",{className:"p-4 md:p-6 w-full max-w-5xl mx-auto space-y-5",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-11 h-11 rounded-2xl bg-gradient-to-br from-sky-400 to-indigo-500 flex items-center justify-center shadow-lg shadow-sky-500/25",children:r.jsx(ic,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Translation Hub"}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Text, conversation & audio translation"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 bg-white/50 dark:bg-slate-800/50 p-1.5 rounded-2xl backdrop-blur-sm border border-white/20 dark:border-slate-700/50 relative z-10",children:[r.jsx(tM,{engine:A,setEngine:d,disabled:w||pe||U,isPremium:Tt,onUpgrade:Mt}),A==="ai"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-px h-6 bg-slate-200 dark:bg-slate-700 mx-1"}),r.jsx(sM,{selectedModel:f,onSelect:u,isPremium:Tt,disabled:w||pe||U,onUpgrade:Mt})]}),!Tt&&r.jsxs("a",{href:"/billing",className:"ml-2 flex items-center gap-1.5 px-3 py-1.5 bg-gradient-to-r from-amber-400 to-orange-500 text-white rounded-lg font-semibold text-xs shadow-lg shadow-orange-500/25 hover:shadow-xl transition-all hover:-translate-y-0.5",children:[r.jsx(wo,{className:"w-3.5 h-3.5"}),"Upgrade"]})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-2 p-1.5 bg-slate-100/50 dark:bg-slate-800/50 rounded-xl backdrop-blur-sm",children:[r.jsx(y1,{active:e==="text",onClick:()=>s("text"),icon:r.jsx(Qn,{className:"w-4 h-4"}),label:"Text"}),r.jsx(y1,{active:e==="conversation",onClick:()=>{s("conversation"),Tt&&!C&&rt()},icon:r.jsx(Gl,{className:"w-4 h-4"}),label:"Conversation",badge:Tt?void 0:"PRO"}),r.jsx(y1,{active:e==="batch",onClick:()=>s("batch"),icon:r.jsx(a5,{className:"w-4 h-4"}),label:"Audio File"})]}),Ae&&r.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-center gap-2",children:[r.jsx(As,{className:"w-4 h-4 text-red-500 flex-shrink-0"}),r.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm flex-1",children:Ae}),r.jsx("button",{onClick:()=>W(null),className:"p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg",children:r.jsx(As,{className:"w-4 h-4 text-red-400"})})]}),r.jsxs("div",{className:"bg-white/70 dark:bg-slate-900/70 backdrop-blur-xl rounded-2xl p-5 shadow-xl border border-white/20 dark:border-slate-700/30",children:[e==="text"&&r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("select",{value:n,onChange:Re=>a(Re.target.value),className:"flex-1 bg-white dark:bg-slate-800 px-3 py-2 rounded-xl border border-slate-200 dark:border-slate-700 font-medium text-sm",children:fh.map(Re=>r.jsxs("option",{value:Re.code,children:[Re.flag," ",Re.name]},Re.code))}),r.jsx("button",{onClick:Qt,className:"p-2 bg-slate-100 dark:bg-slate-800 rounded-xl hover:bg-sky-100 dark:hover:bg-indigo-900/50 transition-all active:rotate-180 duration-300",children:r.jsx(f1,{className:"w-4 h-4 text-slate-500"})}),r.jsx("select",{value:i,onChange:Re=>c(Re.target.value),className:"flex-1 bg-white dark:bg-slate-800 px-3 py-2 rounded-xl border border-slate-200 dark:border-slate-700 font-medium text-sm text-indigo-600 dark:text-indigo-400",children:fh.map(Re=>r.jsxs("option",{value:Re.code,children:[Re.flag," ",Re.name]},Re.code))})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex flex-col bg-slate-50 dark:bg-slate-800/50 rounded-xl p-3 min-h-[200px]",children:[r.jsx("textarea",{value:p,onChange:Re=>x(Re.target.value),placeholder:"Enter text to translate...",className:"flex-1 w-full bg-transparent resize-none border-none outline-none text-sm text-slate-900 dark:text-white placeholder-slate-400"}),r.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-200 dark:border-slate-700",children:[r.jsx("button",{onClick:()=>kt(p,n),className:"p-1.5 text-slate-400 hover:text-sky-600 rounded-lg transition-all",children:r.jsx(Uv,{className:"w-4 h-4"})}),r.jsx("span",{className:"text-xs text-slate-400",children:p.length})]})]}),r.jsxs("div",{className:"flex flex-col bg-gradient-to-br from-indigo-50 to-sky-50 dark:from-indigo-900/20 dark:to-sky-900/20 rounded-xl p-3 min-h-[200px]",children:[w?r.jsxs("div",{className:"flex-1 flex items-center justify-center flex-col gap-2 text-indigo-500",children:[r.jsx(Xt,{className:"w-6 h-6 animate-spin"}),r.jsxs("span",{className:"text-xs opacity-70",children:["Using ",A==="google"?"Google Cloud":f,"..."]})]}):r.jsx("textarea",{readOnly:!0,value:m,placeholder:"Translation...",className:"flex-1 w-full bg-transparent resize-none border-none outline-none text-sm text-slate-700 dark:text-slate-200 placeholder-slate-400"}),r.jsx("div",{className:"flex justify-between items-center pt-2 border-t border-indigo-100 dark:border-indigo-900/50",children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>Vt(m),className:"p-1.5 text-slate-400 hover:text-emerald-500 rounded-lg transition-all",children:Ue?r.jsx(ea,{className:"w-4 h-4"}):r.jsx(kv,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>kt(m,i),className:"p-1.5 text-slate-400 hover:text-sky-600 rounded-lg transition-all",children:r.jsx(Uv,{className:"w-4 h-4"})})]})})]})]}),r.jsxs("button",{onClick:pt,disabled:!p||w,className:"w-full py-3 bg-gradient-to-r from-sky-500 to-indigo-500 text-white rounded-xl font-bold text-sm shadow-lg shadow-sky-500/30 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[w?r.jsx(Xt,{className:"w-4 h-4 animate-spin"}):r.jsx(Qn,{className:"w-4 h-4"}),w?"Translating...":"Translate"]})]}),e==="conversation"&&r.jsx("div",{className:"space-y-4",children:Tt?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[C?r.jsx(Zf,{className:"w-4 h-4 text-emerald-500"}):r.jsx(Xf,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:`text-xs font-medium ${C?"text-emerald-600":"text-slate-500"}`,children:C?U?"Session Active":"Connected":"Disconnected"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("select",{value:n,onChange:Re=>a(Re.target.value),disabled:U,className:"bg-white dark:bg-slate-800 px-2 py-1 rounded-lg border border-slate-200 dark:border-slate-700 text-xs font-medium",children:fh.map(Re=>r.jsxs("option",{value:Re.code,children:[Re.flag," ",Re.name]},Re.code))}),r.jsx("button",{onClick:Qt,className:"p-1 bg-slate-100 dark:bg-slate-700 rounded-lg",disabled:$,children:r.jsx(f1,{className:"w-3 h-3 text-slate-500"})}),r.jsx("select",{value:i,onChange:Re=>c(Re.target.value),disabled:U,className:"bg-white dark:bg-slate-800 px-2 py-1 rounded-lg border border-slate-200 dark:border-slate-700 text-xs font-medium text-indigo-600",children:fh.map(Re=>r.jsxs("option",{value:Re.code,children:[Re.flag," ",Re.name]},Re.code))})]}),r.jsxs("div",{className:"flex gap-2",children:[Q.length>0&&r.jsx("button",{onClick:Bs,className:"p-1.5 text-slate-400 hover:text-red-500 rounded-lg transition-colors",title:"Clear conversation",children:r.jsx(JU,{className:"w-4 h-4"})}),r.jsx("button",{onClick:C?Ut:rt,className:`px-3 py-1 rounded-lg text-xs font-medium transition-all ${C?"bg-red-100 text-red-600 hover:bg-red-200":"bg-emerald-100 text-emerald-600 hover:bg-emerald-200"}`,children:C?"End":"Start"})]})]}),(H||se||re)&&r.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-gradient-to-r from-sky-500/10 via-indigo-500/10 to-purple-500/10 dark:from-sky-500/20 dark:via-indigo-500/20 dark:to-purple-500/20 border border-sky-200 dark:border-sky-800",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-sky-400/20 to-indigo-400/20 animate-pulse"}),r.jsxs("div",{className:"relative p-4 space-y-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsxs("span",{className:"relative flex h-2.5 w-2.5",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-2.5 w-2.5 bg-red-500"})]}),r.jsxs("span",{className:"text-xs font-semibold text-sky-600 dark:text-sky-400",children:["LIVE  Speaker ",z]})]}),r.jsx("span",{className:"text-xs text-slate-400",children:z==="A"?(te==null?void 0:te.langAName)||Nt(n).name:(te==null?void 0:te.langBName)||Nt(i).name})]}),r.jsx("p",{className:"text-lg font-medium text-slate-800 dark:text-white min-h-[28px]",children:se||r.jsxs("span",{className:"text-slate-400 italic flex items-center gap-2",children:[r.jsx(Xt,{className:"w-4 h-4 animate-spin"}),"Listening..."]})})]}),re&&r.jsxs("div",{className:"border-t border-indigo-200 dark:border-indigo-800 pt-2",children:[r.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[r.jsx(Qn,{className:"w-3 h-3 text-indigo-500"}),r.jsx("span",{className:"text-xs font-medium text-indigo-500",children:"Translation Preview"}),r.jsx("span",{className:"text-xs text-slate-400",children:z==="A"?(te==null?void 0:te.langBName)||Nt(i).name:(te==null?void 0:te.langAName)||Nt(n).name})]}),r.jsx("p",{className:"text-base text-indigo-600 dark:text-indigo-400 italic",children:re})]})]})]}),r.jsx("div",{className:"h-[280px] overflow-y-auto p-3 bg-slate-50 dark:bg-slate-800/30 rounded-xl",children:Q.length===0&&!H?r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[r.jsx(Gl,{className:"w-10 h-10 mb-2 opacity-50"}),r.jsx("p",{className:"text-sm text-center",children:C?"Press and hold a speaker button to start talking":"Click Start to begin conversation"})]}):r.jsxs(r.Fragment,{children:[Q.map(Re=>r.jsx(rM,{message:Re,onPlayAudio:Re.audioBase64?()=>ft(Re.id,Re.audioBase64):void 0,isPlaying:Ie===Re.id},Re.id)),r.jsx("div",{ref:ie})]})}),r.jsxs("div",{className:"flex justify-center gap-8 py-4",children:[r.jsx(y5,{speaker:"A",flag:(te==null?void 0:te.langAFlag)||Nt(n).flag,langName:(te==null?void 0:te.langAName)||Nt(n).name,isActive:z==="A",isRecording:H&&z==="A",isProcessing:$&&z==="A",disabled:!C||$,onPress:()=>Dt("A"),onRelease:Oe}),r.jsx(y5,{speaker:"B",flag:(te==null?void 0:te.langBFlag)||Nt(i).flag,langName:(te==null?void 0:te.langBName)||Nt(i).name,isActive:z==="B",isRecording:H&&z==="B",isProcessing:$&&z==="B",disabled:!C||$,onPress:()=>Dt("B"),onRelease:Oe})]}),r.jsx("p",{className:"text-center text-xs text-slate-400",children:"Press and hold to speak  Release to translate"})]}):r.jsxs("div",{className:"text-center py-10 px-4",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center shadow-xl shadow-orange-500/30",children:r.jsx(wo,{className:"w-8 h-8 text-white"})}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Unlock Conversation Mode"}),r.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4 text-sm max-w-md mx-auto",children:"Have real-time bilingual conversations. Perfect for travel, meetings, and making connections."}),r.jsxs("a",{href:"/billing",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-amber-400 to-orange-500 text-white rounded-xl font-bold text-sm shadow-lg",children:[r.jsx(aF,{className:"w-4 h-4"}),"Upgrade to Premium"]})]})}),e==="batch"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("select",{value:n,onChange:Re=>a(Re.target.value),className:"flex-1 bg-white dark:bg-slate-800 px-3 py-2 rounded-xl border border-slate-200 dark:border-slate-700 font-medium text-sm",children:fh.map(Re=>r.jsxs("option",{value:Re.code,children:[Re.flag," ",Re.name]},Re.code))}),r.jsx("button",{onClick:Qt,className:"p-2 bg-slate-100 dark:bg-slate-800 rounded-xl hover:bg-sky-100 transition-all",children:r.jsx(f1,{className:"w-4 h-4 text-slate-500"})}),r.jsx("select",{value:i,onChange:Re=>c(Re.target.value),className:"flex-1 bg-white dark:bg-slate-800 px-3 py-2 rounded-xl border border-slate-200 dark:border-slate-700 font-medium text-sm text-indigo-600",children:fh.map(Re=>r.jsxs("option",{value:Re.code,children:[Re.flag," ",Re.name]},Re.code))})]}),r.jsxs("div",{onClick:()=>{var Re;return(Re=tt.current)==null?void 0:Re.click()},className:`
                border-2 border-dashed rounded-xl p-6 text-center cursor-pointer transition-all
                ${P?"border-emerald-300 bg-emerald-50 dark:bg-emerald-900/20":"border-slate-300 hover:border-sky-400 hover:bg-slate-50 dark:hover:bg-slate-800/50"}
              `,children:[r.jsx("input",{ref:tt,type:"file",accept:"audio/*",onChange:ht,className:"hidden"}),P?r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(a5,{className:"w-8 h-8 text-emerald-600"}),r.jsx("p",{className:"font-medium text-sm text-slate-900 dark:text-white",children:P.name}),r.jsxs("p",{className:"text-xs text-slate-500",children:[(P.size/1024).toFixed(1)," KB"]})]}):r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(Pf,{className:"w-8 h-8 text-slate-400"}),r.jsx("p",{className:"font-medium text-sm text-slate-900 dark:text-white",children:"Upload audio file"}),r.jsx("p",{className:"text-xs text-slate-500",children:"WAV, MP3, FLAC, WebM"})]})]}),r.jsxs("button",{onClick:vt,disabled:!P||pe,className:"w-full py-3 bg-gradient-to-r from-sky-500 to-indigo-500 text-white rounded-xl font-bold text-sm shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:[pe?r.jsx(Xt,{className:"w-4 h-4 animate-spin"}):r.jsx(Qn,{className:"w-4 h-4"}),pe?"Processing...":"Translate Audio"]}),K&&r.jsxs("div",{className:"space-y-3 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-xs font-medium text-slate-500 mb-1",children:"Original"}),r.jsx("p",{className:"text-sm text-slate-900 dark:text-white bg-white dark:bg-slate-800 p-3 rounded-lg",children:K.originalText})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"text-xs font-medium text-indigo-500 mb-1",children:["Translation",r.jsxs("span",{className:"ml-2 opacity-50 font-normal",children:["(via ",A==="google"?"Google Cloud":f,")"]})]}),r.jsx("p",{className:"text-sm text-slate-900 dark:text-white bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg",children:K.translatedText})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>Ge(K.audioBase64),className:"flex items-center gap-1.5 px-3 py-1.5 bg-indigo-100 text-indigo-600 rounded-lg text-xs font-medium",children:[r.jsx(Ev,{className:"w-3 h-3"}),"Play"]}),r.jsxs("button",{onClick:()=>Vt(K.translatedText),className:"flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-600 rounded-lg text-xs font-medium",children:[Ue?r.jsx(ea,{className:"w-3 h-3"}):r.jsx(kv,{className:"w-3 h-3"}),"Copy"]})]})]})]})]})]})},aM=({trips:t,selectedTripId:e,onSelectTrip:s,isOpen:n,onToggle:a})=>{const i=t.find(c=>c.id===e);return r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:a,className:"w-full bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-2xl px-6 py-4 flex items-center justify-between hover:border-emerald-400 transition-all shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:r.jsx(NA,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Current Trip"}),r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:i?i.title:"Select a trip"}),i&&r.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[i.destination,"  ",i.expense_count," expenses"]})]})]}),r.jsx(Of,{className:`w-5 h-5 text-slate-400 transition-transform ${n?"rotate-180":""}`})]}),n&&r.jsx("div",{className:"absolute z-50 mt-2 w-full bg-white dark:bg-slate-800 border-2 border-slate-200 dark:border-slate-700 rounded-2xl shadow-xl max-h-96 overflow-y-auto custom-scrollbar",children:t.length===0?r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(Mn,{className:"w-12 h-12 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),r.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-1",children:"No active trips"}),r.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:"Create an active trip in Travel page first"})]}):r.jsx("div",{className:"py-2",children:t.map(c=>r.jsx("button",{onClick:()=>{s(c.id),a()},className:`
                    w-full px-6 py-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors
                    ${c.id===e?"bg-emerald-50 dark:bg-emerald-900/20":""}
                  `,children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-bold text-slate-900 dark:text-white mb-1",children:c.title}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:c.destination}),r.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[r.jsxs("span",{className:"text-slate-400",children:["Budget: RM ",c.budget.toLocaleString()]}),r.jsx("span",{className:"text-slate-400",children:""}),r.jsxs("span",{className:"text-slate-400",children:[c.expense_count," expenses"]})]})]}),c.id===e&&r.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-500 flex items-center justify-center flex-shrink-0",children:r.jsx(ea,{className:"w-4 h-4 text-white"})})]})},c.id))})})]})},iM=({stats:t,onEditBudget:e})=>{if(!t)return r.jsx("div",{className:"bg-gradient-to-br from-slate-200 to-slate-300 dark:from-slate-700 dark:to-slate-800 rounded-[2.5rem] p-8 text-slate-500 dark:text-slate-400 shadow-xl",children:r.jsx("p",{className:"text-center",children:"Select a trip to view budget"})});const s=Math.min(t.budget_percentage,100),n=t.is_over_budget;return r.jsxs("div",{className:`
      bg-gradient-to-br rounded-[2.5rem] p-8 text-white shadow-xl
      ${n?"from-red-500 to-red-600 shadow-red-500/20":"from-emerald-500 to-teal-600 shadow-emerald-500/20"}
    `,children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsx("p",{className:`font-bold uppercase tracking-wider text-xs ${n?"text-red-100":"text-emerald-100"}`,children:n?"Over Budget!":"Total Spent"}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:r.jsx(W4,{className:"w-4 h-4"})})]}),r.jsxs("h3",{className:"text-4xl font-black mb-1",children:["RM ",t.total_spent.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),r.jsxs("p",{className:"text-sm mb-4 opacity-90",children:["of RM ",t.budget.toLocaleString()," budget"]}),r.jsx("div",{className:"w-full bg-black/20 rounded-full h-2 mb-2 overflow-hidden",children:r.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ease-out ${n?"bg-red-200":"bg-white"}`,style:{width:`${s}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs font-medium opacity-90",children:[r.jsxs("span",{children:[s.toFixed(0),"% Used"]}),r.jsx("span",{className:"flex items-center gap-1",children:n?r.jsxs(r.Fragment,{children:[r.jsx(ib,{className:"w-3 h-3"}),"RM ",Math.abs(t.remaining).toLocaleString()," over"]}):r.jsxs(r.Fragment,{children:[r.jsx(I8,{className:"w-3 h-3"}),"RM ",t.remaining.toLocaleString()," left"]})})]}),Object.keys(t.by_category).length>0&&r.jsxs("div",{className:"mt-6 pt-6 border-t border-white/20",children:[r.jsx("p",{className:"text-xs font-bold uppercase tracking-wider mb-3 opacity-75",children:"Spending by Category"}),r.jsx("div",{className:"space-y-2",children:Object.entries(t.by_category).sort(([,a],[,i])=>i-a).slice(0,3).map(([a,i])=>r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"capitalize opacity-90",children:a}),r.jsxs("span",{className:"font-bold",children:["RM ",i.toLocaleString()]})]},a))})]})]})},lM=()=>{const t=za(),[e,s]=L.useState([]),[n,a]=L.useState(null),[i,c]=L.useState(null),[A,d]=L.useState([]),[f,u]=L.useState(!0),[p,x]=L.useState(!1),[m,j]=L.useState(!1),[w,S]=L.useState(!1),[C,F]=L.useState(!1),[U,_]=L.useState(!1),[z,I]=L.useState(""),[H,ee]=L.useState(null),[$,ce]=L.useState(null),[Q,q]=L.useState(null),[te,X]=L.useState({title:"",amount:0,category:"food"}),Ae=L.useCallback((V,K="success")=>{ee({message:V,type:K}),setTimeout(()=>ee(null),3e3)},[]),W=async()=>{u(!0),q(null);try{const V=await fetch("/api/expenses/active-trips",{credentials:"include"});if(V.ok){const K=await V.json();s(K.trips||[]),K.trips&&K.trips.length>0&&!n?a(K.trips[0].id):K.hasActiveTrips||q("No active trips found. Please create an active trip in Travel page.")}else V.status===401?q("Please log in to continue"):q("Failed to load trips")}catch(V){console.error("Error fetching active trips:",V),q("Network error")}finally{u(!1)}},se=async V=>{x(!0);try{const K=await fetch(`/api/expenses/trips/${V}/stats`,{credentials:"include"});if(K.ok){const ne=await K.json();c(ne)}}catch(K){console.error("Error fetching trip stats:",K)}finally{x(!1)}},Z=async V=>{j(!0);try{const K=await fetch(`/api/expenses/trips/${V}`,{credentials:"include"});if(K.ok){const ne=await K.json();d(ne.expenses||[])}}catch(K){console.error("Error fetching expenses:",K)}finally{j(!1)}},re=async()=>{if(!(!n||!z))try{const V=await fetch(`/api/expenses/trips/${n}/budget`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({budget:parseFloat(z)})});if(V.ok)_(!1),I(""),se(n),W(),Ae("Budget updated successfully!","success");else{const K=await V.json();Ae(`Failed to update budget: ${K.error}`,"error")}}catch(V){console.error("Error updating budget:",V),Ae("Failed to update budget","error")}},ve=async()=>{if(!te.title||!te.amount){Ae("Please fill in title and amount","info");return}if(!n){Ae("Please select a trip first","info");return}try{const V=await fetch("/api/expenses/",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:te.title,amount:te.amount,category:te.category,trip_id:n,transaction_date:new Date().toISOString().split("T")[0]})});if(V.ok)X({title:"",amount:0,category:"food"}),F(!1),se(n),Z(n),W(),Ae("Expense added successfully!","success");else{const K=await V.json();Ae(`Failed to add expense: ${K.error}`,"error")}}catch(V){console.error("Error adding expense:",V),Ae("Failed to add expense","error")}},ae=async()=>{if($)try{(await fetch(`/api/expenses/${$}`,{method:"DELETE",credentials:"include"})).ok&&n?(se(n),Z(n),W(),Ae("Expense deleted successfully","success")):Ae("Failed to delete expense","error")}catch(V){console.error("Error deleting expense:",V),Ae("Failed to delete expense","error")}finally{ce(null)}};L.useEffect(()=>{W()},[]),L.useEffect(()=>{n&&(se(n),Z(n))},[n]);const R=V=>{switch(V){case"food":return r.jsx(No,{className:"w-5 h-5"});case"transport":return r.jsx(K4,{className:"w-5 h-5"});case"shopping":return r.jsx(ab,{className:"w-5 h-5"});case"accommodation":return r.jsx(eb,{className:"w-5 h-5"});case"entertainment":return r.jsx(mT,{className:"w-5 h-5"});default:return r.jsx(Cv,{className:"w-5 h-5"})}},P=V=>{switch(V){case"food":return"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400";case"transport":return"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400";case"shopping":return"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400";case"accommodation":return"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400";case"entertainment":return"bg-pink-100 text-pink-600 dark:bg-pink-900/30 dark:text-pink-400";default:return"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400"}};return f?r.jsx("div",{className:"p-6 md:p-8 max-w-[1800px] mx-auto flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Xt,{className:"w-12 h-12 animate-spin text-emerald-600 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-500",children:"Loading trips..."})]})}):Q?r.jsx("div",{className:"p-6 md:p-8 max-w-[1800px] mx-auto",children:r.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-xl p-6 flex items-start gap-3",children:[r.jsx(ur,{className:"w-6 h-6 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-amber-900 dark:text-amber-100 mb-1",children:"No Active Trips"}),r.jsx("p",{className:"text-amber-700 dark:text-amber-300 mb-4",children:Q}),r.jsx("button",{onClick:()=>t("/travel"),className:"px-4 py-2 bg-amber-600 text-white rounded-lg font-medium hover:bg-amber-700 transition-colors",children:"Go to Travel Page"})]})]})}):r.jsxs("div",{className:"p-6 md:p-8 max-w-[1800px] mx-auto animate-fade-in-up relative",children:[H&&r.jsxs("div",{className:`fixed bottom-6 right-6 z-[100] flex items-center gap-3 px-4 py-3 rounded-xl shadow-2xl animate-fade-in-up transition-all ${H.type==="error"?"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/30 dark:text-red-300 dark:border-red-800":H.type==="success"?"bg-emerald-50 text-emerald-700 border border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-800":"bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700"}`,children:[H.type==="error"?r.jsx(ur,{className:"w-5 h-5"}):H.type==="success"?r.jsx(sa,{className:"w-5 h-5"}):r.jsx(Pa,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:H.message}),r.jsx("button",{onClick:()=>ee(null),className:"ml-2 hover:opacity-70",children:r.jsx(As,{className:"w-4 h-4"})})]}),$&&r.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-[60] p-4 animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-[2rem] p-8 shadow-2xl border border-white/20 dark:border-slate-700 text-center animate-scale-in",children:[r.jsx("div",{className:"w-14 h-14 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(na,{className:"w-7 h-7"})}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Delete Expense?"}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8 font-medium leading-relaxed text-sm",children:"This item will be removed from your spending history. This action cannot be undone."}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>ce(null),className:"flex-1 py-3 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-xl text-sm font-bold hover:bg-slate-200 dark:hover:bg-slate-700 transition-all active:scale-95",children:"Cancel"}),r.jsx("button",{onClick:ae,className:"flex-1 py-3 bg-red-600 hover:bg-red-500 text-white rounded-xl text-sm font-bold shadow-lg shadow-red-600/20 transition-all active:scale-95 flex items-center justify-center gap-2",children:"Yes, Delete"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_384px] gap-8",children:[r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"flex items-end justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:r.jsx(Kh,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),"Trip Wallet"]}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 font-medium ml-14",children:"Track expenses for each active trip."})]}),r.jsxs("button",{onClick:()=>F(!C),disabled:!n,className:"px-5 py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-xl text-sm font-bold shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all active:scale-95 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(ln,{className:"w-4 h-4"}),"Add Expense"]})]}),r.jsx(aM,{trips:e,selectedTripId:n,onSelectTrip:a,isOpen:w,onToggle:()=>S(!w)}),C&&r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2rem] p-6 shadow-xl border border-slate-200 dark:border-slate-700 animate-scale-in",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 block",children:"Item Name"}),r.jsx("input",{type:"text",placeholder:"e.g. Sushi Dinner",className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 font-medium focus:ring-2 focus:ring-emerald-500/20 outline-none",value:te.title,onChange:V=>X({...te,title:V.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 block",children:"Amount"}),r.jsx("input",{type:"number",placeholder:"0.00",className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 font-medium focus:ring-2 focus:ring-emerald-500/20 outline-none",value:te.amount||"",onChange:V=>X({...te,amount:Number(V.target.value)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 block",children:"Category"}),r.jsxs("select",{className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 font-medium outline-none",value:te.category,onChange:V=>X({...te,category:V.target.value}),children:[r.jsx("option",{value:"food",children:"Food & Drink"}),r.jsx("option",{value:"transport",children:"Transportation"}),r.jsx("option",{value:"accommodation",children:"Accommodation"}),r.jsx("option",{value:"shopping",children:"Shopping"}),r.jsx("option",{value:"entertainment",children:"Entertainment"}),r.jsx("option",{value:"other",children:"Other"})]})]})]}),r.jsx("div",{className:"p-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-700/50 rounded-xl mb-4",children:r.jsxs("p",{className:"text-xs text-emerald-700 dark:text-emerald-300 flex items-center gap-2",children:[r.jsx(ra,{className:"w-3 h-3"}),r.jsxs("span",{children:["This expense will be added to ",r.jsx("strong",{children:i==null?void 0:i.trip_title})]})]})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{F(!1),X({title:"",amount:0,category:"food"})},className:"flex-1 py-3 text-slate-500 font-bold hover:bg-slate-50 dark:hover:bg-slate-700 rounded-xl transition-colors",children:"Cancel"}),r.jsx("button",{onClick:ve,className:"flex-1 py-3 bg-emerald-500 text-white font-bold rounded-xl shadow-lg shadow-emerald-500/30 hover:bg-emerald-400 transition-all active:scale-95",children:"Save Expense"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:["Recent Transactions",A.length>0&&r.jsxs("span",{className:"text-sm font-normal text-slate-400 ml-2",children:["(",A.length," total)"]})]}),m?r.jsxs("div",{className:"text-center py-10",children:[r.jsx(Xt,{className:"w-8 h-8 animate-spin text-emerald-600 mx-auto mb-2"}),r.jsx("p",{className:"text-slate-400",children:"Loading expenses..."})]}):A.length===0?r.jsxs("div",{className:"text-center py-10 bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700",children:[r.jsx(Cv,{className:"w-12 h-12 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),r.jsx("p",{className:"text-slate-400",children:"No expenses yet for this trip."})]}):A.map(V=>r.jsxs("div",{className:"group bg-white/60 dark:bg-slate-800/60 backdrop-blur-xl border border-white/60 dark:border-slate-700/50 rounded-2xl p-4 flex items-center justify-between hover:scale-[1.01] hover:shadow-lg transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${P(V.category)}`,children:R(V.category)}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:V.title}),r.jsx("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:r.jsx("span",{children:V.date?new Date(V.date).toLocaleDateString():"No date"})})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:["RM ",V.amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),r.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:V.category})]}),r.jsx("button",{onClick:()=>ce(V.id),className:"opacity-0 group-hover:opacity-100 p-2 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all",children:r.jsx(As,{className:"w-4 h-4 text-red-500"})})]})]},V.id))]})]}),r.jsxs("div",{className:"w-full space-y-8",children:[r.jsx(iM,{stats:i,onEditBudget:()=>{_(!0),I((i==null?void 0:i.budget.toString())||"")}}),U&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 max-w-md w-full animate-scale-in",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4",children:"Update Budget"}),r.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["Set the budget for ",r.jsx("strong",{children:i==null?void 0:i.trip_title})]}),r.jsx("input",{type:"number",placeholder:"Enter budget amount",className:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 font-medium focus:ring-2 focus:ring-emerald-500/20 outline-none mb-4",value:z,onChange:V=>I(V.target.value)}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{_(!1),I("")},className:"flex-1 py-3 text-slate-500 font-bold hover:bg-slate-50 dark:hover:bg-slate-700 rounded-xl transition-colors",children:"Cancel"}),r.jsx("button",{onClick:re,className:"flex-1 py-3 bg-emerald-500 text-white font-bold rounded-xl shadow-lg shadow-emerald-500/30 hover:bg-emerald-400 transition-all",children:"Update"})]})]})})]})]})]})},oM=({user:t,onUpdateUser:e})=>{const[s,n]=L.useState({name:t.name,email:t.email||"",avatarUrl:t.avatarUrl}),[a,i]=L.useState(null),c=L.useRef(null),[A,d]=L.useState({currentPassword:"",newPassword:""}),[f,u]=L.useState("idle"),[p,x]=L.useState(""),[m,j]=L.useState(!1),[w,S]=L.useState({hasLength:!1,hasUpper:!1,hasLower:!1,hasNumber:!1,hasSpecial:!1}),[C,F]=L.useState("idle"),[U,_]=L.useState(null),[z,I]=L.useState(""),[H,ee]=L.useState(0),[$,ce]=L.useState(""),[Q,q]=L.useState("idle"),[te,X]=L.useState(""),[Ae,W]=L.useState(null),[se,Z]=L.useState(""),[re,ve]=L.useState(0),[ae,R]=L.useState(!1),[P,V]=L.useState(null),[K,ne]=L.useState(t.emailNotifications??!0),[pe,Ce]=L.useState(!0);L.useEffect(()=>{ne(t.emailNotifications??!0)},[t.emailNotifications]);const[Ue,Ne]=L.useState(!1),[Ie,Pe]=L.useState(!1),[ze,gt]=L.useState(null),ie=(pt,rt="success")=>{gt({message:pt,type:rt}),setTimeout(()=>gt(null),3e3)},Be=L.useCallback(pt=>{const rt={hasLength:pt.length>=8,hasUpper:/[A-Z]/.test(pt),hasLower:/[a-z]/.test(pt),hasNumber:/[0-9]/.test(pt),hasSpecial:/[!@#$%^&*(),.?":{}|<>]/.test(pt)};S(rt),j(Object.values(rt).every(Boolean))},[]),tt=async()=>{if(!A.currentPassword){u("error"),x("Please enter your current password.");return}u("loading"),x("");try{const pt=await fetch(`${_e}/auth/password-change/send-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({current_password:A.currentPassword})}),rt=await pt.json();pt.ok&&rt.status==="success"?(_(rt.token),F("verify_code"),ee(60),u("idle"),ie("Verification code sent to your email","success")):(u("error"),x(rt.message||"Failed to verify password."))}catch{u("error"),x("Network error.")}},Xe=async()=>{if(!z||z.length!==6){u("error"),x("Please enter the 6-digit code.");return}if(!m){u("error"),x("New password is too weak.");return}if(A.newPassword!==$){u("error"),x("Passwords do not match.");return}u("loading");try{const pt=await fetch(`${_e}/auth/password-change/confirm`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:U,code:z,new_password:A.newPassword})}),rt=await pt.json();pt.ok&&rt.status==="success"?(F("success"),u("success"),x("Password changed successfully!"),ie("Password updated successfully","success"),setTimeout(()=>{F("idle"),d({currentPassword:"",newPassword:""}),I(""),ce(""),_(null),u("idle"),x(""),j(!1)},2e3)):(u("error"),x(rt.message||"Failed to change password."))}catch{u("error"),x("Network error.")}},et=async()=>{if(!(H>0))try{const pt=await fetch(`${_e}/auth/password-change/resend-code`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:U})}),rt=await pt.json();pt.ok&&rt.status==="success"?(_(rt.token),ee(60),ie("Code resent successfully","success")):ie(rt.message||"Failed to resend","error")}catch{ie("Network error","error")}};wi.useEffect(()=>{if(H>0){const pt=setTimeout(()=>ee(rt=>rt-1),1e3);return()=>clearTimeout(pt)}},[H]),wi.useEffect(()=>{if(re>0){const pt=setTimeout(()=>ve(rt=>rt-1),1e3);return()=>clearTimeout(pt)}},[re]);const Tt=pt=>{var Ut;const rt=(Ut=pt.target.files)==null?void 0:Ut[0];if(rt){if(rt.size>1048576){ie("File is too large! Please upload an image smaller than 1MB.","error"),pt.target.value="";return}i(rt);const Ot=new FileReader;Ot.onloadend=()=>{n(Dt=>({...Dt,avatarUrl:Ot.result}))},Ot.readAsDataURL(rt)}},Nt=async()=>{Ne(!0);try{const pt=new FormData;pt.append("name",s.name),pt.append("emailNotifications",String(K)),a&&pt.append("avatar",a);const rt=await fetch(`${_e}/auth/update-profile`,{method:"PUT",credentials:"include",body:pt}),Ut=await rt.json();rt.ok?(Pe(!0),setTimeout(()=>Pe(!1),3e3),Ut.user&&e({...Ut.user}),i(null),ie("Profile updated successfully!","success")):ie(Ut.message||"Update failed","error")}catch(pt){console.error("Upload error:",pt),ie("Network error occurred. Please try again.","error")}finally{Ne(!1)}},Mt=()=>r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-500 bg-white dark:bg-slate-700/50 p-3 rounded-lg border border-slate-200 dark:border-slate-600 mt-2",children:[r.jsxs("div",{className:`flex items-center gap-1.5 ${w.hasLength?"text-emerald-500 font-bold":""}`,children:[w.hasLength?r.jsx(ea,{className:"w-3 h-3"}):r.jsx("div",{className:"w-3 h-3 rounded-full border border-slate-300 dark:border-slate-500"}),"Min 8 chars"]}),r.jsxs("div",{className:`flex items-center gap-1.5 ${w.hasUpper?"text-emerald-500 font-bold":""}`,children:[w.hasUpper?r.jsx(ea,{className:"w-3 h-3"}):r.jsx("div",{className:"w-3 h-3 rounded-full border border-slate-300 dark:border-slate-500"}),"Uppercase"]}),r.jsxs("div",{className:`flex items-center gap-1.5 ${w.hasLower?"text-emerald-500 font-bold":""}`,children:[w.hasLower?r.jsx(ea,{className:"w-3 h-3"}):r.jsx("div",{className:"w-3 h-3 rounded-full border border-slate-300 dark:border-slate-500"}),"Lowercase"]}),r.jsxs("div",{className:`flex items-center gap-1.5 ${w.hasNumber?"text-emerald-500 font-bold":""}`,children:[w.hasNumber?r.jsx(ea,{className:"w-3 h-3"}):r.jsx("div",{className:"w-3 h-3 rounded-full border border-slate-300 dark:border-slate-500"}),"Number"]}),r.jsxs("div",{className:`col-span-2 flex items-center gap-1.5 ${w.hasSpecial?"text-emerald-500 font-bold":""}`,children:[w.hasSpecial?r.jsx(ea,{className:"w-3 h-3"}):r.jsx("div",{className:"w-3 h-3 rounded-full border border-slate-300 dark:border-slate-500"}),"Special char (!@#$%^&*)"]})]}),Qt=()=>C==="idle"||C==="verify_current"?r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/30 rounded-2xl p-6 border border-slate-200 dark:border-slate-700/50",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(PT,{className:"w-5 h-5 text-sky-500"}),r.jsx("h4",{className:"font-bold text-slate-700 dark:text-white",children:"Change Password (Secure)"})]}),r.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"For your security, we'll send a verification code to your email."}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Current Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Vl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"password",placeholder:"",value:A.currentPassword,onChange:pt=>d({...A,currentPassword:pt.target.value}),className:"w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl py-3 pl-10 pr-4 text-sm font-medium outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 transition-all"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:f==="error"&&r.jsx("p",{className:"text-xs font-bold text-red-500",children:p})}),r.jsx("button",{onClick:tt,disabled:f==="loading"||!A.currentPassword,className:"px-5 py-2 bg-sky-600 text-white rounded-xl text-xs font-bold hover:bg-sky-700 transition-all shadow-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f==="loading"?r.jsx(Xt,{className:"w-3 h-3 animate-spin"}):r.jsxs(r.Fragment,{children:["Continue ",r.jsx(hd,{className:"w-3 h-3"})]})})]})]})]}):C==="verify_code"?r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/30 rounded-2xl p-6 border border-slate-200 dark:border-slate-700/50",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(jo,{className:"w-5 h-5 text-blue-500"}),r.jsx("h4",{className:"font-bold text-slate-700 dark:text-white",children:"Verify & Set New Password"})]}),r.jsxs("p",{className:"text-xs text-slate-500 mb-4",children:["Enter the 6-digit code sent to ",r.jsx("strong",{children:t.email})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Verification Code"}),r.jsx("div",{className:"relative",children:r.jsx("input",{type:"text",placeholder:"000000",value:z,onChange:pt=>I(pt.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,className:"w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl py-3 px-4 text-sm font-mono tracking-[0.3em] text-center font-bold outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all"})}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:et,disabled:H>0,className:"text-xs text-sky-600 hover:text-sky-700 font-medium disabled:text-slate-400",children:H>0?r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(on,{className:"w-3 h-3"})," Resend in ",H,"s"]}):r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(yl,{className:"w-3 h-3"})," Resend Code"]})})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Vl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"password",placeholder:"Min 8 characters",value:A.newPassword,onChange:pt=>{const rt=pt.target.value;d({...A,newPassword:rt}),Be(rt)},className:`w-full bg-white dark:bg-slate-800 border rounded-xl py-3 pl-10 pr-4 text-sm font-medium outline-none transition-all ${A.newPassword.length>0&&!m?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-slate-200 dark:border-slate-700 focus:ring-sky-500/20 focus:border-sky-500"}`})]}),A.newPassword.length>0&&Mt()]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Confirm New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Vl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"password",placeholder:"Confirm password",value:$,onChange:pt=>ce(pt.target.value),className:`w-full bg-white dark:bg-slate-800 border rounded-xl py-3 pl-10 pr-4 text-sm font-medium outline-none transition-all ${$.length>0&&$!==A.newPassword?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-slate-200 dark:border-slate-700 focus:ring-sky-500/20 focus:border-sky-500"}`})]}),$.length>0&&$!==A.newPassword&&r.jsx("p",{className:"text-xs text-red-500 font-bold",children:"Passwords do not match"})]}),r.jsxs("div",{className:"flex items-center justify-between pt-2",children:[r.jsx("button",{onClick:()=>{F("idle"),I(""),d({currentPassword:"",newPassword:""}),ce(""),u("idle"),x("")},className:"text-xs text-slate-500 hover:text-slate-700",children:" Back"}),r.jsxs("div",{className:"flex items-center gap-3",children:[f==="error"&&r.jsx("p",{className:"text-xs font-bold text-red-500",children:p}),r.jsx("button",{onClick:Xe,disabled:f==="loading"||z.length!==6||!m||A.newPassword!==$,className:"px-5 py-2 bg-emerald-600 text-white rounded-xl text-xs font-bold hover:bg-emerald-700 transition-all shadow-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f==="loading"?r.jsx(Xt,{className:"w-3 h-3 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(ea,{className:"w-3 h-3"})," Change Password"]})})]})]})]})]}):C==="success"?r.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 rounded-2xl p-6 border border-emerald-200 dark:border-emerald-800",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(sa,{className:"w-6 h-6 text-emerald-600"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-emerald-800 dark:text-emerald-200",children:"Password Changed!"}),r.jsx("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:"Your password has been updated successfully."})]})]})}):null;return r.jsxs("div",{className:"p-6 md:p-8 w-full max-w-4xl mx-auto animate-fade-in-up relative",children:[ze&&r.jsxs("div",{className:`fixed bottom-6 right-6 z-[100] flex items-center gap-3 px-4 py-3 rounded-xl shadow-2xl animate-fade-in-up transition-all ${ze.type==="error"?"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/30 dark:text-red-300 dark:border-red-800":ze.type==="success"?"bg-emerald-50 text-emerald-700 border border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-800":"bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700"}`,children:[ze.type==="error"?r.jsx(ur,{className:"w-5 h-5"}):ze.type==="success"?r.jsx(sa,{className:"w-5 h-5"}):r.jsx(Pa,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:ze.message}),r.jsx("button",{onClick:()=>gt(null),className:"ml-2 hover:opacity-70",children:r.jsx(As,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:r.jsx(ta,{className:"w-6 h-6 text-slate-600 dark:text-slate-300"})}),r.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"General Settings"})]}),r.jsxs("div",{className:"bg-white/60 dark:bg-slate-900/60 backdrop-blur-xl rounded-[2.5rem] p-8 shadow-sm border border-transparent hover:border-sky-300 dark:hover:border-indigo-500 transition-all duration-500 ease-out",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 mb-10 pb-10 border-b border-slate-200 dark:border-slate-800",children:[r.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var pt;return(pt=c.current)==null?void 0:pt.click()},children:[r.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-white dark:border-slate-800 shadow-xl ring-2 ring-slate-100 dark:ring-slate-700",children:r.jsx("img",{src:s.avatarUrl,alt:"Profile",className:"w-full h-full object-cover"})}),r.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:r.jsx(Xx,{className:"w-8 h-8 text-white"})}),r.jsx("input",{type:"file",ref:c,className:"hidden",accept:"image/*",onChange:Tt})]}),r.jsxs("div",{className:"text-center md:text-left",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Profile Photo"}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1 mb-4",children:"Click the image to upload a new photo. JPG, GIF or PNG."}),r.jsx("button",{onClick:()=>{var pt;return(pt=c.current)==null?void 0:pt.click()},className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-lg text-sm font-bold hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:"Change Photo"})]})]}),r.jsxs("div",{className:"space-y-6 max-w-2xl",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Personal Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Full Name"}),r.jsxs("div",{className:"relative",children:[r.jsx(ta,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",value:s.name,onChange:pt=>n({...s,name:pt.target.value}),className:"w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl py-3 pl-12 pr-4 font-medium outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 transition-all"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(ko,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"email",value:s.email,disabled:!0,className:"w-full bg-slate-100 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl py-3 pl-12 pr-4 font-medium outline-none text-slate-500 cursor-not-allowed"})]})]})]}),r.jsxs("div",{className:"pt-6 mt-6 border-t border-slate-200 dark:border-slate-800",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:"Security"}),t.authProvider==="google"||!t.email?r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4 flex items-center gap-3 text-slate-500 border border-slate-200 dark:border-slate-700",children:[r.jsx(jo,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:"You are logged in via Google. Password change is not applicable."})]}):Qt()]}),r.jsxs("div",{className:"pt-6 mt-6 border-t border-slate-200 dark:border-slate-800",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Preferences"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:r.jsx(sc,{className:"w-5 h-5 text-sky-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:"Email Notifications"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Receive trip updates and AI suggestions"})]})]}),r.jsx("button",{onClick:()=>ne(!K),className:`w-12 h-6 rounded-full p-1 cursor-pointer transition-colors duration-300 ${K?"bg-sky-500":"bg-slate-300 dark:bg-slate-700"}`,children:r.jsx("div",{className:`bg-white w-4 h-4 rounded-full shadow-sm transition-transform duration-300 ${K?"translate-x-6":"translate-x-0"}`})})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-lg shadow-sm",children:r.jsx(jo,{className:"w-5 h-5 text-emerald-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:"Data Privacy"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Allow AI to use travel history for better suggestions"})]})]}),r.jsx("button",{onClick:()=>Ce(!pe),className:`w-12 h-6 rounded-full p-1 cursor-pointer transition-colors duration-300 ${pe?"bg-emerald-500":"bg-slate-300 dark:bg-slate-700"}`,children:r.jsx("div",{className:`bg-white w-4 h-4 rounded-full shadow-sm transition-transform duration-300 ${pe?"translate-x-6":"translate-x-0"}`})})]})]})]}),r.jsx("div",{className:"pt-6 mt-6 flex justify-end",children:r.jsxs("button",{onClick:Nt,disabled:Ue,className:`w-full md:w-auto px-8 py-3 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-bold rounded-xl shadow-lg hover:bg-slate-800 dark:hover:bg-slate-200 transition-all flex items-center justify-center gap-2 ${Ue?"opacity-70 cursor-not-allowed":""}`,children:[Ue?r.jsx(Xt,{className:"w-5 h-5 animate-spin"}):Ie?r.jsx(sa,{className:"w-5 h-5"}):r.jsx(md,{className:"w-5 h-5"}),Ie?"Saved":Ue?"Saving...":"Save Changes"]})})]})]})]})},cM=({user:t,onUpdateUser:e})=>{const s=za(),[n]=n6(),[a,i]=L.useState("plans"),[c,A]=L.useState(!1),[d,f]=L.useState(null),[u,p]=L.useState(null),[x,m]=L.useState(null),[j,w]=L.useState(!1),[S,C]=L.useState([]),[F,U]=L.useState(!0),[_,z]=L.useState(""),[I,H]=L.useState(!1),[ee,$]=L.useState(null),[ce,Q]=L.useState(null),[q,te]=L.useState(""),[X,Ae]=L.useState([]),[W,se]=L.useState(!1),[Z,re]=L.useState("all"),[ve,ae]=L.useState(null),R={monthly:["Unlimited AI trip planning","Advanced route optimization","Priority support","Budget tracking","Calendar sync"],yearly:["Everything in Monthly","2 months FREE","Early access to new features","Exclusive travel tips","No price increases"],lifetime:["Everything in Yearly","Lifetime updates","VIP support","Transferable license","Exclusive community access"]};L.useEffect(()=>{V(),P();const ie=n.get("success"),Be=n.get("activated");ie==="true"&&(ae(" Payment successful! Your premium membership is updated."),setTimeout(()=>ae(null),5e3)),Be==="true"&&(ae(" Premium membership activated successfully!"),setTimeout(()=>ae(null),5e3))},[]),L.useEffect(()=>{a==="transactions"&&K()},[a,Z]),L.useEffect(()=>{if(u!=null&&u.pendingOrder){const ie=setInterval(ne,1e4);return()=>clearInterval(ie)}},[u]);const P=async()=>{try{U(!0);const ie=await fetch(`${_e}/api/payment/plans`,{credentials:"include"});if(ie.ok){const Be=await ie.json();C(Be.plans||[])}}catch(ie){console.error("Failed to fetch plans:",ie)}finally{U(!1)}},V=async()=>{try{const ie=await fetch(`${_e}/api/payment/subscription-status`,{credentials:"include"});if(ie.ok){const Be=await ie.json();p(Be)}}catch(ie){console.error("Failed to fetch subscription status:",ie)}},K=async()=>{try{se(!0);const ie=Z==="all"?`${_e}/api/payment/transactions`:`${_e}/api/payment/transactions?status=${Z}`,tt=await(await fetch(ie,{credentials:"include"})).json();Ae(tt.transactions||[])}catch(ie){console.error("Failed to fetch transactions:",ie)}finally{se(!1)}},ne=async()=>{var ie;if(u!=null&&u.pendingOrder){w(!0);try{const tt=await(await fetch(`${_e}/api/payment/verify-order/${u.pendingOrder.orderReference}`,{method:"POST",credentials:"include"})).json();tt.success&&((ie=tt.order)==null?void 0:ie.status)==="active"&&(await V(),e({isPremium:!0}),ae(" Payment confirmed! Your plan is now active."),setTimeout(()=>ae(null),5e3))}catch(Be){console.error("Error checking order status:",Be)}finally{w(!1)}}},pe=async ie=>{if(!_.trim()){te("Please enter a voucher code");return}H(!0),te("");const Be=ie!==void 0?ie:d==null?void 0:d.id;try{const Xe=await(await fetch(`${_e}/api/payment/validate-voucher`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({code:_.trim(),planId:Be||null})})).json();Xe.valid?($(Xe.voucher),Q(Xe.preview),te(""),Xe.voucher.type==="activation"&&f(null)):(te(Xe.error||"Invalid voucher code"),Q(null))}catch{te("Failed to validate voucher")}finally{H(!1)}},Ce=()=>{$(null),Q(null),z(""),te("")},Ue=async ie=>{A(!0),ie&&f(ie),m(null);try{const Be={};if(ie&&(Be.planId=ie.id),ee&&(Be.voucherCode=ee.code),!ie&&(ee==null?void 0:ee.type)!=="activation")throw new Error("Please select a plan.");const tt=await fetch(`${_e}/api/payment/create-subscription`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Be)}),Xe=await tt.json();if(Xe.activated){await V(),e({isPremium:!0}),ae(" Premium membership activated!"),Ce();return}if(tt.ok&&Xe.paymentUrl)window.location.href=Xe.paymentUrl;else if(Xe.redirectTo)await V(),e({isPremium:!0}),ae(" Premium membership activated with voucher!"),Ce();else throw new Error(Xe.error||"Payment creation failed")}catch(Be){m(Be.message||"Payment failed")}finally{A(!1)}},Ne=async ie=>{try{const tt=await(await fetch(`${_e}/api/payment/continue-payment/${ie}`,{credentials:"include"})).json();tt.paymentUrl?window.location.href=tt.paymentUrl:tt.error&&m(tt.error)}catch{m("Failed to continue payment")}},Ie=async ie=>{try{(await fetch(`${_e}/api/payment/cancel-order/${ie}`,{method:"POST",credentials:"include"})).ok&&(K(),V())}catch(Be){console.error("Failed to cancel order:",Be)}},Pe=ie=>{s(`/receipt?order_id=${ie}`)},ze=ie=>{const Be={pending:{icon:on,color:"text-amber-600 bg-amber-50 dark:bg-amber-900/20",label:"Pending"},paid:{icon:zn,color:"text-green-600 bg-green-50 dark:bg-green-900/20",label:"Paid"},active:{icon:zn,color:"text-green-600 bg-green-50 dark:bg-green-900/20",label:"Active"},cancelled:{icon:rc,color:"text-red-600 bg-red-50 dark:bg-red-900/20",label:"Cancelled"},expired:{icon:ga,color:"text-gray-600 bg-gray-50 dark:bg-gray-800",label:"Expired"},refunded:{icon:rc,color:"text-blue-600 bg-blue-50 dark:bg-blue-900/20",label:"Refunded"},failed:{icon:rc,color:"text-red-600 bg-red-50 dark:bg-red-900/20",label:"Failed"}},tt=Be[ie]||Be.pending,Xe=tt.icon;return r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${tt.color}`,children:[r.jsx(Xe,{size:14}),tt.label]})},gt=ie=>ie.durationDays===null||ie.slug==="lifetime"?"one-time":ie.durationDays===30||ie.slug==="monthly"?"month":ie.durationDays===365||ie.slug==="yearly"?"year":`${ie.durationDays} days`;return r.jsxs("div",{className:"p-6 md:p-8 w-full max-w-7xl mx-auto animate-fade-in-up",children:[ve&&r.jsxs("div",{className:"mb-6 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-4 flex items-center gap-3",children:[r.jsx(zn,{className:"w-5 h-5 text-green-600"}),r.jsx("p",{className:"text-green-700 dark:text-green-400 font-medium",children:ve})]}),(u==null?void 0:u.pendingOrder)&&r.jsx("div",{className:"mb-8 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-6 shadow-sm",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"flex-shrink-0",children:j?r.jsx(Xt,{className:"w-6 h-6 text-amber-600 animate-spin"}):r.jsx(ur,{className:"w-6 h-6 text-amber-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-bold text-amber-900 dark:text-amber-100 mb-2",children:"Payment in Progress"}),r.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-400 mb-4",children:["Order ",r.jsx("span",{className:"font-mono font-bold",children:u.pendingOrder.orderReference})," is pending payment.",u.pendingOrder.remainingTime>0&&r.jsxs("span",{className:"ml-2",children:["Expires in ",Math.floor(u.pendingOrder.remainingTime/60),":",String(u.pendingOrder.remainingTime%60).padStart(2,"0")]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs("button",{onClick:()=>Ne(u.pendingOrder.orderReference),className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2",children:[r.jsx(Df,{className:"w-4 h-4"}),"Continue Payment"]}),r.jsxs("button",{onClick:()=>ne(),disabled:j,className:"px-4 py-2 bg-white dark:bg-slate-800 border border-amber-200 dark:border-amber-800 text-amber-700 dark:text-amber-400 rounded-lg hover:bg-amber-50 dark:hover:bg-amber-900/10 transition-colors flex items-center gap-2",children:[j?r.jsx(Xt,{className:"w-4 h-4 animate-spin"}):r.jsx(zn,{className:"w-4 h-4"}),"Refresh Status"]})]})]})]})}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-amber-500/20 to-orange-500/20 rounded-full mb-4",children:[r.jsx(wo,{className:"w-5 h-5 text-amber-600"}),r.jsx("span",{className:"text-sm font-bold text-amber-700 dark:text-amber-400",children:"Premium Plans"})]}),r.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 dark:text-white mb-4",children:["Upgrade to ",r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-amber-500 to-orange-600",children:"Premium"})]}),r.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 max-w-2xl mx-auto",children:"Unlock unlimited AI-powered trip planning and advanced features"})]}),(u==null?void 0:u.isPremium)&&r.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-2xl p-6 mb-8 border border-amber-200 dark:border-amber-800",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Qn,{className:"w-6 h-6 text-amber-600"}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Active Premium Subscription"})]}),u.subscriptionEndDate?r.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:[r.jsx(Mn,{className:"w-4 h-4 inline mr-2"}),"Valid until: ",new Date(u.subscriptionEndDate).toLocaleDateString("en-MY",{year:"numeric",month:"long",day:"numeric"})]}):r.jsxs("p",{className:"text-slate-600 dark:text-slate-400 flex items-center gap-2",children:[r.jsx(wo,{className:"w-4 h-4 text-amber-600"}),r.jsx("span",{className:"font-bold text-amber-700",children:"Lifetime Access"})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden mb-8",children:[r.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-800",children:[r.jsxs("button",{onClick:()=>i("plans"),className:`flex-1 px-6 py-4 flex items-center justify-center gap-2 font-medium transition-colors ${a==="plans"?"text-amber-600 bg-amber-50 dark:bg-amber-900/20 border-b-2 border-amber-500":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[r.jsx(Kh,{size:18}),r.jsx("span",{className:"hidden sm:inline",children:"Plans"})]}),r.jsxs("button",{onClick:()=>i("transactions"),className:`flex-1 px-6 py-4 flex items-center justify-center gap-2 font-medium transition-colors ${a==="transactions"?"text-amber-600 bg-amber-50 dark:bg-amber-900/20 border-b-2 border-amber-500":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[r.jsx(FT,{size:18}),r.jsx("span",{className:"hidden sm:inline",children:"Transactions"})]}),r.jsxs("button",{onClick:()=>i("voucher"),className:`flex-1 px-6 py-4 flex items-center justify-center gap-2 font-medium transition-colors ${a==="voucher"?"text-amber-600 bg-amber-50 dark:bg-amber-900/20 border-b-2 border-amber-500":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[r.jsx(Qh,{size:18}),r.jsx("span",{className:"hidden sm:inline",children:"Redeem Code"})]})]}),r.jsxs("div",{className:"p-6",children:[x&&r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 mb-6 flex items-center gap-3",children:[r.jsx(ur,{className:"w-5 h-5 text-red-600"}),r.jsx("p",{className:"text-red-700 dark:text-red-400",children:x}),r.jsx("button",{onClick:()=>m(null),className:"ml-auto text-red-400 hover:text-red-600",children:r.jsx(As,{size:18})})]}),a==="plans"&&r.jsx("div",{children:F?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx(Xt,{className:"w-8 h-8 animate-spin text-amber-500"})}):r.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:S.map(ie=>{var Ut;const Be=R[ie.slug]||R.monthly,tt=(d==null?void 0:d.id)===ie.id,Xe=tt&&ce,et=ie.actionType||"purchase",Tt=ie.canPurchase!==!1;let Nt=Df,Mt="Subscribe Now",Qt=!1;et==="upgrade"?(Mt="Upgrade Plan",Nt=ib,Qt=!0):et==="renew"?(Mt="Renew Subscription",Nt=yl):et==="blocked"?(Mt="Current Plan is Higher",Nt=Vl):u!=null&&u.isPremium&&ie.slug==="lifetime"&&!u.subscriptionEndDate&&(Mt="Current Plan",Nt=ea),((Ut=u==null?void 0:u.currentSubscription)==null?void 0:Ut.planId)===ie.id&&et==="renew"&&(Mt="Renew / Extend");const rt=c||!Tt;return r.jsxs("div",{onClick:()=>{(!rt||et!=="blocked")&&(f(ie),_.trim()&&pe(ie.id))},className:`relative bg-white dark:bg-slate-800 rounded-2xl p-6 border-2 transition-all duration-300 ${rt?"opacity-80":"cursor-pointer hover:scale-[1.02]"} ${ie.isFeatured||ie.slug==="yearly"?"border-amber-500 shadow-xl shadow-amber-500/20":tt?"border-amber-400":"border-slate-200 dark:border-slate-700 hover:border-amber-300"}`,children:[(ie.isFeatured||ie.slug==="yearly")&&r.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-4 py-1 bg-gradient-to-r from-amber-500 to-orange-600 text-white text-xs font-bold rounded-full shadow-lg",children:"Most Popular"}),r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:ie.name}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:ie.description}),r.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[Xe?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"text-2xl text-slate-400 line-through",children:["RM ",ce.originalPrice]}),r.jsxs("span",{className:"text-3xl font-bold text-green-600",children:["RM ",ce.finalPrice.toFixed(2)]})]}):r.jsxs("span",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:["RM ",ie.price]}),r.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["/",gt(ie)]})]}),Xe&&r.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Save RM ",ce.discount.toFixed(2),"!"]})]}),r.jsx("ul",{className:"space-y-3 mb-6",children:Be.map((rs,Ot)=>r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx(ea,{className:"w-5 h-5 text-emerald-500 flex-shrink-0 mt-0.5"}),r.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:rs})]},Ot))}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("button",{onClick:rs=>{rs.stopPropagation(),rt||Ue(ie)},disabled:rt,className:`w-full py-3 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${rt?"bg-slate-100 dark:bg-slate-700 text-slate-400 dark:text-slate-500 cursor-not-allowed":ie.isFeatured||ie.slug==="yearly"?"bg-gradient-to-r from-amber-500 to-orange-600 text-white hover:shadow-lg hover:shadow-amber-500/50":"bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-white hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:c&&(d==null?void 0:d.id)===ie.id?r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Nt,{className:"w-5 h-5"}),Mt]})}),Qt&&!rt&&r.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 text-center font-medium animate-pulse",children:" Remaining days will be added to new plan!"}),et==="blocked"&&r.jsx("p",{className:"text-xs text-slate-400 text-center",children:"You are on a higher tier plan."})]})]},ie.id)})})}),a==="transactions"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Transaction History"}),r.jsxs("select",{value:Z,onChange:ie=>re(ie.target.value),className:"px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm",children:[r.jsx("option",{value:"all",children:"All"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"paid",children:"Paid"}),r.jsx("option",{value:"expired",children:"Expired"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),W?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx(Xt,{className:"w-8 h-8 animate-spin text-amber-500"})}):X.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(X4,{className:"w-12 h-12 mx-auto mb-3 text-slate-300 dark:text-slate-600"}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No transactions found"})]}):r.jsx("div",{className:"space-y-4",children:X.map(ie=>r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:ie.planName}),r.jsx("p",{className:"text-sm text-slate-500 font-mono",children:ie.orderReference}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:ie.createdAt})]}),r.jsxs("div",{className:"text-right",children:[ze(ie.status),r.jsxs("p",{className:"mt-2 font-bold text-lg text-slate-900 dark:text-white",children:["RM ",ie.amount.toFixed(2)]}),ie.discountAmount>0&&r.jsxs("p",{className:"text-xs text-green-600",children:["-RM ",ie.discountAmount.toFixed(2)," discount"]})]})]}),ie.canContinuePayment&&ie.status==="pending"&&r.jsxs("div",{className:"mt-4 flex gap-2",children:[r.jsxs("button",{onClick:()=>Ne(ie.orderReference),className:"flex-1 py-2.5 bg-amber-500 hover:bg-amber-600 text-white font-medium rounded-lg flex items-center justify-center gap-2",children:[r.jsx(Cp,{size:18}),"Continue Payment"]}),r.jsx("button",{onClick:()=>Ie(ie.orderReference),className:"px-4 py-2.5 border border-red-200 text-red-600 hover:bg-red-50 rounded-lg",children:"Cancel"})]}),["paid","active"].includes(ie.status)&&ie.paymentMethod!=="activation_code"&&r.jsxs("button",{onClick:()=>Pe(ie.orderReference),className:"mt-4 w-full py-2.5 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg flex items-center justify-center gap-2 hover:bg-slate-100 dark:hover:bg-slate-700",children:[r.jsx(Kl,{size:18}),"View Receipt"]}),ie.voucherCode&&r.jsxs("p",{className:"mt-3 text-xs text-slate-500",children:["Voucher: ",r.jsx("span",{className:"font-mono bg-slate-200 dark:bg-slate-700 px-1.5 py-0.5 rounded",children:ie.voucherCode})]})]},ie.id))})]}),a==="voucher"&&r.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(Qh,{className:"w-12 h-12 mx-auto mb-3 text-amber-500"}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Redeem Code"}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Enter your activation code or discount voucher below."})]}),!ee&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Jg,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",value:_,onChange:ie=>z(ie.target.value.toUpperCase()),placeholder:"ENTER CODE HERE",className:"w-full pl-12 pr-4 py-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl font-mono uppercase text-lg tracking-wider focus:ring-2 focus:ring-amber-500 focus:border-transparent transition-all shadow-sm",onKeyDown:ie=>ie.key==="Enter"&&pe()})]}),r.jsx("button",{onClick:()=>pe(),disabled:!_.trim()||I,className:"w-full py-3.5 bg-amber-500 hover:bg-amber-600 text-white font-bold rounded-xl disabled:opacity-50 flex items-center justify-center gap-2 shadow-lg shadow-amber-500/20 transition-all hover:scale-[1.02]",children:I?r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"w-5 h-5 animate-spin"}),"Validating..."]}):r.jsxs(r.Fragment,{children:["Check Code ",r.jsx(hd,{size:18})]})}),q&&r.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/50 rounded-lg flex items-center justify-center gap-2 text-red-600 dark:text-red-400 text-sm animate-shake",children:[r.jsx(ur,{size:16}),q]})]}),(ee==null?void 0:ee.type)==="activation"&&r.jsx("div",{className:"animate-fade-in-up",children:r.jsx("div",{className:"p-1 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-2xl shadow-xl",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Qn,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:"Premium Activation"}),r.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Code: ",r.jsx("span",{className:"font-mono font-bold text-purple-600",children:ee.code})]}),r.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-4 mb-6 border border-purple-100 dark:border-purple-800/50",children:[r.jsx("p",{className:"text-sm text-purple-800 dark:text-purple-300 mb-1",children:"You will receive:"}),r.jsxs("p",{className:"text-2xl font-bold text-purple-700 dark:text-purple-400",children:[ee.activationDays?`${ee.activationDays} Days`:"Lifetime"," Premium"]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>Ue(),disabled:c,className:"w-full py-4 bg-purple-600 hover:bg-purple-700 text-white font-bold rounded-xl flex items-center justify-center gap-2 shadow-lg shadow-purple-600/30 transition-all hover:scale-[1.02]",children:c?r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"w-5 h-5 animate-spin"}),"Activating..."]}):r.jsxs(r.Fragment,{children:["Activate Now ",r.jsx(Qn,{className:"w-5 h-5"})]})}),r.jsx("button",{onClick:Ce,className:"text-sm text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 underline",children:"Use a different code"})]})]})})}),(ee==null?void 0:ee.type)==="discount"&&r.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Jg,{className:"w-5 h-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-mono font-bold text-green-700 dark:text-green-400",children:ee.code}),r.jsx("p",{className:"text-sm text-green-600",children:ee.discountType==="percentage"?`${ee.discountValue}% Discount`:`RM${ee.discountValue} Off`})]})]}),r.jsx("button",{onClick:Ce,className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:r.jsx(As,{size:18})})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"w-6 h-6 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),"Select a Plan"]}),r.jsx("div",{className:"grid grid-cols-1 gap-3",children:S.map(ie=>r.jsxs("button",{onClick:()=>{ie.canPurchase!==!1&&(f(ie),_.trim()&&pe(ie.id))},disabled:ie.canPurchase===!1&&ie.actionType==="blocked",className:`flex items-center justify-between p-4 rounded-xl border-2 transition-all ${(d==null?void 0:d.id)===ie.id?"border-amber-500 bg-amber-50 dark:bg-amber-900/10":"border-slate-200 dark:border-slate-700 hover:border-amber-200"} ${ie.canPurchase===!1?"opacity-60 cursor-not-allowed":""}`,children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:ie.name}),r.jsx("p",{className:"text-xs text-slate-500",children:ie.description})]}),r.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:["RM ",ie.price]})]},ie.id))})]}),d&&r.jsxs("div",{className:"animate-fade-in-up",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsxs("h4",{className:"font-medium text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx("span",{className:"w-6 h-6 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),"Confirm & Pay"]}),r.jsx("button",{onClick:()=>pe(),className:"text-xs text-amber-600 underline",children:"Refresh Price"})]}),r.jsxs("div",{className:"p-5 bg-slate-50 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[ce?r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-slate-500",children:["Plan Price (",d.name,")"]}),r.jsxs("span",{className:"text-slate-900 dark:text-white",children:["RM ",d.price.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-green-600 font-medium",children:[r.jsx("span",{children:"Voucher Applied"}),r.jsxs("span",{children:["-RM ",ce.discount.toFixed(2)]})]}),r.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-3 flex justify-between items-end",children:[r.jsx("span",{className:"text-slate-900 dark:text-white font-bold",children:"Total Amount"}),r.jsxs("span",{className:"text-2xl font-bold text-amber-600",children:["RM ",ce.finalPrice.toFixed(2)]})]})]}):r.jsxs("div",{className:"text-center py-4 text-slate-500 text-sm",children:[r.jsx(Xt,{className:"w-4 h-4 animate-spin mx-auto mb-2"}),"Calculating discount..."]}),r.jsx("button",{onClick:()=>Ue(d),disabled:c||!ce,className:"w-full mt-5 py-3.5 bg-gradient-to-r from-amber-500 to-orange-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 shadow-lg shadow-amber-500/30 hover:scale-[1.02] transition-transform disabled:opacity-50 disabled:scale-100",children:c?r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):r.jsxs(r.Fragment,{children:["Proceed to Payment ",r.jsx(hd,{size:18})]})})]})]})]})]})]})]})]})};var w1={exports:{}};const AM="modulepreload",dM=function(t){return"/"+t},w5={},j1=function(e,s,n){let a=Promise.resolve();if(s&&s.length>0){let c=function(f){return Promise.all(f.map(u=>Promise.resolve(u).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const A=document.querySelector("meta[property=csp-nonce]"),d=(A==null?void 0:A.nonce)||(A==null?void 0:A.getAttribute("nonce"));a=c(s.map(f=>{if(f=dM(f),f in w5)return;w5[f]=!0;const u=f.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const x=document.createElement("link");if(x.rel=u?"stylesheet":AM,u||(x.as="script"),x.crossOrigin="",x.href=f,d&&x.setAttribute("nonce",d),document.head.appendChild(x),u)return new Promise((m,j)=>{x.addEventListener("load",m),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(c){const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=c,window.dispatchEvent(A),!A.defaultPrevented)throw c}return a.then(c=>{for(const A of c||[])A.status==="rejected"&&i(A.reason);return e().catch(i)})};function Rr(t){"@babel/helpers - typeof";return Rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rr(t)}var Ic=Uint8Array,yo=Uint16Array,Vy=Int32Array,$y=new Ic([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Gy=new Ic([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),j5=new Ic([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xB=function(t,e){for(var s=new yo(31),n=0;n<31;++n)s[n]=e+=1<<t[n-1];for(var a=new Vy(s[30]),n=1;n<30;++n)for(var i=s[n];i<s[n+1];++i)a[i]=i-s[n]<<5|n;return{b:s,r:a}},bB=xB($y,2),uM=bB.b,Dv=bB.r;uM[28]=258,Dv[258]=28;var hM=xB(Gy,0),N5=hM.r,Rv=new yo(32768);for(var vn=0;vn<32768;++vn){var au=(vn&43690)>>1|(vn&21845)<<1;au=(au&52428)>>2|(au&13107)<<2,au=(au&61680)>>4|(au&3855)<<4,Rv[vn]=((au&65280)>>8|(au&255)<<8)>>1}var op=(function(t,e,s){for(var n=t.length,a=0,i=new yo(e);a<n;++a)t[a]&&++i[t[a]-1];var c=new yo(e);for(a=1;a<e;++a)c[a]=c[a-1]+i[a-1]<<1;var A;if(s){A=new yo(1<<e);var d=15-e;for(a=0;a<n;++a)if(t[a])for(var f=a<<4|t[a],u=e-t[a],p=c[t[a]-1]++<<u,x=p|(1<<u)-1;p<=x;++p)A[Rv[p]>>d]=f}else for(A=new yo(n),a=0;a<n;++a)t[a]&&(A[a]=Rv[c[t[a]-1]++]>>15-t[a]);return A}),Ih=new Ic(288);for(var vn=0;vn<144;++vn)Ih[vn]=8;for(var vn=144;vn<256;++vn)Ih[vn]=9;for(var vn=256;vn<280;++vn)Ih[vn]=7;for(var vn=280;vn<288;++vn)Ih[vn]=8;var ex=new Ic(32);for(var vn=0;vn<32;++vn)ex[vn]=5;var fM=op(Ih,9,0),pM=op(ex,5,0),vB=function(t){return(t+7)/8|0},mM=function(t,e,s){return(s==null||s>t.length)&&(s=t.length),new Ic(t.subarray(e,s))},nd=function(t,e,s){s<<=e&7;var n=e/8|0;t[n]|=s,t[n+1]|=s>>8},Y0=function(t,e,s){s<<=e&7;var n=e/8|0;t[n]|=s,t[n+1]|=s>>8,t[n+2]|=s>>16},N1=function(t,e){for(var s=[],n=0;n<t.length;++n)t[n]&&s.push({s:n,f:t[n]});var a=s.length,i=s.slice();if(!a)return{t:wB,l:0};if(a==1){var c=new Ic(s[0].s+1);return c[s[0].s]=1,{t:c,l:1}}s.sort(function(z,I){return z.f-I.f}),s.push({s:-1,f:25001});var A=s[0],d=s[1],f=0,u=1,p=2;for(s[0]={s:-1,f:A.f+d.f,l:A,r:d};u!=a-1;)A=s[s[f].f<s[p].f?f++:p++],d=s[f!=u&&s[f].f<s[p].f?f++:p++],s[u++]={s:-1,f:A.f+d.f,l:A,r:d};for(var x=i[0].s,n=1;n<a;++n)i[n].s>x&&(x=i[n].s);var m=new yo(x+1),j=Hv(s[u-1],m,0);if(j>e){var n=0,w=0,S=j-e,C=1<<S;for(i.sort(function(I,H){return m[H.s]-m[I.s]||I.f-H.f});n<a;++n){var F=i[n].s;if(m[F]>e)w+=C-(1<<j-m[F]),m[F]=e;else break}for(w>>=S;w>0;){var U=i[n].s;m[U]<e?w-=1<<e-m[U]++-1:++n}for(;n>=0&&w;--n){var _=i[n].s;m[_]==e&&(--m[_],++w)}j=e}return{t:new Ic(m),l:j}},Hv=function(t,e,s){return t.s==-1?Math.max(Hv(t.l,e,s+1),Hv(t.r,e,s+1)):e[t.s]=s},B5=function(t){for(var e=t.length;e&&!t[--e];);for(var s=new yo(++e),n=0,a=t[0],i=1,c=function(d){s[n++]=d},A=1;A<=e;++A)if(t[A]==a&&A!=e)++i;else{if(!a&&i>2){for(;i>138;i-=138)c(32754);i>2&&(c(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(c(a),--i;i>6;i-=6)c(8304);i>2&&(c(i-3<<5|8208),i=0)}for(;i--;)c(a);i=1,a=t[A]}return{c:s.subarray(0,n),n:e}},J0=function(t,e){for(var s=0,n=0;n<e.length;++n)s+=t[n]*e[n];return s},yB=function(t,e,s){var n=s.length,a=vB(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var i=0;i<n;++i)t[a+i+4]=s[i];return(a+4+n)*8},k5=function(t,e,s,n,a,i,c,A,d,f,u){nd(e,u++,s),++a[256];for(var p=N1(a,15),x=p.t,m=p.l,j=N1(i,15),w=j.t,S=j.l,C=B5(x),F=C.c,U=C.n,_=B5(w),z=_.c,I=_.n,H=new yo(19),ee=0;ee<F.length;++ee)++H[F[ee]&31];for(var ee=0;ee<z.length;++ee)++H[z[ee]&31];for(var $=N1(H,7),ce=$.t,Q=$.l,q=19;q>4&&!ce[j5[q-1]];--q);var te=f+5<<3,X=J0(a,Ih)+J0(i,ex)+c,Ae=J0(a,x)+J0(i,w)+c+14+3*q+J0(H,ce)+2*H[16]+3*H[17]+7*H[18];if(d>=0&&te<=X&&te<=Ae)return yB(e,u,t.subarray(d,d+f));var W,se,Z,re;if(nd(e,u,1+(Ae<X)),u+=2,Ae<X){W=op(x,m,0),se=x,Z=op(w,S,0),re=w;var ve=op(ce,Q,0);nd(e,u,U-257),nd(e,u+5,I-1),nd(e,u+10,q-4),u+=14;for(var ee=0;ee<q;++ee)nd(e,u+3*ee,ce[j5[ee]]);u+=3*q;for(var ae=[F,z],R=0;R<2;++R)for(var P=ae[R],ee=0;ee<P.length;++ee){var V=P[ee]&31;nd(e,u,ve[V]),u+=ce[V],V>15&&(nd(e,u,P[ee]>>5&127),u+=P[ee]>>12)}}else W=fM,se=Ih,Z=pM,re=ex;for(var ee=0;ee<A;++ee){var K=n[ee];if(K>255){var V=K>>18&31;Y0(e,u,W[V+257]),u+=se[V+257],V>7&&(nd(e,u,K>>23&31),u+=$y[V]);var ne=K&31;Y0(e,u,Z[ne]),u+=re[ne],ne>3&&(Y0(e,u,K>>5&8191),u+=Gy[ne])}else Y0(e,u,W[K]),u+=se[K]}return Y0(e,u,W[256]),u+se[256]},gM=new Vy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),wB=new Ic(0),xM=function(t,e,s,n,a,i){var c=i.z||t.length,A=new Ic(n+c+5*(1+Math.ceil(c/7e3))+a),d=A.subarray(n,A.length-a),f=i.l,u=(i.r||0)&7;if(e){u&&(d[0]=i.r>>3);for(var p=gM[e-1],x=p>>13,m=p&8191,j=(1<<s)-1,w=i.p||new yo(32768),S=i.h||new yo(j+1),C=Math.ceil(s/3),F=2*C,U=function(gt){return(t[gt]^t[gt+1]<<C^t[gt+2]<<F)&j},_=new Vy(25e3),z=new yo(288),I=new yo(32),H=0,ee=0,$=i.i||0,ce=0,Q=i.w||0,q=0;$+2<c;++$){var te=U($),X=$&32767,Ae=S[te];if(w[X]=Ae,S[te]=X,Q<=$){var W=c-$;if((H>7e3||ce>24576)&&(W>423||!f)){u=k5(t,d,0,_,z,I,ee,ce,q,$-q,u),ce=H=ee=0,q=$;for(var se=0;se<286;++se)z[se]=0;for(var se=0;se<30;++se)I[se]=0}var Z=2,re=0,ve=m,ae=X-Ae&32767;if(W>2&&te==U($-ae))for(var R=Math.min(x,W)-1,P=Math.min(32767,$),V=Math.min(258,W);ae<=P&&--ve&&X!=Ae;){if(t[$+Z]==t[$+Z-ae]){for(var K=0;K<V&&t[$+K]==t[$+K-ae];++K);if(K>Z){if(Z=K,re=ae,K>R)break;for(var ne=Math.min(ae,K-2),pe=0,se=0;se<ne;++se){var Ce=$-ae+se&32767,Ue=w[Ce],Ne=Ce-Ue&32767;Ne>pe&&(pe=Ne,Ae=Ce)}}}X=Ae,Ae=w[X],ae+=X-Ae&32767}if(re){_[ce++]=268435456|Dv[Z]<<18|N5[re];var Ie=Dv[Z]&31,Pe=N5[re]&31;ee+=$y[Ie]+Gy[Pe],++z[257+Ie],++I[Pe],Q=$+Z,++H}else _[ce++]=t[$],++z[t[$]]}}for($=Math.max($,Q);$<c;++$)_[ce++]=t[$],++z[t[$]];u=k5(t,d,f,_,z,I,ee,ce,q,$-q,u),f||(i.r=u&7|d[u/8|0]<<3,u-=7,i.h=S,i.p=w,i.i=$,i.w=Q)}else{for(var $=i.w||0;$<c+f;$+=65535){var ze=$+65535;ze>=c&&(d[u/8|0]=f,ze=c),u=yB(d,u+1,t.subarray($,ze))}i.i=c}return mM(A,0,n+vB(u)+a)},jB=function(){var t=1,e=0;return{p:function(s){for(var n=t,a=e,i=s.length|0,c=0;c!=i;){for(var A=Math.min(c+2655,i);c<A;++c)a+=n+=s[c];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},bM=function(t,e,s,n,a){if(!a&&(a={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),c=new Ic(i.length+t.length);c.set(i),c.set(t,i.length),t=c,a.w=i.length}return xM(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,s,n,a)},NB=function(t,e,s){for(;s;++e)t[e]=s,s>>>=8},vM=function(t,e){var s=e.level,n=s==0?0:s<6?1:s==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=jB();a.p(e.dictionary),NB(t,2,a.d())}};function Pv(t,e){e||(e={});var s=jB();s.p(t);var n=bM(t,e,e.dictionary?6:2,4);return vM(n,e),NB(n,n.length-4,s.d()),n}var yM=typeof TextDecoder<"u"&&new TextDecoder,wM=0;try{yM.decode(wB,{stream:!0}),wM=1}catch{}function jM(t){if(Array.isArray(t))return t}function NM(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,a,i,c,A=[],d=!0,f=!1;try{if(i=(s=s.call(t)).next,e!==0)for(;!(d=(n=i.call(s)).done)&&(A.push(n.value),A.length!==e);d=!0);}catch(u){f=!0,a=u}finally{try{if(!d&&s.return!=null&&(c=s.return(),Object(c)!==c))return}finally{if(f)throw a}}return A}}function C5(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=Array(e);s<e;s++)n[s]=t[s];return n}function BM(t,e){if(t){if(typeof t=="string")return C5(t,e);var s={}.toString.call(t).slice(8,-1);return s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set"?Array.from(t):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?C5(t,e):void 0}}function kM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S5(t,e){return jM(t)||NM(t,e)||BM(t,e)||kM()}function E5(t,e="utf8"){return new TextDecoder(e).decode(t)}const CM=new TextEncoder;function SM(t){return CM.encode(t)}const EM=1024*8,TM=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),B1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class qy{constructor(e=EM,s={}){Or(this,"buffer");Or(this,"byteLength");Or(this,"byteOffset");Or(this,"length");Or(this,"offset");Or(this,"lastWrittenByte");Or(this,"littleEndian");Or(this,"_data");Or(this,"_mark");Or(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=s.offset?s.offset>>>0:0,i=e.byteLength-a;let c=a;(ArrayBuffer.isView(e)||e instanceof qy)&&(e.byteLength!==e.buffer.byteLength&&(c=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=c,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,c,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,s){const n=B1[s].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===TM&&s!=="uint8"&&s!=="int8"){const A=new Uint8Array(this.buffer.slice(a,a+n));A.reverse();const d=new B1[s](A.buffer);return this.offset+=n,d.reverse(),d}const c=new B1[s](i);return this.offset+=n,c}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let s="";for(let n=0;n<e;n++)s+=this.readChar();return s}readUtf8(e=1){return E5(this.readBytes(e))}decodeText(e=1,s="utf8"){return E5(this.readBytes(e),s)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let s=0;s<e.length;s++)this._data.setUint8(this.offset++,e[s]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let s=0;s<e.length;s++)this.writeUint8(e.charCodeAt(s));return this}writeUtf8(e){return this.writeBytes(SM(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function t0(t){let e=t.length;for(;--e>=0;)t[e]=0}const UM=3,FM=258,BB=29,LM=256,MM=LM+1+BB,kB=30,QM=512,_M=new Array((MM+2)*2);t0(_M);const IM=new Array(kB*2);t0(IM);const OM=new Array(QM);t0(OM);const DM=new Array(FM-UM+1);t0(DM);const RM=new Array(BB);t0(RM);const HM=new Array(kB);t0(HM);const PM=(t,e,s,n)=>{let a=t&65535|0,i=t>>>16&65535|0,c=0;for(;s!==0;){c=s>2e3?2e3:s,s-=c;do a=a+e[n++]|0,i=i+a|0;while(--c);a%=65521,i%=65521}return a|i<<16|0};var zv=PM;const zM=()=>{let t,e=[];for(var s=0;s<256;s++){t=s;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[s]=t}return e},KM=new Uint32Array(zM()),VM=(t,e,s,n)=>{const a=KM,i=n+s;t^=-1;for(let c=n;c<i;c++)t=t>>>8^a[(t^e[c])&255];return t^-1};var hA=VM,Kv={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},CB={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const $M=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var GM=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const s=e.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(const n in s)$M(s,n)&&(t[n]=s[n])}}return t},qM=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const s=new Uint8Array(e);for(let n=0,a=0,i=t.length;n<i;n++){let c=t[n];s.set(c,a),a+=c.length}return s},SB={assign:GM,flattenChunks:qM};let EB=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{EB=!1}const Ep=new Uint8Array(256);for(let t=0;t<256;t++)Ep[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Ep[254]=Ep[254]=1;var YM=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,s,n,a,i,c=t.length,A=0;for(a=0;a<c;a++)s=t.charCodeAt(a),(s&64512)===55296&&a+1<c&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(s=65536+(s-55296<<10)+(n-56320),a++)),A+=s<128?1:s<2048?2:s<65536?3:4;for(e=new Uint8Array(A),i=0,a=0;i<A;a++)s=t.charCodeAt(a),(s&64512)===55296&&a+1<c&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(s=65536+(s-55296<<10)+(n-56320),a++)),s<128?e[i++]=s:s<2048?(e[i++]=192|s>>>6,e[i++]=128|s&63):s<65536?(e[i++]=224|s>>>12,e[i++]=128|s>>>6&63,e[i++]=128|s&63):(e[i++]=240|s>>>18,e[i++]=128|s>>>12&63,e[i++]=128|s>>>6&63,e[i++]=128|s&63);return e};const JM=(t,e)=>{if(e<65534&&t.subarray&&EB)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let s="";for(let n=0;n<e;n++)s+=String.fromCharCode(t[n]);return s};var WM=(t,e)=>{const s=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const i=new Array(s*2);for(a=0,n=0;n<s;){let c=t[n++];if(c<128){i[a++]=c;continue}let A=Ep[c];if(A>4){i[a++]=65533,n+=A-1;continue}for(c&=A===2?31:A===3?15:7;A>1&&n<s;)c=c<<6|t[n++]&63,A--;if(A>1){i[a++]=65533;continue}c<65536?i[a++]=c:(c-=65536,i[a++]=55296|c>>10&1023,i[a++]=56320|c&1023)}return JM(i,a)},XM=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let s=e-1;for(;s>=0&&(t[s]&192)===128;)s--;return s<0||s===0?e:s+Ep[t[s]]>e?s:e},Vv={string2buf:YM,buf2string:WM,utf8border:XM};function ZM(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var eQ=ZM;const Xm=16209,tQ=16191;var sQ=function(e,s){let n,a,i,c,A,d,f,u,p,x,m,j,w,S,C,F,U,_,z,I,H,ee,$,ce;const Q=e.state;n=e.next_in,$=e.input,a=n+(e.avail_in-5),i=e.next_out,ce=e.output,c=i-(s-e.avail_out),A=i+(e.avail_out-257),d=Q.dmax,f=Q.wsize,u=Q.whave,p=Q.wnext,x=Q.window,m=Q.hold,j=Q.bits,w=Q.lencode,S=Q.distcode,C=(1<<Q.lenbits)-1,F=(1<<Q.distbits)-1;e:do{j<15&&(m+=$[n++]<<j,j+=8,m+=$[n++]<<j,j+=8),U=w[m&C];t:for(;;){if(_=U>>>24,m>>>=_,j-=_,_=U>>>16&255,_===0)ce[i++]=U&65535;else if(_&16){z=U&65535,_&=15,_&&(j<_&&(m+=$[n++]<<j,j+=8),z+=m&(1<<_)-1,m>>>=_,j-=_),j<15&&(m+=$[n++]<<j,j+=8,m+=$[n++]<<j,j+=8),U=S[m&F];s:for(;;){if(_=U>>>24,m>>>=_,j-=_,_=U>>>16&255,_&16){if(I=U&65535,_&=15,j<_&&(m+=$[n++]<<j,j+=8,j<_&&(m+=$[n++]<<j,j+=8)),I+=m&(1<<_)-1,I>d){e.msg="invalid distance too far back",Q.mode=Xm;break e}if(m>>>=_,j-=_,_=i-c,I>_){if(_=I-_,_>u&&Q.sane){e.msg="invalid distance too far back",Q.mode=Xm;break e}if(H=0,ee=x,p===0){if(H+=f-_,_<z){z-=_;do ce[i++]=x[H++];while(--_);H=i-I,ee=ce}}else if(p<_){if(H+=f+p-_,_-=p,_<z){z-=_;do ce[i++]=x[H++];while(--_);if(H=0,p<z){_=p,z-=_;do ce[i++]=x[H++];while(--_);H=i-I,ee=ce}}}else if(H+=p-_,_<z){z-=_;do ce[i++]=x[H++];while(--_);H=i-I,ee=ce}for(;z>2;)ce[i++]=ee[H++],ce[i++]=ee[H++],ce[i++]=ee[H++],z-=3;z&&(ce[i++]=ee[H++],z>1&&(ce[i++]=ee[H++]))}else{H=i-I;do ce[i++]=ce[H++],ce[i++]=ce[H++],ce[i++]=ce[H++],z-=3;while(z>2);z&&(ce[i++]=ce[H++],z>1&&(ce[i++]=ce[H++]))}}else if((_&64)===0){U=S[(U&65535)+(m&(1<<_)-1)];continue s}else{e.msg="invalid distance code",Q.mode=Xm;break e}break}}else if((_&64)===0){U=w[(U&65535)+(m&(1<<_)-1)];continue t}else if(_&32){Q.mode=tQ;break e}else{e.msg="invalid literal/length code",Q.mode=Xm;break e}break}}while(n<a&&i<A);z=j>>3,n-=z,j-=z<<3,m&=(1<<j)-1,e.next_in=n,e.next_out=i,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=i<A?257+(A-i):257-(i-A),Q.hold=m,Q.bits=j};const jf=15,T5=852,U5=592,F5=0,k1=1,L5=2,rQ=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),nQ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),aQ=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),iQ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),lQ=(t,e,s,n,a,i,c,A)=>{const d=A.bits;let f=0,u=0,p=0,x=0,m=0,j=0,w=0,S=0,C=0,F=0,U,_,z,I,H,ee=null,$;const ce=new Uint16Array(jf+1),Q=new Uint16Array(jf+1);let q=null,te,X,Ae;for(f=0;f<=jf;f++)ce[f]=0;for(u=0;u<n;u++)ce[e[s+u]]++;for(m=d,x=jf;x>=1&&ce[x]===0;x--);if(m>x&&(m=x),x===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,A.bits=1,0;for(p=1;p<x&&ce[p]===0;p++);for(m<p&&(m=p),S=1,f=1;f<=jf;f++)if(S<<=1,S-=ce[f],S<0)return-1;if(S>0&&(t===F5||x!==1))return-1;for(Q[1]=0,f=1;f<jf;f++)Q[f+1]=Q[f]+ce[f];for(u=0;u<n;u++)e[s+u]!==0&&(c[Q[e[s+u]]++]=u);if(t===F5?(ee=q=c,$=20):t===k1?(ee=rQ,q=nQ,$=257):(ee=aQ,q=iQ,$=0),F=0,u=0,f=p,H=i,j=m,w=0,z=-1,C=1<<m,I=C-1,t===k1&&C>T5||t===L5&&C>U5)return 1;for(;;){te=f-w,c[u]+1<$?(X=0,Ae=c[u]):c[u]>=$?(X=q[c[u]-$],Ae=ee[c[u]-$]):(X=96,Ae=0),U=1<<f-w,_=1<<j,p=_;do _-=U,a[H+(F>>w)+_]=te<<24|X<<16|Ae|0;while(_!==0);for(U=1<<f-1;F&U;)U>>=1;if(U!==0?(F&=U-1,F+=U):F=0,u++,--ce[f]===0){if(f===x)break;f=e[s+c[u]]}if(f>m&&(F&I)!==z){for(w===0&&(w=m),H+=p,j=f-w,S=1<<j;j+w<x&&(S-=ce[j+w],!(S<=0));)j++,S<<=1;if(C+=1<<j,t===k1&&C>T5||t===L5&&C>U5)return 1;z=F&I,a[z]=m<<24|j<<16|H-i|0}}return F!==0&&(a[H+F]=f-w<<24|64<<16|0),A.bits=m,0};var cp=lQ;const oQ=0,TB=1,UB=2,{Z_FINISH:M5,Z_BLOCK:cQ,Z_TREES:Zm,Z_OK:Oh,Z_STREAM_END:AQ,Z_NEED_DICT:dQ,Z_STREAM_ERROR:lc,Z_DATA_ERROR:FB,Z_MEM_ERROR:LB,Z_BUF_ERROR:uQ,Z_DEFLATED:Q5}=CB,Ab=16180,_5=16181,I5=16182,O5=16183,D5=16184,R5=16185,H5=16186,P5=16187,z5=16188,K5=16189,tx=16190,ad=16191,C1=16192,V5=16193,S1=16194,$5=16195,G5=16196,q5=16197,Y5=16198,eg=16199,tg=16200,J5=16201,W5=16202,X5=16203,Z5=16204,ej=16205,E1=16206,tj=16207,sj=16208,Ln=16209,MB=16210,QB=16211,hQ=852,fQ=592,pQ=15,mQ=pQ,rj=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function gQ(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Vh=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<Ab||e.mode>QB?1:0},_B=t=>{if(Vh(t))return lc;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=Ab,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(hQ),e.distcode=e.distdyn=new Int32Array(fQ),e.sane=1,e.back=-1,Oh},IB=t=>{if(Vh(t))return lc;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,_B(t)},OB=(t,e)=>{let s;if(Vh(t))return lc;const n=t.state;return e<0?(s=0,e=-e):(s=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?lc:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=s,n.wbits=e,IB(t))},DB=(t,e)=>{if(!t)return lc;const s=new gQ;t.state=s,s.strm=t,s.window=null,s.mode=Ab;const n=OB(t,e);return n!==Oh&&(t.state=null),n},xQ=t=>DB(t,mQ);let nj=!0,T1,U1;const bQ=t=>{if(nj){T1=new Int32Array(512),U1=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(cp(TB,t.lens,0,288,T1,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;cp(UB,t.lens,0,32,U1,0,t.work,{bits:5}),nj=!1}t.lencode=T1,t.lenbits=9,t.distcode=U1,t.distbits=5},RB=(t,e,s,n)=>{let a;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(s-i.wsize,s),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(e.subarray(s-n,s-n+a),i.wnext),n-=a,n?(i.window.set(e.subarray(s-n,s),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},vQ=(t,e)=>{let s,n,a,i,c,A,d,f,u,p,x,m,j,w,S=0,C,F,U,_,z,I,H,ee;const $=new Uint8Array(4);let ce,Q;const q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Vh(t)||!t.output||!t.input&&t.avail_in!==0)return lc;s=t.state,s.mode===ad&&(s.mode=C1),c=t.next_out,a=t.output,d=t.avail_out,i=t.next_in,n=t.input,A=t.avail_in,f=s.hold,u=s.bits,p=A,x=d,ee=Oh;e:for(;;)switch(s.mode){case Ab:if(s.wrap===0){s.mode=C1;break}for(;u<16;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}if(s.wrap&2&&f===35615){s.wbits===0&&(s.wbits=15),s.check=0,$[0]=f&255,$[1]=f>>>8&255,s.check=hA(s.check,$,2,0),f=0,u=0,s.mode=_5;break}if(s.head&&(s.head.done=!1),!(s.wrap&1)||(((f&255)<<8)+(f>>8))%31){t.msg="incorrect header check",s.mode=Ln;break}if((f&15)!==Q5){t.msg="unknown compression method",s.mode=Ln;break}if(f>>>=4,u-=4,H=(f&15)+8,s.wbits===0&&(s.wbits=H),H>15||H>s.wbits){t.msg="invalid window size",s.mode=Ln;break}s.dmax=1<<s.wbits,s.flags=0,t.adler=s.check=1,s.mode=f&512?K5:ad,f=0,u=0;break;case _5:for(;u<16;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}if(s.flags=f,(s.flags&255)!==Q5){t.msg="unknown compression method",s.mode=Ln;break}if(s.flags&57344){t.msg="unknown header flags set",s.mode=Ln;break}s.head&&(s.head.text=f>>8&1),s.flags&512&&s.wrap&4&&($[0]=f&255,$[1]=f>>>8&255,s.check=hA(s.check,$,2,0)),f=0,u=0,s.mode=I5;case I5:for(;u<32;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}s.head&&(s.head.time=f),s.flags&512&&s.wrap&4&&($[0]=f&255,$[1]=f>>>8&255,$[2]=f>>>16&255,$[3]=f>>>24&255,s.check=hA(s.check,$,4,0)),f=0,u=0,s.mode=O5;case O5:for(;u<16;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}s.head&&(s.head.xflags=f&255,s.head.os=f>>8),s.flags&512&&s.wrap&4&&($[0]=f&255,$[1]=f>>>8&255,s.check=hA(s.check,$,2,0)),f=0,u=0,s.mode=D5;case D5:if(s.flags&1024){for(;u<16;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}s.length=f,s.head&&(s.head.extra_len=f),s.flags&512&&s.wrap&4&&($[0]=f&255,$[1]=f>>>8&255,s.check=hA(s.check,$,2,0)),f=0,u=0}else s.head&&(s.head.extra=null);s.mode=R5;case R5:if(s.flags&1024&&(m=s.length,m>A&&(m=A),m&&(s.head&&(H=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(n.subarray(i,i+m),H)),s.flags&512&&s.wrap&4&&(s.check=hA(s.check,n,m,i)),A-=m,i+=m,s.length-=m),s.length))break e;s.length=0,s.mode=H5;case H5:if(s.flags&2048){if(A===0)break e;m=0;do H=n[i+m++],s.head&&H&&s.length<65536&&(s.head.name+=String.fromCharCode(H));while(H&&m<A);if(s.flags&512&&s.wrap&4&&(s.check=hA(s.check,n,m,i)),A-=m,i+=m,H)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=P5;case P5:if(s.flags&4096){if(A===0)break e;m=0;do H=n[i+m++],s.head&&H&&s.length<65536&&(s.head.comment+=String.fromCharCode(H));while(H&&m<A);if(s.flags&512&&s.wrap&4&&(s.check=hA(s.check,n,m,i)),A-=m,i+=m,H)break e}else s.head&&(s.head.comment=null);s.mode=z5;case z5:if(s.flags&512){for(;u<16;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}if(s.wrap&4&&f!==(s.check&65535)){t.msg="header crc mismatch",s.mode=Ln;break}f=0,u=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),t.adler=s.check=0,s.mode=ad;break;case K5:for(;u<32;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}t.adler=s.check=rj(f),f=0,u=0,s.mode=tx;case tx:if(s.havedict===0)return t.next_out=c,t.avail_out=d,t.next_in=i,t.avail_in=A,s.hold=f,s.bits=u,dQ;t.adler=s.check=1,s.mode=ad;case ad:if(e===cQ||e===Zm)break e;case C1:if(s.last){f>>>=u&7,u-=u&7,s.mode=E1;break}for(;u<3;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}switch(s.last=f&1,f>>>=1,u-=1,f&3){case 0:s.mode=V5;break;case 1:if(bQ(s),s.mode=eg,e===Zm){f>>>=2,u-=2;break e}break;case 2:s.mode=G5;break;case 3:t.msg="invalid block type",s.mode=Ln}f>>>=2,u-=2;break;case V5:for(f>>>=u&7,u-=u&7;u<32;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}if((f&65535)!==(f>>>16^65535)){t.msg="invalid stored block lengths",s.mode=Ln;break}if(s.length=f&65535,f=0,u=0,s.mode=S1,e===Zm)break e;case S1:s.mode=$5;case $5:if(m=s.length,m){if(m>A&&(m=A),m>d&&(m=d),m===0)break e;a.set(n.subarray(i,i+m),c),A-=m,i+=m,d-=m,c+=m,s.length-=m;break}s.mode=ad;break;case G5:for(;u<14;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}if(s.nlen=(f&31)+257,f>>>=5,u-=5,s.ndist=(f&31)+1,f>>>=5,u-=5,s.ncode=(f&15)+4,f>>>=4,u-=4,s.nlen>286||s.ndist>30){t.msg="too many length or distance symbols",s.mode=Ln;break}s.have=0,s.mode=q5;case q5:for(;s.have<s.ncode;){for(;u<3;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}s.lens[q[s.have++]]=f&7,f>>>=3,u-=3}for(;s.have<19;)s.lens[q[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,ce={bits:s.lenbits},ee=cp(oQ,s.lens,0,19,s.lencode,0,s.work,ce),s.lenbits=ce.bits,ee){t.msg="invalid code lengths set",s.mode=Ln;break}s.have=0,s.mode=Y5;case Y5:for(;s.have<s.nlen+s.ndist;){for(;S=s.lencode[f&(1<<s.lenbits)-1],C=S>>>24,F=S>>>16&255,U=S&65535,!(C<=u);){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}if(U<16)f>>>=C,u-=C,s.lens[s.have++]=U;else{if(U===16){for(Q=C+2;u<Q;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}if(f>>>=C,u-=C,s.have===0){t.msg="invalid bit length repeat",s.mode=Ln;break}H=s.lens[s.have-1],m=3+(f&3),f>>>=2,u-=2}else if(U===17){for(Q=C+3;u<Q;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}f>>>=C,u-=C,H=0,m=3+(f&7),f>>>=3,u-=3}else{for(Q=C+7;u<Q;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}f>>>=C,u-=C,H=0,m=11+(f&127),f>>>=7,u-=7}if(s.have+m>s.nlen+s.ndist){t.msg="invalid bit length repeat",s.mode=Ln;break}for(;m--;)s.lens[s.have++]=H}}if(s.mode===Ln)break;if(s.lens[256]===0){t.msg="invalid code -- missing end-of-block",s.mode=Ln;break}if(s.lenbits=9,ce={bits:s.lenbits},ee=cp(TB,s.lens,0,s.nlen,s.lencode,0,s.work,ce),s.lenbits=ce.bits,ee){t.msg="invalid literal/lengths set",s.mode=Ln;break}if(s.distbits=6,s.distcode=s.distdyn,ce={bits:s.distbits},ee=cp(UB,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,ce),s.distbits=ce.bits,ee){t.msg="invalid distances set",s.mode=Ln;break}if(s.mode=eg,e===Zm)break e;case eg:s.mode=tg;case tg:if(A>=6&&d>=258){t.next_out=c,t.avail_out=d,t.next_in=i,t.avail_in=A,s.hold=f,s.bits=u,sQ(t,x),c=t.next_out,a=t.output,d=t.avail_out,i=t.next_in,n=t.input,A=t.avail_in,f=s.hold,u=s.bits,s.mode===ad&&(s.back=-1);break}for(s.back=0;S=s.lencode[f&(1<<s.lenbits)-1],C=S>>>24,F=S>>>16&255,U=S&65535,!(C<=u);){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}if(F&&(F&240)===0){for(_=C,z=F,I=U;S=s.lencode[I+((f&(1<<_+z)-1)>>_)],C=S>>>24,F=S>>>16&255,U=S&65535,!(_+C<=u);){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}f>>>=_,u-=_,s.back+=_}if(f>>>=C,u-=C,s.back+=C,s.length=U,F===0){s.mode=ej;break}if(F&32){s.back=-1,s.mode=ad;break}if(F&64){t.msg="invalid literal/length code",s.mode=Ln;break}s.extra=F&15,s.mode=J5;case J5:if(s.extra){for(Q=s.extra;u<Q;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}s.length+=f&(1<<s.extra)-1,f>>>=s.extra,u-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=W5;case W5:for(;S=s.distcode[f&(1<<s.distbits)-1],C=S>>>24,F=S>>>16&255,U=S&65535,!(C<=u);){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}if((F&240)===0){for(_=C,z=F,I=U;S=s.distcode[I+((f&(1<<_+z)-1)>>_)],C=S>>>24,F=S>>>16&255,U=S&65535,!(_+C<=u);){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}f>>>=_,u-=_,s.back+=_}if(f>>>=C,u-=C,s.back+=C,F&64){t.msg="invalid distance code",s.mode=Ln;break}s.offset=U,s.extra=F&15,s.mode=X5;case X5:if(s.extra){for(Q=s.extra;u<Q;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}s.offset+=f&(1<<s.extra)-1,f>>>=s.extra,u-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){t.msg="invalid distance too far back",s.mode=Ln;break}s.mode=Z5;case Z5:if(d===0)break e;if(m=x-d,s.offset>m){if(m=s.offset-m,m>s.whave&&s.sane){t.msg="invalid distance too far back",s.mode=Ln;break}m>s.wnext?(m-=s.wnext,j=s.wsize-m):j=s.wnext-m,m>s.length&&(m=s.length),w=s.window}else w=a,j=c-s.offset,m=s.length;m>d&&(m=d),d-=m,s.length-=m;do a[c++]=w[j++];while(--m);s.length===0&&(s.mode=tg);break;case ej:if(d===0)break e;a[c++]=s.length,d--,s.mode=tg;break;case E1:if(s.wrap){for(;u<32;){if(A===0)break e;A--,f|=n[i++]<<u,u+=8}if(x-=d,t.total_out+=x,s.total+=x,s.wrap&4&&x&&(t.adler=s.check=s.flags?hA(s.check,a,x,c-x):zv(s.check,a,x,c-x)),x=d,s.wrap&4&&(s.flags?f:rj(f))!==s.check){t.msg="incorrect data check",s.mode=Ln;break}f=0,u=0}s.mode=tj;case tj:if(s.wrap&&s.flags){for(;u<32;){if(A===0)break e;A--,f+=n[i++]<<u,u+=8}if(s.wrap&4&&f!==(s.total&4294967295)){t.msg="incorrect length check",s.mode=Ln;break}f=0,u=0}s.mode=sj;case sj:ee=AQ;break e;case Ln:ee=FB;break e;case MB:return LB;case QB:default:return lc}return t.next_out=c,t.avail_out=d,t.next_in=i,t.avail_in=A,s.hold=f,s.bits=u,(s.wsize||x!==t.avail_out&&s.mode<Ln&&(s.mode<E1||e!==M5))&&RB(t,t.output,t.next_out,x-t.avail_out),p-=t.avail_in,x-=t.avail_out,t.total_in+=p,t.total_out+=x,s.total+=x,s.wrap&4&&x&&(t.adler=s.check=s.flags?hA(s.check,a,x,t.next_out-x):zv(s.check,a,x,t.next_out-x)),t.data_type=s.bits+(s.last?64:0)+(s.mode===ad?128:0)+(s.mode===eg||s.mode===S1?256:0),(p===0&&x===0||e===M5)&&ee===Oh&&(ee=uQ),ee},yQ=t=>{if(Vh(t))return lc;let e=t.state;return e.window&&(e.window=null),t.state=null,Oh},wQ=(t,e)=>{if(Vh(t))return lc;const s=t.state;return(s.wrap&2)===0?lc:(s.head=e,e.done=!1,Oh)},jQ=(t,e)=>{const s=e.length;let n,a,i;return Vh(t)||(n=t.state,n.wrap!==0&&n.mode!==tx)?lc:n.mode===tx&&(a=1,a=zv(a,e,s,0),a!==n.check)?FB:(i=RB(t,e,s,s),i?(n.mode=MB,LB):(n.havedict=1,Oh))};var NQ=IB,BQ=OB,kQ=_B,CQ=xQ,SQ=DB,EQ=vQ,TQ=yQ,UQ=wQ,FQ=jQ,LQ="pako inflate (from Nodeca project)",dd={inflateReset:NQ,inflateReset2:BQ,inflateResetKeep:kQ,inflateInit:CQ,inflateInit2:SQ,inflate:EQ,inflateEnd:TQ,inflateGetHeader:UQ,inflateSetDictionary:FQ,inflateInfo:LQ};function MQ(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var QQ=MQ;const HB=Object.prototype.toString,{Z_NO_FLUSH:_Q,Z_FINISH:IQ,Z_OK:Tp,Z_STREAM_END:F1,Z_NEED_DICT:L1,Z_STREAM_ERROR:OQ,Z_DATA_ERROR:aj,Z_MEM_ERROR:DQ}=CB;function Gp(t){this.options=SB.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eQ,this.strm.avail_out=0;let s=dd.inflateInit2(this.strm,e.windowBits);if(s!==Tp)throw new Error(Kv[s]);if(this.header=new QQ,dd.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Vv.string2buf(e.dictionary):HB.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(s=dd.inflateSetDictionary(this.strm,e.dictionary),s!==Tp)))throw new Error(Kv[s])}Gp.prototype.push=function(t,e){const s=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,c,A;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?IQ:_Q,HB.call(t)==="[object ArrayBuffer]"?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;;){for(s.avail_out===0&&(s.output=new Uint8Array(n),s.next_out=0,s.avail_out=n),i=dd.inflate(s,c),i===L1&&a&&(i=dd.inflateSetDictionary(s,a),i===Tp?i=dd.inflate(s,c):i===aj&&(i=L1));s.avail_in>0&&i===F1&&s.state.wrap>0&&t[s.next_in]!==0;)dd.inflateReset(s),i=dd.inflate(s,c);switch(i){case OQ:case aj:case L1:case DQ:return this.onEnd(i),this.ended=!0,!1}if(A=s.avail_out,s.next_out&&(s.avail_out===0||i===F1))if(this.options.to==="string"){let d=Vv.utf8border(s.output,s.next_out),f=s.next_out-d,u=Vv.buf2string(s.output,d);s.next_out=f,s.avail_out=n-f,f&&s.output.set(s.output.subarray(d,d+f),0),this.onData(u)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(!(i===Tp&&A===0)){if(i===F1)return i=dd.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(s.avail_in===0)break}}return!0};Gp.prototype.onData=function(t){this.chunks.push(t)};Gp.prototype.onEnd=function(t){t===Tp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=SB.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function RQ(t,e){const s=new Gp(e);if(s.push(t),s.err)throw s.msg||Kv[s.err];return s.result}var HQ=Gp,PQ=RQ,zQ={Inflate:HQ,inflate:PQ};const{Inflate:KQ,inflate:VQ}=zQ;var ij=KQ,$Q=VQ;const PB=[];for(let t=0;t<256;t++){let e=t;for(let s=0;s<8;s++)e&1?e=3988292384^e>>>1:e=e>>>1;PB[t]=e}const lj=4294967295;function GQ(t,e,s){let n=t;for(let a=0;a<s;a++)n=PB[(n^e[a])&255]^n>>>8;return n}function qQ(t,e){return(GQ(lj,t,e)^lj)>>>0}function oj(t,e,s){const n=t.readUint32(),a=qQ(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${s}. Expected ${n}, found ${a}`)}function zB(t,e,s){for(let n=0;n<s;n++)e[n]=t[n]}function KB(t,e,s,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<s;a++)e[a]=t[a]+e[a-n]&255}function VB(t,e,s,n){let a=0;if(s.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+s[a]&255}function $B(t,e,s,n,a){let i=0;if(s.length===0){for(;i<a;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+(e[i-a]>>1)&255}else{for(;i<a;i++)e[i]=t[i]+(s[i]>>1)&255;for(;i<n;i++)e[i]=t[i]+(e[i-a]+s[i]>>1)&255}}function GB(t,e,s,n,a){let i=0;if(s.length===0){for(;i<a;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-a]&255}else{for(;i<a;i++)e[i]=t[i]+s[i]&255;for(;i<n;i++)e[i]=t[i]+YQ(e[i-a],s[i],s[i-a])&255}}function YQ(t,e,s){const n=t+e-s,a=Math.abs(n-t),i=Math.abs(n-e),c=Math.abs(n-s);return a<=i&&a<=c?t:i<=c?e:s}function JQ(t,e,s,n,a,i){switch(t){case 0:zB(e,s,a);break;case 1:KB(e,s,a,i);break;case 2:VB(e,s,n,a);break;case 3:$B(e,s,n,a,i);break;case 4:GB(e,s,n,a,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const WQ=new Uint16Array([255]),XQ=new Uint8Array(WQ.buffer),ZQ=XQ[0]===255;function e_(t){const{data:e,width:s,height:n,channels:a,depth:i}=t,c=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],A=Math.ceil(i/8)*a,d=new Uint8Array(n*s*A);let f=0;for(let u=0;u<7;u++){const p=c[u],x=Math.ceil((s-p.x)/p.xStep),m=Math.ceil((n-p.y)/p.yStep);if(x<=0||m<=0)continue;const j=x*A,w=new Uint8Array(j);for(let S=0;S<m;S++){const C=e[f++],F=e.subarray(f,f+j);f+=j;const U=new Uint8Array(j);JQ(C,F,U,w,j,A),w.set(U);for(let _=0;_<x;_++){const z=p.x+_*p.xStep,I=p.y+S*p.yStep;if(!(z>=s||I>=n))for(let H=0;H<A;H++)d[(I*s+z)*A+H]=U[_*A+H]}}}if(i===16){const u=new Uint16Array(d.buffer);if(ZQ)for(let p=0;p<u.length;p++)u[p]=t_(u[p]);return u}else return d}function t_(t){return(t&255)<<8|t>>8&255}const s_=new Uint16Array([255]),r_=new Uint8Array(s_.buffer),n_=r_[0]===255,a_=new Uint8Array(0);function cj(t){const{data:e,width:s,height:n,channels:a,depth:i}=t,c=Math.ceil(i/8)*a,A=Math.ceil(i/8*a*s),d=new Uint8Array(n*A);let f=a_,u=0,p,x;for(let m=0;m<n;m++){switch(p=e.subarray(u+1,u+1+A),x=d.subarray(m*A,(m+1)*A),e[u]){case 0:zB(p,x,A);break;case 1:KB(p,x,A,c);break;case 2:VB(p,x,f,A);break;case 3:$B(p,x,f,A,c);break;case 4:GB(p,x,f,A,c);break;default:throw new Error(`Unsupported filter: ${e[u]}`)}f=x,u+=A+1}if(i===16){const m=new Uint16Array(d.buffer);if(n_)for(let j=0;j<m.length;j++)m[j]=i_(m[j]);return m}else return d}function i_(t){return(t&255)<<8|t>>8&255}const Cg=Uint8Array.of(137,80,78,71,13,10,26,10);function Aj(t){if(!l_(t.readBytes(Cg.length)))throw new Error("wrong PNG signature")}function l_(t){if(t.length<Cg.length)return!1;for(let e=0;e<Cg.length;e++)if(t[e]!==Cg[e])return!1;return!0}const o_="tEXt",c_=0,qB=new TextDecoder("latin1");function A_(t){if(u_(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const d_=/^[\u0000-\u00FF]*$/;function u_(t){if(!d_.test(t))throw new Error("invalid latin1 text")}function h_(t,e,s){const n=YB(e);t[n]=f_(e,s-n.length-1)}function YB(t){for(t.mark();t.readByte()!==c_;);const e=t.offset;t.reset();const s=qB.decode(t.readBytes(e-t.offset-1));return t.skip(1),A_(s),s}function f_(t,e){return qB.decode(t.readBytes(e))}const xo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},M1={UNKNOWN:-1,DEFLATE:0},dj={UNKNOWN:-1,ADAPTIVE:0},Q1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},sg={NONE:0,BACKGROUND:1,PREVIOUS:2},_1={SOURCE:0,OVER:1};class p_ extends qy{constructor(s,n={}){super(s);Or(this,"_checkCrc");Or(this,"_inflator");Or(this,"_png");Or(this,"_apng");Or(this,"_end");Or(this,"_hasPalette");Or(this,"_palette");Or(this,"_hasTransparency");Or(this,"_transparency");Or(this,"_compressionMethod");Or(this,"_filterMethod");Or(this,"_interlaceMethod");Or(this,"_colorType");Or(this,"_isAnimated");Or(this,"_numberOfFrames");Or(this,"_numberOfPlays");Or(this,"_frames");Or(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new ij,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=M1.UNKNOWN,this._filterMethod=dj.UNKNOWN,this._interlaceMethod=Q1.UNKNOWN,this._colorType=xo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Aj(this);!this._end;){const s=this.readUint32(),n=this.readChars(4);this.decodeChunk(s,n)}return this.decodeImage(),this._png}decodeApng(){for(Aj(this);!this._end;){const s=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(s,n)}return this.decodeApngImage(),this._apng}decodeChunk(s,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(s);break;case"IDAT":this.decodeIDAT(s);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(s);break;case"iCCP":this.decodeiCCP(s);break;case o_:h_(this._png.text,this,s);break;case"pHYs":this.decodepHYs();break;default:this.skip(s);break}if(this.offset-a!==s)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?oj(this,s+4,n):this.skip(4)}decodeApngChunk(s,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(s);break;default:this.decodeChunk(s,n),this.offset=a+s;break}if(this.offset-a!==s)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?oj(this,s+4,n):this.skip(4)}decodeIHDR(){const s=this._png;s.width=this.readUint32(),s.height=this.readUint32(),s.depth=m_(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case xo.GREYSCALE:a=1;break;case xo.TRUECOLOUR:a=3;break;case xo.INDEXED_COLOUR:a=1;break;case xo.GREYSCALE_ALPHA:a=2;break;case xo.TRUECOLOUR_ALPHA:a=4;break;case xo.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==M1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const s={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(s)}decodePLTE(s){if(s%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${s}`);const n=s/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<n;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(s){this._writingDataChunks=!0;const n=s,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(s)}decodeFDAT(s){this._writingDataChunks=!0;let n=s,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(s)}decodetRNS(s){switch(this._colorType){case xo.GREYSCALE:case xo.TRUECOLOUR:{if(s%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${s}`);if(s/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${s/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(s/2);for(let n=0;n<s/2;n++)this._transparency[n]=this.readUint16();break}case xo.INDEXED_COLOUR:{if(s>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${s} vs ${this._palette.length})`);let n=0;for(;n<s;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case xo.UNKNOWN:case xo.GREYSCALE_ALPHA:case xo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(s){const n=YB(this),a=this.readUint8();if(a!==M1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(s-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:$Q(i)}}decodepHYs(){const s=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:s,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let s=0;s<this._numberOfFrames;s++){const n={sequenceNumber:this._frames[s].sequenceNumber,delayNumber:this._frames[s].delayNumber,delayDenominator:this._frames[s].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(s);if(a){if(a.data=cj({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),s===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const i=this._apng.frames.at(s-1);this.disposeFrame(a,i,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(s,n,a){switch(s.disposeOp){case sg.NONE:break;case sg.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let c=0;c<this._png.width;c++){const A=(i*s.width+c)*this._png.channels;for(let d=0;d<this._png.channels;d++)a.data[A+d]=0}break;case sg.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(s,n){const a=1<<this._png.depth,i=(c,A)=>{const d=((c+n.yOffset)*this._png.width+n.xOffset+A)*this._png.channels,f=(c*n.width+A)*this._png.channels;return{index:d,frameIndex:f}};switch(n.blendOp){case _1.SOURCE:for(let c=0;c<n.height;c++)for(let A=0;A<n.width;A++){const{index:d,frameIndex:f}=i(c,A);for(let u=0;u<this._png.channels;u++)s.data[d+u]=n.data[f+u]}break;case _1.OVER:for(let c=0;c<n.height;c++)for(let A=0;A<n.width;A++){const{index:d,frameIndex:f}=i(c,A);for(let u=0;u<this._png.channels;u++){const p=n.data[f+this._png.channels-1]/a,x=u%(this._png.channels-1)===0?1:n.data[f+u],m=Math.floor(p*x+(1-p)*s.data[d+u]);s.data[d+u]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const s=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==dj.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Q1.NO_INTERLACE)this._png.data=cj({data:s,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Q1.ADAM7)this._png.data=e_({data:s,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const s=this._inflator.result,n=this._frames.at(-1);n?n.data=s:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:sg.NONE,blendOp:_1.SOURCE,data:s}),this._inflator=new ij,this._writingDataChunks=!1}}function m_(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var uj;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(uj||(uj={}));function g_(t,e){return new p_(t,e).decode()}var Ts=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function I1(){Ts.console&&typeof Ts.console.log=="function"&&Ts.console.log.apply(Ts.console,arguments)}var nn={log:I1,warn:function(t){Ts.console&&(typeof Ts.console.warn=="function"?Ts.console.warn.apply(Ts.console,arguments):I1.call(null,arguments))},error:function(t){Ts.console&&(typeof Ts.console.error=="function"?Ts.console.error.apply(Ts.console,arguments):I1(t))}};function O1(t,e,s){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){xh(n.response,e,s)},n.onerror=function(){nn.error("could not download file")},n.send()}function hj(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function rg(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var xh=Ts.saveAs||((typeof window>"u"?"undefined":Rr(window))!=="object"||window!==Ts?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,s){var n=Ts.URL||Ts.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?hj(a.href)?O1(t,e,s):rg(a,a.target="_blank"):rg(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){rg(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,s){if(e=e||t.name||"download",typeof t=="string")if(hj(t))O1(t,e,s);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){rg(n)})}else navigator.msSaveOrOpenBlob((function(a,i){return i===void 0?i={autoBom:!1}:Rr(i)!=="object"&&(nn.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(t,s),e)}:function(t,e,s,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return O1(t,e,s);var a=t.type==="application/octet-stream",i=/constructor/i.test(Ts.HTMLElement)||Ts.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&i)&&(typeof FileReader>"u"?"undefined":Rr(FileReader))==="object"){var A=new FileReader;A.onloadend=function(){var u=A.result;u=c?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},A.readAsDataURL(t)}else{var d=Ts.URL||Ts.webkitURL,f=d.createObjectURL(t);n?n.location=f:location.href=f,n=null,setTimeout(function(){d.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function JB(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var s=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(A){return[parseInt(A[1]),parseInt(A[2]),parseInt(A[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(A){return[parseInt(A[1],16),parseInt(A[2],16),parseInt(A[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(A){return[parseInt(A[1]+A[1],16),parseInt(A[2]+A[2],16),parseInt(A[3]+A[3],16)]}}],n=0;n<s.length;n++){var a=s[n].re,i=s[n].process,c=a.exec(t);c&&(e=i(c),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var A=this.r.toString(16),d=this.g.toString(16),f=this.b.toString(16);return A.length==1&&(A="0"+A),d.length==1&&(d="0"+d),f.length==1&&(f="0"+f),"#"+A+d+f}}var Sg=Ts.atob.bind(Ts),fj=Ts.btoa.bind(Ts);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function D1(t,e){var s=t[0],n=t[1],a=t[2],i=t[3];s=Ji(s,n,a,i,e[0],7,-680876936),i=Ji(i,s,n,a,e[1],12,-389564586),a=Ji(a,i,s,n,e[2],17,606105819),n=Ji(n,a,i,s,e[3],22,-1044525330),s=Ji(s,n,a,i,e[4],7,-176418897),i=Ji(i,s,n,a,e[5],12,1200080426),a=Ji(a,i,s,n,e[6],17,-1473231341),n=Ji(n,a,i,s,e[7],22,-45705983),s=Ji(s,n,a,i,e[8],7,1770035416),i=Ji(i,s,n,a,e[9],12,-1958414417),a=Ji(a,i,s,n,e[10],17,-42063),n=Ji(n,a,i,s,e[11],22,-1990404162),s=Ji(s,n,a,i,e[12],7,1804603682),i=Ji(i,s,n,a,e[13],12,-40341101),a=Ji(a,i,s,n,e[14],17,-1502002290),s=Wi(s,n=Ji(n,a,i,s,e[15],22,1236535329),a,i,e[1],5,-165796510),i=Wi(i,s,n,a,e[6],9,-1069501632),a=Wi(a,i,s,n,e[11],14,643717713),n=Wi(n,a,i,s,e[0],20,-373897302),s=Wi(s,n,a,i,e[5],5,-701558691),i=Wi(i,s,n,a,e[10],9,38016083),a=Wi(a,i,s,n,e[15],14,-660478335),n=Wi(n,a,i,s,e[4],20,-405537848),s=Wi(s,n,a,i,e[9],5,568446438),i=Wi(i,s,n,a,e[14],9,-1019803690),a=Wi(a,i,s,n,e[3],14,-187363961),n=Wi(n,a,i,s,e[8],20,1163531501),s=Wi(s,n,a,i,e[13],5,-1444681467),i=Wi(i,s,n,a,e[2],9,-51403784),a=Wi(a,i,s,n,e[7],14,1735328473),s=Xi(s,n=Wi(n,a,i,s,e[12],20,-1926607734),a,i,e[5],4,-378558),i=Xi(i,s,n,a,e[8],11,-2022574463),a=Xi(a,i,s,n,e[11],16,1839030562),n=Xi(n,a,i,s,e[14],23,-35309556),s=Xi(s,n,a,i,e[1],4,-1530992060),i=Xi(i,s,n,a,e[4],11,1272893353),a=Xi(a,i,s,n,e[7],16,-155497632),n=Xi(n,a,i,s,e[10],23,-1094730640),s=Xi(s,n,a,i,e[13],4,681279174),i=Xi(i,s,n,a,e[0],11,-358537222),a=Xi(a,i,s,n,e[3],16,-722521979),n=Xi(n,a,i,s,e[6],23,76029189),s=Xi(s,n,a,i,e[9],4,-640364487),i=Xi(i,s,n,a,e[12],11,-421815835),a=Xi(a,i,s,n,e[15],16,530742520),s=Zi(s,n=Xi(n,a,i,s,e[2],23,-995338651),a,i,e[0],6,-198630844),i=Zi(i,s,n,a,e[7],10,1126891415),a=Zi(a,i,s,n,e[14],15,-1416354905),n=Zi(n,a,i,s,e[5],21,-57434055),s=Zi(s,n,a,i,e[12],6,1700485571),i=Zi(i,s,n,a,e[3],10,-1894986606),a=Zi(a,i,s,n,e[10],15,-1051523),n=Zi(n,a,i,s,e[1],21,-2054922799),s=Zi(s,n,a,i,e[8],6,1873313359),i=Zi(i,s,n,a,e[15],10,-30611744),a=Zi(a,i,s,n,e[6],15,-1560198380),n=Zi(n,a,i,s,e[13],21,1309151649),s=Zi(s,n,a,i,e[4],6,-145523070),i=Zi(i,s,n,a,e[11],10,-1120210379),a=Zi(a,i,s,n,e[2],15,718787259),n=Zi(n,a,i,s,e[9],21,-343485551),t[0]=mu(s,t[0]),t[1]=mu(n,t[1]),t[2]=mu(a,t[2]),t[3]=mu(i,t[3])}function db(t,e,s,n,a,i){return e=mu(mu(e,t),mu(n,i)),mu(e<<a|e>>>32-a,s)}function Ji(t,e,s,n,a,i,c){return db(e&s|~e&n,t,e,a,i,c)}function Wi(t,e,s,n,a,i,c){return db(e&n|s&~n,t,e,a,i,c)}function Xi(t,e,s,n,a,i,c){return db(e^s^n,t,e,a,i,c)}function Zi(t,e,s,n,a,i,c){return db(s^(e|~n),t,e,a,i,c)}function WB(t){var e,s=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)D1(n,x_(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(D1(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*s,D1(n,a),n}function x_(t){var e,s=[];for(e=0;e<64;e+=4)s[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return s}var pj="0123456789abcdef".split("");function b_(t){for(var e="",s=0;s<4;s++)e+=pj[t>>8*s+4&15]+pj[t>>8*s&15];return e}function v_(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function $v(t){return WB(t).map(v_).join("")}var y_=(function(t){for(var e=0;e<t.length;e++)t[e]=b_(t[e]);return t.join("")})(WB("hello"))!="5d41402abc4b2a76b9719d911017c592";function mu(t,e){if(y_){var s=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(s>>16)<<16|65535&s}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Gv(t,e){var s,n,a,i;if(t!==s){for(var c=(a=t,i=1+(256/t.length|0),new Array(i+1).join(a)),A=[],d=0;d<256;d++)A[d]=d;var f=0;for(d=0;d<256;d++){var u=A[d];f=(f+u+c.charCodeAt(d))%256,A[d]=A[f],A[f]=u}s=t,n=A}else A=n;var p=e.length,x=0,m=0,j="";for(d=0;d<p;d++)m=(m+(u=A[x=(x+1)%256]))%256,A[x]=A[m],A[m]=u,c=A[(A[x]+A[m])%256],j+=String.fromCharCode(e.charCodeAt(d)^c);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var mj={print:4,modify:8,copy:16,"annot-forms":32};function Sf(t,e,s,n){this.v=1,this.r=2;var a=192;t.forEach(function(A){if(mj.perm!==void 0)throw new Error("Invalid permission: "+A);a+=mj[A]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),c=(s+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,c),this.P=-(1+(255^a)),this.encryptionKey=$v(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Gv(this.encryptionKey,this.padding)}function Ef(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",s=t.length,n=0;n<s;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function gj(t){if(Rr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(s,n,a){if(a=a||!1,typeof s!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(s)||(e[s]={});var i=Math.random().toString(35);return e[s][i]=[n,!!a],i},this.unsubscribe=function(s){for(var n in e)if(e[n][s])return delete e[n][s],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(s){if(e.hasOwnProperty(s)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in e[s]){var c=e[s][i];try{c[0].apply(t,n)}catch(A){Ts.console&&nn.error("jsPDF PubSub Error",A.message,A)}c[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Up(t){if(!(this instanceof Up))return new Up(t);var e="opacity,stroke-opacity".split(",");for(var s in t)t.hasOwnProperty(s)&&e.indexOf(s)>=0&&(this[s]=t[s]);this.id="",this.objectNumber=-1}function XB(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function uu(t,e,s,n,a){if(!(this instanceof uu))return new uu(t,e,s,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=s,XB.call(this,n,a)}function vh(t,e,s,n,a){if(!(this instanceof vh))return new vh(t,e,s,n,a);this.boundingBox=t,this.xStep=e,this.yStep=s,this.stream="",this.cloneIndex=0,XB.call(this,n,a)}function us(t){var e,s=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],c=[],A=1,d=16,f="S",u=null;Rr(t=t||{})==="object"&&(s=t.orientation,n=t.unit||n,a=t.format||a,i=t.compress||t.compressPdf||i,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),A=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(d=t.floatPrecision),f=t.defaultPathOperation||"S"),c=t.filters||(i===!0?["FlateEncode"]:c),n=n||"mm",s=(""+(s||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,x={},m={internal:{},__private__:{}};m.__private__.PubSub=gj;var j="1.3",w=m.__private__.getPdfVersion=function(){return j};m.__private__.setPdfVersion=function(M){j=M};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return S};var C=m.__private__.getPageFormat=function(M){return S[M]};a=a||"a4";var F="compat",U="advanced",_=F;function z(){this.saveGraphicsState(),ie(new Et(Oe,0,0,-Oe,0,so()*Oe).toString()+" cm"),this.setFontSize(this.getFontSize()/Oe),f="n",_=U}function I(){this.restoreGraphicsState(),f="S",_=F}var H=m.__private__.combineFontStyleAndFontWeight=function(M,le){if(M=="bold"&&le=="normal"||M=="bold"&&le==400||M=="normal"&&le=="italic"||M=="bold"&&le=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return le&&(M=le==400||le==="normal"?M==="italic"?"italic":"normal":le!=700&&le!=="bold"||M!=="normal"?(le==700?"bold":le)+""+M:"bold"),M};m.advancedAPI=function(M){var le=_===F;return le&&z.call(this),typeof M!="function"||(M(this),le&&I.call(this)),this},m.compatAPI=function(M){var le=_===U;return le&&I.call(this),typeof M!="function"||(M(this),le&&z.call(this)),this},m.isAdvancedAPI=function(){return _===U};var ee,$=function(M){if(_!==U)throw new Error(M+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ce=m.roundToPrecision=m.__private__.roundToPrecision=function(M,le){var je=e||le;if(isNaN(M)||isNaN(je))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return M.toFixed(je).replace(/0+$/,"")};ee=m.hpf=m.__private__.hpf=typeof d=="number"?function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(M,d)}:d==="smart"?function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(M,M>-1&&M<1?16:5)}:function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.hpf");return ce(M,16)};var Q=m.f2=m.__private__.f2=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.f2");return ce(M,2)},q=m.__private__.f3=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.f3");return ce(M,3)},te=m.scale=m.__private__.scale=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.scale");return _===F?M*Oe:_===U?M:void 0},X=function(M){return te((function(le){return _===F?so()-le:_===U?le:void 0})(M))};m.__private__.setPrecision=m.setPrecision=function(M){typeof parseInt(M,10)=="number"&&(e=parseInt(M,10))};var Ae,W="00000000000000000000000000000000",se=m.__private__.getFileId=function(){return W},Z=m.__private__.setFileId=function(M){return W=M!==void 0&&/^[a-fA-F0-9]{32}$/.test(M)?M.toUpperCase():W.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(_n=new Sf(u.userPermissions,u.userPassword,u.ownerPassword,W)),W};m.setFileId=function(M){return Z(M),this},m.getFileId=function(){return se()};var re=m.__private__.convertDateToPDFDate=function(M){var le=M.getTimezoneOffset(),je=le<0?"+":"-",Se=Math.floor(Math.abs(le/60)),De=Math.abs(le%60),dt=[je,V(Se),"'",V(De),"'"].join("");return["D:",M.getFullYear(),V(M.getMonth()+1),V(M.getDate()),V(M.getHours()),V(M.getMinutes()),V(M.getSeconds()),dt].join("")},ve=m.__private__.convertPDFDateToDate=function(M){var le=parseInt(M.substr(2,4),10),je=parseInt(M.substr(6,2),10)-1,Se=parseInt(M.substr(8,2),10),De=parseInt(M.substr(10,2),10),dt=parseInt(M.substr(12,2),10),yt=parseInt(M.substr(14,2),10);return new Date(le,je,Se,De,dt,yt,0)},ae=m.__private__.setCreationDate=function(M){var le;if(M===void 0&&(M=new Date),M instanceof Date)le=re(M);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(M))throw new Error("Invalid argument passed to jsPDF.setCreationDate");le=M}return Ae=le},R=m.__private__.getCreationDate=function(M){var le=Ae;return M==="jsDate"&&(le=ve(Ae)),le};m.setCreationDate=function(M){return ae(M),this},m.getCreationDate=function(M){return R(M)};var P,V=m.__private__.padd2=function(M){return("0"+parseInt(M)).slice(-2)},K=m.__private__.padd2Hex=function(M){return("00"+(M=M.toString())).substr(M.length)},ne=0,pe=[],Ce=[],Ue=0,Ne=[],Ie=[],Pe=!1,ze=Ce;m.__private__.setCustomOutputDestination=function(M){Pe=!0,ze=M};var gt=function(M){Pe||(ze=M)};m.__private__.resetCustomOutputDestination=function(){Pe=!1,ze=Ce};var ie=m.__private__.out=function(M){return M=M.toString(),Ue+=M.length+1,ze.push(M),ze},Be=m.__private__.write=function(M){return ie(arguments.length===1?M.toString():Array.prototype.join.call(arguments," "))},tt=m.__private__.getArrayBuffer=function(M){for(var le=M.length,je=new ArrayBuffer(le),Se=new Uint8Array(je);le--;)Se[le]=M.charCodeAt(le);return je},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Xe};var et=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(M){return et=_===U?M/Oe:M,this};var Tt,Nt=m.__private__.getFontSize=m.getFontSize=function(){return _===F?et:et*Oe},Mt=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(M){return Mt=M,this},m.__private__.getR2L=m.getR2L=function(){return Mt};var Qt,pt=m.__private__.setZoomMode=function(M){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(M))Tt=M;else if(isNaN(M)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(M)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+M+'" is not recognized.');Tt=M}else Tt=parseInt(M,10)};m.__private__.getZoomMode=function(){return Tt};var rt,Ut=m.__private__.setPageMode=function(M){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(M)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+M+'" is not recognized.');Qt=M};m.__private__.getPageMode=function(){return Qt};var rs=m.__private__.setLayoutMode=function(M){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(M)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+M+'" is not recognized.');rt=M};m.__private__.getLayoutMode=function(){return rt},m.__private__.setDisplayMode=m.setDisplayMode=function(M,le,je){return pt(M),rs(le),Ut(je),this};var Ot={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(M){if(Object.keys(Ot).indexOf(M)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ot[M]},m.__private__.getDocumentProperties=function(){return Ot},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(M){for(var le in Ot)Ot.hasOwnProperty(le)&&M[le]&&(Ot[le]=M[le]);return this},m.__private__.setDocumentProperty=function(M,le){if(Object.keys(Ot).indexOf(M)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ot[M]=le};var Dt,Oe,Ge,ft,ht,vt={},kt={},Vt=[],zt={},Bs={},Re={},We={},$t=null,wt=0,st=[],Ct=new gj(m),as=t.hotfixes||[],ps={},ct={},jt=[],Et=function M(le,je,Se,De,dt,yt){if(!(this instanceof M))return new M(le,je,Se,De,dt,yt);isNaN(le)&&(le=1),isNaN(je)&&(je=0),isNaN(Se)&&(Se=0),isNaN(De)&&(De=1),isNaN(dt)&&(dt=0),isNaN(yt)&&(yt=0),this._matrix=[le,je,Se,De,dt,yt]};Object.defineProperty(Et.prototype,"sx",{get:function(){return this._matrix[0]},set:function(M){this._matrix[0]=M}}),Object.defineProperty(Et.prototype,"shy",{get:function(){return this._matrix[1]},set:function(M){this._matrix[1]=M}}),Object.defineProperty(Et.prototype,"shx",{get:function(){return this._matrix[2]},set:function(M){this._matrix[2]=M}}),Object.defineProperty(Et.prototype,"sy",{get:function(){return this._matrix[3]},set:function(M){this._matrix[3]=M}}),Object.defineProperty(Et.prototype,"tx",{get:function(){return this._matrix[4]},set:function(M){this._matrix[4]=M}}),Object.defineProperty(Et.prototype,"ty",{get:function(){return this._matrix[5]},set:function(M){this._matrix[5]=M}}),Object.defineProperty(Et.prototype,"a",{get:function(){return this._matrix[0]},set:function(M){this._matrix[0]=M}}),Object.defineProperty(Et.prototype,"b",{get:function(){return this._matrix[1]},set:function(M){this._matrix[1]=M}}),Object.defineProperty(Et.prototype,"c",{get:function(){return this._matrix[2]},set:function(M){this._matrix[2]=M}}),Object.defineProperty(Et.prototype,"d",{get:function(){return this._matrix[3]},set:function(M){this._matrix[3]=M}}),Object.defineProperty(Et.prototype,"e",{get:function(){return this._matrix[4]},set:function(M){this._matrix[4]=M}}),Object.defineProperty(Et.prototype,"f",{get:function(){return this._matrix[5]},set:function(M){this._matrix[5]=M}}),Object.defineProperty(Et.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Et.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Et.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Et.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Et.prototype.join=function(M){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ee).join(M)},Et.prototype.multiply=function(M){var le=M.sx*this.sx+M.shy*this.shx,je=M.sx*this.shy+M.shy*this.sy,Se=M.shx*this.sx+M.sy*this.shx,De=M.shx*this.shy+M.sy*this.sy,dt=M.tx*this.sx+M.ty*this.shx+this.tx,yt=M.tx*this.shy+M.ty*this.sy+this.ty;return new Et(le,je,Se,De,dt,yt)},Et.prototype.decompose=function(){var M=this.sx,le=this.shy,je=this.shx,Se=this.sy,De=this.tx,dt=this.ty,yt=Math.sqrt(M*M+le*le),Zt=(M/=yt)*je+(le/=yt)*Se;je-=M*Zt,Se-=le*Zt;var ns=Math.sqrt(je*je+Se*Se);return Zt/=ns,M*(Se/=ns)<le*(je/=ns)&&(M=-M,le=-le,Zt=-Zt,yt=-yt),{scale:new Et(yt,0,0,ns,0,0),translate:new Et(1,0,0,1,De,dt),rotate:new Et(M,le,-le,M,0,0),skew:new Et(1,0,Zt,1,0,0)}},Et.prototype.toString=function(M){return this.join(" ")},Et.prototype.inversed=function(){var M=this.sx,le=this.shy,je=this.shx,Se=this.sy,De=this.tx,dt=this.ty,yt=1/(M*Se-le*je),Zt=Se*yt,ns=-le*yt,ws=-je*yt,Us=M*yt;return new Et(Zt,ns,ws,Us,-Zt*De-ws*dt,-ns*De-Us*dt)},Et.prototype.applyToPoint=function(M){var le=M.x*this.sx+M.y*this.shx+this.tx,je=M.x*this.shy+M.y*this.sy+this.ty;return new Si(le,je)},Et.prototype.applyToRectangle=function(M){var le=this.applyToPoint(M),je=this.applyToPoint(new Si(M.x+M.w,M.y+M.h));return new zr(le.x,le.y,je.x-le.x,je.y-le.y)},Et.prototype.clone=function(){var M=this.sx,le=this.shy,je=this.shx,Se=this.sy,De=this.tx,dt=this.ty;return new Et(M,le,je,Se,De,dt)},m.Matrix=Et;var hs=m.matrixMult=function(M,le){return le.multiply(M)},Ys=new Et(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Ys;var Cs=function(M,le){if(!Bs[M]){var je=(le instanceof uu?"Sh":"P")+(Object.keys(zt).length+1).toString(10);le.id=je,Bs[M]=je,zt[je]=le,Ct.publish("addPattern",le)}};m.ShadingPattern=uu,m.TilingPattern=vh,m.addShadingPattern=function(M,le){return $("addShadingPattern()"),Cs(M,le),this},m.beginTilingPattern=function(M){$("beginTilingPattern()"),Ei(M.boundingBox[0],M.boundingBox[1],M.boundingBox[2]-M.boundingBox[0],M.boundingBox[3]-M.boundingBox[1],M.matrix)},m.endTilingPattern=function(M,le){$("endTilingPattern()"),le.stream=Ie[P].join(`
`),Cs(M,le),Ct.publish("endTilingPattern",le),jt.pop().restore()};var Tr,qt=m.__private__.newObject=function(){var M=fr();return Ls(M,!0),M},fr=m.__private__.newObjectDeferred=function(){return ne++,pe[ne]=function(){return Ue},ne},Ls=function(M,le){return le=typeof le=="boolean"&&le,pe[M]=Ue,le&&ie(M+" 0 obj"),M},yr=m.__private__.newAdditionalObject=function(){var M={objId:fr(),content:""};return Ne.push(M),M},Hr=fr(),pr=fr(),Pr=m.__private__.decodeColorString=function(M){var le=M.split(" ");if(le.length!==2||le[1]!=="g"&&le[1]!=="G")le.length!==5||le[4]!=="k"&&le[4]!=="K"||(le=[(1-le[0])*(1-le[3]),(1-le[1])*(1-le[3]),(1-le[2])*(1-le[3]),"r"]);else{var je=parseFloat(le[0]);le=[je,je,je,"r"]}for(var Se="#",De=0;De<3;De++)Se+=("0"+Math.floor(255*parseFloat(le[De])).toString(16)).slice(-2);return Se},xa=m.__private__.encodeColorString=function(M){var le;typeof M=="string"&&(M={ch1:M});var je=M.ch1,Se=M.ch2,De=M.ch3,dt=M.ch4,yt=M.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof je=="string"&&je.charAt(0)!=="#"){var Zt=new JB(je);if(Zt.ok)je=Zt.toHex();else if(!/^\d*\.?\d*$/.test(je))throw new Error('Invalid color "'+je+'" passed to jsPDF.encodeColorString.')}if(typeof je=="string"&&/^#[0-9A-Fa-f]{3}$/.test(je)&&(je="#"+je[1]+je[1]+je[2]+je[2]+je[3]+je[3]),typeof je=="string"&&/^#[0-9A-Fa-f]{6}$/.test(je)){var ns=parseInt(je.substr(1),16);je=ns>>16&255,Se=ns>>8&255,De=255&ns}if(Se===void 0||dt===void 0&&je===Se&&Se===De)le=typeof je=="string"?je+" "+yt[0]:M.precision===2?Q(je/255)+" "+yt[0]:q(je/255)+" "+yt[0];else if(dt===void 0||Rr(dt)==="object"){if(dt&&!isNaN(dt.a)&&dt.a===0)return["1.","1.","1.",yt[1]].join(" ");le=typeof je=="string"?[je,Se,De,yt[1]].join(" "):M.precision===2?[Q(je/255),Q(Se/255),Q(De/255),yt[1]].join(" "):[q(je/255),q(Se/255),q(De/255),yt[1]].join(" ")}else le=typeof je=="string"?[je,Se,De,dt,yt[2]].join(" "):M.precision===2?[Q(je),Q(Se),Q(De),Q(dt),yt[2]].join(" "):[q(je),q(Se),q(De),q(dt),yt[2]].join(" ");return le},Va=m.__private__.getFilters=function(){return c},ji=m.__private__.putStream=function(M){var le=(M=M||{}).data||"",je=M.filters||Va(),Se=M.alreadyAppliedFilters||[],De=M.addLength1||!1,dt=le.length,yt=M.objectId,Zt=function(On){return On};if(u!==null&&yt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Zt=_n.encryptor(yt,0));var ns={};je===!0&&(je=["FlateEncode"]);var ws=M.additionalKeyValues||[],Us=(ns=us.API.processDataByFilters!==void 0?us.API.processDataByFilters(le,je):{data:le,reverseChain:[]}).reverseChain+(Array.isArray(Se)?Se.join(" "):Se.toString());if(ns.data.length!==0&&(ws.push({key:"Length",value:ns.data.length}),De===!0&&ws.push({key:"Length1",value:dt})),Us.length!=0)if(Us.split("/").length-1==1)ws.push({key:"Filter",value:Us});else{ws.push({key:"Filter",value:"["+Us+"]"});for(var tr=0;tr<ws.length;tr+=1)if(ws[tr].key==="DecodeParms"){for(var Jr=[],fn=0;fn<ns.reverseChain.split("/").length-1;fn+=1)Jr.push("null");Jr.push(ws[tr].value),ws[tr].value="["+Jr.join(" ")+"]"}}ie("<<");for(var mr=0;mr<ws.length;mr++)ie("/"+ws[mr].key+" "+ws[mr].value);ie(">>"),ns.data.length!==0&&(ie("stream"),ie(Zt(ns.data)),ie("endstream"))},oc=m.__private__.putPage=function(M){var le=M.number,je=M.data,Se=M.objId,De=M.contentsObjId;Ls(Se,!0),ie("<</Type /Page"),ie("/Parent "+M.rootDictionaryObjId+" 0 R"),ie("/Resources "+M.resourceDictionaryObjId+" 0 R"),ie("/MediaBox ["+parseFloat(ee(M.mediaBox.bottomLeftX))+" "+parseFloat(ee(M.mediaBox.bottomLeftY))+" "+ee(M.mediaBox.topRightX)+" "+ee(M.mediaBox.topRightY)+"]"),M.cropBox!==null&&ie("/CropBox ["+ee(M.cropBox.bottomLeftX)+" "+ee(M.cropBox.bottomLeftY)+" "+ee(M.cropBox.topRightX)+" "+ee(M.cropBox.topRightY)+"]"),M.bleedBox!==null&&ie("/BleedBox ["+ee(M.bleedBox.bottomLeftX)+" "+ee(M.bleedBox.bottomLeftY)+" "+ee(M.bleedBox.topRightX)+" "+ee(M.bleedBox.topRightY)+"]"),M.trimBox!==null&&ie("/TrimBox ["+ee(M.trimBox.bottomLeftX)+" "+ee(M.trimBox.bottomLeftY)+" "+ee(M.trimBox.topRightX)+" "+ee(M.trimBox.topRightY)+"]"),M.artBox!==null&&ie("/ArtBox ["+ee(M.artBox.bottomLeftX)+" "+ee(M.artBox.bottomLeftY)+" "+ee(M.artBox.topRightX)+" "+ee(M.artBox.topRightY)+"]"),typeof M.userUnit=="number"&&M.userUnit!==1&&ie("/UserUnit "+M.userUnit),Ct.publish("putPage",{objId:Se,pageContext:st[le],pageNumber:le,page:je}),ie("/Contents "+De+" 0 R"),ie(">>"),ie("endobj");var dt=je.join(`
`);return _===U&&(dt+=`
Q`),Ls(De,!0),ji({data:dt,filters:Va(),objectId:De}),ie("endobj"),Se},li=m.__private__.putPages=function(){var M,le,je=[];for(M=1;M<=wt;M++)st[M].objId=fr(),st[M].contentsObjId=fr();for(M=1;M<=wt;M++)je.push(oc({number:M,data:Ie[M],objId:st[M].objId,contentsObjId:st[M].contentsObjId,mediaBox:st[M].mediaBox,cropBox:st[M].cropBox,bleedBox:st[M].bleedBox,trimBox:st[M].trimBox,artBox:st[M].artBox,userUnit:st[M].userUnit,rootDictionaryObjId:Hr,resourceDictionaryObjId:pr}));Ls(Hr,!0),ie("<</Type /Pages");var Se="/Kids [";for(le=0;le<wt;le++)Se+=je[le]+" 0 R ";ie(Se+"]"),ie("/Count "+wt),ie(">>"),ie("endobj"),Ct.publish("postPutPages")},Ni=function(M){Ct.publish("putFont",{font:M,out:ie,newObject:qt,putStream:ji}),M.isAlreadyPutted!==!0&&(M.objectNumber=qt(),ie("<<"),ie("/Type /Font"),ie("/BaseFont /"+Ef(M.postScriptName)),ie("/Subtype /Type1"),typeof M.encoding=="string"&&ie("/Encoding /"+M.encoding),ie("/FirstChar 32"),ie("/LastChar 255"),ie(">>"),ie("endobj"))},Co=function(M){M.objectNumber=qt();var le=[];le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Form"}),le.push({key:"BBox",value:"["+[ee(M.x),ee(M.y),ee(M.x+M.width),ee(M.y+M.height)].join(" ")+"]"}),le.push({key:"Matrix",value:"["+M.matrix.toString()+"]"});var je=M.pages[1].join(`
`);ji({data:je,additionalKeyValues:le,objectId:M.objectNumber}),ie("endobj")},nl=function(M,le){le||(le=21);var je=qt(),Se=(function(yt,Zt){var ns,ws=[],Us=1/(Zt-1);for(ns=0;ns<1;ns+=Us)ws.push(ns);if(ws.push(1),yt[0].offset!=0){var tr={offset:0,color:yt[0].color};yt.unshift(tr)}if(yt[yt.length-1].offset!=1){var Jr={offset:1,color:yt[yt.length-1].color};yt.push(Jr)}for(var fn="",mr=0,On=0;On<ws.length;On++){for(ns=ws[On];ns>yt[mr+1].offset;)mr++;var Nn=yt[mr].offset,la=(ns-Nn)/(yt[mr+1].offset-Nn),ro=yt[mr].color,cl=yt[mr+1].color;fn+=K(Math.round((1-la)*ro[0]+la*cl[0]).toString(16))+K(Math.round((1-la)*ro[1]+la*cl[1]).toString(16))+K(Math.round((1-la)*ro[2]+la*cl[2]).toString(16))}return fn.trim()})(M.colors,le),De=[];De.push({key:"FunctionType",value:"0"}),De.push({key:"Domain",value:"[0.0 1.0]"}),De.push({key:"Size",value:"["+le+"]"}),De.push({key:"BitsPerSample",value:"8"}),De.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),De.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ji({data:Se,additionalKeyValues:De,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:je}),ie("endobj"),M.objectNumber=qt(),ie("<< /ShadingType "+M.type),ie("/ColorSpace /DeviceRGB");var dt="/Coords ["+ee(parseFloat(M.coords[0]))+" "+ee(parseFloat(M.coords[1]))+" ";M.type===2?dt+=ee(parseFloat(M.coords[2]))+" "+ee(parseFloat(M.coords[3])):dt+=ee(parseFloat(M.coords[2]))+" "+ee(parseFloat(M.coords[3]))+" "+ee(parseFloat(M.coords[4]))+" "+ee(parseFloat(M.coords[5])),ie(dt+="]"),M.matrix&&ie("/Matrix ["+M.matrix.toString()+"]"),ie("/Function "+je+" 0 R"),ie("/Extend [true true]"),ie(">>"),ie("endobj")},al=function(M,le){var je=fr(),Se=qt();le.push({resourcesOid:je,objectOid:Se}),M.objectNumber=Se;var De=[];De.push({key:"Type",value:"/Pattern"}),De.push({key:"PatternType",value:"1"}),De.push({key:"PaintType",value:"1"}),De.push({key:"TilingType",value:"1"}),De.push({key:"BBox",value:"["+M.boundingBox.map(ee).join(" ")+"]"}),De.push({key:"XStep",value:ee(M.xStep)}),De.push({key:"YStep",value:ee(M.yStep)}),De.push({key:"Resources",value:je+" 0 R"}),M.matrix&&De.push({key:"Matrix",value:"["+M.matrix.toString()+"]"}),ji({data:M.stream,additionalKeyValues:De,objectId:M.objectNumber}),ie("endobj")},cc=function(M){for(var le in M.objectNumber=qt(),ie("<<"),M)switch(le){case"opacity":ie("/ca "+Q(M[le]));break;case"stroke-opacity":ie("/CA "+Q(M[le]))}ie(">>"),ie("endobj")},Nl=function(M){Ls(M.resourcesOid,!0),ie("<<"),ie("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var le in ie("/Font <<"),vt)vt.hasOwnProperty(le)&&(p===!1||p===!0&&x.hasOwnProperty(le))&&ie("/"+le+" "+vt[le].objectNumber+" 0 R");ie(">>")})(),(function(){if(Object.keys(zt).length>0){for(var le in ie("/Shading <<"),zt)zt.hasOwnProperty(le)&&zt[le]instanceof uu&&zt[le].objectNumber>=0&&ie("/"+le+" "+zt[le].objectNumber+" 0 R");Ct.publish("putShadingPatternDict"),ie(">>")}})(),(function(le){if(Object.keys(zt).length>0){for(var je in ie("/Pattern <<"),zt)zt.hasOwnProperty(je)&&zt[je]instanceof m.TilingPattern&&zt[je].objectNumber>=0&&zt[je].objectNumber<le&&ie("/"+je+" "+zt[je].objectNumber+" 0 R");Ct.publish("putTilingPatternDict"),ie(">>")}})(M.objectOid),(function(){if(Object.keys(Re).length>0){var le;for(le in ie("/ExtGState <<"),Re)Re.hasOwnProperty(le)&&Re[le].objectNumber>=0&&ie("/"+le+" "+Re[le].objectNumber+" 0 R");Ct.publish("putGStateDict"),ie(">>")}})(),(function(){for(var le in ie("/XObject <<"),ps)ps.hasOwnProperty(le)&&ps[le].objectNumber>=0&&ie("/"+le+" "+ps[le].objectNumber+" 0 R");Ct.publish("putXobjectDict"),ie(">>")})(),ie(">>"),ie("endobj")},hn=function(M){kt[M.fontName]=kt[M.fontName]||{},kt[M.fontName][M.fontStyle]=M.id},Jl=function(M,le,je,Se,De){var dt={id:"F"+(Object.keys(vt).length+1).toString(10),postScriptName:M,fontName:le,fontStyle:je,encoding:Se,isStandardFont:De||!1,metadata:{}};return Ct.publish("addFont",{font:dt,instance:this}),vt[dt.id]=dt,hn(dt),dt.id},$a=m.__private__.pdfEscape=m.pdfEscape=function(M,le){return(function(je,Se){var De,dt,yt,Zt,ns,ws,Us,tr,Jr;if(yt=(Se=Se||{}).sourceEncoding||"Unicode",ns=Se.outputEncoding,(Se.autoencode||ns)&&vt[Dt].metadata&&vt[Dt].metadata[yt]&&vt[Dt].metadata[yt].encoding&&(Zt=vt[Dt].metadata[yt].encoding,!ns&&vt[Dt].encoding&&(ns=vt[Dt].encoding),!ns&&Zt.codePages&&(ns=Zt.codePages[0]),typeof ns=="string"&&(ns=Zt[ns]),ns)){for(Us=!1,ws=[],De=0,dt=je.length;De<dt;De++)(tr=ns[je.charCodeAt(De)])?ws.push(String.fromCharCode(tr)):ws.push(je[De]),ws[De].charCodeAt(0)>>8&&(Us=!0);je=ws.join("")}for(De=je.length;Us===void 0&&De!==0;)je.charCodeAt(De-1)>>8&&(Us=!0),De--;if(!Us)return je;for(ws=Se.noBOM?[]:[254,255],De=0,dt=je.length;De<dt;De++){if((Jr=(tr=je.charCodeAt(De))>>8)>>8)throw new Error("Character at position "+De+" of string '"+je+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ws.push(Jr),ws.push(tr-(Jr<<8))}return String.fromCharCode.apply(void 0,ws)})(M,le).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ga=m.__private__.beginPage=function(M){Ie[++wt]=[],st[wt]={objId:0,contentsObjId:0,userUnit:Number(A),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(M[0]),topRightY:Number(M[1])}},EA(wt),gt(Ie[P])},Bl=function(M,le){var je,Se,De;switch(s=le||s,typeof M=="string"&&(je=C(M.toLowerCase()),Array.isArray(je)&&(Se=je[0],De=je[1])),Array.isArray(M)&&(Se=M[0]*Oe,De=M[1]*Oe),isNaN(Se)&&(Se=a[0],De=a[1]),(Se>14400||De>14400)&&(nn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Se=Math.min(14400,Se),De=Math.min(14400,De)),a=[Se,De],s.substr(0,1)){case"l":De>Se&&(a=[De,Se]);break;case"p":Se>De&&(a=[De,Se])}Ga(a),bs(uc),ie(Ja),fc!==0&&ie(fc+" J"),In!==0&&ie(In+" j"),Ct.publish("addPage",{pageNumber:wt})},Wl=function(M){M>0&&M<=wt&&(Ie.splice(M,1),st.splice(M,1),wt--,P>wt&&(P=wt),this.setPage(P))},EA=function(M){M>0&&M<=wt&&(P=M)},TA=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ie.length-1},Ac=function(M,le,je){var Se,De=void 0;return je=je||{},M=M!==void 0?M:vt[Dt].fontName,le=le!==void 0?le:vt[Dt].fontStyle,Se=M.toLowerCase(),kt[Se]!==void 0&&kt[Se][le]!==void 0?De=kt[Se][le]:kt[M]!==void 0&&kt[M][le]!==void 0?De=kt[M][le]:je.disableWarning===!1&&nn.warn("Unable to look up font label for font '"+M+"', '"+le+"'. Refer to getFontList() for available fonts."),De||je.noFallback||(De=kt.times[le])==null&&(De=kt.times.normal),De},aa=m.__private__.putInfo=function(){var M=qt(),le=function(Se){return Se};for(var je in u!==null&&(le=_n.encryptor(M,0)),ie("<<"),ie("/Producer ("+$a(le("jsPDF "+us.version))+")"),Ot)Ot.hasOwnProperty(je)&&Ot[je]&&ie("/"+je.substr(0,1).toUpperCase()+je.substr(1)+" ("+$a(le(Ot[je]))+")");ie("/CreationDate ("+$a(le(Ae))+")"),ie(">>"),ie("endobj")},Xl=m.__private__.putCatalog=function(M){var le=(M=M||{}).rootDictionaryObjId||Hr;switch(qt(),ie("<<"),ie("/Type /Catalog"),ie("/Pages "+le+" 0 R"),Tt||(Tt="fullwidth"),Tt){case"fullwidth":ie("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ie("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ie("/OpenAction [3 0 R /Fit]");break;case"original":ie("/OpenAction [3 0 R /XYZ null null 1]");break;default:var je=""+Tt;je.substr(je.length-1)==="%"&&(Tt=parseInt(Tt)/100),typeof Tt=="number"&&ie("/OpenAction [3 0 R /XYZ null null "+Q(Tt)+"]")}switch(rt||(rt="continuous"),rt){case"continuous":ie("/PageLayout /OneColumn");break;case"single":ie("/PageLayout /SinglePage");break;case"two":case"twoleft":ie("/PageLayout /TwoColumnLeft");break;case"tworight":ie("/PageLayout /TwoColumnRight")}Qt&&ie("/PageMode /"+Qt),Ct.publish("putCatalog"),ie(">>"),ie("endobj")},il=m.__private__.putTrailer=function(){ie("trailer"),ie("<<"),ie("/Size "+(ne+1)),ie("/Root "+ne+" 0 R"),ie("/Info "+(ne-1)+" 0 R"),u!==null&&ie("/Encrypt "+_n.oid+" 0 R"),ie("/ID [ <"+W+"> <"+W+"> ]"),ie(">>")},cr=m.__private__.putHeader=function(){ie("%PDF-"+j),ie("%")},So=m.__private__.putXRef=function(){var M="0000000000";ie("xref"),ie("0 "+(ne+1)),ie("0000000000 65535 f ");for(var le=1;le<=ne;le++)typeof pe[le]=="function"?ie((M+pe[le]()).slice(-10)+" 00000 n "):pe[le]!==void 0?ie((M+pe[le]).slice(-10)+" 00000 n "):ie("0000000000 00000 n ")},oi=m.__private__.buildDocument=function(){var M;ne=0,Ue=0,Ce=[],pe=[],Ne=[],Hr=fr(),pr=fr(),gt(Ce),Ct.publish("buildDocument"),cr(),li(),(function(){Ct.publish("putAdditionalObjects");for(var je=0;je<Ne.length;je++){var Se=Ne[je];Ls(Se.objId,!0),ie(Se.content),ie("endobj")}Ct.publish("postPutAdditionalObjects")})(),M=[],(function(){for(var je in vt)vt.hasOwnProperty(je)&&(p===!1||p===!0&&x.hasOwnProperty(je))&&Ni(vt[je])})(),(function(){var je;for(je in Re)Re.hasOwnProperty(je)&&cc(Re[je])})(),(function(){for(var je in ps)ps.hasOwnProperty(je)&&Co(ps[je])})(),(function(je){var Se;for(Se in zt)zt.hasOwnProperty(Se)&&(zt[Se]instanceof uu?nl(zt[Se]):zt[Se]instanceof vh&&al(zt[Se],je))})(M),Ct.publish("putResources"),M.forEach(Nl),Nl({resourcesOid:pr,objectOid:Number.MAX_SAFE_INTEGER}),Ct.publish("postPutResources"),u!==null&&(_n.oid=qt(),ie("<<"),ie("/Filter /Standard"),ie("/V "+_n.v),ie("/R "+_n.r),ie("/U <"+_n.toHexString(_n.U)+">"),ie("/O <"+_n.toHexString(_n.O)+">"),ie("/P "+_n.P),ie(">>"),ie("endobj")),aa(),Xl();var le=Ue;return So(),il(),ie("startxref"),ie(""+le),ie("%%EOF"),gt(Ie[P]),Ce.join(`
`)},Bi=m.__private__.getBlob=function(M){return new Blob([tt(M)],{type:"application/pdf"})},UA=m.output=m.__private__.output=(Tr=function(M,le){switch(typeof(le=le||{})=="string"?le={filename:le}:le.filename=le.filename||"generated.pdf",M){case void 0:return oi();case"save":m.save(le.filename);break;case"arraybuffer":return tt(oi());case"blob":return Bi(oi());case"bloburi":case"bloburl":if(Ts.URL!==void 0&&typeof Ts.URL.createObjectURL=="function")return Ts.URL&&Ts.URL.createObjectURL(Bi(oi()))||void 0;nn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var je="",Se=oi();try{je=fj(Se)}catch{je=fj(unescape(encodeURIComponent(Se)))}return"data:application/pdf;filename="+le.filename+";base64,"+je;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ts)==="[object Window]"){var De="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",dt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';le.pdfObjectUrl&&(De=le.pdfObjectUrl,dt="");var yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+De+'"'+dt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(le)+");<\/script></body></html>",Zt=Ts.open();return Zt!==null&&Zt.document.write(yt),Zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ts)==="[object Window]"){var ns='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(le.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+le.filename+'" width="500px" height="400px" /></body></html>',ws=Ts.open();if(ws!==null){ws.document.write(ns);var Us=this;ws.document.documentElement.querySelector("#pdfViewer").onload=function(){ws.document.title=le.filename,ws.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Us.output("bloburl"))}}return ws}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ts)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var tr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",le)+'"></iframe></body></html>',Jr=Ts.open();if(Jr!==null&&(Jr.document.write(tr),Jr.document.title=le.filename),Jr||typeof safari>"u")return Jr;break;case"datauri":case"dataurl":return Ts.document.location.href=this.output("datauristring",le);default:return null}},Tr.foo=function(){try{return Tr.apply(this,arguments)}catch(je){var M=je.stack||"";~M.indexOf(" at ")&&(M=M.split(" at ")[1]);var le="Error in function "+M.split(`
`)[0].split("<")[0]+": "+je.message;if(!Ts.console)throw new Error(le);Ts.console.error(le,je),Ts.alert&&alert(le)}},Tr.foo.bar=Tr,Tr.foo),wr=function(M){return Array.isArray(as)===!0&&as.indexOf(M)>-1};switch(n){case"pt":Oe=1;break;case"mm":Oe=72/25.4;break;case"cm":Oe=72/2.54;break;case"in":Oe=72;break;case"px":Oe=wr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Oe=12;break;case"ex":Oe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Oe=n}var _n=null;ae(),Z();var wn=m.__private__.getPageInfo=m.getPageInfo=function(M){if(isNaN(M)||M%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:st[M].objId,pageNumber:M,pageContext:st[M]}},Rc=m.__private__.getPageInfoByObjId=function(M){if(isNaN(M)||M%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var le in st)if(st[le].objId===M)break;return wn(le)},bd=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:st[P].objId,pageNumber:P,pageContext:st[P]}};m.addPage=function(){return Bl.apply(this,arguments),this},m.setPage=function(){return EA.apply(this,arguments),gt.call(this,Ie[P]),this},m.insertPage=function(M){return this.addPage(),this.movePage(P,M),this},m.movePage=function(M,le){var je,Se;if(M>le){je=Ie[M],Se=st[M];for(var De=M;De>le;De--)Ie[De]=Ie[De-1],st[De]=st[De-1];Ie[le]=je,st[le]=Se,this.setPage(le)}else if(M<le){je=Ie[M],Se=st[M];for(var dt=M;dt<le;dt++)Ie[dt]=Ie[dt+1],st[dt]=st[dt+1];Ie[le]=je,st[le]=Se,this.setPage(le)}return this},m.deletePage=function(){return Wl.apply(this,arguments),this},m.__private__.text=m.text=function(M,le,je,Se,De){var dt,yt,Zt,ns,ws,Us,tr,Jr,fn,mr=(Se=Se||{}).scope||this;if(typeof M=="number"&&typeof le=="number"&&(typeof je=="string"||Array.isArray(je))){var On=je;je=le,le=M,M=On}if(arguments[3]instanceof Et==0?(Zt=arguments[4],ns=arguments[5],Rr(tr=arguments[3])==="object"&&tr!==null||(typeof Zt=="string"&&(ns=Zt,Zt=null),typeof tr=="string"&&(ns=tr,tr=null),typeof tr=="number"&&(Zt=tr,tr=null),Se={flags:tr,angle:Zt,align:ns})):($("The transform parameter of text() with a Matrix value"),fn=De),isNaN(le)||isNaN(je)||M==null)throw new Error("Invalid arguments passed to jsPDF.text");if(M.length===0)return mr;var Nn,la="",ro=typeof Se.lineHeightFactor=="number"?Se.lineHeightFactor:Zl,cl=mr.internal.scaleFactor;function no(ir){return ir=ir.split("	").join(Array(Se.TabLen||9).join(" ")),$a(ir,tr)}function RA(ir){for(var sr,Er=ir.concat(),Ar=[],pl=Er.length;pl--;)typeof(sr=Er.shift())=="string"?Ar.push(sr):Array.isArray(ir)&&(sr.length===1||sr[1]===void 0&&sr[2]===void 0)?Ar.push(sr[0]):Ar.push([sr[0],sr[1],sr[2]]);return Ar}function Kc(ir,sr){var Er;if(typeof ir=="string")Er=sr(ir)[0];else if(Array.isArray(ir)){for(var Ar,pl,ml=ir.concat(),vc=[],Mo=ml.length;Mo--;)typeof(Ar=ml.shift())=="string"?vc.push(sr(Ar)[0]):Array.isArray(Ar)&&typeof Ar[0]=="string"&&(pl=sr(Ar[0],Ar[1],Ar[2]),vc.push([pl[0],pl[1],pl[2]]));Er=vc}return Er}var Fi=!1,Li=!0;if(typeof M=="string")Fi=!0;else if(Array.isArray(M)){var Uo=M.concat();yt=[];for(var Ai,Wr=Uo.length;Wr--;)(typeof(Ai=Uo.shift())!="string"||Array.isArray(Ai)&&typeof Ai[0]!="string")&&(Li=!1);Fi=Li}if(Fi===!1)throw new Error('Type of text must be string or Array. "'+M+'" is not recognized.');typeof M=="string"&&(M=M.match(/[\r?\n]/)?M.split(/\r\n|\r|\n/g):[M]);var $s=et/mr.internal.scaleFactor,Fo=$s*(ro-1);switch(Se.baseline){case"bottom":je-=Fo;break;case"top":je+=$s-Fo;break;case"hanging":je+=$s-2*Fo;break;case"middle":je+=$s/2-Fo}if((Us=Se.maxWidth||0)>0&&(typeof M=="string"?M=mr.splitTextToSize(M,Us):Object.prototype.toString.call(M)==="[object Array]"&&(M=M.reduce(function(ir,sr){return ir.concat(mr.splitTextToSize(sr,Us))},[]))),dt={text:M,x:le,y:je,options:Se,mutex:{pdfEscape:$a,activeFontKey:Dt,fonts:vt,activeFontSize:et}},Ct.publish("preProcessText",dt),M=dt.text,Zt=(Se=dt.options).angle,fn instanceof Et==0&&Zt&&typeof Zt=="number"){Zt*=Math.PI/180,Se.rotationDirection===0&&(Zt=-Zt),_===U&&(Zt=-Zt);var Lo=Math.cos(Zt),Al=Math.sin(Zt);fn=new Et(Lo,Al,-Al,Lo,0,0)}else Zt&&Zt instanceof Et&&(fn=Zt);_!==U||fn||(fn=Ys),(ws=Se.charSpace||Ci)!==void 0&&(la+=ee(te(ws))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Jr=Se.horizontalScale)!==void 0&&(la+=ee(100*Jr)+` Tz
`),Se.lang;var Bn=-1,$n=Se.renderingMode!==void 0?Se.renderingMode:Se.stroke,Vc=mr.internal.getCurrentPageInfo().pageContext;switch($n){case 0:case!1:case"fill":Bn=0;break;case 1:case!0:case"stroke":Bn=1;break;case 2:case"fillThenStroke":Bn=2;break;case 3:case"invisible":Bn=3;break;case 4:case"fillAndAddForClipping":Bn=4;break;case 5:case"strokeAndAddPathForClipping":Bn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Bn=6;break;case 7:case"addToPathForClipping":Bn=7}var Mi=Vc.usedRenderingMode!==void 0?Vc.usedRenderingMode:-1;Bn!==-1?la+=Bn+` Tr
`:Mi!==-1&&(la+=`0 Tr
`),Bn!==-1&&(Vc.usedRenderingMode=Bn),ns=Se.align||"left";var ar,Qi=et*ro,Ur=mr.internal.pageSize.getWidth(),mc=vt[Dt];ws=Se.charSpace||Ci,Us=Se.maxWidth||0,tr=Object.assign({autoencode:!0,noBOM:!0},Se.flags);var Gn=[],_i=function(ir){return mr.getStringUnitWidth(ir,{font:mc,charSpace:ws,fontSize:et,doKerning:!1})*et/cl};if(Object.prototype.toString.call(M)==="[object Array]"){var Os;yt=RA(M),ns!=="left"&&(ar=yt.map(_i));var ba,dl=0;if(ns==="right"){le-=ar[0],M=[],Wr=yt.length;for(var ul=0;ul<Wr;ul++)ul===0?(ba=ci(le),Os=ia(je)):(ba=te(dl-ar[ul]),Os=-Qi),M.push([yt[ul],ba,Os]),dl=ar[ul]}else if(ns==="center"){le-=ar[0]/2,M=[],Wr=yt.length;for(var Sl=0;Sl<Wr;Sl++)Sl===0?(ba=ci(le),Os=ia(je)):(ba=te((dl-ar[Sl])/2),Os=-Qi),M.push([yt[Sl],ba,Os]),dl=ar[Sl]}else if(ns==="left"){M=[],Wr=yt.length;for(var ao=0;ao<Wr;ao++)M.push(yt[ao])}else if(ns==="justify"&&mc.encoding==="Identity-H"){M=[],Wr=yt.length,Us=Us!==0?Us:Ur;for(var gc=0,cn=0;cn<Wr;cn++)if(Os=cn===0?ia(je):-Qi,ba=cn===0?ci(le):gc,cn<Wr-1){var La=te((Us-ar[cn])/(yt[cn].split(" ").length-1)),oa=yt[cn].split(" ");M.push([oa[0]+" ",ba,Os]),gc=0;for(var ca=1;ca<oa.length;ca++){var Js=(_i(oa[ca-1]+" "+oa[ca])-_i(oa[ca]))*cl+La;ca==oa.length-1?M.push([oa[ca],Js,0]):M.push([oa[ca]+" ",Js,0]),gc-=Js}}else M.push([yt[cn],ba,Os]);M.push(["",gc,0])}else{if(ns!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(M=[],Wr=yt.length,Us=Us!==0?Us:Ur,cn=0;cn<Wr;cn++){Os=cn===0?ia(je):-Qi,ba=cn===0?ci(le):0;var va=yt[cn].split(" ").length-1,xc=va>0?(Us-ar[cn])/va:0;cn<Wr-1?Gn.push(ee(te(xc))):Gn.push(0),M.push([yt[cn],ba,Os])}}}(typeof Se.R2L=="boolean"?Se.R2L:Mt)===!0&&(M=Kc(M,function(ir,sr,Er){return[ir.split("").reverse().join(""),sr,Er]})),dt={text:M,x:le,y:je,options:Se,mutex:{pdfEscape:$a,activeFontKey:Dt,fonts:vt,activeFontSize:et}},Ct.publish("postProcessText",dt),M=dt.text,Nn=dt.mutex.isHex||!1;var bc=vt[Dt].encoding;bc!=="WinAnsiEncoding"&&bc!=="StandardEncoding"||(M=Kc(M,function(ir,sr,Er){return[no(ir),sr,Er]})),yt=RA(M),M=[];for(var hl,El,Tl,fl=Array.isArray(yt[0])?1:0,pn="",io=function(ir,sr,Er){var Ar="";return Er instanceof Et?(Er=typeof Se.angle=="number"?hs(Er,new Et(1,0,0,1,ir,sr)):hs(new Et(1,0,0,1,ir,sr),Er),_===U&&(Er=hs(new Et(1,0,0,-1,0,0),Er)),Ar=Er.join(" ")+` Tm
`):Ar=ee(ir)+" "+ee(sr)+` Td
`,Ar},ya=0;ya<yt.length;ya++){switch(pn="",fl){case 1:Tl=(Nn?"<":"(")+yt[ya][0]+(Nn?">":")"),hl=parseFloat(yt[ya][1]),El=parseFloat(yt[ya][2]);break;case 0:Tl=(Nn?"<":"(")+yt[ya]+(Nn?">":")"),hl=ci(le),El=ia(je)}Gn!==void 0&&Gn[ya]!==void 0&&(pn=Gn[ya]+` Tw
`),ya===0?M.push(pn+io(hl,El,fn)+Tl):fl===0?M.push(pn+Tl):fl===1&&M.push(pn+io(hl,El,fn)+Tl)}M=fl===0?M.join(` Tj
T* `):M.join(` Tj
`),M+=` Tj
`;var Ma=`BT
/`;return Ma+=Dt+" "+et+` Tf
`,Ma+=ee(et*ro)+` TL
`,Ma+=kl+`
`,Ma+=la,Ma+=M,ie(Ma+="ET"),x[Dt]=!0,mr};var FA=m.__private__.clip=m.clip=function(M){return ie(M==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return FA("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ie("n"),this};var Fa=m.__private__.isValidStyle=function(M){var le=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(M)!==-1&&(le=!0),le};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(M){return Fa(M)&&(f=M),this};var LA=m.__private__.getStyle=m.getStyle=function(M){var le=f;switch(M){case"D":case"S":le="S";break;case"F":le="f";break;case"FD":case"DF":le="B";break;case"f":case"f*":case"B":case"B*":le=M}return le},MA=m.close=function(){return ie("h"),this};m.stroke=function(){return ie("S"),this},m.fill=function(M){return qa("f",M),this},m.fillEvenOdd=function(M){return qa("f*",M),this},m.fillStroke=function(M){return qa("B",M),this},m.fillStrokeEvenOdd=function(M){return qa("B*",M),this};var qa=function(M,le){Rr(le)==="object"?vd(le,M):ie(M)},dc=function(M){M===null||_===U&&M===void 0||(M=LA(M),ie(M))};function QA(M,le,je,Se,De){var dt=new vh(le||this.boundingBox,je||this.xStep,Se||this.yStep,this.gState,De||this.matrix);dt.stream=this.stream;var yt=M+"$$"+this.cloneIndex+++"$$";return Cs(yt,dt),dt}var vd=function(M,le){var je=Bs[M.key],Se=zt[je];if(Se instanceof uu)ie("q"),ie(_A(le)),Se.gState&&m.setGState(Se.gState),ie(M.matrix.toString()+" cm"),ie("/"+je+" sh"),ie("Q");else if(Se instanceof vh){var De=new Et(1,0,0,-1,0,so());M.matrix&&(De=De.multiply(M.matrix||Ys),je=QA.call(Se,M.key,M.boundingBox,M.xStep,M.yStep,De).id),ie("q"),ie("/Pattern cs"),ie("/"+je+" scn"),Se.gState&&m.setGState(Se.gState),ie(le),ie("Q")}},_A=function(M){switch(M){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Hc=m.moveTo=function(M,le){return ie(ee(te(M))+" "+ee(X(le))+" m"),this},Pc=m.lineTo=function(M,le){return ie(ee(te(M))+" "+ee(X(le))+" l"),this},jn=m.curveTo=function(M,le,je,Se,De,dt){return ie([ee(te(M)),ee(X(le)),ee(te(je)),ee(X(Se)),ee(te(De)),ee(X(dt)),"c"].join(" ")),this};m.__private__.line=m.line=function(M,le,je,Se,De){if(isNaN(M)||isNaN(le)||isNaN(je)||isNaN(Se)||!Fa(De))throw new Error("Invalid arguments passed to jsPDF.line");return _===F?this.lines([[je-M,Se-le]],M,le,[1,1],De||"S"):this.lines([[je-M,Se-le]],M,le,[1,1]).stroke()},m.__private__.lines=m.lines=function(M,le,je,Se,De,dt){var yt,Zt,ns,ws,Us,tr,Jr,fn,mr,On,Nn,la;if(typeof M=="number"&&(la=je,je=le,le=M,M=la),Se=Se||[1,1],dt=dt||!1,isNaN(le)||isNaN(je)||!Array.isArray(M)||!Array.isArray(Se)||!Fa(De)||typeof dt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Hc(le,je),yt=Se[0],Zt=Se[1],ws=M.length,On=le,Nn=je,ns=0;ns<ws;ns++)(Us=M[ns]).length===2?(On=Us[0]*yt+On,Nn=Us[1]*Zt+Nn,Pc(On,Nn)):(tr=Us[0]*yt+On,Jr=Us[1]*Zt+Nn,fn=Us[2]*yt+On,mr=Us[3]*Zt+Nn,On=Us[4]*yt+On,Nn=Us[5]*Zt+Nn,jn(tr,Jr,fn,mr,On,Nn));return dt&&MA(),dc(De),this},m.path=function(M){for(var le=0;le<M.length;le++){var je=M[le],Se=je.c;switch(je.op){case"m":Hc(Se[0],Se[1]);break;case"l":Pc(Se[0],Se[1]);break;case"c":jn.apply(this,Se);break;case"h":MA()}}return this},m.__private__.rect=m.rect=function(M,le,je,Se,De){if(isNaN(M)||isNaN(le)||isNaN(je)||isNaN(Se)||!Fa(De))throw new Error("Invalid arguments passed to jsPDF.rect");return _===F&&(Se=-Se),ie([ee(te(M)),ee(X(le)),ee(te(je)),ee(te(Se)),"re"].join(" ")),dc(De),this},m.__private__.triangle=m.triangle=function(M,le,je,Se,De,dt,yt){if(isNaN(M)||isNaN(le)||isNaN(je)||isNaN(Se)||isNaN(De)||isNaN(dt)||!Fa(yt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[je-M,Se-le],[De-je,dt-Se],[M-De,le-dt]],M,le,[1,1],yt,!0),this},m.__private__.roundedRect=m.roundedRect=function(M,le,je,Se,De,dt,yt){if(isNaN(M)||isNaN(le)||isNaN(je)||isNaN(Se)||isNaN(De)||isNaN(dt)||!Fa(yt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Zt=4/3*(Math.SQRT2-1);return De=Math.min(De,.5*je),dt=Math.min(dt,.5*Se),this.lines([[je-2*De,0],[De*Zt,0,De,dt-dt*Zt,De,dt],[0,Se-2*dt],[0,dt*Zt,-De*Zt,dt,-De,dt],[2*De-je,0],[-De*Zt,0,-De,-dt*Zt,-De,-dt],[0,2*dt-Se],[0,-dt*Zt,De*Zt,-dt,De,-dt]],M+De,le,[1,1],yt,!0),this},m.__private__.ellipse=m.ellipse=function(M,le,je,Se,De){if(isNaN(M)||isNaN(le)||isNaN(je)||isNaN(Se)||!Fa(De))throw new Error("Invalid arguments passed to jsPDF.ellipse");var dt=4/3*(Math.SQRT2-1)*je,yt=4/3*(Math.SQRT2-1)*Se;return Hc(M+je,le),jn(M+je,le-yt,M+dt,le-Se,M,le-Se),jn(M-dt,le-Se,M-je,le-yt,M-je,le),jn(M-je,le+yt,M-dt,le+Se,M,le+Se),jn(M+dt,le+Se,M+je,le+yt,M+je,le),dc(De),this},m.__private__.circle=m.circle=function(M,le,je,Se){if(isNaN(M)||isNaN(le)||isNaN(je)||!Fa(Se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(M,le,je,je,Se)},m.setFont=function(M,le,je){return je&&(le=H(le,je)),Dt=Ac(M,le,{disableWarning:!1}),this};var ll=m.__private__.getFont=m.getFont=function(){return vt[Ac.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var M,le,je={};for(M in kt)if(kt.hasOwnProperty(M))for(le in je[M]=[],kt[M])kt[M].hasOwnProperty(le)&&je[M].push(le);return je},m.addFont=function(M,le,je,Se,De){var dt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&dt.indexOf(arguments[3])!==-1?De=arguments[3]:arguments[3]&&dt.indexOf(arguments[3])==-1&&(je=H(je,Se)),Jl.call(this,M,le,je,De=De||"Identity-H")};var Zl,uc=t.lineWidth||.200025,ki=m.__private__.getLineWidth=m.getLineWidth=function(){return uc},bs=m.__private__.setLineWidth=m.setLineWidth=function(M){return uc=M,ie(ee(te(M))+" w"),this};m.__private__.setLineDash=us.API.setLineDash=us.API.setLineDashPattern=function(M,le){if(M=M||[],le=le||0,isNaN(le)||!Array.isArray(M))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return M=M.map(function(je){return ee(te(je))}).join(" "),le=ee(te(le)),ie("["+M+"] "+le+" d"),this};var yd=m.__private__.getLineHeight=m.getLineHeight=function(){return et*Zl};m.__private__.getLineHeight=m.getLineHeight=function(){return et*Zl};var IA=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(M){return typeof(M=M||1.15)=="number"&&(Zl=M),this},wd=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Zl};IA(t.lineHeight);var ci=m.__private__.getHorizontalCoordinate=function(M){return te(M)},ia=m.__private__.getVerticalCoordinate=function(M){return _===U?M:st[P].mediaBox.topRightY-st[P].mediaBox.bottomLeftY-te(M)},Ya=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(M){return ee(ci(M))},Eo=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(M){return ee(ia(M))},Ja=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Pr(Ja)},m.__private__.setStrokeColor=m.setDrawColor=function(M,le,je,Se){return Ja=xa({ch1:M,ch2:le,ch3:je,ch4:Se,pdfColorType:"draw",precision:2}),ie(Ja),this};var To=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Pr(To)},m.__private__.setFillColor=m.setFillColor=function(M,le,je,Se){return To=xa({ch1:M,ch2:le,ch3:je,ch4:Se,pdfColorType:"fill",precision:2}),ie(To),this};var kl=t.textColor||"0 g",jd=m.__private__.getTextColor=m.getTextColor=function(){return Pr(kl)};m.__private__.setTextColor=m.setTextColor=function(M,le,je,Se){return kl=xa({ch1:M,ch2:le,ch3:je,ch4:Se,pdfColorType:"text",precision:3}),this};var Ci=t.charSpace,hc=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Ci||0)};m.__private__.setCharSpace=m.setCharSpace=function(M){if(isNaN(M))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ci=M,this};var fc=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(M){var le=m.CapJoinStyles[M];if(le===void 0)throw new Error("Line cap style of '"+M+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fc=le,ie(le+" J"),this};var In=0;m.__private__.setLineJoin=m.setLineJoin=function(M){var le=m.CapJoinStyles[M];if(le===void 0)throw new Error("Line join style of '"+M+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return In=le,ie(le+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(M){if(M=M||0,isNaN(M))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ie(ee(te(M))+" M"),this},m.GState=Up,m.setGState=function(M){(M=typeof M=="string"?Re[We[M]]:Cl(null,M)).equals($t)||(ie("/"+M.id+" gs"),$t=M)};var Cl=function(M,le){if(!M||!We[M]){var je=!1;for(var Se in Re)if(Re.hasOwnProperty(Se)&&Re[Se].equals(le)){je=!0;break}if(je)le=Re[Se];else{var De="GS"+(Object.keys(Re).length+1).toString(10);Re[De]=le,le.id=De}return M&&(We[M]=le.id),Ct.publish("addGState",le),le}};m.addGState=function(M,le){return Cl(M,le),this},m.saveGraphicsState=function(){return ie("q"),Vt.push({key:Dt,size:et,color:kl}),this},m.restoreGraphicsState=function(){ie("Q");var M=Vt.pop();return Dt=M.key,et=M.size,kl=M.color,$t=null,this},m.setCurrentTransformationMatrix=function(M){return ie(M.toString()+" cm"),this},m.comment=function(M){return ie("#"+M),this};var Si=function(M,le){var je=M||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return je},set:function(dt){isNaN(dt)||(je=parseFloat(dt))}});var Se=le||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Se},set:function(dt){isNaN(dt)||(Se=parseFloat(dt))}});var De="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return De},set:function(dt){De=dt.toString()}}),this},zr=function(M,le,je,Se){Si.call(this,M,le),this.type="rect";var De=je||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return De},set:function(yt){isNaN(yt)||(De=parseFloat(yt))}});var dt=Se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return dt},set:function(yt){isNaN(yt)||(dt=parseFloat(yt))}}),this},zc=function(){this.page=wt,this.currentPage=P,this.pages=Ie.slice(0),this.pagesContext=st.slice(0),this.x=Ge,this.y=ft,this.matrix=ht,this.width=to(P),this.height=OA(P),this.outputDestination=ze,this.id="",this.objectNumber=-1};zc.prototype.restore=function(){wt=this.page,P=this.currentPage,st=this.pagesContext,Ie=this.pages,Ge=this.x,ft=this.y,ht=this.matrix,pc(P,this.width),Ti(P,this.height),ze=this.outputDestination};var Ei=function(M,le,je,Se,De){jt.push(new zc),wt=P=0,Ie=[],Ge=M,ft=le,ht=De,Ga([je,Se])};for(var eo in m.beginFormObject=function(M,le,je,Se,De){return Ei(M,le,je,Se,De),this},m.endFormObject=function(M){return(function(le){if(ct[le])jt.pop().restore();else{var je=new zc,Se="Xo"+(Object.keys(ps).length+1).toString(10);je.id=Se,ct[le]=Se,ps[Se]=je,Ct.publish("addFormObject",je),jt.pop().restore()}})(M),this},m.doFormObject=function(M,le){var je=ps[ct[M]];return ie("q"),ie(le.toString()+" cm"),ie("/"+je.id+" Do"),ie("Q"),this},m.getFormObject=function(M){var le=ps[ct[M]];return{x:le.x,y:le.y,width:le.width,height:le.height,matrix:le.matrix}},m.save=function(M,le){return M=M||"generated.pdf",(le=le||{}).returnPromise=le.returnPromise||!1,le.returnPromise===!1?(xh(Bi(oi()),M),typeof xh.unload=="function"&&Ts.setTimeout&&setTimeout(xh.unload,911),this):new Promise(function(je,Se){try{var De=xh(Bi(oi()),M);typeof xh.unload=="function"&&Ts.setTimeout&&setTimeout(xh.unload,911),je(De)}catch(dt){Se(dt.message)}})},us.API)us.API.hasOwnProperty(eo)&&(eo==="events"&&us.API.events.length?(function(M,le){var je,Se,De;for(De=le.length-1;De!==-1;De--)je=le[De][0],Se=le[De][1],M.subscribe.apply(M,[je].concat(typeof Se=="function"?[Se]:Se))})(Ct,us.API.events):m[eo]=us.API[eo]);function to(M){return st[M].mediaBox.topRightX-st[M].mediaBox.bottomLeftX}function pc(M,le){st[M].mediaBox.topRightX=le+st[M].mediaBox.bottomLeftX}function OA(M){return st[M].mediaBox.topRightY-st[M].mediaBox.bottomLeftY}function Ti(M,le){st[M].mediaBox.topRightY=le+st[M].mediaBox.bottomLeftY}var Ui=m.getPageWidth=function(M){return to(M=M||P)/Oe},DA=m.setPageWidth=function(M,le){pc(M,le*Oe)},so=m.getPageHeight=function(M){return OA(M=M||P)/Oe},ol=m.setPageHeight=function(M,le){Ti(M,le*Oe)};return m.internal={pdfEscape:$a,getStyle:LA,getFont:ll,getFontSize:Nt,getCharSpace:hc,getTextColor:jd,getLineHeight:yd,getLineHeightFactor:wd,getLineWidth:ki,write:Be,getHorizontalCoordinate:ci,getVerticalCoordinate:ia,getCoordinateString:Ya,getVerticalCoordinateString:Eo,collections:{},newObject:qt,newAdditionalObject:yr,newObjectDeferred:fr,newObjectDeferredBegin:Ls,getFilters:Va,putStream:ji,events:Ct,scaleFactor:Oe,pageSize:{getWidth:function(){return Ui(P)},setWidth:function(M){DA(P,M)},getHeight:function(){return so(P)},setHeight:function(M){ol(P,M)}},encryptionOptions:u,encryption:_n,getEncryptor:function(M){return u!==null?_n.encryptor(M,0):function(le){return le}},output:UA,getNumberOfPages:TA,get pages(){return Ie},out:ie,f2:Q,f3:q,getPageInfo:wn,getPageInfoByObjId:Rc,getCurrentPageInfo:bd,getPDFVersion:w,Point:Si,Rectangle:zr,Matrix:Et,hasHotfix:wr},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Ui(P)},set:function(M){DA(P,M)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return so(P)},set:function(M){ol(P,M)},enumerable:!0,configurable:!0}),(function(M){for(var le=0,je=Xe.length;le<je;le++){var Se=Jl.call(this,M[le][0],M[le][1],M[le][2],Xe[le][3],!0);p===!1&&(x[Se]=!0);var De=M[le][0].split("-");hn({id:Se,fontName:De[0],fontStyle:De[1]||""})}Ct.publish("addFonts",{fonts:vt,dictionary:kt})}).call(m,Xe),Dt="F1",Bl(a,s),Ct.publish("initialized"),m}Sf.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Sf.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Sf.prototype.hexToBytes=function(t){for(var e=[],s=0;s<t.length;s+=2)e.push(String.fromCharCode(parseInt(t.substr(s,2),16)));return e.join("")},Sf.prototype.processOwnerPassword=function(t,e){return Gv($v(e).substr(0,5),t)},Sf.prototype.encryptor=function(t,e){var s=$v(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Gv(s,n)}},Up.prototype.equals=function(t){var e,s="id,objectNumber,equals";if(!t||Rr(t)!==Rr(this))return!1;var n=0;for(e in this)if(!(s.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&s.indexOf(e)<0&&n--;return n===0},us.API={events:[]},us.version="3.0.4";var Xn=us.API,Yy=1,$h=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Nf=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},_s=function(t){return t.toFixed(2)},iu=function(t){return t.toFixed(5)};Xn.__acroform__={};var ql=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},xj=function(t){return t*Yy},fA=function(t){var e=new ek,s=ss.internal.getHeight(t)||0,n=ss.internal.getWidth(t)||0;return e.BBox=[0,0,Number(_s(n)),Number(_s(s))],e},w_=Xn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},j_=Xn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},N_=Xn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},fa=Xn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return N_(t,e-1)},pa=Xn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return w_(t,e-1)},ma=Xn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return j_(t,e-1)},B_=Xn.__acroform__.calculateCoordinates=function(t,e){var s=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],i=t[1],c=t[2],A=t[3],d={};return d.lowerLeft_X=s(a)||0,d.lowerLeft_Y=n(i+A)||0,d.upperRight_X=s(a+c)||0,d.upperRight_Y=n(i)||0,[Number(_s(d.lowerLeft_X)),Number(_s(d.lowerLeft_Y)),Number(_s(d.upperRight_X)),Number(_s(d.upperRight_Y))]},k_=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],s=t._V||t.DV,n=qv(t,s),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+_s(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=fA(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},qv=function(t,e){var s=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(Q){return Q.split(`
`)}):a.map(function(Q){return[Q]});var i=s,c=ss.internal.getHeight(t)||0;c=c<0?-c:c;var A=ss.internal.getWidth(t)||0;A=A<0?-A:A;var d=function(Q,q,te){if(Q+1<a.length){var X=q+" "+a[Q+1][0];return ng(X,t,te).width<=A-4}return!1};i++;e:for(;i>0;){e="",i--;var f,u,p=ng("3",t,i).height,x=t.multiline?c-i:(c-p)/2,m=x+=2,j=0,w=0,S=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+ng(e,t,i=12).width+", FieldWidth:"+A+`
`;break}for(var C="",F=0,U=0;U<a.length;U++)if(a.hasOwnProperty(U)){var _=!1;if(a[U].length!==1&&S!==a[U].length-1){if((p+2)*(F+2)+2>c)continue e;C+=a[U][S],_=!0,w=U,U--}else{C=(C+=a[U][S]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var z=parseInt(U),I=d(z,C,i),H=U>=a.length-1;if(I&&!H){C+=" ",S=0;continue}if(I||H){if(H)w=z;else if(t.multiline&&(p+2)*(F+2)+2>c)continue e}else{if(!t.multiline||(p+2)*(F+2)+2>c)continue e;w=z}}for(var ee="",$=j;$<=w;$++){var ce=a[$];if(t.multiline){if($===w){ee+=ce[S]+" ",S=(S+1)%ce.length;continue}if($===j){ee+=ce[ce.length-1]+" ";continue}}ee+=ce[0]+" "}switch(ee=ee.substr(ee.length-1)==" "?ee.substr(0,ee.length-1):ee,u=ng(ee,t,i).width,t.textAlign){case"right":f=A-u-2;break;case"center":f=(A-u)/2;break;default:f=2}e+=_s(f)+" "+_s(m)+` Td
`,e+="("+$h(ee)+`) Tj
`,e+=-_s(f)+` 0 Td
`,m=-(i+2),u=0,j=_?w:w+1,F++,C=""}break}return n.text=e,n.fontSize=i,n},ng=function(t,e,s){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(s),charSpace:0})*parseFloat(s);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(s),charSpace:0})*parseFloat(s)*1.5,width:a}},C_={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},S_=function(t,e){var s={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===s.type&&n.object===s.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(s)},E_=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Oc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(C_)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Yy=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new tk,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(s){s.internal.events.unsubscribe(s.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete s.internal.acroformPlugin.acroFormDictionaryRoot._eventID,s.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(s){s.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=s.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&S_(i,s)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(s){if(s.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");s.internal.write("/AcroForm "+s.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(s){(function(n,a){var i=!n;for(var c in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(c)){var A=n[c],d=[],f=A.Rect;if(A.Rect&&(A.Rect=B_(A.Rect,a)),a.internal.newObjectDeferredBegin(A.objId,!0),A.DA=ss.createDefaultAppearanceStream(A),Rr(A)==="object"&&typeof A.getKeyValueListForStream=="function"&&(d=A.getKeyValueListForStream()),A.Rect=f,A.hasAppearanceStream&&!A.appearanceStreamContent){var u=k_(A);d.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(A.appearanceStreamContent){var p="";for(var x in A.appearanceStreamContent)if(A.appearanceStreamContent.hasOwnProperty(x)){var m=A.appearanceStreamContent[x];if(p+="/"+x+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var c in m)if(m.hasOwnProperty(c)){var j=m[c];typeof j=="function"&&(j=j.call(a,A)),p+="/"+c+" "+j+" ",a.internal.acroformPlugin.xForms.indexOf(j)>=0||a.internal.acroformPlugin.xForms.push(j)}}else typeof(j=m)=="function"&&(j=j.call(a,A)),p+="/"+c+" "+j,a.internal.acroformPlugin.xForms.indexOf(j)>=0||a.internal.acroformPlugin.xForms.push(j);p+=">>"}d.push({key:"AP",value:`<<
`+p+">>"})}a.internal.putStream({additionalKeyValues:d,objectId:A.objId}),a.internal.out("endobj")}i&&(function(w,S){for(var C in w)if(w.hasOwnProperty(C)){var F=C,U=w[C];S.internal.newObjectDeferredBegin(U.objId,!0),Rr(U)==="object"&&typeof U.putStream=="function"&&U.putStream(),delete w[F]}})(a.internal.acroformPlugin.xForms,a)})(s,t)}),t.internal.acroformPlugin.isInitialized=!0}},ZB=Xn.__acroform__.arrayToPdfArray=function(t,e,s){var n=function(c){return c};if(Array.isArray(t)){for(var a="[",i=0;i<t.length;i++)switch(i!==0&&(a+=" "),Rr(t[i])){case"boolean":case"number":case"object":a+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&s&&(n=s.internal.getEncryptor(e)),a+="("+$h(n(t[i].toString()))+")"):a+=t[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},R1=function(t,e,s){var n=function(a){return a};return e!==void 0&&s&&(n=s.internal.getEncryptor(e)),(t=t||"").toString(),"("+$h(n(t))+")"},bA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};bA.prototype.toString=function(){return this.objId+" 0 R"},bA.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},bA.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var s in e)if(Object.getOwnPropertyDescriptor(this,e[s]).configurable===!1){var n=e[s],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:ZB(a,this.objId,this.scope)}):a instanceof bA?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var ek=function(){bA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(s){t=s.trim()},get:function(){return t||null}})};ql(ek,bA);var tk=function(){bA.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var s=function(n){return n};return this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),"("+$h(s(t))+")"}},set:function(s){t=s}})};ql(tk,bA);var Oc=function t(){bA.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!fa(e,3)},set:function(C){C?this.F=pa(e,3):this.F=ma(e,3)}});var s=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return s},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');s=C}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(C){n=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(C){n[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(C){n[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(C){n[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(C){n[3]=C}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof sx)return;i="FieldObject"+t.FieldNum++}var C=function(F){return F};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+$h(C(i))+")"},set:function(C){i=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(C){i=C}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(C){c=C}});var A="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return A},set:function(C){A=C}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(C){d=C}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Yy:f},set:function(C){f=C}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(C){u=C}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof sx||this instanceof wu))return R1(p,this.objId,this.scope)},set:function(C){C=C.toString(),p=C}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Ha==0?R1(x,this.objId,this.scope):x},set:function(C){C=C.toString(),x=this instanceof Ha==0?C.substr(0,1)==="("?Nf(C.substr(1,C.length-2)):Nf(C):C}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ha==1?Nf(x.substr(1,x.length-1)):x},set:function(C){C=C.toString(),x=this instanceof Ha==1?"/"+C:C}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ha==0?R1(m,this.objId,this.scope):m},set:function(C){C=C.toString(),m=this instanceof Ha==0?C.substr(0,1)==="("?Nf(C.substr(1,C.length-2)):Nf(C):C}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ha==1?Nf(m.substr(1,m.length-1)):m},set:function(C){C=C.toString(),m=this instanceof Ha==1?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(C){C=!!C,w=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(C){j=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,1)},set:function(C){C?this.Ff=pa(this.Ff,1):this.Ff=ma(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,2)},set:function(C){C?this.Ff=pa(this.Ff,2):this.Ff=ma(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,3)},set:function(C){C?this.Ff=pa(this.Ff,3):this.Ff=ma(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');S=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(S){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:S=2;break;case"center":case 1:S=1;break;default:S=0}}})};ql(Oc,bA);var kh=function(){Oc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(s){t=s}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ZB(e,this.objId,this.scope)},set:function(s){var n,a;a=[],typeof(n=s)=="string"&&(a=(function(i,c,A){A||(A=1);for(var d,f=[];d=c.exec(i);)f.push(d[A]);return f})(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(s){e=s,this.sort&&e.sort()},this.addOption=function(s){s=(s=s||"").toString(),e.push(s),this.sort&&e.sort()},this.removeOption=function(s,n){for(n=n||!1,s=(s=s||"").toString();e.indexOf(s)!==-1&&(e.splice(e.indexOf(s),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,18)},set:function(s){s?this.Ff=pa(this.Ff,18):this.Ff=ma(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,19)},set:function(s){this.combo===!0&&(s?this.Ff=pa(this.Ff,19):this.Ff=ma(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,20)},set:function(s){s?(this.Ff=pa(this.Ff,20),e.sort()):this.Ff=ma(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,22)},set:function(s){s?this.Ff=pa(this.Ff,22):this.Ff=ma(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,23)},set:function(s){s?this.Ff=pa(this.Ff,23):this.Ff=ma(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,27)},set:function(s){s?this.Ff=pa(this.Ff,27):this.Ff=ma(this.Ff,27)}}),this.hasAppearanceStream=!1};ql(kh,Oc);var Ch=function(){kh.call(this),this.fontName="helvetica",this.combo=!1};ql(Ch,kh);var Sh=function(){Ch.call(this),this.combo=!0};ql(Sh,Ch);var Ap=function(){Sh.call(this),this.edit=!0};ql(Ap,Sh);var Ha=function(){Oc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,15)},set:function(s){s?this.Ff=pa(this.Ff,15):this.Ff=ma(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,16)},set:function(s){s?this.Ff=pa(this.Ff,16):this.Ff=ma(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,17)},set:function(s){s?this.Ff=pa(this.Ff,17):this.Ff=ma(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,26)},set:function(s){s?this.Ff=pa(this.Ff,26):this.Ff=ma(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(i){return i};if(this.scope&&(s=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+$h(s(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(s){Rr(s)==="object"&&(e=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(s){typeof s=="string"&&(e.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(s){t="/"+s}})};ql(Ha,Oc);var dp=function(){Ha.call(this),this.pushButton=!0};ql(dp,Ha);var Eh=function(){Ha.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};ql(Eh,Ha);var sx=function(){var t,e;Oc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var s,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(A){return A};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,c=[];for(i in c.push("<<"),n)c.push("/"+i+" ("+$h(a(n[i]))+")");return c.push(">>"),c.join(`
`)},set:function(a){Rr(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(a){s="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ss.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ql(sx,Oc),Eh.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var s=this.Kids[e];s.appearanceStreamContent=t.createAppearanceStream(s.optionName),s.caption=t.getCA()}},Eh.prototype.createOption=function(t){var e=new sx;return e.Parent=this,e.optionName=t,this.Kids.push(e),T_.call(this.scope,e),e};var up=function(){Ha.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ss.CheckBox.createAppearanceStream()};ql(up,Ha);var wu=function(){Oc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,13)},set:function(e){e?this.Ff=pa(this.Ff,13):this.Ff=ma(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,21)},set:function(e){e?this.Ff=pa(this.Ff,21):this.Ff=ma(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,23)},set:function(e){e?this.Ff=pa(this.Ff,23):this.Ff=ma(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,24)},set:function(e){e?this.Ff=pa(this.Ff,24):this.Ff=ma(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,25)},set:function(e){e?this.Ff=pa(this.Ff,25):this.Ff=ma(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,26)},set:function(e){e?this.Ff=pa(this.Ff,26):this.Ff=ma(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ql(wu,Oc);var hp=function(){wu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!fa(this.Ff,14)},set:function(t){t?this.Ff=pa(this.Ff,14):this.Ff=ma(this.Ff,14)}}),this.password=!0};ql(hp,wu);var ss={CheckBox:{createAppearanceStream:function(){return{N:{On:ss.CheckBox.YesNormal},D:{On:ss.CheckBox.YesPushDown,Off:ss.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=fA(t);e.scope=t.scope;var s=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),i=qv(t,t.caption);return s.push("0.749023 g"),s.push("0 0 "+_s(ss.internal.getWidth(t))+" "+_s(ss.internal.getHeight(t))+" re"),s.push("f"),s.push("BMC"),s.push("q"),s.push("0 0 1 rg"),s.push("/"+n+" "+_s(i.fontSize)+" Tf "+a),s.push("BT"),s.push(i.text),s.push("ET"),s.push("Q"),s.push("EMC"),e.stream=s.join(`
`),e},YesNormal:function(t){var e=fA(t);e.scope=t.scope;var s=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],i=ss.internal.getHeight(t),c=ss.internal.getWidth(t),A=qv(t,t.caption);return a.push("1 g"),a.push("0 0 "+_s(c)+" "+_s(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+_s(c-1)+" "+_s(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+s+" "+_s(A.fontSize)+" Tf "+n),a.push(A.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=fA(t);e.scope=t.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+_s(ss.internal.getWidth(t))+" "+_s(ss.internal.getHeight(t))+" re"),s.push("f"),e.stream=s.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ss.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ss.RadioButton.Circle.YesNormal,e.D[t]=ss.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=fA(t);e.scope=t.scope;var s=[],n=ss.internal.getWidth(t)<=ss.internal.getHeight(t)?ss.internal.getWidth(t)/4:ss.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=ss.internal.Bezier_C,i=Number((n*a).toFixed(5));return s.push("q"),s.push("1 0 0 1 "+iu(ss.internal.getWidth(t)/2)+" "+iu(ss.internal.getHeight(t)/2)+" cm"),s.push(n+" 0 m"),s.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),s.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),s.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),s.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),s.push("f"),s.push("Q"),e.stream=s.join(`
`),e},YesPushDown:function(t){var e=fA(t);e.scope=t.scope;var s=[],n=ss.internal.getWidth(t)<=ss.internal.getHeight(t)?ss.internal.getWidth(t)/4:ss.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*ss.internal.Bezier_C).toFixed(5)),c=Number((n*ss.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+iu(ss.internal.getWidth(t)/2)+" "+iu(ss.internal.getHeight(t)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),s.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),s.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),s.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),s.push("f"),s.push("Q"),s.push("0 g"),s.push("q"),s.push("1 0 0 1 "+iu(ss.internal.getWidth(t)/2)+" "+iu(ss.internal.getHeight(t)/2)+" cm"),s.push(n+" 0 m"),s.push(n+" "+c+" "+c+" "+n+" 0 "+n+" c"),s.push("-"+c+" "+n+" -"+n+" "+c+" -"+n+" 0 c"),s.push("-"+n+" -"+c+" -"+c+" -"+n+" 0 -"+n+" c"),s.push(c+" -"+n+" "+n+" -"+c+" "+n+" 0 c"),s.push("f"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=fA(t);e.scope=t.scope;var s=[],n=ss.internal.getWidth(t)<=ss.internal.getHeight(t)?ss.internal.getWidth(t)/4:ss.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*ss.internal.Bezier_C).toFixed(5));return s.push("0.749023 g"),s.push("q"),s.push("1 0 0 1 "+iu(ss.internal.getWidth(t)/2)+" "+iu(ss.internal.getHeight(t)/2)+" cm"),s.push(a+" 0 m"),s.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),s.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),s.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),s.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),s.push("f"),s.push("Q"),e.stream=s.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ss.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ss.RadioButton.Cross.YesNormal,e.D[t]=ss.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=fA(t);e.scope=t.scope;var s=[],n=ss.internal.calculateCross(t);return s.push("q"),s.push("1 1 "+_s(ss.internal.getWidth(t)-2)+" "+_s(ss.internal.getHeight(t)-2)+" re"),s.push("W"),s.push("n"),s.push(_s(n.x1.x)+" "+_s(n.x1.y)+" m"),s.push(_s(n.x2.x)+" "+_s(n.x2.y)+" l"),s.push(_s(n.x4.x)+" "+_s(n.x4.y)+" m"),s.push(_s(n.x3.x)+" "+_s(n.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},YesPushDown:function(t){var e=fA(t);e.scope=t.scope;var s=ss.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+_s(ss.internal.getWidth(t))+" "+_s(ss.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+_s(ss.internal.getWidth(t)-2)+" "+_s(ss.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(_s(s.x1.x)+" "+_s(s.x1.y)+" m"),n.push(_s(s.x2.x)+" "+_s(s.x2.y)+" l"),n.push(_s(s.x4.x)+" "+_s(s.x4.y)+" m"),n.push(_s(s.x3.x)+" "+_s(s.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=fA(t);e.scope=t.scope;var s=[];return s.push("0.749023 g"),s.push("0 0 "+_s(ss.internal.getWidth(t))+" "+_s(ss.internal.getHeight(t))+" re"),s.push("f"),e.stream=s.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+s}};ss.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ss.internal.getWidth(t),s=ss.internal.getHeight(t),n=Math.min(e,s);return{x1:{x:(e-n)/2,y:(s-n)/2+n},x2:{x:(e-n)/2+n,y:(s-n)/2},x3:{x:(e-n)/2,y:(s-n)/2},x4:{x:(e-n)/2+n,y:(s-n)/2+n}}}},ss.internal.getWidth=function(t){var e=0;return Rr(t)==="object"&&(e=xj(t.Rect[2])),e},ss.internal.getHeight=function(t){var e=0;return Rr(t)==="object"&&(e=xj(t.Rect[3])),e};var T_=Xn.addField=function(t){if(E_(this,t),!(t instanceof Oc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Xn.AcroFormChoiceField=kh,Xn.AcroFormListBox=Ch,Xn.AcroFormComboBox=Sh,Xn.AcroFormEditBox=Ap,Xn.AcroFormButton=Ha,Xn.AcroFormPushButton=dp,Xn.AcroFormRadioButton=Eh,Xn.AcroFormCheckBox=up,Xn.AcroFormTextField=wu,Xn.AcroFormPasswordField=hp,Xn.AcroFormAppearance=ss,Xn.AcroForm={ChoiceField:kh,ListBox:Ch,ComboBox:Sh,EditBox:Ap,Button:Ha,PushButton:dp,RadioButton:Eh,CheckBox:up,TextField:wu,PasswordField:hp,Appearance:ss},us.AcroForm={ChoiceField:kh,ListBox:Ch,ComboBox:Sh,EditBox:Ap,Button:Ha,PushButton:dp,RadioButton:Eh,CheckBox:up,TextField:wu,PasswordField:hp,Appearance:ss};var U_=us.AcroForm;function sk(t){return t.reduce(function(e,s,n){return e[s]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var s="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(Q,q){var te,X,Ae,W,se,Z=s;if((q=q||s)==="RGBA"||Q.data!==void 0&&Q.data instanceof Uint8ClampedArray&&"height"in Q&&"width"in Q)return"RGBA";if(I(Q))for(se in n)for(Ae=n[se],te=0;te<Ae.length;te+=1){for(W=!0,X=0;X<Ae[te].length;X+=1)if(Ae[te][X]!==void 0&&Ae[te][X]!==Q[X]){W=!1;break}if(W===!0){Z=se;break}}else for(se in n)for(Ae=n[se],te=0;te<Ae.length;te+=1){for(W=!0,X=0;X<Ae[te].length;X+=1)if(Ae[te][X]!==void 0&&Ae[te][X]!==Q.charCodeAt(X)){W=!1;break}if(W===!0){Z=se;break}}return Z===s&&q!==s&&(Z=q),Z},i=function Q(q){for(var te=this.internal.write,X=this.internal.putStream,Ae=(0,this.internal.getFilters)();Ae.indexOf("FlateEncode")!==-1;)Ae.splice(Ae.indexOf("FlateEncode"),1);q.objectId=this.internal.newObject();var W=[];if(W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Image"}),W.push({key:"Width",value:q.width}),W.push({key:"Height",value:q.height}),q.colorSpace===C.INDEXED?W.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(q.palette.length/3-1)+" "+("sMask"in q&&q.sMask!==void 0?q.objectId+2:q.objectId+1)+" 0 R]"}):(W.push({key:"ColorSpace",value:"/"+q.colorSpace}),q.colorSpace===C.DEVICE_CMYK&&W.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),W.push({key:"BitsPerComponent",value:q.bitsPerComponent}),"decodeParameters"in q&&q.decodeParameters!==void 0&&W.push({key:"DecodeParms",value:"<<"+q.decodeParameters+">>"}),"transparency"in q&&Array.isArray(q.transparency)&&q.transparency.length>0){for(var se="",Z=0,re=q.transparency.length;Z<re;Z++)se+=q.transparency[Z]+" "+q.transparency[Z]+" ";W.push({key:"Mask",value:"["+se+"]"})}q.sMask!==void 0&&W.push({key:"SMask",value:q.objectId+1+" 0 R"});var ve=q.filter!==void 0?["/"+q.filter]:void 0;if(X({data:q.data,additionalKeyValues:W,alreadyAppliedFilters:ve,objectId:q.objectId}),te("endobj"),"sMask"in q&&q.sMask!==void 0){var ae,R=(ae=q.sMaskBitsPerComponent)!==null&&ae!==void 0?ae:q.bitsPerComponent,P={width:q.width,height:q.height,colorSpace:"DeviceGray",bitsPerComponent:R,data:q.sMask};"filter"in q&&(P.decodeParameters="/Predictor ".concat(q.predictor," /Colors 1 /BitsPerComponent ").concat(R," /Columns ").concat(q.width),P.filter=q.filter),Q.call(this,P)}if(q.colorSpace===C.INDEXED){var V=this.internal.newObject();X({data:ee(new Uint8Array(q.palette)),objectId:V}),te("endobj")}},c=function(){var Q=this.internal.collections[e+"images"];for(var q in Q)i.call(this,Q[q])},A=function(){var Q,q=this.internal.collections[e+"images"],te=this.internal.write;for(var X in q)te("/I"+(Q=q[X]).index,Q.objectId,"0","R")},d=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",A))},f=function(){var Q=this.internal.collections[e+"images"];return d.call(this),Q},u=function(){return Object.keys(this.internal.collections[e+"images"]).length},p=function(Q){return typeof t["process"+Q.toUpperCase()]=="function"},x=function(Q){return Rr(Q)==="object"&&Q.nodeType===1},m=function(Q,q){if(Q.nodeName==="IMG"&&Q.hasAttribute("src")){var te=""+Q.getAttribute("src");if(te.indexOf("data:image/")===0)return Sg(unescape(te).split("base64,").pop());var X=t.loadFile(te,!0);if(X!==void 0)return X}if(Q.nodeName==="CANVAS"){if(Q.width===0||Q.height===0)throw new Error("Given canvas must have data. Canvas width: "+Q.width+", height: "+Q.height);var Ae;switch(q){case"PNG":Ae="image/png";break;case"WEBP":Ae="image/webp";break;default:Ae="image/jpeg"}return Sg(Q.toDataURL(Ae,1).split("base64,").pop())}},j=function(Q){var q=this.internal.collections[e+"images"];if(q){for(var te in q)if(Q===q[te].alias)return q[te]}},w=function(Q,q,te){return Q||q||(Q=-96,q=-96),Q<0&&(Q=-1*te.width*72/Q/this.internal.scaleFactor),q<0&&(q=-1*te.height*72/q/this.internal.scaleFactor),Q===0&&(Q=q*te.width/te.height),q===0&&(q=Q*te.height/te.width),[Q,q]},S=function(Q,q,te,X,Ae,W){var se=w.call(this,te,X,Ae),Z=this.internal.getCoordinateString,re=this.internal.getVerticalCoordinateString,ve=f.call(this);if(te=se[0],X=se[1],ve[Ae.index]=Ae,W){W*=Math.PI/180;var ae=Math.cos(W),R=Math.sin(W),P=function(K){return K.toFixed(4)},V=[P(ae),P(R),P(-1*R),P(ae),0,0,"cm"]}this.internal.write("q"),W?(this.internal.write([1,"0","0",1,Z(Q),re(q+X),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([Z(te),"0","0",Z(X),"0","0","cm"].join(" "))):this.internal.write([Z(te),"0","0",Z(X),Z(Q),re(q+X),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ae.index+" Do"),this.internal.write("Q")},C=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var F=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},U=t.__addimage__.sHashCode=function(Q){var q,te,X=0;if(typeof Q=="string")for(te=Q.length,q=0;q<te;q++)X=(X<<5)-X+Q.charCodeAt(q),X|=0;else if(I(Q))for(te=Q.byteLength/2,q=0;q<te;q++)X=(X<<5)-X+Q[q],X|=0;return X},_=t.__addimage__.validateStringAsBase64=function(Q){(Q=Q||"").toString().trim();var q=!0;return Q.length===0&&(q=!1),Q.length%4!=0&&(q=!1),/^[A-Za-z0-9+/]+$/.test(Q.substr(0,Q.length-2))===!1&&(q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Q.substr(-2))===!1&&(q=!1),q},z=t.__addimage__.extractImageFromDataUrl=function(Q){if(Q==null||!(Q=Q.trim()).startsWith("data:"))return null;var q=Q.indexOf(",");return q<0?null:Q.substring(0,q).trim().endsWith("base64")?Q.substring(q+1):null};t.__addimage__.isArrayBuffer=function(Q){return Q instanceof ArrayBuffer};var I=t.__addimage__.isArrayBufferView=function(Q){return Q instanceof Int8Array||Q instanceof Uint8Array||Q instanceof Uint8ClampedArray||Q instanceof Int16Array||Q instanceof Uint16Array||Q instanceof Int32Array||Q instanceof Uint32Array||Q instanceof Float32Array||Q instanceof Float64Array},H=t.__addimage__.binaryStringToUint8Array=function(Q){for(var q=Q.length,te=new Uint8Array(q),X=0;X<q;X++)te[X]=Q.charCodeAt(X);return te},ee=t.__addimage__.arrayBufferToBinaryString=function(Q){for(var q="",te=I(Q)?Q:new Uint8Array(Q),X=0;X<te.length;X+=8192)q+=String.fromCharCode.apply(null,te.subarray(X,X+8192));return q};t.addImage=function(){var Q,q,te,X,Ae,W,se,Z,re;if(typeof arguments[1]=="number"?(q=s,te=arguments[1],X=arguments[2],Ae=arguments[3],W=arguments[4],se=arguments[5],Z=arguments[6],re=arguments[7]):(q=arguments[1],te=arguments[2],X=arguments[3],Ae=arguments[4],W=arguments[5],se=arguments[6],Z=arguments[7],re=arguments[8]),Rr(Q=arguments[0])==="object"&&!x(Q)&&"imageData"in Q){var ve=Q;Q=ve.imageData,q=ve.format||q||s,te=ve.x||te||0,X=ve.y||X||0,Ae=ve.w||ve.width||Ae,W=ve.h||ve.height||W,se=ve.alias||se,Z=ve.compression||Z,re=ve.rotation||ve.angle||re}var ae=this.internal.getFilters();if(Z===void 0&&ae.indexOf("FlateEncode")!==-1&&(Z="SLOW"),isNaN(te)||isNaN(X))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var R=$.call(this,Q,q,se,Z);return S.call(this,te,X,Ae,W,R,re),this};var $=function(Q,q,te,X){var Ae,W,se;if(typeof Q=="string"&&a(Q)===s){Q=unescape(Q);var Z=ce(Q,!1);(Z!==""||(Z=t.loadFile(Q,!0))!==void 0)&&(Q=Z)}if(x(Q)&&(Q=m(Q,q)),q=a(Q,q),!p(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(((se=te)==null||se.length===0)&&(te=(function(re){return typeof re=="string"||I(re)?U(re):I(re.data)?U(re.data):null})(Q)),(Ae=j.call(this,te))||(Q instanceof Uint8Array||q==="RGBA"||(W=Q,Q=H(Q)),Ae=this["process"+q.toUpperCase()](Q,u.call(this),te,(function(re){return re&&typeof re=="string"&&(re=re.toUpperCase()),re in t.image_compression?re:F.NONE})(X),W)),!Ae)throw new Error("An unknown error occurred whilst processing the image.");return Ae},ce=t.__addimage__.convertBase64ToBinaryString=function(Q,q){q=typeof q!="boolean"||q;var te,X="";if(typeof Q=="string"){var Ae;te=(Ae=z(Q))!==null&&Ae!==void 0?Ae:Q;try{X=Sg(te)}catch(W){if(q)throw _(te)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+W.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return X};t.getImageProperties=function(Q){var q,te,X="";if(x(Q)&&(Q=m(Q)),typeof Q=="string"&&a(Q)===s&&((X=ce(Q,!1))===""&&(X=t.loadFile(Q)||""),Q=X),te=a(Q),!p(te))throw new Error("addImage does not support files of type '"+te+"', please ensure that a plugin for '"+te+"' support is added.");if(Q instanceof Uint8Array||(Q=H(Q)),!(q=this["process"+te.toUpperCase()](Q)))throw new Error("An unknown error occurred whilst processing the image");return q.fileType=te,q}})(us.API),(function(t){var e=function(s){if(s!==void 0&&s!="")return!0};us.API.events.push(["addPage",function(s){this.internal.getPageInfo(s.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(s){for(var n,a,i,c=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(s.objId),f=s.pageContext.annotations,u=!1,p=0;p<f.length&&!u;p++)switch((n=f[p]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var x=0;x<f.length;x++){n=f[x];var m=this.internal.pdfEscape,j=this.internal.getEncryptor(s.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(w.objId),F=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+c(n.bounds.x)+" "+A(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w)+" "+A(n.bounds.y)+"] ")+"/Contents ("+m(C(n.contents))+")",i+=" /Popup "+S.objId+" 0 R",i+=" /P "+d.objId+" 0 R",i+=" /T ("+m(C(F))+") >>",w.content=i;var U=w.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+c(n.bounds.x+30)+" "+A(n.bounds.y+n.bounds.h)+" "+c(n.bounds.x+n.bounds.w+30)+" "+A(n.bounds.y)+"] ")+" /Parent "+U,n.open&&(i+=" /Open true"),i+=" >>",S.content=i,this.internal.write(w.objId,"0 R",S.objId,"0 R");break;case"freetext":a="/Rect ["+c(n.bounds.x)+" "+A(n.bounds.y)+" "+c(n.bounds.x+n.bounds.w)+" "+A(n.bounds.y+n.bounds.h)+"] ";var _=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(j(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var z=this.annotations._nameMap[n.options.name];n.options.pageNumber=z.page,n.options.top=z.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(j(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var I=A(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(s){var n=this.internal.getCurrentPageInfo();switch(s.type){case"link":this.link(s.bounds.x,s.bounds.y,s.bounds.w,s.bounds.h,s);break;case"text":case"freetext":n.pageContext.annotations.push(s)}},t.link=function(s,n,a,i,c){var A=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;A.pageContext.annotations.push({finalBounds:{x:d(s),y:f(n),w:d(s+a),h:f(n+i)},options:c,type:"link"})},t.textWithLink=function(s,n,a,i){var c,A,d=this.getTextWidth(s),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){A=i.maxWidth;var u=this.splitTextToSize(s,A).length;c=Math.ceil(f*u)}else A=d,c=f;return this.text(s,n,a,i),a+=.2*f,i.align==="center"&&(n-=d/2),i.align==="right"&&(n-=d),this.link(n,a-f,A,c,i),d},t.getTextWidth=function(s){var n=this.internal.getFontSize();return this.getStringUnitWidth(s)*n/this.internal.scaleFactor}})(us.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},s={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},c=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},A=t.__arabicParser__.isArabicEndLetter=function(w){return c(w)&&i(w)&&e[w.charCodeAt(0)].length<=2},d=t.__arabicParser__.isArabicAlfLetter=function(w){return c(w)&&a.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return c(w)&&i(w)&&e[w.charCodeAt(0)].length>=1};var f=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return c(w)&&i(w)&&e[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return c(w)&&i(w)&&e[w.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return c(w)&&i(w)&&e[w.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(w){var S=0,C=s,F="",U=0;for(S=0;S<w.length;S+=1)C[w.charCodeAt(S)]!==void 0?(U++,typeof(C=C[w.charCodeAt(S)])=="number"&&(F+=String.fromCharCode(C),C=s,U=0),S===w.length-1&&(C=s,F+=w.charAt(S-(U-1)),S-=U-1,U=0)):(C=s,F+=w.charAt(S-U),S-=U,U=0);return F};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&n[w.charCodeAt(0)]!==void 0};var x=t.__arabicParser__.getCorrectForm=function(w,S,C){return c(w)?i(w)===!1?-1:!f(w)||!c(S)&&!c(C)||!c(C)&&A(S)||A(w)&&!c(S)||A(w)&&d(S)||A(w)&&A(S)?0:u(w)&&c(S)&&!A(S)&&c(C)&&f(C)?3:A(w)||!c(C)?1:2:-1},m=function(w){var S=0,C=0,F=0,U="",_="",z="",I=(w=w||"").split("\\s+"),H=[];for(S=0;S<I.length;S+=1){for(H.push(""),C=0;C<I[S].length;C+=1)U=I[S][C],_=I[S][C-1],z=I[S][C+1],c(U)?(F=x(U,_,z),H[S]+=F!==-1?String.fromCharCode(e[U.charCodeAt(0)][F]):U):H[S]+=U;H[S]=p(H[S])}return H.join(" ")},j=t.__arabicParser__.processArabic=t.processArabic=function(){var w,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(S)){var F=0;for(C=[],F=0;F<S.length;F+=1)Array.isArray(S[F])?C.push([m(S[F][0]),S[F][1],S[F][2]]):C.push([m(S[F])]);w=C}else w=m(S);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",j])})(us.API),us.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var s=void 0;Object.defineProperty(this,"pdf",{get:function(){return s},set:function(A){s=A}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(A){n=isNaN(A)||Number.isInteger(A)===!1||A<0?150:A,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(A){a=isNaN(A)||Number.isInteger(A)===!1||A<0?300:A,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(A){i=A}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(A){c=A}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(s,n){var a;if((s=s||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(us.API),(function(t){var e={left:0,top:0,bottom:0,right:0},s=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(w){x=w}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(w){j=w}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(d){return n.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},t.getTextDimensions=function(d,f){n.call(this);var u=(f=f||{}).fontSize||this.getFontSize(),p=f.font||this.getFont(),x=f.scaleFactor||this.internal.scaleFactor,m=0,j=0,w=0,S=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var C=f.maxWidth;C>0?typeof d=="string"?d=this.splitTextToSize(d,C):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(U,_){return U.concat(S.splitTextToSize(_,C))},[])):d=Array.isArray(d)?d:[d];for(var F=0;F<d.length;F++)m<(w=this.getStringUnitWidth(d[F],{font:p})*u)&&(m=w);return m!==0&&(j=d.length),{w:m/=x,h:Math.max((j*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/x,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var d=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=t.cell=function(){var d;d=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var f=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,x=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===d.lineNumber?(d.x=(f.x||0)+(f.width||0),d.y=f.y||0):f.y+f.height+d.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=p.top,m&&x&&(this.printHeaderRow(d.lineNumber,!0),d.y+=x[0].height)):d.y=f.y+f.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,s===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-u,d.y+u,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+u,{align:"center",baseline:"top",maxWidth:d.width-u-u}):this.text(d.text,d.x+u,d.y+u,{align:"left",baseline:"top",maxWidth:d.width-u-u})),this.internal.__cell__.lastCell=d,this};t.table=function(d,f,u,p,x){if(n.call(this),!u)throw new Error("No data for PDF table.");var m,j,w,S,C=[],F=[],U=[],_={},z={},I=[],H=[],ee=(x=x||{}).autoSize||!1,$=x.printHeaders!==!1,ce=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,Q=x.margins||Object.assign({width:this.getPageWidth()},e),q=typeof x.padding=="number"?x.padding:3,te=x.headerBackgroundColor||"#c8c8c8",X=x.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=$,this.internal.__cell__.margins=Q,this.internal.__cell__.table_font_size=ce,this.internal.__cell__.padding=q,this.internal.__cell__.headerBackgroundColor=te,this.internal.__cell__.headerTextColor=X,this.setFontSize(ce),p==null)F=C=Object.keys(u[0]),U=C.map(function(){return"left"});else if(Array.isArray(p)&&Rr(p[0])==="object")for(C=p.map(function(ve){return ve.name}),F=p.map(function(ve){return ve.prompt||ve.name||""}),U=p.map(function(ve){return ve.align||"left"}),m=0;m<p.length;m+=1)z[p[m].name]=.7499990551181103*p[m].width;else Array.isArray(p)&&typeof p[0]=="string"&&(F=C=p,U=C.map(function(){return"left"}));if(ee||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<C.length;m+=1){for(_[S=C[m]]=u.map(function(ve){return ve[S]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(F[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=_[S],this.setFont(void 0,"normal"),w=0;w<j.length;w+=1)I.push(this.getTextDimensions(j[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);z[S]=Math.max.apply(null,I)+q+q,I=[]}if($){var Ae={};for(m=0;m<C.length;m+=1)Ae[C[m]]={},Ae[C[m]].text=F[m],Ae[C[m]].align=U[m];var W=A.call(this,Ae,z);H=C.map(function(ve){return new i(d,f,z[ve],W,Ae[ve].text,void 0,Ae[ve].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var se=p.reduce(function(ve,ae){return ve[ae.name]=ae.align,ve},{});for(m=0;m<u.length;m+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:m,data:u[m]},this);var Z=A.call(this,u[m],z);for(w=0;w<C.length;w+=1){var re=u[m][C[w]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:m,col:w,data:re},this),c.call(this,new i(d,f,z[C[w]],Z,re,m+2,se[C[w]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=f,this};var A=function(d,f){var u=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(d).map(function(m){var j=d[m];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,f[m]-u-u)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/x+u+u},this).reduce(function(m,j){return Math.max(m,j)},0)};t.setTableHeaderRow=function(d){n.call(this),this.internal.__cell__.tableHeaderRow=d},t.printHeaderRow=function(d,f){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(s=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){u=this.internal.__cell__.tableHeaderRow[m].clone(),f&&(u.y=this.internal.__cell__.margins.top||0,x.push(u)),u.lineNumber=d;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,u),this.setTextColor(j)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),s=!1}})(us.API);var rk={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},nk=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Yv=sk(nk),ak=[100,200,300,400,500,600,700,800,900],F_=sk(ak);function H1(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),s=(function(i){return rk[i=i||"normal"]?i:"normal"})(t.style),n=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(t.weight),a=(function(i){return typeof Yv[i=i||"normal"]=="number"?i:"normal"})(t.stretch);return{family:e,style:s,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,s,n].join(" ")}}}function bj(t,e,s,n){var a;for(a=s;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=s;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var L_={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},vj={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function yj(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function wj(t){return t.trimLeft()}function M_(t,e){for(var s=0;s<t.length;){if(t.charAt(s)===e)return[t.substring(0,s),t.substring(s+1)];s+=1}return null}function Q_(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var ag,jj,Nj,Bf,ig,Bj,kj,Cj,P1=["times"];function Sj(t,e,s,n,a){var i=4,c=Tj;switch(a){case us.API.image_compression.FAST:i=1,c=Ej;break;case us.API.image_compression.MEDIUM:i=6,c=Uj;break;case us.API.image_compression.SLOW:i=9,c=Fj}t=(function(d,f,u,p){for(var x,m=d.length/f,j=new Uint8Array(d.length+m),w=[__,Ej,Tj,Uj,Fj],S=0;S<m;S+=1){var C=S*f,F=d.subarray(C,C+f);if(p)j.set(p(F,u,x),C+S);else{for(var U=w.length,_=[],z=0;z<U;z+=1)_[z]=w[z](F,u,x);var I=O_(_.concat());j.set(_[I],C+S)}x=F}return j})(t,e,Math.ceil(s*n/8),c);var A=Pv(t,{level:i});return us.API.__addimage__.arrayBufferToBinaryString(A)}function __(t){var e=Array.apply([],t);return e.unshift(0),e}function Ej(t,e){var s=t.length,n=[];n[0]=1;for(var a=0;a<s;a+=1){var i=t[a-e]||0;n[a+1]=t[a]-i+256&255}return n}function Tj(t,e,s){var n=t.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var c=s&&s[i]||0;a[i+1]=t[i]-c+256&255}return a}function Uj(t,e,s){var n=t.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var c=t[i-e]||0,A=s&&s[i]||0;a[i+1]=t[i]+256-(c+A>>>1)&255}return a}function Fj(t,e,s){var n=t.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var c=I_(t[i-e]||0,s&&s[i]||0,s&&s[i-e]||0);a[i+1]=t[i]-c+256&255}return a}function I_(t,e,s){if(t===e&&e===s)return t;var n=Math.abs(e-s),a=Math.abs(t-s),i=Math.abs(t+e-s-s);return n<=a&&n<=i?t:a<=i?e:s}function O_(t){var e=t.map(function(s){return s.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function z1(t,e,s){var n=e*s,a=Math.floor(n/8),i=16-(n-8*a+s),c=(1<<s)-1;return ik(t,a)>>i&c}function Lj(t,e,s,n){var a=s*n,i=Math.floor(a/8),c=16-(a-8*i+n),A=(1<<n)-1,d=(e&A)<<c;(function(f,u,p){if(u+1<f.byteLength)f.setUint16(u,p,!1);else{var x=p>>8&255;f.setUint8(u,x)}})(t,i,ik(t,i)&~(A<<c)&65535|d)}function ik(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function D_(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var s=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],i=a>>7,c=1<<1+(7&a);t[e++],t[e++];var A=null,d=null;i&&(A=e,d=c,e+=3*c);var f=!0,u=[],p=0,x=null,m=0,j=null;for(this.width=s,this.height=n;f&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,j=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((Q=t[e++])>=0))throw Error("Invalid block size");if(Q===0)break;e+=Q}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[e++];p=t[e++]|t[e++]<<8,x=t[e++],1&w||(x=null),m=w>>2&7,e++;break;case 254:for(;;){if(!((Q=t[e++])>=0))throw Error("Invalid block size");if(Q===0)break;e+=Q}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var S=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,F=t[e++]|t[e++]<<8,U=t[e++]|t[e++]<<8,_=t[e++],z=_>>6&1,I=1<<1+(7&_),H=A,ee=d,$=!1;_>>7&&($=!0,H=e,ee=I,e+=3*I);var ce=e;for(e++;;){var Q;if(!((Q=t[e++])>=0))throw Error("Invalid block size");if(Q===0)break;e+=Q}u.push({x:S,y:C,width:F,height:U,has_local_palette:$,palette_offset:H,palette_size:ee,data_offset:ce,data_length:e-ce,transparent_index:x,interlaced:!!z,delay:p,disposal:m});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return j},this.frameInfo=function(q){if(q<0||q>=u.length)throw new Error("Frame index out of range.");return u[q]},this.decodeAndBlitFrameBGRA=function(q,te){var X=this.frameInfo(q),Ae=X.width*X.height,W=new Uint8Array(Ae);Mj(t,X.data_offset,W,Ae);var se=X.palette_offset,Z=X.transparent_index;Z===null&&(Z=256);var re=X.width,ve=s-re,ae=re,R=4*(X.y*s+X.x),P=4*((X.y+X.height)*s+X.x),V=R,K=4*ve;X.interlaced===!0&&(K+=4*s*7);for(var ne=8,pe=0,Ce=W.length;pe<Ce;++pe){var Ue=W[pe];if(ae===0&&(ae=re,(V+=K)>=P&&(K=4*ve+4*s*(ne-1),V=R+(re+ve)*(ne<<1),ne>>=1)),Ue===Z)V+=4;else{var Ne=t[se+3*Ue],Ie=t[se+3*Ue+1],Pe=t[se+3*Ue+2];te[V++]=Pe,te[V++]=Ie,te[V++]=Ne,te[V++]=255}--ae}},this.decodeAndBlitFrameRGBA=function(q,te){var X=this.frameInfo(q),Ae=X.width*X.height,W=new Uint8Array(Ae);Mj(t,X.data_offset,W,Ae);var se=X.palette_offset,Z=X.transparent_index;Z===null&&(Z=256);var re=X.width,ve=s-re,ae=re,R=4*(X.y*s+X.x),P=4*((X.y+X.height)*s+X.x),V=R,K=4*ve;X.interlaced===!0&&(K+=4*s*7);for(var ne=8,pe=0,Ce=W.length;pe<Ce;++pe){var Ue=W[pe];if(ae===0&&(ae=re,(V+=K)>=P&&(K=4*ve+4*s*(ne-1),V=R+(re+ve)*(ne<<1),ne>>=1)),Ue===Z)V+=4;else{var Ne=t[se+3*Ue],Ie=t[se+3*Ue+1],Pe=t[se+3*Ue+2];te[V++]=Ne,te[V++]=Ie,te[V++]=Pe,te[V++]=255}--ae}}}function Mj(t,e,s,n){for(var a=t[e++],i=1<<a,c=i+1,A=c+1,d=a+1,f=(1<<d)-1,u=0,p=0,x=0,m=t[e++],j=new Int32Array(4096),w=null;;){for(;u<16&&m!==0;)p|=t[e++]<<u,u+=8,m===1?m=t[e++]:--m;if(u<d)break;var S=p&f;if(p>>=d,u-=d,S!==i){if(S===c)break;for(var C=S<A?S:w,F=0,U=C;U>i;)U=j[U]>>8,++F;var _=U;if(x+F+(C!==S?1:0)>n)return void nn.log("Warning, gif stream longer than expected.");s[x++]=_;var z=x+=F;for(C!==S&&(s[x++]=_),U=C;F--;)U=j[U],s[--z]=255&U,U>>=8;w!==null&&A<4096&&(j[A++]=w<<8|_,A>=f+1&&d<12&&(++d,f=f<<1|1)),w=S}else A=c+1,f=(1<<(d=a+1))-1,w=null}return x!==n&&nn.log("Warning, gif stream shorter than expected."),s}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function K1(t){var e,s,n,a,i,c=Math.floor,A=new Array(64),d=new Array(64),f=new Array(64),u=new Array(64),p=new Array(65535),x=new Array(65535),m=new Array(64),j=new Array(64),w=[],S=0,C=7,F=new Array(64),U=new Array(64),_=new Array(64),z=new Array(256),I=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ee=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],ce=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],te=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function W(R,P){for(var V=0,K=0,ne=new Array,pe=1;pe<=16;pe++){for(var Ce=1;Ce<=R[pe];Ce++)ne[P[K]]=[],ne[P[K]][0]=V,ne[P[K]][1]=pe,K++,V++;V*=2}return ne}function se(R){for(var P=R[0],V=R[1]-1;V>=0;)P&1<<V&&(S|=1<<C),V--,--C<0&&(S==255?(Z(255),Z(0)):Z(S),C=7,S=0)}function Z(R){w.push(R)}function re(R){Z(R>>8&255),Z(255&R)}function ve(R,P,V,K,ne){for(var pe,Ce=ne[0],Ue=ne[240],Ne=(function(et,Tt){var Nt,Mt,Qt,pt,rt,Ut,rs,Ot,Dt,Oe,Ge=0;for(Dt=0;Dt<8;++Dt){Nt=et[Ge],Mt=et[Ge+1],Qt=et[Ge+2],pt=et[Ge+3],rt=et[Ge+4],Ut=et[Ge+5],rs=et[Ge+6];var ft=Nt+(Ot=et[Ge+7]),ht=Nt-Ot,vt=Mt+rs,kt=Mt-rs,Vt=Qt+Ut,zt=Qt-Ut,Bs=pt+rt,Re=pt-rt,We=ft+Bs,$t=ft-Bs,wt=vt+Vt,st=vt-Vt;et[Ge]=We+wt,et[Ge+4]=We-wt;var Ct=.707106781*(st+$t);et[Ge+2]=$t+Ct,et[Ge+6]=$t-Ct;var as=.382683433*((We=Re+zt)-(st=kt+ht)),ps=.5411961*We+as,ct=1.306562965*st+as,jt=.707106781*(wt=zt+kt),Et=ht+jt,hs=ht-jt;et[Ge+5]=hs+ps,et[Ge+3]=hs-ps,et[Ge+1]=Et+ct,et[Ge+7]=Et-ct,Ge+=8}for(Ge=0,Dt=0;Dt<8;++Dt){Nt=et[Ge],Mt=et[Ge+8],Qt=et[Ge+16],pt=et[Ge+24],rt=et[Ge+32],Ut=et[Ge+40],rs=et[Ge+48];var Ys=Nt+(Ot=et[Ge+56]),Cs=Nt-Ot,Tr=Mt+rs,qt=Mt-rs,fr=Qt+Ut,Ls=Qt-Ut,yr=pt+rt,Hr=pt-rt,pr=Ys+yr,Pr=Ys-yr,xa=Tr+fr,Va=Tr-fr;et[Ge]=pr+xa,et[Ge+32]=pr-xa;var ji=.707106781*(Va+Pr);et[Ge+16]=Pr+ji,et[Ge+48]=Pr-ji;var oc=.382683433*((pr=Hr+Ls)-(Va=qt+Cs)),li=.5411961*pr+oc,Ni=1.306562965*Va+oc,Co=.707106781*(xa=Ls+qt),nl=Cs+Co,al=Cs-Co;et[Ge+40]=al+li,et[Ge+24]=al-li,et[Ge+8]=nl+Ni,et[Ge+56]=nl-Ni,Ge++}for(Dt=0;Dt<64;++Dt)Oe=et[Dt]*Tt[Dt],m[Dt]=Oe>0?Oe+.5|0:Oe-.5|0;return m})(R,P),Ie=0;Ie<64;++Ie)j[H[Ie]]=Ne[Ie];var Pe=j[0]-V;V=j[0],Pe==0?se(K[0]):(se(K[x[pe=32767+Pe]]),se(p[pe]));for(var ze=63;ze>0&&j[ze]==0;)ze--;if(ze==0)return se(Ce),V;for(var gt,ie=1;ie<=ze;){for(var Be=ie;j[ie]==0&&ie<=ze;)++ie;var tt=ie-Be;if(tt>=16){gt=tt>>4;for(var Xe=1;Xe<=gt;++Xe)se(Ue);tt&=15}pe=32767+j[ie],se(ne[(tt<<4)+x[pe]]),se(p[pe]),ie++}return ze!=63&&se(Ce),V}function ae(R){R=Math.min(Math.max(R,1),100),i!=R&&((function(P){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],K=0;K<64;K++){var ne=c((V[K]*P+50)/100);ne=Math.min(Math.max(ne,1),255),A[H[K]]=ne}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ce=0;Ce<64;Ce++){var Ue=c((pe[Ce]*P+50)/100);Ue=Math.min(Math.max(Ue,1),255),d[H[Ce]]=Ue}for(var Ne=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ie=0,Pe=0;Pe<8;Pe++)for(var ze=0;ze<8;ze++)f[Ie]=1/(A[H[Ie]]*Ne[Pe]*Ne[ze]*8),u[Ie]=1/(d[H[Ie]]*Ne[Pe]*Ne[ze]*8),Ie++})(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),i=R)}this.encode=function(R,P){P&&ae(P),w=new Array,S=0,C=7,re(65496),re(65504),re(16),Z(74),Z(70),Z(73),Z(70),Z(0),Z(1),Z(1),Z(0),re(1),re(1),Z(0),Z(0),(function(){re(65499),re(132),Z(0);for(var Mt=0;Mt<64;Mt++)Z(A[Mt]);Z(1);for(var Qt=0;Qt<64;Qt++)Z(d[Qt])})(),(function(Mt,Qt){re(65472),re(17),Z(8),re(Qt),re(Mt),Z(3),Z(1),Z(17),Z(0),Z(2),Z(17),Z(1),Z(3),Z(17),Z(1)})(R.width,R.height),(function(){re(65476),re(418),Z(0);for(var Mt=0;Mt<16;Mt++)Z(ee[Mt+1]);for(var Qt=0;Qt<=11;Qt++)Z($[Qt]);Z(16);for(var pt=0;pt<16;pt++)Z(ce[pt+1]);for(var rt=0;rt<=161;rt++)Z(Q[rt]);Z(1);for(var Ut=0;Ut<16;Ut++)Z(q[Ut+1]);for(var rs=0;rs<=11;rs++)Z(te[rs]);Z(17);for(var Ot=0;Ot<16;Ot++)Z(X[Ot+1]);for(var Dt=0;Dt<=161;Dt++)Z(Ae[Dt])})(),re(65498),re(12),Z(3),Z(1),Z(0),Z(2),Z(17),Z(3),Z(17),Z(0),Z(63),Z(0);var V=0,K=0,ne=0;S=0,C=7,this.encode.displayName="_encode_";for(var pe,Ce,Ue,Ne,Ie,Pe,ze,gt,ie,Be=R.data,tt=R.width,Xe=R.height,et=4*tt,Tt=0;Tt<Xe;){for(pe=0;pe<et;){for(Ie=et*Tt+pe,ze=-1,gt=0,ie=0;ie<64;ie++)Pe=Ie+(gt=ie>>3)*et+(ze=4*(7&ie)),Tt+gt>=Xe&&(Pe-=et*(Tt+1+gt-Xe)),pe+ze>=et&&(Pe-=pe+ze-et+4),Ce=Be[Pe++],Ue=Be[Pe++],Ne=Be[Pe++],F[ie]=(I[Ce]+I[Ue+256|0]+I[Ne+512|0]>>16)-128,U[ie]=(I[Ce+768|0]+I[Ue+1024|0]+I[Ne+1280|0]>>16)-128,_[ie]=(I[Ce+1280|0]+I[Ue+1536|0]+I[Ne+1792|0]>>16)-128;V=ve(F,f,V,e,n),K=ve(U,u,K,s,a),ne=ve(_,u,ne,s,a),pe+=32}Tt+=8}if(C>=0){var Nt=[];Nt[1]=C+1,Nt[0]=(1<<C+1)-1,se(Nt)}return re(65497),new Uint8Array(w)},t=t||50,(function(){for(var R=String.fromCharCode,P=0;P<256;P++)z[P]=R(P)})(),e=W(ee,$),s=W(q,te),n=W(ce,Q),a=W(X,Ae),(function(){for(var R=1,P=2,V=1;V<=15;V++){for(var K=R;K<P;K++)x[32767+K]=V,p[32767+K]=[],p[32767+K][1]=V,p[32767+K][0]=K;for(var ne=-(P-1);ne<=-R;ne++)x[32767+ne]=V,p[32767+ne]=[],p[32767+ne][1]=V,p[32767+ne][0]=P-1+ne;R<<=1,P<<=1}})(),(function(){for(var R=0;R<256;R++)I[R]=19595*R,I[R+256|0]=38470*R,I[R+512|0]=7471*R+32768,I[R+768|0]=-11059*R,I[R+1024|0]=-21709*R,I[R+1280|0]=32768*R+8421375,I[R+1536|0]=-27439*R,I[R+1792|0]=-5329*R})(),ae(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Lc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Qj(t){function e($){if(!$)throw Error("assert :P")}function s($,ce,Q){for(var q=0;4>q;q++)if($[ce+q]!=Q.charCodeAt(q))return!0;return!1}function n($,ce,Q,q,te){for(var X=0;X<te;X++)$[ce+X]=Q[q+X]}function a($,ce,Q,q){for(var te=0;te<q;te++)$[ce+te]=Q}function i($){return new Int32Array($)}function c($,ce){for(var Q=[],q=0;q<$;q++)Q.push(new ce);return Q}function A($,ce){var Q=[];return(function q(te,X,Ae){for(var W=Ae[X],se=0;se<W&&(te.push(Ae.length>X+1?[]:new ce),!(Ae.length<X+1));se++)q(te[se],X+1,Ae)})(Q,0,$),Q}var d=function(){var $=this;function ce(v,E){for(var O=1<<E-1>>>0;v&O;)O>>>=1;return O?(v&O-1)+O:v}function Q(v,E,O,G,oe){e(!(G%O));do v[E+(G-=O)]=oe;while(0<G)}function q(v,E,O,G,oe){if(e(2328>=oe),512>=oe)var ue=i(512);else if((ue=i(oe))==null)return 0;return(function(he,me,ge,we,Te,$e){var ye,Le,Me=me,lt=1<<ge,Ve=i(16),it=i(16);for(e(Te!=0),e(we!=null),e(he!=null),e(0<ge),Le=0;Le<Te;++Le){if(15<we[Le])return 0;++Ve[we[Le]]}if(Ve[0]==Te)return 0;for(it[1]=0,ye=1;15>ye;++ye){if(Ve[ye]>1<<ye)return 0;it[ye+1]=it[ye]+Ve[ye]}for(Le=0;Le<Te;++Le)ye=we[Le],0<we[Le]&&($e[it[ye]++]=Le);if(it[15]==1)return(we=new te).g=0,we.value=$e[0],Q(he,Me,1,lt,we),lt;var ut,Bt=-1,xt=lt-1,es=0,Kt=1,ks=1,Wt=1<<ge;for(Le=0,ye=1,Te=2;ye<=ge;++ye,Te<<=1){if(Kt+=ks<<=1,0>(ks-=Ve[ye]))return 0;for(;0<Ve[ye];--Ve[ye])(we=new te).g=ye,we.value=$e[Le++],Q(he,Me+es,Te,Wt,we),es=ce(es,ye)}for(ye=ge+1,Te=2;15>=ye;++ye,Te<<=1){if(Kt+=ks<<=1,0>(ks-=Ve[ye]))return 0;for(;0<Ve[ye];--Ve[ye]){if(we=new te,(es&xt)!=Bt){for(Me+=Wt,ut=1<<(Bt=ye)-ge;15>Bt&&!(0>=(ut-=Ve[Bt]));)++Bt,ut<<=1;lt+=Wt=1<<(ut=Bt-ge),he[me+(Bt=es&xt)].g=ut+ge,he[me+Bt].value=Me-me-Bt}we.g=ye-ge,we.value=$e[Le++],Q(he,Me+(es>>ge),Te,Wt,we),es=ce(es,ye)}}return Kt!=2*it[15]-1?0:lt})(v,E,O,G,oe,ue)}function te(){this.value=this.g=0}function X(){this.value=this.g=0}function Ae(){this.G=c(5,te),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(_i,X)}function W(v,E,O,G){e(v!=null),e(E!=null),e(2147483648>G),v.Ca=254,v.I=0,v.b=-8,v.Ka=0,v.oa=E,v.pa=O,v.Jd=E,v.Yc=O+G,v.Zc=4<=G?O+G-4+1:O,Ce(v)}function se(v,E){for(var O=0;0<E--;)O|=Ne(v,128)<<E;return O}function Z(v,E){var O=se(v,E);return Ue(v)?-O:O}function re(v,E,O,G){var oe,ue=0;for(e(v!=null),e(E!=null),e(4294967288>G),v.Sb=G,v.Ra=0,v.u=0,v.h=0,4<G&&(G=4),oe=0;oe<G;++oe)ue+=E[O+oe]<<8*oe;v.Ra=ue,v.bb=G,v.oa=E,v.pa=O}function ve(v){for(;8<=v.u&&v.bb<v.Sb;)v.Ra>>>=8,v.Ra+=v.oa[v.pa+v.bb]<<dl-8>>>0,++v.bb,v.u-=8;K(v)&&(v.h=1,v.u=0)}function ae(v,E){if(e(0<=E),!v.h&&E<=ba){var O=V(v)&Os[E];return v.u+=E,ve(v),O}return v.h=1,v.u=0}function R(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(v){return v.Ra>>>(v.u&dl-1)>>>0}function K(v){return e(v.bb<=v.Sb),v.h||v.bb==v.Sb&&v.u>dl}function ne(v,E){v.u=E,v.h=K(v)}function pe(v){v.u>=ul&&(e(v.u>=ul),ve(v))}function Ce(v){e(v!=null&&v.oa!=null),v.pa<v.Zc?(v.I=(v.oa[v.pa++]|v.I<<8)>>>0,v.b+=8):(e(v!=null&&v.oa!=null),v.pa<v.Yc?(v.b+=8,v.I=v.oa[v.pa++]|v.I<<8):v.Ka?v.b=0:(v.I<<=8,v.b+=8,v.Ka=1))}function Ue(v){return se(v,1)}function Ne(v,E){var O=v.Ca;0>v.b&&Ce(v);var G=v.b,oe=O*E>>>8,ue=(v.I>>>G>oe)+0;for(ue?(O-=oe,v.I-=oe+1<<G>>>0):O=oe+1,G=O,oe=0;256<=G;)oe+=8,G>>=8;return G=7^oe+Sl[G],v.b-=G,v.Ca=(O<<G)-1,ue}function Ie(v,E,O){v[E+0]=O>>24&255,v[E+1]=O>>16&255,v[E+2]=O>>8&255,v[E+3]=255&O}function Pe(v,E){return v[E+0]|v[E+1]<<8}function ze(v,E){return Pe(v,E)|v[E+2]<<16}function gt(v,E){return Pe(v,E)|Pe(v,E+2)<<16}function ie(v,E){var O=1<<E;return e(v!=null),e(0<E),v.X=i(O),v.X==null?0:(v.Mb=32-E,v.Xa=E,1)}function Be(v,E){e(v!=null),e(E!=null),e(v.Xa==E.Xa),n(E.X,0,v.X,0,1<<E.Xa)}function tt(){this.X=[],this.Xa=this.Mb=0}function Xe(v,E,O,G){e(O!=null),e(G!=null);var oe=O[0],ue=G[0];return oe==0&&(oe=(v*ue+E/2)/E),ue==0&&(ue=(E*oe+v/2)/v),0>=oe||0>=ue?0:(O[0]=oe,G[0]=ue,1)}function et(v,E){return v+(1<<E)-1>>>E}function Tt(v,E){return((4278255360&v)+(4278255360&E)>>>0&4278255360)+((16711935&v)+(16711935&E)>>>0&16711935)>>>0}function Nt(v,E){$[E]=function(O,G,oe,ue,he,me,ge){var we;for(we=0;we<he;++we){var Te=$[v](me[ge+we-1],oe,ue+we);me[ge+we]=Tt(O[G+we],Te)}}}function Mt(){this.ud=this.hd=this.jd=0}function Qt(v,E){return((4278124286&(v^E))>>>1)+(v&E)>>>0}function pt(v){return 0<=v&&256>v?v:0>v?0:255<v?255:void 0}function rt(v,E){return pt(v+(v-E+.5>>1))}function Ut(v,E,O){return Math.abs(E-O)-Math.abs(v-O)}function rs(v,E,O,G,oe,ue,he){for(G=ue[he-1],O=0;O<oe;++O)ue[he+O]=G=Tt(v[E+O],G)}function Ot(v,E,O,G,oe){var ue;for(ue=0;ue<O;++ue){var he=v[E+ue],me=he>>8&255,ge=16711935&(ge=(ge=16711935&he)+((me<<16)+me));G[oe+ue]=(4278255360&he)+ge>>>0}}function Dt(v,E){E.jd=255&v,E.hd=v>>8&255,E.ud=v>>16&255}function Oe(v,E,O,G,oe,ue){var he;for(he=0;he<G;++he){var me=E[O+he],ge=me>>>8,we=me,Te=255&(Te=(Te=me>>>16)+((v.jd<<24>>24)*(ge<<24>>24)>>>5));we=255&(we=(we+=(v.hd<<24>>24)*(ge<<24>>24)>>>5)+((v.ud<<24>>24)*(Te<<24>>24)>>>5)),oe[ue+he]=(4278255360&me)+(Te<<16)+we}}function Ge(v,E,O,G,oe){$[E]=function(ue,he,me,ge,we,Te,$e,ye,Le){for(ge=$e;ge<ye;++ge)for($e=0;$e<Le;++$e)we[Te++]=oe(me[G(ue[he++])])},$[v]=function(ue,he,me,ge,we,Te,$e){var ye=8>>ue.b,Le=ue.Ea,Me=ue.K[0],lt=ue.w;if(8>ye)for(ue=(1<<ue.b)-1,lt=(1<<ye)-1;he<me;++he){var Ve,it=0;for(Ve=0;Ve<Le;++Ve)Ve&ue||(it=G(ge[we++])),Te[$e++]=oe(Me[it&lt]),it>>=ye}else $["VP8LMapColor"+O](ge,we,Me,lt,Te,$e,he,me,Le)}}function ft(v,E,O,G,oe){for(O=E+O;E<O;){var ue=v[E++];G[oe++]=ue>>16&255,G[oe++]=ue>>8&255,G[oe++]=255&ue}}function ht(v,E,O,G,oe){for(O=E+O;E<O;){var ue=v[E++];G[oe++]=ue>>16&255,G[oe++]=ue>>8&255,G[oe++]=255&ue,G[oe++]=ue>>24&255}}function vt(v,E,O,G,oe){for(O=E+O;E<O;){var ue=(he=v[E++])>>16&240|he>>12&15,he=240&he|he>>28&15;G[oe++]=ue,G[oe++]=he}}function kt(v,E,O,G,oe){for(O=E+O;E<O;){var ue=(he=v[E++])>>16&248|he>>13&7,he=he>>5&224|he>>3&31;G[oe++]=ue,G[oe++]=he}}function Vt(v,E,O,G,oe){for(O=E+O;E<O;){var ue=v[E++];G[oe++]=255&ue,G[oe++]=ue>>8&255,G[oe++]=ue>>16&255}}function zt(v,E,O,G,oe,ue){if(ue==0)for(O=E+O;E<O;)Ie(G,((ue=v[E++])[0]>>24|ue[1]>>8&65280|ue[2]<<8&16711680|ue[3]<<24)>>>0),oe+=32;else n(G,oe,v,E,O)}function Bs(v,E){$[E][0]=$[v+"0"],$[E][1]=$[v+"1"],$[E][2]=$[v+"2"],$[E][3]=$[v+"3"],$[E][4]=$[v+"4"],$[E][5]=$[v+"5"],$[E][6]=$[v+"6"],$[E][7]=$[v+"7"],$[E][8]=$[v+"8"],$[E][9]=$[v+"9"],$[E][10]=$[v+"10"],$[E][11]=$[v+"11"],$[E][12]=$[v+"12"],$[E][13]=$[v+"13"],$[E][14]=$[v+"0"],$[E][15]=$[v+"0"]}function Re(v){return v==KA||v==Ed||v==Gc||v==wc}function We(){this.eb=[],this.size=this.A=this.fb=0}function $t(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new We,this.f.kb=new $t,this.sd=null}function st(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ct(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function as(v){return alert("todo:WebPSamplerProcessPlane"),v.T}function ps(v,E){var O=v.T,G=E.ba.f.RGBA,oe=G.eb,ue=G.fb+v.ka*G.A,he=ua[E.ba.S],me=v.y,ge=v.O,we=v.f,Te=v.N,$e=v.ea,ye=v.W,Le=E.cc,Me=E.dc,lt=E.Mc,Ve=E.Nc,it=v.ka,ut=v.ka+v.T,Bt=v.U,xt=Bt+1>>1;for(it==0?he(me,ge,null,null,we,Te,$e,ye,we,Te,$e,ye,oe,ue,null,null,Bt):(he(E.ec,E.fc,me,ge,Le,Me,lt,Ve,we,Te,$e,ye,oe,ue-G.A,oe,ue,Bt),++O);it+2<ut;it+=2)Le=we,Me=Te,lt=$e,Ve=ye,Te+=v.Rc,ye+=v.Rc,ue+=2*G.A,he(me,(ge+=2*v.fa)-v.fa,me,ge,Le,Me,lt,Ve,we,Te,$e,ye,oe,ue-G.A,oe,ue,Bt);return ge+=v.fa,v.j+ut<v.o?(n(E.ec,E.fc,me,ge,Bt),n(E.cc,E.dc,we,Te,xt),n(E.Mc,E.Nc,$e,ye,xt),O--):1&ut||he(me,ge,null,null,we,Te,$e,ye,we,Te,$e,ye,oe,ue+G.A,null,null,Bt),O}function ct(v,E,O){var G=v.F,oe=[v.J];if(G!=null){var ue=v.U,he=E.ba.S,me=he==zA||he==Gc;E=E.ba.f.RGBA;var ge=[0],we=v.ka;ge[0]=v.T,v.Kb&&(we==0?--ge[0]:(--we,oe[0]-=v.width),v.j+v.ka+v.T==v.o&&(ge[0]=v.o-v.j-we));var Te=E.eb;we=E.fb+we*E.A,v=$c(G,oe[0],v.width,ue,ge,Te,we+(me?0:3),E.A),e(O==ge),v&&Re(he)&&Qo(Te,we,me,ue,ge,E.A)}return 0}function jt(v){var E=v.ma,O=E.ba.S,G=11>O,oe=O==ja||O==Ii||O==zA||O==oo||O==12||Re(O);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!Ur(E.Oa,v,oe?11:12))return 0;if(oe&&Re(O)&&RA(),v.da)alert("todo:use_scaling");else{if(G){if(E.Ib=as,v.Kb){if(O=v.U+1>>1,E.memory=i(v.U+2*O),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+v.U,E.Mc=E.cc,E.Nc=E.dc+O,E.Ib=ps,RA()}}else alert("todo:EmitYUV");oe&&(E.Jb=ct,G&&cl())}if(G&&!zo){for(v=0;256>v;++v)ha[v]=89858*(v-128)+Yc>>Pi,r0[v]=-22014*(v-128)+Yc,Wh[v]=-45773*(v-128),Md[v]=113618*(v-128)+Yc>>Pi;for(v=Ql;v<Po;++v)E=76283*(v-16)+Yc>>Pi,n0[v-Ql]=aa(E,255),a0[v-Ql]=aa(E+8>>4,15);zo=1}return 1}function Et(v){var E=v.ma,O=v.U,G=v.T;return e(!(1&v.ka)),0>=O||0>=G?0:(O=E.Ib(v,E),E.Jb!=null&&E.Jb(v,E,O),E.Dc+=O,1)}function hs(v){v.ma.memory=null}function Ys(v,E,O,G){return ae(v,8)!=47?0:(E[0]=ae(v,14)+1,O[0]=ae(v,14)+1,G[0]=ae(v,1),ae(v,3)!=0?0:!v.h)}function Cs(v,E){if(4>v)return v+1;var O=v-2>>1;return(2+(1&v)<<O)+ae(E,O)+1}function Tr(v,E){return 120<E?E-120:1<=(O=((O=Di[E-1])>>4)*v+(8-(15&O)))?O:1;var O}function qt(v,E,O){var G=V(O),oe=v[E+=255&G].g-8;return 0<oe&&(ne(O,O.u+8),G=V(O),E+=v[E].value,E+=G&(1<<oe)-1),ne(O,O.u+v[E].g),v[E].value}function fr(v,E,O){return O.g+=v.g,O.value+=v.value<<E>>>0,e(8>=O.g),v.g}function Ls(v,E,O){var G=v.xc;return e((E=G==0?0:v.vc[v.md*(O>>G)+(E>>G)])<v.Wb),v.Ya[E]}function yr(v,E,O,G){var oe=v.ab,ue=v.c*E,he=v.C;E=he+E;var me=O,ge=G;for(G=v.Ta,O=v.Ua;0<oe--;){var we=v.gc[oe],Te=he,$e=E,ye=me,Le=ge,Me=(ge=G,me=O,we.Ea);switch(e(Te<$e),e($e<=we.nc),we.hc){case 2:cn(ye,Le,($e-Te)*Me,ge,me);break;case 0:var lt=Te,Ve=$e,it=ge,ut=me,Bt=(Wt=we).Ea;lt==0&&(ao(ye,Le,null,null,1,it,ut),rs(ye,Le+1,0,0,Bt-1,it,ut+1),Le+=Bt,ut+=Bt,++lt);for(var xt=1<<Wt.b,es=xt-1,Kt=et(Bt,Wt.b),ks=Wt.K,Wt=Wt.w+(lt>>Wt.b)*Kt;lt<Ve;){var Hs=ks,Lr=Wt,Es=1;for(gc(ye,Le,it,ut-Bt,1,it,ut);Es<Bt;){var nt=(Es&~es)+xt;nt>Bt&&(nt=Bt),(0,va[Hs[Lr++]>>8&15])(ye,Le+ +Es,it,ut+Es-Bt,nt-Es,it,ut+Es),Es=nt}Le+=Bt,ut+=Bt,++lt&es||(Wt+=Kt)}$e!=we.nc&&n(ge,me-Me,ge,me+($e-Te-1)*Me,Me);break;case 1:for(Me=ye,Ve=Le,Bt=(ye=we.Ea)-(ut=ye&~(it=(Le=1<<we.b)-1)),lt=et(ye,we.b),xt=we.K,we=we.w+(Te>>we.b)*lt;Te<$e;){for(es=xt,Kt=we,ks=new Mt,Wt=Ve+ut,Hs=Ve+ye;Ve<Wt;)Dt(es[Kt++],ks),xc(ks,Me,Ve,Le,ge,me),Ve+=Le,me+=Le;Ve<Hs&&(Dt(es[Kt++],ks),xc(ks,Me,Ve,Bt,ge,me),Ve+=Bt,me+=Bt),++Te&it||(we+=lt)}break;case 3:if(ye==ge&&Le==me&&0<we.b){for(Ve=ge,ye=Me=me+($e-Te)*Me-(ut=($e-Te)*et(we.Ea,we.b)),Le=ge,it=me,lt=[],ut=(Bt=ut)-1;0<=ut;--ut)lt[ut]=Le[it+ut];for(ut=Bt-1;0<=ut;--ut)Ve[ye+ut]=lt[ut];La(we,Te,$e,ge,Me,ge,me)}else La(we,Te,$e,ye,Le,ge,me)}me=G,ge=O}ge!=O&&n(G,O,me,ge,ue)}function Hr(v,E){var O=v.V,G=v.Ba+v.c*v.C,oe=E-v.C;if(e(E<=v.l.o),e(16>=oe),0<oe){var ue=v.l,he=v.Ta,me=v.Ua,ge=ue.width;if(yr(v,oe,O,G),oe=me=[me],e((O=v.C)<(G=E)),e(ue.v<ue.va),G>ue.o&&(G=ue.o),O<ue.j){var we=ue.j-O;O=ue.j,oe[0]+=we*ge}if(O>=G?O=0:(oe[0]+=4*ue.v,ue.ka=O-ue.j,ue.U=ue.va-ue.v,ue.T=G-O,O=1),O){if(me=me[0],11>(O=v.ca).S){var Te=O.f.RGBA,$e=(G=O.S,oe=ue.U,ue=ue.T,we=Te.eb,Te.A),ye=ue;for(Te=Te.fb+v.Ma*Te.A;0<ye--;){var Le=he,Me=me,lt=oe,Ve=we,it=Te;switch(G){case Sd:bc(Le,Me,lt,Ve,it);break;case ja:hl(Le,Me,lt,Ve,it);break;case KA:hl(Le,Me,lt,Ve,it),Qo(Ve,it,0,lt,1,0);break;case lo:fl(Le,Me,lt,Ve,it);break;case Ii:zt(Le,Me,lt,Ve,it,1);break;case Ed:zt(Le,Me,lt,Ve,it,1),Qo(Ve,it,0,lt,1,0);break;case zA:zt(Le,Me,lt,Ve,it,0);break;case Gc:zt(Le,Me,lt,Ve,it,0),Qo(Ve,it,1,lt,1,0);break;case oo:El(Le,Me,lt,Ve,it);break;case wc:El(Le,Me,lt,Ve,it),di(Ve,it,lt,1,0);break;case _o:Tl(Le,Me,lt,Ve,it);break;default:e(0)}me+=ge,Te+=$e}v.Ma+=ue}else alert("todo:EmitRescaledRowsYUVA");e(v.Ma<=O.height)}}v.C=E,e(v.C<=v.i)}function pr(v){var E;if(0<v.ua)return 0;for(E=0;E<v.Wb;++E){var O=v.Ya[E].G,G=v.Ya[E].H;if(0<O[1][G[1]+0].g||0<O[2][G[2]+0].g||0<O[3][G[3]+0].g)return 0}return 1}function Pr(v,E,O,G,oe,ue){if(v.Z!=0){var he=v.qd,me=v.rd;for(e(Ll[v.Z]!=null);E<O;++E)Ll[v.Z](he,me,G,oe,G,oe,ue),he=G,me=oe,oe+=ue;v.qd=he,v.rd=me}}function xa(v,E){var O=v.l.ma,G=O.Z==0||O.Z==1?v.l.j:v.C;if(G=v.C<G?G:v.C,e(E<=v.l.o),E>G){var oe=v.l.width,ue=O.ca,he=O.tb+oe*G,me=v.V,ge=v.Ba+v.c*G,we=v.gc;e(v.ab==1),e(we[0].hc==3),ca(we[0],G,E,me,ge,ue,he),Pr(O,G,E,ue,he,oe)}v.C=v.Ma=E}function Va(v,E,O,G,oe,ue,he){var me=v.$/G,ge=v.$%G,we=v.m,Te=v.s,$e=O+v.$,ye=$e;oe=O+G*oe;var Le=O+G*ue,Me=280+Te.ua,lt=v.Pb?me:16777216,Ve=0<Te.ua?Te.Wa:null,it=Te.wc,ut=$e<Le?Ls(Te,ge,me):null;e(v.C<ue),e(Le<=oe);var Bt=!1;e:for(;;){for(;Bt||$e<Le;){var xt=0;if(me>=lt){var es=$e-O;e((lt=v).Pb),lt.wd=lt.m,lt.xd=es,0<lt.s.ua&&Be(lt.s.Wa,lt.s.vb),lt=me+Oo}if(ge&it||(ut=Ls(Te,ge,me)),e(ut!=null),ut.Qb&&(E[$e]=ut.qb,Bt=!0),!Bt)if(pe(we),ut.jc){xt=we,es=E;var Kt=$e,ks=ut.pd[V(xt)&_i-1];e(ut.jc),256>ks.g?(ne(xt,xt.u+ks.g),es[Kt]=ks.value,xt=0):(ne(xt,xt.u+ks.g-256),e(256<=ks.value),xt=ks.value),xt==0&&(Bt=!0)}else xt=qt(ut.G[0],ut.H[0],we);if(we.h)break;if(Bt||256>xt){if(!Bt)if(ut.nd)E[$e]=(ut.qb|xt<<8)>>>0;else{if(pe(we),Bt=qt(ut.G[1],ut.H[1],we),pe(we),es=qt(ut.G[2],ut.H[2],we),Kt=qt(ut.G[3],ut.H[3],we),we.h)break;E[$e]=(Kt<<24|Bt<<16|xt<<8|es)>>>0}if(Bt=!1,++$e,++ge>=G&&(ge=0,++me,he!=null&&me<=ue&&!(me%16)&&he(v,me),Ve!=null))for(;ye<$e;)xt=E[ye++],Ve.X[(506832829*xt&4294967295)>>>Ve.Mb]=xt}else if(280>xt){if(xt=Cs(xt-256,we),es=qt(ut.G[4],ut.H[4],we),pe(we),es=Tr(G,es=Cs(es,we)),we.h)break;if($e-O<es||oe-$e<xt)break e;for(Kt=0;Kt<xt;++Kt)E[$e+Kt]=E[$e+Kt-es];for($e+=xt,ge+=xt;ge>=G;)ge-=G,++me,he!=null&&me<=ue&&!(me%16)&&he(v,me);if(e($e<=oe),ge&it&&(ut=Ls(Te,ge,me)),Ve!=null)for(;ye<$e;)xt=E[ye++],Ve.X[(506832829*xt&4294967295)>>>Ve.Mb]=xt}else{if(!(xt<Me))break e;for(Bt=xt-280,e(Ve!=null);ye<$e;)xt=E[ye++],Ve.X[(506832829*xt&4294967295)>>>Ve.Mb]=xt;xt=$e,e(!(Bt>>>(es=Ve).Xa)),E[xt]=es.X[Bt],Bt=!0}Bt||e(we.h==K(we))}if(v.Pb&&we.h&&$e<oe)e(v.m.h),v.a=5,v.m=v.wd,v.$=v.xd,0<v.s.ua&&Be(v.s.vb,v.s.Wa);else{if(we.h)break e;he!=null&&he(v,me>ue?ue:me),v.a=0,v.$=$e-O}return 1}return v.a=3,0}function ji(v){e(v!=null),v.vc=null,v.yc=null,v.Ya=null;var E=v.Wa;E!=null&&(E.X=null),v.vb=null,e(v!=null)}function oc(){var v=new ws;return v==null?null:(v.a=0,v.xb=Pu,Bs("Predictor","VP8LPredictors"),Bs("Predictor","VP8LPredictors_C"),Bs("PredictorAdd","VP8LPredictorsAdd"),Bs("PredictorAdd","VP8LPredictorsAdd_C"),cn=Ot,xc=Oe,bc=ft,hl=ht,El=vt,Tl=kt,fl=Vt,$.VP8LMapColor32b=oa,$.VP8LMapColor8b=Js,v)}function li(v,E,O,G,oe){var ue=1,he=[v],me=[E],ge=G.m,we=G.s,Te=null,$e=0;e:for(;;){if(O)for(;ue&&ae(ge,1);){var ye=he,Le=me,Me=G,lt=1,Ve=Me.m,it=Me.gc[Me.ab],ut=ae(Ve,2);if(Me.Oc&1<<ut)ue=0;else{switch(Me.Oc|=1<<ut,it.hc=ut,it.Ea=ye[0],it.nc=Le[0],it.K=[null],++Me.ab,e(4>=Me.ab),ut){case 0:case 1:it.b=ae(Ve,3)+2,lt=li(et(it.Ea,it.b),et(it.nc,it.b),0,Me,it.K),it.K=it.K[0];break;case 3:var Bt,xt=ae(Ve,8)+1,es=16<xt?0:4<xt?1:2<xt?2:3;if(ye[0]=et(it.Ea,es),it.b=es,Bt=lt=li(xt,1,0,Me,it.K)){var Kt,ks=xt,Wt=it,Hs=1<<(8>>Wt.b),Lr=i(Hs);if(Lr==null)Bt=0;else{var Es=Wt.K[0],nt=Wt.w;for(Lr[0]=Wt.K[0][0],Kt=1;Kt<1*ks;++Kt)Lr[Kt]=Tt(Es[nt+Kt],Lr[Kt-1]);for(;Kt<4*Hs;++Kt)Lr[Kt]=0;Wt.K[0]=null,Wt.K[0]=Lr,Bt=1}}lt=Bt;break;case 2:break;default:e(0)}ue=lt}}if(he=he[0],me=me[0],ue&&ae(ge,1)&&!(ue=1<=($e=ae(ge,4))&&11>=$e)){G.a=3;break e}var _t;if(_t=ue)t:{var Xr,ms,vs,gr=G,kn=he,gn=me,xr=$e,Cn=O,Na=gr.m,Sn=gr.s,Ss=[null],Ws=1,Mr=0,dr=Ri[xr];s:for(;;){if(Cn&&ae(Na,1)){var En=ae(Na,3)+2,Zr=et(kn,En),Xs=et(gn,En),xn=Zr*Xs;if(!li(Zr,Xs,0,gr,Ss))break s;for(Ss=Ss[0],Sn.xc=En,Xr=0;Xr<xn;++Xr){var br=Ss[Xr]>>8&65535;Ss[Xr]=br,br>=Ws&&(Ws=br+1)}}if(Na.h)break s;for(ms=0;5>ms;++ms){var Tn=jc[ms];!ms&&0<xr&&(Tn+=1<<xr),Mr<Tn&&(Mr=Tn)}var Un=c(Ws*dr,te),Br=Ws,rr=c(Br,Ae);if(rr==null)var Ba=null;else e(65536>=Br),Ba=rr;var dn=i(Mr);if(Ba==null||dn==null||Un==null){gr.a=1;break s}var ds=Un;for(Xr=vs=0;Xr<Ws;++Xr){var fs=Ba[Xr],lr=fs.G,Xa=fs.H,fi=0,Ia=1,en=0;for(ms=0;5>ms;++ms){Tn=jc[ms],lr[ms]=ds,Xa[ms]=vs,!ms&&0<xr&&(Tn+=1<<xr);n:{var Ko,_l=Tn,Xc=gr,kr=dn,_d=ds,zu=vs,GA=0,gl=Xc.m,Ku=ae(gl,1);if(a(kr,0,0,_l),Ku){var Id=ae(gl,1)+1,Od=ae(gl,1),qA=ae(gl,Od==0?1:8);kr[qA]=1,Id==2&&(kr[qA=ae(gl,8)]=1);var Dn=1}else{var Kr=i(19),YA=ae(gl,4)+4;if(19<YA){Xc.a=3;var Vo=0;break n}for(Ko=0;Ko<YA;++Ko)Kr[Io[Ko]]=ae(gl,3);var Zc=void 0,qn=void 0,zi=Xc,Dd=Kr,eA=_l,Rd=kr,Hd=0,Ao=zi.m,Vu=8,$u=c(128,te);r:for(;q($u,0,7,Dd,19);){if(ae(Ao,1)){var Xh=2+2*ae(Ao,3);if((Zc=2+ae(Ao,Xh))>eA)break r}else Zc=eA;for(qn=0;qn<eA&&Zc--;){pe(Ao);var Gu=$u[0+(127&V(Ao))];ne(Ao,Ao.u+Gu.g);var uo=Gu.value;if(16>uo)Rd[qn++]=uo,uo!=0&&(Vu=uo);else{var Zh=uo==16,Pd=uo-16,qu=qc[Pd],Rn=ae(Ao,Oi[Pd])+qu;if(qn+Rn>eA)break r;for(var tA=Zh?Vu:0;0<Rn--;)Rd[qn++]=tA}}Hd=1;break r}Hd||(zi.a=3),Dn=Hd}(Dn=Dn&&!gl.h)&&(GA=q(_d,zu,8,kr,_l)),Dn&&GA!=0?Vo=GA:(Xc.a=3,Vo=0)}if(Vo==0)break s;if(Ia&&Td[ms]==1&&(Ia=ds[vs].g==0),fi+=ds[vs].g,vs+=Vo,3>=ms){var Bc,zd=dn[0];for(Bc=1;Bc<Tn;++Bc)dn[Bc]>zd&&(zd=dn[Bc]);en+=zd}}if(fs.nd=Ia,fs.Qb=0,Ia&&(fs.qb=(lr[3][Xa[3]+0].value<<24|lr[1][Xa[1]+0].value<<16|lr[2][Xa[2]+0].value)>>>0,fi==0&&256>lr[0][Xa[0]+0].value&&(fs.Qb=1,fs.qb+=lr[0][Xa[0]+0].value<<8)),fs.jc=!fs.Qb&&6>en,fs.jc){var sA,Ki=fs;for(sA=0;sA<_i;++sA){var ho=sA,fo=Ki.pd[ho],Kd=Ki.G[0][Ki.H[0]+ho];256<=Kd.value?(fo.g=Kd.g+256,fo.value=Kd.value):(fo.g=0,fo.value=0,ho>>=fr(Kd,8,fo),ho>>=fr(Ki.G[1][Ki.H[1]+ho],16,fo),ho>>=fr(Ki.G[2][Ki.H[2]+ho],0,fo),fr(Ki.G[3][Ki.H[3]+ho],24,fo))}}}Sn.vc=Ss,Sn.Wb=Ws,Sn.Ya=Ba,Sn.yc=Un,_t=1;break t}_t=0}if(!(ue=_t)){G.a=3;break e}if(0<$e){if(we.ua=1<<$e,!ie(we.Wa,$e)){G.a=1,ue=0;break e}}else we.ua=0;var Vd=G,kc=he,ef=me,rA=Vd.s,nA=rA.xc;if(Vd.c=kc,Vd.i=ef,rA.md=et(kc,nA),rA.wc=nA==0?-1:(1<<nA)-1,O){G.xb=Do;break e}if((Te=i(he*me))==null){G.a=1,ue=0;break e}ue=(ue=Va(G,Te,0,he,me,me,null))&&!ge.h;break e}return ue?(oe!=null?oe[0]=Te:(e(Te==null),e(O)),G.$=0,O||ji(we)):ji(we),ue}function Ni(v,E){var O=v.c*v.i,G=O+E+16*E;return e(v.c<=E),v.V=i(G),v.V==null?(v.Ta=null,v.Ua=0,v.a=1,0):(v.Ta=v.V,v.Ua=v.Ba+O+E,1)}function Co(v,E){var O=v.C,G=E-O,oe=v.V,ue=v.Ba+v.c*O;for(e(E<=v.l.o);0<G;){var he=16<G?16:G,me=v.l.ma,ge=v.l.width,we=ge*he,Te=me.ca,$e=me.tb+ge*O,ye=v.Ta,Le=v.Ua;yr(v,he,oe,ue),ui(ye,Le,Te,$e,we),Pr(me,O,O+he,Te,$e,ge),G-=he,oe+=he*v.c,O+=he}e(O==E),v.C=v.Ma=E}function nl(){this.ub=this.yd=this.td=this.Rb=0}function al(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function cc(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Nl(){this.Yb=(function(){var v=[];return(function E(O,G,oe){for(var ue=oe[G],he=0;he<ue&&(O.push(oe.length>G+1?[]:0),!(oe.length<G+1));he++)E(O[he],G+1,oe)})(v,0,[3,11]),v})()}function hn(){this.jb=i(3),this.Wc=A([4,8],Nl),this.Xc=A([4,17],Nl)}function Jl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function $a(){this.ld=this.La=this.dd=this.tc=0}function Ga(){this.Na=this.la=0}function Bl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Wl(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function EA(){this.uc=this.M=this.Nb=0,this.wa=Array(new $a),this.Y=0,this.ya=Array(new Wl),this.aa=0,this.l=new Xl}function TA(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Ac(){this.cb=this.a=0,this.sc="",this.m=new R,this.Od=new nl,this.Kc=new al,this.ed=new Jl,this.Qa=new cc,this.Ic=this.$c=this.Aa=0,this.D=new EA,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,R),this.ia=0,this.pb=c(4,Bl),this.Pa=new hn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new TA),this.Hd=0,this.rb=Array(new Ga),this.sb=0,this.wa=Array(new $a),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Wl),this.L=this.aa=0,this.gd=A([4,2],$a),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function aa(v,E){return 0>v?0:v>E?E:v}function Xl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function il(){var v=new Ac;return v!=null&&(v.a=0,v.sc="OK",v.cb=0,v.Xb=0,hi||(hi=Bi)),v}function cr(v,E,O){return v.a==0&&(v.a=E,v.sc=O,v.cb=0),0}function So(v,E,O){return 3<=O&&v[E+0]==157&&v[E+1]==1&&v[E+2]==42}function oi(v,E){if(v==null)return 0;if(v.a=0,v.sc="OK",E==null)return cr(v,2,"null VP8Io passed to VP8GetHeaders()");var O=E.data,G=E.w,oe=E.ha;if(4>oe)return cr(v,7,"Truncated header.");var ue=O[G+0]|O[G+1]<<8|O[G+2]<<16,he=v.Od;if(he.Rb=!(1&ue),he.td=ue>>1&7,he.yd=ue>>4&1,he.ub=ue>>5,3<he.td)return cr(v,3,"Incorrect keyframe parameters.");if(!he.yd)return cr(v,4,"Frame not displayable.");G+=3,oe-=3;var me=v.Kc;if(he.Rb){if(7>oe)return cr(v,7,"cannot parse picture header");if(!So(O,G,oe))return cr(v,3,"Bad code word");me.c=16383&(O[G+4]<<8|O[G+3]),me.Td=O[G+4]>>6,me.i=16383&(O[G+6]<<8|O[G+5]),me.Ud=O[G+6]>>6,G+=7,oe-=7,v.za=me.c+15>>4,v.Ub=me.i+15>>4,E.width=me.c,E.height=me.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,a((ue=v.Pa).jb,0,255,ue.jb.length),e((ue=v.Qa)!=null),ue.Cb=0,ue.Bb=0,ue.Fb=1,a(ue.Zb,0,0,ue.Zb.length),a(ue.Lb,0,0,ue.Lb)}if(he.ub>oe)return cr(v,7,"bad partition length");W(ue=v.m,O,G,he.ub),G+=he.ub,oe-=he.ub,he.Rb&&(me.Ld=Ue(ue),me.Kd=Ue(ue)),me=v.Qa;var ge,we=v.Pa;if(e(ue!=null),e(me!=null),me.Cb=Ue(ue),me.Cb){if(me.Bb=Ue(ue),Ue(ue)){for(me.Fb=Ue(ue),ge=0;4>ge;++ge)me.Zb[ge]=Ue(ue)?Z(ue,7):0;for(ge=0;4>ge;++ge)me.Lb[ge]=Ue(ue)?Z(ue,6):0}if(me.Bb)for(ge=0;3>ge;++ge)we.jb[ge]=Ue(ue)?se(ue,8):255}else me.Bb=0;if(ue.Ka)return cr(v,3,"cannot parse segment header");if((me=v.ed).zd=Ue(ue),me.Tb=se(ue,6),me.wb=se(ue,3),me.Pc=Ue(ue),me.Pc&&Ue(ue)){for(we=0;4>we;++we)Ue(ue)&&(me.vd[we]=Z(ue,6));for(we=0;4>we;++we)Ue(ue)&&(me.od[we]=Z(ue,6))}if(v.L=me.Tb==0?0:me.zd?1:2,ue.Ka)return cr(v,3,"cannot parse filter header");var Te=oe;if(oe=ge=G,G=ge+Te,me=Te,v.Xb=(1<<se(v.m,2))-1,Te<3*(we=v.Xb))O=7;else{for(ge+=3*we,me-=3*we,Te=0;Te<we;++Te){var $e=O[oe+0]|O[oe+1]<<8|O[oe+2]<<16;$e>me&&($e=me),W(v.Jc[+Te],O,ge,$e),ge+=$e,me-=$e,oe+=3}W(v.Jc[+we],O,ge,me),O=ge<G?0:5}if(O!=0)return cr(v,O,"cannot parse partitions");for(O=se(ge=v.m,7),oe=Ue(ge)?Z(ge,4):0,G=Ue(ge)?Z(ge,4):0,me=Ue(ge)?Z(ge,4):0,we=Ue(ge)?Z(ge,4):0,ge=Ue(ge)?Z(ge,4):0,Te=v.Qa,$e=0;4>$e;++$e){if(Te.Cb){var ye=Te.Zb[$e];Te.Fb||(ye+=O)}else{if(0<$e){v.pb[$e]=v.pb[0];continue}ye=O}var Le=v.pb[$e];Le.Sc[0]=Hi[aa(ye+oe,127)],Le.Sc[1]=Qa[aa(ye+0,127)],Le.Eb[0]=2*Hi[aa(ye+G,127)],Le.Eb[1]=101581*Qa[aa(ye+me,127)]>>16,8>Le.Eb[1]&&(Le.Eb[1]=8),Le.Qc[0]=Hi[aa(ye+we,117)],Le.Qc[1]=Qa[aa(ye+ge,127)],Le.lc=ye+ge}if(!he.Rb)return cr(v,4,"Not a key frame.");for(Ue(ue),he=v.Pa,O=0;4>O;++O){for(oe=0;8>oe;++oe)for(G=0;3>G;++G)for(me=0;11>me;++me)we=Ne(ue,Fr[O][oe][G][me])?se(ue,8):Jh[O][oe][G][me],he.Wc[O][oe].Yb[G][me]=we;for(oe=0;17>oe;++oe)he.Xc[O][oe]=he.Wc[O][Gs[oe]]}return v.kc=Ue(ue),v.kc&&(v.Bd=se(ue,8)),v.cb=1}function Bi(v,E,O,G,oe,ue,he){var me=E[oe].Yb[O];for(O=0;16>oe;++oe){if(!Ne(v,me[O+0]))return oe;for(;!Ne(v,me[O+1]);)if(me=E[++oe].Yb[0],O=0,oe==16)return 16;var ge=E[oe+1].Yb;if(Ne(v,me[O+2])){var we=v,Te=0;if(Ne(we,(ye=me)[($e=O)+3]))if(Ne(we,ye[$e+6])){for(me=0,$e=2*(Te=Ne(we,ye[$e+8]))+(ye=Ne(we,ye[$e+9+Te])),Te=0,ye=Yh[$e];ye[me];++me)Te+=Te+Ne(we,ye[me]);Te+=3+(8<<$e)}else Ne(we,ye[$e+7])?(Te=7+2*Ne(we,165),Te+=Ne(we,145)):Te=5+Ne(we,159);else Te=Ne(we,ye[$e+4])?3+Ne(we,ye[$e+5]):2;me=ge[2]}else Te=1,me=ge[1];ge=he+Hu[oe],0>(we=v).b&&Ce(we);var $e,ye=we.b,Le=($e=we.Ca>>1)-(we.I>>ye)>>31;--we.b,we.Ca+=Le,we.Ca|=1,we.I-=($e+1&Le)<<ye,ue[ge]=((Te^Le)-Le)*G[(0<oe)+0]}return 16}function UA(v){var E=v.rb[v.sb-1];E.la=0,E.Na=0,a(v.zc,0,0,v.zc.length),v.ja=0}function wr(v,E,O,G,oe){oe=v[E+O+32*G]+(oe>>3),v[E+O+32*G]=-256&oe?0>oe?0:255:oe}function _n(v,E,O,G,oe,ue){wr(v,E,0,O,G+oe),wr(v,E,1,O,G+ue),wr(v,E,2,O,G-ue),wr(v,E,3,O,G-oe)}function wn(v){return(20091*v>>16)+v}function Rc(v,E,O,G){var oe,ue=0,he=i(16);for(oe=0;4>oe;++oe){var me=v[E+0]+v[E+8],ge=v[E+0]-v[E+8],we=(35468*v[E+4]>>16)-wn(v[E+12]),Te=wn(v[E+4])+(35468*v[E+12]>>16);he[ue+0]=me+Te,he[ue+1]=ge+we,he[ue+2]=ge-we,he[ue+3]=me-Te,ue+=4,E++}for(oe=ue=0;4>oe;++oe)me=(v=he[ue+0]+4)+he[ue+8],ge=v-he[ue+8],we=(35468*he[ue+4]>>16)-wn(he[ue+12]),wr(O,G,0,0,me+(Te=wn(he[ue+4])+(35468*he[ue+12]>>16))),wr(O,G,1,0,ge+we),wr(O,G,2,0,ge-we),wr(O,G,3,0,me-Te),ue++,G+=32}function bd(v,E,O,G){var oe=v[E+0]+4,ue=35468*v[E+4]>>16,he=wn(v[E+4]),me=35468*v[E+1]>>16;_n(O,G,0,oe+he,v=wn(v[E+1]),me),_n(O,G,1,oe+ue,v,me),_n(O,G,2,oe-ue,v,me),_n(O,G,3,oe-he,v,me)}function FA(v,E,O,G,oe){Rc(v,E,O,G),oe&&Rc(v,E+16,O,G+4)}function Fa(v,E,O,G){io(v,E+0,O,G,1),io(v,E+32,O,G+128,1)}function LA(v,E,O,G){var oe;for(v=v[E+0]+4,oe=0;4>oe;++oe)for(E=0;4>E;++E)wr(O,G,E,oe,v)}function MA(v,E,O,G){v[E+0]&&ir(v,E+0,O,G),v[E+16]&&ir(v,E+16,O,G+4),v[E+32]&&ir(v,E+32,O,G+128),v[E+48]&&ir(v,E+48,O,G+128+4)}function qa(v,E,O,G){var oe,ue=i(16);for(oe=0;4>oe;++oe){var he=v[E+0+oe]+v[E+12+oe],me=v[E+4+oe]+v[E+8+oe],ge=v[E+4+oe]-v[E+8+oe],we=v[E+0+oe]-v[E+12+oe];ue[0+oe]=he+me,ue[8+oe]=he-me,ue[4+oe]=we+ge,ue[12+oe]=we-ge}for(oe=0;4>oe;++oe)he=(v=ue[0+4*oe]+3)+ue[3+4*oe],me=ue[1+4*oe]+ue[2+4*oe],ge=ue[1+4*oe]-ue[2+4*oe],we=v-ue[3+4*oe],O[G+0]=he+me>>3,O[G+16]=we+ge>>3,O[G+32]=he-me>>3,O[G+48]=we-ge>>3,G+=64}function dc(v,E,O){var G,oe=E-32,ue=wa,he=255-v[oe-1];for(G=0;G<O;++G){var me,ge=ue,we=he+v[E-1];for(me=0;me<O;++me)v[E+me]=ge[we+v[oe+me]];E+=32}}function QA(v,E){dc(v,E,4)}function vd(v,E){dc(v,E,8)}function _A(v,E){dc(v,E,16)}function Hc(v,E){var O;for(O=0;16>O;++O)n(v,E+32*O,v,E-32,16)}function Pc(v,E){var O;for(O=16;0<O;--O)a(v,E,v[E-1],16),E+=32}function jn(v,E,O){var G;for(G=0;16>G;++G)a(E,O+32*G,v,16)}function ll(v,E){var O,G=16;for(O=0;16>O;++O)G+=v[E-1+32*O]+v[E+O-32];jn(G>>5,v,E)}function Zl(v,E){var O,G=8;for(O=0;16>O;++O)G+=v[E-1+32*O];jn(G>>4,v,E)}function uc(v,E){var O,G=8;for(O=0;16>O;++O)G+=v[E+O-32];jn(G>>4,v,E)}function ki(v,E){jn(128,v,E)}function bs(v,E,O){return v+2*E+O+2>>2}function yd(v,E){var O,G=E-32;for(G=new Uint8Array([bs(v[G-1],v[G+0],v[G+1]),bs(v[G+0],v[G+1],v[G+2]),bs(v[G+1],v[G+2],v[G+3]),bs(v[G+2],v[G+3],v[G+4])]),O=0;4>O;++O)n(v,E+32*O,G,0,G.length)}function IA(v,E){var O=v[E-1],G=v[E-1+32],oe=v[E-1+64],ue=v[E-1+96];Ie(v,E+0,16843009*bs(v[E-1-32],O,G)),Ie(v,E+32,16843009*bs(O,G,oe)),Ie(v,E+64,16843009*bs(G,oe,ue)),Ie(v,E+96,16843009*bs(oe,ue,ue))}function wd(v,E){var O,G=4;for(O=0;4>O;++O)G+=v[E+O-32]+v[E-1+32*O];for(G>>=3,O=0;4>O;++O)a(v,E+32*O,G,4)}function ci(v,E){var O=v[E-1+0],G=v[E-1+32],oe=v[E-1+64],ue=v[E-1-32],he=v[E+0-32],me=v[E+1-32],ge=v[E+2-32],we=v[E+3-32];v[E+0+96]=bs(G,oe,v[E-1+96]),v[E+1+96]=v[E+0+64]=bs(O,G,oe),v[E+2+96]=v[E+1+64]=v[E+0+32]=bs(ue,O,G),v[E+3+96]=v[E+2+64]=v[E+1+32]=v[E+0+0]=bs(he,ue,O),v[E+3+64]=v[E+2+32]=v[E+1+0]=bs(me,he,ue),v[E+3+32]=v[E+2+0]=bs(ge,me,he),v[E+3+0]=bs(we,ge,me)}function ia(v,E){var O=v[E+1-32],G=v[E+2-32],oe=v[E+3-32],ue=v[E+4-32],he=v[E+5-32],me=v[E+6-32],ge=v[E+7-32];v[E+0+0]=bs(v[E+0-32],O,G),v[E+1+0]=v[E+0+32]=bs(O,G,oe),v[E+2+0]=v[E+1+32]=v[E+0+64]=bs(G,oe,ue),v[E+3+0]=v[E+2+32]=v[E+1+64]=v[E+0+96]=bs(oe,ue,he),v[E+3+32]=v[E+2+64]=v[E+1+96]=bs(ue,he,me),v[E+3+64]=v[E+2+96]=bs(he,me,ge),v[E+3+96]=bs(me,ge,ge)}function Ya(v,E){var O=v[E-1+0],G=v[E-1+32],oe=v[E-1+64],ue=v[E-1-32],he=v[E+0-32],me=v[E+1-32],ge=v[E+2-32],we=v[E+3-32];v[E+0+0]=v[E+1+64]=ue+he+1>>1,v[E+1+0]=v[E+2+64]=he+me+1>>1,v[E+2+0]=v[E+3+64]=me+ge+1>>1,v[E+3+0]=ge+we+1>>1,v[E+0+96]=bs(oe,G,O),v[E+0+64]=bs(G,O,ue),v[E+0+32]=v[E+1+96]=bs(O,ue,he),v[E+1+32]=v[E+2+96]=bs(ue,he,me),v[E+2+32]=v[E+3+96]=bs(he,me,ge),v[E+3+32]=bs(me,ge,we)}function Eo(v,E){var O=v[E+0-32],G=v[E+1-32],oe=v[E+2-32],ue=v[E+3-32],he=v[E+4-32],me=v[E+5-32],ge=v[E+6-32],we=v[E+7-32];v[E+0+0]=O+G+1>>1,v[E+1+0]=v[E+0+64]=G+oe+1>>1,v[E+2+0]=v[E+1+64]=oe+ue+1>>1,v[E+3+0]=v[E+2+64]=ue+he+1>>1,v[E+0+32]=bs(O,G,oe),v[E+1+32]=v[E+0+96]=bs(G,oe,ue),v[E+2+32]=v[E+1+96]=bs(oe,ue,he),v[E+3+32]=v[E+2+96]=bs(ue,he,me),v[E+3+64]=bs(he,me,ge),v[E+3+96]=bs(me,ge,we)}function Ja(v,E){var O=v[E-1+0],G=v[E-1+32],oe=v[E-1+64],ue=v[E-1+96];v[E+0+0]=O+G+1>>1,v[E+2+0]=v[E+0+32]=G+oe+1>>1,v[E+2+32]=v[E+0+64]=oe+ue+1>>1,v[E+1+0]=bs(O,G,oe),v[E+3+0]=v[E+1+32]=bs(G,oe,ue),v[E+3+32]=v[E+1+64]=bs(oe,ue,ue),v[E+3+64]=v[E+2+64]=v[E+0+96]=v[E+1+96]=v[E+2+96]=v[E+3+96]=ue}function To(v,E){var O=v[E-1+0],G=v[E-1+32],oe=v[E-1+64],ue=v[E-1+96],he=v[E-1-32],me=v[E+0-32],ge=v[E+1-32],we=v[E+2-32];v[E+0+0]=v[E+2+32]=O+he+1>>1,v[E+0+32]=v[E+2+64]=G+O+1>>1,v[E+0+64]=v[E+2+96]=oe+G+1>>1,v[E+0+96]=ue+oe+1>>1,v[E+3+0]=bs(me,ge,we),v[E+2+0]=bs(he,me,ge),v[E+1+0]=v[E+3+32]=bs(O,he,me),v[E+1+32]=v[E+3+64]=bs(G,O,he),v[E+1+64]=v[E+3+96]=bs(oe,G,O),v[E+1+96]=bs(ue,oe,G)}function kl(v,E){var O;for(O=0;8>O;++O)n(v,E+32*O,v,E-32,8)}function jd(v,E){var O;for(O=0;8>O;++O)a(v,E,v[E-1],8),E+=32}function Ci(v,E,O){var G;for(G=0;8>G;++G)a(E,O+32*G,v,8)}function hc(v,E){var O,G=8;for(O=0;8>O;++O)G+=v[E+O-32]+v[E-1+32*O];Ci(G>>4,v,E)}function fc(v,E){var O,G=4;for(O=0;8>O;++O)G+=v[E+O-32];Ci(G>>3,v,E)}function In(v,E){var O,G=4;for(O=0;8>O;++O)G+=v[E-1+32*O];Ci(G>>3,v,E)}function Cl(v,E){Ci(128,v,E)}function Si(v,E,O){var G=v[E-O],oe=v[E+0],ue=3*(oe-G)+Fl[1020+v[E-2*O]-v[E+O]],he=PA[112+(ue+4>>3)];v[E-O]=wa[255+G+PA[112+(ue+3>>3)]],v[E+0]=wa[255+oe-he]}function zr(v,E,O,G){var oe=v[E+0],ue=v[E+O];return Aa[255+v[E-2*O]-v[E-O]]>G||Aa[255+ue-oe]>G}function zc(v,E,O,G){return 4*Aa[255+v[E-O]-v[E+0]]+Aa[255+v[E-2*O]-v[E+O]]<=G}function Ei(v,E,O,G,oe){var ue=v[E-3*O],he=v[E-2*O],me=v[E-O],ge=v[E+0],we=v[E+O],Te=v[E+2*O],$e=v[E+3*O];return 4*Aa[255+me-ge]+Aa[255+he-we]>G?0:Aa[255+v[E-4*O]-ue]<=oe&&Aa[255+ue-he]<=oe&&Aa[255+he-me]<=oe&&Aa[255+$e-Te]<=oe&&Aa[255+Te-we]<=oe&&Aa[255+we-ge]<=oe}function eo(v,E,O,G){var oe=2*G+1;for(G=0;16>G;++G)zc(v,E+G,O,oe)&&Si(v,E+G,O)}function to(v,E,O,G){var oe=2*G+1;for(G=0;16>G;++G)zc(v,E+G*O,1,oe)&&Si(v,E+G*O,1)}function pc(v,E,O,G){var oe;for(oe=3;0<oe;--oe)eo(v,E+=4*O,O,G)}function OA(v,E,O,G){var oe;for(oe=3;0<oe;--oe)to(v,E+=4,O,G)}function Ti(v,E,O,G,oe,ue,he,me){for(ue=2*ue+1;0<oe--;){if(Ei(v,E,O,ue,he))if(zr(v,E,O,me))Si(v,E,O);else{var ge=v,we=E,Te=O,$e=ge[we-2*Te],ye=ge[we-Te],Le=ge[we+0],Me=ge[we+Te],lt=ge[we+2*Te],Ve=27*(ut=Fl[1020+3*(Le-ye)+Fl[1020+$e-Me]])+63>>7,it=18*ut+63>>7,ut=9*ut+63>>7;ge[we-3*Te]=wa[255+ge[we-3*Te]+ut],ge[we-2*Te]=wa[255+$e+it],ge[we-Te]=wa[255+ye+Ve],ge[we+0]=wa[255+Le-Ve],ge[we+Te]=wa[255+Me-it],ge[we+2*Te]=wa[255+lt-ut]}E+=G}}function Ui(v,E,O,G,oe,ue,he,me){for(ue=2*ue+1;0<oe--;){if(Ei(v,E,O,ue,he))if(zr(v,E,O,me))Si(v,E,O);else{var ge=v,we=E,Te=O,$e=ge[we-Te],ye=ge[we+0],Le=ge[we+Te],Me=PA[112+(4+(lt=3*(ye-$e))>>3)],lt=PA[112+(lt+3>>3)],Ve=Me+1>>1;ge[we-2*Te]=wa[255+ge[we-2*Te]+Ve],ge[we-Te]=wa[255+$e+lt],ge[we+0]=wa[255+ye-Me],ge[we+Te]=wa[255+Le-Ve]}E+=G}}function DA(v,E,O,G,oe,ue){Ti(v,E,O,1,16,G,oe,ue)}function so(v,E,O,G,oe,ue){Ti(v,E,1,O,16,G,oe,ue)}function ol(v,E,O,G,oe,ue){var he;for(he=3;0<he;--he)Ui(v,E+=4*O,O,1,16,G,oe,ue)}function M(v,E,O,G,oe,ue){var he;for(he=3;0<he;--he)Ui(v,E+=4,1,O,16,G,oe,ue)}function le(v,E,O,G,oe,ue,he,me){Ti(v,E,oe,1,8,ue,he,me),Ti(O,G,oe,1,8,ue,he,me)}function je(v,E,O,G,oe,ue,he,me){Ti(v,E,1,oe,8,ue,he,me),Ti(O,G,1,oe,8,ue,he,me)}function Se(v,E,O,G,oe,ue,he,me){Ui(v,E+4*oe,oe,1,8,ue,he,me),Ui(O,G+4*oe,oe,1,8,ue,he,me)}function De(v,E,O,G,oe,ue,he,me){Ui(v,E+4,1,oe,8,ue,he,me),Ui(O,G+4,1,oe,8,ue,he,me)}function dt(){this.ba=new wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ct,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function yt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Zt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ns(){this.ua=0,this.Wa=new tt,this.vb=new tt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ae,this.yc=new te}function ws(){this.xb=this.a=0,this.l=new Xl,this.ca=new wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ns,this.ab=0,this.gc=c(4,Zt),this.Oc=0}function Us(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function tr(v,E,O,G,oe,ue,he){for(v=v==null?0:v[E+0],E=0;E<he;++E)oe[ue+E]=v+O[G+E]&255,v=oe[ue+E]}function Jr(v,E,O,G,oe,ue,he){var me;if(v==null)tr(null,null,O,G,oe,ue,he);else for(me=0;me<he;++me)oe[ue+me]=v[E+me]+O[G+me]&255}function fn(v,E,O,G,oe,ue,he){if(v==null)tr(null,null,O,G,oe,ue,he);else{var me,ge=v[E+0],we=ge,Te=ge;for(me=0;me<he;++me)we=Te+(ge=v[E+me])-we,Te=O[G+me]+(-256&we?0>we?0:255:we)&255,we=ge,oe[ue+me]=Te}}function mr(v,E,O,G){var oe=E.width,ue=E.o;if(e(v!=null&&E!=null),0>O||0>=G||O+G>ue)return null;if(!v.Cc){if(v.ga==null){var he;if(v.ga=new Us,(he=v.ga==null)||(he=E.width*E.o,e(v.Gb.length==0),v.Gb=i(he),v.Uc=0,v.Gb==null?he=0:(v.mb=v.Gb,v.nb=v.Uc,v.rc=null,he=1),he=!he),!he){he=v.ga;var me=v.Fa,ge=v.P,we=v.qc,Te=v.mb,$e=v.nb,ye=ge+1,Le=we-1,Me=he.l;if(e(me!=null&&Te!=null&&E!=null),Ll[0]=null,Ll[1]=tr,Ll[2]=Jr,Ll[3]=fn,he.ca=Te,he.tb=$e,he.c=E.width,he.i=E.height,e(0<he.c&&0<he.i),1>=we)E=0;else if(he.$a=3&me[ge+0],he.Z=me[ge+0]>>2&3,he.Lc=me[ge+0]>>4&3,ge=me[ge+0]>>6&3,0>he.$a||1<he.$a||4<=he.Z||1<he.Lc||ge)E=0;else if(Me.put=Et,Me.ac=jt,Me.bc=hs,Me.ma=he,Me.width=E.width,Me.height=E.height,Me.Da=E.Da,Me.v=E.v,Me.va=E.va,Me.j=E.j,Me.o=E.o,he.$a)e:{e(he.$a==1),E=oc();t:for(;;){if(E==null){E=0;break e}if(e(he!=null),he.mc=E,E.c=he.c,E.i=he.i,E.l=he.l,E.l.ma=he,E.l.width=he.c,E.l.height=he.i,E.a=0,re(E.m,me,ye,Le),!li(he.c,he.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&pr(E.s)?(he.ic=1,me=E.c*E.i,E.Ta=null,E.Ua=0,E.V=i(me),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(he.ic=0,E=Ni(E,he.c)),!E))break t;E=1;break e}he.mc=null,E=0}else E=Le>=he.c*he.i;he=!E}if(he)return null;v.ga.Lc!=1?v.Ga=0:G=ue-O}e(v.ga!=null),e(O+G<=ue);e:{if(E=(me=v.ga).c,ue=me.l.o,me.$a==0){if(ye=v.rc,Le=v.Vc,Me=v.Fa,ge=v.P+1+O*E,we=v.mb,Te=v.nb+O*E,e(ge<=v.P+v.qc),me.Z!=0)for(e(Ll[me.Z]!=null),he=0;he<G;++he)Ll[me.Z](ye,Le,Me,ge,we,Te,E),ye=we,Le=Te,Te+=E,ge+=E;else for(he=0;he<G;++he)n(we,Te,Me,ge,E),ye=we,Le=Te,Te+=E,ge+=E;v.rc=ye,v.Vc=Le}else{if(e(me.mc!=null),E=O+G,e((he=me.mc)!=null),e(E<=he.i),he.C>=E)E=1;else if(me.ic||cl(),me.ic){me=he.V,ye=he.Ba,Le=he.c;var lt=he.i,Ve=(Me=1,ge=he.$/Le,we=he.$%Le,Te=he.m,$e=he.s,he.$),it=Le*lt,ut=Le*E,Bt=$e.wc,xt=Ve<ut?Ls($e,we,ge):null;e(Ve<=it),e(E<=lt),e(pr($e));t:for(;;){for(;!Te.h&&Ve<ut;){if(we&Bt||(xt=Ls($e,we,ge)),e(xt!=null),pe(Te),256>(lt=qt(xt.G[0],xt.H[0],Te)))me[ye+Ve]=lt,++Ve,++we>=Le&&(we=0,++ge<=E&&!(ge%16)&&xa(he,ge));else{if(!(280>lt)){Me=0;break t}lt=Cs(lt-256,Te);var es,Kt=qt(xt.G[4],xt.H[4],Te);if(pe(Te),!(Ve>=(Kt=Tr(Le,Kt=Cs(Kt,Te)))&&it-Ve>=lt)){Me=0;break t}for(es=0;es<lt;++es)me[ye+Ve+es]=me[ye+Ve+es-Kt];for(Ve+=lt,we+=lt;we>=Le;)we-=Le,++ge<=E&&!(ge%16)&&xa(he,ge);Ve<ut&&we&Bt&&(xt=Ls($e,we,ge))}e(Te.h==K(Te))}xa(he,ge>E?E:ge);break t}!Me||Te.h&&Ve<it?(Me=0,he.a=Te.h?5:3):he.$=Ve,E=Me}else E=Va(he,he.V,he.Ba,he.c,he.i,E,Co);if(!E){G=0;break e}}O+G>=ue&&(v.Cc=1),G=1}if(!G)return null;if(v.Cc&&((G=v.ga)!=null&&(G.mc=null),v.ga=null,0<v.Ga))return alert("todo:WebPDequantizeLevels"),null}return v.nb+O*oe}function On(v,E,O,G,oe,ue){for(;0<oe--;){var he,me=v,ge=E+(O?1:0),we=v,Te=E+(O?0:3);for(he=0;he<G;++he){var $e=we[Te+4*he];$e!=255&&($e*=32897,me[ge+4*he+0]=me[ge+4*he+0]*$e>>23,me[ge+4*he+1]=me[ge+4*he+1]*$e>>23,me[ge+4*he+2]=me[ge+4*he+2]*$e>>23)}E+=ue}}function Nn(v,E,O,G,oe){for(;0<G--;){var ue;for(ue=0;ue<O;++ue){var he=v[E+2*ue+0],me=15&(we=v[E+2*ue+1]),ge=4369*me,we=(240&we|we>>4)*ge>>16;v[E+2*ue+0]=(240&he|he>>4)*ge>>16&240|(15&he|he<<4)*ge>>16>>4&15,v[E+2*ue+1]=240&we|me}E+=oe}}function la(v,E,O,G,oe,ue,he,me){var ge,we,Te=255;for(we=0;we<oe;++we){for(ge=0;ge<G;++ge){var $e=v[E+ge];ue[he+4*ge]=$e,Te&=$e}E+=O,he+=me}return Te!=255}function ro(v,E,O,G,oe){var ue;for(ue=0;ue<oe;++ue)O[G+ue]=v[E+ue]>>8}function cl(){Qo=On,di=Nn,$c=la,ui=ro}function no(v,E,O){$[v]=function(G,oe,ue,he,me,ge,we,Te,$e,ye,Le,Me,lt,Ve,it,ut,Bt){var xt,es=Bt-1>>1,Kt=me[ge+0]|we[Te+0]<<16,ks=$e[ye+0]|Le[Me+0]<<16;e(G!=null);var Wt=3*Kt+ks+131074>>2;for(E(G[oe+0],255&Wt,Wt>>16,lt,Ve),ue!=null&&(Wt=3*ks+Kt+131074>>2,E(ue[he+0],255&Wt,Wt>>16,it,ut)),xt=1;xt<=es;++xt){var Hs=me[ge+xt]|we[Te+xt]<<16,Lr=$e[ye+xt]|Le[Me+xt]<<16,Es=Kt+Hs+ks+Lr+524296,nt=Es+2*(Hs+ks)>>3;Wt=nt+Kt>>1,Kt=(Es=Es+2*(Kt+Lr)>>3)+Hs>>1,E(G[oe+2*xt-1],255&Wt,Wt>>16,lt,Ve+(2*xt-1)*O),E(G[oe+2*xt-0],255&Kt,Kt>>16,lt,Ve+(2*xt-0)*O),ue!=null&&(Wt=Es+ks>>1,Kt=nt+Lr>>1,E(ue[he+2*xt-1],255&Wt,Wt>>16,it,ut+(2*xt-1)*O),E(ue[he+2*xt+0],255&Kt,Kt>>16,it,ut+(2*xt+0)*O)),Kt=Hs,ks=Lr}1&Bt||(Wt=3*Kt+ks+131074>>2,E(G[oe+Bt-1],255&Wt,Wt>>16,lt,Ve+(Bt-1)*O),ue!=null&&(Wt=3*ks+Kt+131074>>2,E(ue[he+Bt-1],255&Wt,Wt>>16,it,ut+(Bt-1)*O)))}}function RA(){ua[Sd]=Nc,ua[ja]=co,ua[lo]=VA,ua[Ii]=Fd,ua[zA]=Ro,ua[oo]=Ml,ua[_o]=Ho,ua[KA]=co,ua[Ed]=Fd,ua[Gc]=Ro,ua[wc]=Ml}function Kc(v){return v&-16384?0>v?0:255:v>>Ld}function Fi(v,E){return Kc((19077*v>>8)+(26149*E>>8)-14234)}function Li(v,E,O){return Kc((19077*v>>8)-(6419*E>>8)-(13320*O>>8)+8708)}function Uo(v,E){return Kc((19077*v>>8)+(33050*E>>8)-17685)}function Ai(v,E,O,G,oe){G[oe+0]=Fi(v,O),G[oe+1]=Li(v,E,O),G[oe+2]=Uo(v,E)}function Wr(v,E,O,G,oe){G[oe+0]=Uo(v,E),G[oe+1]=Li(v,E,O),G[oe+2]=Fi(v,O)}function $s(v,E,O,G,oe){var ue=Li(v,E,O);E=ue<<3&224|Uo(v,E)>>3,G[oe+0]=248&Fi(v,O)|ue>>5,G[oe+1]=E}function Fo(v,E,O,G,oe){var ue=240&Uo(v,E)|15;G[oe+0]=240&Fi(v,O)|Li(v,E,O)>>4,G[oe+1]=ue}function Lo(v,E,O,G,oe){G[oe+0]=255,Ai(v,E,O,G,oe+1)}function Al(v,E,O,G,oe){Wr(v,E,O,G,oe),G[oe+3]=255}function Bn(v,E,O,G,oe){Ai(v,E,O,G,oe),G[oe+3]=255}function $n(v,E,O){$[v]=function(G,oe,ue,he,me,ge,we,Te,$e){for(var ye=Te+(-2&$e)*O;Te!=ye;)E(G[oe+0],ue[he+0],me[ge+0],we,Te),E(G[oe+1],ue[he+0],me[ge+0],we,Te+O),oe+=2,++he,++ge,Te+=2*O;1&$e&&E(G[oe+0],ue[he+0],me[ge+0],we,Te)}}function Vc(v,E,O){return O==0?v==0?E==0?6:5:E==0?4:0:O}function Mi(v,E,O,G,oe){switch(v>>>30){case 3:io(E,O,G,oe,0);break;case 2:ya(E,O,G,oe);break;case 1:ir(E,O,G,oe)}}function ar(v,E){var O,G,oe=E.M,ue=E.Nb,he=v.oc,me=v.pc+40,ge=v.oc,we=v.pc+584,Te=v.oc,$e=v.pc+600;for(O=0;16>O;++O)he[me+32*O-1]=129;for(O=0;8>O;++O)ge[we+32*O-1]=129,Te[$e+32*O-1]=129;for(0<oe?he[me-1-32]=ge[we-1-32]=Te[$e-1-32]=129:(a(he,me-32-1,127,21),a(ge,we-32-1,127,9),a(Te,$e-32-1,127,9)),G=0;G<v.za;++G){var ye=E.ya[E.aa+G];if(0<G){for(O=-1;16>O;++O)n(he,me+32*O-4,he,me+32*O+12,4);for(O=-1;8>O;++O)n(ge,we+32*O-4,ge,we+32*O+4,4),n(Te,$e+32*O-4,Te,$e+32*O+4,4)}var Le=v.Gd,Me=v.Hd+G,lt=ye.ad,Ve=ye.Hc;if(0<oe&&(n(he,me-32,Le[Me].y,0,16),n(ge,we-32,Le[Me].f,0,8),n(Te,$e-32,Le[Me].ea,0,8)),ye.Za){var it=he,ut=me-32+16;for(0<oe&&(G>=v.za-1?a(it,ut,Le[Me].y[15],4):n(it,ut,Le[Me+1].y,0,4)),O=0;4>O;O++)it[ut+128+O]=it[ut+256+O]=it[ut+384+O]=it[ut+0+O];for(O=0;16>O;++O,Ve<<=2)it=he,ut=me+mn[O],An[ye.Ob[O]](it,ut),Mi(Ve,lt,16*+O,it,ut)}else if(it=Vc(G,oe,ye.Ob[0]),_a[it](he,me),Ve!=0)for(O=0;16>O;++O,Ve<<=2)Mi(Ve,lt,16*+O,he,me+mn[O]);for(O=ye.Gc,it=Vc(G,oe,ye.Dd),Wa[it](ge,we),Wa[it](Te,$e),Ve=lt,it=ge,ut=we,255&(ye=0|O)&&(170&ye?Ma(Ve,256,it,ut):sr(Ve,256,it,ut)),ye=Te,Ve=$e,255&(O>>=8)&&(170&O?Ma(lt,320,ye,Ve):sr(lt,320,ye,Ve)),oe<v.Ub-1&&(n(Le[Me].y,0,he,me+480,16),n(Le[Me].f,0,ge,we+224,8),n(Le[Me].ea,0,Te,$e+224,8)),O=8*ue*v.B,Le=v.sa,Me=v.ta+16*G+16*ue*v.R,lt=v.qa,ye=v.ra+8*G+O,Ve=v.Ha,it=v.Ia+8*G+O,O=0;16>O;++O)n(Le,Me+O*v.R,he,me+32*O,16);for(O=0;8>O;++O)n(lt,ye+O*v.B,ge,we+32*O,8),n(Ve,it+O*v.B,Te,$e+32*O,8)}}function Qi(v,E,O,G,oe,ue,he,me,ge){var we=[0],Te=[0],$e=0,ye=ge!=null?ge.kd:0,Le=ge??new yt;if(v==null||12>O)return 7;Le.data=v,Le.w=E,Le.ha=O,E=[E],O=[O],Le.gb=[Le.gb];e:{var Me=E,lt=O,Ve=Le.gb;if(e(v!=null),e(lt!=null),e(Ve!=null),Ve[0]=0,12<=lt[0]&&!s(v,Me[0],"RIFF")){if(s(v,Me[0]+8,"WEBP")){Ve=3;break e}var it=gt(v,Me[0]+4);if(12>it||4294967286<it){Ve=3;break e}if(ye&&it>lt[0]-8){Ve=7;break e}Ve[0]=it,Me[0]+=12,lt[0]-=12}Ve=0}if(Ve!=0)return Ve;for(it=0<Le.gb[0],O=O[0];;){e:{var ut=v;lt=E,Ve=O;var Bt=we,xt=Te,es=Me=[0];if((Wt=$e=[$e])[0]=0,8>Ve[0])Ve=7;else{if(!s(ut,lt[0],"VP8X")){if(gt(ut,lt[0]+4)!=10){Ve=3;break e}if(18>Ve[0]){Ve=7;break e}var Kt=gt(ut,lt[0]+8),ks=1+ze(ut,lt[0]+12);if(2147483648<=ks*(ut=1+ze(ut,lt[0]+15))){Ve=3;break e}es!=null&&(es[0]=Kt),Bt!=null&&(Bt[0]=ks),xt!=null&&(xt[0]=ut),lt[0]+=18,Ve[0]-=18,Wt[0]=1}Ve=0}}if($e=$e[0],Me=Me[0],Ve!=0)return Ve;if(lt=!!(2&Me),!it&&$e)return 3;if(ue!=null&&(ue[0]=!!(16&Me)),he!=null&&(he[0]=lt),me!=null&&(me[0]=0),he=we[0],Me=Te[0],$e&&lt&&ge==null){Ve=0;break}if(4>O){Ve=7;break}if(it&&$e||!it&&!$e&&!s(v,E[0],"ALPH")){O=[O],Le.na=[Le.na],Le.P=[Le.P],Le.Sa=[Le.Sa];e:{Kt=v,Ve=E,it=O;var Wt=Le.gb;Bt=Le.na,xt=Le.P,es=Le.Sa,ks=22,e(Kt!=null),e(it!=null),ut=Ve[0];var Hs=it[0];for(e(Bt!=null),e(es!=null),Bt[0]=null,xt[0]=null,es[0]=0;;){if(Ve[0]=ut,it[0]=Hs,8>Hs){Ve=7;break e}var Lr=gt(Kt,ut+4);if(4294967286<Lr){Ve=3;break e}var Es=8+Lr+1&-2;if(ks+=Es,0<Wt&&ks>Wt){Ve=3;break e}if(!s(Kt,ut,"VP8 ")||!s(Kt,ut,"VP8L")){Ve=0;break e}if(Hs[0]<Es){Ve=7;break e}s(Kt,ut,"ALPH")||(Bt[0]=Kt,xt[0]=ut+8,es[0]=Lr),ut+=Es,Hs-=Es}}if(O=O[0],Le.na=Le.na[0],Le.P=Le.P[0],Le.Sa=Le.Sa[0],Ve!=0)break}O=[O],Le.Ja=[Le.Ja],Le.xa=[Le.xa];e:if(Wt=v,Ve=E,it=O,Bt=Le.gb[0],xt=Le.Ja,es=Le.xa,Kt=Ve[0],ut=!s(Wt,Kt,"VP8 "),ks=!s(Wt,Kt,"VP8L"),e(Wt!=null),e(it!=null),e(xt!=null),e(es!=null),8>it[0])Ve=7;else{if(ut||ks){if(Wt=gt(Wt,Kt+4),12<=Bt&&Wt>Bt-12){Ve=3;break e}if(ye&&Wt>it[0]-8){Ve=7;break e}xt[0]=Wt,Ve[0]+=8,it[0]-=8,es[0]=ks}else es[0]=5<=it[0]&&Wt[Kt+0]==47&&!(Wt[Kt+4]>>5),xt[0]=it[0];Ve=0}if(O=O[0],Le.Ja=Le.Ja[0],Le.xa=Le.xa[0],E=E[0],Ve!=0)break;if(4294967286<Le.Ja)return 3;if(me==null||lt||(me[0]=Le.xa?2:1),he=[he],Me=[Me],Le.xa){if(5>O){Ve=7;break}me=he,ye=Me,lt=ue,v==null||5>O?v=0:5<=O&&v[E+0]==47&&!(v[E+4]>>5)?(it=[0],Wt=[0],Bt=[0],re(xt=new P,v,E,O),Ys(xt,it,Wt,Bt)?(me!=null&&(me[0]=it[0]),ye!=null&&(ye[0]=Wt[0]),lt!=null&&(lt[0]=Bt[0]),v=1):v=0):v=0}else{if(10>O){Ve=7;break}me=Me,v==null||10>O||!So(v,E+3,O-3)?v=0:(ye=v[E+0]|v[E+1]<<8|v[E+2]<<16,lt=16383&(v[E+7]<<8|v[E+6]),v=16383&(v[E+9]<<8|v[E+8]),1&ye||3<(ye>>1&7)||!(ye>>4&1)||ye>>5>=Le.Ja||!lt||!v?v=0:(he&&(he[0]=lt),me&&(me[0]=v),v=1))}if(!v||(he=he[0],Me=Me[0],$e&&(we[0]!=he||Te[0]!=Me)))return 3;ge!=null&&(ge[0]=Le,ge.offset=E-ge.w,e(4294967286>E-ge.w),e(ge.offset==ge.ha-O));break}return Ve==0||Ve==7&&$e&&ge==null?(ue!=null&&(ue[0]|=Le.na!=null&&0<Le.na.length),G!=null&&(G[0]=he),oe!=null&&(oe[0]=Me),0):Ve}function Ur(v,E,O){var G=E.width,oe=E.height,ue=0,he=0,me=G,ge=oe;if(E.Da=v!=null&&0<v.Da,E.Da&&(me=v.cd,ge=v.bd,ue=v.v,he=v.j,11>O||(ue&=-2,he&=-2),0>ue||0>he||0>=me||0>=ge||ue+me>G||he+ge>oe))return 0;if(E.v=ue,E.j=he,E.va=ue+me,E.o=he+ge,E.U=me,E.T=ge,E.da=v!=null&&0<v.da,E.da){if(!Xe(me,ge,O=[v.ib],ue=[v.hb]))return 0;E.ib=O[0],E.hb=ue[0]}return E.ob=v!=null&&v.ob,E.Kb=v==null||!v.Sd,E.da&&(E.ob=E.ib<3*G/4&&E.hb<3*oe/4,E.Kb=0),1}function mc(v){if(v==null)return 2;if(11>v.S){var E=v.f.RGBA;E.fb+=(v.height-1)*E.A,E.A=-E.A}else E=v.f.kb,v=v.height,E.O+=(v-1)*E.fa,E.fa=-E.fa,E.N+=(v-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(v-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(v-1)*E.lb,E.lb=-E.lb);return 0}function Gn(v,E,O,G){if(G==null||0>=v||0>=E)return 2;if(O!=null){if(O.Da){var oe=O.cd,ue=O.bd,he=-2&O.v,me=-2&O.j;if(0>he||0>me||0>=oe||0>=ue||he+oe>v||me+ue>E)return 2;v=oe,E=ue}if(O.da){if(!Xe(v,E,oe=[O.ib],ue=[O.hb]))return 2;v=oe[0],E=ue[0]}}G.width=v,G.height=E;e:{var ge=G.width,we=G.height;if(v=G.S,0>=ge||0>=we||!(v>=Sd&&13>v))v=2;else{if(0>=G.Rd&&G.sd==null){he=ue=oe=E=0;var Te=(me=ge*Qd[v])*we;if(11>v||(ue=(we+1)/2*(E=(ge+1)/2),v==12&&(he=(oe=ge)*we)),(we=i(Te+2*ue+he))==null){v=1;break e}G.sd=we,11>v?((ge=G.f.RGBA).eb=we,ge.fb=0,ge.A=me,ge.size=Te):((ge=G.f.kb).y=we,ge.O=0,ge.fa=me,ge.Fd=Te,ge.f=we,ge.N=0+Te,ge.Ab=E,ge.Cd=ue,ge.ea=we,ge.W=0+Te+ue,ge.Db=E,ge.Ed=ue,v==12&&(ge.F=we,ge.J=0+Te+2*ue),ge.Tc=he,ge.lb=oe)}if(E=1,oe=G.S,ue=G.width,he=G.height,oe>=Sd&&13>oe)if(11>oe)v=G.f.RGBA,E&=(me=Math.abs(v.A))*(he-1)+ue<=v.size,E&=me>=ue*Qd[oe],E&=v.eb!=null;else{v=G.f.kb,me=(ue+1)/2,Te=(he+1)/2,ge=Math.abs(v.fa),we=Math.abs(v.Ab);var $e=Math.abs(v.Db),ye=Math.abs(v.lb),Le=ye*(he-1)+ue;E&=ge*(he-1)+ue<=v.Fd,E&=we*(Te-1)+me<=v.Cd,E=(E&=$e*(Te-1)+me<=v.Ed)&ge>=ue&we>=me&$e>=me,E&=v.y!=null,E&=v.f!=null,E&=v.ea!=null,oe==12&&(E&=ye>=ue,E&=Le<=v.Tc,E&=v.F!=null)}else E=0;v=E?0:2}}return v!=0||O!=null&&O.fd&&(v=mc(G)),v}var _i=64,Os=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ba=24,dl=32,ul=8,Sl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Nt("Predictor0","PredictorAdd0"),$.Predictor0=function(){return 4278190080},$.Predictor1=function(v){return v},$.Predictor2=function(v,E,O){return E[O+0]},$.Predictor3=function(v,E,O){return E[O+1]},$.Predictor4=function(v,E,O){return E[O-1]},$.Predictor5=function(v,E,O){return Qt(Qt(v,E[O+1]),E[O+0])},$.Predictor6=function(v,E,O){return Qt(v,E[O-1])},$.Predictor7=function(v,E,O){return Qt(v,E[O+0])},$.Predictor8=function(v,E,O){return Qt(E[O-1],E[O+0])},$.Predictor9=function(v,E,O){return Qt(E[O+0],E[O+1])},$.Predictor10=function(v,E,O){return Qt(Qt(v,E[O-1]),Qt(E[O+0],E[O+1]))},$.Predictor11=function(v,E,O){var G=E[O+0];return 0>=Ut(G>>24&255,v>>24&255,(E=E[O-1])>>24&255)+Ut(G>>16&255,v>>16&255,E>>16&255)+Ut(G>>8&255,v>>8&255,E>>8&255)+Ut(255&G,255&v,255&E)?G:v},$.Predictor12=function(v,E,O){var G=E[O+0];return(pt((v>>24&255)+(G>>24&255)-((E=E[O-1])>>24&255))<<24|pt((v>>16&255)+(G>>16&255)-(E>>16&255))<<16|pt((v>>8&255)+(G>>8&255)-(E>>8&255))<<8|pt((255&v)+(255&G)-(255&E)))>>>0},$.Predictor13=function(v,E,O){var G=E[O-1];return(rt((v=Qt(v,E[O+0]))>>24&255,G>>24&255)<<24|rt(v>>16&255,G>>16&255)<<16|rt(v>>8&255,G>>8&255)<<8|rt(255&v,255&G))>>>0};var ao=$.PredictorAdd0;$.PredictorAdd1=rs,Nt("Predictor2","PredictorAdd2"),Nt("Predictor3","PredictorAdd3"),Nt("Predictor4","PredictorAdd4"),Nt("Predictor5","PredictorAdd5"),Nt("Predictor6","PredictorAdd6"),Nt("Predictor7","PredictorAdd7"),Nt("Predictor8","PredictorAdd8"),Nt("Predictor9","PredictorAdd9"),Nt("Predictor10","PredictorAdd10"),Nt("Predictor11","PredictorAdd11"),Nt("Predictor12","PredictorAdd12"),Nt("Predictor13","PredictorAdd13");var gc=$.PredictorAdd2;Ge("ColorIndexInverseTransform","MapARGB","32b",function(v){return v>>8&255},function(v){return v}),Ge("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(v){return v},function(v){return v>>8&255});var cn,La=$.ColorIndexInverseTransform,oa=$.MapARGB,ca=$.VP8LColorIndexInverseTransformAlpha,Js=$.MapAlpha,va=$.VP8LPredictorsAdd=[];va.length=16,($.VP8LPredictors=[]).length=16,($.VP8LPredictorsAdd_C=[]).length=16,($.VP8LPredictors_C=[]).length=16;var xc,bc,hl,El,Tl,fl,pn,io,ya,Ma,ir,sr,Er,Ar,pl,ml,vc,Mo,Iu,Ou,Du,Ru,Nd,Bd,Qo,di,$c,ui,Ul=i(511),kd=i(2041),HA=i(225),yc=i(767),Cd=0,Fl=kd,PA=HA,wa=yc,Aa=Ul,Sd=0,ja=1,lo=2,Ii=3,zA=4,oo=5,_o=6,KA=7,Ed=8,Gc=9,wc=10,Oi=[2,3,7],qc=[3,3,11],jc=[280,256,256,256,40],Td=[0,1,1,1,0],Io=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Di=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ri=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Oo=8,Hi=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Qa=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],hi=null,Yh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Hu=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ud=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Jh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],da=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Fr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Gs=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],_a=[],An=[],Wa=[],Do=1,Pu=2,Ll=[],ua=[];no("UpsampleRgbLinePair",Ai,3),no("UpsampleBgrLinePair",Wr,3),no("UpsampleRgbaLinePair",Bn,4),no("UpsampleBgraLinePair",Al,4),no("UpsampleArgbLinePair",Lo,4),no("UpsampleRgba4444LinePair",Fo,2),no("UpsampleRgb565LinePair",$s,2);var Nc=$.UpsampleRgbLinePair,VA=$.UpsampleBgrLinePair,co=$.UpsampleRgbaLinePair,Fd=$.UpsampleBgraLinePair,Ro=$.UpsampleArgbLinePair,Ml=$.UpsampleRgba4444LinePair,Ho=$.UpsampleRgb565LinePair,Pi=16,Yc=1<<Pi-1,Ql=-227,Po=482,Ld=6,zo=0,ha=i(256),Md=i(256),Wh=i(256),r0=i(256),n0=i(Po-Ql),a0=i(Po-Ql);$n("YuvToRgbRow",Ai,3),$n("YuvToBgrRow",Wr,3),$n("YuvToRgbaRow",Bn,4),$n("YuvToBgraRow",Al,4),$n("YuvToArgbRow",Lo,4),$n("YuvToRgba4444Row",Fo,2),$n("YuvToRgb565Row",$s,2);var mn=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Jc=[0,2,8],$A=[8,7,6,4,4,2,2,2,1,1,1,1],Wc=1;this.WebPDecodeRGBA=function(v,E,O,G,oe){var ue=ja,he=new dt,me=new wt;he.ba=me,me.S=ue,me.width=[me.width],me.height=[me.height];var ge=me.width,we=me.height,Te=new st;if(Te==null||v==null)var $e=2;else e(Te!=null),$e=Qi(v,E,O,Te.width,Te.height,Te.Pd,Te.Qd,Te.format,null);if($e!=0?ge=0:(ge!=null&&(ge[0]=Te.width[0]),we!=null&&(we[0]=Te.height[0]),ge=1),ge){me.width=me.width[0],me.height=me.height[0],G!=null&&(G[0]=me.width),oe!=null&&(oe[0]=me.height);e:{if(G=new Xl,(oe=new yt).data=v,oe.w=E,oe.ha=O,oe.kd=1,E=[0],e(oe!=null),((v=Qi(oe.data,oe.w,oe.ha,null,null,null,E,null,oe))==0||v==7)&&E[0]&&(v=4),(E=v)==0){if(e(he!=null),G.data=oe.data,G.w=oe.w+oe.offset,G.ha=oe.ha-oe.offset,G.put=Et,G.ac=jt,G.bc=hs,G.ma=he,oe.xa){if((v=oc())==null){he=1;break e}if((function(ye,Le){var Me=[0],lt=[0],Ve=[0];t:for(;;){if(ye==null)return 0;if(Le==null)return ye.a=2,0;if(ye.l=Le,ye.a=0,re(ye.m,Le.data,Le.w,Le.ha),!Ys(ye.m,Me,lt,Ve)){ye.a=3;break t}if(ye.xb=Pu,Le.width=Me[0],Le.height=lt[0],!li(Me[0],lt[0],1,ye,null))break t;return 1}return e(ye.a!=0),0})(v,G)){if(G=(E=Gn(G.width,G.height,he.Oa,he.ba))==0){t:{G=v;s:for(;;){if(G==null){G=0;break t}if(e(G.s.yc!=null),e(G.s.Ya!=null),e(0<G.s.Wb),e((O=G.l)!=null),e((oe=O.ma)!=null),G.xb!=0){if(G.ca=oe.ba,G.tb=oe.tb,e(G.ca!=null),!Ur(oe.Oa,O,Ii)){G.a=2;break s}if(!Ni(G,O.width)||O.da)break s;if((O.da||Re(G.ca.S))&&cl(),11>G.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),G.ca.f.kb.F!=null&&cl()),G.Pb&&0<G.s.ua&&G.s.vb.X==null&&!ie(G.s.vb,G.s.Wa.Xa)){G.a=1;break s}G.xb=0}if(!Va(G,G.V,G.Ba,G.c,G.i,O.o,Hr))break s;oe.Dc=G.Ma,G=1;break t}e(G.a!=0),G=0}G=!G}G&&(E=v.a)}else E=v.a}else{if((v=new il)==null){he=1;break e}if(v.Fa=oe.na,v.P=oe.P,v.qc=oe.Sa,oi(v,G)){if((E=Gn(G.width,G.height,he.Oa,he.ba))==0){if(v.Aa=0,O=he.Oa,e((oe=v)!=null),O!=null){if(0<(ge=0>(ge=O.Md)?0:100<ge?255:255*ge/100)){for(we=Te=0;4>we;++we)12>($e=oe.pb[we]).lc&&($e.ia=ge*$A[0>$e.lc?0:$e.lc]>>3),Te|=$e.ia;Te&&(alert("todo:VP8InitRandom"),oe.ia=1)}oe.Ga=O.Id,100<oe.Ga?oe.Ga=100:0>oe.Ga&&(oe.Ga=0)}(function(ye,Le){if(ye==null)return 0;if(Le==null)return cr(ye,2,"NULL VP8Io parameter in VP8Decode().");if(!ye.cb&&!oi(ye,Le))return 0;if(e(ye.cb),Le.ac==null||Le.ac(Le)){Le.ob&&(ye.L=0);var Me=Jc[ye.L];if(ye.L==2?(ye.yb=0,ye.zb=0):(ye.yb=Le.v-Me>>4,ye.zb=Le.j-Me>>4,0>ye.yb&&(ye.yb=0),0>ye.zb&&(ye.zb=0)),ye.Va=Le.o+15+Me>>4,ye.Hb=Le.va+15+Me>>4,ye.Hb>ye.za&&(ye.Hb=ye.za),ye.Va>ye.Ub&&(ye.Va=ye.Ub),0<ye.L){var lt=ye.ed;for(Me=0;4>Me;++Me){var Ve;if(ye.Qa.Cb){var it=ye.Qa.Lb[Me];ye.Qa.Fb||(it+=lt.Tb)}else it=lt.Tb;for(Ve=0;1>=Ve;++Ve){var ut=ye.gd[Me][Ve],Bt=it;if(lt.Pc&&(Bt+=lt.vd[0],Ve&&(Bt+=lt.od[0])),0<(Bt=0>Bt?0:63<Bt?63:Bt)){var xt=Bt;0<lt.wb&&(xt=4<lt.wb?xt>>2:xt>>1)>9-lt.wb&&(xt=9-lt.wb),1>xt&&(xt=1),ut.dd=xt,ut.tc=2*Bt+xt,ut.ld=40<=Bt?2:15<=Bt?1:0}else ut.tc=0;ut.La=Ve}}}Me=0}else cr(ye,6,"Frame setup failed"),Me=ye.a;if(Me=Me==0){if(Me){ye.$c=0,0<ye.Aa||(ye.Ic=Wc);t:{Me=ye.Ic,lt=4*(xt=ye.za);var es=32*xt,Kt=xt+1,ks=0<ye.L?xt*(0<ye.Aa?2:1):0,Wt=(ye.Aa==2?2:1)*xt;if((ut=lt+832+(Ve=3*(16*Me+Jc[ye.L])/2*es)+(it=ye.Fa!=null&&0<ye.Fa.length?ye.Kc.c*ye.Kc.i:0))!=ut)Me=0;else{if(ut>ye.Vb){if(ye.Vb=0,ye.Ec=i(ut),ye.Fc=0,ye.Ec==null){Me=cr(ye,1,"no memory during frame initialization.");break t}ye.Vb=ut}ut=ye.Ec,Bt=ye.Fc,ye.Ac=ut,ye.Bc=Bt,Bt+=lt,ye.Gd=c(es,TA),ye.Hd=0,ye.rb=c(Kt+1,Ga),ye.sb=1,ye.wa=ks?c(ks,$a):null,ye.Y=0,ye.D.Nb=0,ye.D.wa=ye.wa,ye.D.Y=ye.Y,0<ye.Aa&&(ye.D.Y+=xt),e(!0),ye.oc=ut,ye.pc=Bt,Bt+=832,ye.ya=c(Wt,Wl),ye.aa=0,ye.D.ya=ye.ya,ye.D.aa=ye.aa,ye.Aa==2&&(ye.D.aa+=xt),ye.R=16*xt,ye.B=8*xt,xt=(es=Jc[ye.L])*ye.R,es=es/2*ye.B,ye.sa=ut,ye.ta=Bt+xt,ye.qa=ye.sa,ye.ra=ye.ta+16*Me*ye.R+es,ye.Ha=ye.qa,ye.Ia=ye.ra+8*Me*ye.B+es,ye.$c=0,Bt+=Ve,ye.mb=it?ut:null,ye.nb=it?Bt:null,e(Bt+it<=ye.Fc+ye.Vb),UA(ye),a(ye.Ac,ye.Bc,0,lt),Me=1}}if(Me){if(Le.ka=0,Le.y=ye.sa,Le.O=ye.ta,Le.f=ye.qa,Le.N=ye.ra,Le.ea=ye.Ha,Le.Vd=ye.Ia,Le.fa=ye.R,Le.Rc=ye.B,Le.F=null,Le.J=0,!Cd){for(Me=-255;255>=Me;++Me)Ul[255+Me]=0>Me?-Me:Me;for(Me=-1020;1020>=Me;++Me)kd[1020+Me]=-128>Me?-128:127<Me?127:Me;for(Me=-112;112>=Me;++Me)HA[112+Me]=-16>Me?-16:15<Me?15:Me;for(Me=-255;510>=Me;++Me)yc[255+Me]=0>Me?0:255<Me?255:Me;Cd=1}pn=qa,io=FA,Ma=Fa,ir=LA,sr=MA,ya=bd,Er=DA,Ar=so,pl=le,ml=je,vc=ol,Mo=M,Iu=Se,Ou=De,Du=eo,Ru=to,Nd=pc,Bd=OA,An[0]=wd,An[1]=QA,An[2]=yd,An[3]=IA,An[4]=ci,An[5]=Ya,An[6]=ia,An[7]=Eo,An[8]=To,An[9]=Ja,_a[0]=ll,_a[1]=_A,_a[2]=Hc,_a[3]=Pc,_a[4]=Zl,_a[5]=uc,_a[6]=ki,Wa[0]=hc,Wa[1]=vd,Wa[2]=kl,Wa[3]=jd,Wa[4]=In,Wa[5]=fc,Wa[6]=Cl,Me=1}else Me=0}Me&&(Me=(function(Hs,Lr){for(Hs.M=0;Hs.M<Hs.Va;++Hs.M){var Es,nt=Hs.Jc[Hs.M&Hs.Xb],_t=Hs.m,Xr=Hs;for(Es=0;Es<Xr.za;++Es){var ms=_t,vs=Xr,gr=vs.Ac,kn=vs.Bc+4*Es,gn=vs.zc,xr=vs.ya[vs.aa+Es];if(vs.Qa.Bb?xr.$b=Ne(ms,vs.Pa.jb[0])?2+Ne(ms,vs.Pa.jb[2]):Ne(ms,vs.Pa.jb[1]):xr.$b=0,vs.kc&&(xr.Ad=Ne(ms,vs.Bd)),xr.Za=!Ne(ms,145)+0,xr.Za){var Cn=xr.Ob,Na=0;for(vs=0;4>vs;++vs){var Sn,Ss=gn[0+vs];for(Sn=0;4>Sn;++Sn){Ss=da[gr[kn+Sn]][Ss];for(var Ws=Ud[Ne(ms,Ss[0])];0<Ws;)Ws=Ud[2*Ws+Ne(ms,Ss[Ws])];Ss=-Ws,gr[kn+Sn]=Ss}n(Cn,Na,gr,kn,4),Na+=4,gn[0+vs]=Ss}}else Ss=Ne(ms,156)?Ne(ms,128)?1:3:Ne(ms,163)?2:0,xr.Ob[0]=Ss,a(gr,kn,Ss,4),a(gn,0,Ss,4);xr.Dd=Ne(ms,142)?Ne(ms,114)?Ne(ms,183)?1:3:2:0}if(Xr.m.Ka)return cr(Hs,7,"Premature end-of-partition0 encountered.");for(;Hs.ja<Hs.za;++Hs.ja){if(Xr=nt,ms=(_t=Hs).rb[_t.sb-1],gr=_t.rb[_t.sb+_t.ja],Es=_t.ya[_t.aa+_t.ja],kn=_t.kc?Es.Ad:0)ms.la=gr.la=0,Es.Za||(ms.Na=gr.Na=0),Es.Hc=0,Es.Gc=0,Es.ia=0;else{var Mr,dr;if(ms=gr,gr=Xr,kn=_t.Pa.Xc,gn=_t.ya[_t.aa+_t.ja],xr=_t.pb[gn.$b],vs=gn.ad,Cn=0,Na=_t.rb[_t.sb-1],Ss=Sn=0,a(vs,Cn,0,384),gn.Za)var En=0,Zr=kn[3];else{Ws=i(16);var Xs=ms.Na+Na.Na;if(Xs=hi(gr,kn[1],Xs,xr.Eb,0,Ws,0),ms.Na=Na.Na=(0<Xs)+0,1<Xs)pn(Ws,0,vs,Cn);else{var xn=Ws[0]+3>>3;for(Ws=0;256>Ws;Ws+=16)vs[Cn+Ws]=xn}En=1,Zr=kn[0]}var br=15&ms.la,Tn=15&Na.la;for(Ws=0;4>Ws;++Ws){var Un=1&Tn;for(xn=dr=0;4>xn;++xn)br=br>>1|(Un=(Xs=hi(gr,Zr,Xs=Un+(1&br),xr.Sc,En,vs,Cn))>En)<<7,dr=dr<<2|(3<Xs?3:1<Xs?2:vs[Cn+0]!=0),Cn+=16;br>>=4,Tn=Tn>>1|Un<<7,Sn=(Sn<<8|dr)>>>0}for(Zr=br,En=Tn>>4,Mr=0;4>Mr;Mr+=2){for(dr=0,br=ms.la>>4+Mr,Tn=Na.la>>4+Mr,Ws=0;2>Ws;++Ws){for(Un=1&Tn,xn=0;2>xn;++xn)Xs=Un+(1&br),br=br>>1|(Un=0<(Xs=hi(gr,kn[2],Xs,xr.Qc,0,vs,Cn)))<<3,dr=dr<<2|(3<Xs?3:1<Xs?2:vs[Cn+0]!=0),Cn+=16;br>>=2,Tn=Tn>>1|Un<<5}Ss|=dr<<4*Mr,Zr|=br<<4<<Mr,En|=(240&Tn)<<Mr}ms.la=Zr,Na.la=En,gn.Hc=Sn,gn.Gc=Ss,gn.ia=43690&Ss?0:xr.ia,kn=!(Sn|Ss)}if(0<_t.L&&(_t.wa[_t.Y+_t.ja]=_t.gd[Es.$b][Es.Za],_t.wa[_t.Y+_t.ja].La|=!kn),Xr.Ka)return cr(Hs,7,"Premature end-of-file encountered.")}if(UA(Hs),_t=Lr,Xr=1,Es=(nt=Hs).D,ms=0<nt.L&&nt.M>=nt.zb&&nt.M<=nt.Va,nt.Aa==0)t:{if(Es.M=nt.M,Es.uc=ms,ar(nt,Es),Xr=1,Es=(dr=nt.D).Nb,ms=(Ss=Jc[nt.L])*nt.R,gr=Ss/2*nt.B,Ws=16*Es*nt.R,xn=8*Es*nt.B,kn=nt.sa,gn=nt.ta-ms+Ws,xr=nt.qa,vs=nt.ra-gr+xn,Cn=nt.Ha,Na=nt.Ia-gr+xn,Tn=(br=dr.M)==0,Sn=br>=nt.Va-1,nt.Aa==2&&ar(nt,dr),dr.uc)for(Un=(Xs=nt).D.M,e(Xs.D.uc),dr=Xs.yb;dr<Xs.Hb;++dr){En=dr,Zr=Un;var Br=(rr=(en=Xs).D).Nb;Mr=en.R;var rr=rr.wa[rr.Y+En],Ba=en.sa,dn=en.ta+16*Br*Mr+16*En,ds=rr.dd,fs=rr.tc;if(fs!=0)if(e(3<=fs),en.L==1)0<En&&Ru(Ba,dn,Mr,fs+4),rr.La&&Bd(Ba,dn,Mr,fs),0<Zr&&Du(Ba,dn,Mr,fs+4),rr.La&&Nd(Ba,dn,Mr,fs);else{var lr=en.B,Xa=en.qa,fi=en.ra+8*Br*lr+8*En,Ia=en.Ha,en=en.Ia+8*Br*lr+8*En;Br=rr.ld,0<En&&(Ar(Ba,dn,Mr,fs+4,ds,Br),ml(Xa,fi,Ia,en,lr,fs+4,ds,Br)),rr.La&&(Mo(Ba,dn,Mr,fs,ds,Br),Ou(Xa,fi,Ia,en,lr,fs,ds,Br)),0<Zr&&(Er(Ba,dn,Mr,fs+4,ds,Br),pl(Xa,fi,Ia,en,lr,fs+4,ds,Br)),rr.La&&(vc(Ba,dn,Mr,fs,ds,Br),Iu(Xa,fi,Ia,en,lr,fs,ds,Br))}}if(nt.ia&&alert("todo:DitherRow"),_t.put!=null){if(dr=16*br,br=16*(br+1),Tn?(_t.y=nt.sa,_t.O=nt.ta+Ws,_t.f=nt.qa,_t.N=nt.ra+xn,_t.ea=nt.Ha,_t.W=nt.Ia+xn):(dr-=Ss,_t.y=kn,_t.O=gn,_t.f=xr,_t.N=vs,_t.ea=Cn,_t.W=Na),Sn||(br-=Ss),br>_t.o&&(br=_t.o),_t.F=null,_t.J=null,nt.Fa!=null&&0<nt.Fa.length&&dr<br&&(_t.J=mr(nt,_t,dr,br-dr),_t.F=nt.mb,_t.F==null&&_t.F.length==0)){Xr=cr(nt,3,"Could not decode alpha data.");break t}dr<_t.j&&(Ss=_t.j-dr,dr=_t.j,e(!(1&Ss)),_t.O+=nt.R*Ss,_t.N+=nt.B*(Ss>>1),_t.W+=nt.B*(Ss>>1),_t.F!=null&&(_t.J+=_t.width*Ss)),dr<br&&(_t.O+=_t.v,_t.N+=_t.v>>1,_t.W+=_t.v>>1,_t.F!=null&&(_t.J+=_t.v),_t.ka=dr-_t.j,_t.U=_t.va-_t.v,_t.T=br-dr,Xr=_t.put(_t))}Es+1!=nt.Ic||Sn||(n(nt.sa,nt.ta-ms,kn,gn+16*nt.R,ms),n(nt.qa,nt.ra-gr,xr,vs+8*nt.B,gr),n(nt.Ha,nt.Ia-gr,Cn,Na+8*nt.B,gr))}if(!Xr)return cr(Hs,6,"Output aborted.")}return 1})(ye,Le)),Le.bc!=null&&Le.bc(Le),Me&=1}return Me?(ye.cb=0,Me):0})(v,G)||(E=v.a)}}else E=v.a}E==0&&he.Oa!=null&&he.Oa.fd&&(E=mc(he.ba))}he=E}ue=he!=0?null:11>ue?me.f.RGBA.eb:me.f.kb.y}else ue=null;return ue};var Qd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f($,ce){for(var Q="",q=0;q<4;q++)Q+=String.fromCharCode($[ce++]);return Q}function u($,ce){return $[ce+0]|$[ce+1]<<8}function p($,ce){return($[ce+0]|$[ce+1]<<8|$[ce+2]<<16)>>>0}function x($,ce){return($[ce+0]|$[ce+1]<<8|$[ce+2]<<16|$[ce+3]<<24)>>>0}new d;var m=[0],j=[0],w=[],S=new d,C=t,F=(function($,ce){var Q={},q=0,te=!1,X=0,Ae=0;if(Q.frames=[],!(function(R,P){for(var V=0;V<4;V++)if(R[P+V]!="RIFF".charCodeAt(V))return!0;return!1})($,ce)){for(x($,ce+=4),ce+=8;ce<$.length;){var W=f($,ce),se=x($,ce+=4);ce+=4;var Z=se+(1&se);switch(W){case"VP8 ":case"VP8L":Q.frames[q]===void 0&&(Q.frames[q]={}),(ae=Q.frames[q]).src_off=te?Ae:ce-8,ae.src_size=X+se+8,q++,te&&(te=!1,X=0,Ae=0);break;case"VP8X":(ae=Q.header={}).feature_flags=$[ce];var re=ce+4;ae.canvas_width=1+p($,re),re+=3,ae.canvas_height=1+p($,re),re+=3;break;case"ALPH":te=!0,X=Z+8,Ae=ce-8;break;case"ANIM":(ae=Q.header).bgcolor=x($,ce),re=ce+4,ae.loop_count=u($,re),re+=2;break;case"ANMF":var ve,ae;(ae=Q.frames[q]={}).offset_x=2*p($,ce),ce+=3,ae.offset_y=2*p($,ce),ce+=3,ae.width=1+p($,ce),ce+=3,ae.height=1+p($,ce),ce+=3,ae.duration=p($,ce),ce+=3,ve=$[ce++],ae.dispose=1&ve,ae.blend=ve>>1&1}W!="ANMF"&&(ce+=Z)}return Q}})(C,0);F.response=C,F.rgbaoutput=!0,F.dataurl=!1;var U=F.header?F.header:null,_=F.frames?F.frames:null;if(U){U.loop_counter=U.loop_count,m=[U.canvas_height],j=[U.canvas_width];for(var z=0;z<_.length&&_[z].blend!=0;z++);}var I=_[0],H=S.WebPDecodeRGBA(C,I.src_off,I.src_size,j,m);I.rgba=H,I.imgwidth=j[0],I.imgheight=m[0];for(var ee=0;ee<j[0]*m[0]*4;ee++)w[ee]=H[ee];return this.width=j,this.height=m,this.data=w,this}(function(t){var e,s,n,a,i,c,A,d,f,u=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new d,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new c,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new c,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,s=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,c=this.internal.Point,A=this.internal.Rectangle,d=this.internal.Matrix,f=new u}]);var p=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var P=R;Object.defineProperty(this,"pdf",{get:function(){return P}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(ie){V=!!ie}});var K=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return K},set:function(ie){K=!!ie}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(ie){isNaN(ie)||(ne=ie)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(ie){isNaN(ie)||(pe=ie)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(ie){var Be;typeof ie=="number"?Be=[ie,ie,ie,ie]:((Be=new Array(4))[0]=ie[0],Be[1]=ie.length>=2?ie[1]:Be[0],Be[2]=ie.length>=3?ie[2]:Be[0],Be[3]=ie.length>=4?ie[3]:Be[1]),f.margin=Be}});var Ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ce},set:function(ie){Ce=ie}});var Ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ue},set:function(ie){Ue=ie}});var Ne=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ne},set:function(ie){Ne=ie}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(ie){ie instanceof u&&(f=ie)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(ie){f.path=ie}});var Ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ie},set:function(ie){Ie=ie}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ie){var Be;Be=x(ie),this.ctx.fillStyle=Be.style,this.ctx.isFillTransparent=Be.a===0,this.ctx.fillOpacity=Be.a,this.pdf.setFillColor(Be.r,Be.g,Be.b,{a:Be.a}),this.pdf.setTextColor(Be.r,Be.g,Be.b,{a:Be.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ie){var Be=x(ie);this.ctx.strokeStyle=Be.style,this.ctx.isStrokeTransparent=Be.a===0,this.ctx.strokeOpacity=Be.a,Be.a===0?this.pdf.setDrawColor(255,255,255):(Be.a,this.pdf.setDrawColor(Be.r,Be.g,Be.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ie){["butt","round","square"].indexOf(ie)!==-1&&(this.ctx.lineCap=ie,this.pdf.setLineCap(ie))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ie){isNaN(ie)||(this.ctx.lineWidth=ie,this.pdf.setLineWidth(ie))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ie){["bevel","round","miter"].indexOf(ie)!==-1&&(this.ctx.lineJoin=ie,this.pdf.setLineJoin(ie))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ie){isNaN(ie)||(this.ctx.miterLimit=ie,this.pdf.setMiterLimit(ie))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ie){this.ctx.textBaseline=ie}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ie){["right","end","center","left","start"].indexOf(ie)!==-1&&(this.ctx.textAlign=ie)}});var Pe=null,ze=null,gt=null;Object.defineProperty(this,"fontFaces",{get:function(){return gt},set:function(ie){Pe=null,ze=null,gt=ie}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ie){var Be;if(this.ctx.font=ie,(Be=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ie))!==null){var tt=Be[1];Be[2];var Xe=Be[3],et=Be[4];Be[5];var Tt=Be[6],Nt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(et)[2];et=Math.floor(Nt==="px"?parseFloat(et)*this.pdf.internal.scaleFactor:Nt==="em"?parseFloat(et)*this.pdf.getFontSize():parseFloat(et)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(et);var Mt=(function(Ge){var ft,ht,vt=[],kt=Ge.trim();if(kt==="")return P1;if(kt in vj)return[vj[kt]];for(;kt!=="";){switch(ht=null,ft=(kt=wj(kt)).charAt(0)){case'"':case"'":ht=M_(kt.substring(1),ft);break;default:ht=Q_(kt)}if(ht===null||(vt.push(ht[0]),(kt=wj(ht[1]))!==""&&kt.charAt(0)!==","))return P1;kt=kt.replace(/^,/,"")}return vt})(Tt);if(this.fontFaces){var Qt=(function(Ge,ft){var ht=Ge.getFontList(),vt=JSON.stringify(ht);if(Pe===null||ze!==vt){var kt=(function(Vt){var zt=[];return Object.keys(Vt).forEach(function(Bs){Vt[Bs].forEach(function(Re){var We=null;switch(Re){case"bold":We={family:Bs,weight:"bold"};break;case"italic":We={family:Bs,style:"italic"};break;case"bolditalic":We={family:Bs,weight:"bold",style:"italic"};break;case"":case"normal":We={family:Bs}}We!==null&&(We.ref={name:Bs,style:Re},zt.push(We))})}),zt})(ht);Pe=(function(Vt){for(var zt={},Bs=0;Bs<Vt.length;++Bs){var Re=H1(Vt[Bs]),We=Re.family,$t=Re.stretch,wt=Re.style,st=Re.weight;zt[We]=zt[We]||{},zt[We][$t]=zt[We][$t]||{},zt[We][$t][wt]=zt[We][$t][wt]||{},zt[We][$t][wt][st]=Re}return zt})(kt.concat(ft)),ze=vt}return Pe})(this.pdf,this.fontFaces),pt=Mt.map(function(Ge){return{family:Ge,stretch:"normal",weight:Xe,style:tt}}),rt=(function(Ge,ft,ht){for(var vt=(ht=ht||{}).defaultFontFamily||"times",kt=Object.assign({},L_,ht.genericFontFamilies||{}),Vt=null,zt=null,Bs=0;Bs<ft.length;++Bs)if(kt[(Vt=H1(ft[Bs])).family]&&(Vt.family=kt[Vt.family]),Ge.hasOwnProperty(Vt.family)){zt=Ge[Vt.family];break}if(!(zt=zt||Ge[vt]))throw new Error("Could not find a font-family for the rule '"+yj(Vt)+"' and default family '"+vt+"'.");if(zt=(function(Re,We){if(We[Re])return We[Re];var $t=Yv[Re],wt=$t<=Yv.normal?-1:1,st=bj(We,nk,$t,wt);if(!st)throw new Error("Could not find a matching font-stretch value for "+Re);return st})(Vt.stretch,zt),zt=(function(Re,We){if(We[Re])return We[Re];for(var $t=rk[Re],wt=0;wt<$t.length;++wt)if(We[$t[wt]])return We[$t[wt]];throw new Error("Could not find a matching font-style for "+Re)})(Vt.style,zt),!(zt=(function(Re,We){if(We[Re])return We[Re];if(Re===400&&We[500])return We[500];if(Re===500&&We[400])return We[400];var $t=F_[Re],wt=bj(We,ak,$t,Re<400?-1:1);if(!wt)throw new Error("Could not find a matching font-weight for value "+Re);return wt})(Vt.weight,zt)))throw new Error("Failed to resolve a font for the rule '"+yj(Vt)+"'.");return zt})(Qt,pt);this.pdf.setFont(rt.ref.name,rt.ref.style)}else{var Ut="";(Xe==="bold"||parseInt(Xe,10)>=700||tt==="bold")&&(Ut="bold"),tt==="italic"&&(Ut+="italic"),Ut.length===0&&(Ut="normal");for(var rs="",Ot={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Dt=0;Dt<Mt.length;Dt++){if(this.pdf.internal.getFont(Mt[Dt],Ut,{noFallback:!0,disableWarning:!0})!==void 0){rs=Mt[Dt];break}if(Ut==="bolditalic"&&this.pdf.internal.getFont(Mt[Dt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)rs=Mt[Dt],Ut="bold";else if(this.pdf.internal.getFont(Mt[Dt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){rs=Mt[Dt],Ut="normal";break}}if(rs===""){for(var Oe=0;Oe<Mt.length;Oe++)if(Ot[Mt[Oe]]){rs=Ot[Mt[Oe]];break}}rs=rs===""?"Times":rs,this.pdf.setFont(rs,Ut)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ie){this.ctx.globalCompositeOperation=ie}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ie){this.ctx.globalAlpha=ie}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ie){this.ctx.lineDashOffset=ie,ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ie){this.ctx.lineDash=ie,ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ie){this.ctx.ignoreClearRect=!!ie}})};p.prototype.setLineDash=function(R){this.lineDash=R},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){_.call(this,"fill",!1)},p.prototype.stroke=function(){_.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(R,P){if(isNaN(R)||isNaN(P))throw nn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new c(R,P));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new c(R,P)},p.prototype.closePath=function(){var R=new c(0,0),P=0;for(P=this.path.length-1;P!==-1;P--)if(this.path[P].type==="begin"&&Rr(this.path[P+1])==="object"&&typeof this.path[P+1].x=="number"){R=new c(this.path[P+1].x,this.path[P+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(R.x,R.y)},p.prototype.lineTo=function(R,P){if(isNaN(R)||isNaN(P))throw nn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new c(R,P));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new c(V.x,V.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),_.call(this,null,!0)},p.prototype.quadraticCurveTo=function(R,P,V,K){if(isNaN(V)||isNaN(K)||isNaN(R)||isNaN(P))throw nn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new c(V,K)),pe=this.ctx.transform.applyToPoint(new c(R,P));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new c(ne.x,ne.y)},p.prototype.bezierCurveTo=function(R,P,V,K,ne,pe){if(isNaN(ne)||isNaN(pe)||isNaN(R)||isNaN(P)||isNaN(V)||isNaN(K))throw nn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ce=this.ctx.transform.applyToPoint(new c(ne,pe)),Ue=this.ctx.transform.applyToPoint(new c(R,P)),Ne=this.ctx.transform.applyToPoint(new c(V,K));this.path.push({type:"bct",x1:Ue.x,y1:Ue.y,x2:Ne.x,y2:Ne.y,x:Ce.x,y:Ce.y}),this.ctx.lastPoint=new c(Ce.x,Ce.y)},p.prototype.arc=function(R,P,V,K,ne,pe){if(isNaN(R)||isNaN(P)||isNaN(V)||isNaN(K)||isNaN(ne))throw nn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var Ce=this.ctx.transform.applyToPoint(new c(R,P));R=Ce.x,P=Ce.y;var Ue=this.ctx.transform.applyToPoint(new c(0,V)),Ne=this.ctx.transform.applyToPoint(new c(0,0));V=Math.sqrt(Math.pow(Ue.x-Ne.x,2)+Math.pow(Ue.y-Ne.y,2))}Math.abs(ne-K)>=2*Math.PI&&(K=0,ne=2*Math.PI),this.path.push({type:"arc",x:R,y:P,radius:V,startAngle:K,endAngle:ne,counterclockwise:pe})},p.prototype.arcTo=function(R,P,V,K,ne){throw new Error("arcTo not implemented.")},p.prototype.rect=function(R,P,V,K){if(isNaN(R)||isNaN(P)||isNaN(V)||isNaN(K))throw nn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,P),this.lineTo(R+V,P),this.lineTo(R+V,P+K),this.lineTo(R,P+K),this.lineTo(R,P),this.lineTo(R+V,P),this.lineTo(R,P)},p.prototype.fillRect=function(R,P,V,K){if(isNaN(R)||isNaN(P)||isNaN(V)||isNaN(K))throw nn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,P,V,K),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},p.prototype.strokeRect=function(R,P,V,K){if(isNaN(R)||isNaN(P)||isNaN(V)||isNaN(K))throw nn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(R,P,V,K),this.stroke())},p.prototype.clearRect=function(R,P,V,K){if(isNaN(R)||isNaN(P)||isNaN(V)||isNaN(K))throw nn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,P,V,K))},p.prototype.save=function(R){R=typeof R!="boolean"||R;for(var P=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(P),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var K=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=K}},p.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var P=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(P),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(R){var P,V,K,ne;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))P=0,V=0,K=0,ne=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(pe!==null)P=parseInt(pe[1]),V=parseInt(pe[2]),K=parseInt(pe[3]),ne=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)P=parseInt(pe[1]),V=parseInt(pe[2]),K=parseInt(pe[3]),ne=parseFloat(pe[4]);else{if(ne=1,typeof R=="string"&&R.charAt(0)!=="#"){var Ce=new JB(R);R=Ce.ok?Ce.toHex():"#000000"}R.length===4?(P=R.substring(1,2),P+=P,V=R.substring(2,3),V+=V,K=R.substring(3,4),K+=K):(P=R.substring(1,3),V=R.substring(3,5),K=R.substring(5,7)),P=parseInt(P,16),V=parseInt(V,16),K=parseInt(K,16)}}return{r:P,g:V,b:K,a:ne,style:R}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(R,P,V,K){if(isNaN(P)||isNaN(V)||typeof R!="string")throw nn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(K=isNaN(K)?void 0:K,!m.call(this)){var ne=Z(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;q.call(this,{text:R,x:P,y:V,scale:pe,angle:ne,align:this.textAlign,maxWidth:K})}},p.prototype.strokeText=function(R,P,V,K){if(isNaN(P)||isNaN(V)||typeof R!="string")throw nn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){K=isNaN(K)?void 0:K;var ne=Z(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;q.call(this,{text:R,x:P,y:V,scale:pe,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:K})}},p.prototype.measureText=function(R){if(typeof R!="string")throw nn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var P=this.pdf,V=this.pdf.internal.scaleFactor,K=P.internal.getFontSize(),ne=P.getStringUnitWidth(R)*K/P.internal.scaleFactor;return new function(pe){var Ce=(pe=pe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ce}}),this}({width:ne*=Math.round(96*V/72*1e4)/1e4})},p.prototype.scale=function(R,P){if(isNaN(R)||isNaN(P))throw nn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new d(R,0,0,P,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},p.prototype.rotate=function(R){if(isNaN(R))throw nn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var P=new d(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(P)},p.prototype.translate=function(R,P){if(isNaN(R)||isNaN(P))throw nn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new d(1,0,0,1,R,P);this.ctx.transform=this.ctx.transform.multiply(V)},p.prototype.transform=function(R,P,V,K,ne,pe){if(isNaN(R)||isNaN(P)||isNaN(V)||isNaN(K)||isNaN(ne)||isNaN(pe))throw nn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ce=new d(R,P,V,K,ne,pe);this.ctx.transform=this.ctx.transform.multiply(Ce)},p.prototype.setTransform=function(R,P,V,K,ne,pe){R=isNaN(R)?1:R,P=isNaN(P)?0:P,V=isNaN(V)?0:V,K=isNaN(K)?1:K,ne=isNaN(ne)?0:ne,pe=isNaN(pe)?0:pe,this.ctx.transform=new d(R,P,V,K,ne,pe)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(R,P,V,K,ne,pe,Ce,Ue,Ne){var Ie=this.pdf.getImageProperties(R),Pe=1,ze=1,gt=1,ie=1;K!==void 0&&Ue!==void 0&&(gt=Ue/K,ie=Ne/ne,Pe=Ie.width/K*Ue/K,ze=Ie.height/ne*Ne/ne),pe===void 0&&(pe=P,Ce=V,P=0,V=0),K!==void 0&&Ue===void 0&&(Ue=K,Ne=ne),K===void 0&&Ue===void 0&&(Ue=Ie.width,Ne=Ie.height);var Be=this.ctx.transform.decompose(),tt=Z(Be.rotate.shx),Xe=new d,et=(Xe=(Xe=(Xe=Xe.multiply(Be.translate)).multiply(Be.skew)).multiply(Be.scale)).applyToRectangle(new A(pe-P*gt,Ce-V*ie,K*Pe,ne*ze));if(this.autoPaging){for(var Tt,Nt=S.call(this,et),Mt=[],Qt=0;Qt<Nt.length;Qt+=1)Mt.indexOf(Nt[Qt])===-1&&Mt.push(Nt[Qt]);U(Mt);for(var pt=Mt[0],rt=Mt[Mt.length-1],Ut=pt;Ut<rt+1;Ut++){this.pdf.setPage(Ut);var rs=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ot=Ut===1?this.posY+this.margin[0]:this.margin[0],Dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Oe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ge=Ut===1?0:Dt+(Ut-2)*Oe;if(this.ctx.clip_path.length!==0){var ft=this.path;Tt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(Tt,this.posX+this.margin[3],-Ge+Ot+this.ctx.prevPageLastElemOffset),z.call(this,"fill",!0),this.path=ft}var ht=JSON.parse(JSON.stringify(et));ht=F([ht],this.posX+this.margin[3],-Ge+Ot+this.ctx.prevPageLastElemOffset)[0];var vt=(Ut>pt||Ut<rt)&&w.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rs,Oe,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",ht.x,ht.y,ht.w,ht.h,null,null,tt),vt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(R,"JPEG",et.x,et.y,et.w,et.h,null,null,tt)};var S=function(R,P,V){var K=[];P=P||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":K.push(Math.floor((R.y+ne)/V)+1);break;case"arc":K.push(Math.floor((R.y+ne-R.radius)/V)+1),K.push(Math.floor((R.y+ne+R.radius)/V)+1);break;case"qct":var pe=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);K.push(Math.floor((pe.y+ne)/V)+1),K.push(Math.floor((pe.y+pe.h+ne)/V)+1);break;case"bct":var Ce=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);K.push(Math.floor((Ce.y+ne)/V)+1),K.push(Math.floor((Ce.y+Ce.h+ne)/V)+1);break;case"rect":K.push(Math.floor((R.y+ne)/V)+1),K.push(Math.floor((R.y+R.h+ne)/V)+1)}for(var Ue=0;Ue<K.length;Ue+=1)for(;this.pdf.internal.getNumberOfPages()<K[Ue];)C.call(this);return K},C=function(){var R=this.fillStyle,P=this.strokeStyle,V=this.font,K=this.lineCap,ne=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=P,this.font=V,this.lineCap=K,this.lineWidth=ne,this.lineJoin=pe},F=function(R,P,V){for(var K=0;K<R.length;K++)switch(R[K].type){case"bct":R[K].x2+=P,R[K].y2+=V;case"qct":R[K].x1+=P,R[K].y1+=V;default:R[K].x+=P,R[K].y+=V}return R},U=function(R){return R.sort(function(P,V){return P-V})},_=function(R,P){var V=this.fillStyle,K=this.strokeStyle,ne=this.lineCap,pe=this.lineWidth,Ce=Math.abs(pe*this.ctx.transform.scaleX),Ue=this.lineJoin;if(this.autoPaging){for(var Ne,Ie,Pe=JSON.parse(JSON.stringify(this.path)),ze=JSON.parse(JSON.stringify(this.path)),gt=[],ie=0;ie<ze.length;ie++)if(ze[ie].x!==void 0)for(var Be=S.call(this,ze[ie]),tt=0;tt<Be.length;tt+=1)gt.indexOf(Be[tt])===-1&&gt.push(Be[tt]);for(var Xe=0;Xe<gt.length;Xe++)for(;this.pdf.internal.getNumberOfPages()<gt[Xe];)C.call(this);U(gt);for(var et=gt[0],Tt=gt[gt.length-1],Nt=et;Nt<Tt+1;Nt++){this.pdf.setPage(Nt),this.fillStyle=V,this.strokeStyle=K,this.lineCap=ne,this.lineWidth=Ce,this.lineJoin=Ue;var Mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qt=Nt===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ut=Nt===1?0:pt+(Nt-2)*rt;if(this.ctx.clip_path.length!==0){var rs=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(Ne,this.posX+this.margin[3],-Ut+Qt+this.ctx.prevPageLastElemOffset),z.call(this,R,!0),this.path=rs}if(Ie=JSON.parse(JSON.stringify(Pe)),this.path=F(Ie,this.posX+this.margin[3],-Ut+Qt+this.ctx.prevPageLastElemOffset),P===!1||Nt===0){var Ot=(Nt>et||Nt<Tt)&&w.call(this);Ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mt,rt,null).clip().discardPath()),z.call(this,R,P),Ot&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}this.path=Pe}else this.lineWidth=Ce,z.call(this,R,P),this.lineWidth=pe},z=function(R,P){if((R!=="stroke"||P||!j.call(this))&&(R==="stroke"||P||!m.call(this))){for(var V,K,ne=[],pe=this.path,Ce=0;Ce<pe.length;Ce++){var Ue=pe[Ce];switch(Ue.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:Ue,deltas:[],abs:[]});break;case"lt":var Ne=ne.length;if(pe[Ce-1]&&!isNaN(pe[Ce-1].x)&&(V=[Ue.x-pe[Ce-1].x,Ue.y-pe[Ce-1].y],Ne>0)){for(;Ne>=0;Ne--)if(ne[Ne-1].close!==!0&&ne[Ne-1].begin!==!0){ne[Ne-1].deltas.push(V),ne[Ne-1].abs.push(Ue);break}}break;case"bct":V=[Ue.x1-pe[Ce-1].x,Ue.y1-pe[Ce-1].y,Ue.x2-pe[Ce-1].x,Ue.y2-pe[Ce-1].y,Ue.x-pe[Ce-1].x,Ue.y-pe[Ce-1].y],ne[ne.length-1].deltas.push(V);break;case"qct":var Ie=pe[Ce-1].x+2/3*(Ue.x1-pe[Ce-1].x),Pe=pe[Ce-1].y+2/3*(Ue.y1-pe[Ce-1].y),ze=Ue.x+2/3*(Ue.x1-Ue.x),gt=Ue.y+2/3*(Ue.y1-Ue.y),ie=Ue.x,Be=Ue.y;V=[Ie-pe[Ce-1].x,Pe-pe[Ce-1].y,ze-pe[Ce-1].x,gt-pe[Ce-1].y,ie-pe[Ce-1].x,Be-pe[Ce-1].y],ne[ne.length-1].deltas.push(V);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(Ue)}}K=P?null:R==="stroke"?"stroke":"fill";for(var tt=!1,Xe=0;Xe<ne.length;Xe++)if(ne[Xe].arc)for(var et=ne[Xe].abs,Tt=0;Tt<et.length;Tt++){var Nt=et[Tt];Nt.type==="arc"?ee.call(this,Nt.x,Nt.y,Nt.radius,Nt.startAngle,Nt.endAngle,Nt.counterclockwise,void 0,P,!tt):te.call(this,Nt.x,Nt.y),tt=!0}else if(ne[Xe].close===!0)this.pdf.internal.out("h"),tt=!1;else if(ne[Xe].begin!==!0){var Mt=ne[Xe].start.x,Qt=ne[Xe].start.y;X.call(this,ne[Xe].deltas,Mt,Qt),tt=!0}K&&$.call(this,K),P&&ce.call(this)}},I=function(R){var P=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=P*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-V;case"top":return R+P-V;case"hanging":return R+P-2*V;case"middle":return R+P/2-V;default:return R}},H=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(P,V){this.colorStops.push([P,V])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ee=function(R,P,V,K,ne,pe,Ce,Ue,Ne){for(var Ie=W.call(this,V,K,ne,pe),Pe=0;Pe<Ie.length;Pe++){var ze=Ie[Pe];Pe===0&&(Ne?Q.call(this,ze.x1+R,ze.y1+P):te.call(this,ze.x1+R,ze.y1+P)),Ae.call(this,R,P,ze.x2,ze.y2,ze.x3,ze.y3,ze.x4,ze.y4)}Ue?ce.call(this):$.call(this,Ce)},$=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ce=function(){this.pdf.clip(),this.pdf.discardPath()},Q=function(R,P){this.pdf.internal.out(s(R)+" "+n(P)+" m")},q=function(R){var P;switch(R.align){case"right":case"end":P="right";break;case"center":P="center";break;default:P="left"}var V,K,ne,pe=this.pdf.getTextDimensions(R.text),Ce=I.call(this,R.y),Ue=H.call(this,Ce)-pe.h,Ne=this.ctx.transform.applyToPoint(new c(R.x,Ce));if(this.autoPaging){var Ie=this.ctx.transform.decompose(),Pe=new d;Pe=(Pe=(Pe=Pe.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale);for(var ze=this.ctx.transform.applyToRectangle(new A(R.x,Ce,pe.w,pe.h)),gt=Pe.applyToRectangle(new A(R.x,Ue,pe.w,pe.h)),ie=S.call(this,gt),Be=[],tt=0;tt<ie.length;tt+=1)Be.indexOf(ie[tt])===-1&&Be.push(ie[tt]);U(Be);for(var Xe=Be[0],et=Be[Be.length-1],Tt=Xe;Tt<et+1;Tt++){this.pdf.setPage(Tt);var Nt=Tt===1?this.posY+this.margin[0]:this.margin[0],Mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[2],pt=Qt-this.margin[0],rt=this.pdf.internal.pageSize.width-this.margin[1],Ut=rt-this.margin[3],rs=Tt===1?0:Mt+(Tt-2)*pt;if(this.ctx.clip_path.length!==0){var Ot=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(V,this.posX+this.margin[3],-1*rs+Nt),z.call(this,"fill",!0),this.path=Ot}var Dt=F([JSON.parse(JSON.stringify(gt))],this.posX+this.margin[3],-rs+Nt+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(K=this.pdf.internal.getFontSize(),this.pdf.setFontSize(K*R.scale),ne=this.lineWidth,this.lineWidth=ne*R.scale);var Oe=this.autoPaging!=="text";if(Oe||Dt.y+Dt.h<=Qt){if(Oe||Dt.y>=Nt&&Dt.x<=rt){var Ge=Oe?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||rt-Dt.x)[0],ft=F([JSON.parse(JSON.stringify(ze))],this.posX+this.margin[3],-rs+Nt+this.ctx.prevPageLastElemOffset)[0],ht=Oe&&(Tt>Xe||Tt<et)&&w.call(this);ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ut,pt,null).clip().discardPath()),this.pdf.text(Ge,ft.x,ft.y,{angle:R.angle,align:P,renderingMode:R.renderingMode}),ht&&this.pdf.restoreGraphicsState()}}else Dt.y<Qt&&(this.ctx.prevPageLastElemOffset+=Qt-Dt.y);R.scale>=.01&&(this.pdf.setFontSize(K),this.lineWidth=ne)}}else R.scale>=.01&&(K=this.pdf.internal.getFontSize(),this.pdf.setFontSize(K*R.scale),ne=this.lineWidth,this.lineWidth=ne*R.scale),this.pdf.text(R.text,Ne.x+this.posX,Ne.y+this.posY,{angle:R.angle,align:P,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(K),this.lineWidth=ne)},te=function(R,P,V,K){V=V||0,K=K||0,this.pdf.internal.out(s(R+V)+" "+n(P+K)+" l")},X=function(R,P,V){return this.pdf.lines(R,P,V,null,null)},Ae=function(R,P,V,K,ne,pe,Ce,Ue){this.pdf.internal.out([e(a(V+R)),e(i(K+P)),e(a(ne+R)),e(i(pe+P)),e(a(Ce+R)),e(i(Ue+P)),"c"].join(" "))},W=function(R,P,V,K){for(var ne=2*Math.PI,pe=Math.PI/2;P>V;)P-=ne;var Ce=Math.abs(V-P);Ce<ne&&K&&(Ce=ne-Ce);for(var Ue=[],Ne=K?-1:1,Ie=P;Ce>1e-5;){var Pe=Ie+Ne*Math.min(Ce,pe);Ue.push(se.call(this,R,Ie,Pe)),Ce-=Math.abs(Pe-Ie),Ie=Pe}return Ue},se=function(R,P,V){var K=(V-P)/2,ne=R*Math.cos(K),pe=R*Math.sin(K),Ce=ne,Ue=-pe,Ne=Ce*Ce+Ue*Ue,Ie=Ne+Ce*ne+Ue*pe,Pe=4/3*(Math.sqrt(2*Ne*Ie)-Ie)/(Ce*pe-Ue*ne),ze=Ce-Pe*Ue,gt=Ue+Pe*Ce,ie=ze,Be=-gt,tt=K+P,Xe=Math.cos(tt),et=Math.sin(tt);return{x1:R*Math.cos(P),y1:R*Math.sin(P),x2:ze*Xe-gt*et,y2:ze*et+gt*Xe,x3:ie*Xe-Be*et,y3:ie*et+Be*Xe,x4:R*Math.cos(V),y4:R*Math.sin(V)}},Z=function(R){return 180*R/Math.PI},re=function(R,P,V,K,ne,pe){var Ce=R+.5*(V-R),Ue=P+.5*(K-P),Ne=ne+.5*(V-ne),Ie=pe+.5*(K-pe),Pe=Math.min(R,ne,Ce,Ne),ze=Math.max(R,ne,Ce,Ne),gt=Math.min(P,pe,Ue,Ie),ie=Math.max(P,pe,Ue,Ie);return new A(Pe,gt,ze-Pe,ie-gt)},ve=function(R,P,V,K,ne,pe,Ce,Ue){var Ne,Ie,Pe,ze,gt,ie,Be,tt,Xe,et,Tt,Nt,Mt,Qt,pt=V-R,rt=K-P,Ut=ne-V,rs=pe-K,Ot=Ce-ne,Dt=Ue-pe;for(Ie=0;Ie<41;Ie++)Xe=(Be=(Pe=R+(Ne=Ie/40)*pt)+Ne*((gt=V+Ne*Ut)-Pe))+Ne*(gt+Ne*(ne+Ne*Ot-gt)-Be),et=(tt=(ze=P+Ne*rt)+Ne*((ie=K+Ne*rs)-ze))+Ne*(ie+Ne*(pe+Ne*Dt-ie)-tt),Ie==0?(Tt=Xe,Nt=et,Mt=Xe,Qt=et):(Tt=Math.min(Tt,Xe),Nt=Math.min(Nt,et),Mt=Math.max(Mt,Xe),Qt=Math.max(Qt,et));return new A(Math.round(Tt),Math.round(Nt),Math.round(Mt-Tt),Math.round(Qt-Nt))},ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,P,V=(R=this.ctx.lineDash,P=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:P}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(us.API),(function(t){var e=function(c){var A,d,f,u,p,x,m,j,w,S;for(d=[],f=0,u=(c+=A="\0\0\0\0".slice(c.length%4||4)).length;u>f;f+=4)(p=(c.charCodeAt(f)<<24)+(c.charCodeAt(f+1)<<16)+(c.charCodeAt(f+2)<<8)+c.charCodeAt(f+3))!==0?(x=(p=((p=((p=((p=(p-(S=p%85))/85)-(w=p%85))/85)-(j=p%85))/85)-(m=p%85))/85)%85,d.push(x+33,m+33,j+33,w+33,S+33)):d.push(122);return(function(C,F){for(var U=F;U>0;U--)C.pop()})(d,A.length),String.fromCharCode.apply(String,d)+"~>"},s=function(c){var A,d,f,u,p,x=String,m="length",j=255,w="charCodeAt",S="slice",C="replace";for(c[S](-2),c=c[S](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),f=[],u=0,p=(c+=A="uuuuu"[S](c[m]%5||5))[m];p>u;u+=5)d=52200625*(c[w](u)-33)+614125*(c[w](u+1)-33)+7225*(c[w](u+2)-33)+85*(c[w](u+3)-33)+(c[w](u+4)-33),f.push(j&d>>24,j&d>>16,j&d>>8,j&d);return(function(F,U){for(var _=U;_>0;_--)F.pop()})(f,A[m]),x.fromCharCode.apply(x,f)},n=function(c){return c.split("").map(function(A){return("0"+A.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(c){var A=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),A.test(c)===!1)return"";for(var d="",f=0;f<c.length;f+=2)d+=String.fromCharCode("0x"+(c[f]+c[f+1]));return d},i=function(c){for(var A=new Uint8Array(c.length),d=c.length;d--;)A[d]=c.charCodeAt(d);return(A=Pv(A)).reduce(function(f,u){return f+String.fromCharCode(u)},"")};t.processDataByFilters=function(c,A){var d=0,f=c||"",u=[];for(typeof(A=A||[])=="string"&&(A=[A]),d=0;d<A.length;d+=1)switch(A[d]){case"ASCII85Decode":case"/ASCII85Decode":f=s(f),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=e(f),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=a(f),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=n(f),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=i(f),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+A[d]+'" is not implemented')}return{data:f,reverseChain:u.reverse().join(" ")}}})(us.API),(function(t){t.loadFile=function(e,s,n){return(function(a,i,c){i=i!==!1,c=typeof c=="function"?c:function(){};var A=void 0;try{A=(function(d,f,u){var p=new XMLHttpRequest,x=0,m=function(j){var w=j.length,S=[],C=String.fromCharCode;for(x=0;x<w;x+=1)S.push(C(255&j.charCodeAt(x)));return S.join("")};if(p.open("GET",d,!f),p.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(p.onload=function(){p.status===200?u(m(this.responseText)):u(void 0)}),p.send(null),f&&p.status===200)return m(p.responseText)})(a,i,c)}catch{}return A})(e,s,n)},t.loadImageFile=t.loadFile})(us.API),(function(t){function e(){return(Ts.html2canvas?Promise.resolve(Ts.html2canvas):j1(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(A){return Promise.reject(new Error("Could not load html2canvas: "+A))}).then(function(A){return A.default?A.default:A})}function s(){return(Ts.DOMPurify?Promise.resolve(Ts.DOMPurify):j1(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(A){return Promise.reject(new Error("Could not load dompurify: "+A))}).then(function(A){return A.default?A.default:A})}var n=function(A){var d=Rr(A);return d==="undefined"?"undefined":d==="string"||A instanceof String?"string":d==="number"||A instanceof Number?"number":d==="function"||A instanceof Function?"function":A&&A.constructor===Array?"array":A&&A.nodeType===1?"element":d==="object"?"object":"unknown"},a=function(A,d){var f=document.createElement(A);for(var u in d.className&&(f.className=d.className),d.innerHTML&&d.dompurify&&(f.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)f.style[u]=d.style[u];return f},i=function A(d,f){for(var u=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),p=d.firstChild;p;p=p.nextSibling)f!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||u.appendChild(A(p,f));return d.nodeType===1&&(d.nodeName==="CANVAS"?(u.width=d.width,u.height=d.height,u.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(u.value=d.value),u.addEventListener("load",function(){u.scrollTop=d.scrollTop,u.scrollLeft=d.scrollLeft},!0)),u},c=function A(d){var f=Object.assign(A.convert(Promise.resolve()),JSON.parse(JSON.stringify(A.template))),u=A.convert(Promise.resolve(),f);return(u=u.setProgress(1,A,1,[A])).set(d)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(A,d){return A.__proto__=d||c.prototype,A},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(A,d){return this.then(function(){switch(d=d||(function(f){switch(n(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(A),d){case"string":return this.then(s).then(function(f){return this.set({src:a("div",{innerHTML:A,dompurify:f})})});case"element":return this.set({src:A});case"canvas":return this.set({canvas:A});case"img":return this.set({img:A});default:return this.error("Unknown source type.")}})},c.prototype.to=function(A){switch(A){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var A={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(A.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:A}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var A=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(A).then(e).then(function(d){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,d(this.prop.container,f)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var A=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(A).then(e).then(function(d){var f=this.opt.jsPDF,u=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var j=u[m],w=j.src.find(function(S){return S.format==="truetype"});w&&f.addFont(w.url,j.ref.name,j.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,f.context2d.save(!0),d(this.prop.container,x)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var A=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=A})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(A,d,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(A,d):this.outputPdf(A,d)},c.prototype.outputPdf=function(A,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(A,d)})},c.prototype.outputImg=function(A){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(A){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+A+'" is not supported.'}})},c.prototype.save=function(A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(A?{filename:A}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(A){if(n(A)!=="object")return this;var d=Object.keys(A||{}).map(function(f){if(f in c.template.prop)return function(){this.prop[f]=A[f]};switch(f){case"margin":return this.setMargin.bind(this,A.margin);case"jsPDF":return function(){return this.opt.jsPDF=A.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,A.pageSize);default:return function(){this.opt[f]=A[f]}}},this);return this.then(function(){return this.thenList(d)})},c.prototype.get=function(A,d){return this.then(function(){var f=A in c.template.prop?this.prop[A]:this.opt[A];return d?d(f):f})},c.prototype.setMargin=function(A){return this.then(function(){switch(n(A)){case"number":A=[A,A,A,A];case"array":if(A.length===2&&(A=[A[0],A[1],A[0],A[1]]),A.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=A}).then(this.setPageSize)},c.prototype.setPageSize=function(A){function d(f,u){return Math.floor(f*u/72*96)}return this.then(function(){(A=A||us.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(A.inner={width:A.width-this.opt.margin[1]-this.opt.margin[3],height:A.height-this.opt.margin[0]-this.opt.margin[2]},A.inner.px={width:d(A.inner.width,A.k),height:d(A.inner.height,A.k)},A.inner.ratio=A.inner.height/A.inner.width),this.prop.pageSize=A})},c.prototype.setProgress=function(A,d,f,u){return A!=null&&(this.progress.val=A),d!=null&&(this.progress.state=d),f!=null&&(this.progress.n=f),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(A,d,f,u){return this.setProgress(A?this.progress.val+A:null,d||null,f?this.progress.n+f:null,u?this.progress.stack.concat(u):null)},c.prototype.then=function(A,d){var f=this;return this.thenCore(A,d,function(u,p){return f.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(x){return f.updateProgress(null,u),x}).then(u,p).then(function(x){return f.updateProgress(1),x})})},c.prototype.thenCore=function(A,d,f){f=f||Promise.prototype.then;var u=this;A&&(A=A.bind(u)),d&&(d=d.bind(u));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:c.convert(Object.assign({},u),Promise.prototype),x=f.call(p,A,d);return c.convert(x,u.__proto__)},c.prototype.thenExternal=function(A,d){return Promise.prototype.then.call(this,A,d)},c.prototype.thenList=function(A){var d=this;return A.forEach(function(f){d=d.thenCore(f)}),d},c.prototype.catch=function(A){A&&(A=A.bind(this));var d=Promise.prototype.catch.call(this,A);return c.convert(d,this)},c.prototype.catchExternal=function(A){return Promise.prototype.catch.call(this,A)},c.prototype.error=function(A){return this.then(function(){throw new Error(A)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,us.getPageSize=function(A,d,f){if(Rr(A)==="object"){var u=A;A=u.orientation,d=u.unit||d,f=u.format||f}d=d||"mm",f=f||"a4",A=(""+(A||"P")).toLowerCase();var p,x=(""+f).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+d}var j,w=0,S=0;if(m.hasOwnProperty(x))w=m[x][1]/p,S=m[x][0]/p;else try{w=f[1],S=f[0]}catch{throw new Error("Invalid format: "+f)}if(A==="p"||A==="portrait")A="p",S>w&&(j=S,S=w,w=j);else{if(A!=="l"&&A!=="landscape")throw"Invalid orientation: "+A;A="l",w>S&&(j=S,S=w,w=j)}return{width:S,height:w,unit:d,k:p,orientation:A}},t.html=function(A,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(H1):null;var f=new c(d);return d.worker?f:f.from(A).doCallback()}})(us.API),us.API.addJS=function(t){return Nj=t,this.internal.events.subscribe("postPutResources",function(){ag=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ag+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),jj=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Nj+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ag!==void 0&&jj!==void 0&&this.internal.out("/Names <</JavaScript "+ag+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var s=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=s.outline.render().split(/\r\n/),i=0;i<a.length;i++){var c=a[i],A=n.exec(c);if(A!=null){var d=A[1];s.internal.newObjectDeferredBegin(d,!1)}s.internal.write(c)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,u=[];for(i=0;i<f;i++){var p=s.internal.newObject();u.push(p);var x=s.internal.getPageInfo(i+1);s.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var m=s.internal.newObject();for(s.internal.write("<< /Names [ "),i=0;i<u.length;i++)s.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");s.internal.write(" ] >>","endobj"),e=s.internal.newObject(),s.internal.write("<< /Dests "+m+" 0 R"),s.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var s=this;s.outline.root.children.length>0&&(s.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&s.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var s=this;s.outline={createNamedDestinations:!1,root:{children:[]}},s.outline.add=function(n,a,i){var c={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(c),c},s.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=s,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},s.outline.genIds_r=function(n){n.id=s.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},s.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},s.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var c=n.children[i];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var A=this.count=this.count_r({count:0},c);if(A>0&&this.line("/Count "+A),c.options&&c.options.pageNumber){var d=s.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var f=0;f<n.children.length;f++)this.renderItems(n.children[f])},s.outline.line=function(n){this.ctx.val+=n+`\r
`},s.outline.makeRef=function(n){return n.id+" 0 R"},s.outline.makeString=function(n){return"("+s.internal.pdfEscape(n)+")"},s.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},s.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},s.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])})(us.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(s,n,a,i,c,A){var d,f=this.decode.DCT_DECODE,u=null;if(typeof s=="string"||this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s)){switch(s=c||s,s=this.__addimage__.isArrayBuffer(s)?new Uint8Array(s):s,d=(function(p){for(var x,m=256*p.charCodeAt(4)+p.charCodeAt(5),j=p.length,w={width:0,height:0,numcomponents:1},S=4;S<j;S+=2){if(S+=m,e.indexOf(p.charCodeAt(S+1))!==-1){x=256*p.charCodeAt(S+5)+p.charCodeAt(S+6),w={width:256*p.charCodeAt(S+7)+p.charCodeAt(S+8),height:x,numcomponents:p.charCodeAt(S+9)};break}m=256*p.charCodeAt(S+2)+p.charCodeAt(S+3)}return w})(s=this.__addimage__.isArrayBufferView(s)?this.__addimage__.arrayBufferToBinaryString(s):s),d.numcomponents){case 1:A=this.color_spaces.DEVICE_GRAY;break;case 4:A=this.color_spaces.DEVICE_CMYK;break;case 3:A=this.color_spaces.DEVICE_RGB}u={data:s,width:d.width,height:d.height,colorSpace:A,bitsPerComponent:8,filter:f,index:n,alias:a}}return u}})(us.API),us.API.processPNG=function(t,e,s,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,i=g_(t,{checkCrc:!0}),c=i.width,A=i.height,d=i.channels,f=i.palette,u=i.depth;a=f&&d===1?(function(ee){for(var $=ee.width,ce=ee.height,Q=ee.data,q=ee.palette,te=ee.depth,X=!1,Ae=[],W=[],se=void 0,Z=!1,re=0,ve=0;ve<q.length;ve++){var ae=S5(q[ve],4),R=ae[0],P=ae[1],V=ae[2],K=ae[3];Ae.push(R,P,V),K!=null&&(K===0?(re++,W.length<1&&W.push(ve)):K<255&&(Z=!0))}if(Z||re>1){X=!0,W=void 0;var ne=$*ce;se=new Uint8Array(ne);for(var pe=new DataView(Q.buffer),Ce=0;Ce<ne;Ce++){var Ue=z1(pe,Ce,te),Ne=S5(q[Ue],4)[3];se[Ce]=Ne}}else re===0&&(W=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:X?8:void 0,colorBytes:Q,alphaBytes:se,needSMask:X,palette:Ae,mask:W}})(i):d===2||d===4?(function(ee){for(var $=ee.data,ce=ee.width,Q=ee.height,q=ee.channels,te=ee.depth,X=q===2?"DeviceGray":"DeviceRGB",Ae=q-1,W=ce*Q,se=Ae,Z=W*se,re=1*W,ve=Math.ceil(Z*te/8),ae=Math.ceil(re*te/8),R=new Uint8Array(ve),P=new Uint8Array(ae),V=new DataView($.buffer),K=new DataView(R.buffer),ne=new DataView(P.buffer),pe=!1,Ce=0;Ce<W;Ce++){for(var Ue=Ce*q,Ne=0;Ne<se;Ne++)Lj(K,z1(V,Ue+Ne,te),Ce*se+Ne,te);var Ie=z1(V,Ue+se,te);Ie<(1<<te)-1&&(pe=!0),Lj(ne,Ie,1*Ce,te)}return{colorSpace:X,colorsPerPixel:Ae,sMaskBitsPerComponent:pe?te:void 0,colorBytes:R,alphaBytes:P,needSMask:pe}})(i):(function(ee){var $=ee.data,ce=ee.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ce,colorsPerPixel:ce==="DeviceGray"?1:3,colorBytes:$ instanceof Uint16Array?(function(Q){for(var q=Q.length,te=new Uint8Array(2*q),X=new DataView(te.buffer,te.byteOffset,te.byteLength),Ae=0;Ae<q;Ae++)X.setUint16(2*Ae,Q[Ae],!1);return te})($):$,needSMask:!1}})(i);var p,x,m,j=a,w=j.colorSpace,S=j.colorsPerPixel,C=j.sMaskBitsPerComponent,F=j.colorBytes,U=j.alphaBytes,_=j.needSMask,z=j.palette,I=j.mask,H=null;return n!==us.API.image_compression.NONE&&typeof Pv=="function"?(H=(function(ee){var $;switch(ee){case us.API.image_compression.FAST:$=11;break;case us.API.image_compression.MEDIUM:$=13;break;case us.API.image_compression.SLOW:$=14;break;default:$=12}return $})(n),p=this.decode.FLATE_DECODE,x="/Predictor ".concat(H," /Colors ").concat(S," /BitsPerComponent ").concat(u," /Columns ").concat(c),t=Sj(F,Math.ceil(c*S*u/8),S,u,n),_&&(m=Sj(U,Math.ceil(c*C/8),1,C,n))):(p=void 0,x=void 0,t=F,_&&(m=U)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:s,data:t,index:e,filter:p,decodeParameters:x,transparency:I,palette:z,sMask:m,predictor:H,width:c,height:A,bitsPerComponent:u,sMaskBitsPerComponent:C,colorSpace:w}}},(function(t){t.processGIF89A=function(e,s,n,a){var i=new D_(e),c=i.width,A=i.height,d=[];i.decodeAndBlitFrameRGBA(0,d);var f={data:d,width:c,height:A},u=new K1(100).encode(f,100);return t.processJPEG.call(this,u,s,n,a)},t.processGIF87A=t.processGIF89A})(us.API),Lc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:s,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Lc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(s){nn.log("bit decode error:"+s)}},Lc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),s=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var i=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+8*a*4,A=0;A<8&&8*a+A<this.width;A++){var d=this.palette[i>>7-A&1];this.data[c+4*A]=d.blue,this.data[c+4*A+1]=d.green,this.data[c+4*A+2]=d.red,this.data[c+4*A+3]=255}s!==0&&(this.pos+=4-s)}},Lc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,a=0;a<t;a++){var i=this.datav.getUint8(this.pos++,!0),c=n*this.width*4+2*a*4,A=i>>4,d=15&i,f=this.palette[A];if(this.data[c]=f.blue,this.data[c+1]=f.green,this.data[c+2]=f.red,this.data[c+3]=255,2*a+1>=this.width)break;f=this.palette[d],this.data[c+4]=f.blue,this.data[c+4+1]=f.green,this.data[c+4+2]=f.red,this.data[c+4+3]=255}e!==0&&(this.pos+=4-e)}},Lc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=s*this.width*4+4*n;if(a<this.palette.length){var c=this.palette[a];this.data[i]=c.red,this.data[i+1]=c.green,this.data[i+2]=c.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},Lc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(i&e)/e*255|0,A=(i>>5&e)/e*255|0,d=(i>>10&e)/e*255|0,f=i>>15?255:0,u=n*this.width*4+4*a;this.data[u]=d,this.data[u+1]=A,this.data[u+2]=c,this.data[u+3]=f}this.pos+=t}},Lc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),s=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var A=(c&e)/e*255|0,d=(c>>5&s)/s*255|0,f=(c>>11)/e*255|0,u=a*this.width*4+4*i;this.data[u]=f,this.data[u+1]=d,this.data[u+2]=A,this.data[u+3]=255}this.pos+=t}},Lc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*s;this.data[c]=i,this.data[c+1]=a,this.data[c+2]=n,this.data[c+3]=255}this.pos+=this.width%4}},Lc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),A=e*this.width*4+4*s;this.data[A]=i,this.data[A+1]=a,this.data[A+2]=n,this.data[A+3]=c}},Lc.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,s,n,a){var i=new Lc(e,!1),c=i.width,A=i.height,d={data:i.getData(),width:c,height:A},f=new K1(100).encode(d,100);return t.processJPEG.call(this,f,s,n,a)}})(us.API),Qj.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,s,n,a){var i=new Qj(e),c=i.width,A=i.height,d={data:i.getData(),width:c,height:A},f=new K1(100).encode(d,100);return t.processJPEG.call(this,f,s,n,a)}})(us.API),us.API.processRGBA=function(t,e,s){for(var n=t.data,a=n.length,i=new Uint8Array(a/4*3),c=new Uint8Array(a/4),A=0,d=0,f=0;f<a;f+=4){var u=n[f],p=n[f+1],x=n[f+2],m=n[f+3];i[A++]=u,i[A++]=p,i[A++]=x,c[d++]=m}var j=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:j,index:e,alias:s,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},us.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Bf=us.API,ig=Bf.getCharWidthsArray=function(t,e){var s,n,a=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),c=e.charSpace||this.internal.getCharSpace(),A=e.widths?e.widths:a.metadata.Unicode.widths,d=A.fof?A.fof:1,f=e.kerning?e.kerning:a.metadata.Unicode.kerning,u=f.fof?f.fof:1,p=e.doKerning!==!1,x=0,m=t.length,j=0,w=A[0]||d,S=[];for(s=0;s<m;s++)n=t.charCodeAt(s),typeof a.metadata.widthOfString=="function"?S.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+c*(1e3/i)||0)/1e3):(x=p&&Rr(f[n])==="object"&&!isNaN(parseInt(f[n][j],10))?f[n][j]/u:0,S.push((A[n]||w)/d+x)),j=n;return S},Bj=Bf.getStringUnitWidth=function(t,e){var s=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return Bf.processArabic&&(t=Bf.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,s,a)/s:ig.apply(this,arguments).reduce(function(i,c){return i+c},0)},kj=function(t,e,s,n){for(var a=[],i=0,c=t.length,A=0;i!==c&&A+e[i]<s;)A+=e[i],i++;a.push(t.slice(0,i));var d=i;for(A=0;i!==c;)A+e[i]>n&&(a.push(t.slice(d,i)),A=0,d=i),A+=e[i],i++;return d!==i&&a.push(t.slice(d,i)),a},Cj=function(t,e,s){s||(s={});var n,a,i,c,A,d,f,u=[],p=[u],x=s.textIndent||0,m=0,j=0,w=t.split(" "),S=ig.apply(this,[" ",s])[0];if(d=s.lineIndent===-1?w[0].length+2:s.lineIndent||0){var C=Array(d).join(" "),F=[];w.map(function(_){(_=_.split(/\s*\n/)).length>1?F=F.concat(_.map(function(z,I){return(I&&z.length?`
`:"")+z})):F.push(_[0])}),w=F,d=Bj.apply(this,[C,s])}for(i=0,c=w.length;i<c;i++){var U=0;if(n=w[i],d&&n[0]==`
`&&(n=n.substr(1),U=1),x+m+(j=(a=ig.apply(this,[n,s])).reduce(function(_,z){return _+z},0))>e||U){if(j>e){for(A=kj.apply(this,[n,a,e-(x+m),e]),u.push(A.shift()),u=[A.pop()];A.length;)p.push([A.shift()]);j=a.slice(n.length-(u[0]?u[0].length:0)).reduce(function(_,z){return _+z},0)}else u=[n];p.push(u),x=j+d,m=S}else u.push(n),x+=m+j,m=S}return f=d?function(_,z){return(z?C:"")+_.join(" ")}:function(_){return _.join(" ")},p.map(f)},Bf.splitTextToSize=function(t,e,s){var n,a=(s=s||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var p=this.internal.getFont(u.fontName,u.fontStyle),x="Unicode";return p.metadata[x]?{widths:p.metadata[x].widths||{0:1},kerning:p.metadata[x].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,s);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var c=1*this.internal.scaleFactor*e/a;i.textIndent=s.textIndent?1*s.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=s.lineIndent;var A,d,f=[];for(A=0,d=n.length;A<d;A++)f=f.concat(Cj.apply(this,[n[A],c,i]));return f},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",s="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[s[i]]=e[i],a[e[i]]=s[i];var c=function(x){return"0x"+parseInt(x,10).toString(16)},A=t.__fontmetrics__.compress=function(x){var m,j,w,S,C=["{"];for(var F in x){if(m=x[F],isNaN(parseInt(F,10))?j="'"+F+"'":(F=parseInt(F,10),j=(j=c(F).slice(2)).slice(0,-1)+a[j.slice(-1)]),typeof m=="number")m<0?(w=c(m).slice(3),S="-"):(w=c(m).slice(2),S=""),w=S+w.slice(0,-1)+a[w.slice(-1)];else{if(Rr(m)!=="object")throw new Error("Don't know what to do with value type "+Rr(m)+".");w=A(m)}C.push(j+w)}return C.push("}"),C.join("")},d=t.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,j,w,S,C={},F=1,U=C,_=[],z="",I="",H=x.length-1,ee=1;ee<H;ee+=1)(S=x[ee])=="'"?m?(w=m.join(""),m=void 0):m=[]:m?m.push(S):S=="{"?(_.push([U,w]),U={},w=void 0):S=="}"?((j=_.pop())[0][j[1]]=U,w=void 0,U=j[0]):S=="-"?F=-1:w===void 0?n.hasOwnProperty(S)?(z+=n[S],w=parseInt(z,16)*F,F=1,z=""):z+=S:n.hasOwnProperty(S)?(I+=n[S],U[w]=parseInt(I,16)*F,F=1,w=void 0,I=""):I+=S;return C},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},p={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(x){var m=x.font,j=p.Unicode[m.postScriptName];j&&(m.metadata.Unicode={},m.metadata.Unicode.widths=j.widths,m.metadata.Unicode.kerning=j.kerning);var w=u.Unicode[m.postScriptName];w&&(m.metadata.Unicode.encoding=w,m.encoding=w.codePages[0])}])})(us.API),(function(t){var e=function(s){for(var n=s.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=s.charCodeAt(i);return a};t.API.events.push(["addFont",function(s){var n=void 0,a=s.font,i=s.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(c,A){A=/^\x00\x01\x00\x00/.test(A)?e(A):e(Sg(A)),c.metadata=t.API.TTFFont.open(A),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(a,n)}}])})(us),us.API.addSvgAsImage=function(t,e,s,n,a,i,c,A){if(isNaN(e)||isNaN(s))throw nn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw nn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=n,d.height=a;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(Ts.canvg?Promise.resolve(Ts.canvg):j1(()=>import("./index.es-DmEcF051.js"),[])).catch(function(x){return Promise.reject(new Error("Could not load canvg: "+x))}).then(function(x){return x.default?x.default:x}).then(function(x){return x.fromString(f,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(u)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),e,s,n,a,c,A)})},us.API.putTotalPages=function(t){var e,s=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),s=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),s=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,s);return this},us.API.viewerPreferences=function(t,e){var s;t=t||{},e=e||!1;var n,a,i,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},A=Object.keys(c),d=[],f=0,u=0,p=0;function x(j,w){var S,C=!1;for(S=0;S<j.length;S+=1)j[S]===w&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),s=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=A.length;for(p=0;p<m;p+=1)s[A[p]].value=s[A[p]].defaultValue,s[A[p]].explicitSet=!1}if(Rr(t)==="object"){for(a in t)if(i=t[a],x(A,a)&&i!==void 0){if(s[a].type==="boolean"&&typeof i=="boolean")s[a].value=i;else if(s[a].type==="name"&&x(s[a].valueSet,i))s[a].value=i;else if(s[a].type==="integer"&&Number.isInteger(i))s[a].value=i;else if(s[a].type==="array"){for(f=0;f<i.length;f+=1)if(n=!0,i[f].length===1&&typeof i[f][0]=="number")d.push(String(i[f]-1));else if(i[f].length>1){for(u=0;u<i[f].length;u+=1)typeof i[f][u]!="number"&&(n=!1);n===!0&&d.push([i[f][0]-1,i[f][1]-1].join(" "))}s[a].value="["+d.join(" ")+"]"}else s[a].value=s[a].defaultValue;s[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,w=[];for(j in s)s[j].explicitSet===!0&&(s[j].type==="name"?w.push("/"+j+" /"+s[j].value):w.push("/"+j+" "+s[j].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=s,this},(function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),A=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),f=i.length+c.length+A.length+a.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(a+i+c+A+d),this.internal.write("endstream"),this.internal.write("endobj")},s=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",s),this.internal.events.subscribe("postPutResources",e)),this}})(us.API),(function(t){var e=t.API,s=e.pdfEscape16=function(i,c){for(var A,d=c.metadata.Unicode.widths,f=["","0","00","000","0000"],u=[""],p=0,x=i.length;p<x;++p){if(A=c.metadata.characterToGlyph(i.charCodeAt(p)),c.metadata.glyIdsUsed.push(A),c.metadata.toUnicode[A]=i.charCodeAt(p),d.indexOf(A)==-1&&(d.push(A),d.push([parseInt(c.metadata.widthOfGlyph(A),10)])),A=="0")return u.join("");A=A.toString(16),u.push(f[4-A.length],A)}return u.join("")},n=function(i){var c,A,d,f,u,p,x;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],p=0,x=(A=Object.keys(i).sort(function(m,j){return m-j})).length;p<x;p++)c=A[p],d.length>=100&&(u+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),i[c]!==void 0&&i[c]!==null&&typeof i[c].toString=="function"&&(f=("0000"+i[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),d.push("<"+c+"><"+f+">"));return d.length&&(u+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(c){var A=c.font,d=c.out,f=c.newObject,u=c.putStream;if(A.metadata instanceof t.API.TTFFont&&A.encoding==="Identity-H"){for(var p=A.metadata.Unicode.widths,x=A.metadata.subset.encode(A.metadata.glyIdsUsed,1),m="",j=0;j<x.length;j++)m+=String.fromCharCode(x[j]);var w=f();u({data:m,addLength1:!0,objectId:w}),d("endobj");var S=f();u({data:n(A.metadata.toUnicode),addLength1:!0,objectId:S}),d("endobj");var C=f();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+Ef(A.fontName)),d("/FontFile2 "+w+" 0 R"),d("/FontBBox "+t.API.PDFObject.convert(A.metadata.bbox)),d("/Flags "+A.metadata.flags),d("/StemV "+A.metadata.stemV),d("/ItalicAngle "+A.metadata.italicAngle),d("/Ascent "+A.metadata.ascender),d("/Descent "+A.metadata.decender),d("/CapHeight "+A.metadata.capHeight),d(">>"),d("endobj");var F=f();d("<<"),d("/Type /Font"),d("/BaseFont /"+Ef(A.fontName)),d("/FontDescriptor "+C+" 0 R"),d("/W "+t.API.PDFObject.convert(p)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+A.encoding+")"),d(">>"),d(">>"),d("endobj"),A.objectNumber=f(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+S+" 0 R"),d("/BaseFont /"+Ef(A.fontName)),d("/Encoding /"+A.encoding),d("/DescendantFonts ["+F+" 0 R]"),d(">>"),d("endobj"),A.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(c){var A=c.font,d=c.out,f=c.newObject,u=c.putStream;if(A.metadata instanceof t.API.TTFFont&&A.encoding==="WinAnsiEncoding"){for(var p=A.metadata.rawData,x="",m=0;m<p.length;m++)x+=String.fromCharCode(p[m]);var j=f();u({data:x,addLength1:!0,objectId:j}),d("endobj");var w=f();u({data:n(A.metadata.toUnicode),addLength1:!0,objectId:w}),d("endobj");var S=f();d("<<"),d("/Descent "+A.metadata.decender),d("/CapHeight "+A.metadata.capHeight),d("/StemV "+A.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+j+" 0 R"),d("/Flags 96"),d("/FontBBox "+t.API.PDFObject.convert(A.metadata.bbox)),d("/FontName /"+Ef(A.fontName)),d("/ItalicAngle "+A.metadata.italicAngle),d("/Ascent "+A.metadata.ascender),d(">>"),d("endobj"),A.objectNumber=f();for(var C=0;C<A.metadata.hmtx.widths.length;C++)A.metadata.hmtx.widths[C]=parseInt(A.metadata.hmtx.widths[C]*(1e3/A.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+Ef(A.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+A.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(A.metadata.hmtx.widths)+">>"),d("endobj"),A.isAlreadyPutted=!0}})(i)}]);var a=function(i){var c,A=i.text||"",d=i.x,f=i.y,u=i.options||{},p=i.mutex||{},x=p.pdfEscape,m=p.activeFontKey,j=p.fonts,w=m,S="",C=0,F="",U=j[w].encoding;if(j[w].encoding!=="Identity-H")return{text:A,x:d,y:f,options:u,mutex:p};for(F=A,w=m,Array.isArray(A)&&(F=A[0]),C=0;C<F.length;C+=1)j[w].metadata.hasOwnProperty("cmap")&&(c=j[w].metadata.cmap.unicode.codeMap[F[C].charCodeAt(0)]),c||F[C].charCodeAt(0)<256&&j[w].metadata.hasOwnProperty("Unicode")?S+=F[C]:S+="";var _="";return parseInt(w.slice(1))<14||U==="WinAnsiEncoding"?_=x(S,w).split("").map(function(z){return z.charCodeAt(0).toString(16)}).join(""):U==="Identity-H"&&(_=s(S,j[w])),p.isHex=!0,{text:_,x:d,y:f,options:u,mutex:p}};e.events.push(["postProcessText",function(i){var c=i.text||"",A=[],d={text:c,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(c)){var f=0;for(f=0;f<c.length;f+=1)Array.isArray(c[f])&&c[f].length===3?A.push([a(Object.assign({},d,{text:c[f][0]})).text,c[f][1],c[f][2]]):A.push(a(Object.assign({},d,{text:c[f]})).text);i.text=A}else i.text=a(Object.assign({},d,{text:c})).text}])})(us),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(s){return e.call(this),this.internal.vFS[s]!==void 0},t.addFileToVFS=function(s,n){return e.call(this),this.internal.vFS[s]=n,this},t.getFileFromVFS=function(s){return e.call(this),this.internal.vFS[s]!==void 0?this.internal.vFS[s]:null}})(us.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,i,c,A,d,f,u,p=e,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),F=!1,U=0;this.__bidiEngine__={};var _=function(Q){var q=Q.charCodeAt(),te=q>>8,X=w[te];return X!==void 0?p[256*X+(255&q)]:te===252||te===253?"AL":C.test(te)?"L":te===8?"R":"N"},z=function(Q){for(var q,te=0;te<Q.length;te++){if((q=_(Q.charAt(te)))==="L")return!1;if(q==="R")return!0}return!1},I=function(Q,q,te,X){var Ae,W,se,Z,re=q[X];switch(re){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":F=!1;break;case"N":case"AN":break;case"EN":F&&(re="AN");break;case"AL":F=!0,re="R";break;case"WS":case"BN":re="N";break;case"CS":X<1||X+1>=q.length||(Ae=te[X-1])!=="EN"&&Ae!=="AN"||(W=q[X+1])!=="EN"&&W!=="AN"?re="N":F&&(W="AN"),re=W===Ae?W:"N";break;case"ES":re=(Ae=X>0?te[X-1]:"B")==="EN"&&X+1<q.length&&q[X+1]==="EN"?"EN":"N";break;case"ET":if(X>0&&te[X-1]==="EN"){re="EN";break}if(F){re="N";break}for(se=X+1,Z=q.length;se<Z&&q[se]==="ET";)se++;re=se<Z&&q[se]==="EN"?"EN":"N";break;case"NSM":if(c&&!A){for(Z=q.length,se=X+1;se<Z&&q[se]==="NSM";)se++;if(se<Z){var ve=Q[X],ae=ve>=1425&&ve<=2303||ve===64286;if(Ae=q[se],ae&&(Ae==="R"||Ae==="AL")){re="R";break}}}re=X<1||(Ae=q[X-1])==="B"?"N":te[X-1];break;case"B":F=!1,a=!0,re=U;break;case"S":i=!0,re="N"}return re},H=function(Q,q,te){var X=Q.split("");return te&&ee(X,te,{hiLevel:U}),X.reverse(),q&&q.reverse(),X.join("")},ee=function(Q,q,te){var X,Ae,W,se,Z,re=-1,ve=Q.length,ae=0,R=[],P=U?m:x,V=[];for(F=!1,a=!1,i=!1,Ae=0;Ae<ve;Ae++)V[Ae]=_(Q[Ae]);for(W=0;W<ve;W++){if(Z=ae,R[W]=I(Q,V,R,W),X=240&(ae=P[Z][j[R[W]]]),ae&=15,q[W]=se=P[ae][5],X>0)if(X===16){for(Ae=re;Ae<W;Ae++)q[Ae]=1;re=-1}else re=-1;if(P[ae][6])re===-1&&(re=W);else if(re>-1){for(Ae=re;Ae<W;Ae++)q[Ae]=se;re=-1}V[W]==="B"&&(q[W]=0),te.hiLevel|=se}i&&(function(K,ne,pe){for(var Ce=0;Ce<pe;Ce++)if(K[Ce]==="S"){ne[Ce]=U;for(var Ue=Ce-1;Ue>=0&&K[Ue]==="WS";Ue--)ne[Ue]=U}})(V,q,ve)},$=function(Q,q,te,X,Ae){if(!(Ae.hiLevel<Q)){if(Q===1&&U===1&&!a)return q.reverse(),void(te&&te.reverse());for(var W,se,Z,re,ve=q.length,ae=0;ae<ve;){if(X[ae]>=Q){for(Z=ae+1;Z<ve&&X[Z]>=Q;)Z++;for(re=ae,se=Z-1;re<se;re++,se--)W=q[re],q[re]=q[se],q[se]=W,te&&(W=te[re],te[re]=te[se],te[se]=W);ae=Z}ae++}}},ce=function(Q,q,te){var X=Q.split(""),Ae={hiLevel:U};return te||(te=[]),ee(X,te,Ae),(function(W,se,Z){if(Z.hiLevel!==0&&u)for(var re,ve=0;ve<W.length;ve++)se[ve]===1&&(re=S.indexOf(W[ve]))>=0&&(W[ve]=S[re+1])})(X,te,Ae),$(2,X,q,te,Ae),$(1,X,q,te,Ae),X.join("")};return this.__bidiEngine__.doBidiReorder=function(Q,q,te){if((function(Ae,W){if(W)for(var se=0;se<Ae.length;se++)W[se]=se;A===void 0&&(A=z(Ae)),f===void 0&&(f=z(Ae))})(Q,q),c||!d||f)if(c&&d&&A^f)U=A?1:0,Q=H(Q,q,te);else if(!c&&d&&f)U=A?1:0,Q=ce(Q,q,te),Q=H(Q,q);else if(!c||A||d||f){if(c&&!d&&A^f)Q=H(Q,q),A?(U=0,Q=ce(Q,q,te)):(U=1,Q=ce(Q,q,te),Q=H(Q,q));else if(c&&A&&!d&&f)U=1,Q=ce(Q,q,te),Q=H(Q,q);else if(!c&&!d&&A^f){var X=u;A?(U=1,Q=ce(Q,q,te),U=0,u=!1,Q=ce(Q,q,te),u=X):(U=0,Q=ce(Q,q,te),Q=H(Q,q),U=1,u=!1,Q=ce(Q,q,te),u=X,Q=H(Q,q))}}else U=0,Q=ce(Q,q,te);else U=A?1:0,Q=ce(Q,q,te);return Q},this.__bidiEngine__.setOptions=function(Q){Q&&(c=Q.isInputVisual,d=Q.isOutputVisual,A=Q.isInputRtl,f=Q.isOutputRtl,u=Q.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],s=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var c=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,s.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var A=0;for(c=[],A=0;A<a.length;A+=1)Object.prototype.toString.call(a[A])==="[object Array]"?c.push([s.doBidiReorder(a[A][0]),a[A][1],a[A][2]]):c.push([s.doBidiReorder(a[A])]);n.text=c}else n.text=s.doBidiReorder(a);s.setOptions({isInputVisual:!0})}])})(us),us.API.TTFFont=(function(){function t(e){var s;if(this.rawData=e,s=this.contents=new Su(e),this.contents.pos=4,s.readString(4)==="ttcf")throw new Error("TTCF not supported.");s.pos=0,this.parse(),this.subset=new eI(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new R_(this.contents),this.head=new P_(this),this.name=new G_(this),this.cmap=new lk(this),this.toUnicode={},this.hhea=new z_(this),this.maxp=new q_(this),this.hmtx=new Y_(this),this.post=new V_(this),this.os2=new K_(this),this.loca=new Z_(this),this.glyf=new J_(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,s,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,A,d,f;for(f=[],c=0,A=(d=this.bbox).length;c<A;c++)e=d[c],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(s=a>>16)&&(s=-(1+(65535^s))),this.italicAngle=+(s+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var s;return((s=this.cmap.unicode)!=null?s.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var s;return s=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*s},t.prototype.widthOfString=function(e,s,n){var a,i,c,A;for(c=0,i=0,A=(e=""+e).length;0<=A?i<A:i>A;i=0<=A?++i:--i)a=e.charCodeAt(i),c+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/s)||0;return c*(s/1e3)},t.prototype.lineHeight=function(e,s){var n;return s==null&&(s=!1),n=s?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t})();var Dc,Su=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var s,n;for(n=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)n[s]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var s,n,a;for(a=[],s=0,n=e.length;0<=n?s<n:s>n;s=0<=n?++s:--s)a.push(this.writeByte(e.charCodeAt(s)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,s,n,a,i,c,A,d;return e=this.readByte(),s=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),c=this.readByte(),A=this.readByte(),d=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^s)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^c)+256*(255^A)+(255^d)+1):72057594037927940*e+281474976710656*s+1099511627776*n+4294967296*a+16777216*i+65536*c+256*A+d},t.prototype.writeLongLong=function(e){var s,n;return s=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var s,n;for(s=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)s.push(this.readByte());return s},t.prototype.write=function(e){var s,n,a,i;for(i=[],n=0,a=e.length;n<a;n++)s=e[n],i.push(this.writeByte(s));return i},t})(),R_=(function(){var t;function e(s){var n,a,i;for(this.scalarType=s.readInt(),this.tableCount=s.readShort(),this.searchRange=s.readShort(),this.entrySelector=s.readShort(),this.rangeShift=s.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:s.readString(4),checksum:s.readInt(),offset:s.readInt(),length:s.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(s){var n,a,i,c,A,d,f,u,p,x,m,j,w;for(w in m=Object.keys(s).length,d=Math.log(2),p=16*Math.floor(Math.log(m)/d),c=Math.floor(p/d),u=16*m-p,(a=new Su).writeInt(this.scalarType),a.writeShort(m),a.writeShort(p),a.writeShort(c),a.writeShort(u),i=16*m,f=a.pos+i,A=null,j=[],s)for(x=s[w],a.writeString(w),a.writeInt(t(x)),a.writeInt(f),a.writeInt(x.length),j=j.concat(x),w==="head"&&(A=f),f+=x.length;f%4;)j.push(0),f++;return a.write(j),n=2981146554-t(a.data),a.pos=A+8,a.writeUInt32(n),a.data},t=function(s){var n,a,i,c;for(s=ok.call(s);s.length%4;)s.push(0);for(i=new Su(s),a=0,n=0,c=s.length;n<c;n=n+=4)a+=i.readUInt32();return 4294967295&a},e})(),H_={}.hasOwnProperty,SA=function(t,e){for(var s in e)H_.call(e,s)&&(t[s]=e[s]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Dc=(function(){function t(e){var s;this.file=e,s=this.file.directory.tables[this.tag],this.exists=!!s,s&&(this.offset=s.offset,this.length=s.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var P_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return SA(t,Dc),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var s;return(s=new Su).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(e),s.writeShort(this.glyphDataFormat),s.data},t})(),_j=(function(){function t(e,s){var n,a,i,c,A,d,f,u,p,x,m,j,w,S,C,F,U;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=s+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=e.readByte();break;case 4:for(m=e.readUInt16(),x=m/2,e.pos+=6,i=(function(){var _,z;for(z=[],d=_=0;0<=x?_<x:_>x;d=0<=x?++_:--_)z.push(e.readUInt16());return z})(),e.pos+=2,w=(function(){var _,z;for(z=[],d=_=0;0<=x?_<x:_>x;d=0<=x?++_:--_)z.push(e.readUInt16());return z})(),f=(function(){var _,z;for(z=[],d=_=0;0<=x?_<x:_>x;d=0<=x?++_:--_)z.push(e.readUInt16());return z})(),u=(function(){var _,z;for(z=[],d=_=0;0<=x?_<x:_>x;d=0<=x?++_:--_)z.push(e.readUInt16());return z})(),a=(this.length-e.pos+this.offset)/2,A=(function(){var _,z;for(z=[],d=_=0;0<=a?_<a:_>a;d=0<=a?++_:--_)z.push(e.readUInt16());return z})(),d=C=0,U=i.length;C<U;d=++C)for(S=i[d],n=F=j=w[d];j<=S?F<=S:F>=S;n=j<=S?++F:--F)u[d]===0?c=n+f[d]:(c=A[u[d]/2+(n-j)-(x-d)]||0)!==0&&(c+=f[d]),this.codeMap[n]=65535&c}e.pos=p}return t.encode=function(e,s){var n,a,i,c,A,d,f,u,p,x,m,j,w,S,C,F,U,_,z,I,H,ee,$,ce,Q,q,te,X,Ae,W,se,Z,re,ve,ae,R,P,V,K,ne,pe,Ce,Ue,Ne,Ie,Pe;switch(X=new Su,c=Object.keys(e).sort(function(ze,gt){return ze-gt}),s){case"macroman":for(w=0,S=(function(){var ze=[];for(j=0;j<256;++j)ze.push(0);return ze})(),F={0:0},i={},Ae=0,re=c.length;Ae<re;Ae++)F[Ue=e[a=c[Ae]]]==null&&(F[Ue]=++w),i[a]={old:e[a],new:F[e[a]]},S[a]=F[e[a]];return X.writeUInt16(1),X.writeUInt16(0),X.writeUInt32(12),X.writeUInt16(0),X.writeUInt16(262),X.writeUInt16(0),X.write(S),{charMap:i,subtable:X.data,maxGlyphID:w+1};case"unicode":for(q=[],p=[],U=0,F={},n={},C=f=null,W=0,ve=c.length;W<ve;W++)F[z=e[a=c[W]]]==null&&(F[z]=++U),n[a]={old:z,new:F[z]},A=F[z]-a,C!=null&&A===f||(C&&p.push(C),q.push(a),f=A),C=a;for(C&&p.push(C),p.push(65535),q.push(65535),ce=2*($=q.length),ee=2*Math.pow(Math.log($)/Math.LN2,2),x=Math.log(ee/2)/Math.LN2,H=2*$-ee,d=[],I=[],m=[],j=se=0,ae=q.length;se<ae;j=++se){if(Q=q[j],u=p[j],Q===65535){d.push(0),I.push(0);break}if(Q-(te=n[Q].new)>=32768)for(d.push(0),I.push(2*(m.length+$-j)),a=Z=Q;Q<=u?Z<=u:Z>=u;a=Q<=u?++Z:--Z)m.push(n[a].new);else d.push(te-Q),I.push(0)}for(X.writeUInt16(3),X.writeUInt16(1),X.writeUInt32(12),X.writeUInt16(4),X.writeUInt16(16+8*$+2*m.length),X.writeUInt16(0),X.writeUInt16(ce),X.writeUInt16(ee),X.writeUInt16(x),X.writeUInt16(H),pe=0,R=p.length;pe<R;pe++)a=p[pe],X.writeUInt16(a);for(X.writeUInt16(0),Ce=0,P=q.length;Ce<P;Ce++)a=q[Ce],X.writeUInt16(a);for(Ne=0,V=d.length;Ne<V;Ne++)A=d[Ne],X.writeUInt16(A);for(Ie=0,K=I.length;Ie<K;Ie++)_=I[Ie],X.writeUInt16(_);for(Pe=0,ne=m.length;Pe<ne;Pe++)w=m[Pe],X.writeUInt16(w);return{charMap:n,subtable:X.data,maxGlyphID:U+1}}},t})(),lk=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return SA(t,Dc),t.prototype.tag="cmap",t.prototype.parse=function(e){var s,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)s=new _j(e,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(e,s){var n,a;return s==null&&(s="macroman"),n=_j.encode(e,s),(a=new Su).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t})(),z_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return SA(t,Dc),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),K_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return SA(t,Dc),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var s,n;for(n=[],s=0;s<10;++s)n.push(e.readByte());return n})(),this.charRange=(function(){var s,n;for(n=[],s=0;s<4;++s)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var s,n;for(n=[],s=0;s<2;s=++s)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),V_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return SA(t,Dc),t.prototype.tag="post",t.prototype.parse=function(e){var s,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)s=e.readByte(),a.push(this.names.push(e.readString(s)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var c,A,d;for(d=[],i=c=0,A=this.file.maxp.numGlyphs;0<=A?c<A:c>A;i=0<=A?++c:--c)d.push(e.readUInt32());return d}).call(this)}},t})(),$_=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},G_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return SA(t,Dc),t.prototype.tag="name",t.prototype.parse=function(e){var s,n,a,i,c,A,d,f,u,p,x;for(e.pos=this.offset,e.readShort(),s=e.readShort(),A=e.readShort(),n=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+A+e.readShort()});for(d={},i=u=0,p=n.length;u<p;i=++u)a=n[i],e.pos=a.offset,f=e.readString(a.length),c=new $_(f,a),d[x=a.nameID]==null&&(d[x]=[]),d[a.nameID].push(c);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t})(),q_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return SA(t,Dc),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),Y_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return SA(t,Dc),t.prototype.tag="hmtx",t.prototype.parse=function(e){var s,n,a,i,c,A,d;for(e.pos=this.offset,this.metrics=[],s=0,A=this.file.hhea.numberOfMetrics;0<=A?s<A:s>A;s=0<=A?++s:--s)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,u;for(u=[],s=f=0;0<=a?f<a:f>a;s=0<=a?++f:--f)u.push(e.readInt16());return u})(),this.widths=(function(){var f,u,p,x;for(x=[],f=0,u=(p=this.metrics).length;f<u;f++)i=p[f],x.push(i.advance);return x}).call(this),n=this.widths[this.widths.length-1],d=[],s=c=0;0<=a?c<a:c>a;s=0<=a?++c:--c)d.push(this.widths.push(n));return d},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),ok=[].slice,J_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return SA(t,Dc),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var s,n,a,i,c,A,d,f,u,p;return e in this.cache?this.cache[e]:(i=this.file.loca,s=this.file.contents,n=i.indexOf(e),(a=i.lengthOf(e))===0?this.cache[e]=null:(s.pos=this.offset+n,c=(A=new Su(s.read(a))).readShort(),f=A.readShort(),p=A.readShort(),d=A.readShort(),u=A.readShort(),this.cache[e]=c===-1?new X_(A,f,p,d,u):new W_(A,c,f,p,d,u),this.cache[e]))},t.prototype.encode=function(e,s,n){var a,i,c,A,d;for(c=[],i=[],A=0,d=s.length;A<d;A++)a=e[s[A]],i.push(c.length),a&&(c=c.concat(a.encode(n)));return i.push(c.length),{table:c,offsets:i}},t})(),W_=(function(){function t(e,s,n,a,i,c){this.raw=e,this.numberOfContours=s,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=c,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),X_=(function(){function t(e,s,n,a,i){var c,A;for(this.raw=e,this.xMin=s,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;A=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&A;)c.pos+=1&A?4:2,128&A?c.pos+=8:64&A?c.pos+=4:8&A&&(c.pos+=2)}return t.prototype.encode=function(){var e,s,n;for(s=new Su(ok.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)s.pos=this.glyphOffsets[e];return s.data},t})(),Z_=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return SA(t,Dc),t.prototype.tag="loca",t.prototype.parse=function(e){var s,n;return e.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*e.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(e.readUInt32());return i}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,s){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,c=0;c<n.length;++c)if(n[c]=a,i<s.length&&s[i]==c){++i,n[c]=a;var A=this.offsets[c],d=this.offsets[c+1]-A;d>0&&(a+=d)}for(var f=new Array(4*n.length),u=0;u<n.length;++u)f[4*u+3]=255&n[u],f[4*u+2]=(65280&n[u])>>8,f[4*u+1]=(16711680&n[u])>>16,f[4*u]=(4278190080&n[u])>>24;return f},t})(),eI=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,s,n,a,i;for(s in a=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[s],e[s]=a[n];return e},t.prototype.glyphsFor=function(e){var s,n,a,i,c,A,d;for(a={},c=0,A=e.length;c<A;c++)a[i=e[c]]=this.font.glyf.glyphFor(i);for(i in s=[],a)(n=a[i])!=null&&n.compound&&s.push.apply(s,n.glyphIDs);if(s.length>0)for(i in d=this.glyphsFor(s))n=d[i],a[i]=n;return a},t.prototype.encode=function(e,s){var n,a,i,c,A,d,f,u,p,x,m,j,w,S,C;for(a in n=lk.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(e),m={0:0},C=n.charMap)m[(d=C[a]).old]=d.new;for(j in x=n.maxGlyphID,c)j in m||(m[j]=x++);return u=(function(F){var U,_;for(U in _={},F)_[F[U]]=U;return _})(m),p=Object.keys(u).sort(function(F,U){return F-U}),w=(function(){var F,U,_;for(_=[],F=0,U=p.length;F<U;F++)A=p[F],_.push(u[A]);return _})(),i=this.font.glyf.encode(c,w,m),f=this.font.loca.encode(i.offsets,w),S={cmap:this.font.cmap.raw(),glyf:i.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(s)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},t})();us.API.PDFObject=(function(){var t;function e(){}return t=function(s,n){return(Array(n+1).join("0")+s).slice(-n)},e.convert=function(s){var n,a,i,c;if(Array.isArray(s))return"["+(function(){var A,d,f;for(f=[],A=0,d=s.length;A<d;A++)n=s[A],f.push(e.convert(n));return f})().join(" ")+"]";if(typeof s=="string")return"/"+s;if(s!=null&&s.isString)return"("+s+")";if(s instanceof Date)return"(D:"+t(s.getUTCFullYear(),4)+t(s.getUTCMonth(),2)+t(s.getUTCDate(),2)+t(s.getUTCHours(),2)+t(s.getUTCMinutes(),2)+t(s.getUTCSeconds(),2)+"Z)";if({}.toString.call(s)==="[object Object]"){for(a in i=["<<"],s)c=s[a],i.push("/"+a+" "+e.convert(c));return i.push(">>"),i.join(`
`)}return""+s},e})();const tI=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:U_,AcroFormAppearance:ss,AcroFormButton:Ha,AcroFormCheckBox:up,AcroFormChoiceField:kh,AcroFormComboBox:Sh,AcroFormEditBox:Ap,AcroFormListBox:Ch,AcroFormPasswordField:hp,AcroFormPushButton:dp,AcroFormRadioButton:Eh,AcroFormTextField:wu,GState:Up,ShadingPattern:uu,TilingPattern:vh,default:us,jsPDF:us},Symbol.toStringTag,{value:"Module"})),sI=JS(tI);var Eg={exports:{}};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */var rI=Eg.exports,Ij;function nI(){return Ij||(Ij=1,(function(t,e){(function(s,n){t.exports=n()})(rI,(function(){/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation.

		    Permission to use, copy, modify, and/or distribute this software for any
		    purpose with or without fee is hereby granted.

		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		    PERFORMANCE OF THIS SOFTWARE.
		    ***************************************************************************** */var s=function(y,b){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,N){B.__proto__=N}||function(B,N){for(var D in N)Object.prototype.hasOwnProperty.call(N,D)&&(B[D]=N[D])},s(y,b)};function n(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");s(y,b);function B(){this.constructor=y}y.prototype=b===null?Object.create(b):(B.prototype=b.prototype,new B)}var a=function(){return a=Object.assign||function(b){for(var B,N=1,D=arguments.length;N<D;N++){B=arguments[N];for(var J in B)Object.prototype.hasOwnProperty.call(B,J)&&(b[J]=B[J])}return b},a.apply(this,arguments)};function i(y,b,B,N){function D(J){return J instanceof B?J:new B(function(de){de(J)})}return new(B||(B=Promise))(function(J,de){function xe(Qe){try{Ee(N.next(Qe))}catch(Ke){de(Ke)}}function be(Qe){try{Ee(N.throw(Qe))}catch(Ke){de(Ke)}}function Ee(Qe){Qe.done?J(Qe.value):D(Qe.value).then(xe,be)}Ee((N=N.apply(y,[])).next())})}function c(y,b){var B={label:0,sent:function(){if(J[0]&1)throw J[1];return J[1]},trys:[],ops:[]},N,D,J,de;return de={next:xe(0),throw:xe(1),return:xe(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function xe(Ee){return function(Qe){return be([Ee,Qe])}}function be(Ee){if(N)throw new TypeError("Generator is already executing.");for(;B;)try{if(N=1,D&&(J=Ee[0]&2?D.return:Ee[0]?D.throw||((J=D.return)&&J.call(D),0):D.next)&&!(J=J.call(D,Ee[1])).done)return J;switch(D=0,J&&(Ee=[Ee[0]&2,J.value]),Ee[0]){case 0:case 1:J=Ee;break;case 4:return B.label++,{value:Ee[1],done:!1};case 5:B.label++,D=Ee[1],Ee=[0];continue;case 7:Ee=B.ops.pop(),B.trys.pop();continue;default:if(J=B.trys,!(J=J.length>0&&J[J.length-1])&&(Ee[0]===6||Ee[0]===2)){B=0;continue}if(Ee[0]===3&&(!J||Ee[1]>J[0]&&Ee[1]<J[3])){B.label=Ee[1];break}if(Ee[0]===6&&B.label<J[1]){B.label=J[1],J=Ee;break}if(J&&B.label<J[2]){B.label=J[2],B.ops.push(Ee);break}J[2]&&B.ops.pop(),B.trys.pop();continue}Ee=b.call(y,B)}catch(Qe){Ee=[6,Qe],D=0}finally{N=J=0}if(Ee[0]&5)throw Ee[1];return{value:Ee[0]?Ee[1]:void 0,done:!0}}}function A(y,b,B){if(arguments.length===2)for(var N=0,D=b.length,J;N<D;N++)(J||!(N in b))&&(J||(J=Array.prototype.slice.call(b,0,N)),J[N]=b[N]);return y.concat(J||b)}for(var d=(function(){function y(b,B,N,D){this.left=b,this.top=B,this.width=N,this.height=D}return y.prototype.add=function(b,B,N,D){return new y(this.left+b,this.top+B,this.width+N,this.height+D)},y.fromClientRect=function(b,B){return new y(B.left+b.windowBounds.left,B.top+b.windowBounds.top,B.width,B.height)},y.fromDOMRectList=function(b,B){var N=Array.from(B).find(function(D){return D.width!==0});return N?new y(N.left+b.windowBounds.left,N.top+b.windowBounds.top,N.width,N.height):y.EMPTY},y.EMPTY=new y(0,0,0,0),y})(),f=function(y,b){return d.fromClientRect(y,b.getBoundingClientRect())},u=function(y){var b=y.body,B=y.documentElement;if(!b||!B)throw new Error("Unable to get document size");var N=Math.max(Math.max(b.scrollWidth,B.scrollWidth),Math.max(b.offsetWidth,B.offsetWidth),Math.max(b.clientWidth,B.clientWidth)),D=Math.max(Math.max(b.scrollHeight,B.scrollHeight),Math.max(b.offsetHeight,B.offsetHeight),Math.max(b.clientHeight,B.clientHeight));return new d(0,0,N,D)},p=function(y){for(var b=[],B=0,N=y.length;B<N;){var D=y.charCodeAt(B++);if(D>=55296&&D<=56319&&B<N){var J=y.charCodeAt(B++);(J&64512)===56320?b.push(((D&1023)<<10)+(J&1023)+65536):(b.push(D),B--)}else b.push(D)}return b},x=function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];if(String.fromCodePoint)return String.fromCodePoint.apply(String,y);var B=y.length;if(!B)return"";for(var N=[],D=-1,J="";++D<B;){var de=y[D];de<=65535?N.push(de):(de-=65536,N.push((de>>10)+55296,de%1024+56320)),(D+1===B||N.length>16384)&&(J+=String.fromCharCode.apply(String,N),N.length=0)}return J},m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=typeof Uint8Array>"u"?[]:new Uint8Array(256),w=0;w<m.length;w++)j[m.charCodeAt(w)]=w;for(var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=typeof Uint8Array>"u"?[]:new Uint8Array(256),F=0;F<S.length;F++)C[S.charCodeAt(F)]=F;for(var U=function(y){var b=y.length*.75,B=y.length,N,D=0,J,de,xe,be;y[y.length-1]==="="&&(b--,y[y.length-2]==="="&&b--);var Ee=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(b):new Array(b),Qe=Array.isArray(Ee)?Ee:new Uint8Array(Ee);for(N=0;N<B;N+=4)J=C[y.charCodeAt(N)],de=C[y.charCodeAt(N+1)],xe=C[y.charCodeAt(N+2)],be=C[y.charCodeAt(N+3)],Qe[D++]=J<<2|de>>4,Qe[D++]=(de&15)<<4|xe>>2,Qe[D++]=(xe&3)<<6|be&63;return Ee},_=function(y){for(var b=y.length,B=[],N=0;N<b;N+=2)B.push(y[N+1]<<8|y[N]);return B},z=function(y){for(var b=y.length,B=[],N=0;N<b;N+=4)B.push(y[N+3]<<24|y[N+2]<<16|y[N+1]<<8|y[N]);return B},I=5,H=11,ee=2,$=H-I,ce=65536>>I,Q=1<<I,q=Q-1,te=1024>>I,X=ce+te,Ae=X,W=32,se=Ae+W,Z=65536>>H,re=1<<$,ve=re-1,ae=function(y,b,B){return y.slice?y.slice(b,B):new Uint16Array(Array.prototype.slice.call(y,b,B))},R=function(y,b,B){return y.slice?y.slice(b,B):new Uint32Array(Array.prototype.slice.call(y,b,B))},P=function(y,b){var B=U(y),N=Array.isArray(B)?z(B):new Uint32Array(B),D=Array.isArray(B)?_(B):new Uint16Array(B),J=24,de=ae(D,J/2,N[4]/2),xe=N[5]===2?ae(D,(J+N[4])/2):R(N,Math.ceil((J+N[4])/4));return new V(N[0],N[1],N[2],N[3],de,xe)},V=(function(){function y(b,B,N,D,J,de){this.initialValue=b,this.errorValue=B,this.highStart=N,this.highValueIndex=D,this.index=J,this.data=de}return y.prototype.get=function(b){var B;if(b>=0){if(b<55296||b>56319&&b<=65535)return B=this.index[b>>I],B=(B<<ee)+(b&q),this.data[B];if(b<=65535)return B=this.index[ce+(b-55296>>I)],B=(B<<ee)+(b&q),this.data[B];if(b<this.highStart)return B=se-Z+(b>>H),B=this.index[B],B+=b>>I&ve,B=this.index[B],B=(B<<ee)+(b&q),this.data[B];if(b<=1114111)return this.data[this.highValueIndex]}return this.errorValue},y})(),K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ne=typeof Uint8Array>"u"?[]:new Uint8Array(256),pe=0;pe<K.length;pe++)ne[K.charCodeAt(pe)]=pe;var Ce="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Ue=50,Ne=1,Ie=2,Pe=3,ze=4,gt=5,ie=7,Be=8,tt=9,Xe=10,et=11,Tt=12,Nt=13,Mt=14,Qt=15,pt=16,rt=17,Ut=18,rs=19,Ot=20,Dt=21,Oe=22,Ge=23,ft=24,ht=25,vt=26,kt=27,Vt=28,zt=29,Bs=30,Re=31,We=32,$t=33,wt=34,st=35,Ct=36,as=37,ps=38,ct=39,jt=40,Et=41,hs=42,Ys=43,Cs=[9001,65288],Tr="!",qt="",fr="",Ls=P(Ce),yr=[Bs,Ct],Hr=[Ne,Ie,Pe,gt],pr=[Xe,Be],Pr=[kt,vt],xa=Hr.concat(pr),Va=[ps,ct,jt,wt,st],ji=[Qt,Nt],oc=function(y,b){b===void 0&&(b="strict");var B=[],N=[],D=[];return y.forEach(function(J,de){var xe=Ls.get(J);if(xe>Ue?(D.push(!0),xe-=Ue):D.push(!1),["normal","auto","loose"].indexOf(b)!==-1&&[8208,8211,12316,12448].indexOf(J)!==-1)return N.push(de),B.push(pt);if(xe===ze||xe===et){if(de===0)return N.push(de),B.push(Bs);var be=B[de-1];return xa.indexOf(be)===-1?(N.push(N[de-1]),B.push(be)):(N.push(de),B.push(Bs))}if(N.push(de),xe===Re)return B.push(b==="strict"?Dt:as);if(xe===hs||xe===zt)return B.push(Bs);if(xe===Ys)return J>=131072&&J<=196605||J>=196608&&J<=262141?B.push(as):B.push(Bs);B.push(xe)}),[N,B,D]},li=function(y,b,B,N){var D=N[B];if(Array.isArray(y)?y.indexOf(D)!==-1:y===D)for(var J=B;J<=N.length;){J++;var de=N[J];if(de===b)return!0;if(de!==Xe)break}if(D===Xe)for(var J=B;J>0;){J--;var xe=N[J];if(Array.isArray(y)?y.indexOf(xe)!==-1:y===xe)for(var be=B;be<=N.length;){be++;var de=N[be];if(de===b)return!0;if(de!==Xe)break}if(xe!==Xe)break}return!1},Ni=function(y,b){for(var B=y;B>=0;){var N=b[B];if(N===Xe)B--;else return N}return 0},Co=function(y,b,B,N,D){if(B[N]===0)return qt;var J=N-1;if(Array.isArray(D)&&D[J]===!0)return qt;var de=J-1,xe=J+1,be=b[J],Ee=de>=0?b[de]:0,Qe=b[xe];if(be===Ie&&Qe===Pe)return qt;if(Hr.indexOf(be)!==-1)return Tr;if(Hr.indexOf(Qe)!==-1||pr.indexOf(Qe)!==-1)return qt;if(Ni(J,b)===Be)return fr;if(Ls.get(y[J])===et||(be===We||be===$t)&&Ls.get(y[xe])===et||be===ie||Qe===ie||be===tt||[Xe,Nt,Qt].indexOf(be)===-1&&Qe===tt||[rt,Ut,rs,ft,Vt].indexOf(Qe)!==-1||Ni(J,b)===Oe||li(Ge,Oe,J,b)||li([rt,Ut],Dt,J,b)||li(Tt,Tt,J,b))return qt;if(be===Xe)return fr;if(be===Ge||Qe===Ge)return qt;if(Qe===pt||be===pt)return fr;if([Nt,Qt,Dt].indexOf(Qe)!==-1||be===Mt||Ee===Ct&&ji.indexOf(be)!==-1||be===Vt&&Qe===Ct||Qe===Ot||yr.indexOf(Qe)!==-1&&be===ht||yr.indexOf(be)!==-1&&Qe===ht||be===kt&&[as,We,$t].indexOf(Qe)!==-1||[as,We,$t].indexOf(be)!==-1&&Qe===vt||yr.indexOf(be)!==-1&&Pr.indexOf(Qe)!==-1||Pr.indexOf(be)!==-1&&yr.indexOf(Qe)!==-1||[kt,vt].indexOf(be)!==-1&&(Qe===ht||[Oe,Qt].indexOf(Qe)!==-1&&b[xe+1]===ht)||[Oe,Qt].indexOf(be)!==-1&&Qe===ht||be===ht&&[ht,Vt,ft].indexOf(Qe)!==-1)return qt;if([ht,Vt,ft,rt,Ut].indexOf(Qe)!==-1)for(var Ke=J;Ke>=0;){var ot=b[Ke];if(ot===ht)return qt;if([Vt,ft].indexOf(ot)!==-1)Ke--;else break}if([kt,vt].indexOf(Qe)!==-1)for(var Ke=[rt,Ut].indexOf(be)!==-1?de:J;Ke>=0;){var ot=b[Ke];if(ot===ht)return qt;if([Vt,ft].indexOf(ot)!==-1)Ke--;else break}if(ps===be&&[ps,ct,wt,st].indexOf(Qe)!==-1||[ct,wt].indexOf(be)!==-1&&[ct,jt].indexOf(Qe)!==-1||[jt,st].indexOf(be)!==-1&&Qe===jt||Va.indexOf(be)!==-1&&[Ot,vt].indexOf(Qe)!==-1||Va.indexOf(Qe)!==-1&&be===kt||yr.indexOf(be)!==-1&&yr.indexOf(Qe)!==-1||be===ft&&yr.indexOf(Qe)!==-1||yr.concat(ht).indexOf(be)!==-1&&Qe===Oe&&Cs.indexOf(y[xe])===-1||yr.concat(ht).indexOf(Qe)!==-1&&be===Ut)return qt;if(be===Et&&Qe===Et){for(var Ht=B[J],Ft=1;Ht>0&&(Ht--,b[Ht]===Et);)Ft++;if(Ft%2!==0)return qt}return be===We&&Qe===$t?qt:fr},nl=function(y,b){b||(b={lineBreak:"normal",wordBreak:"normal"});var B=oc(y,b.lineBreak),N=B[0],D=B[1],J=B[2];(b.wordBreak==="break-all"||b.wordBreak==="break-word")&&(D=D.map(function(xe){return[ht,Bs,hs].indexOf(xe)!==-1?as:xe}));var de=b.wordBreak==="keep-all"?J.map(function(xe,be){return xe&&y[be]>=19968&&y[be]<=40959}):void 0;return[N,D,de]},al=(function(){function y(b,B,N,D){this.codePoints=b,this.required=B===Tr,this.start=N,this.end=D}return y.prototype.slice=function(){return x.apply(void 0,this.codePoints.slice(this.start,this.end))},y})(),cc=function(y,b){var B=p(y),N=nl(B,b),D=N[0],J=N[1],de=N[2],xe=B.length,be=0,Ee=0;return{next:function(){if(Ee>=xe)return{done:!0,value:null};for(var Qe=qt;Ee<xe&&(Qe=Co(B,J,D,++Ee,de))===qt;);if(Qe!==qt||Ee===xe){var Ke=new al(B,Qe,be,Ee);return be=Ee,{value:Ke,done:!1}}return{done:!0,value:null}}}},Nl=1,hn=2,Jl=4,$a=8,Ga=10,Bl=47,Wl=92,EA=9,TA=32,Ac=34,aa=61,Xl=35,il=36,cr=37,So=39,oi=40,Bi=41,UA=95,wr=45,_n=33,wn=60,Rc=62,bd=64,FA=91,Fa=93,LA=61,MA=123,qa=63,dc=125,QA=124,vd=126,_A=128,Hc=65533,Pc=42,jn=43,ll=44,Zl=58,uc=59,ki=46,bs=0,yd=8,IA=11,wd=14,ci=31,ia=127,Ya=-1,Eo=48,Ja=97,To=101,kl=102,jd=117,Ci=122,hc=65,fc=69,In=70,Cl=85,Si=90,zr=function(y){return y>=Eo&&y<=57},zc=function(y){return y>=55296&&y<=57343},Ei=function(y){return zr(y)||y>=hc&&y<=In||y>=Ja&&y<=kl},eo=function(y){return y>=Ja&&y<=Ci},to=function(y){return y>=hc&&y<=Si},pc=function(y){return eo(y)||to(y)},OA=function(y){return y>=_A},Ti=function(y){return y===Ga||y===EA||y===TA},Ui=function(y){return pc(y)||OA(y)||y===UA},DA=function(y){return Ui(y)||zr(y)||y===wr},so=function(y){return y>=bs&&y<=yd||y===IA||y>=wd&&y<=ci||y===ia},ol=function(y,b){return y!==Wl?!1:b!==Ga},M=function(y,b,B){return y===wr?Ui(b)||ol(b,B):Ui(y)?!0:!!(y===Wl&&ol(y,b))},le=function(y,b,B){return y===jn||y===wr?zr(b)?!0:b===ki&&zr(B):zr(y===ki?b:y)},je=function(y){var b=0,B=1;(y[b]===jn||y[b]===wr)&&(y[b]===wr&&(B=-1),b++);for(var N=[];zr(y[b]);)N.push(y[b++]);var D=N.length?parseInt(x.apply(void 0,N),10):0;y[b]===ki&&b++;for(var J=[];zr(y[b]);)J.push(y[b++]);var de=J.length,xe=de?parseInt(x.apply(void 0,J),10):0;(y[b]===fc||y[b]===To)&&b++;var be=1;(y[b]===jn||y[b]===wr)&&(y[b]===wr&&(be=-1),b++);for(var Ee=[];zr(y[b]);)Ee.push(y[b++]);var Qe=Ee.length?parseInt(x.apply(void 0,Ee),10):0;return B*(D+xe*Math.pow(10,-de))*Math.pow(10,be*Qe)},Se={type:2},De={type:3},dt={type:4},yt={type:13},Zt={type:8},ns={type:21},ws={type:9},Us={type:10},tr={type:11},Jr={type:12},fn={type:14},mr={type:23},On={type:1},Nn={type:25},la={type:24},ro={type:26},cl={type:27},no={type:28},RA={type:29},Kc={type:31},Fi={type:32},Li=(function(){function y(){this._value=[]}return y.prototype.write=function(b){this._value=this._value.concat(p(b))},y.prototype.read=function(){for(var b=[],B=this.consumeToken();B!==Fi;)b.push(B),B=this.consumeToken();return b},y.prototype.consumeToken=function(){var b=this.consumeCodePoint();switch(b){case Ac:return this.consumeStringToken(Ac);case Xl:var B=this.peekCodePoint(0),N=this.peekCodePoint(1),D=this.peekCodePoint(2);if(DA(B)||ol(N,D)){var J=M(B,N,D)?hn:Nl,de=this.consumeName();return{type:5,value:de,flags:J}}break;case il:if(this.peekCodePoint(0)===aa)return this.consumeCodePoint(),yt;break;case So:return this.consumeStringToken(So);case oi:return Se;case Bi:return De;case Pc:if(this.peekCodePoint(0)===aa)return this.consumeCodePoint(),fn;break;case jn:if(le(b,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(b),this.consumeNumericToken();break;case ll:return dt;case wr:var xe=b,be=this.peekCodePoint(0),Ee=this.peekCodePoint(1);if(le(xe,be,Ee))return this.reconsumeCodePoint(b),this.consumeNumericToken();if(M(xe,be,Ee))return this.reconsumeCodePoint(b),this.consumeIdentLikeToken();if(be===wr&&Ee===Rc)return this.consumeCodePoint(),this.consumeCodePoint(),la;break;case ki:if(le(b,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(b),this.consumeNumericToken();break;case Bl:if(this.peekCodePoint(0)===Pc)for(this.consumeCodePoint();;){var Qe=this.consumeCodePoint();if(Qe===Pc&&(Qe=this.consumeCodePoint(),Qe===Bl))return this.consumeToken();if(Qe===Ya)return this.consumeToken()}break;case Zl:return ro;case uc:return cl;case wn:if(this.peekCodePoint(0)===_n&&this.peekCodePoint(1)===wr&&this.peekCodePoint(2)===wr)return this.consumeCodePoint(),this.consumeCodePoint(),Nn;break;case bd:var Ke=this.peekCodePoint(0),ot=this.peekCodePoint(1),Ht=this.peekCodePoint(2);if(M(Ke,ot,Ht)){var de=this.consumeName();return{type:7,value:de}}break;case FA:return no;case Wl:if(ol(b,this.peekCodePoint(0)))return this.reconsumeCodePoint(b),this.consumeIdentLikeToken();break;case Fa:return RA;case LA:if(this.peekCodePoint(0)===aa)return this.consumeCodePoint(),Zt;break;case MA:return tr;case dc:return Jr;case jd:case Cl:var Ft=this.peekCodePoint(0),It=this.peekCodePoint(1);return Ft===jn&&(Ei(It)||It===qa)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(b),this.consumeIdentLikeToken();case QA:if(this.peekCodePoint(0)===aa)return this.consumeCodePoint(),ws;if(this.peekCodePoint(0)===QA)return this.consumeCodePoint(),ns;break;case vd:if(this.peekCodePoint(0)===aa)return this.consumeCodePoint(),Us;break;case Ya:return Fi}return Ti(b)?(this.consumeWhiteSpace(),Kc):zr(b)?(this.reconsumeCodePoint(b),this.consumeNumericToken()):Ui(b)?(this.reconsumeCodePoint(b),this.consumeIdentLikeToken()):{type:6,value:x(b)}},y.prototype.consumeCodePoint=function(){var b=this._value.shift();return typeof b>"u"?-1:b},y.prototype.reconsumeCodePoint=function(b){this._value.unshift(b)},y.prototype.peekCodePoint=function(b){return b>=this._value.length?-1:this._value[b]},y.prototype.consumeUnicodeRangeToken=function(){for(var b=[],B=this.consumeCodePoint();Ei(B)&&b.length<6;)b.push(B),B=this.consumeCodePoint();for(var N=!1;B===qa&&b.length<6;)b.push(B),B=this.consumeCodePoint(),N=!0;if(N){var D=parseInt(x.apply(void 0,b.map(function(be){return be===qa?Eo:be})),16),J=parseInt(x.apply(void 0,b.map(function(be){return be===qa?In:be})),16);return{type:30,start:D,end:J}}var de=parseInt(x.apply(void 0,b),16);if(this.peekCodePoint(0)===wr&&Ei(this.peekCodePoint(1))){this.consumeCodePoint(),B=this.consumeCodePoint();for(var xe=[];Ei(B)&&xe.length<6;)xe.push(B),B=this.consumeCodePoint();var J=parseInt(x.apply(void 0,xe),16);return{type:30,start:de,end:J}}else return{type:30,start:de,end:de}},y.prototype.consumeIdentLikeToken=function(){var b=this.consumeName();return b.toLowerCase()==="url"&&this.peekCodePoint(0)===oi?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===oi?(this.consumeCodePoint(),{type:19,value:b}):{type:20,value:b}},y.prototype.consumeUrlToken=function(){var b=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ya)return{type:22,value:""};var B=this.peekCodePoint(0);if(B===So||B===Ac){var N=this.consumeStringToken(this.consumeCodePoint());return N.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Ya||this.peekCodePoint(0)===Bi)?(this.consumeCodePoint(),{type:22,value:N.value}):(this.consumeBadUrlRemnants(),mr)}for(;;){var D=this.consumeCodePoint();if(D===Ya||D===Bi)return{type:22,value:x.apply(void 0,b)};if(Ti(D))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Ya||this.peekCodePoint(0)===Bi?(this.consumeCodePoint(),{type:22,value:x.apply(void 0,b)}):(this.consumeBadUrlRemnants(),mr);if(D===Ac||D===So||D===oi||so(D))return this.consumeBadUrlRemnants(),mr;if(D===Wl)if(ol(D,this.peekCodePoint(0)))b.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),mr;else b.push(D)}},y.prototype.consumeWhiteSpace=function(){for(;Ti(this.peekCodePoint(0));)this.consumeCodePoint()},y.prototype.consumeBadUrlRemnants=function(){for(;;){var b=this.consumeCodePoint();if(b===Bi||b===Ya)return;ol(b,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},y.prototype.consumeStringSlice=function(b){for(var B=5e4,N="";b>0;){var D=Math.min(B,b);N+=x.apply(void 0,this._value.splice(0,D)),b-=D}return this._value.shift(),N},y.prototype.consumeStringToken=function(b){var B="",N=0;do{var D=this._value[N];if(D===Ya||D===void 0||D===b)return B+=this.consumeStringSlice(N),{type:0,value:B};if(D===Ga)return this._value.splice(0,N),On;if(D===Wl){var J=this._value[N+1];J!==Ya&&J!==void 0&&(J===Ga?(B+=this.consumeStringSlice(N),N=-1,this._value.shift()):ol(D,J)&&(B+=this.consumeStringSlice(N),B+=x(this.consumeEscapedCodePoint()),N=-1))}N++}while(!0)},y.prototype.consumeNumber=function(){var b=[],B=Jl,N=this.peekCodePoint(0);for((N===jn||N===wr)&&b.push(this.consumeCodePoint());zr(this.peekCodePoint(0));)b.push(this.consumeCodePoint());N=this.peekCodePoint(0);var D=this.peekCodePoint(1);if(N===ki&&zr(D))for(b.push(this.consumeCodePoint(),this.consumeCodePoint()),B=$a;zr(this.peekCodePoint(0));)b.push(this.consumeCodePoint());N=this.peekCodePoint(0),D=this.peekCodePoint(1);var J=this.peekCodePoint(2);if((N===fc||N===To)&&((D===jn||D===wr)&&zr(J)||zr(D)))for(b.push(this.consumeCodePoint(),this.consumeCodePoint()),B=$a;zr(this.peekCodePoint(0));)b.push(this.consumeCodePoint());return[je(b),B]},y.prototype.consumeNumericToken=function(){var b=this.consumeNumber(),B=b[0],N=b[1],D=this.peekCodePoint(0),J=this.peekCodePoint(1),de=this.peekCodePoint(2);if(M(D,J,de)){var xe=this.consumeName();return{type:15,number:B,flags:N,unit:xe}}return D===cr?(this.consumeCodePoint(),{type:16,number:B,flags:N}):{type:17,number:B,flags:N}},y.prototype.consumeEscapedCodePoint=function(){var b=this.consumeCodePoint();if(Ei(b)){for(var B=x(b);Ei(this.peekCodePoint(0))&&B.length<6;)B+=x(this.consumeCodePoint());Ti(this.peekCodePoint(0))&&this.consumeCodePoint();var N=parseInt(B,16);return N===0||zc(N)||N>1114111?Hc:N}return b===Ya?Hc:b},y.prototype.consumeName=function(){for(var b="";;){var B=this.consumeCodePoint();if(DA(B))b+=x(B);else if(ol(B,this.peekCodePoint(0)))b+=x(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(B),b}},y})(),Uo=(function(){function y(b){this._tokens=b}return y.create=function(b){var B=new Li;return B.write(b),new y(B.read())},y.parseValue=function(b){return y.create(b).parseComponentValue()},y.parseValues=function(b){return y.create(b).parseComponentValues()},y.prototype.parseComponentValue=function(){for(var b=this.consumeToken();b.type===31;)b=this.consumeToken();if(b.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(b);var B=this.consumeComponentValue();do b=this.consumeToken();while(b.type===31);if(b.type===32)return B;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},y.prototype.parseComponentValues=function(){for(var b=[];;){var B=this.consumeComponentValue();if(B.type===32)return b;b.push(B),b.push()}},y.prototype.consumeComponentValue=function(){var b=this.consumeToken();switch(b.type){case 11:case 28:case 2:return this.consumeSimpleBlock(b.type);case 19:return this.consumeFunction(b)}return b},y.prototype.consumeSimpleBlock=function(b){for(var B={type:b,values:[]},N=this.consumeToken();;){if(N.type===32||Vc(N,b))return B;this.reconsumeToken(N),B.values.push(this.consumeComponentValue()),N=this.consumeToken()}},y.prototype.consumeFunction=function(b){for(var B={name:b.value,values:[],type:18};;){var N=this.consumeToken();if(N.type===32||N.type===3)return B;this.reconsumeToken(N),B.values.push(this.consumeComponentValue())}},y.prototype.consumeToken=function(){var b=this._tokens.shift();return typeof b>"u"?Fi:b},y.prototype.reconsumeToken=function(b){this._tokens.unshift(b)},y})(),Ai=function(y){return y.type===15},Wr=function(y){return y.type===17},$s=function(y){return y.type===20},Fo=function(y){return y.type===0},Lo=function(y,b){return $s(y)&&y.value===b},Al=function(y){return y.type!==31},Bn=function(y){return y.type!==31&&y.type!==4},$n=function(y){var b=[],B=[];return y.forEach(function(N){if(N.type===4){if(B.length===0)throw new Error("Error parsing function args, zero tokens for arg");b.push(B),B=[];return}N.type!==31&&B.push(N)}),B.length&&b.push(B),b},Vc=function(y,b){return b===11&&y.type===12||b===28&&y.type===29?!0:b===2&&y.type===3},Mi=function(y){return y.type===17||y.type===15},ar=function(y){return y.type===16||Mi(y)},Qi=function(y){return y.length>1?[y[0],y[1]]:[y[0]]},Ur={type:17,number:0,flags:Jl},mc={type:16,number:50,flags:Jl},Gn={type:16,number:100,flags:Jl},_i=function(y,b,B){var N=y[0],D=y[1];return[Os(N,b),Os(typeof D<"u"?D:N,B)]},Os=function(y,b){if(y.type===16)return y.number/100*b;if(Ai(y))switch(y.unit){case"rem":case"em":return 16*y.number;case"px":default:return y.number}return y.number},ba="deg",dl="grad",ul="rad",Sl="turn",ao={name:"angle",parse:function(y,b){if(b.type===15)switch(b.unit){case ba:return Math.PI*b.number/180;case dl:return Math.PI/200*b.number;case ul:return b.number;case Sl:return Math.PI*2*b.number}throw new Error("Unsupported angle type")}},gc=function(y){return y.type===15&&(y.unit===ba||y.unit===dl||y.unit===ul||y.unit===Sl)},cn=function(y){var b=y.filter($s).map(function(B){return B.value}).join(" ");switch(b){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ur,Ur];case"to top":case"bottom":return La(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ur,Gn];case"to right":case"left":return La(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Gn,Gn];case"to bottom":case"top":return La(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Gn,Ur];case"to left":case"right":return La(270)}return 0},La=function(y){return Math.PI*y/180},oa={name:"color",parse:function(y,b){if(b.type===18){var B=Tl[b.name];if(typeof B>"u")throw new Error('Attempting to parse an unsupported color function "'+b.name+'"');return B(y,b.values)}if(b.type===5){if(b.value.length===3){var N=b.value.substring(0,1),D=b.value.substring(1,2),J=b.value.substring(2,3);return va(parseInt(N+N,16),parseInt(D+D,16),parseInt(J+J,16),1)}if(b.value.length===4){var N=b.value.substring(0,1),D=b.value.substring(1,2),J=b.value.substring(2,3),de=b.value.substring(3,4);return va(parseInt(N+N,16),parseInt(D+D,16),parseInt(J+J,16),parseInt(de+de,16)/255)}if(b.value.length===6){var N=b.value.substring(0,2),D=b.value.substring(2,4),J=b.value.substring(4,6);return va(parseInt(N,16),parseInt(D,16),parseInt(J,16),1)}if(b.value.length===8){var N=b.value.substring(0,2),D=b.value.substring(2,4),J=b.value.substring(4,6),de=b.value.substring(6,8);return va(parseInt(N,16),parseInt(D,16),parseInt(J,16),parseInt(de,16)/255)}}if(b.type===20){var xe=pn[b.value.toUpperCase()];if(typeof xe<"u")return xe}return pn.TRANSPARENT}},ca=function(y){return(255&y)===0},Js=function(y){var b=255&y,B=255&y>>8,N=255&y>>16,D=255&y>>24;return b<255?"rgba("+D+","+N+","+B+","+b/255+")":"rgb("+D+","+N+","+B+")"},va=function(y,b,B,N){return(y<<24|b<<16|B<<8|Math.round(N*255)<<0)>>>0},xc=function(y,b){if(y.type===17)return y.number;if(y.type===16){var B=b===3?1:255;return b===3?y.number/100*B:Math.round(y.number/100*B)}return 0},bc=function(y,b){var B=b.filter(Bn);if(B.length===3){var N=B.map(xc),D=N[0],J=N[1],de=N[2];return va(D,J,de,1)}if(B.length===4){var xe=B.map(xc),D=xe[0],J=xe[1],de=xe[2],be=xe[3];return va(D,J,de,be)}return 0};function hl(y,b,B){return B<0&&(B+=1),B>=1&&(B-=1),B<1/6?(b-y)*B*6+y:B<1/2?b:B<2/3?(b-y)*6*(2/3-B)+y:y}var El=function(y,b){var B=b.filter(Bn),N=B[0],D=B[1],J=B[2],de=B[3],xe=(N.type===17?La(N.number):ao.parse(y,N))/(Math.PI*2),be=ar(D)?D.number/100:0,Ee=ar(J)?J.number/100:0,Qe=typeof de<"u"&&ar(de)?Os(de,1):1;if(be===0)return va(Ee*255,Ee*255,Ee*255,1);var Ke=Ee<=.5?Ee*(be+1):Ee+be-Ee*be,ot=Ee*2-Ke,Ht=hl(ot,Ke,xe+1/3),Ft=hl(ot,Ke,xe),It=hl(ot,Ke,xe-1/3);return va(Ht*255,Ft*255,It*255,Qe)},Tl={hsl:El,hsla:El,rgb:bc,rgba:bc},fl=function(y,b){return oa.parse(y,Uo.create(b).parseComponentValue())},pn={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},io={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(y,b){return b.map(function(B){if($s(B))switch(B.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ya={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ma=function(y,b){var B=oa.parse(y,b[0]),N=b[1];return N&&ar(N)?{color:B,stop:N}:{color:B,stop:null}},ir=function(y,b){var B=y[0],N=y[y.length-1];B.stop===null&&(B.stop=Ur),N.stop===null&&(N.stop=Gn);for(var D=[],J=0,de=0;de<y.length;de++){var xe=y[de].stop;if(xe!==null){var be=Os(xe,b);be>J?D.push(be):D.push(J),J=be}else D.push(null)}for(var Ee=null,de=0;de<D.length;de++){var Qe=D[de];if(Qe===null)Ee===null&&(Ee=de);else if(Ee!==null){for(var Ke=de-Ee,ot=D[Ee-1],Ht=(Qe-ot)/(Ke+1),Ft=1;Ft<=Ke;Ft++)D[Ee+Ft-1]=Ht*Ft;Ee=null}}return y.map(function(It,is){var Yt=It.color;return{color:Yt,stop:Math.max(Math.min(1,D[is]/b),0)}})},sr=function(y,b,B){var N=b/2,D=B/2,J=Os(y[0],b)-N,de=D-Os(y[1],B);return(Math.atan2(de,J)+Math.PI*2)%(Math.PI*2)},Er=function(y,b,B){var N=typeof y=="number"?y:sr(y,b,B),D=Math.abs(b*Math.sin(N))+Math.abs(B*Math.cos(N)),J=b/2,de=B/2,xe=D/2,be=Math.sin(N-Math.PI/2)*xe,Ee=Math.cos(N-Math.PI/2)*xe;return[D,J-Ee,J+Ee,de-be,de+be]},Ar=function(y,b){return Math.sqrt(y*y+b*b)},pl=function(y,b,B,N,D){var J=[[0,0],[0,b],[y,0],[y,b]];return J.reduce(function(de,xe){var be=xe[0],Ee=xe[1],Qe=Ar(B-be,N-Ee);return(D?Qe<de.optimumDistance:Qe>de.optimumDistance)?{optimumCorner:xe,optimumDistance:Qe}:de},{optimumDistance:D?1/0:-1/0,optimumCorner:null}).optimumCorner},ml=function(y,b,B,N,D){var J=0,de=0;switch(y.size){case 0:y.shape===0?J=de=Math.min(Math.abs(b),Math.abs(b-N),Math.abs(B),Math.abs(B-D)):y.shape===1&&(J=Math.min(Math.abs(b),Math.abs(b-N)),de=Math.min(Math.abs(B),Math.abs(B-D)));break;case 2:if(y.shape===0)J=de=Math.min(Ar(b,B),Ar(b,B-D),Ar(b-N,B),Ar(b-N,B-D));else if(y.shape===1){var xe=Math.min(Math.abs(B),Math.abs(B-D))/Math.min(Math.abs(b),Math.abs(b-N)),be=pl(N,D,b,B,!0),Ee=be[0],Qe=be[1];J=Ar(Ee-b,(Qe-B)/xe),de=xe*J}break;case 1:y.shape===0?J=de=Math.max(Math.abs(b),Math.abs(b-N),Math.abs(B),Math.abs(B-D)):y.shape===1&&(J=Math.max(Math.abs(b),Math.abs(b-N)),de=Math.max(Math.abs(B),Math.abs(B-D)));break;case 3:if(y.shape===0)J=de=Math.max(Ar(b,B),Ar(b,B-D),Ar(b-N,B),Ar(b-N,B-D));else if(y.shape===1){var xe=Math.max(Math.abs(B),Math.abs(B-D))/Math.max(Math.abs(b),Math.abs(b-N)),Ke=pl(N,D,b,B,!1),Ee=Ke[0],Qe=Ke[1];J=Ar(Ee-b,(Qe-B)/xe),de=xe*J}break}return Array.isArray(y.size)&&(J=Os(y.size[0],N),de=y.size.length===2?Os(y.size[1],D):J),[J,de]},vc=function(y,b){var B=La(180),N=[];return $n(b).forEach(function(D,J){if(J===0){var de=D[0];if(de.type===20&&de.value==="to"){B=cn(D);return}else if(gc(de)){B=ao.parse(y,de);return}}var xe=Ma(y,D);N.push(xe)}),{angle:B,stops:N,type:1}},Mo=function(y,b){var B=La(180),N=[];return $n(b).forEach(function(D,J){if(J===0){var de=D[0];if(de.type===20&&["top","left","right","bottom"].indexOf(de.value)!==-1){B=cn(D);return}else if(gc(de)){B=(ao.parse(y,de)+La(270))%La(360);return}}var xe=Ma(y,D);N.push(xe)}),{angle:B,stops:N,type:1}},Iu=function(y,b){var B=La(180),N=[],D=1,J=0,de=3,xe=[];return $n(b).forEach(function(be,Ee){var Qe=be[0];if(Ee===0){if($s(Qe)&&Qe.value==="linear"){D=1;return}else if($s(Qe)&&Qe.value==="radial"){D=2;return}}if(Qe.type===18){if(Qe.name==="from"){var Ke=oa.parse(y,Qe.values[0]);N.push({stop:Ur,color:Ke})}else if(Qe.name==="to"){var Ke=oa.parse(y,Qe.values[0]);N.push({stop:Gn,color:Ke})}else if(Qe.name==="color-stop"){var ot=Qe.values.filter(Bn);if(ot.length===2){var Ke=oa.parse(y,ot[1]),Ht=ot[0];Wr(Ht)&&N.push({stop:{type:16,number:Ht.number*100,flags:Ht.flags},color:Ke})}}}}),D===1?{angle:(B+La(180))%La(360),stops:N,type:D}:{size:de,shape:J,stops:N,position:xe,type:D}},Ou="closest-side",Du="farthest-side",Ru="closest-corner",Nd="farthest-corner",Bd="circle",Qo="ellipse",di="cover",$c="contain",ui=function(y,b){var B=0,N=3,D=[],J=[];return $n(b).forEach(function(de,xe){var be=!0;if(xe===0){var Ee=!1;be=de.reduce(function(Ke,ot){if(Ee)if($s(ot))switch(ot.value){case"center":return J.push(mc),Ke;case"top":case"left":return J.push(Ur),Ke;case"right":case"bottom":return J.push(Gn),Ke}else(ar(ot)||Mi(ot))&&J.push(ot);else if($s(ot))switch(ot.value){case Bd:return B=0,!1;case Qo:return B=1,!1;case"at":return Ee=!0,!1;case Ou:return N=0,!1;case di:case Du:return N=1,!1;case $c:case Ru:return N=2,!1;case Nd:return N=3,!1}else if(Mi(ot)||ar(ot))return Array.isArray(N)||(N=[]),N.push(ot),!1;return Ke},be)}if(be){var Qe=Ma(y,de);D.push(Qe)}}),{size:N,shape:B,stops:D,position:J,type:2}},Ul=function(y,b){var B=0,N=3,D=[],J=[];return $n(b).forEach(function(de,xe){var be=!0;if(xe===0?be=de.reduce(function(Qe,Ke){if($s(Ke))switch(Ke.value){case"center":return J.push(mc),!1;case"top":case"left":return J.push(Ur),!1;case"right":case"bottom":return J.push(Gn),!1}else if(ar(Ke)||Mi(Ke))return J.push(Ke),!1;return Qe},be):xe===1&&(be=de.reduce(function(Qe,Ke){if($s(Ke))switch(Ke.value){case Bd:return B=0,!1;case Qo:return B=1,!1;case $c:case Ou:return N=0,!1;case Du:return N=1,!1;case Ru:return N=2,!1;case di:case Nd:return N=3,!1}else if(Mi(Ke)||ar(Ke))return Array.isArray(N)||(N=[]),N.push(Ke),!1;return Qe},be)),be){var Ee=Ma(y,de);D.push(Ee)}}),{size:N,shape:B,stops:D,position:J,type:2}},kd=function(y){return y.type===1},HA=function(y){return y.type===2},yc={name:"image",parse:function(y,b){if(b.type===22){var B={url:b.value,type:0};return y.cache.addImage(b.value),B}if(b.type===18){var N=Fl[b.name];if(typeof N>"u")throw new Error('Attempting to parse an unsupported image function "'+b.name+'"');return N(y,b.values)}throw new Error("Unsupported image type "+b.type)}};function Cd(y){return!(y.type===20&&y.value==="none")&&(y.type!==18||!!Fl[y.name])}var Fl={"linear-gradient":vc,"-moz-linear-gradient":Mo,"-ms-linear-gradient":Mo,"-o-linear-gradient":Mo,"-webkit-linear-gradient":Mo,"radial-gradient":ui,"-moz-radial-gradient":Ul,"-ms-radial-gradient":Ul,"-o-radial-gradient":Ul,"-webkit-radial-gradient":Ul,"-webkit-gradient":Iu},PA={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(y,b){if(b.length===0)return[];var B=b[0];return B.type===20&&B.value==="none"?[]:b.filter(function(N){return Bn(N)&&Cd(N)}).map(function(N){return yc.parse(y,N)})}},wa={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(y,b){return b.map(function(B){if($s(B))switch(B.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Aa={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(y,b){return $n(b).map(function(B){return B.filter(ar)}).map(Qi)}},Sd={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(y,b){return $n(b).map(function(B){return B.filter($s).map(function(N){return N.value}).join(" ")}).map(ja)}},ja=function(y){switch(y){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},lo;(function(y){y.AUTO="auto",y.CONTAIN="contain",y.COVER="cover"})(lo||(lo={}));var Ii={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(y,b){return $n(b).map(function(B){return B.filter(zA)})}},zA=function(y){return $s(y)||ar(y)},oo=function(y){return{name:"border-"+y+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},_o=oo("top"),KA=oo("right"),Ed=oo("bottom"),Gc=oo("left"),wc=function(y){return{name:"border-radius-"+y,initialValue:"0 0",prefix:!1,type:1,parse:function(b,B){return Qi(B.filter(ar))}}},Oi=wc("top-left"),qc=wc("top-right"),jc=wc("bottom-right"),Td=wc("bottom-left"),Io=function(y){return{name:"border-"+y+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(b,B){switch(B){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Di=Io("top"),Ri=Io("right"),Oo=Io("bottom"),Hi=Io("left"),Qa=function(y){return{name:"border-"+y+"-width",initialValue:"0",type:0,prefix:!1,parse:function(b,B){return Ai(B)?B.number:0}}},hi=Qa("top"),Yh=Qa("right"),Hu=Qa("bottom"),Ud=Qa("left"),Jh={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},da={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(y,b){switch(b){case"rtl":return 1;case"ltr":default:return 0}}},Fr={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(y,b){return b.filter($s).reduce(function(B,N){return B|Gs(N.value)},0)}},Gs=function(y){switch(y){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},_a={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(y,b){switch(b){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},An={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(y,b){return b.type===20&&b.value==="normal"?0:b.type===17||b.type===15?b.number:0}},Wa;(function(y){y.NORMAL="normal",y.STRICT="strict"})(Wa||(Wa={}));var Do={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(y,b){switch(b){case"strict":return Wa.STRICT;case"normal":default:return Wa.NORMAL}}},Pu={name:"line-height",initialValue:"normal",prefix:!1,type:4},Ll=function(y,b){return $s(y)&&y.value==="normal"?1.2*b:y.type===17?b*y.number:ar(y)?Os(y,b):b},ua={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(y,b){return b.type===20&&b.value==="none"?null:yc.parse(y,b)}},Nc={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(y,b){switch(b){case"inside":return 0;case"outside":default:return 1}}},VA={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(y,b){switch(b){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},co=function(y){return{name:"margin-"+y,initialValue:"0",prefix:!1,type:4}},Fd=co("top"),Ro=co("right"),Ml=co("bottom"),Ho=co("left"),Pi={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(y,b){return b.filter($s).map(function(B){switch(B.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Yc={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(y,b){switch(b){case"break-word":return"break-word";case"normal":default:return"normal"}}},Ql=function(y){return{name:"padding-"+y,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Po=Ql("top"),Ld=Ql("right"),zo=Ql("bottom"),ha=Ql("left"),Md={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(y,b){switch(b){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Wh={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(y,b){switch(b){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},r0={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(y,b){return b.length===1&&Lo(b[0],"none")?[]:$n(b).map(function(B){for(var N={color:pn.TRANSPARENT,offsetX:Ur,offsetY:Ur,blur:Ur},D=0,J=0;J<B.length;J++){var de=B[J];Mi(de)?(D===0?N.offsetX=de:D===1?N.offsetY=de:N.blur=de,D++):N.color=oa.parse(y,de)}return N})}},n0={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(y,b){switch(b){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},a0={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(y,b){if(b.type===20&&b.value==="none")return null;if(b.type===18){var B=$A[b.name];if(typeof B>"u")throw new Error('Attempting to parse an unsupported transform function "'+b.name+'"');return B(b.values)}return null}},mn=function(y){var b=y.filter(function(B){return B.type===17}).map(function(B){return B.number});return b.length===6?b:null},Jc=function(y){var b=y.filter(function(be){return be.type===17}).map(function(be){return be.number}),B=b[0],N=b[1];b[2],b[3];var D=b[4],J=b[5];b[6],b[7],b[8],b[9],b[10],b[11];var de=b[12],xe=b[13];return b[14],b[15],b.length===16?[B,N,D,J,de,xe]:null},$A={matrix:mn,matrix3d:Jc},Wc={type:16,number:50,flags:Jl},Qd=[Wc,Wc],v={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(y,b){var B=b.filter(ar);return B.length!==2?Qd:[B[0],B[1]]}},E={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(y,b){switch(b){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},O;(function(y){y.NORMAL="normal",y.BREAK_ALL="break-all",y.KEEP_ALL="keep-all"})(O||(O={}));for(var G={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(y,b){switch(b){case"break-all":return O.BREAK_ALL;case"keep-all":return O.KEEP_ALL;case"normal":default:return O.NORMAL}}},oe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(y,b){if(b.type===20)return{auto:!0,order:0};if(Wr(b))return{auto:!1,order:b.number};throw new Error("Invalid z-index number parsed")}},ue={name:"time",parse:function(y,b){if(b.type===15)switch(b.unit.toLowerCase()){case"s":return 1e3*b.number;case"ms":return b.number}throw new Error("Unsupported time type")}},he={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(y,b){return Wr(b)?b.number:1}},me={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ge={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(y,b){return b.filter($s).map(function(B){switch(B.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(B){return B!==0})}},we={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(y,b){var B=[],N=[];return b.forEach(function(D){switch(D.type){case 20:case 0:B.push(D.value);break;case 17:B.push(D.number.toString());break;case 4:N.push(B.join(" ")),B.length=0;break}}),B.length&&N.push(B.join(" ")),N.map(function(D){return D.indexOf(" ")===-1?D:"'"+D+"'"})}},Te={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},$e={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(y,b){if(Wr(b))return b.number;if($s(b))switch(b.value){case"bold":return 700;case"normal":default:return 400}return 400}},ye={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(y,b){return b.filter($s).map(function(B){return B.value})}},Le={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(y,b){switch(b){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Me=function(y,b){return(y&b)!==0},lt={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(y,b){if(b.length===0)return[];var B=b[0];return B.type===20&&B.value==="none"?[]:b}},Ve={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(y,b){if(b.length===0)return null;var B=b[0];if(B.type===20&&B.value==="none")return null;for(var N=[],D=b.filter(Al),J=0;J<D.length;J++){var de=D[J],xe=D[J+1];if(de.type===20){var be=xe&&Wr(xe)?xe.number:1;N.push({counter:de.value,increment:be})}}return N}},it={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(y,b){if(b.length===0)return[];for(var B=[],N=b.filter(Al),D=0;D<N.length;D++){var J=N[D],de=N[D+1];if($s(J)&&J.value!=="none"){var xe=de&&Wr(de)?de.number:0;B.push({counter:J.value,reset:xe})}}return B}},ut={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(y,b){return b.filter(Ai).map(function(B){return ue.parse(y,B)})}},Bt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(y,b){if(b.length===0)return null;var B=b[0];if(B.type===20&&B.value==="none")return null;var N=[],D=b.filter(Fo);if(D.length%2!==0)return null;for(var J=0;J<D.length;J+=2){var de=D[J].value,xe=D[J+1].value;N.push({open:de,close:xe})}return N}},xt=function(y,b,B){if(!y)return"";var N=y[Math.min(b,y.length-1)];return N?B?N.open:N.close:""},es={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(y,b){return b.length===1&&Lo(b[0],"none")?[]:$n(b).map(function(B){for(var N={color:255,offsetX:Ur,offsetY:Ur,blur:Ur,spread:Ur,inset:!1},D=0,J=0;J<B.length;J++){var de=B[J];Lo(de,"inset")?N.inset=!0:Mi(de)?(D===0?N.offsetX=de:D===1?N.offsetY=de:D===2?N.blur=de:N.spread=de,D++):N.color=oa.parse(y,de)}return N})}},Kt={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(y,b){var B=[0,1,2],N=[];return b.filter($s).forEach(function(D){switch(D.value){case"stroke":N.push(1);break;case"fill":N.push(0);break;case"markers":N.push(2);break}}),B.forEach(function(D){N.indexOf(D)===-1&&N.push(D)}),N}},ks={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Wt={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(y,b){return Ai(b)?b.number:0}},Hs=(function(){function y(b,B){var N,D;this.animationDuration=nt(b,ut,B.animationDuration),this.backgroundClip=nt(b,io,B.backgroundClip),this.backgroundColor=nt(b,ya,B.backgroundColor),this.backgroundImage=nt(b,PA,B.backgroundImage),this.backgroundOrigin=nt(b,wa,B.backgroundOrigin),this.backgroundPosition=nt(b,Aa,B.backgroundPosition),this.backgroundRepeat=nt(b,Sd,B.backgroundRepeat),this.backgroundSize=nt(b,Ii,B.backgroundSize),this.borderTopColor=nt(b,_o,B.borderTopColor),this.borderRightColor=nt(b,KA,B.borderRightColor),this.borderBottomColor=nt(b,Ed,B.borderBottomColor),this.borderLeftColor=nt(b,Gc,B.borderLeftColor),this.borderTopLeftRadius=nt(b,Oi,B.borderTopLeftRadius),this.borderTopRightRadius=nt(b,qc,B.borderTopRightRadius),this.borderBottomRightRadius=nt(b,jc,B.borderBottomRightRadius),this.borderBottomLeftRadius=nt(b,Td,B.borderBottomLeftRadius),this.borderTopStyle=nt(b,Di,B.borderTopStyle),this.borderRightStyle=nt(b,Ri,B.borderRightStyle),this.borderBottomStyle=nt(b,Oo,B.borderBottomStyle),this.borderLeftStyle=nt(b,Hi,B.borderLeftStyle),this.borderTopWidth=nt(b,hi,B.borderTopWidth),this.borderRightWidth=nt(b,Yh,B.borderRightWidth),this.borderBottomWidth=nt(b,Hu,B.borderBottomWidth),this.borderLeftWidth=nt(b,Ud,B.borderLeftWidth),this.boxShadow=nt(b,es,B.boxShadow),this.color=nt(b,Jh,B.color),this.direction=nt(b,da,B.direction),this.display=nt(b,Fr,B.display),this.float=nt(b,_a,B.cssFloat),this.fontFamily=nt(b,we,B.fontFamily),this.fontSize=nt(b,Te,B.fontSize),this.fontStyle=nt(b,Le,B.fontStyle),this.fontVariant=nt(b,ye,B.fontVariant),this.fontWeight=nt(b,$e,B.fontWeight),this.letterSpacing=nt(b,An,B.letterSpacing),this.lineBreak=nt(b,Do,B.lineBreak),this.lineHeight=nt(b,Pu,B.lineHeight),this.listStyleImage=nt(b,ua,B.listStyleImage),this.listStylePosition=nt(b,Nc,B.listStylePosition),this.listStyleType=nt(b,VA,B.listStyleType),this.marginTop=nt(b,Fd,B.marginTop),this.marginRight=nt(b,Ro,B.marginRight),this.marginBottom=nt(b,Ml,B.marginBottom),this.marginLeft=nt(b,Ho,B.marginLeft),this.opacity=nt(b,he,B.opacity);var J=nt(b,Pi,B.overflow);this.overflowX=J[0],this.overflowY=J[J.length>1?1:0],this.overflowWrap=nt(b,Yc,B.overflowWrap),this.paddingTop=nt(b,Po,B.paddingTop),this.paddingRight=nt(b,Ld,B.paddingRight),this.paddingBottom=nt(b,zo,B.paddingBottom),this.paddingLeft=nt(b,ha,B.paddingLeft),this.paintOrder=nt(b,Kt,B.paintOrder),this.position=nt(b,Wh,B.position),this.textAlign=nt(b,Md,B.textAlign),this.textDecorationColor=nt(b,me,(N=B.textDecorationColor)!==null&&N!==void 0?N:B.color),this.textDecorationLine=nt(b,ge,(D=B.textDecorationLine)!==null&&D!==void 0?D:B.textDecoration),this.textShadow=nt(b,r0,B.textShadow),this.textTransform=nt(b,n0,B.textTransform),this.transform=nt(b,a0,B.transform),this.transformOrigin=nt(b,v,B.transformOrigin),this.visibility=nt(b,E,B.visibility),this.webkitTextStrokeColor=nt(b,ks,B.webkitTextStrokeColor),this.webkitTextStrokeWidth=nt(b,Wt,B.webkitTextStrokeWidth),this.wordBreak=nt(b,G,B.wordBreak),this.zIndex=nt(b,oe,B.zIndex)}return y.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},y.prototype.isTransparent=function(){return ca(this.backgroundColor)},y.prototype.isTransformed=function(){return this.transform!==null},y.prototype.isPositioned=function(){return this.position!==0},y.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},y.prototype.isFloating=function(){return this.float!==0},y.prototype.isInlineLevel=function(){return Me(this.display,4)||Me(this.display,33554432)||Me(this.display,268435456)||Me(this.display,536870912)||Me(this.display,67108864)||Me(this.display,134217728)},y})(),Lr=(function(){function y(b,B){this.content=nt(b,lt,B.content),this.quotes=nt(b,Bt,B.quotes)}return y})(),Es=(function(){function y(b,B){this.counterIncrement=nt(b,Ve,B.counterIncrement),this.counterReset=nt(b,it,B.counterReset)}return y})(),nt=function(y,b,B){var N=new Li,D=B!==null&&typeof B<"u"?B.toString():b.initialValue;N.write(D);var J=new Uo(N.read());switch(b.type){case 2:var de=J.parseComponentValue();return b.parse(y,$s(de)?de.value:b.initialValue);case 0:return b.parse(y,J.parseComponentValue());case 1:return b.parse(y,J.parseComponentValues());case 4:return J.parseComponentValue();case 3:switch(b.format){case"angle":return ao.parse(y,J.parseComponentValue());case"color":return oa.parse(y,J.parseComponentValue());case"image":return yc.parse(y,J.parseComponentValue());case"length":var xe=J.parseComponentValue();return Mi(xe)?xe:Ur;case"length-percentage":var be=J.parseComponentValue();return ar(be)?be:Ur;case"time":return ue.parse(y,J.parseComponentValue())}break}},_t="data-html2canvas-debug",Xr=function(y){var b=y.getAttribute(_t);switch(b){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ms=function(y,b){var B=Xr(y);return B===1||b===B},vs=(function(){function y(b,B){if(this.context=b,this.textNodes=[],this.elements=[],this.flags=0,ms(B,3))debugger;this.styles=new Hs(b,window.getComputedStyle(B,null)),Wu(B)&&(this.styles.animationDuration.some(function(N){return N>0})&&(B.style.animationDuration="0s"),this.styles.transform!==null&&(B.style.transform="none")),this.bounds=f(this.context,B),ms(B,4)&&(this.flags|=16)}return y})(),gr="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",kn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gn=typeof Uint8Array>"u"?[]:new Uint8Array(256),xr=0;xr<kn.length;xr++)gn[kn.charCodeAt(xr)]=xr;for(var Cn=function(y){var b=y.length*.75,B=y.length,N,D=0,J,de,xe,be;y[y.length-1]==="="&&(b--,y[y.length-2]==="="&&b--);var Ee=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(b):new Array(b),Qe=Array.isArray(Ee)?Ee:new Uint8Array(Ee);for(N=0;N<B;N+=4)J=gn[y.charCodeAt(N)],de=gn[y.charCodeAt(N+1)],xe=gn[y.charCodeAt(N+2)],be=gn[y.charCodeAt(N+3)],Qe[D++]=J<<2|de>>4,Qe[D++]=(de&15)<<4|xe>>2,Qe[D++]=(xe&3)<<6|be&63;return Ee},Na=function(y){for(var b=y.length,B=[],N=0;N<b;N+=2)B.push(y[N+1]<<8|y[N]);return B},Sn=function(y){for(var b=y.length,B=[],N=0;N<b;N+=4)B.push(y[N+3]<<24|y[N+2]<<16|y[N+1]<<8|y[N]);return B},Ss=5,Ws=11,Mr=2,dr=Ws-Ss,En=65536>>Ss,Zr=1<<Ss,Xs=Zr-1,xn=1024>>Ss,br=En+xn,Tn=br,Un=32,Br=Tn+Un,rr=65536>>Ws,Ba=1<<dr,dn=Ba-1,ds=function(y,b,B){return y.slice?y.slice(b,B):new Uint16Array(Array.prototype.slice.call(y,b,B))},fs=function(y,b,B){return y.slice?y.slice(b,B):new Uint32Array(Array.prototype.slice.call(y,b,B))},lr=function(y,b){var B=Cn(y),N=Array.isArray(B)?Sn(B):new Uint32Array(B),D=Array.isArray(B)?Na(B):new Uint16Array(B),J=24,de=ds(D,J/2,N[4]/2),xe=N[5]===2?ds(D,(J+N[4])/2):fs(N,Math.ceil((J+N[4])/4));return new Xa(N[0],N[1],N[2],N[3],de,xe)},Xa=(function(){function y(b,B,N,D,J,de){this.initialValue=b,this.errorValue=B,this.highStart=N,this.highValueIndex=D,this.index=J,this.data=de}return y.prototype.get=function(b){var B;if(b>=0){if(b<55296||b>56319&&b<=65535)return B=this.index[b>>Ss],B=(B<<Mr)+(b&Xs),this.data[B];if(b<=65535)return B=this.index[En+(b-55296>>Ss)],B=(B<<Mr)+(b&Xs),this.data[B];if(b<this.highStart)return B=Br-rr+(b>>Ws),B=this.index[B],B+=b>>Ss&dn,B=this.index[B],B=(B<<Mr)+(b&Xs),this.data[B];if(b<=1114111)return this.data[this.highValueIndex]}return this.errorValue},y})(),fi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ia=typeof Uint8Array>"u"?[]:new Uint8Array(256),en=0;en<fi.length;en++)Ia[fi.charCodeAt(en)]=en;var Ko=1,_l=2,Xc=3,kr=4,_d=5,zu=7,GA=8,gl=9,Ku=10,Id=11,Od=12,qA=13,Dn=14,Kr=15,YA=function(y){for(var b=[],B=0,N=y.length;B<N;){var D=y.charCodeAt(B++);if(D>=55296&&D<=56319&&B<N){var J=y.charCodeAt(B++);(J&64512)===56320?b.push(((D&1023)<<10)+(J&1023)+65536):(b.push(D),B--)}else b.push(D)}return b},Vo=function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];if(String.fromCodePoint)return String.fromCodePoint.apply(String,y);var B=y.length;if(!B)return"";for(var N=[],D=-1,J="";++D<B;){var de=y[D];de<=65535?N.push(de):(de-=65536,N.push((de>>10)+55296,de%1024+56320)),(D+1===B||N.length>16384)&&(J+=String.fromCharCode.apply(String,N),N.length=0)}return J},Zc=lr(gr),qn="",zi="",Dd=function(y){return Zc.get(y)},eA=function(y,b,B){var N=B-2,D=b[N],J=b[B-1],de=b[B];if(J===_l&&de===Xc)return qn;if(J===_l||J===Xc||J===kr||de===_l||de===Xc||de===kr)return zi;if(J===GA&&[GA,gl,Id,Od].indexOf(de)!==-1||(J===Id||J===gl)&&(de===gl||de===Ku)||(J===Od||J===Ku)&&de===Ku||de===qA||de===_d||de===zu||J===Ko)return qn;if(J===qA&&de===Dn){for(;D===_d;)D=b[--N];if(D===Dn)return qn}if(J===Kr&&de===Kr){for(var xe=0;D===Kr;)xe++,D=b[--N];if(xe%2===0)return qn}return zi},Rd=function(y){var b=YA(y),B=b.length,N=0,D=0,J=b.map(Dd);return{next:function(){if(N>=B)return{done:!0,value:null};for(var de=qn;N<B&&(de=eA(b,J,++N))===qn;);if(de!==qn||N===B){var xe=Vo.apply(null,b.slice(D,N));return D=N,{value:xe,done:!1}}return{done:!0,value:null}}}},Hd=function(y){for(var b=Rd(y),B=[],N;!(N=b.next()).done;)N.value&&B.push(N.value.slice());return B},Ao=function(y){var b=123;if(y.createRange){var B=y.createRange();if(B.getBoundingClientRect){var N=y.createElement("boundtest");N.style.height=b+"px",N.style.display="block",y.body.appendChild(N),B.selectNode(N);var D=B.getBoundingClientRect(),J=Math.round(D.height);if(y.body.removeChild(N),J===b)return!0}}return!1},Vu=function(y){var b=y.createElement("boundtest");b.style.width="50px",b.style.display="block",b.style.fontSize="12px",b.style.letterSpacing="0px",b.style.wordSpacing="0px",y.body.appendChild(b);var B=y.createRange();b.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var N=b.firstChild,D=p(N.data).map(function(be){return x(be)}),J=0,de={},xe=D.every(function(be,Ee){B.setStart(N,J),B.setEnd(N,J+be.length);var Qe=B.getBoundingClientRect();J+=be.length;var Ke=Qe.x>de.x||Qe.y>de.y;return de=Qe,Ee===0?!0:Ke});return y.body.removeChild(b),xe},$u=function(){return typeof new Image().crossOrigin<"u"},Xh=function(){return typeof new XMLHttpRequest().responseType=="string"},Gu=function(y){var b=new Image,B=y.createElement("canvas"),N=B.getContext("2d");if(!N)return!1;b.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{N.drawImage(b,0,0),B.toDataURL()}catch{return!1}return!0},uo=function(y){return y[0]===0&&y[1]===255&&y[2]===0&&y[3]===255},Zh=function(y){var b=y.createElement("canvas"),B=100;b.width=B,b.height=B;var N=b.getContext("2d");if(!N)return Promise.reject(!1);N.fillStyle="rgb(0, 255, 0)",N.fillRect(0,0,B,B);var D=new Image,J=b.toDataURL();D.src=J;var de=Pd(B,B,0,0,D);return N.fillStyle="red",N.fillRect(0,0,B,B),qu(de).then(function(xe){N.drawImage(xe,0,0);var be=N.getImageData(0,0,B,B).data;N.fillStyle="red",N.fillRect(0,0,B,B);var Ee=y.createElement("div");return Ee.style.backgroundImage="url("+J+")",Ee.style.height=B+"px",uo(be)?qu(Pd(B,B,0,0,Ee)):Promise.reject(!1)}).then(function(xe){return N.drawImage(xe,0,0),uo(N.getImageData(0,0,B,B).data)}).catch(function(){return!1})},Pd=function(y,b,B,N,D){var J="http://www.w3.org/2000/svg",de=document.createElementNS(J,"svg"),xe=document.createElementNS(J,"foreignObject");return de.setAttributeNS(null,"width",y.toString()),de.setAttributeNS(null,"height",b.toString()),xe.setAttributeNS(null,"width","100%"),xe.setAttributeNS(null,"height","100%"),xe.setAttributeNS(null,"x",B.toString()),xe.setAttributeNS(null,"y",N.toString()),xe.setAttributeNS(null,"externalResourcesRequired","true"),de.appendChild(xe),xe.appendChild(D),de},qu=function(y){return new Promise(function(b,B){var N=new Image;N.onload=function(){return b(N)},N.onerror=B,N.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(y))})},Rn={get SUPPORT_RANGE_BOUNDS(){var y=Ao(document);return Object.defineProperty(Rn,"SUPPORT_RANGE_BOUNDS",{value:y}),y},get SUPPORT_WORD_BREAKING(){var y=Rn.SUPPORT_RANGE_BOUNDS&&Vu(document);return Object.defineProperty(Rn,"SUPPORT_WORD_BREAKING",{value:y}),y},get SUPPORT_SVG_DRAWING(){var y=Gu(document);return Object.defineProperty(Rn,"SUPPORT_SVG_DRAWING",{value:y}),y},get SUPPORT_FOREIGNOBJECT_DRAWING(){var y=typeof Array.from=="function"&&typeof window.fetch=="function"?Zh(document):Promise.resolve(!1);return Object.defineProperty(Rn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:y}),y},get SUPPORT_CORS_IMAGES(){var y=$u();return Object.defineProperty(Rn,"SUPPORT_CORS_IMAGES",{value:y}),y},get SUPPORT_RESPONSE_TYPE(){var y=Xh();return Object.defineProperty(Rn,"SUPPORT_RESPONSE_TYPE",{value:y}),y},get SUPPORT_CORS_XHR(){var y="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Rn,"SUPPORT_CORS_XHR",{value:y}),y},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var y=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Rn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:y}),y}},tA=(function(){function y(b,B){this.text=b,this.bounds=B}return y})(),Bc=function(y,b,B,N){var D=fo(b,B),J=[],de=0;return D.forEach(function(xe){if(B.textDecorationLine.length||xe.trim().length>0)if(Rn.SUPPORT_RANGE_BOUNDS){var be=sA(N,de,xe.length).getClientRects();if(be.length>1){var Ee=Ki(xe),Qe=0;Ee.forEach(function(ot){J.push(new tA(ot,d.fromDOMRectList(y,sA(N,Qe+de,ot.length).getClientRects()))),Qe+=ot.length})}else J.push(new tA(xe,d.fromDOMRectList(y,be)))}else{var Ke=N.splitText(xe.length);J.push(new tA(xe,zd(y,N))),N=Ke}else Rn.SUPPORT_RANGE_BOUNDS||(N=N.splitText(xe.length));de+=xe.length}),J},zd=function(y,b){var B=b.ownerDocument;if(B){var N=B.createElement("html2canvaswrapper");N.appendChild(b.cloneNode(!0));var D=b.parentNode;if(D){D.replaceChild(N,b);var J=f(y,N);return N.firstChild&&D.replaceChild(N.firstChild,N),J}}return d.EMPTY},sA=function(y,b,B){var N=y.ownerDocument;if(!N)throw new Error("Node has no owner document");var D=N.createRange();return D.setStart(y,b),D.setEnd(y,b+B),D},Ki=function(y){if(Rn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var b=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(b.segment(y)).map(function(B){return B.segment})}return Hd(y)},ho=function(y,b){if(Rn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var B=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(B.segment(y)).map(function(N){return N.segment})}return Vd(y,b)},fo=function(y,b){return b.letterSpacing!==0?Ki(y):ho(y,b)},Kd=[32,160,4961,65792,65793,4153,4241],Vd=function(y,b){for(var B=cc(y,{lineBreak:b.lineBreak,wordBreak:b.overflowWrap==="break-word"?"break-word":b.wordBreak}),N=[],D,J=function(){if(D.value){var de=D.value.slice(),xe=p(de),be="";xe.forEach(function(Ee){Kd.indexOf(Ee)===-1?be+=x(Ee):(be.length&&N.push(be),N.push(x(Ee)),be="")}),be.length&&N.push(be)}};!(D=B.next()).done;)J();return N},kc=(function(){function y(b,B,N){this.text=ef(B.data,N.textTransform),this.textBounds=Bc(b,this.text,N,B)}return y})(),ef=function(y,b){switch(b){case 1:return y.toLowerCase();case 3:return y.replace(rA,nA);case 2:return y.toUpperCase();default:return y}},rA=/(^|\s|:|-|\(|\))([a-z])/g,nA=function(y,b,B){return y.length>0?b+B.toUpperCase():y},i0=(function(y){n(b,y);function b(B,N){var D=y.call(this,B,N)||this;return D.src=N.currentSrc||N.src,D.intrinsicWidth=N.naturalWidth,D.intrinsicHeight=N.naturalHeight,D.context.cache.addImage(D.src),D}return b})(vs),tf=(function(y){n(b,y);function b(B,N){var D=y.call(this,B,N)||this;return D.canvas=N,D.intrinsicWidth=N.width,D.intrinsicHeight=N.height,D}return b})(vs),Xp=(function(y){n(b,y);function b(B,N){var D=y.call(this,B,N)||this,J=new XMLSerializer,de=f(B,N);return N.setAttribute("width",de.width+"px"),N.setAttribute("height",de.height+"px"),D.svg="data:image/svg+xml,"+encodeURIComponent(J.serializeToString(N)),D.intrinsicWidth=N.width.baseVal.value,D.intrinsicHeight=N.height.baseVal.value,D.context.cache.addImage(D.svg),D}return b})(vs),l0=(function(y){n(b,y);function b(B,N){var D=y.call(this,B,N)||this;return D.value=N.value,D}return b})(vs),sf=(function(y){n(b,y);function b(B,N){var D=y.call(this,B,N)||this;return D.start=N.start,D.reversed=typeof N.reversed=="boolean"&&N.reversed===!0,D}return b})(vs),Zp=[{type:15,flags:0,unit:"px",number:3}],em=[{type:16,flags:0,number:50}],tm=function(y){return y.width>y.height?new d(y.left+(y.width-y.height)/2,y.top,y.height,y.height):y.width<y.height?new d(y.left,y.top+(y.height-y.width)/2,y.width,y.width):y},o0=function(y){var b=y.type===c0?new Array(y.value.length+1).join(""):y.value;return b.length===0?y.placeholder||"":b},Yu="checkbox",Ju="radio",c0="password",A0=707406591,rf=(function(y){n(b,y);function b(B,N){var D=y.call(this,B,N)||this;switch(D.type=N.type.toLowerCase(),D.checked=N.checked,D.value=o0(N),(D.type===Yu||D.type===Ju)&&(D.styles.backgroundColor=3739148031,D.styles.borderTopColor=D.styles.borderRightColor=D.styles.borderBottomColor=D.styles.borderLeftColor=2779096575,D.styles.borderTopWidth=D.styles.borderRightWidth=D.styles.borderBottomWidth=D.styles.borderLeftWidth=1,D.styles.borderTopStyle=D.styles.borderRightStyle=D.styles.borderBottomStyle=D.styles.borderLeftStyle=1,D.styles.backgroundClip=[0],D.styles.backgroundOrigin=[0],D.bounds=tm(D.bounds)),D.type){case Yu:D.styles.borderTopRightRadius=D.styles.borderTopLeftRadius=D.styles.borderBottomRightRadius=D.styles.borderBottomLeftRadius=Zp;break;case Ju:D.styles.borderTopRightRadius=D.styles.borderTopLeftRadius=D.styles.borderBottomRightRadius=D.styles.borderBottomLeftRadius=em;break}return D}return b})(vs),sm=(function(y){n(b,y);function b(B,N){var D=y.call(this,B,N)||this,J=N.options[N.selectedIndex||0];return D.value=J&&J.text||"",D}return b})(vs),nf=(function(y){n(b,y);function b(B,N){var D=y.call(this,B,N)||this;return D.value=N.value,D}return b})(vs),d0=(function(y){n(b,y);function b(B,N){var D=y.call(this,B,N)||this;D.src=N.src,D.width=parseInt(N.width,10)||0,D.height=parseInt(N.height,10)||0,D.backgroundColor=D.styles.backgroundColor;try{if(N.contentWindow&&N.contentWindow.document&&N.contentWindow.document.documentElement){D.tree=h0(B,N.contentWindow.document.documentElement);var J=N.contentWindow.document.documentElement?fl(B,getComputedStyle(N.contentWindow.document.documentElement).backgroundColor):pn.TRANSPARENT,de=N.contentWindow.document.body?fl(B,getComputedStyle(N.contentWindow.document.body).backgroundColor):pn.TRANSPARENT;D.backgroundColor=ca(J)?ca(de)?D.styles.backgroundColor:de:J}}catch{}return D}return b})(vs),rm=["OL","UL","MENU"],$d=function(y,b,B,N){for(var D=b.firstChild,J=void 0;D;D=J)if(J=D.nextSibling,f0(D)&&D.data.trim().length>0)B.textNodes.push(new kc(y,D,B.styles));else if($o(D))if(th(D)&&D.assignedNodes)D.assignedNodes().forEach(function(xe){return $d(y,xe,B,N)});else{var de=u0(y,D);de.styles.isVisible()&&(Cb(D,de,N)?de.flags|=4:Sb(de.styles)&&(de.flags|=2),rm.indexOf(D.tagName)!==-1&&(de.flags|=8),B.elements.push(de),D.slot,D.shadowRoot?$d(y,D.shadowRoot,de,N):!Zu(D)&&!af(D)&&!eh(D)&&$d(y,D,de,N))}},u0=function(y,b){return Af(b)?new i0(y,b):of(b)?new tf(y,b):af(b)?new Xp(y,b):nm(b)?new l0(y,b):am(b)?new sf(y,b):Xu(b)?new rf(y,b):eh(b)?new sm(y,b):Zu(b)?new nf(y,b):p0(b)?new d0(y,b):new vs(y,b)},h0=function(y,b){var B=u0(y,b);return B.flags|=4,$d(y,b,B,B),B},Cb=function(y,b,B){return b.styles.isPositionedWithZIndex()||b.styles.opacity<1||b.styles.isTransformed()||lf(y)&&B.styles.isTransparent()},Sb=function(y){return y.isPositioned()||y.isFloating()},f0=function(y){return y.nodeType===Node.TEXT_NODE},$o=function(y){return y.nodeType===Node.ELEMENT_NODE},Wu=function(y){return $o(y)&&typeof y.style<"u"&&!JA(y)},JA=function(y){return typeof y.className=="object"},nm=function(y){return y.tagName==="LI"},am=function(y){return y.tagName==="OL"},Xu=function(y){return y.tagName==="INPUT"},im=function(y){return y.tagName==="HTML"},af=function(y){return y.tagName==="svg"},lf=function(y){return y.tagName==="BODY"},of=function(y){return y.tagName==="CANVAS"},cf=function(y){return y.tagName==="VIDEO"},Af=function(y){return y.tagName==="IMG"},p0=function(y){return y.tagName==="IFRAME"},aA=function(y){return y.tagName==="STYLE"},lm=function(y){return y.tagName==="SCRIPT"},Zu=function(y){return y.tagName==="TEXTAREA"},eh=function(y){return y.tagName==="SELECT"},th=function(y){return y.tagName==="SLOT"},m0=function(y){return y.tagName.indexOf("-")>0},g0=(function(){function y(){this.counters={}}return y.prototype.getCounterValue=function(b){var B=this.counters[b];return B&&B.length?B[B.length-1]:1},y.prototype.getCounterValues=function(b){var B=this.counters[b];return B||[]},y.prototype.pop=function(b){var B=this;b.forEach(function(N){return B.counters[N].pop()})},y.prototype.parse=function(b){var B=this,N=b.counterIncrement,D=b.counterReset,J=!0;N!==null&&N.forEach(function(xe){var be=B.counters[xe.counter];be&&xe.increment!==0&&(J=!1,be.length||be.push(1),be[Math.max(0,be.length-1)]+=xe.increment)});var de=[];return J&&D.forEach(function(xe){var be=B.counters[xe.counter];de.push(xe.counter),be||(be=B.counters[xe.counter]=[]),be.push(xe.reset)}),de},y})(),x0={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},b0={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Eb={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},v0={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},tn=function(y,b,B,N,D,J){return y<b||y>B?qd(y,D,J.length>0):N.integers.reduce(function(de,xe,be){for(;y>=xe;)y-=xe,de+=N.values[be];return de},"")+J},ka=function(y,b,B,N){var D="";do B||y--,D=N(y)+D,y/=b;while(y*b>=b);return D},Fn=function(y,b,B,N,D){var J=B-b+1;return(y<0?"-":"")+(ka(Math.abs(y),J,N,function(de){return x(Math.floor(de%J)+b)})+D)},iA=function(y,b,B){B===void 0&&(B=". ");var N=b.length;return ka(Math.abs(y),N,!1,function(D){return b[Math.floor(D%N)]})+B},WA=1,Cc=2,Il=4,Gd=8,Ol=function(y,b,B,N,D,J){if(y<-9999||y>9999)return qd(y,4,D.length>0);var de=Math.abs(y),xe=D;if(de===0)return b[0]+xe;for(var be=0;de>0&&be<=4;be++){var Ee=de%10;Ee===0&&Me(J,WA)&&xe!==""?xe=b[Ee]+xe:Ee>1||Ee===1&&be===0||Ee===1&&be===1&&Me(J,Cc)||Ee===1&&be===1&&Me(J,Il)&&y>100||Ee===1&&be>1&&Me(J,Gd)?xe=b[Ee]+(be>0?B[be-1]:"")+xe:Ee===1&&be>0&&(xe=B[be-1]+xe),de=Math.floor(de/10)}return(y<0?N:"")+xe},y0="",om="",sh="",rh="",qd=function(y,b,B){var N=B?". ":"",D=B?"":"",J=B?", ":"",de=B?" ":"";switch(b){case 0:return""+de;case 1:return""+de;case 2:return""+de;case 5:var xe=Fn(y,48,57,!0,N);return xe.length<4?"0"+xe:xe;case 4:return iA(y,"",D);case 6:return tn(y,1,3999,x0,3,N).toLowerCase();case 7:return tn(y,1,3999,x0,3,N);case 8:return Fn(y,945,969,!1,N);case 9:return Fn(y,97,122,!1,N);case 10:return Fn(y,65,90,!1,N);case 11:return Fn(y,1632,1641,!0,N);case 12:case 49:return tn(y,1,9999,b0,3,N);case 35:return tn(y,1,9999,b0,3,N).toLowerCase();case 13:return Fn(y,2534,2543,!0,N);case 14:case 30:return Fn(y,6112,6121,!0,N);case 15:return iA(y,"",D);case 16:return iA(y,"",D);case 17:case 48:return Ol(y,"",y0,"",D,Cc|Il|Gd);case 47:return Ol(y,"",om,"",D,WA|Cc|Il|Gd);case 42:return Ol(y,"",y0,"",D,Cc|Il|Gd);case 41:return Ol(y,"",om,"",D,WA|Cc|Il|Gd);case 26:return Ol(y,"","",sh,D,0);case 25:return Ol(y,"","",sh,D,WA|Cc|Il);case 31:return Ol(y,"","",rh,J,WA|Cc|Il);case 33:return Ol(y,"","",rh,J,0);case 32:return Ol(y,"","",rh,J,WA|Cc|Il);case 18:return Fn(y,2406,2415,!0,N);case 20:return tn(y,1,19999,v0,3,N);case 21:return Fn(y,2790,2799,!0,N);case 22:return Fn(y,2662,2671,!0,N);case 22:return tn(y,1,10999,Eb,3,N);case 23:return iA(y,"");case 24:return iA(y,"");case 27:return Fn(y,3302,3311,!0,N);case 28:return iA(y,"",D);case 29:return iA(y,"",D);case 34:return Fn(y,3792,3801,!0,N);case 37:return Fn(y,6160,6169,!0,N);case 38:return Fn(y,4160,4169,!0,N);case 39:return Fn(y,2918,2927,!0,N);case 40:return Fn(y,1776,1785,!0,N);case 43:return Fn(y,3046,3055,!0,N);case 44:return Fn(y,3174,3183,!0,N);case 45:return Fn(y,3664,3673,!0,N);case 46:return Fn(y,3872,3881,!0,N);case 3:default:return Fn(y,48,57,!0,N)}},w0="data-html2canvas-ignore",j0=(function(){function y(b,B,N){if(this.context=b,this.options=N,this.scrolledElements=[],this.referenceElement=B,this.counters=new g0,this.quoteDepth=0,!B.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(B.ownerDocument.documentElement,!1)}return y.prototype.toIFrame=function(b,B){var N=this,D=N0(b,B);if(!D.contentWindow)return Promise.reject("Unable to find iframe window");var J=b.defaultView.pageXOffset,de=b.defaultView.pageYOffset,xe=D.contentWindow,be=xe.document,Ee=k0(D).then(function(){return i(N,void 0,void 0,function(){var Qe,Ke;return c(this,function(ot){switch(ot.label){case 0:return this.scrolledElements.forEach(dm),xe&&(xe.scrollTo(B.left,B.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(xe.scrollY!==B.top||xe.scrollX!==B.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(xe.scrollX-B.left,xe.scrollY-B.top,0,0))),Qe=this.options.onclone,Ke=this.clonedReferenceElement,typeof Ke>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:be.fonts&&be.fonts.ready?[4,be.fonts.ready]:[3,2];case 1:ot.sent(),ot.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,cm(be)]:[3,4];case 3:ot.sent(),ot.label=4;case 4:return typeof Qe=="function"?[2,Promise.resolve().then(function(){return Qe(be,Ke)}).then(function(){return D})]:[2,D]}})})});return be.open(),be.write(Am(document.doctype)+"<html></html>"),C0(this.referenceElement.ownerDocument,J,de),be.replaceChild(be.adoptNode(this.documentElement),be.documentElement),be.close(),Ee},y.prototype.createElementClone=function(b){if(ms(b,2))debugger;if(of(b))return this.createCanvasClone(b);if(cf(b))return this.createVideoClone(b);if(aA(b))return this.createStyleClone(b);var B=b.cloneNode(!1);return Af(B)&&(Af(b)&&b.currentSrc&&b.currentSrc!==b.src&&(B.src=b.currentSrc,B.srcset=""),B.loading==="lazy"&&(B.loading="eager")),m0(B)?this.createCustomElementClone(B):B},y.prototype.createCustomElementClone=function(b){var B=document.createElement("html2canvascustomelement");return nh(b.style,B),B},y.prototype.createStyleClone=function(b){try{var B=b.sheet;if(B&&B.cssRules){var N=[].slice.call(B.cssRules,0).reduce(function(J,de){return de&&typeof de.cssText=="string"?J+de.cssText:J},""),D=b.cloneNode(!1);return D.textContent=N,D}}catch(J){if(this.context.logger.error("Unable to access cssRules property",J),J.name!=="SecurityError")throw J}return b.cloneNode(!1)},y.prototype.createCanvasClone=function(b){var B;if(this.options.inlineImages&&b.ownerDocument){var N=b.ownerDocument.createElement("img");try{return N.src=b.toDataURL(),N}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",b)}}var D=b.cloneNode(!1);try{D.width=b.width,D.height=b.height;var J=b.getContext("2d"),de=D.getContext("2d");if(de)if(!this.options.allowTaint&&J)de.putImageData(J.getImageData(0,0,b.width,b.height),0,0);else{var xe=(B=b.getContext("webgl2"))!==null&&B!==void 0?B:b.getContext("webgl");if(xe){var be=xe.getContextAttributes();(be==null?void 0:be.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",b)}de.drawImage(b,0,0)}return D}catch{this.context.logger.info("Unable to clone canvas as it is tainted",b)}return D},y.prototype.createVideoClone=function(b){var B=b.ownerDocument.createElement("canvas");B.width=b.offsetWidth,B.height=b.offsetHeight;var N=B.getContext("2d");try{return N&&(N.drawImage(b,0,0,B.width,B.height),this.options.allowTaint||N.getImageData(0,0,B.width,B.height)),B}catch{this.context.logger.info("Unable to clone video as it is tainted",b)}var D=b.ownerDocument.createElement("canvas");return D.width=b.offsetWidth,D.height=b.offsetHeight,D},y.prototype.appendChildNode=function(b,B,N){(!$o(B)||!lm(B)&&!B.hasAttribute(w0)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(B)))&&(!this.options.copyStyles||!$o(B)||!aA(B))&&b.appendChild(this.cloneNode(B,N))},y.prototype.cloneChildNodes=function(b,B,N){for(var D=this,J=b.shadowRoot?b.shadowRoot.firstChild:b.firstChild;J;J=J.nextSibling)if($o(J)&&th(J)&&typeof J.assignedNodes=="function"){var de=J.assignedNodes();de.length&&de.forEach(function(xe){return D.appendChildNode(B,xe,N)})}else this.appendChildNode(B,J,N)},y.prototype.cloneNode=function(b,B){if(f0(b))return document.createTextNode(b.data);if(!b.ownerDocument)return b.cloneNode(!1);var N=b.ownerDocument.defaultView;if(N&&$o(b)&&(Wu(b)||JA(b))){var D=this.createElementClone(b);D.style.transitionProperty="none";var J=N.getComputedStyle(b),de=N.getComputedStyle(b,":before"),xe=N.getComputedStyle(b,":after");this.referenceElement===b&&Wu(D)&&(this.clonedReferenceElement=D),lf(D)&&T0(D);var be=this.counters.parse(new Es(this.context,J)),Ee=this.resolvePseudoContent(b,D,de,XA.BEFORE);m0(b)&&(B=!0),cf(b)||this.cloneChildNodes(b,D,B),Ee&&D.insertBefore(Ee,D.firstChild);var Qe=this.resolvePseudoContent(b,D,xe,XA.AFTER);return Qe&&D.appendChild(Qe),this.counters.pop(be),(J&&(this.options.copyStyles||JA(b))&&!p0(b)||B)&&nh(J,D),(b.scrollTop!==0||b.scrollLeft!==0)&&this.scrolledElements.push([D,b.scrollLeft,b.scrollTop]),(Zu(b)||eh(b))&&(Zu(D)||eh(D))&&(D.value=b.value),D}return b.cloneNode(!1)},y.prototype.resolvePseudoContent=function(b,B,N,D){var J=this;if(N){var de=N.content,xe=B.ownerDocument;if(!(!xe||!de||de==="none"||de==="-moz-alt-content"||N.display==="none")){this.counters.parse(new Es(this.context,N));var be=new Lr(this.context,N),Ee=xe.createElement("html2canvaspseudoelement");nh(N,Ee),be.content.forEach(function(Ke){if(Ke.type===0)Ee.appendChild(xe.createTextNode(Ke.value));else if(Ke.type===22){var ot=xe.createElement("img");ot.src=Ke.value,ot.style.opacity="1",Ee.appendChild(ot)}else if(Ke.type===18){if(Ke.name==="attr"){var Ht=Ke.values.filter($s);Ht.length&&Ee.appendChild(xe.createTextNode(b.getAttribute(Ht[0].value)||""))}else if(Ke.name==="counter"){var Ft=Ke.values.filter(Bn),It=Ft[0],is=Ft[1];if(It&&$s(It)){var Yt=J.counters.getCounterValue(It.value),Gt=is&&$s(is)?VA.parse(J.context,is.value):3;Ee.appendChild(xe.createTextNode(qd(Yt,Gt,!1)))}}else if(Ke.name==="counters"){var Ds=Ke.values.filter(Bn),It=Ds[0],Ms=Ds[1],is=Ds[2];if(It&&$s(It)){var js=J.counters.getCounterValues(It.value),Pt=is&&$s(is)?VA.parse(J.context,is.value):3,Ps=Ms&&Ms.type===0?Ms.value:"",er=js.map(function(_r){return qd(_r,Pt,!1)}).join(Ps);Ee.appendChild(xe.createTextNode(er))}}}else if(Ke.type===20)switch(Ke.value){case"open-quote":Ee.appendChild(xe.createTextNode(xt(be.quotes,J.quoteDepth++,!0)));break;case"close-quote":Ee.appendChild(xe.createTextNode(xt(be.quotes,--J.quoteDepth,!1)));break;default:Ee.appendChild(xe.createTextNode(Ke.value))}}),Ee.className=E0+" "+uf;var Qe=D===XA.BEFORE?" "+E0:" "+uf;return JA(B)?B.className.baseValue+=Qe:B.className+=Qe,Ee}}},y.destroy=function(b){return b.parentNode?(b.parentNode.removeChild(b),!0):!1},y})(),XA;(function(y){y[y.BEFORE=0]="BEFORE",y[y.AFTER=1]="AFTER"})(XA||(XA={}));var N0=function(y,b){var B=y.createElement("iframe");return B.className="html2canvas-container",B.style.visibility="hidden",B.style.position="fixed",B.style.left="-10000px",B.style.top="0px",B.style.border="0",B.width=b.width.toString(),B.height=b.height.toString(),B.scrolling="no",B.setAttribute(w0,"true"),y.body.appendChild(B),B},B0=function(y){return new Promise(function(b){if(y.complete){b();return}if(!y.src){b();return}y.onload=b,y.onerror=b})},cm=function(y){return Promise.all([].slice.call(y.images,0).map(B0))},k0=function(y){return new Promise(function(b,B){var N=y.contentWindow;if(!N)return B("No window assigned for iframe");var D=N.document;N.onload=y.onload=function(){N.onload=y.onload=null;var J=setInterval(function(){D.body.childNodes.length>0&&D.readyState==="complete"&&(clearInterval(J),b(y))},50)}})},df=["all","d","content"],nh=function(y,b){for(var B=y.length-1;B>=0;B--){var N=y.item(B);df.indexOf(N)===-1&&b.style.setProperty(N,y.getPropertyValue(N))}return b},Am=function(y){var b="";return y&&(b+="<!DOCTYPE ",y.name&&(b+=y.name),y.internalSubset&&(b+=y.internalSubset),y.publicId&&(b+='"'+y.publicId+'"'),y.systemId&&(b+='"'+y.systemId+'"'),b+=">"),b},C0=function(y,b,B){y&&y.defaultView&&(b!==y.defaultView.pageXOffset||B!==y.defaultView.pageYOffset)&&y.defaultView.scrollTo(b,B)},dm=function(y){var b=y[0],B=y[1],N=y[2];b.scrollLeft=B,b.scrollTop=N},Sc=":before",S0=":after",E0="___html2canvas___pseudoelement_before",uf="___html2canvas___pseudoelement_after",Go=`{
    content: "" !important;
    display: none !important;
}`,T0=function(y){um(y,"."+E0+Sc+Go+`
         .`+uf+S0+Go)},um=function(y,b){var B=y.ownerDocument;if(B){var N=B.createElement("style");N.textContent=b,y.appendChild(N)}},ah=(function(){function y(){}return y.getOrigin=function(b){var B=y._link;return B?(B.href=b,B.href=B.href,B.protocol+B.hostname+B.port):"about:blank"},y.isSameOrigin=function(b){return y.getOrigin(b)===y._origin},y.setContext=function(b){y._link=b.document.createElement("a"),y._origin=y.getOrigin(b.location.href)},y._origin="about:blank",y})(),ih=(function(){function y(b,B){this.context=b,this._options=B,this._cache={}}return y.prototype.addImage=function(b){var B=Promise.resolve();return this.has(b)||(hf(b)||hm(b))&&(this._cache[b]=this.loadImage(b)).catch(function(){}),B},y.prototype.match=function(b){return this._cache[b]},y.prototype.loadImage=function(b){return i(this,void 0,void 0,function(){var B,N,D,J,de=this;return c(this,function(xe){switch(xe.label){case 0:return B=ah.isSameOrigin(b),N=!ZA(b)&&this._options.useCORS===!0&&Rn.SUPPORT_CORS_IMAGES&&!B,D=!ZA(b)&&!B&&!hf(b)&&typeof this._options.proxy=="string"&&Rn.SUPPORT_CORS_XHR&&!N,!B&&this._options.allowTaint===!1&&!ZA(b)&&!hf(b)&&!D&&!N?[2]:(J=b,D?[4,this.proxy(J)]:[3,2]);case 1:J=xe.sent(),xe.label=2;case 2:return this.context.logger.debug("Added image "+b.substring(0,256)),[4,new Promise(function(be,Ee){var Qe=new Image;Qe.onload=function(){return be(Qe)},Qe.onerror=Ee,(lA(J)||N)&&(Qe.crossOrigin="anonymous"),Qe.src=J,Qe.complete===!0&&setTimeout(function(){return be(Qe)},500),de._options.imageTimeout>0&&setTimeout(function(){return Ee("Timed out ("+de._options.imageTimeout+"ms) loading image")},de._options.imageTimeout)})];case 3:return[2,xe.sent()]}})})},y.prototype.has=function(b){return typeof this._cache[b]<"u"},y.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},y.prototype.proxy=function(b){var B=this,N=this._options.proxy;if(!N)throw new Error("No proxy defined");var D=b.substring(0,256);return new Promise(function(J,de){var xe=Rn.SUPPORT_RESPONSE_TYPE?"blob":"text",be=new XMLHttpRequest;be.onload=function(){if(be.status===200)if(xe==="text")J(be.response);else{var Ke=new FileReader;Ke.addEventListener("load",function(){return J(Ke.result)},!1),Ke.addEventListener("error",function(ot){return de(ot)},!1),Ke.readAsDataURL(be.response)}else de("Failed to proxy resource "+D+" with status code "+be.status)},be.onerror=de;var Ee=N.indexOf("?")>-1?"&":"?";if(be.open("GET",""+N+Ee+"url="+encodeURIComponent(b)+"&responseType="+xe),xe!=="text"&&be instanceof XMLHttpRequest&&(be.responseType=xe),B._options.imageTimeout){var Qe=B._options.imageTimeout;be.timeout=Qe,be.ontimeout=function(){return de("Timed out ("+Qe+"ms) proxying "+D)}}be.send()})},y})(),sn=/^data:image\/svg\+xml/i,Tb=/^data:image\/.*;base64,/i,Ub=/^data:image\/.*/i,hm=function(y){return Rn.SUPPORT_SVG_DRAWING||!fm(y)},ZA=function(y){return Ub.test(y)},lA=function(y){return Tb.test(y)},hf=function(y){return y.substr(0,4)==="blob"},fm=function(y){return y.substr(-3).toLowerCase()==="svg"||sn.test(y)},Rt=(function(){function y(b,B){this.type=0,this.x=b,this.y=B}return y.prototype.add=function(b,B){return new y(this.x+b,this.y+B)},y})(),pi=function(y,b,B){return new Rt(y.x+(b.x-y.x)*B,y.y+(b.y-y.y)*B)},lh=(function(){function y(b,B,N,D){this.type=1,this.start=b,this.startControl=B,this.endControl=N,this.end=D}return y.prototype.subdivide=function(b,B){var N=pi(this.start,this.startControl,b),D=pi(this.startControl,this.endControl,b),J=pi(this.endControl,this.end,b),de=pi(N,D,b),xe=pi(D,J,b),be=pi(de,xe,b);return B?new y(this.start,N,de,be):new y(be,xe,J,this.end)},y.prototype.add=function(b,B){return new y(this.start.add(b,B),this.startControl.add(b,B),this.endControl.add(b,B),this.end.add(b,B))},y.prototype.reverse=function(){return new y(this.end,this.endControl,this.startControl,this.start)},y})(),Vi=function(y){return y.type===1},pm=(function(){function y(b){var B=b.styles,N=b.bounds,D=_i(B.borderTopLeftRadius,N.width,N.height),J=D[0],de=D[1],xe=_i(B.borderTopRightRadius,N.width,N.height),be=xe[0],Ee=xe[1],Qe=_i(B.borderBottomRightRadius,N.width,N.height),Ke=Qe[0],ot=Qe[1],Ht=_i(B.borderBottomLeftRadius,N.width,N.height),Ft=Ht[0],It=Ht[1],is=[];is.push((J+be)/N.width),is.push((Ft+Ke)/N.width),is.push((de+It)/N.height),is.push((Ee+ot)/N.height);var Yt=Math.max.apply(Math,is);Yt>1&&(J/=Yt,de/=Yt,be/=Yt,Ee/=Yt,Ke/=Yt,ot/=Yt,Ft/=Yt,It/=Yt);var Gt=N.width-be,Ds=N.height-ot,Ms=N.width-Ke,js=N.height-It,Pt=B.borderTopWidth,Ps=B.borderRightWidth,er=B.borderBottomWidth,cs=B.borderLeftWidth,Hn=Os(B.paddingTop,b.bounds.width),_r=Os(B.paddingRight,b.bounds.width),qi=Os(B.paddingBottom,b.bounds.width),Sr=Os(B.paddingLeft,b.bounds.width);this.topLeftBorderDoubleOuterBox=J>0||de>0?Vr(N.left+cs/3,N.top+Pt/3,J-cs/3,de-Pt/3,hr.TOP_LEFT):new Rt(N.left+cs/3,N.top+Pt/3),this.topRightBorderDoubleOuterBox=J>0||de>0?Vr(N.left+Gt,N.top+Pt/3,be-Ps/3,Ee-Pt/3,hr.TOP_RIGHT):new Rt(N.left+N.width-Ps/3,N.top+Pt/3),this.bottomRightBorderDoubleOuterBox=Ke>0||ot>0?Vr(N.left+Ms,N.top+Ds,Ke-Ps/3,ot-er/3,hr.BOTTOM_RIGHT):new Rt(N.left+N.width-Ps/3,N.top+N.height-er/3),this.bottomLeftBorderDoubleOuterBox=Ft>0||It>0?Vr(N.left+cs/3,N.top+js,Ft-cs/3,It-er/3,hr.BOTTOM_LEFT):new Rt(N.left+cs/3,N.top+N.height-er/3),this.topLeftBorderDoubleInnerBox=J>0||de>0?Vr(N.left+cs*2/3,N.top+Pt*2/3,J-cs*2/3,de-Pt*2/3,hr.TOP_LEFT):new Rt(N.left+cs*2/3,N.top+Pt*2/3),this.topRightBorderDoubleInnerBox=J>0||de>0?Vr(N.left+Gt,N.top+Pt*2/3,be-Ps*2/3,Ee-Pt*2/3,hr.TOP_RIGHT):new Rt(N.left+N.width-Ps*2/3,N.top+Pt*2/3),this.bottomRightBorderDoubleInnerBox=Ke>0||ot>0?Vr(N.left+Ms,N.top+Ds,Ke-Ps*2/3,ot-er*2/3,hr.BOTTOM_RIGHT):new Rt(N.left+N.width-Ps*2/3,N.top+N.height-er*2/3),this.bottomLeftBorderDoubleInnerBox=Ft>0||It>0?Vr(N.left+cs*2/3,N.top+js,Ft-cs*2/3,It-er*2/3,hr.BOTTOM_LEFT):new Rt(N.left+cs*2/3,N.top+N.height-er*2/3),this.topLeftBorderStroke=J>0||de>0?Vr(N.left+cs/2,N.top+Pt/2,J-cs/2,de-Pt/2,hr.TOP_LEFT):new Rt(N.left+cs/2,N.top+Pt/2),this.topRightBorderStroke=J>0||de>0?Vr(N.left+Gt,N.top+Pt/2,be-Ps/2,Ee-Pt/2,hr.TOP_RIGHT):new Rt(N.left+N.width-Ps/2,N.top+Pt/2),this.bottomRightBorderStroke=Ke>0||ot>0?Vr(N.left+Ms,N.top+Ds,Ke-Ps/2,ot-er/2,hr.BOTTOM_RIGHT):new Rt(N.left+N.width-Ps/2,N.top+N.height-er/2),this.bottomLeftBorderStroke=Ft>0||It>0?Vr(N.left+cs/2,N.top+js,Ft-cs/2,It-er/2,hr.BOTTOM_LEFT):new Rt(N.left+cs/2,N.top+N.height-er/2),this.topLeftBorderBox=J>0||de>0?Vr(N.left,N.top,J,de,hr.TOP_LEFT):new Rt(N.left,N.top),this.topRightBorderBox=be>0||Ee>0?Vr(N.left+Gt,N.top,be,Ee,hr.TOP_RIGHT):new Rt(N.left+N.width,N.top),this.bottomRightBorderBox=Ke>0||ot>0?Vr(N.left+Ms,N.top+Ds,Ke,ot,hr.BOTTOM_RIGHT):new Rt(N.left+N.width,N.top+N.height),this.bottomLeftBorderBox=Ft>0||It>0?Vr(N.left,N.top+js,Ft,It,hr.BOTTOM_LEFT):new Rt(N.left,N.top+N.height),this.topLeftPaddingBox=J>0||de>0?Vr(N.left+cs,N.top+Pt,Math.max(0,J-cs),Math.max(0,de-Pt),hr.TOP_LEFT):new Rt(N.left+cs,N.top+Pt),this.topRightPaddingBox=be>0||Ee>0?Vr(N.left+Math.min(Gt,N.width-Ps),N.top+Pt,Gt>N.width+Ps?0:Math.max(0,be-Ps),Math.max(0,Ee-Pt),hr.TOP_RIGHT):new Rt(N.left+N.width-Ps,N.top+Pt),this.bottomRightPaddingBox=Ke>0||ot>0?Vr(N.left+Math.min(Ms,N.width-cs),N.top+Math.min(Ds,N.height-er),Math.max(0,Ke-Ps),Math.max(0,ot-er),hr.BOTTOM_RIGHT):new Rt(N.left+N.width-Ps,N.top+N.height-er),this.bottomLeftPaddingBox=Ft>0||It>0?Vr(N.left+cs,N.top+Math.min(js,N.height-er),Math.max(0,Ft-cs),Math.max(0,It-er),hr.BOTTOM_LEFT):new Rt(N.left+cs,N.top+N.height-er),this.topLeftContentBox=J>0||de>0?Vr(N.left+cs+Sr,N.top+Pt+Hn,Math.max(0,J-(cs+Sr)),Math.max(0,de-(Pt+Hn)),hr.TOP_LEFT):new Rt(N.left+cs+Sr,N.top+Pt+Hn),this.topRightContentBox=be>0||Ee>0?Vr(N.left+Math.min(Gt,N.width+cs+Sr),N.top+Pt+Hn,Gt>N.width+cs+Sr?0:be-cs+Sr,Ee-(Pt+Hn),hr.TOP_RIGHT):new Rt(N.left+N.width-(Ps+_r),N.top+Pt+Hn),this.bottomRightContentBox=Ke>0||ot>0?Vr(N.left+Math.min(Ms,N.width-(cs+Sr)),N.top+Math.min(Ds,N.height+Pt+Hn),Math.max(0,Ke-(Ps+_r)),ot-(er+qi),hr.BOTTOM_RIGHT):new Rt(N.left+N.width-(Ps+_r),N.top+N.height-(er+qi)),this.bottomLeftContentBox=Ft>0||It>0?Vr(N.left+cs+Sr,N.top+js,Math.max(0,Ft-(cs+Sr)),It-(er+qi),hr.BOTTOM_LEFT):new Rt(N.left+cs+Sr,N.top+N.height-(er+qi))}return y})(),hr;(function(y){y[y.TOP_LEFT=0]="TOP_LEFT",y[y.TOP_RIGHT=1]="TOP_RIGHT",y[y.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",y[y.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(hr||(hr={}));var Vr=function(y,b,B,N,D){var J=4*((Math.sqrt(2)-1)/3),de=B*J,xe=N*J,be=y+B,Ee=b+N;switch(D){case hr.TOP_LEFT:return new lh(new Rt(y,Ee),new Rt(y,Ee-xe),new Rt(be-de,b),new Rt(be,b));case hr.TOP_RIGHT:return new lh(new Rt(y,b),new Rt(y+de,b),new Rt(be,Ee-xe),new Rt(be,Ee));case hr.BOTTOM_RIGHT:return new lh(new Rt(be,b),new Rt(be,b+xe),new Rt(y+de,Ee),new Rt(y,Ee));case hr.BOTTOM_LEFT:default:return new lh(new Rt(be,Ee),new Rt(be-de,Ee),new Rt(y,b+xe),new Rt(y,b))}},ed=function(y){return[y.topLeftBorderBox,y.topRightBorderBox,y.bottomRightBorderBox,y.bottomLeftBorderBox]},mm=function(y){return[y.topLeftContentBox,y.topRightContentBox,y.bottomRightContentBox,y.bottomLeftContentBox]},Dl=function(y){return[y.topLeftPaddingBox,y.topRightPaddingBox,y.bottomRightPaddingBox,y.bottomLeftPaddingBox]},Yn=(function(){function y(b,B,N){this.offsetX=b,this.offsetY=B,this.matrix=N,this.type=0,this.target=6}return y})(),Yd=(function(){function y(b,B){this.path=b,this.target=B,this.type=1}return y})(),gm=(function(){function y(b){this.opacity=b,this.type=2,this.target=6}return y})(),Ca=function(y){return y.type===0},xm=function(y){return y.type===1},bm=function(y){return y.type===2},U0=function(y,b){return y.length===b.length?y.some(function(B,N){return B===b[N]}):!1},un=function(y,b,B,N,D){return y.map(function(J,de){switch(de){case 0:return J.add(b,B);case 1:return J.add(b+N,B);case 2:return J.add(b+N,B+D);case 3:return J.add(b,B+D)}return J})},mi=(function(){function y(b){this.element=b,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return y})(),qo=(function(){function y(b,B){if(this.container=b,this.parent=B,this.effects=[],this.curves=new pm(this.container),this.container.styles.opacity<1&&this.effects.push(new gm(this.container.styles.opacity)),this.container.styles.transform!==null){var N=this.container.bounds.left+this.container.styles.transformOrigin[0].number,D=this.container.bounds.top+this.container.styles.transformOrigin[1].number,J=this.container.styles.transform;this.effects.push(new Yn(N,D,J))}if(this.container.styles.overflowX!==0){var de=ed(this.curves),xe=Dl(this.curves);U0(de,xe)?this.effects.push(new Yd(de,6)):(this.effects.push(new Yd(de,2)),this.effects.push(new Yd(xe,4)))}}return y.prototype.getEffects=function(b){for(var B=[2,3].indexOf(this.container.styles.position)===-1,N=this.parent,D=this.effects.slice(0);N;){var J=N.effects.filter(function(be){return!xm(be)});if(B||N.container.styles.position!==0||!N.parent){if(D.unshift.apply(D,J),B=[2,3].indexOf(N.container.styles.position)===-1,N.container.styles.overflowX!==0){var de=ed(N.curves),xe=Dl(N.curves);U0(de,xe)||D.unshift(new Yd(xe,6))}}else D.unshift.apply(D,J);N=N.parent}return D.filter(function(be){return Me(be.target,b)})},y})(),ff=function(y,b,B,N){y.container.elements.forEach(function(D){var J=Me(D.flags,4),de=Me(D.flags,2),xe=new qo(D,y);Me(D.styles.display,2048)&&N.push(xe);var be=Me(D.flags,8)?[]:N;if(J||de){var Ee=J||D.styles.isPositioned()?B:b,Qe=new mi(xe);if(D.styles.isPositioned()||D.styles.opacity<1||D.styles.isTransformed()){var Ke=D.styles.zIndex.order;if(Ke<0){var ot=0;Ee.negativeZIndex.some(function(Ft,It){return Ke>Ft.element.container.styles.zIndex.order?(ot=It,!1):ot>0}),Ee.negativeZIndex.splice(ot,0,Qe)}else if(Ke>0){var Ht=0;Ee.positiveZIndex.some(function(Ft,It){return Ke>=Ft.element.container.styles.zIndex.order?(Ht=It+1,!1):Ht>0}),Ee.positiveZIndex.splice(Ht,0,Qe)}else Ee.zeroOrAutoZIndexOrTransformedOrOpacity.push(Qe)}else D.styles.isFloating()?Ee.nonPositionedFloats.push(Qe):Ee.nonPositionedInlineLevel.push(Qe);ff(xe,Qe,J?Qe:B,be)}else D.styles.isInlineLevel()?b.inlineLevel.push(xe):b.nonInlineLevel.push(xe),ff(xe,b,B,be);Me(D.flags,8)&&F0(D,be)})},F0=function(y,b){for(var B=y instanceof sf?y.start:1,N=y instanceof sf?y.reversed:!1,D=0;D<b.length;D++){var J=b[D];J.container instanceof l0&&typeof J.container.value=="number"&&J.container.value!==0&&(B=J.container.value),J.listValue=qd(B,J.container.styles.listStyleType,!0),B+=N?-1:1}},vm=function(y){var b=new qo(y,null),B=new mi(b),N=[];return ff(b,B,B,N),F0(b.container,N),B},ym=function(y,b){switch(b){case 0:return rn(y.topLeftBorderBox,y.topLeftPaddingBox,y.topRightBorderBox,y.topRightPaddingBox);case 1:return rn(y.topRightBorderBox,y.topRightPaddingBox,y.bottomRightBorderBox,y.bottomRightPaddingBox);case 2:return rn(y.bottomRightBorderBox,y.bottomRightPaddingBox,y.bottomLeftBorderBox,y.bottomLeftPaddingBox);case 3:default:return rn(y.bottomLeftBorderBox,y.bottomLeftPaddingBox,y.topLeftBorderBox,y.topLeftPaddingBox)}},pf=function(y,b){switch(b){case 0:return rn(y.topLeftBorderBox,y.topLeftBorderDoubleOuterBox,y.topRightBorderBox,y.topRightBorderDoubleOuterBox);case 1:return rn(y.topRightBorderBox,y.topRightBorderDoubleOuterBox,y.bottomRightBorderBox,y.bottomRightBorderDoubleOuterBox);case 2:return rn(y.bottomRightBorderBox,y.bottomRightBorderDoubleOuterBox,y.bottomLeftBorderBox,y.bottomLeftBorderDoubleOuterBox);case 3:default:return rn(y.bottomLeftBorderBox,y.bottomLeftBorderDoubleOuterBox,y.topLeftBorderBox,y.topLeftBorderDoubleOuterBox)}},$i=function(y,b){switch(b){case 0:return rn(y.topLeftBorderDoubleInnerBox,y.topLeftPaddingBox,y.topRightBorderDoubleInnerBox,y.topRightPaddingBox);case 1:return rn(y.topRightBorderDoubleInnerBox,y.topRightPaddingBox,y.bottomRightBorderDoubleInnerBox,y.bottomRightPaddingBox);case 2:return rn(y.bottomRightBorderDoubleInnerBox,y.bottomRightPaddingBox,y.bottomLeftBorderDoubleInnerBox,y.bottomLeftPaddingBox);case 3:default:return rn(y.bottomLeftBorderDoubleInnerBox,y.bottomLeftPaddingBox,y.topLeftBorderDoubleInnerBox,y.topLeftPaddingBox)}},po=function(y,b){switch(b){case 0:return oh(y.topLeftBorderStroke,y.topRightBorderStroke);case 1:return oh(y.topRightBorderStroke,y.bottomRightBorderStroke);case 2:return oh(y.bottomRightBorderStroke,y.bottomLeftBorderStroke);case 3:default:return oh(y.bottomLeftBorderStroke,y.topLeftBorderStroke)}},oh=function(y,b){var B=[];return Vi(y)?B.push(y.subdivide(.5,!1)):B.push(y),Vi(b)?B.push(b.subdivide(.5,!0)):B.push(b),B},rn=function(y,b,B,N){var D=[];return Vi(y)?D.push(y.subdivide(.5,!1)):D.push(y),Vi(B)?D.push(B.subdivide(.5,!0)):D.push(B),Vi(N)?D.push(N.subdivide(.5,!0).reverse()):D.push(N),Vi(b)?D.push(b.subdivide(.5,!1).reverse()):D.push(b),D},L0=function(y){var b=y.bounds,B=y.styles;return b.add(B.borderLeftWidth,B.borderTopWidth,-(B.borderRightWidth+B.borderLeftWidth),-(B.borderTopWidth+B.borderBottomWidth))},Rl=function(y){var b=y.styles,B=y.bounds,N=Os(b.paddingLeft,B.width),D=Os(b.paddingRight,B.width),J=Os(b.paddingTop,B.width),de=Os(b.paddingBottom,B.width);return B.add(N+b.borderLeftWidth,J+b.borderTopWidth,-(b.borderRightWidth+b.borderLeftWidth+N+D),-(b.borderTopWidth+b.borderBottomWidth+J+de))},td=function(y,b){return y===0?b.bounds:y===2?Rl(b):L0(b)},Ec=function(y,b){return y===0?b.bounds:y===2?Rl(b):L0(b)},ch=function(y,b,B){var N=td(mo(y.styles.backgroundOrigin,b),y),D=Ec(mo(y.styles.backgroundClip,b),y),J=wm(mo(y.styles.backgroundSize,b),B,N),de=J[0],xe=J[1],be=_i(mo(y.styles.backgroundPosition,b),N.width-de,N.height-xe),Ee=Ah(mo(y.styles.backgroundRepeat,b),be,J,N,D),Qe=Math.round(N.left+be[0]),Ke=Math.round(N.top+be[1]);return[Ee,Qe,Ke,de,xe]},oA=function(y){return $s(y)&&y.value===lo.AUTO},Gi=function(y){return typeof y=="number"},wm=function(y,b,B){var N=b[0],D=b[1],J=b[2],de=y[0],xe=y[1];if(!de)return[0,0];if(ar(de)&&xe&&ar(xe))return[Os(de,B.width),Os(xe,B.height)];var be=Gi(J);if($s(de)&&(de.value===lo.CONTAIN||de.value===lo.COVER)){if(Gi(J)){var Ee=B.width/B.height;return Ee<J!=(de.value===lo.COVER)?[B.width,B.width/J]:[B.height*J,B.height]}return[B.width,B.height]}var Qe=Gi(N),Ke=Gi(D),ot=Qe||Ke;if(oA(de)&&(!xe||oA(xe))){if(Qe&&Ke)return[N,D];if(!be&&!ot)return[B.width,B.height];if(ot&&be){var Ht=Qe?N:D*J,Ft=Ke?D:N/J;return[Ht,Ft]}var It=Qe?N:B.width,is=Ke?D:B.height;return[It,is]}if(be){var Yt=0,Gt=0;return ar(de)?Yt=Os(de,B.width):ar(xe)&&(Gt=Os(xe,B.height)),oA(de)?Yt=Gt*J:(!xe||oA(xe))&&(Gt=Yt/J),[Yt,Gt]}var Ds=null,Ms=null;if(ar(de)?Ds=Os(de,B.width):xe&&ar(xe)&&(Ms=Os(xe,B.height)),Ds!==null&&(!xe||oA(xe))&&(Ms=Qe&&Ke?Ds/N*D:B.height),Ms!==null&&oA(de)&&(Ds=Qe&&Ke?Ms/D*N:B.width),Ds!==null&&Ms!==null)return[Ds,Ms];throw new Error("Unable to calculate background-size for element")},mo=function(y,b){var B=y[b];return typeof B>"u"?y[0]:B},Ah=function(y,b,B,N,D){var J=b[0],de=b[1],xe=B[0],be=B[1];switch(y){case 2:return[new Rt(Math.round(N.left),Math.round(N.top+de)),new Rt(Math.round(N.left+N.width),Math.round(N.top+de)),new Rt(Math.round(N.left+N.width),Math.round(be+N.top+de)),new Rt(Math.round(N.left),Math.round(be+N.top+de))];case 3:return[new Rt(Math.round(N.left+J),Math.round(N.top)),new Rt(Math.round(N.left+J+xe),Math.round(N.top)),new Rt(Math.round(N.left+J+xe),Math.round(N.height+N.top)),new Rt(Math.round(N.left+J),Math.round(N.height+N.top))];case 1:return[new Rt(Math.round(N.left+J),Math.round(N.top+de)),new Rt(Math.round(N.left+J+xe),Math.round(N.top+de)),new Rt(Math.round(N.left+J+xe),Math.round(N.top+de+be)),new Rt(Math.round(N.left+J),Math.round(N.top+de+be))];default:return[new Rt(Math.round(D.left),Math.round(D.top)),new Rt(Math.round(D.left+D.width),Math.round(D.top)),new Rt(Math.round(D.left+D.width),Math.round(D.height+D.top)),new Rt(Math.round(D.left),Math.round(D.height+D.top))]}},dh="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",sd="Hidden Text",jm=(function(){function y(b){this._data={},this._document=b}return y.prototype.parseMetrics=function(b,B){var N=this._document.createElement("div"),D=this._document.createElement("img"),J=this._document.createElement("span"),de=this._document.body;N.style.visibility="hidden",N.style.fontFamily=b,N.style.fontSize=B,N.style.margin="0",N.style.padding="0",N.style.whiteSpace="nowrap",de.appendChild(N),D.src=dh,D.width=1,D.height=1,D.style.margin="0",D.style.padding="0",D.style.verticalAlign="baseline",J.style.fontFamily=b,J.style.fontSize=B,J.style.margin="0",J.style.padding="0",J.appendChild(this._document.createTextNode(sd)),N.appendChild(J),N.appendChild(D);var xe=D.offsetTop-J.offsetTop+2;N.removeChild(J),N.appendChild(this._document.createTextNode(sd)),N.style.lineHeight="normal",D.style.verticalAlign="super";var be=D.offsetTop-N.offsetTop+2;return de.removeChild(N),{baseline:xe,middle:be}},y.prototype.getMetrics=function(b,B){var N=b+" "+B;return typeof this._data[N]>"u"&&(this._data[N]=this.parseMetrics(b,B)),this._data[N]},y})(),M0=(function(){function y(b,B){this.context=b,this.options=B}return y})(),uh=1e4,Nm=(function(y){n(b,y);function b(B,N){var D=y.call(this,B,N)||this;return D._activeEffects=[],D.canvas=N.canvas?N.canvas:document.createElement("canvas"),D.ctx=D.canvas.getContext("2d"),N.canvas||(D.canvas.width=Math.floor(N.width*N.scale),D.canvas.height=Math.floor(N.height*N.scale),D.canvas.style.width=N.width+"px",D.canvas.style.height=N.height+"px"),D.fontMetrics=new jm(document),D.ctx.scale(D.options.scale,D.options.scale),D.ctx.translate(-N.x,-N.y),D.ctx.textBaseline="bottom",D._activeEffects=[],D.context.logger.debug("Canvas renderer initialized ("+N.width+"x"+N.height+") with scale "+N.scale),D}return b.prototype.applyEffects=function(B){for(var N=this;this._activeEffects.length;)this.popEffect();B.forEach(function(D){return N.applyEffect(D)})},b.prototype.applyEffect=function(B){this.ctx.save(),bm(B)&&(this.ctx.globalAlpha=B.opacity),Ca(B)&&(this.ctx.translate(B.offsetX,B.offsetY),this.ctx.transform(B.matrix[0],B.matrix[1],B.matrix[2],B.matrix[3],B.matrix[4],B.matrix[5]),this.ctx.translate(-B.offsetX,-B.offsetY)),xm(B)&&(this.path(B.path),this.ctx.clip()),this._activeEffects.push(B)},b.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},b.prototype.renderStack=function(B){return i(this,void 0,void 0,function(){var N;return c(this,function(D){switch(D.label){case 0:return N=B.element.container.styles,N.isVisible()?[4,this.renderStackContent(B)]:[3,2];case 1:D.sent(),D.label=2;case 2:return[2]}})})},b.prototype.renderNode=function(B){return i(this,void 0,void 0,function(){return c(this,function(N){switch(N.label){case 0:if(Me(B.container.flags,16))debugger;return B.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(B)]:[3,3];case 1:return N.sent(),[4,this.renderNodeContent(B)];case 2:N.sent(),N.label=3;case 3:return[2]}})})},b.prototype.renderTextWithLetterSpacing=function(B,N,D){var J=this;if(N===0)this.ctx.fillText(B.text,B.bounds.left,B.bounds.top+D);else{var de=Ki(B.text);de.reduce(function(xe,be){return J.ctx.fillText(be,xe,B.bounds.top+D),xe+J.ctx.measureText(be).width},B.bounds.left)}},b.prototype.createFontStyle=function(B){var N=B.fontVariant.filter(function(de){return de==="normal"||de==="small-caps"}).join(""),D=vr(B.fontFamily).join(", "),J=Ai(B.fontSize)?""+B.fontSize.number+B.fontSize.unit:B.fontSize.number+"px";return[[B.fontStyle,N,B.fontWeight,J,D].join(" "),D,J]},b.prototype.renderTextNode=function(B,N){return i(this,void 0,void 0,function(){var D,J,de,xe,be,Ee,Qe,Ke,ot=this;return c(this,function(Ht){return D=this.createFontStyle(N),J=D[0],de=D[1],xe=D[2],this.ctx.font=J,this.ctx.direction=N.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",be=this.fontMetrics.getMetrics(de,xe),Ee=be.baseline,Qe=be.middle,Ke=N.paintOrder,B.textBounds.forEach(function(Ft){Ke.forEach(function(It){switch(It){case 0:ot.ctx.fillStyle=Js(N.color),ot.renderTextWithLetterSpacing(Ft,N.letterSpacing,Ee);var is=N.textShadow;is.length&&Ft.text.trim().length&&(is.slice(0).reverse().forEach(function(Yt){ot.ctx.shadowColor=Js(Yt.color),ot.ctx.shadowOffsetX=Yt.offsetX.number*ot.options.scale,ot.ctx.shadowOffsetY=Yt.offsetY.number*ot.options.scale,ot.ctx.shadowBlur=Yt.blur.number,ot.renderTextWithLetterSpacing(Ft,N.letterSpacing,Ee)}),ot.ctx.shadowColor="",ot.ctx.shadowOffsetX=0,ot.ctx.shadowOffsetY=0,ot.ctx.shadowBlur=0),N.textDecorationLine.length&&(ot.ctx.fillStyle=Js(N.textDecorationColor||N.color),N.textDecorationLine.forEach(function(Yt){switch(Yt){case 1:ot.ctx.fillRect(Ft.bounds.left,Math.round(Ft.bounds.top+Ee),Ft.bounds.width,1);break;case 2:ot.ctx.fillRect(Ft.bounds.left,Math.round(Ft.bounds.top),Ft.bounds.width,1);break;case 3:ot.ctx.fillRect(Ft.bounds.left,Math.ceil(Ft.bounds.top+Qe),Ft.bounds.width,1);break}}));break;case 1:N.webkitTextStrokeWidth&&Ft.text.trim().length&&(ot.ctx.strokeStyle=Js(N.webkitTextStrokeColor),ot.ctx.lineWidth=N.webkitTextStrokeWidth,ot.ctx.lineJoin=window.chrome?"miter":"round",ot.ctx.strokeText(Ft.text,Ft.bounds.left,Ft.bounds.top+Ee)),ot.ctx.strokeStyle="",ot.ctx.lineWidth=0,ot.ctx.lineJoin="miter";break}})}),[2]})})},b.prototype.renderReplacedElement=function(B,N,D){if(D&&B.intrinsicWidth>0&&B.intrinsicHeight>0){var J=Rl(B),de=Dl(N);this.path(de),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(D,0,0,B.intrinsicWidth,B.intrinsicHeight,J.left,J.top,J.width,J.height),this.ctx.restore()}},b.prototype.renderNodeContent=function(B){return i(this,void 0,void 0,function(){var N,D,J,de,xe,be,Gt,Gt,Ee,Qe,Ke,ot,Ms,Ht,Ft,js,It,is,Yt,Gt,Ds,Ms,js;return c(this,function(Pt){switch(Pt.label){case 0:this.applyEffects(B.getEffects(4)),N=B.container,D=B.curves,J=N.styles,de=0,xe=N.textNodes,Pt.label=1;case 1:return de<xe.length?(be=xe[de],[4,this.renderTextNode(be,J)]):[3,4];case 2:Pt.sent(),Pt.label=3;case 3:return de++,[3,1];case 4:if(!(N instanceof i0))return[3,8];Pt.label=5;case 5:return Pt.trys.push([5,7,,8]),[4,this.context.cache.match(N.src)];case 6:return Gt=Pt.sent(),this.renderReplacedElement(N,D,Gt),[3,8];case 7:return Pt.sent(),this.context.logger.error("Error loading image "+N.src),[3,8];case 8:if(N instanceof tf&&this.renderReplacedElement(N,D,N.canvas),!(N instanceof Xp))return[3,12];Pt.label=9;case 9:return Pt.trys.push([9,11,,12]),[4,this.context.cache.match(N.svg)];case 10:return Gt=Pt.sent(),this.renderReplacedElement(N,D,Gt),[3,12];case 11:return Pt.sent(),this.context.logger.error("Error loading svg "+N.svg.substring(0,255)),[3,12];case 12:return N instanceof d0&&N.tree?(Ee=new b(this.context,{scale:this.options.scale,backgroundColor:N.backgroundColor,x:0,y:0,width:N.width,height:N.height}),[4,Ee.render(N.tree)]):[3,14];case 13:Qe=Pt.sent(),N.width&&N.height&&this.ctx.drawImage(Qe,0,0,N.width,N.height,N.bounds.left,N.bounds.top,N.bounds.width,N.bounds.height),Pt.label=14;case 14:if(N instanceof rf&&(Ke=Math.min(N.bounds.width,N.bounds.height),N.type===Yu?N.checked&&(this.ctx.save(),this.path([new Rt(N.bounds.left+Ke*.39363,N.bounds.top+Ke*.79),new Rt(N.bounds.left+Ke*.16,N.bounds.top+Ke*.5549),new Rt(N.bounds.left+Ke*.27347,N.bounds.top+Ke*.44071),new Rt(N.bounds.left+Ke*.39694,N.bounds.top+Ke*.5649),new Rt(N.bounds.left+Ke*.72983,N.bounds.top+Ke*.23),new Rt(N.bounds.left+Ke*.84,N.bounds.top+Ke*.34085),new Rt(N.bounds.left+Ke*.39363,N.bounds.top+Ke*.79)]),this.ctx.fillStyle=Js(A0),this.ctx.fill(),this.ctx.restore()):N.type===Ju&&N.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(N.bounds.left+Ke/2,N.bounds.top+Ke/2,Ke/4,0,Math.PI*2,!0),this.ctx.fillStyle=Js(A0),this.ctx.fill(),this.ctx.restore())),mf(N)&&N.value.length){switch(ot=this.createFontStyle(J),Ms=ot[0],Ht=ot[1],Ft=this.fontMetrics.getMetrics(Ms,Ht).baseline,this.ctx.font=Ms,this.ctx.fillStyle=Js(J.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Fb(N.styles.textAlign),js=Rl(N),It=0,N.styles.textAlign){case 1:It+=js.width/2;break;case 2:It+=js.width;break}is=js.add(It,0,0,-js.height/2+1),this.ctx.save(),this.path([new Rt(js.left,js.top),new Rt(js.left+js.width,js.top),new Rt(js.left+js.width,js.top+js.height),new Rt(js.left,js.top+js.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new tA(N.value,is),J.letterSpacing,Ft),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Me(N.styles.display,2048))return[3,20];if(N.styles.listStyleImage===null)return[3,19];if(Yt=N.styles.listStyleImage,Yt.type!==0)return[3,18];Gt=void 0,Ds=Yt.url,Pt.label=15;case 15:return Pt.trys.push([15,17,,18]),[4,this.context.cache.match(Ds)];case 16:return Gt=Pt.sent(),this.ctx.drawImage(Gt,N.bounds.left-(Gt.width+10),N.bounds.top),[3,18];case 17:return Pt.sent(),this.context.logger.error("Error loading list-style-image "+Ds),[3,18];case 18:return[3,20];case 19:B.listValue&&N.styles.listStyleType!==-1&&(Ms=this.createFontStyle(J)[0],this.ctx.font=Ms,this.ctx.fillStyle=Js(J.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",js=new d(N.bounds.left,N.bounds.top+Os(N.styles.paddingTop,N.bounds.width),N.bounds.width,Ll(J.lineHeight,J.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new tA(B.listValue,js),J.letterSpacing,Ll(J.lineHeight,J.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Pt.label=20;case 20:return[2]}})})},b.prototype.renderStackContent=function(B){return i(this,void 0,void 0,function(){var N,D,Yt,J,de,Yt,xe,be,Yt,Ee,Qe,Yt,Ke,ot,Yt,Ht,Ft,Yt,It,is,Yt;return c(this,function(Gt){switch(Gt.label){case 0:if(Me(B.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(B.element)];case 1:Gt.sent(),N=0,D=B.negativeZIndex,Gt.label=2;case 2:return N<D.length?(Yt=D[N],[4,this.renderStack(Yt)]):[3,5];case 3:Gt.sent(),Gt.label=4;case 4:return N++,[3,2];case 5:return[4,this.renderNodeContent(B.element)];case 6:Gt.sent(),J=0,de=B.nonInlineLevel,Gt.label=7;case 7:return J<de.length?(Yt=de[J],[4,this.renderNode(Yt)]):[3,10];case 8:Gt.sent(),Gt.label=9;case 9:return J++,[3,7];case 10:xe=0,be=B.nonPositionedFloats,Gt.label=11;case 11:return xe<be.length?(Yt=be[xe],[4,this.renderStack(Yt)]):[3,14];case 12:Gt.sent(),Gt.label=13;case 13:return xe++,[3,11];case 14:Ee=0,Qe=B.nonPositionedInlineLevel,Gt.label=15;case 15:return Ee<Qe.length?(Yt=Qe[Ee],[4,this.renderStack(Yt)]):[3,18];case 16:Gt.sent(),Gt.label=17;case 17:return Ee++,[3,15];case 18:Ke=0,ot=B.inlineLevel,Gt.label=19;case 19:return Ke<ot.length?(Yt=ot[Ke],[4,this.renderNode(Yt)]):[3,22];case 20:Gt.sent(),Gt.label=21;case 21:return Ke++,[3,19];case 22:Ht=0,Ft=B.zeroOrAutoZIndexOrTransformedOrOpacity,Gt.label=23;case 23:return Ht<Ft.length?(Yt=Ft[Ht],[4,this.renderStack(Yt)]):[3,26];case 24:Gt.sent(),Gt.label=25;case 25:return Ht++,[3,23];case 26:It=0,is=B.positiveZIndex,Gt.label=27;case 27:return It<is.length?(Yt=is[It],[4,this.renderStack(Yt)]):[3,30];case 28:Gt.sent(),Gt.label=29;case 29:return It++,[3,27];case 30:return[2]}})})},b.prototype.mask=function(B){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(B.slice(0).reverse()),this.ctx.closePath()},b.prototype.path=function(B){this.ctx.beginPath(),this.formatPath(B),this.ctx.closePath()},b.prototype.formatPath=function(B){var N=this;B.forEach(function(D,J){var de=Vi(D)?D.start:D;J===0?N.ctx.moveTo(de.x,de.y):N.ctx.lineTo(de.x,de.y),Vi(D)&&N.ctx.bezierCurveTo(D.startControl.x,D.startControl.y,D.endControl.x,D.endControl.y,D.end.x,D.end.y)})},b.prototype.renderRepeat=function(B,N,D,J){this.path(B),this.ctx.fillStyle=N,this.ctx.translate(D,J),this.ctx.fill(),this.ctx.translate(-D,-J)},b.prototype.resizeImage=function(B,N,D){var J;if(B.width===N&&B.height===D)return B;var de=(J=this.canvas.ownerDocument)!==null&&J!==void 0?J:document,xe=de.createElement("canvas");xe.width=Math.max(1,N),xe.height=Math.max(1,D);var be=xe.getContext("2d");return be.drawImage(B,0,0,B.width,B.height,0,0,N,D),xe},b.prototype.renderBackgroundImage=function(B){return i(this,void 0,void 0,function(){var N,D,J,de,xe,be;return c(this,function(Ee){switch(Ee.label){case 0:N=B.styles.backgroundImage.length-1,D=function(Qe){var Ke,ot,Ht,Hn,Da,Za,Sr,Oa,er,Ft,Hn,Da,Za,Sr,Oa,It,is,Yt,Gt,Ds,Ms,js,Pt,Ps,er,cs,Hn,_r,qi,Sr,Oa,gi,Da,Za,Hl,go,Tc,AA,dA,Pl,Uc,Fc;return c(this,function(Wd){switch(Wd.label){case 0:if(Qe.type!==0)return[3,5];Ke=void 0,ot=Qe.url,Wd.label=1;case 1:return Wd.trys.push([1,3,,4]),[4,J.context.cache.match(ot)];case 2:return Ke=Wd.sent(),[3,4];case 3:return Wd.sent(),J.context.logger.error("Error loading background-image "+ot),[3,4];case 4:return Ke&&(Ht=ch(B,N,[Ke.width,Ke.height,Ke.width/Ke.height]),Hn=Ht[0],Da=Ht[1],Za=Ht[2],Sr=Ht[3],Oa=Ht[4],er=J.ctx.createPattern(J.resizeImage(Ke,Sr,Oa),"repeat"),J.renderRepeat(Hn,er,Da,Za)),[3,6];case 5:kd(Qe)?(Ft=ch(B,N,[null,null,null]),Hn=Ft[0],Da=Ft[1],Za=Ft[2],Sr=Ft[3],Oa=Ft[4],It=Er(Qe.angle,Sr,Oa),is=It[0],Yt=It[1],Gt=It[2],Ds=It[3],Ms=It[4],js=document.createElement("canvas"),js.width=Sr,js.height=Oa,Pt=js.getContext("2d"),Ps=Pt.createLinearGradient(Yt,Ds,Gt,Ms),ir(Qe.stops,is).forEach(function(hh){return Ps.addColorStop(hh.stop,Js(hh.color))}),Pt.fillStyle=Ps,Pt.fillRect(0,0,Sr,Oa),Sr>0&&Oa>0&&(er=J.ctx.createPattern(js,"repeat"),J.renderRepeat(Hn,er,Da,Za))):HA(Qe)&&(cs=ch(B,N,[null,null,null]),Hn=cs[0],_r=cs[1],qi=cs[2],Sr=cs[3],Oa=cs[4],gi=Qe.position.length===0?[mc]:Qe.position,Da=Os(gi[0],Sr),Za=Os(gi[gi.length-1],Oa),Hl=ml(Qe,Da,Za,Sr,Oa),go=Hl[0],Tc=Hl[1],go>0&&Tc>0&&(AA=J.ctx.createRadialGradient(_r+Da,qi+Za,0,_r+Da,qi+Za,go),ir(Qe.stops,go*2).forEach(function(hh){return AA.addColorStop(hh.stop,Js(hh.color))}),J.path(Hn),J.ctx.fillStyle=AA,go!==Tc?(dA=B.bounds.left+.5*B.bounds.width,Pl=B.bounds.top+.5*B.bounds.height,Uc=Tc/go,Fc=1/Uc,J.ctx.save(),J.ctx.translate(dA,Pl),J.ctx.transform(1,0,0,Uc,0,0),J.ctx.translate(-dA,-Pl),J.ctx.fillRect(_r,Fc*(qi-Pl)+Pl,Sr,Oa*Fc),J.ctx.restore()):J.ctx.fill())),Wd.label=6;case 6:return N--,[2]}})},J=this,de=0,xe=B.styles.backgroundImage.slice(0).reverse(),Ee.label=1;case 1:return de<xe.length?(be=xe[de],[5,D(be)]):[3,4];case 2:Ee.sent(),Ee.label=3;case 3:return de++,[3,1];case 4:return[2]}})})},b.prototype.renderSolidBorder=function(B,N,D){return i(this,void 0,void 0,function(){return c(this,function(J){return this.path(ym(D,N)),this.ctx.fillStyle=Js(B),this.ctx.fill(),[2]})})},b.prototype.renderDoubleBorder=function(B,N,D,J){return i(this,void 0,void 0,function(){var de,xe;return c(this,function(be){switch(be.label){case 0:return N<3?[4,this.renderSolidBorder(B,D,J)]:[3,2];case 1:return be.sent(),[2];case 2:return de=pf(J,D),this.path(de),this.ctx.fillStyle=Js(B),this.ctx.fill(),xe=$i(J,D),this.path(xe),this.ctx.fill(),[2]}})})},b.prototype.renderNodeBackgroundAndBorders=function(B){return i(this,void 0,void 0,function(){var N,D,J,de,xe,be,Ee,Qe,Ke=this;return c(this,function(ot){switch(ot.label){case 0:return this.applyEffects(B.getEffects(2)),N=B.container.styles,D=!ca(N.backgroundColor)||N.backgroundImage.length,J=[{style:N.borderTopStyle,color:N.borderTopColor,width:N.borderTopWidth},{style:N.borderRightStyle,color:N.borderRightColor,width:N.borderRightWidth},{style:N.borderBottomStyle,color:N.borderBottomColor,width:N.borderBottomWidth},{style:N.borderLeftStyle,color:N.borderLeftColor,width:N.borderLeftWidth}],de=Bm(mo(N.backgroundClip,0),B.curves),D||N.boxShadow.length?(this.ctx.save(),this.path(de),this.ctx.clip(),ca(N.backgroundColor)||(this.ctx.fillStyle=Js(N.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(B.container)]):[3,2];case 1:ot.sent(),this.ctx.restore(),N.boxShadow.slice(0).reverse().forEach(function(Ht){Ke.ctx.save();var Ft=ed(B.curves),It=Ht.inset?0:uh,is=un(Ft,-It+(Ht.inset?1:-1)*Ht.spread.number,(Ht.inset?1:-1)*Ht.spread.number,Ht.spread.number*(Ht.inset?-2:2),Ht.spread.number*(Ht.inset?-2:2));Ht.inset?(Ke.path(Ft),Ke.ctx.clip(),Ke.mask(is)):(Ke.mask(Ft),Ke.ctx.clip(),Ke.path(is)),Ke.ctx.shadowOffsetX=Ht.offsetX.number+It,Ke.ctx.shadowOffsetY=Ht.offsetY.number,Ke.ctx.shadowColor=Js(Ht.color),Ke.ctx.shadowBlur=Ht.blur.number,Ke.ctx.fillStyle=Ht.inset?Js(Ht.color):"rgba(0,0,0,1)",Ke.ctx.fill(),Ke.ctx.restore()}),ot.label=2;case 2:xe=0,be=0,Ee=J,ot.label=3;case 3:return be<Ee.length?(Qe=Ee[be],Qe.style!==0&&!ca(Qe.color)&&Qe.width>0?Qe.style!==2?[3,5]:[4,this.renderDashedDottedBorder(Qe.color,Qe.width,xe,B.curves,2)]:[3,11]):[3,13];case 4:return ot.sent(),[3,11];case 5:return Qe.style!==3?[3,7]:[4,this.renderDashedDottedBorder(Qe.color,Qe.width,xe,B.curves,3)];case 6:return ot.sent(),[3,11];case 7:return Qe.style!==4?[3,9]:[4,this.renderDoubleBorder(Qe.color,Qe.width,xe,B.curves)];case 8:return ot.sent(),[3,11];case 9:return[4,this.renderSolidBorder(Qe.color,xe,B.curves)];case 10:ot.sent(),ot.label=11;case 11:xe++,ot.label=12;case 12:return be++,[3,3];case 13:return[2]}})})},b.prototype.renderDashedDottedBorder=function(B,N,D,J,de){return i(this,void 0,void 0,function(){var xe,be,Ee,Qe,Ke,ot,Ht,Ft,It,is,Yt,Gt,Ds,Ms,js,Pt,js,Pt;return c(this,function(Ps){return this.ctx.save(),xe=po(J,D),be=ym(J,D),de===2&&(this.path(be),this.ctx.clip()),Vi(be[0])?(Ee=be[0].start.x,Qe=be[0].start.y):(Ee=be[0].x,Qe=be[0].y),Vi(be[1])?(Ke=be[1].end.x,ot=be[1].end.y):(Ke=be[1].x,ot=be[1].y),D===0||D===2?Ht=Math.abs(Ee-Ke):Ht=Math.abs(Qe-ot),this.ctx.beginPath(),de===3?this.formatPath(xe):this.formatPath(be.slice(0,2)),Ft=N<3?N*3:N*2,It=N<3?N*2:N,de===3&&(Ft=N,It=N),is=!0,Ht<=Ft*2?is=!1:Ht<=Ft*2+It?(Yt=Ht/(2*Ft+It),Ft*=Yt,It*=Yt):(Gt=Math.floor((Ht+It)/(Ft+It)),Ds=(Ht-Gt*Ft)/(Gt-1),Ms=(Ht-(Gt+1)*Ft)/Gt,It=Ms<=0||Math.abs(It-Ds)<Math.abs(It-Ms)?Ds:Ms),is&&(de===3?this.ctx.setLineDash([0,Ft+It]):this.ctx.setLineDash([Ft,It])),de===3?(this.ctx.lineCap="round",this.ctx.lineWidth=N):this.ctx.lineWidth=N*2+1.1,this.ctx.strokeStyle=Js(B),this.ctx.stroke(),this.ctx.setLineDash([]),de===2&&(Vi(be[0])&&(js=be[3],Pt=be[0],this.ctx.beginPath(),this.formatPath([new Rt(js.end.x,js.end.y),new Rt(Pt.start.x,Pt.start.y)]),this.ctx.stroke()),Vi(be[1])&&(js=be[1],Pt=be[2],this.ctx.beginPath(),this.formatPath([new Rt(js.end.x,js.end.y),new Rt(Pt.start.x,Pt.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},b.prototype.render=function(B){return i(this,void 0,void 0,function(){var N;return c(this,function(D){switch(D.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Js(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),N=vm(B),[4,this.renderStack(N)];case 1:return D.sent(),this.applyEffects([]),[2,this.canvas]}})})},b})(M0),mf=function(y){return y instanceof nf||y instanceof sm?!0:y instanceof rf&&y.type!==Ju&&y.type!==Yu},Bm=function(y,b){switch(y){case 0:return ed(b);case 2:return mm(b);case 1:default:return Dl(b)}},Fb=function(y){switch(y){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Lb=["-apple-system","system-ui"],vr=function(y){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?y.filter(function(b){return Lb.indexOf(b)===-1}):y},Qr=(function(y){n(b,y);function b(B,N){var D=y.call(this,B,N)||this;return D.canvas=N.canvas?N.canvas:document.createElement("canvas"),D.ctx=D.canvas.getContext("2d"),D.options=N,D.canvas.width=Math.floor(N.width*N.scale),D.canvas.height=Math.floor(N.height*N.scale),D.canvas.style.width=N.width+"px",D.canvas.style.height=N.height+"px",D.ctx.scale(D.options.scale,D.options.scale),D.ctx.translate(-N.x,-N.y),D.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+N.width+"x"+N.height+" at "+N.x+","+N.y+") with scale "+N.scale),D}return b.prototype.render=function(B){return i(this,void 0,void 0,function(){var N,D;return c(this,function(J){switch(J.label){case 0:return N=Pd(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,B),[4,qs(N)];case 1:return D=J.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Js(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(D,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},b})(M0),qs=function(y){return new Promise(function(b,B){var N=new Image;N.onload=function(){b(N)},N.onerror=B,N.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(y))})},Zs=(function(){function y(b){var B=b.id,N=b.enabled;this.id=B,this.enabled=N,this.start=Date.now()}return y.prototype.debug=function(){for(var b=[],B=0;B<arguments.length;B++)b[B]=arguments[B];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,A([this.id,this.getTime()+"ms"],b)):this.info.apply(this,b))},y.prototype.getTime=function(){return Date.now()-this.start},y.prototype.info=function(){for(var b=[],B=0;B<arguments.length;B++)b[B]=arguments[B];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,A([this.id,this.getTime()+"ms"],b))},y.prototype.warn=function(){for(var b=[],B=0;B<arguments.length;B++)b[B]=arguments[B];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,A([this.id,this.getTime()+"ms"],b)):this.info.apply(this,b))},y.prototype.error=function(){for(var b=[],B=0;B<arguments.length;B++)b[B]=arguments[B];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,A([this.id,this.getTime()+"ms"],b)):this.info.apply(this,b))},y.instances={},y})(),Cr=(function(){function y(b,B){var N;this.windowBounds=B,this.instanceName="#"+y.instanceCount++,this.logger=new Zs({id:this.instanceName,enabled:b.logging}),this.cache=(N=b.cache)!==null&&N!==void 0?N:new ih(this,b)}return y.instanceCount=1,y})(),xl=function(y,b){return b===void 0&&(b={}),cA(y,b)};typeof window<"u"&&ah.setContext(window);var cA=function(y,b){return i(void 0,void 0,void 0,function(){var B,N,D,J,de,xe,be,Ee,Qe,Ke,ot,Ht,Ft,It,is,Yt,Gt,Ds,Ms,js,Ps,Pt,Ps,er,cs,Hn,_r,qi,Sr,Oa,gi,Da,Za,Hl,go,Tc,AA,dA,Pl,Uc;return c(this,function(Fc){switch(Fc.label){case 0:if(!y||typeof y!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(B=y.ownerDocument,!B)throw new Error("Element is not attached to a Document");if(N=B.defaultView,!N)throw new Error("Document is not attached to a Window");return D={allowTaint:(er=b.allowTaint)!==null&&er!==void 0?er:!1,imageTimeout:(cs=b.imageTimeout)!==null&&cs!==void 0?cs:15e3,proxy:b.proxy,useCORS:(Hn=b.useCORS)!==null&&Hn!==void 0?Hn:!1},J=a({logging:(_r=b.logging)!==null&&_r!==void 0?_r:!0,cache:b.cache},D),de={windowWidth:(qi=b.windowWidth)!==null&&qi!==void 0?qi:N.innerWidth,windowHeight:(Sr=b.windowHeight)!==null&&Sr!==void 0?Sr:N.innerHeight,scrollX:(Oa=b.scrollX)!==null&&Oa!==void 0?Oa:N.pageXOffset,scrollY:(gi=b.scrollY)!==null&&gi!==void 0?gi:N.pageYOffset},xe=new d(de.scrollX,de.scrollY,de.windowWidth,de.windowHeight),be=new Cr(J,xe),Ee=(Da=b.foreignObjectRendering)!==null&&Da!==void 0?Da:!1,Qe={allowTaint:(Za=b.allowTaint)!==null&&Za!==void 0?Za:!1,onclone:b.onclone,ignoreElements:b.ignoreElements,inlineImages:Ee,copyStyles:Ee},be.logger.debug("Starting document clone with size "+xe.width+"x"+xe.height+" scrolled to "+-xe.left+","+-xe.top),Ke=new j0(be,y,Qe),ot=Ke.clonedReferenceElement,ot?[4,Ke.toIFrame(B,xe)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Ht=Fc.sent(),Ft=lf(ot)||im(ot)?u(ot.ownerDocument):f(be,ot),It=Ft.width,is=Ft.height,Yt=Ft.left,Gt=Ft.top,Ds=Jd(be,ot,b.backgroundColor),Ms={canvas:b.canvas,backgroundColor:Ds,scale:(go=(Hl=b.scale)!==null&&Hl!==void 0?Hl:N.devicePixelRatio)!==null&&go!==void 0?go:1,x:((Tc=b.x)!==null&&Tc!==void 0?Tc:0)+Yt,y:((AA=b.y)!==null&&AA!==void 0?AA:0)+Gt,width:(dA=b.width)!==null&&dA!==void 0?dA:Math.ceil(It),height:(Pl=b.height)!==null&&Pl!==void 0?Pl:Math.ceil(is)},Ee?(be.logger.debug("Document cloned, using foreign object rendering"),Ps=new Qr(be,Ms),[4,Ps.render(ot)]):[3,3];case 2:return js=Fc.sent(),[3,5];case 3:return be.logger.debug("Document cloned, element located at "+Yt+","+Gt+" with size "+It+"x"+is+" using computed rendering"),be.logger.debug("Starting DOM parsing"),Pt=h0(be,ot),Ds===Pt.styles.backgroundColor&&(Pt.styles.backgroundColor=pn.TRANSPARENT),be.logger.debug("Starting renderer for element at "+Ms.x+","+Ms.y+" with size "+Ms.width+"x"+Ms.height),Ps=new Nm(be,Ms),[4,Ps.render(Pt)];case 4:js=Fc.sent(),Fc.label=5;case 5:return(!((Uc=b.removeContainer)!==null&&Uc!==void 0)||Uc)&&(j0.destroy(Ht)||be.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),be.logger.debug("Finished rendering"),[2,js]}})})},Jd=function(y,b,B){var N=b.ownerDocument,D=N.documentElement?fl(y,getComputedStyle(N.documentElement).backgroundColor):pn.TRANSPARENT,J=N.body?fl(y,getComputedStyle(N.body).backgroundColor):pn.TRANSPARENT,de=typeof B=="string"?fl(y,B):B===null?pn.TRANSPARENT:4294967295;return b===N.documentElement?ca(D)?ca(J)?de:J:D:de};return xl}))})(Eg)),Eg.exports}/*!
 * html2pdf.js v0.10.3
 * Copyright (c) 2025 Erik Koopmans
 * Released under the MIT License.
 */var Oj;function aI(){return Oj||(Oj=1,(function(t,e){(function(n,a){t.exports=a(sI,nI())})(self,function(s,n){return(function(){var a={"./src/plugin/hyperlinks.js":(function(d,f,u){u.r(f),u("./node_modules/core-js/modules/web.dom-collections.for-each.js"),u("./node_modules/core-js/modules/es.string.link.js");var p=u("./src/worker.js"),x=u("./src/utils.js"),m=[],j={toContainer:p.default.prototype.toContainer,toPdf:p.default.prototype.toPdf};p.default.prototype.toContainer=function(){return j.toContainer.call(this).then(function(){if(this.opt.enableLinks){var C=this.prop.container,F=C.querySelectorAll("a"),U=(0,x.unitConvert)(C.getBoundingClientRect(),this.prop.pageSize.k);m=[],Array.prototype.forEach.call(F,function(_){for(var z=_.getClientRects(),I=0;I<z.length;I++){var H=(0,x.unitConvert)(z[I],this.prop.pageSize.k);H.left-=U.left,H.top-=U.top;var ee=Math.floor(H.top/this.prop.pageSize.inner.height)+1,$=this.opt.margin[0]+H.top%this.prop.pageSize.inner.height,ce=this.opt.margin[1]+H.left;m.push({page:ee,top:$,left:ce,clientRect:H,link:_})}},this)}})},p.default.prototype.toPdf=function(){return j.toPdf.call(this).then(function(){if(this.opt.enableLinks){m.forEach(function(F){this.prop.pdf.setPage(F.page),this.prop.pdf.link(F.left,F.top,F.clientRect.width,F.clientRect.height,{url:F.link.href})},this);var C=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(C)}})}}),"./src/plugin/jspdf-plugin.js":(function(d,f,u){u.r(f),u("./node_modules/core-js/modules/es.symbol.js"),u("./node_modules/core-js/modules/es.symbol.description.js"),u("./node_modules/core-js/modules/es.object.to-string.js"),u("./node_modules/core-js/modules/es.symbol.iterator.js"),u("./node_modules/core-js/modules/es.array.iterator.js"),u("./node_modules/core-js/modules/es.string.iterator.js"),u("./node_modules/core-js/modules/web.dom-collections.iterator.js");var p=u("jspdf");function x(m){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?x=function(w){return typeof w}:x=function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},x(m)}p.jsPDF.getPageSize=function(m,j,w){if(x(m)==="object"){var S=m;m=S.orientation,j=S.unit||j,w=S.format||w}j=j||"mm",w=w||"a4",m=(""+(m||"P")).toLowerCase();var C=(""+w).toLowerCase(),F={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(j){case"pt":var U=1;break;case"mm":var U=72/25.4;break;case"cm":var U=72/2.54;break;case"in":var U=72;break;case"px":var U=72/96;break;case"pc":var U=12;break;case"em":var U=12;break;case"ex":var U=6;break;default:throw"Invalid unit: "+j}if(F.hasOwnProperty(C))var _=F[C][1]/U,z=F[C][0]/U;else try{var _=w[1],z=w[0]}catch{throw new Error("Invalid format: "+w)}if(m==="p"||m==="portrait"){if(m="p",z>_){var I=z;z=_,_=I}}else if(m==="l"||m==="landscape"){if(m="l",_>z){var I=z;z=_,_=I}}else throw"Invalid orientation: "+m;var H={width:z,height:_,unit:j,k:U};return H},f.default=p.jsPDF}),"./src/plugin/pagebreaks.js":(function(d,f,u){u.r(f),u("./node_modules/core-js/modules/es.array.concat.js"),u("./node_modules/core-js/modules/es.array.slice.js"),u("./node_modules/core-js/modules/es.array.join.js"),u("./node_modules/core-js/modules/web.dom-collections.for-each.js"),u("./node_modules/core-js/modules/es.object.keys.js");var p=u("./src/worker.js"),x=u("./src/utils.js"),m={toContainer:p.default.prototype.toContainer};p.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},p.default.prototype.toContainer=function(){return m.toContainer.call(this).then(function(){var S=this.prop.container,C=this.prop.pageSize.inner.px.height,F=[].concat(this.opt.pagebreak.mode),U={avoidAll:F.indexOf("avoid-all")!==-1,css:F.indexOf("css")!==-1,legacy:F.indexOf("legacy")!==-1},_={},z=this;["before","after","avoid"].forEach(function(ee){var $=U.avoidAll&&ee==="avoid";_[ee]=$?[]:[].concat(z.opt.pagebreak[ee]||[]),_[ee].length>0&&(_[ee]=Array.prototype.slice.call(S.querySelectorAll(_[ee].join(", "))))});var I=S.querySelectorAll(".html2pdf__page-break");I=Array.prototype.slice.call(I);var H=S.querySelectorAll("*");Array.prototype.forEach.call(H,function($){var ce={before:!1,after:U.legacy&&I.indexOf($)!==-1,avoid:U.avoidAll};if(U.css){var Q=window.getComputedStyle($),q=["always","page","left","right"],te=["avoid","avoid-page"];ce={before:ce.before||q.indexOf(Q.breakBefore||Q.pageBreakBefore)!==-1,after:ce.after||q.indexOf(Q.breakAfter||Q.pageBreakAfter)!==-1,avoid:ce.avoid||te.indexOf(Q.breakInside||Q.pageBreakInside)!==-1}}Object.keys(ce).forEach(function(re){ce[re]=ce[re]||_[re].indexOf($)!==-1});var X=$.getBoundingClientRect();if(ce.avoid&&!ce.before){var Ae=Math.floor(X.top/C),W=Math.floor(X.bottom/C),se=Math.abs(X.bottom-X.top)/C;W!==Ae&&se<=1&&(ce.before=!0)}if(ce.before){var Z=(0,x.createElement)("div",{style:{display:"block",height:C-X.top%C+"px"}});$.parentNode.insertBefore(Z,$)}if(ce.after){var Z=(0,x.createElement)("div",{style:{display:"block",height:C-X.bottom%C+"px"}});$.parentNode.insertBefore(Z,$.nextSibling)}})})}}),"./src/utils.js":(function(d,f,u){u.r(f),u.d(f,{objType:function(){return x},createElement:function(){return m},cloneNode:function(){return j},unitConvert:function(){return w},toPx:function(){return S}}),u("./node_modules/core-js/modules/es.number.constructor.js"),u("./node_modules/core-js/modules/es.symbol.js"),u("./node_modules/core-js/modules/es.symbol.description.js"),u("./node_modules/core-js/modules/es.object.to-string.js"),u("./node_modules/core-js/modules/es.symbol.iterator.js"),u("./node_modules/core-js/modules/es.array.iterator.js"),u("./node_modules/core-js/modules/es.string.iterator.js"),u("./node_modules/core-js/modules/web.dom-collections.iterator.js");function p(C){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?p=function(U){return typeof U}:p=function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},p(C)}var x=function(F){var U=p(F);return U==="undefined"?"undefined":U==="string"||F instanceof String?"string":U==="number"||F instanceof Number?"number":U==="function"||F instanceof Function?"function":F&&F.constructor===Array?"array":F&&F.nodeType===1?"element":U==="object"?"object":"unknown"},m=function(F,U){var _=document.createElement(F);if(U.className&&(_.className=U.className),U.innerHTML){_.innerHTML=U.innerHTML;for(var z=_.getElementsByTagName("script"),I=z.length;I-- >0;null)z[I].parentNode.removeChild(z[I])}for(var H in U.style)_.style[H]=U.style[H];return _},j=function C(F,U){for(var _=F.nodeType===3?document.createTextNode(F.nodeValue):F.cloneNode(!1),z=F.firstChild;z;z=z.nextSibling)(U===!0||z.nodeType!==1||z.nodeName!=="SCRIPT")&&_.appendChild(C(z,U));return F.nodeType===1&&(F.nodeName==="CANVAS"?(_.width=F.width,_.height=F.height,_.getContext("2d").drawImage(F,0,0)):(F.nodeName==="TEXTAREA"||F.nodeName==="SELECT")&&(_.value=F.value),_.addEventListener("load",function(){_.scrollTop=F.scrollTop,_.scrollLeft=F.scrollLeft},!0)),_},w=function(F,U){if(x(F)==="number")return F*72/96/U;var _={};for(var z in F)_[z]=F[z]*72/96/U;return _},S=function(F,U){return Math.floor(F*U/72*96)}}),"./src/worker.js":(function(d,f,u){u.r(f),u("./node_modules/core-js/modules/es.object.assign.js"),u("./node_modules/core-js/modules/es.array.map.js"),u("./node_modules/core-js/modules/es.object.keys.js"),u("./node_modules/core-js/modules/es.array.concat.js"),u("./node_modules/core-js/modules/es.object.to-string.js"),u("./node_modules/core-js/modules/es.regexp.to-string.js"),u("./node_modules/core-js/modules/es.function.name.js"),u("./node_modules/core-js/modules/web.dom-collections.for-each.js");var p=u("jspdf"),x=u("html2canvas"),m=u("./src/utils.js"),j=u("./node_modules/es6-promise/dist/es6-promise.js"),w=u.n(j),S=w().Promise,C=function F(U){var _=Object.assign(F.convert(S.resolve()),JSON.parse(JSON.stringify(F.template))),z=F.convert(S.resolve(),_);return z=z.setProgress(1,F,1,[F]),z=z.set(U),z};C.prototype=Object.create(S.prototype),C.prototype.constructor=C,C.convert=function(U,_){return U.__proto__=_||C.prototype,U},C.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},C.prototype.from=function(U,_){function z(I){switch((0,m.objType)(I)){case"string":return"string";case"element":return I.nodeName.toLowerCase&&I.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(_=_||z(U),_){case"string":return this.set({src:(0,m.createElement)("div",{innerHTML:U})});case"element":return this.set({src:U});case"canvas":return this.set({canvas:U});case"img":return this.set({img:U});default:return this.error("Unknown source type.")}})},C.prototype.to=function(U){switch(U){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},C.prototype.toContainer=function(){var U=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(U).then(function(){var z={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},I={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};z.opacity=0;var H=(0,m.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,m.createElement)("div",{className:"html2pdf__overlay",style:z}),this.prop.container=(0,m.createElement)("div",{className:"html2pdf__container",style:I}),this.prop.container.appendChild(H),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)})},C.prototype.toCanvas=function(){var U=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(U).then(function(){var z=Object.assign({},this.opt.html2canvas);return delete z.onrendered,x(this.prop.container,z)}).then(function(z){var I=this.opt.html2canvas.onrendered||function(){};I(z),this.prop.canvas=z,document.body.removeChild(this.prop.overlay)})},C.prototype.toImg=function(){var U=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(U).then(function(){var z=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=z})},C.prototype.toPdf=function(){var U=[function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(U).then(function(){var z=this.prop.canvas,I=this.opt,H=z.height,ee=Math.floor(z.width*this.prop.pageSize.inner.ratio),$=Math.ceil(H/ee),ce=this.prop.pageSize.inner.height,Q=document.createElement("canvas"),q=Q.getContext("2d");Q.width=z.width,Q.height=ee,this.prop.pdf=this.prop.pdf||new p.jsPDF(I.jsPDF);for(var te=0;te<$;te++){te===$-1&&H%ee!==0&&(Q.height=H%ee,ce=Q.height*this.prop.pageSize.inner.width/Q.width);var X=Q.width,Ae=Q.height;q.fillStyle="white",q.fillRect(0,0,X,Ae),q.drawImage(z,0,te*ee,X,Ae,0,0,X,Ae),te&&this.prop.pdf.addPage();var W=Q.toDataURL("image/"+I.image.type,I.image.quality);this.prop.pdf.addImage(W,I.image.type,I.margin[1],I.margin[0],this.prop.pageSize.inner.width,ce)}})},C.prototype.output=function(U,_,z){return z=z||"pdf",z.toLowerCase()==="img"||z.toLowerCase()==="image"?this.outputImg(U,_):this.outputPdf(U,_)},C.prototype.outputPdf=function(U,_){var z=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(z).then(function(){return this.prop.pdf.output(U,_)})},C.prototype.outputImg=function(U,_){var z=[function(){return this.prop.img||this.toImg()}];return this.thenList(z).then(function(){switch(U){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+U+'" is not supported.'}})},C.prototype.save=function(U){var _=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(_).set(U?{filename:U}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},C.prototype.set=function(U){if((0,m.objType)(U)!=="object")return this;var _=Object.keys(U||{}).map(function(z){switch(z){case"margin":return this.setMargin.bind(this,U.margin);case"jsPDF":return function(){return this.opt.jsPDF=U.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,U.pageSize);default:return z in C.template.prop?function(){this.prop[z]=U[z]}:function(){this.opt[z]=U[z]}}},this);return this.then(function(){return this.thenList(_)})},C.prototype.get=function(U,_){return this.then(function(){var I=U in C.template.prop?this.prop[U]:this.opt[U];return _?_(I):I})},C.prototype.setMargin=function(U){return this.then(function(){switch((0,m.objType)(U)){case"number":U=[U,U,U,U];case"array":if(U.length===2&&(U=[U[0],U[1],U[0],U[1]]),U.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=U}).then(this.setPageSize)},C.prototype.setPageSize=function(U){return this.then(function(){U=U||p.jsPDF.getPageSize(this.opt.jsPDF),U.hasOwnProperty("inner")||(U.inner={width:U.width-this.opt.margin[1]-this.opt.margin[3],height:U.height-this.opt.margin[0]-this.opt.margin[2]},U.inner.px={width:(0,m.toPx)(U.inner.width,U.k),height:(0,m.toPx)(U.inner.height,U.k)},U.inner.ratio=U.inner.height/U.inner.width),this.prop.pageSize=U})},C.prototype.setProgress=function(U,_,z,I){return U!=null&&(this.progress.val=U),_!=null&&(this.progress.state=_),z!=null&&(this.progress.n=z),I!=null&&(this.progress.stack=I),this.progress.ratio=this.progress.val/this.progress.state,this},C.prototype.updateProgress=function(U,_,z,I){return this.setProgress(U?this.progress.val+U:null,_||null,z?this.progress.n+z:null,I?this.progress.stack.concat(I):null)},C.prototype.then=function(U,_){var z=this;return this.thenCore(U,_,function(H,ee){return z.updateProgress(null,null,1,[H]),S.prototype.then.call(this,function(ce){return z.updateProgress(null,H),ce}).then(H,ee).then(function(ce){return z.updateProgress(1),ce})})},C.prototype.thenCore=function(U,_,z){z=z||S.prototype.then;var I=this;U&&(U=U.bind(I)),_&&(_=_.bind(I));var H=S.toString().indexOf("[native code]")!==-1&&S.name==="Promise",ee=H?I:C.convert(Object.assign({},I),S.prototype),$=z.call(ee,U,_);return C.convert($,I.__proto__)},C.prototype.thenExternal=function(U,_){return S.prototype.then.call(this,U,_)},C.prototype.thenList=function(U){var _=this;return U.forEach(function(I){_=_.thenCore(I)}),_},C.prototype.catch=function(F){F&&(F=F.bind(this));var U=S.prototype.catch.call(this,F);return C.convert(U,this)},C.prototype.catchExternal=function(U){return S.prototype.catch.call(this,U)},C.prototype.error=function(U){return this.then(function(){throw new Error(U)})},C.prototype.using=C.prototype.set,C.prototype.saveAs=C.prototype.save,C.prototype.export=C.prototype.output,C.prototype.run=C.prototype.then,f.default=C}),"./node_modules/core-js/internals/a-function.js":(function(d){d.exports=function(f){if(typeof f!="function")throw TypeError(String(f)+" is not a function");return f}}),"./node_modules/core-js/internals/a-possible-prototype.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/is-object.js");d.exports=function(x){if(!p(x)&&x!==null)throw TypeError("Can't set "+String(x)+" as a prototype");return x}}),"./node_modules/core-js/internals/add-to-unscopables.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/well-known-symbol.js"),x=u("./node_modules/core-js/internals/object-create.js"),m=u("./node_modules/core-js/internals/object-define-property.js"),j=p("unscopables"),w=Array.prototype;w[j]==null&&m.f(w,j,{configurable:!0,value:x(null)}),d.exports=function(S){w[j][S]=!0}}),"./node_modules/core-js/internals/an-object.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/is-object.js");d.exports=function(x){if(!p(x))throw TypeError(String(x)+" is not an object");return x}}),"./node_modules/core-js/internals/array-for-each.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/array-iteration.js").forEach,x=u("./node_modules/core-js/internals/array-method-is-strict.js"),m=x("forEach");d.exports=m?[].forEach:function(w){return p(this,w,arguments.length>1?arguments[1]:void 0)}}),"./node_modules/core-js/internals/array-includes.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/to-indexed-object.js"),x=u("./node_modules/core-js/internals/to-length.js"),m=u("./node_modules/core-js/internals/to-absolute-index.js"),j=function(w){return function(S,C,F){var U=p(S),_=x(U.length),z=m(F,_),I;if(w&&C!=C){for(;_>z;)if(I=U[z++],I!=I)return!0}else for(;_>z;z++)if((w||z in U)&&U[z]===C)return w||z||0;return!w&&-1}};d.exports={includes:j(!0),indexOf:j(!1)}}),"./node_modules/core-js/internals/array-iteration.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/function-bind-context.js"),x=u("./node_modules/core-js/internals/indexed-object.js"),m=u("./node_modules/core-js/internals/to-object.js"),j=u("./node_modules/core-js/internals/to-length.js"),w=u("./node_modules/core-js/internals/array-species-create.js"),S=[].push,C=function(F){var U=F==1,_=F==2,z=F==3,I=F==4,H=F==6,ee=F==7,$=F==5||H;return function(ce,Q,q,te){for(var X=m(ce),Ae=x(X),W=p(Q,q,3),se=j(Ae.length),Z=0,re=te||w,ve=U?re(ce,se):_||ee?re(ce,0):void 0,ae,R;se>Z;Z++)if(($||Z in Ae)&&(ae=Ae[Z],R=W(ae,Z,X),F))if(U)ve[Z]=R;else if(R)switch(F){case 3:return!0;case 5:return ae;case 6:return Z;case 2:S.call(ve,ae)}else switch(F){case 4:return!1;case 7:S.call(ve,ae)}return H?-1:z||I?I:ve}};d.exports={forEach:C(0),map:C(1),filter:C(2),some:C(3),every:C(4),find:C(5),findIndex:C(6),filterReject:C(7)}}),"./node_modules/core-js/internals/array-method-has-species-support.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/fails.js"),x=u("./node_modules/core-js/internals/well-known-symbol.js"),m=u("./node_modules/core-js/internals/engine-v8-version.js"),j=x("species");d.exports=function(w){return m>=51||!p(function(){var S=[],C=S.constructor={};return C[j]=function(){return{foo:1}},S[w](Boolean).foo!==1})}}),"./node_modules/core-js/internals/array-method-is-strict.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/fails.js");d.exports=function(x,m){var j=[][x];return!!j&&p(function(){j.call(null,m||function(){throw 1},1)})}}),"./node_modules/core-js/internals/array-species-constructor.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/is-object.js"),x=u("./node_modules/core-js/internals/is-array.js"),m=u("./node_modules/core-js/internals/well-known-symbol.js"),j=m("species");d.exports=function(w){var S;return x(w)&&(S=w.constructor,typeof S=="function"&&(S===Array||x(S.prototype))?S=void 0:p(S)&&(S=S[j],S===null&&(S=void 0))),S===void 0?Array:S}}),"./node_modules/core-js/internals/array-species-create.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/array-species-constructor.js");d.exports=function(x,m){return new(p(x))(m===0?0:m)}}),"./node_modules/core-js/internals/classof-raw.js":(function(d){var f={}.toString;d.exports=function(u){return f.call(u).slice(8,-1)}}),"./node_modules/core-js/internals/classof.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/to-string-tag-support.js"),x=u("./node_modules/core-js/internals/classof-raw.js"),m=u("./node_modules/core-js/internals/well-known-symbol.js"),j=m("toStringTag"),w=x((function(){return arguments})())=="Arguments",S=function(C,F){try{return C[F]}catch{}};d.exports=p?x:function(C){var F,U,_;return C===void 0?"Undefined":C===null?"Null":typeof(U=S(F=Object(C),j))=="string"?U:w?x(F):(_=x(F))=="Object"&&typeof F.callee=="function"?"Arguments":_}}),"./node_modules/core-js/internals/copy-constructor-properties.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/has.js"),x=u("./node_modules/core-js/internals/own-keys.js"),m=u("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),j=u("./node_modules/core-js/internals/object-define-property.js");d.exports=function(w,S){for(var C=x(S),F=j.f,U=m.f,_=0;_<C.length;_++){var z=C[_];p(w,z)||F(w,z,U(S,z))}}}),"./node_modules/core-js/internals/correct-prototype-getter.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/fails.js");d.exports=!p(function(){function x(){}return x.prototype.constructor=null,Object.getPrototypeOf(new x)!==x.prototype})}),"./node_modules/core-js/internals/create-html.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/require-object-coercible.js"),x=u("./node_modules/core-js/internals/to-string.js"),m=/"/g;d.exports=function(j,w,S,C){var F=x(p(j)),U="<"+w;return S!==""&&(U+=" "+S+'="'+x(C).replace(m,"&quot;")+'"'),U+">"+F+"</"+w+">"}}),"./node_modules/core-js/internals/create-iterator-constructor.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,x=u("./node_modules/core-js/internals/object-create.js"),m=u("./node_modules/core-js/internals/create-property-descriptor.js"),j=u("./node_modules/core-js/internals/set-to-string-tag.js"),w=u("./node_modules/core-js/internals/iterators.js"),S=function(){return this};d.exports=function(C,F,U){var _=F+" Iterator";return C.prototype=x(p,{next:m(1,U)}),j(C,_,!1,!0),w[_]=S,C}}),"./node_modules/core-js/internals/create-non-enumerable-property.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/descriptors.js"),x=u("./node_modules/core-js/internals/object-define-property.js"),m=u("./node_modules/core-js/internals/create-property-descriptor.js");d.exports=p?function(j,w,S){return x.f(j,w,m(1,S))}:function(j,w,S){return j[w]=S,j}}),"./node_modules/core-js/internals/create-property-descriptor.js":(function(d){d.exports=function(f,u){return{enumerable:!(f&1),configurable:!(f&2),writable:!(f&4),value:u}}}),"./node_modules/core-js/internals/create-property.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/to-property-key.js"),x=u("./node_modules/core-js/internals/object-define-property.js"),m=u("./node_modules/core-js/internals/create-property-descriptor.js");d.exports=function(j,w,S){var C=p(w);C in j?x.f(j,C,m(0,S)):j[C]=S}}),"./node_modules/core-js/internals/define-iterator.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/export.js"),x=u("./node_modules/core-js/internals/create-iterator-constructor.js"),m=u("./node_modules/core-js/internals/object-get-prototype-of.js"),j=u("./node_modules/core-js/internals/object-set-prototype-of.js"),w=u("./node_modules/core-js/internals/set-to-string-tag.js"),S=u("./node_modules/core-js/internals/create-non-enumerable-property.js"),C=u("./node_modules/core-js/internals/redefine.js"),F=u("./node_modules/core-js/internals/well-known-symbol.js"),U=u("./node_modules/core-js/internals/is-pure.js"),_=u("./node_modules/core-js/internals/iterators.js"),z=u("./node_modules/core-js/internals/iterators-core.js"),I=z.IteratorPrototype,H=z.BUGGY_SAFARI_ITERATORS,ee=F("iterator"),$="keys",ce="values",Q="entries",q=function(){return this};d.exports=function(te,X,Ae,W,se,Z,re){x(Ae,X,W);var ve=function(Ne){if(Ne===se&&K)return K;if(!H&&Ne in P)return P[Ne];switch(Ne){case $:return function(){return new Ae(this,Ne)};case ce:return function(){return new Ae(this,Ne)};case Q:return function(){return new Ae(this,Ne)}}return function(){return new Ae(this)}},ae=X+" Iterator",R=!1,P=te.prototype,V=P[ee]||P["@@iterator"]||se&&P[se],K=!H&&V||ve(se),ne=X=="Array"&&P.entries||V,pe,Ce,Ue;if(ne&&(pe=m(ne.call(new te)),I!==Object.prototype&&pe.next&&(!U&&m(pe)!==I&&(j?j(pe,I):typeof pe[ee]!="function"&&S(pe,ee,q)),w(pe,ae,!0,!0),U&&(_[ae]=q))),se==ce&&V&&V.name!==ce&&(R=!0,K=function(){return V.call(this)}),(!U||re)&&P[ee]!==K&&S(P,ee,K),_[X]=K,se)if(Ce={values:ve(ce),keys:Z?K:ve($),entries:ve(Q)},re)for(Ue in Ce)(H||R||!(Ue in P))&&C(P,Ue,Ce[Ue]);else p({target:X,proto:!0,forced:H||R},Ce);return Ce}}),"./node_modules/core-js/internals/define-well-known-symbol.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/path.js"),x=u("./node_modules/core-js/internals/has.js"),m=u("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),j=u("./node_modules/core-js/internals/object-define-property.js").f;d.exports=function(w){var S=p.Symbol||(p.Symbol={});x(S,w)||j(S,w,{value:m.f(w)})}}),"./node_modules/core-js/internals/descriptors.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/fails.js");d.exports=!p(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})}),"./node_modules/core-js/internals/document-create-element.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/global.js"),x=u("./node_modules/core-js/internals/is-object.js"),m=p.document,j=x(m)&&x(m.createElement);d.exports=function(w){return j?m.createElement(w):{}}}),"./node_modules/core-js/internals/dom-iterables.js":(function(d){d.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}),"./node_modules/core-js/internals/engine-user-agent.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/get-built-in.js");d.exports=p("navigator","userAgent")||""}),"./node_modules/core-js/internals/engine-v8-version.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/global.js"),x=u("./node_modules/core-js/internals/engine-user-agent.js"),m=p.process,j=p.Deno,w=m&&m.versions||j&&j.version,S=w&&w.v8,C,F;S?(C=S.split("."),F=C[0]<4?1:C[0]+C[1]):x&&(C=x.match(/Edge\/(\d+)/),(!C||C[1]>=74)&&(C=x.match(/Chrome\/(\d+)/),C&&(F=C[1]))),d.exports=F&&+F}),"./node_modules/core-js/internals/enum-bug-keys.js":(function(d){d.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),"./node_modules/core-js/internals/export.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/global.js"),x=u("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,m=u("./node_modules/core-js/internals/create-non-enumerable-property.js"),j=u("./node_modules/core-js/internals/redefine.js"),w=u("./node_modules/core-js/internals/set-global.js"),S=u("./node_modules/core-js/internals/copy-constructor-properties.js"),C=u("./node_modules/core-js/internals/is-forced.js");d.exports=function(F,U){var _=F.target,z=F.global,I=F.stat,H,ee,$,ce,Q,q;if(z?ee=p:I?ee=p[_]||w(_,{}):ee=(p[_]||{}).prototype,ee)for($ in U){if(Q=U[$],F.noTargetGet?(q=x(ee,$),ce=q&&q.value):ce=ee[$],H=C(z?$:_+(I?".":"#")+$,F.forced),!H&&ce!==void 0){if(typeof Q==typeof ce)continue;S(Q,ce)}(F.sham||ce&&ce.sham)&&m(Q,"sham",!0),j(ee,$,Q,F)}}}),"./node_modules/core-js/internals/fails.js":(function(d){d.exports=function(f){try{return!!f()}catch{return!0}}}),"./node_modules/core-js/internals/function-bind-context.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/a-function.js");d.exports=function(x,m,j){if(p(x),m===void 0)return x;switch(j){case 0:return function(){return x.call(m)};case 1:return function(w){return x.call(m,w)};case 2:return function(w,S){return x.call(m,w,S)};case 3:return function(w,S,C){return x.call(m,w,S,C)}}return function(){return x.apply(m,arguments)}}}),"./node_modules/core-js/internals/get-built-in.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/global.js"),x=function(m){return typeof m=="function"?m:void 0};d.exports=function(m,j){return arguments.length<2?x(p[m]):p[m]&&p[m][j]}}),"./node_modules/core-js/internals/global.js":(function(d){var f=function(u){return u&&u.Math==Math&&u};d.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof $m=="object"&&$m)||(function(){return this})()||Function("return this")()}),"./node_modules/core-js/internals/has.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/to-object.js"),x={}.hasOwnProperty;d.exports=Object.hasOwn||function(j,w){return x.call(p(j),w)}}),"./node_modules/core-js/internals/hidden-keys.js":(function(d){d.exports={}}),"./node_modules/core-js/internals/html.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/get-built-in.js");d.exports=p("document","documentElement")}),"./node_modules/core-js/internals/ie8-dom-define.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/descriptors.js"),x=u("./node_modules/core-js/internals/fails.js"),m=u("./node_modules/core-js/internals/document-create-element.js");d.exports=!p&&!x(function(){return Object.defineProperty(m("div"),"a",{get:function(){return 7}}).a!=7})}),"./node_modules/core-js/internals/indexed-object.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/fails.js"),x=u("./node_modules/core-js/internals/classof-raw.js"),m="".split;d.exports=p(function(){return!Object("z").propertyIsEnumerable(0)})?function(j){return x(j)=="String"?m.call(j,""):Object(j)}:Object}),"./node_modules/core-js/internals/inherit-if-required.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/is-object.js"),x=u("./node_modules/core-js/internals/object-set-prototype-of.js");d.exports=function(m,j,w){var S,C;return x&&typeof(S=j.constructor)=="function"&&S!==w&&p(C=S.prototype)&&C!==w.prototype&&x(m,C),m}}),"./node_modules/core-js/internals/inspect-source.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/shared-store.js"),x=Function.toString;typeof p.inspectSource!="function"&&(p.inspectSource=function(m){return x.call(m)}),d.exports=p.inspectSource}),"./node_modules/core-js/internals/internal-state.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/native-weak-map.js"),x=u("./node_modules/core-js/internals/global.js"),m=u("./node_modules/core-js/internals/is-object.js"),j=u("./node_modules/core-js/internals/create-non-enumerable-property.js"),w=u("./node_modules/core-js/internals/has.js"),S=u("./node_modules/core-js/internals/shared-store.js"),C=u("./node_modules/core-js/internals/shared-key.js"),F=u("./node_modules/core-js/internals/hidden-keys.js"),U="Object already initialized",_=x.WeakMap,z,I,H,ee=function(Ae){return H(Ae)?I(Ae):z(Ae,{})},$=function(Ae){return function(W){var se;if(!m(W)||(se=I(W)).type!==Ae)throw TypeError("Incompatible receiver, "+Ae+" required");return se}};if(p||S.state){var ce=S.state||(S.state=new _),Q=ce.get,q=ce.has,te=ce.set;z=function(Ae,W){if(q.call(ce,Ae))throw new TypeError(U);return W.facade=Ae,te.call(ce,Ae,W),W},I=function(Ae){return Q.call(ce,Ae)||{}},H=function(Ae){return q.call(ce,Ae)}}else{var X=C("state");F[X]=!0,z=function(Ae,W){if(w(Ae,X))throw new TypeError(U);return W.facade=Ae,j(Ae,X,W),W},I=function(Ae){return w(Ae,X)?Ae[X]:{}},H=function(Ae){return w(Ae,X)}}d.exports={set:z,get:I,has:H,enforce:ee,getterFor:$}}),"./node_modules/core-js/internals/is-array.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/classof-raw.js");d.exports=Array.isArray||function(m){return p(m)=="Array"}}),"./node_modules/core-js/internals/is-forced.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/fails.js"),x=/#|\.prototype\./,m=function(F,U){var _=w[j(F)];return _==C?!0:_==S?!1:typeof U=="function"?p(U):!!U},j=m.normalize=function(F){return String(F).replace(x,".").toLowerCase()},w=m.data={},S=m.NATIVE="N",C=m.POLYFILL="P";d.exports=m}),"./node_modules/core-js/internals/is-object.js":(function(d){d.exports=function(f){return typeof f=="object"?f!==null:typeof f=="function"}}),"./node_modules/core-js/internals/is-pure.js":(function(d){d.exports=!1}),"./node_modules/core-js/internals/is-symbol.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/get-built-in.js"),x=u("./node_modules/core-js/internals/use-symbol-as-uid.js");d.exports=x?function(m){return typeof m=="symbol"}:function(m){var j=p("Symbol");return typeof j=="function"&&Object(m)instanceof j}}),"./node_modules/core-js/internals/iterators-core.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/fails.js"),x=u("./node_modules/core-js/internals/object-get-prototype-of.js"),m=u("./node_modules/core-js/internals/create-non-enumerable-property.js"),j=u("./node_modules/core-js/internals/has.js"),w=u("./node_modules/core-js/internals/well-known-symbol.js"),S=u("./node_modules/core-js/internals/is-pure.js"),C=w("iterator"),F=!1,U=function(){return this},_,z,I;[].keys&&(I=[].keys(),"next"in I?(z=x(x(I)),z!==Object.prototype&&(_=z)):F=!0);var H=_==null||p(function(){var ee={};return _[C].call(ee)!==ee});H&&(_={}),(!S||H)&&!j(_,C)&&m(_,C,U),d.exports={IteratorPrototype:_,BUGGY_SAFARI_ITERATORS:F}}),"./node_modules/core-js/internals/iterators.js":(function(d){d.exports={}}),"./node_modules/core-js/internals/native-symbol.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/engine-v8-version.js"),x=u("./node_modules/core-js/internals/fails.js");d.exports=!!Object.getOwnPropertySymbols&&!x(function(){var m=Symbol();return!String(m)||!(Object(m)instanceof Symbol)||!Symbol.sham&&p&&p<41})}),"./node_modules/core-js/internals/native-weak-map.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/global.js"),x=u("./node_modules/core-js/internals/inspect-source.js"),m=p.WeakMap;d.exports=typeof m=="function"&&/native code/.test(x(m))}),"./node_modules/core-js/internals/object-assign.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/descriptors.js"),x=u("./node_modules/core-js/internals/fails.js"),m=u("./node_modules/core-js/internals/object-keys.js"),j=u("./node_modules/core-js/internals/object-get-own-property-symbols.js"),w=u("./node_modules/core-js/internals/object-property-is-enumerable.js"),S=u("./node_modules/core-js/internals/to-object.js"),C=u("./node_modules/core-js/internals/indexed-object.js"),F=Object.assign,U=Object.defineProperty;d.exports=!F||x(function(){if(p&&F({b:1},F(U({},"a",{enumerable:!0,get:function(){U(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var _={},z={},I=Symbol(),H="abcdefghijklmnopqrst";return _[I]=7,H.split("").forEach(function(ee){z[ee]=ee}),F({},_)[I]!=7||m(F({},z)).join("")!=H})?function(z,I){for(var H=S(z),ee=arguments.length,$=1,ce=j.f,Q=w.f;ee>$;)for(var q=C(arguments[$++]),te=ce?m(q).concat(ce(q)):m(q),X=te.length,Ae=0,W;X>Ae;)W=te[Ae++],(!p||Q.call(q,W))&&(H[W]=q[W]);return H}:F}),"./node_modules/core-js/internals/object-create.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/an-object.js"),x=u("./node_modules/core-js/internals/object-define-properties.js"),m=u("./node_modules/core-js/internals/enum-bug-keys.js"),j=u("./node_modules/core-js/internals/hidden-keys.js"),w=u("./node_modules/core-js/internals/html.js"),S=u("./node_modules/core-js/internals/document-create-element.js"),C=u("./node_modules/core-js/internals/shared-key.js"),F=">",U="<",_="prototype",z="script",I=C("IE_PROTO"),H=function(){},ee=function(te){return U+z+F+te+U+"/"+z+F},$=function(te){te.write(ee("")),te.close();var X=te.parentWindow.Object;return te=null,X},ce=function(){var te=S("iframe"),X="java"+z+":",Ae;if(te.style)return te.style.display="none",w.appendChild(te),te.src=String(X),Ae=te.contentWindow.document,Ae.open(),Ae.write(ee("document.F=Object")),Ae.close(),Ae.F},Q,q=function(){try{Q=new ActiveXObject("htmlfile")}catch{}q=document.domain&&Q?$(Q):ce()||$(Q);for(var te=m.length;te--;)delete q[_][m[te]];return q()};j[I]=!0,d.exports=Object.create||function(X,Ae){var W;return X!==null?(H[_]=p(X),W=new H,H[_]=null,W[I]=X):W=q(),Ae===void 0?W:x(W,Ae)}}),"./node_modules/core-js/internals/object-define-properties.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/descriptors.js"),x=u("./node_modules/core-js/internals/object-define-property.js"),m=u("./node_modules/core-js/internals/an-object.js"),j=u("./node_modules/core-js/internals/object-keys.js");d.exports=p?Object.defineProperties:function(S,C){m(S);for(var F=j(C),U=F.length,_=0,z;U>_;)x.f(S,z=F[_++],C[z]);return S}}),"./node_modules/core-js/internals/object-define-property.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/descriptors.js"),x=u("./node_modules/core-js/internals/ie8-dom-define.js"),m=u("./node_modules/core-js/internals/an-object.js"),j=u("./node_modules/core-js/internals/to-property-key.js"),w=Object.defineProperty;f.f=p?w:function(C,F,U){if(m(C),F=j(F),m(U),x)try{return w(C,F,U)}catch{}if("get"in U||"set"in U)throw TypeError("Accessors not supported");return"value"in U&&(C[F]=U.value),C}}),"./node_modules/core-js/internals/object-get-own-property-descriptor.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/descriptors.js"),x=u("./node_modules/core-js/internals/object-property-is-enumerable.js"),m=u("./node_modules/core-js/internals/create-property-descriptor.js"),j=u("./node_modules/core-js/internals/to-indexed-object.js"),w=u("./node_modules/core-js/internals/to-property-key.js"),S=u("./node_modules/core-js/internals/has.js"),C=u("./node_modules/core-js/internals/ie8-dom-define.js"),F=Object.getOwnPropertyDescriptor;f.f=p?F:function(_,z){if(_=j(_),z=w(z),C)try{return F(_,z)}catch{}if(S(_,z))return m(!x.f.call(_,z),_[z])}}),"./node_modules/core-js/internals/object-get-own-property-names-external.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/to-indexed-object.js"),x=u("./node_modules/core-js/internals/object-get-own-property-names.js").f,m={}.toString,j=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],w=function(S){try{return x(S)}catch{return j.slice()}};d.exports.f=function(C){return j&&m.call(C)=="[object Window]"?w(C):x(p(C))}}),"./node_modules/core-js/internals/object-get-own-property-names.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/object-keys-internal.js"),x=u("./node_modules/core-js/internals/enum-bug-keys.js"),m=x.concat("length","prototype");f.f=Object.getOwnPropertyNames||function(w){return p(w,m)}}),"./node_modules/core-js/internals/object-get-own-property-symbols.js":(function(d,f){f.f=Object.getOwnPropertySymbols}),"./node_modules/core-js/internals/object-get-prototype-of.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/has.js"),x=u("./node_modules/core-js/internals/to-object.js"),m=u("./node_modules/core-js/internals/shared-key.js"),j=u("./node_modules/core-js/internals/correct-prototype-getter.js"),w=m("IE_PROTO"),S=Object.prototype;d.exports=j?Object.getPrototypeOf:function(C){return C=x(C),p(C,w)?C[w]:typeof C.constructor=="function"&&C instanceof C.constructor?C.constructor.prototype:C instanceof Object?S:null}}),"./node_modules/core-js/internals/object-keys-internal.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/has.js"),x=u("./node_modules/core-js/internals/to-indexed-object.js"),m=u("./node_modules/core-js/internals/array-includes.js").indexOf,j=u("./node_modules/core-js/internals/hidden-keys.js");d.exports=function(w,S){var C=x(w),F=0,U=[],_;for(_ in C)!p(j,_)&&p(C,_)&&U.push(_);for(;S.length>F;)p(C,_=S[F++])&&(~m(U,_)||U.push(_));return U}}),"./node_modules/core-js/internals/object-keys.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/object-keys-internal.js"),x=u("./node_modules/core-js/internals/enum-bug-keys.js");d.exports=Object.keys||function(j){return p(j,x)}}),"./node_modules/core-js/internals/object-property-is-enumerable.js":(function(d,f){var u={}.propertyIsEnumerable,p=Object.getOwnPropertyDescriptor,x=p&&!u.call({1:2},1);f.f=x?function(j){var w=p(this,j);return!!w&&w.enumerable}:u}),"./node_modules/core-js/internals/object-set-prototype-of.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/an-object.js"),x=u("./node_modules/core-js/internals/a-possible-prototype.js");d.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var m=!1,j={},w;try{w=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,w.call(j,[]),m=j instanceof Array}catch{}return function(C,F){return p(C),x(F),m?w.call(C,F):C.__proto__=F,C}})():void 0)}),"./node_modules/core-js/internals/object-to-string.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/to-string-tag-support.js"),x=u("./node_modules/core-js/internals/classof.js");d.exports=p?{}.toString:function(){return"[object "+x(this)+"]"}}),"./node_modules/core-js/internals/ordinary-to-primitive.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/is-object.js");d.exports=function(x,m){var j,w;if(m==="string"&&typeof(j=x.toString)=="function"&&!p(w=j.call(x))||typeof(j=x.valueOf)=="function"&&!p(w=j.call(x))||m!=="string"&&typeof(j=x.toString)=="function"&&!p(w=j.call(x)))return w;throw TypeError("Can't convert object to primitive value")}}),"./node_modules/core-js/internals/own-keys.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/get-built-in.js"),x=u("./node_modules/core-js/internals/object-get-own-property-names.js"),m=u("./node_modules/core-js/internals/object-get-own-property-symbols.js"),j=u("./node_modules/core-js/internals/an-object.js");d.exports=p("Reflect","ownKeys")||function(S){var C=x.f(j(S)),F=m.f;return F?C.concat(F(S)):C}}),"./node_modules/core-js/internals/path.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/global.js");d.exports=p}),"./node_modules/core-js/internals/redefine.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/global.js"),x=u("./node_modules/core-js/internals/create-non-enumerable-property.js"),m=u("./node_modules/core-js/internals/has.js"),j=u("./node_modules/core-js/internals/set-global.js"),w=u("./node_modules/core-js/internals/inspect-source.js"),S=u("./node_modules/core-js/internals/internal-state.js"),C=S.get,F=S.enforce,U=String(String).split("String");(d.exports=function(_,z,I,H){var ee=H?!!H.unsafe:!1,$=H?!!H.enumerable:!1,ce=H?!!H.noTargetGet:!1,Q;if(typeof I=="function"&&(typeof z=="string"&&!m(I,"name")&&x(I,"name",z),Q=F(I),Q.source||(Q.source=U.join(typeof z=="string"?z:""))),_===p){$?_[z]=I:j(z,I);return}else ee?!ce&&_[z]&&($=!0):delete _[z];$?_[z]=I:x(_,z,I)})(Function.prototype,"toString",function(){return typeof this=="function"&&C(this).source||w(this)})}),"./node_modules/core-js/internals/regexp-flags.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/an-object.js");d.exports=function(){var x=p(this),m="";return x.global&&(m+="g"),x.ignoreCase&&(m+="i"),x.multiline&&(m+="m"),x.dotAll&&(m+="s"),x.unicode&&(m+="u"),x.sticky&&(m+="y"),m}}),"./node_modules/core-js/internals/require-object-coercible.js":(function(d){d.exports=function(f){if(f==null)throw TypeError("Can't call method on "+f);return f}}),"./node_modules/core-js/internals/set-global.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/global.js");d.exports=function(x,m){try{Object.defineProperty(p,x,{value:m,configurable:!0,writable:!0})}catch{p[x]=m}return m}}),"./node_modules/core-js/internals/set-to-string-tag.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/object-define-property.js").f,x=u("./node_modules/core-js/internals/has.js"),m=u("./node_modules/core-js/internals/well-known-symbol.js"),j=m("toStringTag");d.exports=function(w,S,C){w&&!x(w=C?w:w.prototype,j)&&p(w,j,{configurable:!0,value:S})}}),"./node_modules/core-js/internals/shared-key.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/shared.js"),x=u("./node_modules/core-js/internals/uid.js"),m=p("keys");d.exports=function(j){return m[j]||(m[j]=x(j))}}),"./node_modules/core-js/internals/shared-store.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/global.js"),x=u("./node_modules/core-js/internals/set-global.js"),m="__core-js_shared__",j=p[m]||x(m,{});d.exports=j}),"./node_modules/core-js/internals/shared.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/is-pure.js"),x=u("./node_modules/core-js/internals/shared-store.js");(d.exports=function(m,j){return x[m]||(x[m]=j!==void 0?j:{})})("versions",[]).push({version:"3.16.0",mode:p?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})}),"./node_modules/core-js/internals/string-html-forced.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/fails.js");d.exports=function(x){return p(function(){var m=""[x]('"');return m!==m.toLowerCase()||m.split('"').length>3})}}),"./node_modules/core-js/internals/string-multibyte.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/to-integer.js"),x=u("./node_modules/core-js/internals/to-string.js"),m=u("./node_modules/core-js/internals/require-object-coercible.js"),j=function(w){return function(S,C){var F=x(m(S)),U=p(C),_=F.length,z,I;return U<0||U>=_?w?"":void 0:(z=F.charCodeAt(U),z<55296||z>56319||U+1===_||(I=F.charCodeAt(U+1))<56320||I>57343?w?F.charAt(U):z:w?F.slice(U,U+2):(z-55296<<10)+(I-56320)+65536)}};d.exports={codeAt:j(!1),charAt:j(!0)}}),"./node_modules/core-js/internals/string-trim.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/require-object-coercible.js"),x=u("./node_modules/core-js/internals/to-string.js"),m=u("./node_modules/core-js/internals/whitespaces.js"),j="["+m+"]",w=RegExp("^"+j+j+"*"),S=RegExp(j+j+"*$"),C=function(F){return function(U){var _=x(p(U));return F&1&&(_=_.replace(w,"")),F&2&&(_=_.replace(S,"")),_}};d.exports={start:C(1),end:C(2),trim:C(3)}}),"./node_modules/core-js/internals/to-absolute-index.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/to-integer.js"),x=Math.max,m=Math.min;d.exports=function(j,w){var S=p(j);return S<0?x(S+w,0):m(S,w)}}),"./node_modules/core-js/internals/to-indexed-object.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/indexed-object.js"),x=u("./node_modules/core-js/internals/require-object-coercible.js");d.exports=function(m){return p(x(m))}}),"./node_modules/core-js/internals/to-integer.js":(function(d){var f=Math.ceil,u=Math.floor;d.exports=function(p){return isNaN(p=+p)?0:(p>0?u:f)(p)}}),"./node_modules/core-js/internals/to-length.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/to-integer.js"),x=Math.min;d.exports=function(m){return m>0?x(p(m),9007199254740991):0}}),"./node_modules/core-js/internals/to-object.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/require-object-coercible.js");d.exports=function(x){return Object(p(x))}}),"./node_modules/core-js/internals/to-primitive.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/is-object.js"),x=u("./node_modules/core-js/internals/is-symbol.js"),m=u("./node_modules/core-js/internals/ordinary-to-primitive.js"),j=u("./node_modules/core-js/internals/well-known-symbol.js"),w=j("toPrimitive");d.exports=function(S,C){if(!p(S)||x(S))return S;var F=S[w],U;if(F!==void 0){if(C===void 0&&(C="default"),U=F.call(S,C),!p(U)||x(U))return U;throw TypeError("Can't convert object to primitive value")}return C===void 0&&(C="number"),m(S,C)}}),"./node_modules/core-js/internals/to-property-key.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/to-primitive.js"),x=u("./node_modules/core-js/internals/is-symbol.js");d.exports=function(m){var j=p(m,"string");return x(j)?j:String(j)}}),"./node_modules/core-js/internals/to-string-tag-support.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/well-known-symbol.js"),x=p("toStringTag"),m={};m[x]="z",d.exports=String(m)==="[object z]"}),"./node_modules/core-js/internals/to-string.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/is-symbol.js");d.exports=function(x){if(p(x))throw TypeError("Cannot convert a Symbol value to a string");return String(x)}}),"./node_modules/core-js/internals/uid.js":(function(d){var f=0,u=Math.random();d.exports=function(p){return"Symbol("+String(p===void 0?"":p)+")_"+(++f+u).toString(36)}}),"./node_modules/core-js/internals/use-symbol-as-uid.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/native-symbol.js");d.exports=p&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}),"./node_modules/core-js/internals/well-known-symbol-wrapped.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/well-known-symbol.js");f.f=p}),"./node_modules/core-js/internals/well-known-symbol.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/global.js"),x=u("./node_modules/core-js/internals/shared.js"),m=u("./node_modules/core-js/internals/has.js"),j=u("./node_modules/core-js/internals/uid.js"),w=u("./node_modules/core-js/internals/native-symbol.js"),S=u("./node_modules/core-js/internals/use-symbol-as-uid.js"),C=x("wks"),F=p.Symbol,U=S?F:F&&F.withoutSetter||j;d.exports=function(_){return(!m(C,_)||!(w||typeof C[_]=="string"))&&(w&&m(F,_)?C[_]=F[_]:C[_]=U("Symbol."+_)),C[_]}}),"./node_modules/core-js/internals/whitespaces.js":(function(d){d.exports=`	
\v\f\r \u2028\u2029\uFEFF`}),"./node_modules/core-js/modules/es.array.concat.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/export.js"),x=u("./node_modules/core-js/internals/fails.js"),m=u("./node_modules/core-js/internals/is-array.js"),j=u("./node_modules/core-js/internals/is-object.js"),w=u("./node_modules/core-js/internals/to-object.js"),S=u("./node_modules/core-js/internals/to-length.js"),C=u("./node_modules/core-js/internals/create-property.js"),F=u("./node_modules/core-js/internals/array-species-create.js"),U=u("./node_modules/core-js/internals/array-method-has-species-support.js"),_=u("./node_modules/core-js/internals/well-known-symbol.js"),z=u("./node_modules/core-js/internals/engine-v8-version.js"),I=_("isConcatSpreadable"),H=9007199254740991,ee="Maximum allowed index exceeded",$=z>=51||!x(function(){var te=[];return te[I]=!1,te.concat()[0]!==te}),ce=U("concat"),Q=function(te){if(!j(te))return!1;var X=te[I];return X!==void 0?!!X:m(te)},q=!$||!ce;p({target:"Array",proto:!0,forced:q},{concat:function(X){var Ae=w(this),W=F(Ae,0),se=0,Z,re,ve,ae,R;for(Z=-1,ve=arguments.length;Z<ve;Z++)if(R=Z===-1?Ae:arguments[Z],Q(R)){if(ae=S(R.length),se+ae>H)throw TypeError(ee);for(re=0;re<ae;re++,se++)re in R&&C(W,se,R[re])}else{if(se>=H)throw TypeError(ee);C(W,se++,R)}return W.length=se,W}})}),"./node_modules/core-js/modules/es.array.iterator.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/to-indexed-object.js"),x=u("./node_modules/core-js/internals/add-to-unscopables.js"),m=u("./node_modules/core-js/internals/iterators.js"),j=u("./node_modules/core-js/internals/internal-state.js"),w=u("./node_modules/core-js/internals/define-iterator.js"),S="Array Iterator",C=j.set,F=j.getterFor(S);d.exports=w(Array,"Array",function(U,_){C(this,{type:S,target:p(U),index:0,kind:_})},function(){var U=F(this),_=U.target,z=U.kind,I=U.index++;return!_||I>=_.length?(U.target=void 0,{value:void 0,done:!0}):z=="keys"?{value:I,done:!1}:z=="values"?{value:_[I],done:!1}:{value:[I,_[I]],done:!1}},"values"),m.Arguments=m.Array,x("keys"),x("values"),x("entries")}),"./node_modules/core-js/modules/es.array.join.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/export.js"),x=u("./node_modules/core-js/internals/indexed-object.js"),m=u("./node_modules/core-js/internals/to-indexed-object.js"),j=u("./node_modules/core-js/internals/array-method-is-strict.js"),w=[].join,S=x!=Object,C=j("join",",");p({target:"Array",proto:!0,forced:S||!C},{join:function(U){return w.call(m(this),U===void 0?",":U)}})}),"./node_modules/core-js/modules/es.array.map.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/export.js"),x=u("./node_modules/core-js/internals/array-iteration.js").map,m=u("./node_modules/core-js/internals/array-method-has-species-support.js"),j=m("map");p({target:"Array",proto:!0,forced:!j},{map:function(S){return x(this,S,arguments.length>1?arguments[1]:void 0)}})}),"./node_modules/core-js/modules/es.array.slice.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/export.js"),x=u("./node_modules/core-js/internals/is-object.js"),m=u("./node_modules/core-js/internals/is-array.js"),j=u("./node_modules/core-js/internals/to-absolute-index.js"),w=u("./node_modules/core-js/internals/to-length.js"),S=u("./node_modules/core-js/internals/to-indexed-object.js"),C=u("./node_modules/core-js/internals/create-property.js"),F=u("./node_modules/core-js/internals/well-known-symbol.js"),U=u("./node_modules/core-js/internals/array-method-has-species-support.js"),_=U("slice"),z=F("species"),I=[].slice,H=Math.max;p({target:"Array",proto:!0,forced:!_},{slice:function($,ce){var Q=S(this),q=w(Q.length),te=j($,q),X=j(ce===void 0?q:ce,q),Ae,W,se;if(m(Q)&&(Ae=Q.constructor,typeof Ae=="function"&&(Ae===Array||m(Ae.prototype))?Ae=void 0:x(Ae)&&(Ae=Ae[z],Ae===null&&(Ae=void 0)),Ae===Array||Ae===void 0))return I.call(Q,te,X);for(W=new(Ae===void 0?Array:Ae)(H(X-te,0)),se=0;te<X;te++,se++)te in Q&&C(W,se,Q[te]);return W.length=se,W}})}),"./node_modules/core-js/modules/es.function.name.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/descriptors.js"),x=u("./node_modules/core-js/internals/object-define-property.js").f,m=Function.prototype,j=m.toString,w=/^\s*function ([^ (]*)/,S="name";p&&!(S in m)&&x(m,S,{configurable:!0,get:function(){try{return j.call(this).match(w)[1]}catch{return""}}})}),"./node_modules/core-js/modules/es.number.constructor.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/descriptors.js"),x=u("./node_modules/core-js/internals/global.js"),m=u("./node_modules/core-js/internals/is-forced.js"),j=u("./node_modules/core-js/internals/redefine.js"),w=u("./node_modules/core-js/internals/has.js"),S=u("./node_modules/core-js/internals/classof-raw.js"),C=u("./node_modules/core-js/internals/inherit-if-required.js"),F=u("./node_modules/core-js/internals/is-symbol.js"),U=u("./node_modules/core-js/internals/to-primitive.js"),_=u("./node_modules/core-js/internals/fails.js"),z=u("./node_modules/core-js/internals/object-create.js"),I=u("./node_modules/core-js/internals/object-get-own-property-names.js").f,H=u("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,ee=u("./node_modules/core-js/internals/object-define-property.js").f,$=u("./node_modules/core-js/internals/string-trim.js").trim,ce="Number",Q=x[ce],q=Q.prototype,te=S(z(q))==ce,X=function(re){if(F(re))throw TypeError("Cannot convert a Symbol value to a number");var ve=U(re,"number"),ae,R,P,V,K,ne,pe,Ce;if(typeof ve=="string"&&ve.length>2){if(ve=$(ve),ae=ve.charCodeAt(0),ae===43||ae===45){if(R=ve.charCodeAt(2),R===88||R===120)return NaN}else if(ae===48){switch(ve.charCodeAt(1)){case 66:case 98:P=2,V=49;break;case 79:case 111:P=8,V=55;break;default:return+ve}for(K=ve.slice(2),ne=K.length,pe=0;pe<ne;pe++)if(Ce=K.charCodeAt(pe),Ce<48||Ce>V)return NaN;return parseInt(K,P)}}return+ve};if(m(ce,!Q(" 0o1")||!Q("0b1")||Q("+0x1"))){for(var Ae=function(ve){var ae=arguments.length<1?0:ve,R=this;return R instanceof Ae&&(te?_(function(){q.valueOf.call(R)}):S(R)!=ce)?C(new Q(X(ae)),R,Ae):X(ae)},W=p?I(Q):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),se=0,Z;W.length>se;se++)w(Q,Z=W[se])&&!w(Ae,Z)&&ee(Ae,Z,H(Q,Z));Ae.prototype=q,q.constructor=Ae,j(x,ce,Ae)}}),"./node_modules/core-js/modules/es.object.assign.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/export.js"),x=u("./node_modules/core-js/internals/object-assign.js");p({target:"Object",stat:!0,forced:Object.assign!==x},{assign:x})}),"./node_modules/core-js/modules/es.object.keys.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/export.js"),x=u("./node_modules/core-js/internals/to-object.js"),m=u("./node_modules/core-js/internals/object-keys.js"),j=u("./node_modules/core-js/internals/fails.js"),w=j(function(){m(1)});p({target:"Object",stat:!0,forced:w},{keys:function(C){return m(x(C))}})}),"./node_modules/core-js/modules/es.object.to-string.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/to-string-tag-support.js"),x=u("./node_modules/core-js/internals/redefine.js"),m=u("./node_modules/core-js/internals/object-to-string.js");p||x(Object.prototype,"toString",m,{unsafe:!0})}),"./node_modules/core-js/modules/es.regexp.to-string.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/redefine.js"),x=u("./node_modules/core-js/internals/an-object.js"),m=u("./node_modules/core-js/internals/to-string.js"),j=u("./node_modules/core-js/internals/fails.js"),w=u("./node_modules/core-js/internals/regexp-flags.js"),S="toString",C=RegExp.prototype,F=C[S],U=j(function(){return F.call({source:"a",flags:"b"})!="/a/b"}),_=F.name!=S;(U||_)&&p(RegExp.prototype,S,function(){var I=x(this),H=m(I.source),ee=I.flags,$=m(ee===void 0&&I instanceof RegExp&&!("flags"in C)?w.call(I):ee);return"/"+H+"/"+$},{unsafe:!0})}),"./node_modules/core-js/modules/es.string.iterator.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/string-multibyte.js").charAt,x=u("./node_modules/core-js/internals/to-string.js"),m=u("./node_modules/core-js/internals/internal-state.js"),j=u("./node_modules/core-js/internals/define-iterator.js"),w="String Iterator",S=m.set,C=m.getterFor(w);j(String,"String",function(F){S(this,{type:w,string:x(F),index:0})},function(){var U=C(this),_=U.string,z=U.index,I;return z>=_.length?{value:void 0,done:!0}:(I=p(_,z),U.index+=I.length,{value:I,done:!1})})}),"./node_modules/core-js/modules/es.string.link.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/export.js"),x=u("./node_modules/core-js/internals/create-html.js"),m=u("./node_modules/core-js/internals/string-html-forced.js");p({target:"String",proto:!0,forced:m("link")},{link:function(w){return x(this,"a","href",w)}})}),"./node_modules/core-js/modules/es.symbol.description.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/export.js"),x=u("./node_modules/core-js/internals/descriptors.js"),m=u("./node_modules/core-js/internals/global.js"),j=u("./node_modules/core-js/internals/has.js"),w=u("./node_modules/core-js/internals/is-object.js"),S=u("./node_modules/core-js/internals/object-define-property.js").f,C=u("./node_modules/core-js/internals/copy-constructor-properties.js"),F=m.Symbol;if(x&&typeof F=="function"&&(!("description"in F.prototype)||F().description!==void 0)){var U={},_=function(){var ce=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),Q=this instanceof _?new F(ce):ce===void 0?F():F(ce);return ce===""&&(U[Q]=!0),Q};C(_,F);var z=_.prototype=F.prototype;z.constructor=_;var I=z.toString,H=String(F("test"))=="Symbol(test)",ee=/^Symbol\((.*)\)[^)]+$/;S(z,"description",{configurable:!0,get:function(){var ce=w(this)?this.valueOf():this,Q=I.call(ce);if(j(U,ce))return"";var q=H?Q.slice(7,-1):Q.replace(ee,"$1");return q===""?void 0:q}}),p({global:!0,forced:!0},{Symbol:_})}}),"./node_modules/core-js/modules/es.symbol.iterator.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/define-well-known-symbol.js");p("iterator")}),"./node_modules/core-js/modules/es.symbol.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/export.js"),x=u("./node_modules/core-js/internals/global.js"),m=u("./node_modules/core-js/internals/get-built-in.js"),j=u("./node_modules/core-js/internals/is-pure.js"),w=u("./node_modules/core-js/internals/descriptors.js"),S=u("./node_modules/core-js/internals/native-symbol.js"),C=u("./node_modules/core-js/internals/fails.js"),F=u("./node_modules/core-js/internals/has.js"),U=u("./node_modules/core-js/internals/is-array.js"),_=u("./node_modules/core-js/internals/is-object.js"),z=u("./node_modules/core-js/internals/is-symbol.js"),I=u("./node_modules/core-js/internals/an-object.js"),H=u("./node_modules/core-js/internals/to-object.js"),ee=u("./node_modules/core-js/internals/to-indexed-object.js"),$=u("./node_modules/core-js/internals/to-property-key.js"),ce=u("./node_modules/core-js/internals/to-string.js"),Q=u("./node_modules/core-js/internals/create-property-descriptor.js"),q=u("./node_modules/core-js/internals/object-create.js"),te=u("./node_modules/core-js/internals/object-keys.js"),X=u("./node_modules/core-js/internals/object-get-own-property-names.js"),Ae=u("./node_modules/core-js/internals/object-get-own-property-names-external.js"),W=u("./node_modules/core-js/internals/object-get-own-property-symbols.js"),se=u("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),Z=u("./node_modules/core-js/internals/object-define-property.js"),re=u("./node_modules/core-js/internals/object-property-is-enumerable.js"),ve=u("./node_modules/core-js/internals/create-non-enumerable-property.js"),ae=u("./node_modules/core-js/internals/redefine.js"),R=u("./node_modules/core-js/internals/shared.js"),P=u("./node_modules/core-js/internals/shared-key.js"),V=u("./node_modules/core-js/internals/hidden-keys.js"),K=u("./node_modules/core-js/internals/uid.js"),ne=u("./node_modules/core-js/internals/well-known-symbol.js"),pe=u("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),Ce=u("./node_modules/core-js/internals/define-well-known-symbol.js"),Ue=u("./node_modules/core-js/internals/set-to-string-tag.js"),Ne=u("./node_modules/core-js/internals/internal-state.js"),Ie=u("./node_modules/core-js/internals/array-iteration.js").forEach,Pe=P("hidden"),ze="Symbol",gt="prototype",ie=ne("toPrimitive"),Be=Ne.set,tt=Ne.getterFor(ze),Xe=Object[gt],et=x.Symbol,Tt=m("JSON","stringify"),Nt=se.f,Mt=Z.f,Qt=Ae.f,pt=re.f,rt=R("symbols"),Ut=R("op-symbols"),rs=R("string-to-symbol-registry"),Ot=R("symbol-to-string-registry"),Dt=R("wks"),Oe=x.QObject,Ge=!Oe||!Oe[gt]||!Oe[gt].findChild,ft=w&&C(function(){return q(Mt({},"a",{get:function(){return Mt(this,"a",{value:7}).a}})).a!=7})?function(wt,st,Ct){var as=Nt(Xe,st);as&&delete Xe[st],Mt(wt,st,Ct),as&&wt!==Xe&&Mt(Xe,st,as)}:Mt,ht=function(wt,st){var Ct=rt[wt]=q(et[gt]);return Be(Ct,{type:ze,tag:wt,description:st}),w||(Ct.description=st),Ct},vt=function(st,Ct,as){st===Xe&&vt(Ut,Ct,as),I(st);var ps=$(Ct);return I(as),F(rt,ps)?(as.enumerable?(F(st,Pe)&&st[Pe][ps]&&(st[Pe][ps]=!1),as=q(as,{enumerable:Q(0,!1)})):(F(st,Pe)||Mt(st,Pe,Q(1,{})),st[Pe][ps]=!0),ft(st,ps,as)):Mt(st,ps,as)},kt=function(st,Ct){I(st);var as=ee(Ct),ps=te(as).concat(We(as));return Ie(ps,function(ct){(!w||zt.call(as,ct))&&vt(st,ct,as[ct])}),st},Vt=function(st,Ct){return Ct===void 0?q(st):kt(q(st),Ct)},zt=function(st){var Ct=$(st),as=pt.call(this,Ct);return this===Xe&&F(rt,Ct)&&!F(Ut,Ct)?!1:as||!F(this,Ct)||!F(rt,Ct)||F(this,Pe)&&this[Pe][Ct]?as:!0},Bs=function(st,Ct){var as=ee(st),ps=$(Ct);if(!(as===Xe&&F(rt,ps)&&!F(Ut,ps))){var ct=Nt(as,ps);return ct&&F(rt,ps)&&!(F(as,Pe)&&as[Pe][ps])&&(ct.enumerable=!0),ct}},Re=function(st){var Ct=Qt(ee(st)),as=[];return Ie(Ct,function(ps){!F(rt,ps)&&!F(V,ps)&&as.push(ps)}),as},We=function(st){var Ct=st===Xe,as=Qt(Ct?Ut:ee(st)),ps=[];return Ie(as,function(ct){F(rt,ct)&&(!Ct||F(Xe,ct))&&ps.push(rt[ct])}),ps};if(S||(et=function(){if(this instanceof et)throw TypeError("Symbol is not a constructor");var st=!arguments.length||arguments[0]===void 0?void 0:ce(arguments[0]),Ct=K(st),as=function(ps){this===Xe&&as.call(Ut,ps),F(this,Pe)&&F(this[Pe],Ct)&&(this[Pe][Ct]=!1),ft(this,Ct,Q(1,ps))};return w&&Ge&&ft(Xe,Ct,{configurable:!0,set:as}),ht(Ct,st)},ae(et[gt],"toString",function(){return tt(this).tag}),ae(et,"withoutSetter",function(wt){return ht(K(wt),wt)}),re.f=zt,Z.f=vt,se.f=Bs,X.f=Ae.f=Re,W.f=We,pe.f=function(wt){return ht(ne(wt),wt)},w&&(Mt(et[gt],"description",{configurable:!0,get:function(){return tt(this).description}}),j||ae(Xe,"propertyIsEnumerable",zt,{unsafe:!0}))),p({global:!0,wrap:!0,forced:!S,sham:!S},{Symbol:et}),Ie(te(Dt),function(wt){Ce(wt)}),p({target:ze,stat:!0,forced:!S},{for:function(wt){var st=ce(wt);if(F(rs,st))return rs[st];var Ct=et(st);return rs[st]=Ct,Ot[Ct]=st,Ct},keyFor:function(st){if(!z(st))throw TypeError(st+" is not a symbol");if(F(Ot,st))return Ot[st]},useSetter:function(){Ge=!0},useSimple:function(){Ge=!1}}),p({target:"Object",stat:!0,forced:!S,sham:!w},{create:Vt,defineProperty:vt,defineProperties:kt,getOwnPropertyDescriptor:Bs}),p({target:"Object",stat:!0,forced:!S},{getOwnPropertyNames:Re,getOwnPropertySymbols:We}),p({target:"Object",stat:!0,forced:C(function(){W.f(1)})},{getOwnPropertySymbols:function(st){return W.f(H(st))}}),Tt){var $t=!S||C(function(){var wt=et();return Tt([wt])!="[null]"||Tt({a:wt})!="{}"||Tt(Object(wt))!="{}"});p({target:"JSON",stat:!0,forced:$t},{stringify:function(st,Ct,as){for(var ps=[st],ct=1,jt;arguments.length>ct;)ps.push(arguments[ct++]);if(jt=Ct,!(!_(Ct)&&st===void 0||z(st)))return U(Ct)||(Ct=function(Et,hs){if(typeof jt=="function"&&(hs=jt.call(this,Et,hs)),!z(hs))return hs}),ps[1]=Ct,Tt.apply(null,ps)}})}et[gt][ie]||ve(et[gt],ie,et[gt].valueOf),Ue(et,ze),V[Pe]=!0}),"./node_modules/core-js/modules/web.dom-collections.for-each.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/global.js"),x=u("./node_modules/core-js/internals/dom-iterables.js"),m=u("./node_modules/core-js/internals/array-for-each.js"),j=u("./node_modules/core-js/internals/create-non-enumerable-property.js");for(var w in x){var S=p[w],C=S&&S.prototype;if(C&&C.forEach!==m)try{j(C,"forEach",m)}catch{C.forEach=m}}}),"./node_modules/core-js/modules/web.dom-collections.iterator.js":(function(d,f,u){var p=u("./node_modules/core-js/internals/global.js"),x=u("./node_modules/core-js/internals/dom-iterables.js"),m=u("./node_modules/core-js/modules/es.array.iterator.js"),j=u("./node_modules/core-js/internals/create-non-enumerable-property.js"),w=u("./node_modules/core-js/internals/well-known-symbol.js"),S=w("iterator"),C=w("toStringTag"),F=m.values;for(var U in x){var _=p[U],z=_&&_.prototype;if(z){if(z[S]!==F)try{j(z,S,F)}catch{z[S]=F}if(z[C]||j(z,C,U),x[U]){for(var I in m)if(z[I]!==m[I])try{j(z,I,m[I])}catch{z[I]=m[I]}}}}}),"./node_modules/es6-promise/dist/es6-promise.js":(function(d){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(f,u){d.exports=u()})(this,(function(){function f(Oe){var Ge=typeof Oe;return Oe!==null&&(Ge==="object"||Ge==="function")}function u(Oe){return typeof Oe=="function"}var p=void 0;Array.isArray?p=Array.isArray:p=function(Oe){return Object.prototype.toString.call(Oe)==="[object Array]"};var x=p,m=0,j=void 0,w=void 0,S=function(Ge,ft){te[m]=Ge,te[m+1]=ft,m+=2,m===2&&(w?w(X):W())};function C(Oe){w=Oe}function F(Oe){S=Oe}var U=typeof window<"u"?window:void 0,_=U||{},z=_.MutationObserver||_.WebKitMutationObserver,I=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",H=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function ee(){return function(){return process.nextTick(X)}}function $(){return typeof j<"u"?function(){j(X)}:q()}function ce(){var Oe=0,Ge=new z(X),ft=document.createTextNode("");return Ge.observe(ft,{characterData:!0}),function(){ft.data=Oe=++Oe%2}}function Q(){var Oe=new MessageChannel;return Oe.port1.onmessage=X,function(){return Oe.port2.postMessage(0)}}function q(){var Oe=setTimeout;return function(){return Oe(X,1)}}var te=new Array(1e3);function X(){for(var Oe=0;Oe<m;Oe+=2){var Ge=te[Oe],ft=te[Oe+1];Ge(ft),te[Oe]=void 0,te[Oe+1]=void 0}m=0}function Ae(){try{var Oe=Function("return this")().require("vertx");return j=Oe.runOnLoop||Oe.runOnContext,$()}catch{return q()}}var W=void 0;I?W=ee():z?W=ce():H?W=Q():U===void 0?W=Ae():W=q();function se(Oe,Ge){var ft=this,ht=new this.constructor(ve);ht[re]===void 0&&Tt(ht);var vt=ft._state;if(vt){var kt=arguments[vt-1];S(function(){return Be(vt,ht,kt,ft._result)})}else gt(ft,ht,Oe,Ge);return ht}function Z(Oe){var Ge=this;if(Oe&&typeof Oe=="object"&&Oe.constructor===Ge)return Oe;var ft=new Ge(ve);return Ne(ft,Oe),ft}var re=Math.random().toString(36).substring(2);function ve(){}var ae=void 0,R=1,P=2;function V(){return new TypeError("You cannot resolve a promise with itself")}function K(){return new TypeError("A promises callback cannot return that same promise.")}function ne(Oe,Ge,ft,ht){try{Oe.call(Ge,ft,ht)}catch(vt){return vt}}function pe(Oe,Ge,ft){S(function(ht){var vt=!1,kt=ne(ft,Ge,function(Vt){vt||(vt=!0,Ge!==Vt?Ne(ht,Vt):Pe(ht,Vt))},function(Vt){vt||(vt=!0,ze(ht,Vt))},"Settle: "+(ht._label||" unknown promise"));!vt&&kt&&(vt=!0,ze(ht,kt))},Oe)}function Ce(Oe,Ge){Ge._state===R?Pe(Oe,Ge._result):Ge._state===P?ze(Oe,Ge._result):gt(Ge,void 0,function(ft){return Ne(Oe,ft)},function(ft){return ze(Oe,ft)})}function Ue(Oe,Ge,ft){Ge.constructor===Oe.constructor&&ft===se&&Ge.constructor.resolve===Z?Ce(Oe,Ge):ft===void 0?Pe(Oe,Ge):u(ft)?pe(Oe,Ge,ft):Pe(Oe,Ge)}function Ne(Oe,Ge){if(Oe===Ge)ze(Oe,V());else if(f(Ge)){var ft=void 0;try{ft=Ge.then}catch(ht){ze(Oe,ht);return}Ue(Oe,Ge,ft)}else Pe(Oe,Ge)}function Ie(Oe){Oe._onerror&&Oe._onerror(Oe._result),ie(Oe)}function Pe(Oe,Ge){Oe._state===ae&&(Oe._result=Ge,Oe._state=R,Oe._subscribers.length!==0&&S(ie,Oe))}function ze(Oe,Ge){Oe._state===ae&&(Oe._state=P,Oe._result=Ge,S(Ie,Oe))}function gt(Oe,Ge,ft,ht){var vt=Oe._subscribers,kt=vt.length;Oe._onerror=null,vt[kt]=Ge,vt[kt+R]=ft,vt[kt+P]=ht,kt===0&&Oe._state&&S(ie,Oe)}function ie(Oe){var Ge=Oe._subscribers,ft=Oe._state;if(Ge.length!==0){for(var ht=void 0,vt=void 0,kt=Oe._result,Vt=0;Vt<Ge.length;Vt+=3)ht=Ge[Vt],vt=Ge[Vt+ft],ht?Be(ft,ht,vt,kt):vt(kt);Oe._subscribers.length=0}}function Be(Oe,Ge,ft,ht){var vt=u(ft),kt=void 0,Vt=void 0,zt=!0;if(vt){try{kt=ft(ht)}catch(Bs){zt=!1,Vt=Bs}if(Ge===kt){ze(Ge,K());return}}else kt=ht;Ge._state!==ae||(vt&&zt?Ne(Ge,kt):zt===!1?ze(Ge,Vt):Oe===R?Pe(Ge,kt):Oe===P&&ze(Ge,kt))}function tt(Oe,Ge){try{Ge(function(ht){Ne(Oe,ht)},function(ht){ze(Oe,ht)})}catch(ft){ze(Oe,ft)}}var Xe=0;function et(){return Xe++}function Tt(Oe){Oe[re]=Xe++,Oe._state=void 0,Oe._result=void 0,Oe._subscribers=[]}function Nt(){return new Error("Array Methods must be provided an Array")}var Mt=(function(){function Oe(Ge,ft){this._instanceConstructor=Ge,this.promise=new Ge(ve),this.promise[re]||Tt(this.promise),x(ft)?(this.length=ft.length,this._remaining=ft.length,this._result=new Array(this.length),this.length===0?Pe(this.promise,this._result):(this.length=this.length||0,this._enumerate(ft),this._remaining===0&&Pe(this.promise,this._result))):ze(this.promise,Nt())}return Oe.prototype._enumerate=function(ft){for(var ht=0;this._state===ae&&ht<ft.length;ht++)this._eachEntry(ft[ht],ht)},Oe.prototype._eachEntry=function(ft,ht){var vt=this._instanceConstructor,kt=vt.resolve;if(kt===Z){var Vt=void 0,zt=void 0,Bs=!1;try{Vt=ft.then}catch(We){Bs=!0,zt=We}if(Vt===se&&ft._state!==ae)this._settledAt(ft._state,ht,ft._result);else if(typeof Vt!="function")this._remaining--,this._result[ht]=ft;else if(vt===Ot){var Re=new vt(ve);Bs?ze(Re,zt):Ue(Re,ft,Vt),this._willSettleAt(Re,ht)}else this._willSettleAt(new vt(function(We){return We(ft)}),ht)}else this._willSettleAt(kt(ft),ht)},Oe.prototype._settledAt=function(ft,ht,vt){var kt=this.promise;kt._state===ae&&(this._remaining--,ft===P?ze(kt,vt):this._result[ht]=vt),this._remaining===0&&Pe(kt,this._result)},Oe.prototype._willSettleAt=function(ft,ht){var vt=this;gt(ft,void 0,function(kt){return vt._settledAt(R,ht,kt)},function(kt){return vt._settledAt(P,ht,kt)})},Oe})();function Qt(Oe){return new Mt(this,Oe).promise}function pt(Oe){var Ge=this;return x(Oe)?new Ge(function(ft,ht){for(var vt=Oe.length,kt=0;kt<vt;kt++)Ge.resolve(Oe[kt]).then(ft,ht)}):new Ge(function(ft,ht){return ht(new TypeError("You must pass an array to race."))})}function rt(Oe){var Ge=this,ft=new Ge(ve);return ze(ft,Oe),ft}function Ut(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function rs(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Ot=(function(){function Oe(Ge){this[re]=et(),this._result=this._state=void 0,this._subscribers=[],ve!==Ge&&(typeof Ge!="function"&&Ut(),this instanceof Oe?tt(this,Ge):rs())}return Oe.prototype.catch=function(ft){return this.then(null,ft)},Oe.prototype.finally=function(ft){var ht=this,vt=ht.constructor;return u(ft)?ht.then(function(kt){return vt.resolve(ft()).then(function(){return kt})},function(kt){return vt.resolve(ft()).then(function(){throw kt})}):ht.then(ft,ft)},Oe})();Ot.prototype.then=se,Ot.all=Qt,Ot.race=pt,Ot.resolve=Z,Ot.reject=rt,Ot._setScheduler=C,Ot._setAsap=F,Ot._asap=S;function Dt(){var Oe=void 0;if(typeof $m<"u")Oe=$m;else if(typeof self<"u")Oe=self;else try{Oe=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Ge=Oe.Promise;if(Ge){var ft=null;try{ft=Object.prototype.toString.call(Ge.resolve())}catch{}if(ft==="[object Promise]"&&!Ge.cast)return}Oe.Promise=Ot}return Ot.polyfill=Dt,Ot.Promise=Ot,Ot}))}),html2canvas:(function(d){d.exports=n}),jspdf:(function(d){d.exports=s})},i={};function c(d){var f=i[d];if(f!==void 0)return f.exports;var u=i[d]={exports:{}};return a[d].call(u.exports,u,u.exports,c),u.exports}(function(){c.n=function(d){var f=d&&d.__esModule?function(){return d.default}:function(){return d};return c.d(f,{a:f}),f}})(),(function(){c.d=function(d,f){for(var u in f)c.o(f,u)&&!c.o(d,u)&&Object.defineProperty(d,u,{enumerable:!0,get:f[u]})}})(),(function(){c.o=function(d,f){return Object.prototype.hasOwnProperty.call(d,f)}})(),(function(){c.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})}})();var A={};return(function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/c.r(A);var d=c("./src/worker.js");c("./src/plugin/jspdf-plugin.js"),c("./src/plugin/pagebreaks.js"),c("./src/plugin/hyperlinks.js");var f=function u(p,x){var m=new u.Worker(x);return p?m.from(p).save():m};f.Worker=d.default,A.default=f})(),A=A.default,A})()})})(w1)),w1.exports}var iI=aI();const lI=qx(iI),oI=()=>{const t=za(),e=L.useRef(null),[s]=L.useState(()=>new URLSearchParams(window.location.search).get("order_id")),[n,a]=L.useState(null),[i,c]=L.useState(!0),[A,d]=L.useState(!1),[f,u]=L.useState(null),[p,x]=L.useState(!1),[m,j]=L.useState(null),w=($,ce="success")=>{j({message:$,type:ce}),setTimeout(()=>j(null),3e3)};L.useEffect(()=>{if(!s){u("Order ID not found"),c(!1);return}S(),setTimeout(()=>C(),2e3)},[s]);const S=async()=>{try{const $=await fetch(`${_e}/api/payment/order/${s}`,{credentials:"include"});if($.ok)a(await $.json());else{const ce=await $.json();u(ce.error||"Failed to load order")}}catch{u("Network error occurred")}finally{c(!1)}},C=async()=>{var $;if(s){d(!0);try{const Q=await(await fetch(`${_e}/api/payment/verify-order/${s}`,{method:"POST",credentials:"include"})).json();Q.success&&["paid","active"].includes(($=Q.order)==null?void 0:$.status)&&await S()}catch{console.error("Verification failed")}finally{d(!1)}}},F=()=>{t("/billing")},U=()=>{window.print()},_=()=>{const $=document.getElementById("receipt-container");if(!$)return;x(!0),$.classList.add("download-mode");const ce={margin:.3,filename:`GogoTrip_Receipt_${(n==null?void 0:n.order.orderReference)||"download"}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,scrollY:0},jsPDF:{unit:"in",format:"a4",orientation:"portrait"},pagebreak:{mode:"avoid-all"}};lI().set(ce).from($).save().then(()=>{$.classList.remove("download-mode"),x(!1),w("Receipt downloaded successfully!")}).catch(Q=>{console.error("PDF generation failed:",Q),$.classList.remove("download-mode"),x(!1),w("Failed to download PDF","error")})},z=({status:$})=>{const ce={paid:{icon:r.jsx(zn,{className:"w-5 h-5"}),text:"Payment Successful",bgColor:"bg-emerald-50 dark:bg-emerald-900/20",textColor:"text-emerald-700 dark:text-emerald-400"},active:{icon:r.jsx(zn,{className:"w-5 h-5"}),text:"Payment Successful",bgColor:"bg-emerald-50",textColor:"text-emerald-700"},pending:{icon:r.jsx(on,{className:"w-5 h-5"}),text:"Payment Pending",bgColor:"bg-amber-50 dark:bg-amber-900/20",textColor:"text-amber-700 dark:text-amber-400"},failed:{icon:r.jsx(rc,{className:"w-5 h-5"}),text:"Payment Failed",bgColor:"bg-red-50 dark:bg-red-900/20",textColor:"text-red-700 dark:text-red-400"},cancelled:{icon:r.jsx(rc,{className:"w-5 h-5"}),text:"Payment Cancelled",bgColor:"bg-slate-50 dark:bg-slate-900/20",textColor:"text-slate-700 dark:text-slate-400"}},Q=ce[$]||ce.pending;return r.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full ${Q.bgColor} ${Q.textColor} font-medium`,children:[Q.icon,r.jsx("span",{children:Q.text})]})};if(i)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950",children:r.jsx(Xt,{className:"w-12 h-12 text-blue-600 animate-spin"})});if(f||!n)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950 p-6",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-8 max-w-md w-full border border-slate-200 dark:border-slate-800 text-center",children:[r.jsx(ur,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold mb-2 dark:text-white",children:"Error"}),r.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:f||"Order not found"}),r.jsxs("button",{onClick:F,className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 flex items-center gap-2 mx-auto",children:[r.jsx(jA,{className:"w-5 h-5"})," Back to Billing"]})]})});const{order:I,plan:H,user:ee}=n;return r.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 py-8 px-4 relative animate-fade-in-up",children:[m&&r.jsxs("div",{className:`fixed top-6 left-1/2 -translate-x-1/2 z-[100] flex items-center gap-3 px-5 py-3 rounded-full shadow-2xl animate-fade-in-down transition-all ${m.type==="error"?"bg-red-50 text-red-700 border border-red-200 dark:bg-red-900/80 dark:text-red-100 dark:border-red-800 backdrop-blur-md":m.type==="success"?"bg-emerald-50 text-emerald-700 border border-emerald-200 dark:bg-emerald-900/80 dark:text-emerald-100 dark:border-emerald-800 backdrop-blur-md":"bg-white text-slate-700 border border-slate-200 dark:bg-slate-800/80 dark:text-white dark:border-slate-700 backdrop-blur-md"}`,children:[m.type==="error"?r.jsx(ur,{className:"w-5 h-5"}):m.type==="success"?r.jsx(sa,{className:"w-5 h-5"}):r.jsx(Pa,{className:"w-5 h-5 text-sky-500"}),r.jsx("span",{className:"font-bold text-sm",children:m.message}),r.jsx("button",{onClick:()=>j(null),className:"ml-2 hover:opacity-70 p-1 bg-black/5 rounded-full",children:r.jsx(As,{className:"w-3 h-3"})})]}),A&&r.jsxs("div",{className:"fixed top-4 right-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-xl p-4 shadow-lg z-50 flex items-center gap-3",children:[r.jsx(Xt,{className:"w-5 h-5 text-blue-600 animate-spin"}),r.jsx("p",{className:"text-blue-700 dark:text-blue-400 font-medium",children:"Verifying..."})]}),r.jsxs("div",{className:"max-w-4xl mx-auto mb-6 flex flex-wrap gap-4 print:hidden",children:[r.jsxs("button",{onClick:F,className:"px-4 py-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-50 transition-colors flex items-center gap-2",children:[r.jsx(jA,{className:"w-5 h-5"})," Back to Billing"]}),I.status==="pending"&&r.jsxs("button",{onClick:C,disabled:A,className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[r.jsx(yl,{className:`w-5 h-5 ${A?"animate-spin":""}`})," Refresh Status"]}),r.jsx("div",{className:"flex-1"}),r.jsxs("button",{onClick:U,className:"px-4 py-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-slate-700 dark:text-slate-300 rounded-xl hover:bg-slate-50 transition-colors flex items-center gap-2",children:[r.jsx(PU,{className:"w-5 h-5"})," Print"]}),r.jsxs("button",{onClick:_,disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-70",children:[p?r.jsx(Xt,{className:"w-5 h-5 animate-spin"}):r.jsx(ip,{className:"w-5 h-5"})," Download PDF"]})]}),r.jsxs("div",{id:"receipt-container",ref:e,className:"max-w-4xl mx-auto bg-white dark:bg-slate-900 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-800 overflow-hidden print:shadow-none print:border-slate-400",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-8 header-section",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"GogoTrip"}),r.jsx("p",{className:"text-blue-100",children:"Premium Subscription"})]})}),r.jsx("div",{className:"flex justify-center",children:r.jsx(z,{status:I.status})})]}),r.jsxs("div",{className:"p-8 content-section",children:[r.jsxs("div",{className:"mb-8 info-group",children:[r.jsxs("h2",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[r.jsx(X4,{className:"w-5 h-5"})," Order Information"]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6 grid-section",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-slate-500 mb-1",children:"Customer Name"}),r.jsx("div",{className:"font-medium dark:text-white",children:ee.name})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-slate-500 mb-1",children:"Email"}),r.jsx("div",{className:"font-medium dark:text-white",children:ee.email})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-slate-500 mb-1",children:"Order Reference"}),r.jsx("div",{className:"font-mono text-sm font-medium dark:text-white",children:I.orderReference})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-slate-500 mb-1",children:"Order Date"}),r.jsx("div",{className:"font-medium dark:text-white",children:new Date(I.createdAt).toLocaleDateString("en-MY",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),r.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-800 pt-8 mb-8 info-group",children:[r.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Subscription Details"}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-6 sub-card",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-white mb-1",children:H.name}),r.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:H.description})]}),r.jsx("div",{className:"text-right",children:r.jsxs("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["RM ",I.amount.toFixed(2)]})})]}),I.status==="active"&&I.startDate&&r.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-4",children:r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-slate-500 mb-1",children:"Valid From"}),r.jsx("div",{className:"font-medium dark:text-white",children:new Date(I.startDate).toLocaleDateString("en-MY",{year:"numeric",month:"long",day:"numeric"})})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-slate-500 mb-1",children:"Valid Until"}),r.jsx("div",{className:"font-medium dark:text-white",children:I.endDate?new Date(I.endDate).toLocaleDateString("en-MY",{year:"numeric",month:"long",day:"numeric"}):r.jsx("span",{className:"text-amber-600 font-bold",children:"Lifetime"})})]})]})})]})]}),r.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-800 pt-8 info-group",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Subtotal"}),r.jsxs("span",{className:"font-medium dark:text-white",children:["RM ",I.amount.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tax (0%)"}),r.jsx("span",{className:"font-medium dark:text-white",children:"RM 0.00"})]}),r.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-800 pt-4 flex justify-between items-center",children:[r.jsx("span",{className:"text-xl font-bold dark:text-white",children:"Total"}),r.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["RM ",I.amount.toFixed(2)]})]})]}),r.jsxs("div",{className:"mt-12 pt-8 border-t border-slate-200 dark:border-slate-800 text-center footer-section",children:[r.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Thank you for choosing GogoTrip Premium!"}),r.jsx("p",{className:"text-xs text-slate-400",children:"For questions or support, please contact us at support@gogotrip.com"})]})]})]}),r.jsx("style",{children:`
        /* DOWNLOAD MODE */
        .download-mode .header-section { padding: 1.5rem !important; }
        .download-mode .content-section { padding: 1.5rem !important; }
        .download-mode .info-group { margin-bottom: 1rem !important; padding-top: 1rem !important; }
        .download-mode .sub-card { padding: 1rem !important; }
        .download-mode .grid-section { gap: 0.5rem !important; }
        .download-mode h1 { font-size: 1.5rem !important; margin-bottom: 0.25rem !important; }
        .download-mode h2 { font-size: 1.1rem !important; margin-bottom: 0.5rem !important; }
        .download-mode .text-3xl { font-size: 1.5rem !important; }
        .download-mode .text-2xl { font-size: 1.25rem !important; }
        .download-mode .text-xl { font-size: 1.125rem !important; }
        .download-mode .text-lg { font-size: 1rem !important; }
        .download-mode .text-base { font-size: 0.875rem !important; }
        .download-mode .footer-section { margin-top: 1.5rem !important; padding-top: 1rem !important; }

        /* PRINT MODE */
        @media print {
          body { 
            -webkit-print-color-adjust: exact !important; 
            print-color-adjust: exact !important; 
            background-color: white !important; 
            height: 100vh;
            overflow: hidden;
          }
          
          body * { visibility: hidden; }
          #receipt-container, #receipt-container * { visibility: visible; }
          
          #receipt-container {
            position: absolute !important;
            left: 50% !important;
            top: 20px !important; 
            transform: translateX(-50%) scale(0.85) !important;
            transform-origin: top center !important;
            
            width: 800px !important;
            max-width: 100% !important;
            
            margin: 0 !important;
            padding: 0 !important;
            border: 1px solid #e2e8f0 !important;
            box-shadow: none !important;
          }

          #receipt-container .header-section { padding: 1.5rem !important; }
          #receipt-container .content-section { padding: 1.5rem !important; }
          #receipt-container .info-group { margin-bottom: 0.5rem !important; padding-top: 0.5rem !important; }
          #receipt-container .sub-card { padding: 0.8rem !important; }
          #receipt-container h1 { font-size: 1.8rem !important; margin-bottom: 5px !important; }
          #receipt-container h2 { font-size: 1.2rem !important; margin-bottom: 5px !important; }
          
          @page { size: auto; margin: 0mm; } 
        }
      `})]})},ck=({category:t="announcement"})=>{const e={announcement:{icon:r.jsx(vA,{className:"w-3 h-3"}),color:"blue",label:"Announcement"},promotion:{icon:r.jsx(Qh,{className:"w-3 h-3"}),color:"purple",label:"Promotion"},update:{icon:r.jsx(Qn,{className:"w-3 h-3"}),color:"green",label:"Update"},alert:{icon:r.jsx(ga,{className:"w-3 h-3"}),color:"red",label:"Alert"}},{icon:s,color:n,label:a}=e[t]||e.announcement,i={blue:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",purple:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400",green:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",red:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"};return r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium ${i[n]}`,children:[s,a]})},cI=({audience:t="all"})=>{const e={all:{icon:r.jsx(Gl,{className:"w-3 h-3"}),label:"All Users"},premium:{icon:r.jsx(wo,{className:"w-3 h-3"}),label:"Premium"},free:{icon:r.jsx(Gl,{className:"w-3 h-3"}),label:"Free Users"},new_users:{icon:r.jsx(Qn,{className:"w-3 h-3"}),label:"New Users"}},{icon:s,label:n}=e[t]||e.all;return r.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800",children:[s,n]})},AI=({content:t})=>{const e=(s,n)=>{if(s.startsWith("### "))return r.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mt-6 mb-2",children:s.slice(4)},n);if(s.startsWith("## "))return r.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mt-8 mb-3",children:s.slice(3)},n);if(s.startsWith("# "))return r.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white mt-8 mb-4",children:s.slice(2)},n);if(s.startsWith("- ")||s.startsWith("* "))return r.jsx("li",{className:"ml-4 text-slate-700 dark:text-slate-300 mb-1 list-disc",children:s.slice(2)},n);if(s.trim()==="")return r.jsx("div",{className:"h-4"},n);let a=s.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/__(.*?)__/g,"<strong>$1</strong>").replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-blue-600 dark:text-blue-400 hover:underline" target="_blank" rel="noopener noreferrer">$1</a>');return r.jsx("p",{className:"text-slate-700 dark:text-slate-300 mb-3 leading-relaxed",dangerouslySetInnerHTML:{__html:a}},n)};return r.jsx("div",{className:"prose-custom",children:t.split(`
`).map((s,n)=>e(s,n))})},dI=()=>{const t=za(),[e,s]=L.useState([]),[n,a]=L.useState(!0),[i,c]=L.useState(null);L.useEffect(()=>{A()},[]);const A=async()=>{try{const d=await fetch(`${_e}/api/announcements`,{credentials:"include"});if(!d.ok)throw new Error("Failed to fetch announcements");const f=await d.json();s(f.announcements||[])}catch{c("Unable to load announcements")}finally{a(!1)}};return n?r.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:r.jsx(Xt,{className:"w-8 h-8 animate-spin text-sky-600"})}):r.jsxs("div",{className:"p-6 md:p-8 max-w-4xl mx-auto space-y-6 animate-fade-in-up",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("button",{onClick:()=>t(-1),className:"md:hidden",children:r.jsx(jA,{className:"w-5 h-5 text-slate-500"})}),r.jsxs("h1",{className:"text-2xl md:text-3xl font-bold flex items-center gap-3",children:[r.jsx(vA,{className:"w-6 h-6 md:w-8 md:h-8 text-sky-600"}),"Announcements"]})]}),i?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-red-500 gap-2",children:[r.jsx(ur,{className:"w-8 h-8"}),r.jsx("p",{children:i})]}):e.length===0?r.jsxs("div",{className:"text-center py-16 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800",children:[r.jsx(sc,{className:"w-16 h-16 text-slate-200 dark:text-slate-700 mx-auto mb-4"}),r.jsx("p",{className:"text-slate-500",children:"No announcements available at the moment."})]}):r.jsx("div",{className:"space-y-4",children:e.map(d=>r.jsx("div",{onClick:()=>t(`/announcements/${d.id}`),className:"bg-white dark:bg-slate-900 rounded-2xl p-5 border border-slate-200 dark:border-slate-800 hover:shadow-lg hover:border-sky-300 dark:hover:border-sky-700 hover:-translate-y-0.5 transition-all cursor-pointer group",children:r.jsxs("div",{className:"flex gap-4",children:[d.coverImage?r.jsx("img",{src:d.coverImage,alt:"",className:"w-24 h-24 rounded-xl object-cover shrink-0"}):r.jsx("div",{className:"w-24 h-24 rounded-xl bg-gradient-to-br from-sky-100 to-sky-50 dark:from-sky-900/30 dark:to-slate-800 flex items-center justify-center shrink-0",children:r.jsx(vA,{className:"w-8 h-8 text-sky-500"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:r.jsx(ck,{category:d.category})}),r.jsx("h3",{className:"font-semibold text-lg text-slate-900 dark:text-white group-hover:text-sky-600 dark:group-hover:text-sky-400 transition-colors truncate",children:d.title}),d.subtitle&&r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate mt-1",children:d.subtitle}),r.jsxs("div",{className:"flex items-center gap-3 mt-3 text-xs text-slate-400",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Mn,{className:"w-3 h-3"}),new Date(d.createdAt).toLocaleDateString()]}),d.views!==void 0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(yn,{className:"w-3 h-3"}),d.views," views"]})]})]}),r.jsx(ai,{className:"w-5 h-5 text-slate-300 dark:text-slate-600 group-hover:text-sky-500 group-hover:translate-x-1 transition-all self-center"})]})},d.id))})]})},uI=()=>{var x;const{id:t}=Jx(),e=za(),[s,n]=L.useState(null),[a,i]=L.useState(!0),[c,A]=L.useState(null);L.useEffect(()=>{d()},[t]);const d=async()=>{try{const m=await fetch(`${_e}/api/announcements/${t}`,{credentials:"include"});if(!m.ok)throw new Error("Not found");const j=await m.json();n(j.announcement)}catch{A("Announcement not found or has expired.")}finally{i(!1)}},f=async()=>{if(!s)return;const m=window.location.href;if(navigator.share)try{await navigator.share({title:s.title,url:m})}catch{}else await navigator.clipboard.writeText(m),alert("Link copied to clipboard!")},u=()=>{s!=null&&s.ctaLink&&(s.ctaLink.startsWith("http")?window.open(s.ctaLink,"_blank"):e(s.ctaLink))};if(a)return r.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:r.jsx(Xt,{className:"w-8 h-8 animate-spin text-sky-600"})});if(c||!s)return r.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] gap-4",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center",children:r.jsx(sc,{className:"w-8 h-8 text-slate-400"})}),r.jsx("p",{className:"text-slate-500",children:c||"Announcement not found"}),r.jsx("button",{onClick:()=>e("/announcements"),className:"text-sky-600 font-medium hover:underline",children:"Back to list"})]});const p=()=>{switch(s.ctaStyle){case"secondary":return"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200";case"danger":return"bg-red-500 text-white hover:bg-red-600";default:return"bg-gradient-to-r from-sky-500 to-sky-600 text-white hover:from-sky-600 hover:to-sky-700"}};return r.jsxs("div",{className:"p-6 md:p-8 max-w-4xl mx-auto space-y-6 animate-fade-in-up",children:[r.jsxs("button",{onClick:()=>e("/announcements"),className:"flex items-center gap-2 text-slate-500 dark:text-slate-400 hover:text-sky-600 dark:hover:text-white transition-colors",children:[r.jsx(jA,{className:"w-4 h-4"}),"Back to announcements"]}),r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden",children:[(s.bannerImage||s.coverImage)&&r.jsx("div",{className:"h-48 md:h-64 overflow-hidden",children:r.jsx("img",{src:s.bannerImage||s.coverImage,alt:s.title,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"p-6 md:p-8",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[r.jsx(ck,{category:s.category}),r.jsx(cI,{audience:s.targetAudience}),s.priority===2&&r.jsx("span",{className:"px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-xs font-medium rounded",children:" Urgent"})]}),r.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white mb-2",children:s.title}),s.subtitle&&r.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 mb-4",children:s.subtitle}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-500 dark:text-slate-400",children:[r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx(Mn,{className:"w-4 h-4"}),new Date(s.createdAt).toLocaleDateString()]}),s.views!==void 0&&r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx(yn,{className:"w-4 h-4"}),s.views.toLocaleString()," views"]}),s.endAt&&r.jsxs("span",{className:"flex items-center gap-1.5 text-orange-500",children:[r.jsx(on,{className:"w-4 h-4"}),"Expires: ",new Date(s.endAt).toLocaleDateString()]})]})]})]}),r.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-800 p-6 md:p-8",children:s.contentType==="html"?r.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:s.content}}):s.contentType==="markdown"?r.jsx(AI,{content:s.content}):r.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300 leading-relaxed",children:s.content})}),(s.ctaText||s.ctaLink)&&r.jsx("div",{className:"bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-800/50 dark:to-slate-900/50 rounded-3xl p-6 md:p-8 border border-slate-200 dark:border-slate-800",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Ready to take action?"}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:s.category==="promotion"?"Don't miss this opportunity!":"Click the button to proceed"})]}),r.jsxs("button",{onClick:u,className:`px-8 py-4 rounded-2xl font-semibold transition-all flex items-center gap-2 shadow-lg hover:shadow-xl hover:-translate-y-0.5 ${p()}`,children:[s.ctaText||"Learn More",(x=s.ctaLink)!=null&&x.startsWith("http")?r.jsx(Cp,{className:"w-4 h-4"}):r.jsx(ai,{className:"w-4 h-4"})]})]})}),r.jsx("div",{className:"flex items-center justify-center pb-8",children:r.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-6 py-3 text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-white hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-colors",children:[r.jsx(Yg,{className:"w-4 h-4"})," Share this announcement"]})})]})},hI=({blog:t,onClick:e})=>r.jsxs("div",{onClick:e,className:"group cursor-pointer bg-white dark:bg-slate-800 rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 border border-slate-100 dark:border-slate-700",children:[r.jsxs("div",{className:"relative h-48 overflow-hidden",children:[t.coverImage?r.jsx("img",{src:t.coverImage,alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}):r.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500"}),r.jsx("div",{className:"absolute top-4 left-4",children:r.jsx("span",{className:"px-3 py-1 bg-black/50 backdrop-blur-md text-white text-xs font-bold rounded-full uppercase tracking-wider",children:t.category})})]}),r.jsxs("div",{className:"p-5",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden flex items-center justify-center",children:t.authorAvatar?r.jsx("img",{src:t.authorAvatar,alt:t.authorName,className:"w-full h-full object-cover"}):r.jsx(ta,{className:"w-4 h-4 text-slate-500"})}),r.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:t.authorName}),r.jsx("span",{className:"text-slate-300 dark:text-slate-600",children:""}),r.jsx("span",{className:"text-xs text-slate-400",children:t.publishedAt?new Date(t.publishedAt).toLocaleDateString():"Draft"})]}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2 line-clamp-2 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:t.title}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm line-clamp-2 mb-4",children:t.excerpt}),r.jsx("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100 dark:border-slate-700",children:r.jsxs("div",{className:"flex items-center gap-4 text-slate-400 text-xs font-medium",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(yn,{className:"w-4 h-4"}),t.views]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(_h,{className:`w-4 h-4 ${t.isLiked?"fill-rose-500 text-rose-500":""}`}),t.likesCount]}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(ic,{className:"w-4 h-4"}),t.commentsCount]})]})})]})]}),Is=({className:t="",variant:e="text",width:s,height:n,animation:a="pulse"})=>{const i={text:"rounded",circular:"rounded-full",rectangular:"rounded-none",rounded:"rounded-xl"},c={pulse:"animate-pulse",wave:"animate-shimmer bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 bg-[length:200%_100%]",none:""},A={};return s&&(A.width=typeof s=="number"?`${s}px`:s),n&&(A.height=typeof n=="number"?`${n}px`:n),r.jsx("div",{className:`
        bg-slate-200 dark:bg-slate-700
        ${i[e]}
        ${c[a]}
        ${t}
      `,style:A})},fI=({className:t=""})=>r.jsxs("div",{className:`max-w-4xl mx-auto p-6 md:p-8 space-y-8 ${t}`,children:[r.jsx(Is,{variant:"rounded",className:"w-24 h-10"}),r.jsx(Is,{variant:"rounded",className:"w-full h-64 md:h-96"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Is,{variant:"rounded",className:"w-20 h-6"}),r.jsx(Is,{variant:"text",className:"w-32 h-4"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Is,{variant:"text",className:"w-full h-10"}),r.jsx(Is,{variant:"text",className:"w-3/4 h-10"})]}),r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl",children:[r.jsx(Is,{variant:"circular",className:"w-14 h-14"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx(Is,{variant:"text",className:"w-32 h-5"}),r.jsx(Is,{variant:"text",className:"w-48 h-4"})]}),r.jsx(Is,{variant:"rounded",className:"w-24 h-10"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Is,{variant:"text",className:"w-full h-5"}),r.jsx(Is,{variant:"text",className:"w-full h-5"}),r.jsx(Is,{variant:"text",className:"w-11/12 h-5"}),r.jsx(Is,{variant:"text",className:"w-full h-5"}),r.jsx(Is,{variant:"text",className:"w-4/5 h-5"}),r.jsx("div",{className:"py-4"}),r.jsx(Is,{variant:"text",className:"w-full h-5"}),r.jsx(Is,{variant:"text",className:"w-full h-5"}),r.jsx(Is,{variant:"text",className:"w-3/4 h-5"}),r.jsx("div",{className:"py-4"}),r.jsx(Is,{variant:"text",className:"w-full h-5"}),r.jsx(Is,{variant:"text",className:"w-5/6 h-5"}),r.jsx(Is,{variant:"text",className:"w-full h-5"}),r.jsx(Is,{variant:"text",className:"w-2/3 h-5"})]}),r.jsxs("div",{className:"flex items-center gap-4 pt-6 border-t border-slate-200 dark:border-slate-700",children:[r.jsx(Is,{variant:"rounded",className:"w-24 h-10"}),r.jsx(Is,{variant:"rounded",className:"w-24 h-10"}),r.jsx(Is,{variant:"rounded",className:"w-24 h-10"})]}),r.jsxs("div",{className:"space-y-6 pt-8",children:[r.jsx(Is,{variant:"text",className:"w-40 h-8"}),r.jsx(Is,{variant:"rounded",className:"w-full h-24"}),[1,2,3].map(e=>r.jsxs("div",{className:"flex gap-4 p-4 bg-slate-50 dark:bg-slate-800/30 rounded-xl",children:[r.jsx(Is,{variant:"circular",className:"w-10 h-10 flex-shrink-0"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Is,{variant:"text",className:"w-24 h-4"}),r.jsx(Is,{variant:"text",className:"w-20 h-3"})]}),r.jsx(Is,{variant:"text",className:"w-full h-4"}),r.jsx(Is,{variant:"text",className:"w-4/5 h-4"})]})]},e))]})]});var V1={exports:{}},$1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dj;function pI(){if(Dj)return $1;Dj=1;var t=Pp();function e(p,x){return p===x&&(p!==0||1/p===1/x)||p!==p&&x!==x}var s=typeof Object.is=="function"?Object.is:e,n=t.useState,a=t.useEffect,i=t.useLayoutEffect,c=t.useDebugValue;function A(p,x){var m=x(),j=n({inst:{value:m,getSnapshot:x}}),w=j[0].inst,S=j[1];return i(function(){w.value=m,w.getSnapshot=x,d(w)&&S({inst:w})},[p,m,x]),a(function(){return d(w)&&S({inst:w}),p(function(){d(w)&&S({inst:w})})},[p]),c(m),m}function d(p){var x=p.getSnapshot;p=p.value;try{var m=x();return!s(p,m)}catch{return!0}}function f(p,x){return x()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:A;return $1.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,$1}var Rj;function Ak(){return Rj||(Rj=1,V1.exports=pI()),V1.exports}var dk=Ak();function bi(t){this.content=t}bi.prototype={constructor:bi,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,s){var n=s&&s!=t?this.remove(s):this,a=n.find(t),i=n.content.slice();return a==-1?i.push(s||t,e):(i[a+1]=e,s&&(i[a]=s)),new bi(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var s=this.content.slice();return s.splice(e,2),new bi(s)},addToStart:function(t,e){return new bi([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var s=this.remove(t).content.slice();return s.push(t,e),new bi(s)},addBefore:function(t,e,s){var n=this.remove(e),a=n.content.slice(),i=n.find(t);return a.splice(i==-1?a.length:i,0,e,s),new bi(a)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=bi.from(t),t.size?new bi(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=bi.from(t),t.size?new bi(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=bi.from(t);for(var s=0;s<t.content.length;s+=2)e=e.remove(t.content[s]);return e},toObject:function(){var t={};return this.forEach(function(e,s){t[e]=s}),t},get size(){return this.content.length>>1}};bi.from=function(t){if(t instanceof bi)return t;var e=[];if(t)for(var s in t)e.push(s,t[s]);return new bi(e)};function uk(t,e,s){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:s;let a=t.child(n),i=e.child(n);if(a==i){s+=a.nodeSize;continue}if(!a.sameMarkup(i))return s;if(a.isText&&a.text!=i.text){for(let c=0;a.text[c]==i.text[c];c++)s++;return s}if(a.content.size||i.content.size){let c=uk(a.content,i.content,s+1);if(c!=null)return c}s+=a.nodeSize}}function hk(t,e,s,n){for(let a=t.childCount,i=e.childCount;;){if(a==0||i==0)return a==i?null:{a:s,b:n};let c=t.child(--a),A=e.child(--i),d=c.nodeSize;if(c==A){s-=d,n-=d;continue}if(!c.sameMarkup(A))return{a:s,b:n};if(c.isText&&c.text!=A.text){let f=0,u=Math.min(c.text.length,A.text.length);for(;f<u&&c.text[c.text.length-f-1]==A.text[A.text.length-f-1];)f++,s--,n--;return{a:s,b:n}}if(c.content.size||A.content.size){let f=hk(c.content,A.content,s-1,n-1);if(f)return f}s-=d,n-=d}}class St{constructor(e,s){if(this.content=e,this.size=s||0,s==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,s,n,a=0,i){for(let c=0,A=0;A<s;c++){let d=this.content[c],f=A+d.nodeSize;if(f>e&&n(d,a+A,i||null,c)!==!1&&d.content.size){let u=A+1;d.nodesBetween(Math.max(0,e-u),Math.min(d.content.size,s-u),n,a+u)}A=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,s,n,a){let i="",c=!0;return this.nodesBetween(e,s,(A,d)=>{let f=A.isText?A.text.slice(Math.max(e,d)-d,s-d):A.isLeaf?a?typeof a=="function"?a(A):a:A.type.spec.leafText?A.type.spec.leafText(A):"":"";A.isBlock&&(A.isLeaf&&f||A.isTextblock)&&n&&(c?c=!1:i+=n),i+=f},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let s=this.lastChild,n=e.firstChild,a=this.content.slice(),i=0;for(s.isText&&s.sameMarkup(n)&&(a[a.length-1]=s.withText(s.text+n.text),i=1);i<e.content.length;i++)a.push(e.content[i]);return new St(a,this.size+e.size)}cut(e,s=this.size){if(e==0&&s==this.size)return this;let n=[],a=0;if(s>e)for(let i=0,c=0;c<s;i++){let A=this.content[i],d=c+A.nodeSize;d>e&&((c<e||d>s)&&(A.isText?A=A.cut(Math.max(0,e-c),Math.min(A.text.length,s-c)):A=A.cut(Math.max(0,e-c-1),Math.min(A.content.size,s-c-1))),n.push(A),a+=A.nodeSize),c=d}return new St(n,a)}cutByIndex(e,s){return e==s?St.empty:e==0&&s==this.content.length?this:new St(this.content.slice(e,s))}replaceChild(e,s){let n=this.content[e];if(n==s)return this;let a=this.content.slice(),i=this.size+s.nodeSize-n.nodeSize;return a[e]=s,new St(a,i)}addToStart(e){return new St([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new St(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let s=0;s<this.content.length;s++)if(!this.content[s].eq(e.content[s]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let s=this.content[e];if(!s)throw new RangeError("Index "+e+" out of range for "+this);return s}maybeChild(e){return this.content[e]||null}forEach(e){for(let s=0,n=0;s<this.content.length;s++){let a=this.content[s];e(a,n,s),n+=a.nodeSize}}findDiffStart(e,s=0){return uk(this,e,s)}findDiffEnd(e,s=this.size,n=e.size){return hk(this,e,s,n)}findIndex(e){if(e==0)return lg(0,e);if(e==this.size)return lg(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let s=0,n=0;;s++){let a=this.child(s),i=n+a.nodeSize;if(i>=e)return i==e?lg(s+1,i):lg(s,n);n=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,s){if(!s)return St.empty;if(!Array.isArray(s))throw new RangeError("Invalid input for Fragment.fromJSON");return new St(s.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return St.empty;let s,n=0;for(let a=0;a<e.length;a++){let i=e[a];n+=i.nodeSize,a&&i.isText&&e[a-1].sameMarkup(i)?(s||(s=e.slice(0,a)),s[s.length-1]=i.withText(s[s.length-1].text+i.text)):s&&s.push(i)}return new St(s||e,n)}static from(e){if(!e)return St.empty;if(e instanceof St)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new St([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}St.empty=new St([],0);const G1={index:0,offset:0};function lg(t,e){return G1.index=t,G1.offset=e,G1}function rx(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let s=Array.isArray(t);if(Array.isArray(e)!=s)return!1;if(s){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!rx(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!rx(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let an=class Jv{constructor(e,s){this.type=e,this.attrs=s}addToSet(e){let s,n=!1;for(let a=0;a<e.length;a++){let i=e[a];if(this.eq(i))return e;if(this.type.excludes(i.type))s||(s=e.slice(0,a));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(s||(s=e.slice(0,a)),s.push(this),n=!0),s&&s.push(i)}}return s||(s=e.slice()),n||s.push(this),s}removeFromSet(e){for(let s=0;s<e.length;s++)if(this.eq(e[s]))return e.slice(0,s).concat(e.slice(s+1));return e}isInSet(e){for(let s=0;s<e.length;s++)if(this.eq(e[s]))return!0;return!1}eq(e){return this==e||this.type==e.type&&rx(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let s in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,s){if(!s)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[s.type];if(!n)throw new RangeError(`There is no mark type ${s.type} in this schema`);let a=n.create(s.attrs);return n.checkAttrs(a.attrs),a}static sameSet(e,s){if(e==s)return!0;if(e.length!=s.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(s[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Jv.none;if(e instanceof Jv)return[e];let s=e.slice();return s.sort((n,a)=>n.type.rank-a.type.rank),s}};an.none=[];class nx extends Error{}class Jt{constructor(e,s,n){this.content=e,this.openStart=s,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,s){let n=pk(this.content,e+this.openStart,s);return n&&new Jt(n,this.openStart,this.openEnd)}removeBetween(e,s){return new Jt(fk(this.content,e+this.openStart,s+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,s){if(!s)return Jt.empty;let n=s.openStart||0,a=s.openEnd||0;if(typeof n!="number"||typeof a!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Jt(St.fromJSON(e,s.content),n,a)}static maxOpen(e,s=!0){let n=0,a=0;for(let i=e.firstChild;i&&!i.isLeaf&&(s||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=e.lastChild;i&&!i.isLeaf&&(s||!i.type.spec.isolating);i=i.lastChild)a++;return new Jt(e,n,a)}}Jt.empty=new Jt(St.empty,0,0);function fk(t,e,s){let{index:n,offset:a}=t.findIndex(e),i=t.maybeChild(n),{index:c,offset:A}=t.findIndex(s);if(a==e||i.isText){if(A!=s&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(s))}if(n!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(n,i.copy(fk(i.content,e-a-1,s-a-1)))}function pk(t,e,s,n){let{index:a,offset:i}=t.findIndex(e),c=t.maybeChild(a);if(i==e||c.isText)return n&&!n.canReplace(a,a,s)?null:t.cut(0,e).append(s).append(t.cut(e));let A=pk(c.content,e-i-1,s,c);return A&&t.replaceChild(a,c.copy(A))}function mI(t,e,s){if(s.openStart>t.depth)throw new nx("Inserted content deeper than insertion position");if(t.depth-s.openStart!=e.depth-s.openEnd)throw new nx("Inconsistent open depths");return mk(t,e,s,0)}function mk(t,e,s,n){let a=t.index(n),i=t.node(n);if(a==e.index(n)&&n<t.depth-s.openStart){let c=mk(t,e,s,n+1);return i.copy(i.content.replaceChild(a,c))}else if(s.content.size)if(!s.openStart&&!s.openEnd&&t.depth==n&&e.depth==n){let c=t.parent,A=c.content;return Uh(c,A.cut(0,t.parentOffset).append(s.content).append(A.cut(e.parentOffset)))}else{let{start:c,end:A}=gI(s,t);return Uh(i,xk(t,c,A,e,n))}else return Uh(i,ax(t,e,n))}function gk(t,e){if(!e.type.compatibleContent(t.type))throw new nx("Cannot join "+e.type.name+" onto "+t.type.name)}function Wv(t,e,s){let n=t.node(s);return gk(n,e.node(s)),n}function Th(t,e){let s=e.length-1;s>=0&&t.isText&&t.sameMarkup(e[s])?e[s]=t.withText(e[s].text+t.text):e.push(t)}function fp(t,e,s,n){let a=(e||t).node(s),i=0,c=e?e.index(s):a.childCount;t&&(i=t.index(s),t.depth>s?i++:t.textOffset&&(Th(t.nodeAfter,n),i++));for(let A=i;A<c;A++)Th(a.child(A),n);e&&e.depth==s&&e.textOffset&&Th(e.nodeBefore,n)}function Uh(t,e){return t.type.checkContent(e),t.copy(e)}function xk(t,e,s,n,a){let i=t.depth>a&&Wv(t,e,a+1),c=n.depth>a&&Wv(s,n,a+1),A=[];return fp(null,t,a,A),i&&c&&e.index(a)==s.index(a)?(gk(i,c),Th(Uh(i,xk(t,e,s,n,a+1)),A)):(i&&Th(Uh(i,ax(t,e,a+1)),A),fp(e,s,a,A),c&&Th(Uh(c,ax(s,n,a+1)),A)),fp(n,null,a,A),new St(A)}function ax(t,e,s){let n=[];if(fp(null,t,s,n),t.depth>s){let a=Wv(t,e,s+1);Th(Uh(a,ax(t,e,s+1)),n)}return fp(e,null,s,n),new St(n)}function gI(t,e){let s=e.depth-t.openStart,a=e.node(s).copy(t.content);for(let i=s-1;i>=0;i--)a=e.node(i).copy(St.from(a));return{start:a.resolveNoCache(t.openStart+s),end:a.resolveNoCache(a.content.size-t.openEnd-s)}}class Fp{constructor(e,s,n){this.pos=e,this.path=s,this.parentOffset=n,this.depth=s.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,s=this.index(this.depth);if(s==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],a=e.child(s);return n?e.child(s).cut(n):a}get nodeBefore(){let e=this.index(this.depth),s=this.pos-this.path[this.path.length-1];return s?this.parent.child(e).cut(0,s):e==0?null:this.parent.child(e-1)}posAtIndex(e,s){s=this.resolveDepth(s);let n=this.path[s*3],a=s==0?0:this.path[s*3-1]+1;for(let i=0;i<e;i++)a+=n.child(i).nodeSize;return a}marks(){let e=this.parent,s=this.index();if(e.content.size==0)return an.none;if(this.textOffset)return e.child(s).marks;let n=e.maybeChild(s-1),a=e.maybeChild(s);if(!n){let A=n;n=a,a=A}let i=n.marks;for(var c=0;c<i.length;c++)i[c].type.spec.inclusive===!1&&(!a||!i[c].isInSet(a.marks))&&(i=i[c--].removeFromSet(i));return i}marksAcross(e){let s=this.parent.maybeChild(this.index());if(!s||!s.isInline)return null;let n=s.marks,a=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)n[i].type.spec.inclusive===!1&&(!a||!n[i].isInSet(a.marks))&&(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let s=this.depth;s>0;s--)if(this.start(s)<=e&&this.end(s)>=e)return s;return 0}blockRange(e=this,s){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!s||s(this.node(n))))return new ix(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let s=1;s<=this.depth;s++)e+=(e?"/":"")+this.node(s).type.name+"_"+this.index(s-1);return e+":"+this.parentOffset}static resolve(e,s){if(!(s>=0&&s<=e.content.size))throw new RangeError("Position "+s+" out of range");let n=[],a=0,i=s;for(let c=e;;){let{index:A,offset:d}=c.content.findIndex(i),f=i-d;if(n.push(c,A,a+d),!f||(c=c.child(A),c.isText))break;i=f-1,a+=d+1}return new Fp(s,n,i)}static resolveCached(e,s){let n=Hj.get(e);if(n)for(let i=0;i<n.elts.length;i++){let c=n.elts[i];if(c.pos==s)return c}else Hj.set(e,n=new xI);let a=n.elts[n.i]=Fp.resolve(e,s);return n.i=(n.i+1)%bI,a}}class xI{constructor(){this.elts=[],this.i=0}}const bI=12,Hj=new WeakMap;class ix{constructor(e,s,n){this.$from=e,this.$to=s,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const vI=Object.create(null);let ju=class Xv{constructor(e,s,n,a=an.none){this.type=e,this.attrs=s,this.marks=a,this.content=n||St.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,s,n,a=0){this.content.nodesBetween(e,s,n,a,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,s,n,a){return this.content.textBetween(e,s,n,a)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,s,n){return this.type==e&&rx(this.attrs,s||e.defaultAttrs||vI)&&an.sameSet(this.marks,n||an.none)}copy(e=null){return e==this.content?this:new Xv(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Xv(this.type,this.attrs,this.content,e)}cut(e,s=this.content.size){return e==0&&s==this.content.size?this:this.copy(this.content.cut(e,s))}slice(e,s=this.content.size,n=!1){if(e==s)return Jt.empty;let a=this.resolve(e),i=this.resolve(s),c=n?0:a.sharedDepth(s),A=a.start(c),f=a.node(c).content.cut(a.pos-A,i.pos-A);return new Jt(f,a.depth-c,i.depth-c)}replace(e,s,n){return mI(this.resolve(e),this.resolve(s),n)}nodeAt(e){for(let s=this;;){let{index:n,offset:a}=s.content.findIndex(e);if(s=s.maybeChild(n),!s)return null;if(a==e||s.isText)return s;e-=a+1}}childAfter(e){let{index:s,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(s),index:s,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:s,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(s),index:s,offset:n};let a=this.content.child(s-1);return{node:a,index:s-1,offset:n-a.nodeSize}}resolve(e){return Fp.resolveCached(this,e)}resolveNoCache(e){return Fp.resolve(this,e)}rangeHasMark(e,s,n){let a=!1;return s>e&&this.nodesBetween(e,s,i=>(n.isInSet(i.marks)&&(a=!0),!a)),a}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),bk(this.marks,e)}contentMatchAt(e){let s=this.type.contentMatch.matchFragment(this.content,0,e);if(!s)throw new Error("Called contentMatchAt on a node with invalid content");return s}canReplace(e,s,n=St.empty,a=0,i=n.childCount){let c=this.contentMatchAt(e).matchFragment(n,a,i),A=c&&c.matchFragment(this.content,s);if(!A||!A.validEnd)return!1;for(let d=a;d<i;d++)if(!this.type.allowsMarks(n.child(d).marks))return!1;return!0}canReplaceWith(e,s,n,a){if(a&&!this.type.allowsMarks(a))return!1;let i=this.contentMatchAt(e).matchType(n),c=i&&i.matchFragment(this.content,s);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=an.none;for(let s=0;s<this.marks.length;s++){let n=this.marks[s];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!an.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(s=>s.type.name)}`);this.content.forEach(s=>s.check())}toJSON(){let e={type:this.type.name};for(let s in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(s=>s.toJSON())),e}static fromJSON(e,s){if(!s)throw new RangeError("Invalid input for Node.fromJSON");let n;if(s.marks){if(!Array.isArray(s.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=s.marks.map(e.markFromJSON)}if(s.type=="text"){if(typeof s.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(s.text,n)}let a=St.fromJSON(e,s.content),i=e.nodeType(s.type).create(s.attrs,a,n);return i.type.checkAttrs(i.attrs),i}};ju.prototype.text=void 0;class lx extends ju{constructor(e,s,n,a){if(super(e,s,null,a),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):bk(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,s){return this.text.slice(e,s)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new lx(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new lx(this.type,this.attrs,e,this.marks)}cut(e=0,s=this.text.length){return e==0&&s==this.text.length?this:this.withText(this.text.slice(e,s))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function bk(t,e){for(let s=t.length-1;s>=0;s--)e=t[s].type.name+"("+e+")";return e}class Dh{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,s){let n=new yI(e,s);if(n.next==null)return Dh.empty;let a=vk(n);n.next&&n.err("Unexpected trailing text");let i=SI(CI(a));return EI(i,n),i}matchType(e){for(let s=0;s<this.next.length;s++)if(this.next[s].type==e)return this.next[s].next;return null}matchFragment(e,s=0,n=e.childCount){let a=this;for(let i=s;a&&i<n;i++)a=a.matchType(e.child(i).type);return a}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:s}=this.next[e];if(!(s.isText||s.hasRequiredAttrs()))return s}return null}compatible(e){for(let s=0;s<this.next.length;s++)for(let n=0;n<e.next.length;n++)if(this.next[s].type==e.next[n].type)return!0;return!1}fillBefore(e,s=!1,n=0){let a=[this];function i(c,A){let d=c.matchFragment(e,n);if(d&&(!s||d.validEnd))return St.from(A.map(f=>f.createAndFill()));for(let f=0;f<c.next.length;f++){let{type:u,next:p}=c.next[f];if(!(u.isText||u.hasRequiredAttrs())&&a.indexOf(p)==-1){a.push(p);let x=i(p,A.concat(u));if(x)return x}}return null}return i(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let s=this.computeWrapping(e);return this.wrapCache.push(e,s),s}computeWrapping(e){let s=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let a=n.shift(),i=a.match;if(i.matchType(e)){let c=[];for(let A=a;A.type;A=A.via)c.push(A.type);return c.reverse()}for(let c=0;c<i.next.length;c++){let{type:A,next:d}=i.next[c];!A.isLeaf&&!A.hasRequiredAttrs()&&!(A.name in s)&&(!a.type||d.validEnd)&&(n.push({match:A.contentMatch,type:A,via:a}),s[A.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function s(n){e.push(n);for(let a=0;a<n.next.length;a++)e.indexOf(n.next[a].next)==-1&&s(n.next[a].next)}return s(this),e.map((n,a)=>{let i=a+(n.validEnd?"*":" ")+" ";for(let c=0;c<n.next.length;c++)i+=(c?", ":"")+n.next[c].type.name+"->"+e.indexOf(n.next[c].next);return i}).join(`
`)}}Dh.empty=new Dh(!0);class yI{constructor(e,s){this.string=e,this.nodeTypes=s,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function vk(t){let e=[];do e.push(wI(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function wI(t){let e=[];do e.push(jI(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function jI(t){let e=kI(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=NI(t,e);else break;return e}function Pj(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function NI(t,e){let s=Pj(t),n=s;return t.eat(",")&&(t.next!="}"?n=Pj(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:s,max:n,expr:e}}function BI(t,e){let s=t.nodeTypes,n=s[e];if(n)return[n];let a=[];for(let i in s){let c=s[i];c.isInGroup(e)&&a.push(c)}return a.length==0&&t.err("No node type or group '"+e+"' found"),a}function kI(t){if(t.eat("(")){let e=vk(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=BI(t,t.next).map(s=>(t.inline==null?t.inline=s.isInline:t.inline!=s.isInline&&t.err("Mixing inline and block content"),{type:"name",value:s}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function CI(t){let e=[[]];return a(i(t,0),s()),e;function s(){return e.push([])-1}function n(c,A,d){let f={term:d,to:A};return e[c].push(f),f}function a(c,A){c.forEach(d=>d.to=A)}function i(c,A){if(c.type=="choice")return c.exprs.reduce((d,f)=>d.concat(i(f,A)),[]);if(c.type=="seq")for(let d=0;;d++){let f=i(c.exprs[d],A);if(d==c.exprs.length-1)return f;a(f,A=s())}else if(c.type=="star"){let d=s();return n(A,d),a(i(c.expr,d),d),[n(d)]}else if(c.type=="plus"){let d=s();return a(i(c.expr,A),d),a(i(c.expr,d),d),[n(d)]}else{if(c.type=="opt")return[n(A)].concat(i(c.expr,A));if(c.type=="range"){let d=A;for(let f=0;f<c.min;f++){let u=s();a(i(c.expr,d),u),d=u}if(c.max==-1)a(i(c.expr,d),d);else for(let f=c.min;f<c.max;f++){let u=s();n(d,u),a(i(c.expr,d),u),d=u}return[n(d)]}else{if(c.type=="name")return[n(A,void 0,c.value)];throw new Error("Unknown expr type")}}}}function yk(t,e){return e-t}function zj(t,e){let s=[];return n(e),s.sort(yk);function n(a){let i=t[a];if(i.length==1&&!i[0].term)return n(i[0].to);s.push(a);for(let c=0;c<i.length;c++){let{term:A,to:d}=i[c];!A&&s.indexOf(d)==-1&&n(d)}}}function SI(t){let e=Object.create(null);return s(zj(t,0));function s(n){let a=[];n.forEach(c=>{t[c].forEach(({term:A,to:d})=>{if(!A)return;let f;for(let u=0;u<a.length;u++)a[u][0]==A&&(f=a[u][1]);zj(t,d).forEach(u=>{f||a.push([A,f=[]]),f.indexOf(u)==-1&&f.push(u)})})});let i=e[n.join(",")]=new Dh(n.indexOf(t.length-1)>-1);for(let c=0;c<a.length;c++){let A=a[c][1].sort(yk);i.next.push({type:a[c][0],next:e[A.join(",")]||s(A)})}return i}}function EI(t,e){for(let s=0,n=[t];s<n.length;s++){let a=n[s],i=!a.validEnd,c=[];for(let A=0;A<a.next.length;A++){let{type:d,next:f}=a.next[A];c.push(d.name),i&&!(d.isText||d.hasRequiredAttrs())&&(i=!1),n.indexOf(f)==-1&&n.push(f)}i&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function wk(t){let e=Object.create(null);for(let s in t){let n=t[s];if(!n.hasDefault)return null;e[s]=n.default}return e}function jk(t,e){let s=Object.create(null);for(let n in t){let a=e&&e[n];if(a===void 0){let i=t[n];if(i.hasDefault)a=i.default;else throw new RangeError("No value supplied for attribute "+n)}s[n]=a}return s}function Nk(t,e,s,n){for(let a in e)if(!(a in t))throw new RangeError(`Unsupported attribute ${a} for ${s} of type ${a}`);for(let a in t){let i=t[a];i.validate&&i.validate(e[a])}}function Bk(t,e){let s=Object.create(null);if(e)for(let n in e)s[n]=new UI(t,n,e[n]);return s}let Kj=class kk{constructor(e,s,n){this.name=e,this.schema=s,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Bk(e,n.attrs),this.defaultAttrs=wk(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Dh.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:jk(this.attrs,e)}create(e=null,s,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ju(this,this.computeAttrs(e),St.from(s),an.setFrom(n))}createChecked(e=null,s,n){return s=St.from(s),this.checkContent(s),new ju(this,this.computeAttrs(e),s,an.setFrom(n))}createAndFill(e=null,s,n){if(e=this.computeAttrs(e),s=St.from(s),s.size){let c=this.contentMatch.fillBefore(s);if(!c)return null;s=c.append(s)}let a=this.contentMatch.matchFragment(s),i=a&&a.fillBefore(St.empty,!0);return i?new ju(this,e,s.append(i),an.setFrom(n)):null}validContent(e){let s=this.contentMatch.matchFragment(e);if(!s||!s.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Nk(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let s=0;s<e.length;s++)if(!this.allowsMarkType(e[s].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let s;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?s&&s.push(e[n]):s||(s=e.slice(0,n));return s?s.length?s:an.none:e}static compile(e,s){let n=Object.create(null);e.forEach((i,c)=>n[i]=new kk(i,s,c));let a=s.spec.topNode||"doc";if(!n[a])throw new RangeError("Schema is missing its top node type ('"+a+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function TI(t,e,s){let n=s.split("|");return a=>{let i=a===null?"null":typeof a;if(n.indexOf(i)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${i}`)}}class UI{constructor(e,s,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?TI(e,s,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class ub{constructor(e,s,n,a){this.name=e,this.rank=s,this.schema=n,this.spec=a,this.attrs=Bk(e,a.attrs),this.excluded=null;let i=wk(this.attrs);this.instance=i?new an(this,i):null}create(e=null){return!e&&this.instance?this.instance:new an(this,jk(this.attrs,e))}static compile(e,s){let n=Object.create(null),a=0;return e.forEach((i,c)=>n[i]=new ub(i,a++,s,c)),n}removeFromSet(e){for(var s=0;s<e.length;s++)e[s].type==this&&(e=e.slice(0,s).concat(e.slice(s+1)),s--);return e}isInSet(e){for(let s=0;s<e.length;s++)if(e[s].type==this)return e[s]}checkAttrs(e){Nk(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Ck{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let s=this.spec={};for(let a in e)s[a]=e[a];s.nodes=bi.from(e.nodes),s.marks=bi.from(e.marks||{}),this.nodes=Kj.compile(this.spec.nodes,this),this.marks=ub.compile(this.spec.marks,this);let n=Object.create(null);for(let a in this.nodes){if(a in this.marks)throw new RangeError(a+" can not be both a node and a mark");let i=this.nodes[a],c=i.spec.content||"",A=i.spec.marks;if(i.contentMatch=n[c]||(n[c]=Dh.parse(c,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=A=="_"?null:A?Vj(this,A.split(" ")):A==""||!i.inlineContent?[]:null}for(let a in this.marks){let i=this.marks[a],c=i.spec.excludes;i.excluded=c==null?[i]:c==""?[]:Vj(this,c.split(" "))}this.nodeFromJSON=a=>ju.fromJSON(this,a),this.markFromJSON=a=>an.fromJSON(this,a),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,s=null,n,a){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Kj){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(s,n,a)}text(e,s){let n=this.nodes.text;return new lx(n,n.defaultAttrs,e,an.setFrom(s))}mark(e,s){return typeof e=="string"&&(e=this.marks[e]),e.create(s)}nodeType(e){let s=this.nodes[e];if(!s)throw new RangeError("Unknown node type: "+e);return s}}function Vj(t,e){let s=[];for(let n=0;n<e.length;n++){let a=e[n],i=t.marks[a],c=i;if(i)s.push(i);else for(let A in t.marks){let d=t.marks[A];(a=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(a)>-1)&&s.push(c=d)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return s}function FI(t){return t.tag!=null}function LI(t){return t.style!=null}let pp=class Zv{constructor(e,s){this.schema=e,this.rules=s,this.tags=[],this.styles=[];let n=this.matchedStyles=[];s.forEach(a=>{if(FI(a))this.tags.push(a);else if(LI(a)){let i=/[^=]*/.exec(a.style)[0];n.indexOf(i)<0&&n.push(i),this.styles.push(a)}}),this.normalizeLists=!this.tags.some(a=>{if(!/^(ul|ol)\b/.test(a.tag)||!a.node)return!1;let i=e.nodes[a.node];return i.contentMatch.matchType(i)})}parse(e,s={}){let n=new Gj(this,s,!1);return n.addAll(e,an.none,s.from,s.to),n.finish()}parseSlice(e,s={}){let n=new Gj(this,s,!0);return n.addAll(e,an.none,s.from,s.to),Jt.maxOpen(n.finish())}matchTag(e,s,n){for(let a=n?this.tags.indexOf(n)+1:0;a<this.tags.length;a++){let i=this.tags[a];if(_I(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||s.matchesContext(i.context))){if(i.getAttrs){let c=i.getAttrs(e);if(c===!1)continue;i.attrs=c||void 0}return i}}}matchStyle(e,s,n,a){for(let i=a?this.styles.indexOf(a)+1:0;i<this.styles.length;i++){let c=this.styles[i],A=c.style;if(!(A.indexOf(e)!=0||c.context&&!n.matchesContext(c.context)||A.length>e.length&&(A.charCodeAt(e.length)!=61||A.slice(e.length+1)!=s))){if(c.getAttrs){let d=c.getAttrs(s);if(d===!1)continue;c.attrs=d||void 0}return c}}}static schemaRules(e){let s=[];function n(a){let i=a.priority==null?50:a.priority,c=0;for(;c<s.length;c++){let A=s[c];if((A.priority==null?50:A.priority)<i)break}s.splice(c,0,a)}for(let a in e.marks){let i=e.marks[a].spec.parseDOM;i&&i.forEach(c=>{n(c=qj(c)),c.mark||c.ignore||c.clearMark||(c.mark=a)})}for(let a in e.nodes){let i=e.nodes[a].spec.parseDOM;i&&i.forEach(c=>{n(c=qj(c)),c.node||c.ignore||c.mark||(c.node=a)})}return s}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Zv(e,Zv.schemaRules(e)))}};const Sk={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},MI={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ek={ol:!0,ul:!0},Lp=1,ey=2,mp=4;function $j(t,e,s){return e!=null?(e?Lp:0)|(e==="full"?ey:0):t&&t.whitespace=="pre"?Lp|ey:s&~mp}class og{constructor(e,s,n,a,i,c){this.type=e,this.attrs=s,this.marks=n,this.solid=a,this.options=c,this.content=[],this.activeMarks=an.none,this.match=i||(c&mp?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let s=this.type.contentMatch.fillBefore(St.from(e));if(s)this.match=this.type.contentMatch.matchFragment(s);else{let n=this.type.contentMatch,a;return(a=n.findWrapping(e.type))?(this.match=n,a):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Lp)){let n=this.content[this.content.length-1],a;if(n&&n.isText&&(a=/[ \t\r\n\u000c]+$/.exec(n.text))){let i=n;n.text.length==a[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-a[0].length))}}let s=St.from(this.content);return!e&&this.match&&(s=s.append(this.match.fillBefore(St.empty,!0))),this.type?this.type.create(this.attrs,s,this.marks):s}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Sk.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Gj{constructor(e,s,n){this.parser=e,this.options=s,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let a=s.topNode,i,c=$j(null,s.preserveWhitespace,0)|(n?mp:0);a?i=new og(a.type,a.attrs,an.none,!0,s.topMatch||a.type.contentMatch,c):n?i=new og(null,null,an.none,!0,null,c):i=new og(e.schema.topNodeType,null,an.none,!0,null,c),this.nodes=[i],this.find=s.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,s){e.nodeType==3?this.addTextNode(e,s):e.nodeType==1&&this.addElement(e,s)}addTextNode(e,s){let n=e.nodeValue,a=this.top,i=a.options&ey?"full":this.localPreserveWS||(a.options&Lp)>0,{schema:c}=this.parser;if(i==="full"||a.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i)if(i==="full")n=n.replace(/\r\n?/g,`
`);else if(c.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(c.linebreakReplacement.create())){let A=n.split(/\r?\n|\r/);for(let d=0;d<A.length;d++)d&&this.insertNode(c.linebreakReplacement.create(),s,!0),A[d]&&this.insertNode(c.text(A[d]),s,!/\S/.test(A[d]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let A=a.content[a.content.length-1],d=e.previousSibling;(!A||d&&d.nodeName=="BR"||A.isText&&/[ \t\r\n\u000c]$/.test(A.text))&&(n=n.slice(1))}n&&this.insertNode(c.text(n),s,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,s,n){let a=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),A;Ek.hasOwnProperty(c)&&this.parser.normalizeLists&&QI(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(A=this.parser.matchTag(e,this,n));e:if(d?d.ignore:MI.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,s);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let f,u=this.needsBlock;if(Sk.hasOwnProperty(c))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),f=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,s);break e}let p=d&&d.skip?s:this.readStyles(e,s);p&&this.addAll(e,p),f&&this.sync(i),this.needsBlock=u}else{let f=this.readStyles(e,s);f&&this.addElementByRule(e,d,f,d.consuming===!1?A:void 0)}this.localPreserveWS=a}leafFallback(e,s){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),s)}ignoreFallback(e,s){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),s,!0)}readStyles(e,s){let n=e.style;if(n&&n.length)for(let a=0;a<this.parser.matchedStyles.length;a++){let i=this.parser.matchedStyles[a],c=n.getPropertyValue(i);if(c)for(let A=void 0;;){let d=this.parser.matchStyle(i,c,this,A);if(!d)break;if(d.ignore)return null;if(d.clearMark?s=s.filter(f=>!d.clearMark(f)):s=s.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)A=d;else break}}return s}addElementByRule(e,s,n,a){let i,c;if(s.node)if(c=this.parser.schema.nodes[s.node],c.isLeaf)this.insertNode(c.create(s.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let d=this.enter(c,s.attrs||null,n,s.preserveWhitespace);d&&(i=!0,n=d)}else{let d=this.parser.schema.marks[s.mark];n=n.concat(d.create(s.attrs))}let A=this.top;if(c&&c.isLeaf)this.findInside(e);else if(a)this.addElement(e,n,a);else if(s.getContent)this.findInside(e),s.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,n,!1));else{let d=e;typeof s.contentElement=="string"?d=e.querySelector(s.contentElement):typeof s.contentElement=="function"?d=s.contentElement(e):s.contentElement&&(d=s.contentElement),this.findAround(e,d,!0),this.addAll(d,n),this.findAround(e,d,!1)}i&&this.sync(A)&&this.open--}addAll(e,s,n,a){let i=n||0;for(let c=n?e.childNodes[n]:e.firstChild,A=a==null?null:e.childNodes[a];c!=A;c=c.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(c,s);this.findAtPoint(e,i)}findPlace(e,s,n){let a,i;for(let c=this.open,A=0;c>=0;c--){let d=this.nodes[c],f=d.findWrapping(e);if(f&&(!a||a.length>f.length+A)&&(a=f,i=d,!f.length))break;if(d.solid){if(n)break;A+=2}}if(!a)return null;this.sync(i);for(let c=0;c<a.length;c++)s=this.enterInner(a[c],null,s,!1);return s}insertNode(e,s,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(s=this.enterInner(i,null,s))}let a=this.findPlace(e,s,n);if(a){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let c=an.none;for(let A of a.concat(e.marks))(i.type?i.type.allowsMarkType(A.type):Yj(A.type,e.type))&&(c=A.addToSet(c));return i.content.push(e.mark(c)),!0}return!1}enter(e,s,n,a){let i=this.findPlace(e.create(s),n,!1);return i&&(i=this.enterInner(e,s,n,!0,a)),i}enterInner(e,s,n,a=!1,i){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let A=$j(e,i,c.options);c.options&mp&&c.content.length==0&&(A|=mp);let d=an.none;return n=n.filter(f=>(c.type?c.type.allowsMarkType(f.type):Yj(f.type,e))?(d=f.addToSet(d),!1):!0),this.nodes.push(new og(e,s,d,a,null,A)),this.open++,n}closeExtra(e=!1){let s=this.nodes.length-1;if(s>this.open){for(;s>this.open;s--)this.nodes[s-1].content.push(this.nodes[s].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let s=this.open;s>=0;s--){if(this.nodes[s]==e)return this.open=s,!0;this.localPreserveWS&&(this.nodes[s].options|=Lp)}return!1}get currentPos(){this.closeExtra();let e=0;for(let s=this.open;s>=0;s--){let n=this.nodes[s].content;for(let a=n.length-1;a>=0;a--)e+=n[a].nodeSize;s&&e++}return e}findAtPoint(e,s){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==s&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&(this.find[s].pos=this.currentPos)}findAround(e,s,n){if(e!=s&&this.find)for(let a=0;a<this.find.length;a++)this.find[a].pos==null&&e.nodeType==1&&e.contains(this.find[a].node)&&s.compareDocumentPosition(this.find[a].node)&(n?2:4)&&(this.find[a].pos=this.currentPos)}findInText(e){if(this.find)for(let s=0;s<this.find.length;s++)this.find[s].node==e&&(this.find[s].pos=this.currentPos-(e.nodeValue.length-this.find[s].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let s=e.split("/"),n=this.options.context,a=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(a?0:1),c=(A,d)=>{for(;A>=0;A--){let f=s[A];if(f==""){if(A==s.length-1||A==0)continue;for(;d>=i;d--)if(c(A-1,d))return!0;return!1}else{let u=d>0||d==0&&a?this.nodes[d].type:n&&d>=i?n.node(d-i).type:null;if(!u||u.name!=f&&!u.isInGroup(f))return!1;d--}}return!0};return c(s.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let s=e.depth;s>=0;s--){let n=e.node(s).contentMatchAt(e.indexAfter(s)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let s in this.parser.schema.nodes){let n=this.parser.schema.nodes[s];if(n.isTextblock&&n.defaultAttrs)return n}}}function QI(t){for(let e=t.firstChild,s=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&Ek.hasOwnProperty(n)&&s?(s.appendChild(e),e=s):n=="li"?s=e:n&&(s=null)}}function _I(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function qj(t){let e={};for(let s in t)e[s]=t[s];return e}function Yj(t,e){let s=e.schema.nodes;for(let n in s){let a=s[n];if(!a.allowsMarkType(t))continue;let i=[],c=A=>{i.push(A);for(let d=0;d<A.edgeCount;d++){let{type:f,next:u}=A.edge(d);if(f==e||i.indexOf(u)<0&&c(u))return!0}};if(c(a.contentMatch))return!0}}class Gh{constructor(e,s){this.nodes=e,this.marks=s}serializeFragment(e,s={},n){n||(n=q1(s).createDocumentFragment());let a=n,i=[];return e.forEach(c=>{if(i.length||c.marks.length){let A=0,d=0;for(;A<i.length&&d<c.marks.length;){let f=c.marks[d];if(!this.marks[f.type.name]){d++;continue}if(!f.eq(i[A][0])||f.type.spec.spanning===!1)break;A++,d++}for(;A<i.length;)a=i.pop()[1];for(;d<c.marks.length;){let f=c.marks[d++],u=this.serializeMark(f,c.isInline,s);u&&(i.push([f,a]),a.appendChild(u.dom),a=u.contentDOM||u.dom)}}a.appendChild(this.serializeNodeInner(c,s))}),n}serializeNodeInner(e,s){let{dom:n,contentDOM:a}=Tg(q1(s),this.nodes[e.type.name](e),null,e.attrs);if(a){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,s,a)}return n}serializeNode(e,s={}){let n=this.serializeNodeInner(e,s);for(let a=e.marks.length-1;a>=0;a--){let i=this.serializeMark(e.marks[a],e.isInline,s);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,s,n={}){let a=this.marks[e.type.name];return a&&Tg(q1(n),a(e,s),null,e.attrs)}static renderSpec(e,s,n=null,a){return Tg(e,s,n,a)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Gh(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let s=Jj(e.nodes);return s.text||(s.text=n=>n.text),s}static marksFromSchema(e){return Jj(e.marks)}}function Jj(t){let e={};for(let s in t){let n=t[s].spec.toDOM;n&&(e[s]=n)}return e}function q1(t){return t.document||window.document}const Wj=new WeakMap;function II(t){let e=Wj.get(t);return e===void 0&&Wj.set(t,e=OI(t)),e}function OI(t){let e=null;function s(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let a=0;a<n.length;a++)s(n[a]);else for(let a in n)s(n[a])}return s(t),e}function Tg(t,e,s,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let a=e[0],i;if(typeof a!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(i=II(n))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=a.indexOf(" ");c>0&&(s=a.slice(0,c),a=a.slice(c+1));let A,d=s?t.createElementNS(s,a):t.createElement(a),f=e[1],u=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){u=2;for(let p in f)if(f[p]!=null){let x=p.indexOf(" ");x>0?d.setAttributeNS(p.slice(0,x),p.slice(x+1),f[p]):p=="style"&&d.style?d.style.cssText=f[p]:d.setAttribute(p,f[p])}}for(let p=u;p<e.length;p++){let x=e[p];if(x===0){if(p<e.length-1||p>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:m,contentDOM:j}=Tg(t,x,s,n);if(d.appendChild(m),j){if(A)throw new RangeError("Multiple content holes");A=j}}}return{dom:d,contentDOM:A}}const Tk=65535,Uk=Math.pow(2,16);function DI(t,e){return t+e*Uk}function Xj(t){return t&Tk}function RI(t){return(t-(t&Tk))/Uk}const Fk=1,Lk=2,Ug=4,Mk=8;class ty{constructor(e,s,n){this.pos=e,this.delInfo=s,this.recover=n}get deleted(){return(this.delInfo&Mk)>0}get deletedBefore(){return(this.delInfo&(Fk|Ug))>0}get deletedAfter(){return(this.delInfo&(Lk|Ug))>0}get deletedAcross(){return(this.delInfo&Ug)>0}}class vo{constructor(e,s=!1){if(this.ranges=e,this.inverted=s,!e.length&&vo.empty)return vo.empty}recover(e){let s=0,n=Xj(e);if(!this.inverted)for(let a=0;a<n;a++)s+=this.ranges[a*3+2]-this.ranges[a*3+1];return this.ranges[n*3]+s+RI(e)}mapResult(e,s=1){return this._map(e,s,!1)}map(e,s=1){return this._map(e,s,!0)}_map(e,s,n){let a=0,i=this.inverted?2:1,c=this.inverted?1:2;for(let A=0;A<this.ranges.length;A+=3){let d=this.ranges[A]-(this.inverted?a:0);if(d>e)break;let f=this.ranges[A+i],u=this.ranges[A+c],p=d+f;if(e<=p){let x=f?e==d?-1:e==p?1:s:s,m=d+a+(x<0?0:u);if(n)return m;let j=e==(s<0?d:p)?null:DI(A/3,e-d),w=e==d?Lk:e==p?Fk:Ug;return(s<0?e!=d:e!=p)&&(w|=Mk),new ty(m,w,j)}a+=u-f}return n?e+a:new ty(e+a,0,null)}touches(e,s){let n=0,a=Xj(s),i=this.inverted?2:1,c=this.inverted?1:2;for(let A=0;A<this.ranges.length;A+=3){let d=this.ranges[A]-(this.inverted?n:0);if(d>e)break;let f=this.ranges[A+i],u=d+f;if(e<=u&&A==a*3)return!0;n+=this.ranges[A+c]-f}return!1}forEach(e){let s=this.inverted?2:1,n=this.inverted?1:2;for(let a=0,i=0;a<this.ranges.length;a+=3){let c=this.ranges[a],A=c-(this.inverted?i:0),d=c+(this.inverted?0:i),f=this.ranges[a+s],u=this.ranges[a+n];e(A,A+f,d,d+u),i+=u-f}}invert(){return new vo(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?vo.empty:new vo(e<0?[0,-e,0]:[0,0,e])}}vo.empty=new vo([]);class Mp{constructor(e,s,n=0,a=e?e.length:0){this.mirror=s,this.from=n,this.to=a,this._maps=e||[],this.ownData=!(e||s)}get maps(){return this._maps}slice(e=0,s=this.maps.length){return new Mp(this._maps,this.mirror,e,s)}appendMap(e,s){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),s!=null&&this.setMirror(this._maps.length-1,s)}appendMapping(e){for(let s=0,n=this._maps.length;s<e._maps.length;s++){let a=e.getMirror(s);this.appendMap(e._maps[s],a!=null&&a<s?n+a:void 0)}}getMirror(e){if(this.mirror){for(let s=0;s<this.mirror.length;s++)if(this.mirror[s]==e)return this.mirror[s+(s%2?-1:1)]}}setMirror(e,s){this.mirror||(this.mirror=[]),this.mirror.push(e,s)}appendMappingInverted(e){for(let s=e.maps.length-1,n=this._maps.length+e._maps.length;s>=0;s--){let a=e.getMirror(s);this.appendMap(e._maps[s].invert(),a!=null&&a>s?n-a-1:void 0)}}invert(){let e=new Mp;return e.appendMappingInverted(this),e}map(e,s=1){if(this.mirror)return this._map(e,s,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,s);return e}mapResult(e,s=1){return this._map(e,s,!1)}_map(e,s,n){let a=0;for(let i=this.from;i<this.to;i++){let c=this._maps[i],A=c.mapResult(e,s);if(A.recover!=null){let d=this.getMirror(i);if(d!=null&&d>i&&d<this.to){i=d,e=this._maps[d].recover(A.recover);continue}}a|=A.delInfo,e=A.pos}return n?e:new ty(e,a,null)}}const Y1=Object.create(null);class rl{getMap(){return vo.empty}merge(e){return null}static fromJSON(e,s){if(!s||!s.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Y1[s.stepType];if(!n)throw new RangeError(`No step type ${s.stepType} defined`);return n.fromJSON(e,s)}static jsonID(e,s){if(e in Y1)throw new RangeError("Duplicate use of step JSON ID "+e);return Y1[e]=s,s.prototype.jsonID=e,s}}class Ea{constructor(e,s){this.doc=e,this.failed=s}static ok(e){return new Ea(e,null)}static fail(e){return new Ea(null,e)}static fromReplace(e,s,n,a){try{return Ea.ok(e.replace(s,n,a))}catch(i){if(i instanceof nx)return Ea.fail(i.message);throw i}}}function Jy(t,e,s){let n=[];for(let a=0;a<t.childCount;a++){let i=t.child(a);i.content.size&&(i=i.copy(Jy(i.content,e,i))),i.isInline&&(i=e(i,s,a)),n.push(i)}return St.fromArray(n)}class gu extends rl{constructor(e,s,n){super(),this.from=e,this.to=s,this.mark=n}apply(e){let s=e.slice(this.from,this.to),n=e.resolve(this.from),a=n.node(n.sharedDepth(this.to)),i=new Jt(Jy(s.content,(c,A)=>!c.isAtom||!A.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),a),s.openStart,s.openEnd);return Ea.fromReplace(e,this.from,this.to,i)}invert(){return new _c(this.from,this.to,this.mark)}map(e){let s=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return s.deleted&&n.deleted||s.pos>=n.pos?null:new gu(s.pos,n.pos,this.mark)}merge(e){return e instanceof gu&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new gu(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new gu(s.from,s.to,e.markFromJSON(s.mark))}}rl.jsonID("addMark",gu);class _c extends rl{constructor(e,s,n){super(),this.from=e,this.to=s,this.mark=n}apply(e){let s=e.slice(this.from,this.to),n=new Jt(Jy(s.content,a=>a.mark(this.mark.removeFromSet(a.marks)),e),s.openStart,s.openEnd);return Ea.fromReplace(e,this.from,this.to,n)}invert(){return new gu(this.from,this.to,this.mark)}map(e){let s=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return s.deleted&&n.deleted||s.pos>=n.pos?null:new _c(s.pos,n.pos,this.mark)}merge(e){return e instanceof _c&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new _c(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new _c(s.from,s.to,e.markFromJSON(s.mark))}}rl.jsonID("removeMark",_c);class xu extends rl{constructor(e,s){super(),this.pos=e,this.mark=s}apply(e){let s=e.nodeAt(this.pos);if(!s)return Ea.fail("No node at mark step's position");let n=s.type.create(s.attrs,null,this.mark.addToSet(s.marks));return Ea.fromReplace(e,this.pos,this.pos+1,new Jt(St.from(n),0,s.isLeaf?0:1))}invert(e){let s=e.nodeAt(this.pos);if(s){let n=this.mark.addToSet(s.marks);if(n.length==s.marks.length){for(let a=0;a<s.marks.length;a++)if(!s.marks[a].isInSet(n))return new xu(this.pos,s.marks[a]);return new xu(this.pos,this.mark)}}return new Rh(this.pos,this.mark)}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new xu(s.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new xu(s.pos,e.markFromJSON(s.mark))}}rl.jsonID("addNodeMark",xu);class Rh extends rl{constructor(e,s){super(),this.pos=e,this.mark=s}apply(e){let s=e.nodeAt(this.pos);if(!s)return Ea.fail("No node at mark step's position");let n=s.type.create(s.attrs,null,this.mark.removeFromSet(s.marks));return Ea.fromReplace(e,this.pos,this.pos+1,new Jt(St.from(n),0,s.isLeaf?0:1))}invert(e){let s=e.nodeAt(this.pos);return!s||!this.mark.isInSet(s.marks)?this:new xu(this.pos,this.mark)}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new Rh(s.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Rh(s.pos,e.markFromJSON(s.mark))}}rl.jsonID("removeNodeMark",Rh);class ti extends rl{constructor(e,s,n,a=!1){super(),this.from=e,this.to=s,this.slice=n,this.structure=a}apply(e){return this.structure&&sy(e,this.from,this.to)?Ea.fail("Structure replace would overwrite content"):Ea.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new vo([this.from,this.to-this.from,this.slice.size])}invert(e){return new ti(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let s=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return s.deletedAcross&&n.deletedAcross?null:new ti(s.pos,Math.max(s.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ti)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let s=this.slice.size+e.slice.size==0?Jt.empty:new Jt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ti(this.from,this.to+(e.to-e.from),s,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let s=this.slice.size+e.slice.size==0?Jt.empty:new Jt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ti(e.from,this.to,s,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ti(s.from,s.to,Jt.fromJSON(e,s.slice),!!s.structure)}}rl.jsonID("replace",ti);class ri extends rl{constructor(e,s,n,a,i,c,A=!1){super(),this.from=e,this.to=s,this.gapFrom=n,this.gapTo=a,this.slice=i,this.insert=c,this.structure=A}apply(e){if(this.structure&&(sy(e,this.from,this.gapFrom)||sy(e,this.gapTo,this.to)))return Ea.fail("Structure gap-replace would overwrite content");let s=e.slice(this.gapFrom,this.gapTo);if(s.openStart||s.openEnd)return Ea.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,s.content);return n?Ea.fromReplace(e,this.from,this.to,n):Ea.fail("Content does not fit in gap")}getMap(){return new vo([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let s=this.gapTo-this.gapFrom;return new ri(this.from,this.from+this.slice.size+s,this.from+this.insert,this.from+this.insert+s,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let s=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),a=this.from==this.gapFrom?s.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return s.deletedAcross&&n.deletedAcross||a<s.pos||i>n.pos?null:new ri(s.pos,n.pos,a,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,s){if(typeof s.from!="number"||typeof s.to!="number"||typeof s.gapFrom!="number"||typeof s.gapTo!="number"||typeof s.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ri(s.from,s.to,s.gapFrom,s.gapTo,Jt.fromJSON(e,s.slice),s.insert,!!s.structure)}}rl.jsonID("replaceAround",ri);function sy(t,e,s){let n=t.resolve(e),a=s-e,i=n.depth;for(;a>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,a--;if(a>0){let c=n.node(i).maybeChild(n.indexAfter(i));for(;a>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,a--}}return!1}function HI(t,e,s,n){let a=[],i=[],c,A;t.doc.nodesBetween(e,s,(d,f,u)=>{if(!d.isInline)return;let p=d.marks;if(!n.isInSet(p)&&u.type.allowsMarkType(n.type)){let x=Math.max(f,e),m=Math.min(f+d.nodeSize,s),j=n.addToSet(p);for(let w=0;w<p.length;w++)p[w].isInSet(j)||(c&&c.to==x&&c.mark.eq(p[w])?c.to=m:a.push(c=new _c(x,m,p[w])));A&&A.to==x?A.to=m:i.push(A=new gu(x,m,n))}}),a.forEach(d=>t.step(d)),i.forEach(d=>t.step(d))}function PI(t,e,s,n){let a=[],i=0;t.doc.nodesBetween(e,s,(c,A)=>{if(!c.isInline)return;i++;let d=null;if(n instanceof ub){let f=c.marks,u;for(;u=n.isInSet(f);)(d||(d=[])).push(u),f=u.removeFromSet(f)}else n?n.isInSet(c.marks)&&(d=[n]):d=c.marks;if(d&&d.length){let f=Math.min(A+c.nodeSize,s);for(let u=0;u<d.length;u++){let p=d[u],x;for(let m=0;m<a.length;m++){let j=a[m];j.step==i-1&&p.eq(a[m].style)&&(x=j)}x?(x.to=f,x.step=i):a.push({style:p,from:Math.max(A,e),to:f,step:i})}}}),a.forEach(c=>t.step(new _c(c.from,c.to,c.style)))}function Wy(t,e,s,n=s.contentMatch,a=!0){let i=t.doc.nodeAt(e),c=[],A=e+1;for(let d=0;d<i.childCount;d++){let f=i.child(d),u=A+f.nodeSize,p=n.matchType(f.type);if(!p)c.push(new ti(A,u,Jt.empty));else{n=p;for(let x=0;x<f.marks.length;x++)s.allowsMarkType(f.marks[x].type)||t.step(new _c(A,u,f.marks[x]));if(a&&f.isText&&s.whitespace!="pre"){let x,m=/\r?\n|\r/g,j;for(;x=m.exec(f.text);)j||(j=new Jt(St.from(s.schema.text(" ",s.allowedMarks(f.marks))),0,0)),c.push(new ti(A+x.index,A+x.index+x[0].length,j))}}A=u}if(!n.validEnd){let d=n.fillBefore(St.empty,!0);t.replace(A,A,new Jt(d,0,0))}for(let d=c.length-1;d>=0;d--)t.step(c[d])}function zI(t,e,s){return(e==0||t.canReplace(e,t.childCount))&&(s==t.childCount||t.canReplace(0,s))}function s0(t){let s=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,a=0,i=0;;--n){let c=t.$from.node(n),A=t.$from.index(n)+a,d=t.$to.indexAfter(n)-i;if(n<t.depth&&c.canReplace(A,d,s))return n;if(n==0||c.type.spec.isolating||!zI(c,A,d))break;A&&(a=1),d<c.childCount&&(i=1)}return null}function KI(t,e,s){let{$from:n,$to:a,depth:i}=e,c=n.before(i+1),A=a.after(i+1),d=c,f=A,u=St.empty,p=0;for(let j=i,w=!1;j>s;j--)w||n.index(j)>0?(w=!0,u=St.from(n.node(j).copy(u)),p++):d--;let x=St.empty,m=0;for(let j=i,w=!1;j>s;j--)w||a.after(j+1)<a.end(j)?(w=!0,x=St.from(a.node(j).copy(x)),m++):f++;t.step(new ri(d,f,c,A,new Jt(u.append(x),p,m),u.size-p,!0))}function Xy(t,e,s=null,n=t){let a=VI(t,e),i=a&&$I(n,e);return i?a.map(Zj).concat({type:e,attrs:s}).concat(i.map(Zj)):null}function Zj(t){return{type:t,attrs:null}}function VI(t,e){let{parent:s,startIndex:n,endIndex:a}=t,i=s.contentMatchAt(n).findWrapping(e);if(!i)return null;let c=i.length?i[0]:e;return s.canReplaceWith(n,a,c)?i:null}function $I(t,e){let{parent:s,startIndex:n,endIndex:a}=t,i=s.child(n),c=e.contentMatch.findWrapping(i.type);if(!c)return null;let d=(c.length?c[c.length-1]:e).contentMatch;for(let f=n;d&&f<a;f++)d=d.matchType(s.child(f).type);return!d||!d.validEnd?null:c}function GI(t,e,s){let n=St.empty;for(let c=s.length-1;c>=0;c--){if(n.size){let A=s[c].type.contentMatch.matchFragment(n);if(!A||!A.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=St.from(s[c].type.create(s[c].attrs,n))}let a=e.start,i=e.end;t.step(new ri(a,i,a,i,new Jt(n,0,0),s.length,!0))}function qI(t,e,s,n,a){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,s,(c,A)=>{let d=typeof a=="function"?a(c):a;if(c.isTextblock&&!c.hasMarkup(n,d)&&YI(t.doc,t.mapping.slice(i).map(A),n)){let f=null;if(n.schema.linebreakReplacement){let m=n.whitespace=="pre",j=!!n.contentMatch.matchType(n.schema.linebreakReplacement);m&&!j?f=!1:!m&&j&&(f=!0)}f===!1&&_k(t,c,A,i),Wy(t,t.mapping.slice(i).map(A,1),n,void 0,f===null);let u=t.mapping.slice(i),p=u.map(A,1),x=u.map(A+c.nodeSize,1);return t.step(new ri(p,x,p+1,x-1,new Jt(St.from(n.create(d,null,c.marks)),0,0),1,!0)),f===!0&&Qk(t,c,A,i),!1}})}function Qk(t,e,s,n){e.forEach((a,i)=>{if(a.isText){let c,A=/\r?\n|\r/g;for(;c=A.exec(a.text);){let d=t.mapping.slice(n).map(s+1+i+c.index);t.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function _k(t,e,s,n){e.forEach((a,i)=>{if(a.type==a.type.schema.linebreakReplacement){let c=t.mapping.slice(n).map(s+1+i);t.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function YI(t,e,s){let n=t.resolve(e),a=n.index();return n.parent.canReplaceWith(a,a+1,s)}function JI(t,e,s,n,a){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");s||(s=i.type);let c=s.create(n,null,a||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,c);if(!s.validContent(i.content))throw new RangeError("Invalid content for node type "+s.name);t.step(new ri(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new Jt(St.from(c),0,0),1,!0))}function fd(t,e,s=1,n){let a=t.resolve(e),i=a.depth-s,c=n&&n[n.length-1]||a.parent;if(i<0||a.parent.type.spec.isolating||!a.parent.canReplace(a.index(),a.parent.childCount)||!c.type.validContent(a.parent.content.cutByIndex(a.index(),a.parent.childCount)))return!1;for(let f=a.depth-1,u=s-2;f>i;f--,u--){let p=a.node(f),x=a.index(f);if(p.type.spec.isolating)return!1;let m=p.content.cutByIndex(x,p.childCount),j=n&&n[u+1];j&&(m=m.replaceChild(0,j.type.create(j.attrs)));let w=n&&n[u]||p;if(!p.canReplace(x+1,p.childCount)||!w.type.validContent(m))return!1}let A=a.indexAfter(i),d=n&&n[0];return a.node(i).canReplaceWith(A,A,d?d.type:a.node(i+1).type)}function WI(t,e,s=1,n){let a=t.doc.resolve(e),i=St.empty,c=St.empty;for(let A=a.depth,d=a.depth-s,f=s-1;A>d;A--,f--){i=St.from(a.node(A).copy(i));let u=n&&n[f];c=St.from(u?u.type.create(u.attrs,c):a.node(A).copy(c))}t.step(new ti(e,e,new Jt(i.append(c),s,s),!0))}function Mu(t,e){let s=t.resolve(e),n=s.index();return Ik(s.nodeBefore,s.nodeAfter)&&s.parent.canReplace(n,n+1)}function XI(t,e){e.content.size||t.type.compatibleContent(e.type);let s=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let a=0;a<e.childCount;a++){let i=e.child(a),c=i.type==n?t.type.schema.nodes.text:i.type;if(s=s.matchType(c),!s||!t.type.allowsMarks(i.marks))return!1}return s.validEnd}function Ik(t,e){return!!(t&&e&&!t.isLeaf&&XI(t,e))}function hb(t,e,s=-1){let n=t.resolve(e);for(let a=n.depth;;a--){let i,c,A=n.index(a);if(a==n.depth?(i=n.nodeBefore,c=n.nodeAfter):s>0?(i=n.node(a+1),A++,c=n.node(a).maybeChild(A)):(i=n.node(a).maybeChild(A-1),c=n.node(a+1)),i&&!i.isTextblock&&Ik(i,c)&&n.node(a).canReplace(A,A+1))return e;if(a==0)break;e=s<0?n.before(a):n.after(a)}}function ZI(t,e,s){let n=null,{linebreakReplacement:a}=t.doc.type.schema,i=t.doc.resolve(e-s),c=i.node().type;if(a&&c.inlineContent){let u=c.whitespace=="pre",p=!!c.contentMatch.matchType(a);u&&!p?n=!1:!u&&p&&(n=!0)}let A=t.steps.length;if(n===!1){let u=t.doc.resolve(e+s);_k(t,u.node(),u.before(),A)}c.inlineContent&&Wy(t,e+s-1,c,i.node().contentMatchAt(i.index()),n==null);let d=t.mapping.slice(A),f=d.map(e-s);if(t.step(new ti(f,d.map(e+s,-1),Jt.empty,!0)),n===!0){let u=t.doc.resolve(f);Qk(t,u.node(),u.before(),t.steps.length)}return t}function e7(t,e,s){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),s))return e;if(n.parentOffset==0)for(let a=n.depth-1;a>=0;a--){let i=n.index(a);if(n.node(a).canReplaceWith(i,i,s))return n.before(a+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(let a=n.depth-1;a>=0;a--){let i=n.indexAfter(a);if(n.node(a).canReplaceWith(i,i,s))return n.after(a+1);if(i<n.node(a).childCount)return null}return null}function Ok(t,e,s){let n=t.resolve(e);if(!s.content.size)return e;let a=s.content;for(let i=0;i<s.openStart;i++)a=a.firstChild.content;for(let i=1;i<=(s.openStart==0&&s.size?2:1);i++)for(let c=n.depth;c>=0;c--){let A=c==n.depth?0:n.pos<=(n.start(c+1)+n.end(c+1))/2?-1:1,d=n.index(c)+(A>0?1:0),f=n.node(c),u=!1;if(i==1)u=f.canReplace(d,d,a);else{let p=f.contentMatchAt(d).findWrapping(a.firstChild.type);u=p&&f.canReplaceWith(d,d,p[0])}if(u)return A==0?n.pos:A<0?n.before(c+1):n.after(c+1)}return null}function fb(t,e,s=e,n=Jt.empty){if(e==s&&!n.size)return null;let a=t.resolve(e),i=t.resolve(s);return Dk(a,i,n)?new ti(e,s,n):new t7(a,i,n).fit()}function Dk(t,e,s){return!s.openStart&&!s.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),s.content)}class t7{constructor(e,s,n){this.$from=e,this.$to=s,this.unplaced=n,this.frontier=[],this.placed=St.empty;for(let a=0;a<=e.depth;a++){let i=e.node(a);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(a))})}for(let a=e.depth;a>0;a--)this.placed=St.from(e.node(a).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),s=this.placed.size-this.depth-this.$from.depth,n=this.$from,a=this.close(e<0?this.$to:n.doc.resolve(e));if(!a)return null;let i=this.placed,c=n.depth,A=a.depth;for(;c&&A&&i.childCount==1;)i=i.firstChild.content,c--,A--;let d=new Jt(i,c,A);return e>-1?new ri(n.pos,e,this.$to.pos,this.$to.end(),d,s):d.size||n.pos!=this.$to.pos?new ti(n.pos,a.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let s=this.unplaced.content,n=0,a=this.unplaced.openEnd;n<e;n++){let i=s.firstChild;if(s.childCount>1&&(a=0),i.type.spec.isolating&&a<=n){e=n;break}s=i.content}for(let s=1;s<=2;s++)for(let n=s==1?e:this.unplaced.openStart;n>=0;n--){let a,i=null;n?(i=J1(this.unplaced.content,n-1).firstChild,a=i.content):a=this.unplaced.content;let c=a.firstChild;for(let A=this.depth;A>=0;A--){let{type:d,match:f}=this.frontier[A],u,p=null;if(s==1&&(c?f.matchType(c.type)||(p=f.fillBefore(St.from(c),!1)):i&&d.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:A,parent:i,inject:p};if(s==2&&c&&(u=f.findWrapping(c.type)))return{sliceDepth:n,frontierDepth:A,parent:i,wrap:u};if(i&&f.matchType(i.type))break}}}openMore(){let{content:e,openStart:s,openEnd:n}=this.unplaced,a=J1(e,s);return!a.childCount||a.firstChild.isLeaf?!1:(this.unplaced=new Jt(e,s+1,Math.max(n,a.size+s>=e.size-n?s+1:0)),!0)}dropNode(){let{content:e,openStart:s,openEnd:n}=this.unplaced,a=J1(e,s);if(a.childCount<=1&&s>0){let i=e.size-s<=s+a.size;this.unplaced=new Jt(sp(e,s-1,1),s-1,i?s-1:n)}else this.unplaced=new Jt(sp(e,s,1),s,n)}placeNodes({sliceDepth:e,frontierDepth:s,parent:n,inject:a,wrap:i}){for(;this.depth>s;)this.closeFrontierNode();if(i)for(let w=0;w<i.length;w++)this.openFrontierNode(i[w]);let c=this.unplaced,A=n?n.content:c.content,d=c.openStart-e,f=0,u=[],{match:p,type:x}=this.frontier[s];if(a){for(let w=0;w<a.childCount;w++)u.push(a.child(w));p=p.matchFragment(a)}let m=A.size+e-(c.content.size-c.openEnd);for(;f<A.childCount;){let w=A.child(f),S=p.matchType(w.type);if(!S)break;f++,(f>1||d==0||w.content.size)&&(p=S,u.push(Rk(w.mark(x.allowedMarks(w.marks)),f==1?d:0,f==A.childCount?m:-1)))}let j=f==A.childCount;j||(m=-1),this.placed=rp(this.placed,s,St.from(u)),this.frontier[s].match=p,j&&m<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,S=A;w<m;w++){let C=S.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),S=C.content}this.unplaced=j?e==0?Jt.empty:new Jt(sp(c.content,e-1,1),e-1,m<0?c.openEnd:e-1):new Jt(sp(c.content,e,f),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],s;if(!e.type.isTextblock||!W1(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(s=this.findCloseLevel(this.$to))&&s.depth==this.depth)return-1;let{depth:n}=this.$to,a=this.$to.after(n);for(;n>1&&a==this.$to.end(--n);)++a;return a}findCloseLevel(e){e:for(let s=Math.min(this.depth,e.depth);s>=0;s--){let{match:n,type:a}=this.frontier[s],i=s<e.depth&&e.end(s+1)==e.pos+(e.depth-(s+1)),c=W1(e,s,a,n,i);if(c){for(let A=s-1;A>=0;A--){let{match:d,type:f}=this.frontier[A],u=W1(e,A,f,d,!0);if(!u||u.childCount)continue e}return{depth:s,fit:c,move:i?e.doc.resolve(e.after(s+1)):e}}}}close(e){let s=this.findCloseLevel(e);if(!s)return null;for(;this.depth>s.depth;)this.closeFrontierNode();s.fit.childCount&&(this.placed=rp(this.placed,s.depth,s.fit)),e=s.move;for(let n=s.depth+1;n<=e.depth;n++){let a=e.node(n),i=a.type.contentMatch.fillBefore(a.content,!0,e.index(n));this.openFrontierNode(a.type,a.attrs,i)}return e}openFrontierNode(e,s=null,n){let a=this.frontier[this.depth];a.match=a.match.matchType(e),this.placed=rp(this.placed,this.depth,St.from(e.create(s,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let s=this.frontier.pop().match.fillBefore(St.empty,!0);s.childCount&&(this.placed=rp(this.placed,this.frontier.length,s))}}function sp(t,e,s){return e==0?t.cutByIndex(s,t.childCount):t.replaceChild(0,t.firstChild.copy(sp(t.firstChild.content,e-1,s)))}function rp(t,e,s){return e==0?t.append(s):t.replaceChild(t.childCount-1,t.lastChild.copy(rp(t.lastChild.content,e-1,s)))}function J1(t,e){for(let s=0;s<e;s++)t=t.firstChild.content;return t}function Rk(t,e,s){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,Rk(n.firstChild,e-1,n.childCount==1?s-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),s<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(St.empty,!0)))),t.copy(n)}function W1(t,e,s,n,a){let i=t.node(e),c=a?t.indexAfter(e):t.index(e);if(c==i.childCount&&!s.compatibleContent(i.type))return null;let A=n.fillBefore(i.content,!0,c);return A&&!s7(s,i.content,c)?A:null}function s7(t,e,s){for(let n=s;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function r7(t){return t.spec.defining||t.spec.definingForContent}function n7(t,e,s,n){if(!n.size)return t.deleteRange(e,s);let a=t.doc.resolve(e),i=t.doc.resolve(s);if(Dk(a,i,n))return t.step(new ti(e,s,n));let c=Pk(a,i);c[c.length-1]==0&&c.pop();let A=-(a.depth+1);c.unshift(A);for(let x=a.depth,m=a.pos-1;x>0;x--,m--){let j=a.node(x).type.spec;if(j.defining||j.definingAsContext||j.isolating)break;c.indexOf(x)>-1?A=x:a.before(x)==m&&c.splice(1,0,-x)}let d=c.indexOf(A),f=[],u=n.openStart;for(let x=n.content,m=0;;m++){let j=x.firstChild;if(f.push(j),m==n.openStart)break;x=j.content}for(let x=u-1;x>=0;x--){let m=f[x],j=r7(m.type);if(j&&!m.sameMarkup(a.node(Math.abs(A)-1)))u=x;else if(j||!m.type.isTextblock)break}for(let x=n.openStart;x>=0;x--){let m=(x+u+1)%(n.openStart+1),j=f[m];if(j)for(let w=0;w<c.length;w++){let S=c[(w+d)%c.length],C=!0;S<0&&(C=!1,S=-S);let F=a.node(S-1),U=a.index(S-1);if(F.canReplaceWith(U,U,j.type,j.marks))return t.replace(a.before(S),C?i.after(S):s,new Jt(Hk(n.content,0,n.openStart,m),m,n.openEnd))}}let p=t.steps.length;for(let x=c.length-1;x>=0&&(t.replace(e,s,n),!(t.steps.length>p));x--){let m=c[x];m<0||(e=a.before(m),s=i.after(m))}}function Hk(t,e,s,n,a){if(e<s){let i=t.firstChild;t=t.replaceChild(0,i.copy(Hk(i.content,e+1,s,n,i)))}if(e>n){let i=a.contentMatchAt(0),c=i.fillBefore(t).append(t);t=c.append(i.matchFragment(c).fillBefore(St.empty,!0))}return t}function a7(t,e,s,n){if(!n.isInline&&e==s&&t.doc.resolve(e).parent.content.size){let a=e7(t.doc,e,n.type);a!=null&&(e=s=a)}t.replaceRange(e,s,new Jt(St.from(n),0,0))}function i7(t,e,s){let n=t.doc.resolve(e),a=t.doc.resolve(s),i=Pk(n,a);for(let c=0;c<i.length;c++){let A=i[c],d=c==i.length-1;if(d&&A==0||n.node(A).type.contentMatch.validEnd)return t.delete(n.start(A),a.end(A));if(A>0&&(d||n.node(A-1).canReplace(n.index(A-1),a.indexAfter(A-1))))return t.delete(n.before(A),a.after(A))}for(let c=1;c<=n.depth&&c<=a.depth;c++)if(e-n.start(c)==n.depth-c&&s>n.end(c)&&a.end(c)-s!=a.depth-c&&n.start(c-1)==a.start(c-1)&&n.node(c-1).canReplace(n.index(c-1),a.index(c-1)))return t.delete(n.before(c),s);t.delete(e,s)}function Pk(t,e){let s=[],n=Math.min(t.depth,e.depth);for(let a=n;a>=0;a--){let i=t.start(a);if(i<t.pos-(t.depth-a)||e.end(a)>e.pos+(e.depth-a)||t.node(a).type.spec.isolating||e.node(a).type.spec.isolating)break;(i==e.start(a)||a==t.depth&&a==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&a&&e.start(a-1)==i-1)&&s.push(a)}return s}class Qf extends rl{constructor(e,s,n){super(),this.pos=e,this.attr=s,this.value=n}apply(e){let s=e.nodeAt(this.pos);if(!s)return Ea.fail("No node at attribute step's position");let n=Object.create(null);for(let i in s.attrs)n[i]=s.attrs[i];n[this.attr]=this.value;let a=s.type.create(n,null,s.marks);return Ea.fromReplace(e,this.pos,this.pos+1,new Jt(St.from(a),0,s.isLeaf?0:1))}getMap(){return vo.empty}invert(e){return new Qf(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let s=e.mapResult(this.pos,1);return s.deletedAfter?null:new Qf(s.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,s){if(typeof s.pos!="number"||typeof s.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Qf(s.pos,s.attr,s.value)}}rl.jsonID("attr",Qf);class Qp extends rl{constructor(e,s){super(),this.attr=e,this.value=s}apply(e){let s=Object.create(null);for(let a in e.attrs)s[a]=e.attrs[a];s[this.attr]=this.value;let n=e.type.create(s,e.content,e.marks);return Ea.ok(n)}getMap(){return vo.empty}invert(e){return new Qp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,s){if(typeof s.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Qp(s.attr,s.value)}}rl.jsonID("docAttr",Qp);let zf=class extends Error{};zf=function t(e){let s=Error.call(this,e);return s.__proto__=t.prototype,s};zf.prototype=Object.create(Error.prototype);zf.prototype.constructor=zf;zf.prototype.name="TransformError";class zk{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Mp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let s=this.maybeStep(e);if(s.failed)throw new zf(s.failed);return this}maybeStep(e){let s=e.apply(this.doc);return s.failed||this.addStep(e,s.doc),s}get docChanged(){return this.steps.length>0}addStep(e,s){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=s}replace(e,s=e,n=Jt.empty){let a=fb(this.doc,e,s,n);return a&&this.step(a),this}replaceWith(e,s,n){return this.replace(e,s,new Jt(St.from(n),0,0))}delete(e,s){return this.replace(e,s,Jt.empty)}insert(e,s){return this.replaceWith(e,e,s)}replaceRange(e,s,n){return n7(this,e,s,n),this}replaceRangeWith(e,s,n){return a7(this,e,s,n),this}deleteRange(e,s){return i7(this,e,s),this}lift(e,s){return KI(this,e,s),this}join(e,s=1){return ZI(this,e,s),this}wrap(e,s){return GI(this,e,s),this}setBlockType(e,s=e,n,a=null){return qI(this,e,s,n,a),this}setNodeMarkup(e,s,n=null,a){return JI(this,e,s,n,a),this}setNodeAttribute(e,s,n){return this.step(new Qf(e,s,n)),this}setDocAttribute(e,s){return this.step(new Qp(e,s)),this}addNodeMark(e,s){return this.step(new xu(e,s)),this}removeNodeMark(e,s){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(s instanceof an)s.isInSet(n.marks)&&this.step(new Rh(e,s));else{let a=n.marks,i,c=[];for(;i=s.isInSet(a);)c.push(new Rh(e,i)),a=i.removeFromSet(a);for(let A=c.length-1;A>=0;A--)this.step(c[A])}return this}split(e,s=1,n){return WI(this,e,s,n),this}addMark(e,s,n){return HI(this,e,s,n),this}removeMark(e,s,n){return PI(this,e,s,n),this}clearIncompatible(e,s,n){return Wy(this,e,s,n),this}}const X1=Object.create(null);class Vs{constructor(e,s,n){this.$anchor=e,this.$head=s,this.ranges=n||[new l7(e.min(s),e.max(s))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let s=0;s<e.length;s++)if(e[s].$from.pos!=e[s].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,s=Jt.empty){let n=s.content.lastChild,a=null;for(let A=0;A<s.openEnd;A++)a=n,n=n.lastChild;let i=e.steps.length,c=this.ranges;for(let A=0;A<c.length;A++){let{$from:d,$to:f}=c[A],u=e.mapping.slice(i);e.replaceRange(u.map(d.pos),u.map(f.pos),A?Jt.empty:s),A==0&&sN(e,i,(n?n.isInline:a&&a.isTextblock)?-1:1)}}replaceWith(e,s){let n=e.steps.length,a=this.ranges;for(let i=0;i<a.length;i++){let{$from:c,$to:A}=a[i],d=e.mapping.slice(n),f=d.map(c.pos),u=d.map(A.pos);i?e.deleteRange(f,u):(e.replaceRangeWith(f,u,s),sN(e,n,s.isInline?-1:1))}}static findFrom(e,s,n=!1){let a=e.parent.inlineContent?new Fs(e):Tf(e.node(0),e.parent,e.pos,e.index(),s,n);if(a)return a;for(let i=e.depth-1;i>=0;i--){let c=s<0?Tf(e.node(0),e.node(i),e.before(i+1),e.index(i),s,n):Tf(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,s,n);if(c)return c}return null}static near(e,s=1){return this.findFrom(e,s)||this.findFrom(e,-s)||new Bo(e.node(0))}static atStart(e){return Tf(e,e,0,0,1)||new Bo(e)}static atEnd(e){return Tf(e,e,e.content.size,e.childCount,-1)||new Bo(e)}static fromJSON(e,s){if(!s||!s.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=X1[s.type];if(!n)throw new RangeError(`No selection type ${s.type} defined`);return n.fromJSON(e,s)}static jsonID(e,s){if(e in X1)throw new RangeError("Duplicate use of selection JSON ID "+e);return X1[e]=s,s.prototype.jsonID=e,s}getBookmark(){return Fs.between(this.$anchor,this.$head).getBookmark()}}Vs.prototype.visible=!0;class l7{constructor(e,s){this.$from=e,this.$to=s}}let eN=!1;function tN(t){!eN&&!t.parent.inlineContent&&(eN=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Fs extends Vs{constructor(e,s=e){tN(e),tN(s),super(e,s)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,s){let n=e.resolve(s.map(this.head));if(!n.parent.inlineContent)return Vs.near(n);let a=e.resolve(s.map(this.anchor));return new Fs(a.parent.inlineContent?a:n,n)}replace(e,s=Jt.empty){if(super.replace(e,s),s==Jt.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof Fs&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new pb(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,s){if(typeof s.anchor!="number"||typeof s.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Fs(e.resolve(s.anchor),e.resolve(s.head))}static create(e,s,n=s){let a=e.resolve(s);return new this(a,n==s?a:e.resolve(n))}static between(e,s,n){let a=e.pos-s.pos;if((!n||a)&&(n=a>=0?1:-1),!s.parent.inlineContent){let i=Vs.findFrom(s,n,!0)||Vs.findFrom(s,-n,!0);if(i)s=i.$head;else return Vs.near(s,n)}return e.parent.inlineContent||(a==0?e=s:(e=(Vs.findFrom(e,-n,!0)||Vs.findFrom(e,n,!0)).$anchor,e.pos<s.pos!=a<0&&(e=s))),new Fs(e,s)}}Vs.jsonID("text",Fs);class pb{constructor(e,s){this.anchor=e,this.head=s}map(e){return new pb(e.map(this.anchor),e.map(this.head))}resolve(e){return Fs.between(e.resolve(this.anchor),e.resolve(this.head))}}class ys extends Vs{constructor(e){let s=e.nodeAfter,n=e.node(0).resolve(e.pos+s.nodeSize);super(e,n),this.node=s}map(e,s){let{deleted:n,pos:a}=s.mapResult(this.anchor),i=e.resolve(a);return n?Vs.near(i):new ys(i)}content(){return new Jt(St.from(this.node),0,0)}eq(e){return e instanceof ys&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Zy(this.anchor)}static fromJSON(e,s){if(typeof s.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ys(e.resolve(s.anchor))}static create(e,s){return new ys(e.resolve(s))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ys.prototype.visible=!1;Vs.jsonID("node",ys);class Zy{constructor(e){this.anchor=e}map(e){let{deleted:s,pos:n}=e.mapResult(this.anchor);return s?new pb(n,n):new Zy(n)}resolve(e){let s=e.resolve(this.anchor),n=s.nodeAfter;return n&&ys.isSelectable(n)?new ys(s):Vs.near(s)}}class Bo extends Vs{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,s=Jt.empty){if(s==Jt.empty){e.delete(0,e.doc.content.size);let n=Vs.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,s)}toJSON(){return{type:"all"}}static fromJSON(e){return new Bo(e)}map(e){return new Bo(e)}eq(e){return e instanceof Bo}getBookmark(){return o7}}Vs.jsonID("all",Bo);const o7={map(){return this},resolve(t){return new Bo(t)}};function Tf(t,e,s,n,a,i=!1){if(e.inlineContent)return Fs.create(t,s);for(let c=n-(a>0?0:1);a>0?c<e.childCount:c>=0;c+=a){let A=e.child(c);if(A.isAtom){if(!i&&ys.isSelectable(A))return ys.create(t,s-(a<0?A.nodeSize:0))}else{let d=Tf(t,A,s+a,a<0?A.childCount:0,a,i);if(d)return d}s+=A.nodeSize*a}return null}function sN(t,e,s){let n=t.steps.length-1;if(n<e)return;let a=t.steps[n];if(!(a instanceof ti||a instanceof ri))return;let i=t.mapping.maps[n],c;i.forEach((A,d,f,u)=>{c==null&&(c=u)}),t.setSelection(Vs.near(t.doc.resolve(c),s))}const rN=1,cg=2,nN=4;class c7 extends zk{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|rN)&~cg,this.storedMarks=null,this}get selectionSet(){return(this.updated&rN)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=cg,this}ensureMarks(e){return an.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&cg)>0}addStep(e,s){super.addStep(e,s),this.updated=this.updated&~cg,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,s=!0){let n=this.selection;return s&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||an.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,s,n){let a=this.doc.type.schema;if(s==null)return e?this.replaceSelectionWith(a.text(e),!0):this.deleteSelection();{if(n==null&&(n=s),!e)return this.deleteRange(s,n);let i=this.storedMarks;if(!i){let c=this.doc.resolve(s);i=n==s?c.marks():c.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(s,n,a.text(e,i)),!this.selection.empty&&this.selection.to==s+e.length&&this.setSelection(Vs.near(this.selection.$to)),this}}setMeta(e,s){return this.meta[typeof e=="string"?e:e.key]=s,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=nN,this}get scrolledIntoView(){return(this.updated&nN)>0}}function aN(t,e){return!e||!t?t:t.bind(e)}class np{constructor(e,s,n){this.name=e,this.init=aN(s.init,n),this.apply=aN(s.apply,n)}}const A7=[new np("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new np("selection",{init(t,e){return t.selection||Vs.atStart(e.doc)},apply(t){return t.selection}}),new np("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,s,n){return n.selection.$cursor?t.storedMarks:null}}),new np("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Z1{constructor(e,s){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=A7.slice(),s&&s.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new np(n.key,n.spec.state,n))})}}class Mf{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,s=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=s){let a=this.config.plugins[n];if(a.spec.filterTransaction&&!a.spec.filterTransaction.call(a,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let s=[e],n=this.applyInner(e),a=null;for(;;){let i=!1;for(let c=0;c<this.config.plugins.length;c++){let A=this.config.plugins[c];if(A.spec.appendTransaction){let d=a?a[c].n:0,f=a?a[c].state:this,u=d<s.length&&A.spec.appendTransaction.call(A,d?s.slice(d):s,f,n);if(u&&n.filterTransaction(u,c)){if(u.setMeta("appendedTransaction",e),!a){a=[];for(let p=0;p<this.config.plugins.length;p++)a.push(p<c?{state:n,n:s.length}:{state:this,n:0})}s.push(u),n=n.applyInner(u),i=!0}a&&(a[c]={state:n,n:s.length})}}if(!i)return{state:n,transactions:s}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let s=new Mf(this.config),n=this.config.fields;for(let a=0;a<n.length;a++){let i=n[a];s[i.name]=i.apply(e,this[i.name],this,s)}return s}get tr(){return new c7(this)}static create(e){let s=new Z1(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Mf(s);for(let a=0;a<s.fields.length;a++)n[s.fields[a].name]=s.fields[a].init(e,n);return n}reconfigure(e){let s=new Z1(this.schema,e.plugins),n=s.fields,a=new Mf(s);for(let i=0;i<n.length;i++){let c=n[i].name;a[c]=this.hasOwnProperty(c)?this[c]:n[i].init(e,a)}return a}toJSON(e){let s={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(s.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let a=e[n],i=a.spec.state;i&&i.toJSON&&(s[n]=i.toJSON.call(a,this[a.key]))}return s}static fromJSON(e,s,n){if(!s)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let a=new Z1(e.schema,e.plugins),i=new Mf(a);return a.fields.forEach(c=>{if(c.name=="doc")i.doc=ju.fromJSON(e.schema,s.doc);else if(c.name=="selection")i.selection=Vs.fromJSON(i.doc,s.selection);else if(c.name=="storedMarks")s.storedMarks&&(i.storedMarks=s.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let A in n){let d=n[A],f=d.spec.state;if(d.key==c.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(s,A)){i[c.name]=f.fromJSON.call(d,e,s[A],i);return}}i[c.name]=c.init(e,i)}}),i}}function Kk(t,e,s){for(let n in t){let a=t[n];a instanceof Function?a=a.bind(e):n=="handleDOMEvents"&&(a=Kk(a,e,{})),s[n]=a}return s}class Vn{constructor(e){this.spec=e,this.props={},e.props&&Kk(e.props,this,this.props),this.key=e.key?e.key.key:Vk("plugin")}getState(e){return e[this.key]}}const ev=Object.create(null);function Vk(t){return t in ev?t+"$"+ ++ev[t]:(ev[t]=0,t+"$")}class Ka{constructor(e="key"){this.key=Vk(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const e2=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function $k(t,e){let{$cursor:s}=t.selection;return!s||(e?!e.endOfTextblock("backward",t):s.parentOffset>0)?null:s}const Gk=(t,e,s)=>{let n=$k(t,s);if(!n)return!1;let a=t2(n);if(!a){let c=n.blockRange(),A=c&&s0(c);return A==null?!1:(e&&e(t.tr.lift(c,A).scrollIntoView()),!0)}let i=a.nodeBefore;if(sC(t,a,e,-1))return!0;if(n.parent.content.size==0&&(Kf(i,"end")||ys.isSelectable(i)))for(let c=n.depth;;c--){let A=fb(t.doc,n.before(c),n.after(c),Jt.empty);if(A&&A.slice.size<A.to-A.from){if(e){let d=t.tr.step(A);d.setSelection(Kf(i,"end")?Vs.findFrom(d.doc.resolve(d.mapping.map(a.pos,-1)),-1):ys.create(d.doc,a.pos-i.nodeSize)),e(d.scrollIntoView())}return!0}if(c==1||n.node(c-1).childCount>1)break}return i.isAtom&&a.depth==n.depth-1?(e&&e(t.tr.delete(a.pos-i.nodeSize,a.pos).scrollIntoView()),!0):!1},d7=(t,e,s)=>{let n=$k(t,s);if(!n)return!1;let a=t2(n);return a?qk(t,a,e):!1},u7=(t,e,s)=>{let n=Jk(t,s);if(!n)return!1;let a=s2(n);return a?qk(t,a,e):!1};function qk(t,e,s){let n=e.nodeBefore,a=n,i=e.pos-1;for(;!a.isTextblock;i--){if(a.type.spec.isolating)return!1;let u=a.lastChild;if(!u)return!1;a=u}let c=e.nodeAfter,A=c,d=e.pos+1;for(;!A.isTextblock;d++){if(A.type.spec.isolating)return!1;let u=A.firstChild;if(!u)return!1;A=u}let f=fb(t.doc,i,d,Jt.empty);if(!f||f.from!=i||f instanceof ti&&f.slice.size>=d-i)return!1;if(s){let u=t.tr.step(f);u.setSelection(Fs.create(u.doc,i)),s(u.scrollIntoView())}return!0}function Kf(t,e,s=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(s&&n.childCount!=1)return!1}return!1}const Yk=(t,e,s)=>{let{$head:n,empty:a}=t.selection,i=n;if(!a)return!1;if(n.parent.isTextblock){if(s?!s.endOfTextblock("backward",t):n.parentOffset>0)return!1;i=t2(n)}let c=i&&i.nodeBefore;return!c||!ys.isSelectable(c)?!1:(e&&e(t.tr.setSelection(ys.create(t.doc,i.pos-c.nodeSize)).scrollIntoView()),!0)};function t2(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Jk(t,e){let{$cursor:s}=t.selection;return!s||(e?!e.endOfTextblock("forward",t):s.parentOffset<s.parent.content.size)?null:s}const Wk=(t,e,s)=>{let n=Jk(t,s);if(!n)return!1;let a=s2(n);if(!a)return!1;let i=a.nodeAfter;if(sC(t,a,e,1))return!0;if(n.parent.content.size==0&&(Kf(i,"start")||ys.isSelectable(i))){let c=fb(t.doc,n.before(),n.after(),Jt.empty);if(c&&c.slice.size<c.to-c.from){if(e){let A=t.tr.step(c);A.setSelection(Kf(i,"start")?Vs.findFrom(A.doc.resolve(A.mapping.map(a.pos)),1):ys.create(A.doc,A.mapping.map(a.pos))),e(A.scrollIntoView())}return!0}}return i.isAtom&&a.depth==n.depth-1?(e&&e(t.tr.delete(a.pos,a.pos+i.nodeSize).scrollIntoView()),!0):!1},Xk=(t,e,s)=>{let{$head:n,empty:a}=t.selection,i=n;if(!a)return!1;if(n.parent.isTextblock){if(s?!s.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;i=s2(n)}let c=i&&i.nodeAfter;return!c||!ys.isSelectable(c)?!1:(e&&e(t.tr.setSelection(ys.create(t.doc,i.pos)).scrollIntoView()),!0)};function s2(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let s=t.node(e);if(t.index(e)+1<s.childCount)return t.doc.resolve(t.after(e+1));if(s.type.spec.isolating)break}return null}const h7=(t,e)=>{let s=t.selection,n=s instanceof ys,a;if(n){if(s.node.isTextblock||!Mu(t.doc,s.from))return!1;a=s.from}else if(a=hb(t.doc,s.from,-1),a==null)return!1;if(e){let i=t.tr.join(a);n&&i.setSelection(ys.create(i.doc,a-t.doc.resolve(a).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},f7=(t,e)=>{let s=t.selection,n;if(s instanceof ys){if(s.node.isTextblock||!Mu(t.doc,s.to))return!1;n=s.to}else if(n=hb(t.doc,s.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},p7=(t,e)=>{let{$from:s,$to:n}=t.selection,a=s.blockRange(n),i=a&&s0(a);return i==null?!1:(e&&e(t.tr.lift(a,i).scrollIntoView()),!0)},Zk=(t,e)=>{let{$head:s,$anchor:n}=t.selection;return!s.parent.type.spec.code||!s.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function r2(t){for(let e=0;e<t.edgeCount;e++){let{type:s}=t.edge(e);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}const m7=(t,e)=>{let{$head:s,$anchor:n}=t.selection;if(!s.parent.type.spec.code||!s.sameParent(n))return!1;let a=s.node(-1),i=s.indexAfter(-1),c=r2(a.contentMatchAt(i));if(!c||!a.canReplaceWith(i,i,c))return!1;if(e){let A=s.after(),d=t.tr.replaceWith(A,A,c.createAndFill());d.setSelection(Vs.near(d.doc.resolve(A),1)),e(d.scrollIntoView())}return!0},eC=(t,e)=>{let s=t.selection,{$from:n,$to:a}=s;if(s instanceof Bo||n.parent.inlineContent||a.parent.inlineContent)return!1;let i=r2(a.parent.contentMatchAt(a.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let c=(!n.parentOffset&&a.index()<a.parent.childCount?n:a).pos,A=t.tr.insert(c,i.createAndFill());A.setSelection(Fs.create(A.doc,c+1)),e(A.scrollIntoView())}return!0},tC=(t,e)=>{let{$cursor:s}=t.selection;if(!s||s.parent.content.size)return!1;if(s.depth>1&&s.after()!=s.end(-1)){let i=s.before();if(fd(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let n=s.blockRange(),a=n&&s0(n);return a==null?!1:(e&&e(t.tr.lift(n,a).scrollIntoView()),!0)};function g7(t){return(e,s)=>{let{$from:n,$to:a}=e.selection;if(e.selection instanceof ys&&e.selection.node.isBlock)return!n.parentOffset||!fd(e.doc,n.pos)?!1:(s&&s(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let i=[],c,A,d=!1,f=!1;for(let m=n.depth;;m--)if(n.node(m).isBlock){d=n.end(m)==n.pos+(n.depth-m),f=n.start(m)==n.pos-(n.depth-m),A=r2(n.node(m-1).contentMatchAt(n.indexAfter(m-1))),i.unshift(d&&A?{type:A}:null),c=m;break}else{if(m==1)return!1;i.unshift(null)}let u=e.tr;(e.selection instanceof Fs||e.selection instanceof Bo)&&u.deleteSelection();let p=u.mapping.map(n.pos),x=fd(u.doc,p,i.length,i);if(x||(i[0]=A?{type:A}:null,x=fd(u.doc,p,i.length,i)),!x)return!1;if(u.split(p,i.length,i),!d&&f&&n.node(c).type!=A){let m=u.mapping.map(n.before(c)),j=u.doc.resolve(m);A&&n.node(c-1).canReplaceWith(j.index(),j.index()+1,A)&&u.setNodeMarkup(u.mapping.map(n.before(c)),A)}return s&&s(u.scrollIntoView()),!0}}const x7=g7(),b7=(t,e)=>{let{$from:s,to:n}=t.selection,a,i=s.sharedDepth(n);return i==0?!1:(a=s.before(i),e&&e(t.tr.setSelection(ys.create(t.doc,a))),!0)};function v7(t,e,s){let n=e.nodeBefore,a=e.nodeAfter,i=e.index();return!n||!a||!n.type.compatibleContent(a.type)?!1:!n.content.size&&e.parent.canReplace(i-1,i)?(s&&s(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(a.isTextblock||Mu(t.doc,e.pos))?!1:(s&&s(t.tr.join(e.pos).scrollIntoView()),!0)}function sC(t,e,s,n){let a=e.nodeBefore,i=e.nodeAfter,c,A,d=a.type.spec.isolating||i.type.spec.isolating;if(!d&&v7(t,e,s))return!0;let f=!d&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(c=(A=a.contentMatchAt(a.childCount)).findWrapping(i.type))&&A.matchType(c[0]||i.type).validEnd){if(s){let m=e.pos+i.nodeSize,j=St.empty;for(let C=c.length-1;C>=0;C--)j=St.from(c[C].create(null,j));j=St.from(a.copy(j));let w=t.tr.step(new ri(e.pos-1,m,e.pos,m,new Jt(j,1,0),c.length,!0)),S=w.doc.resolve(m+2*c.length);S.nodeAfter&&S.nodeAfter.type==a.type&&Mu(w.doc,S.pos)&&w.join(S.pos),s(w.scrollIntoView())}return!0}let u=i.type.spec.isolating||n>0&&d?null:Vs.findFrom(e,1),p=u&&u.$from.blockRange(u.$to),x=p&&s0(p);if(x!=null&&x>=e.depth)return s&&s(t.tr.lift(p,x).scrollIntoView()),!0;if(f&&Kf(i,"start",!0)&&Kf(a,"end")){let m=a,j=[];for(;j.push(m),!m.isTextblock;)m=m.lastChild;let w=i,S=1;for(;!w.isTextblock;w=w.firstChild)S++;if(m.canReplace(m.childCount,m.childCount,w.content)){if(s){let C=St.empty;for(let U=j.length-1;U>=0;U--)C=St.from(j[U].copy(C));let F=t.tr.step(new ri(e.pos-j.length,e.pos+i.nodeSize,e.pos+S,e.pos+i.nodeSize-S,new Jt(C,j.length,0),0,!0));s(F.scrollIntoView())}return!0}}return!1}function rC(t){return function(e,s){let n=e.selection,a=t<0?n.$from:n.$to,i=a.depth;for(;a.node(i).isInline;){if(!i)return!1;i--}return a.node(i).isTextblock?(s&&s(e.tr.setSelection(Fs.create(e.doc,t<0?a.start(i):a.end(i)))),!0):!1}}const y7=rC(-1),w7=rC(1);function j7(t,e=null){return function(s,n){let{$from:a,$to:i}=s.selection,c=a.blockRange(i),A=c&&Xy(c,t,e);return A?(n&&n(s.tr.wrap(c,A).scrollIntoView()),!0):!1}}function iN(t,e=null){return function(s,n){let a=!1;for(let i=0;i<s.selection.ranges.length&&!a;i++){let{$from:{pos:c},$to:{pos:A}}=s.selection.ranges[i];s.doc.nodesBetween(c,A,(d,f)=>{if(a)return!1;if(!(!d.isTextblock||d.hasMarkup(t,e)))if(d.type==t)a=!0;else{let u=s.doc.resolve(f),p=u.index();a=u.parent.canReplaceWith(p,p+1,t)}})}if(!a)return!1;if(n){let i=s.tr;for(let c=0;c<s.selection.ranges.length;c++){let{$from:{pos:A},$to:{pos:d}}=s.selection.ranges[c];i.setBlockType(A,d,t,e)}n(i.scrollIntoView())}return!0}}function n2(...t){return function(e,s,n){for(let a=0;a<t.length;a++)if(t[a](e,s,n))return!0;return!1}}n2(e2,Gk,Yk);n2(e2,Wk,Xk);n2(Zk,eC,tC,x7);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function N7(t,e=null){return function(s,n){let{$from:a,$to:i}=s.selection,c=a.blockRange(i);if(!c)return!1;let A=n?s.tr:null;return B7(A,c,t,e)?(n&&n(A.scrollIntoView()),!0):!1}}function B7(t,e,s,n=null){let a=!1,i=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(s)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=c.resolve(e.start-2);i=new ix(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new ix(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),a=!0}let A=Xy(i,s,n,e);return A?(t&&k7(t,e,A,a,s),!0):!1}function k7(t,e,s,n,a){let i=St.empty;for(let u=s.length-1;u>=0;u--)i=St.from(s[u].type.create(s[u].attrs,i));t.step(new ri(e.start-(n?2:0),e.end,e.start,e.end,new Jt(i,0,0),s.length,!0));let c=0;for(let u=0;u<s.length;u++)s[u].type==a&&(c=u+1);let A=s.length-c,d=e.start+s.length-(n?2:0),f=e.parent;for(let u=e.startIndex,p=e.endIndex,x=!0;u<p;u++,x=!1)!x&&fd(t.doc,d,A)&&(t.split(d,A),d+=2*A),d+=f.child(u).nodeSize;return t}function C7(t){return function(e,s){let{$from:n,$to:a}=e.selection,i=n.blockRange(a,c=>c.childCount>0&&c.firstChild.type==t);return i?s?n.node(i.depth-1).type==t?S7(e,s,t,i):E7(e,s,i):!0:!1}}function S7(t,e,s,n){let a=t.tr,i=n.end,c=n.$to.end(n.depth);i<c&&(a.step(new ri(i-1,c,i,c,new Jt(St.from(s.create(null,n.parent.copy())),1,0),1,!0)),n=new ix(a.doc.resolve(n.$from.pos),a.doc.resolve(c),n.depth));const A=s0(n);if(A==null)return!1;a.lift(n,A);let d=a.doc.resolve(a.mapping.map(i,-1)-1);return Mu(a.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&a.join(d.pos),e(a.scrollIntoView()),!0}function E7(t,e,s){let n=t.tr,a=s.parent;for(let m=s.end,j=s.endIndex-1,w=s.startIndex;j>w;j--)m-=a.child(j).nodeSize,n.delete(m-1,m+1);let i=n.doc.resolve(s.start),c=i.nodeAfter;if(n.mapping.map(s.end)!=s.start+i.nodeAfter.nodeSize)return!1;let A=s.startIndex==0,d=s.endIndex==a.childCount,f=i.node(-1),u=i.index(-1);if(!f.canReplace(u+(A?0:1),u+1,c.content.append(d?St.empty:St.from(a))))return!1;let p=i.pos,x=p+c.nodeSize;return n.step(new ri(p-(A?1:0),x+(d?1:0),p+1,x-1,new Jt((A?St.empty:St.from(a.copy(St.empty))).append(d?St.empty:St.from(a.copy(St.empty))),A?0:1,d?0:1),A?0:1)),e(n.scrollIntoView()),!0}function T7(t){return function(e,s){let{$from:n,$to:a}=e.selection,i=n.blockRange(a,f=>f.childCount>0&&f.firstChild.type==t);if(!i)return!1;let c=i.startIndex;if(c==0)return!1;let A=i.parent,d=A.child(c-1);if(d.type!=t)return!1;if(s){let f=d.lastChild&&d.lastChild.type==A.type,u=St.from(f?t.create():null),p=new Jt(St.from(t.create(null,St.from(A.type.create(null,u)))),f?3:1,0),x=i.start,m=i.end;s(e.tr.step(new ri(x-(f?3:1),m,x,m,p,1,!0)).scrollIntoView())}return!0}}const vi=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Vf=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let ry=null;const Ad=function(t,e,s){let n=ry||(ry=document.createRange());return n.setEnd(t,s??t.nodeValue.length),n.setStart(t,e||0),n},U7=function(){ry=null},Hh=function(t,e,s,n){return s&&(lN(t,e,s,n,-1)||lN(t,e,s,n,1))},F7=/^(img|br|input|textarea|hr)$/i;function lN(t,e,s,n,a){for(var i;;){if(t==s&&e==n)return!0;if(e==(a<0?0:tc(t))){let c=t.parentNode;if(!c||c.nodeType!=1||qp(t)||F7.test(t.nodeName)||t.contentEditable=="false")return!1;e=vi(t)+(a<0?0:1),t=c}else if(t.nodeType==1){let c=t.childNodes[e+(a<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((i=c.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=a;else return!1;else t=c,e=a<0?tc(t):0}else return!1}}function tc(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function L7(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=tc(t)}else if(t.parentNode&&!qp(t))e=vi(t),t=t.parentNode;else return null}}function M7(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!qp(t))e=vi(t)+1,t=t.parentNode;else return null}}function Q7(t,e,s){for(let n=e==0,a=e==tc(t);n||a;){if(t==s)return!0;let i=vi(t);if(t=t.parentNode,!t)return!1;n=n&&i==0,a=a&&i==tc(t)}}function qp(t){let e;for(let s=t;s&&!(e=s.pmViewDesc);s=s.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const mb=function(t){return t.focusNode&&Hh(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function bh(t,e){let s=document.createEvent("Event");return s.initEvent("keydown",!0,!0),s.keyCode=t,s.key=s.code=e,s}function _7(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function I7(t,e,s){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,s);if(n)return{node:n.offsetNode,offset:Math.min(tc(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,s);if(n)return{node:n.startContainer,offset:Math.min(tc(n.startContainer),n.startOffset)}}}const kA=typeof navigator<"u"?navigator:null,oN=typeof document<"u"?document:null,Qu=kA&&kA.userAgent||"",ny=/Edge\/(\d+)/.exec(Qu),nC=/MSIE \d/.exec(Qu),ay=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Qu),$l=!!(nC||ay||ny),Nu=nC?document.documentMode:ay?+ay[1]:ny?+ny[1]:0,nc=!$l&&/gecko\/(\d+)/i.test(Qu);nc&&+(/Firefox\/(\d+)/.exec(Qu)||[0,0])[1];const iy=!$l&&/Chrome\/(\d+)/.exec(Qu),si=!!iy,aC=iy?+iy[1]:0,sl=!$l&&!!kA&&/Apple Computer/.test(kA.vendor),$f=sl&&(/Mobile\/\w+/.test(Qu)||!!kA&&kA.maxTouchPoints>2),Zo=$f||(kA?/Mac/.test(kA.platform):!1),iC=kA?/Win/.test(kA.platform):!1,ud=/Android \d/.test(Qu),Yp=!!oN&&"webkitFontSmoothing"in oN.documentElement.style,O7=Yp?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function D7(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function id(t,e){return typeof t=="number"?t:t[e]}function R7(t){let e=t.getBoundingClientRect(),s=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*s,top:e.top,bottom:e.top+t.clientHeight*n}}function cN(t,e,s){let n=t.someProp("scrollThreshold")||0,a=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let c=s||t.dom;c;){if(c.nodeType!=1){c=Vf(c);continue}let A=c,d=A==i.body,f=d?D7(i):R7(A),u=0,p=0;if(e.top<f.top+id(n,"top")?p=-(f.top-e.top+id(a,"top")):e.bottom>f.bottom-id(n,"bottom")&&(p=e.bottom-e.top>f.bottom-f.top?e.top+id(a,"top")-f.top:e.bottom-f.bottom+id(a,"bottom")),e.left<f.left+id(n,"left")?u=-(f.left-e.left+id(a,"left")):e.right>f.right-id(n,"right")&&(u=e.right-f.right+id(a,"right")),u||p)if(d)i.defaultView.scrollBy(u,p);else{let m=A.scrollLeft,j=A.scrollTop;p&&(A.scrollTop+=p),u&&(A.scrollLeft+=u);let w=A.scrollLeft-m,S=A.scrollTop-j;e={left:e.left-w,top:e.top-S,right:e.right-w,bottom:e.bottom-S}}let x=d?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(x))break;c=x=="absolute"?c.offsetParent:Vf(c)}}function H7(t){let e=t.dom.getBoundingClientRect(),s=Math.max(0,e.top),n,a;for(let i=(e.left+e.right)/2,c=s+1;c<Math.min(innerHeight,e.bottom);c+=5){let A=t.root.elementFromPoint(i,c);if(!A||A==t.dom||!t.dom.contains(A))continue;let d=A.getBoundingClientRect();if(d.top>=s-20){n=A,a=d.top;break}}return{refDOM:n,refTop:a,stack:lC(t.dom)}}function lC(t){let e=[],s=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=s);n=Vf(n));return e}function P7({refDOM:t,refTop:e,stack:s}){let n=t?t.getBoundingClientRect().top:0;oC(s,n==0?0:n-e)}function oC(t,e){for(let s=0;s<t.length;s++){let{dom:n,top:a,left:i}=t[s];n.scrollTop!=a+e&&(n.scrollTop=a+e),n.scrollLeft!=i&&(n.scrollLeft=i)}}let kf=null;function z7(t){if(t.setActive)return t.setActive();if(kf)return t.focus(kf);let e=lC(t);t.focus(kf==null?{get preventScroll(){return kf={preventScroll:!0},!0}}:void 0),kf||(kf=!1,oC(e,0))}function cC(t,e){let s,n=2e8,a,i=0,c=e.top,A=e.top,d,f;for(let u=t.firstChild,p=0;u;u=u.nextSibling,p++){let x;if(u.nodeType==1)x=u.getClientRects();else if(u.nodeType==3)x=Ad(u).getClientRects();else continue;for(let m=0;m<x.length;m++){let j=x[m];if(j.top<=c&&j.bottom>=A){c=Math.max(j.bottom,c),A=Math.min(j.top,A);let w=j.left>e.left?j.left-e.left:j.right<e.left?e.left-j.right:0;if(w<n){s=u,n=w,a=w&&s.nodeType==3?{left:j.right<e.left?j.right:j.left,top:e.top}:e,u.nodeType==1&&w&&(i=p+(e.left>=(j.left+j.right)/2?1:0));continue}}else j.top>e.top&&!d&&j.left<=e.left&&j.right>=e.left&&(d=u,f={left:Math.max(j.left,Math.min(j.right,e.left)),top:j.top});!s&&(e.left>=j.right&&e.top>=j.top||e.left>=j.left&&e.top>=j.bottom)&&(i=p+1)}}return!s&&d&&(s=d,a=f,n=0),s&&s.nodeType==3?K7(s,a):!s||n&&s.nodeType==1?{node:t,offset:i}:cC(s,a)}function K7(t,e){let s=t.nodeValue.length,n=document.createRange(),a;for(let i=0;i<s;i++){n.setEnd(t,i+1),n.setStart(t,i);let c=ou(n,1);if(c.top!=c.bottom&&a2(e,c)){a={node:t,offset:i+(e.left>=(c.left+c.right)/2?1:0)};break}}return n.detach(),a||{node:t,offset:0}}function a2(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function V7(t,e){let s=t.parentNode;return s&&/^li$/i.test(s.nodeName)&&e.left<t.getBoundingClientRect().left?s:t}function $7(t,e,s){let{node:n,offset:a}=cC(e,s),i=-1;if(n.nodeType==1&&!n.firstChild){let c=n.getBoundingClientRect();i=c.left!=c.right&&s.left>(c.left+c.right)/2?1:-1}return t.docView.posFromDOM(n,a,i)}function G7(t,e,s,n){let a=-1;for(let i=e,c=!1;i!=t.dom;){let A=t.docView.nearestDesc(i,!0),d;if(!A)return null;if(A.dom.nodeType==1&&(A.node.isBlock&&A.parent||!A.contentDOM)&&((d=A.dom.getBoundingClientRect()).width||d.height)&&(A.node.isBlock&&A.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(A.dom.nodeName)&&(!c&&d.left>n.left||d.top>n.top?a=A.posBefore:(!c&&d.right<n.left||d.bottom<n.top)&&(a=A.posAfter),c=!0),!A.contentDOM&&a<0&&!A.node.isText))return(A.node.isBlock?n.top<(d.top+d.bottom)/2:n.left<(d.left+d.right)/2)?A.posBefore:A.posAfter;i=A.dom.parentNode}return a>-1?a:t.docView.posFromDOM(e,s,-1)}function AC(t,e,s){let n=t.childNodes.length;if(n&&s.top<s.bottom)for(let a=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-s.top)/(s.bottom-s.top))-2)),i=a;;){let c=t.childNodes[i];if(c.nodeType==1){let A=c.getClientRects();for(let d=0;d<A.length;d++){let f=A[d];if(a2(e,f))return AC(c,e,f)}}if((i=(i+1)%n)==a)break}return t}function q7(t,e){let s=t.dom.ownerDocument,n,a=0,i=I7(s,e.left,e.top);i&&({node:n,offset:a}=i);let c=(t.root.elementFromPoint?t.root:s).elementFromPoint(e.left,e.top),A;if(!c||!t.dom.contains(c.nodeType!=1?c.parentNode:c)){let f=t.dom.getBoundingClientRect();if(!a2(e,f)||(c=AC(t.dom,e,f),!c))return null}if(sl)for(let f=c;n&&f;f=Vf(f))f.draggable&&(n=void 0);if(c=V7(c,e),n){if(nc&&n.nodeType==1&&(a=Math.min(a,n.childNodes.length),a<n.childNodes.length)){let u=n.childNodes[a],p;u.nodeName=="IMG"&&(p=u.getBoundingClientRect()).right<=e.left&&p.bottom>e.top&&a++}let f;Yp&&a&&n.nodeType==1&&(f=n.childNodes[a-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&a--,n==t.dom&&a==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?A=t.state.doc.content.size:(a==0||n.nodeType!=1||n.childNodes[a-1].nodeName!="BR")&&(A=G7(t,n,a,e))}A==null&&(A=$7(t,c,e));let d=t.docView.nearestDesc(c,!0);return{pos:A,inside:d?d.posAtStart-d.border:-1}}function AN(t){return t.top<t.bottom||t.left<t.right}function ou(t,e){let s=t.getClientRects();if(s.length){let n=s[e<0?0:s.length-1];if(AN(n))return n}return Array.prototype.find.call(s,AN)||t.getBoundingClientRect()}const Y7=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function dC(t,e,s){let{node:n,offset:a,atom:i}=t.docView.domFromPos(e,s<0?-1:1),c=Yp||nc;if(n.nodeType==3)if(c&&(Y7.test(n.nodeValue)||(s<0?!a:a==n.nodeValue.length))){let d=ou(Ad(n,a,a),s);if(nc&&a&&/\s/.test(n.nodeValue[a-1])&&a<n.nodeValue.length){let f=ou(Ad(n,a-1,a-1),-1);if(f.top==d.top){let u=ou(Ad(n,a,a+1),-1);if(u.top!=d.top)return W0(u,u.left<f.left)}}return d}else{let d=a,f=a,u=s<0?1:-1;return s<0&&!a?(f++,u=-1):s>=0&&a==n.nodeValue.length?(d--,u=1):s<0?d--:f++,W0(ou(Ad(n,d,f),u),u<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&a&&(s<0||a==tc(n))){let d=n.childNodes[a-1];if(d.nodeType==1)return tv(d.getBoundingClientRect(),!1)}if(i==null&&a<tc(n)){let d=n.childNodes[a];if(d.nodeType==1)return tv(d.getBoundingClientRect(),!0)}return tv(n.getBoundingClientRect(),s>=0)}if(i==null&&a&&(s<0||a==tc(n))){let d=n.childNodes[a-1],f=d.nodeType==3?Ad(d,tc(d)-(c?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(f)return W0(ou(f,1),!1)}if(i==null&&a<tc(n)){let d=n.childNodes[a];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let f=d?d.nodeType==3?Ad(d,0,c?0:1):d.nodeType==1?d:null:null;if(f)return W0(ou(f,-1),!0)}return W0(ou(n.nodeType==3?Ad(n):n,-s),s>=0)}function W0(t,e){if(t.width==0)return t;let s=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:s,right:s}}function tv(t,e){if(t.height==0)return t;let s=e?t.top:t.bottom;return{top:s,bottom:s,left:t.left,right:t.right}}function uC(t,e,s){let n=t.state,a=t.root.activeElement;n!=e&&t.updateState(e),a!=t.dom&&t.focus();try{return s()}finally{n!=e&&t.updateState(n),a!=t.dom&&a&&a.focus()}}function J7(t,e,s){let n=e.selection,a=s=="up"?n.$from:n.$to;return uC(t,e,()=>{let{node:i}=t.docView.domFromPos(a.pos,s=="up"?-1:1);for(;;){let A=t.docView.nearestDesc(i,!0);if(!A)break;if(A.node.isBlock){i=A.contentDOM||A.dom;break}i=A.dom.parentNode}let c=dC(t,a.pos,1);for(let A=i.firstChild;A;A=A.nextSibling){let d;if(A.nodeType==1)d=A.getClientRects();else if(A.nodeType==3)d=Ad(A,0,A.nodeValue.length).getClientRects();else continue;for(let f=0;f<d.length;f++){let u=d[f];if(u.bottom>u.top+1&&(s=="up"?c.top-u.top>(u.bottom-c.top)*2:u.bottom-c.bottom>(c.bottom-u.top)*2))return!1}}return!0})}const W7=/[\u0590-\u08ac]/;function X7(t,e,s){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let a=n.parentOffset,i=!a,c=a==n.parent.content.size,A=t.domSelection();return A?!W7.test(n.parent.textContent)||!A.modify?s=="left"||s=="backward"?i:c:uC(t,e,()=>{let{focusNode:d,focusOffset:f,anchorNode:u,anchorOffset:p}=t.domSelectionRange(),x=A.caretBidiLevel;A.modify("move",s,"character");let m=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:j,focusOffset:w}=t.domSelectionRange(),S=j&&!m.contains(j.nodeType==1?j:j.parentNode)||d==j&&f==w;try{A.collapse(u,p),d&&(d!=u||f!=p)&&A.extend&&A.extend(d,f)}catch{}return x!=null&&(A.caretBidiLevel=x),S}):n.pos==n.start()||n.pos==n.end()}let dN=null,uN=null,hN=!1;function Z7(t,e,s){return dN==e&&uN==s?hN:(dN=e,uN=s,hN=s=="up"||s=="down"?J7(t,e,s):X7(t,e,s))}const ac=0,fN=1,yh=2,CA=3;class Jp{constructor(e,s,n,a){this.parent=e,this.children=s,this.dom=n,this.contentDOM=a,this.dirty=ac,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,s,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let s=0;s<this.children.length;s++)e+=this.children[s].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let s=0,n=this.posAtStart;;s++){let a=this.children[s];if(a==e)return n;n+=a.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,s,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let i,c;if(e==this.contentDOM)i=e.childNodes[s-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((c=i.pmViewDesc)&&c.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(c)+c.size:this.posAtStart}else{let i,c;if(e==this.contentDOM)i=e.childNodes[s];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((c=i.pmViewDesc)&&c.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(c):this.posAtEnd}let a;if(e==this.dom&&this.contentDOM)a=s>vi(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(s==0)for(let i=e;;i=i.parentNode){if(i==this.dom){a=!1;break}if(i.previousSibling)break}if(a==null&&s==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){a=!0;break}if(i.nextSibling)break}}return a??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,s=!1){for(let n=!0,a=e;a;a=a.parentNode){let i=this.getDesc(a),c;if(i&&(!s||i.node))if(n&&(c=i.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))n=!1;else return i}}getDesc(e){let s=e.pmViewDesc;for(let n=s;n;n=n.parent)if(n==this)return s}posFromDOM(e,s,n){for(let a=e;a;a=a.parentNode){let i=this.getDesc(a);if(i)return i.localPosFromDOM(e,s,n)}return-1}descAt(e){for(let s=0,n=0;s<this.children.length;s++){let a=this.children[s],i=n+a.size;if(n==e&&i!=n){for(;!a.border&&a.children.length;)for(let c=0;c<a.children.length;c++){let A=a.children[c];if(A.size){a=A;break}}return a}if(e<i)return a.descAt(e-n-a.border);n=i}}domFromPos(e,s){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,a=0;for(let i=0;n<this.children.length;n++){let c=this.children[n],A=i+c.size;if(A>e||c instanceof fC){a=e-i;break}i=A}if(a)return this.children[n].domFromPos(a-this.children[n].border,s);for(let i;n&&!(i=this.children[n-1]).size&&i instanceof hC&&i.side>=0;n--);if(s<=0){let i,c=!0;for(;i=n?this.children[n-1]:null,!(!i||i.dom.parentNode==this.contentDOM);n--,c=!1);return i&&s&&c&&!i.border&&!i.domAtom?i.domFromPos(i.size,s):{node:this.contentDOM,offset:i?vi(i.dom)+1:0}}else{let i,c=!0;for(;i=n<this.children.length?this.children[n]:null,!(!i||i.dom.parentNode==this.contentDOM);n++,c=!1);return i&&c&&!i.border&&!i.domAtom?i.domFromPos(0,s):{node:this.contentDOM,offset:i?vi(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,s,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:s,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let a=-1,i=-1;for(let c=n,A=0;;A++){let d=this.children[A],f=c+d.size;if(a==-1&&e<=f){let u=c+d.border;if(e>=u&&s<=f-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,s,u);e=c;for(let p=A;p>0;p--){let x=this.children[p-1];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(1)){a=vi(x.dom)+1;break}e-=x.size}a==-1&&(a=0)}if(a>-1&&(f>s||A==this.children.length-1)){s=f;for(let u=A+1;u<this.children.length;u++){let p=this.children[u];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){i=vi(p.dom);break}s+=p.size}i==-1&&(i=this.contentDOM.childNodes.length);break}c=f}return{node:this.contentDOM,from:e,to:s,fromOffset:a,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let s=this.children[e<0?0:this.children.length-1];return s.size==0||s.emptyChildAt(e)}domAfterPos(e){let{node:s,offset:n}=this.domFromPos(e,0);if(s.nodeType!=1||n==s.childNodes.length)throw new RangeError("No node after pos "+e);return s.childNodes[n]}setSelection(e,s,n,a=!1){let i=Math.min(e,s),c=Math.max(e,s);for(let m=0,j=0;m<this.children.length;m++){let w=this.children[m],S=j+w.size;if(i>j&&c<S)return w.setSelection(e-j-w.border,s-j-w.border,n,a);j=S}let A=this.domFromPos(e,e?-1:1),d=s==e?A:this.domFromPos(s,s?-1:1),f=n.root.getSelection(),u=n.domSelectionRange(),p=!1;if((nc||sl)&&e==s){let{node:m,offset:j}=A;if(m.nodeType==3){if(p=!!(j&&m.nodeValue[j-1]==`
`),p&&j==m.nodeValue.length)for(let w=m,S;w;w=w.parentNode){if(S=w.nextSibling){S.nodeName=="BR"&&(A=d={node:S.parentNode,offset:vi(S)+1});break}let C=w.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let w=m.childNodes[j-1];p=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(nc&&u.focusNode&&u.focusNode!=d.node&&u.focusNode.nodeType==1){let m=u.focusNode.childNodes[u.focusOffset];m&&m.contentEditable=="false"&&(a=!0)}if(!(a||p&&sl)&&Hh(A.node,A.offset,u.anchorNode,u.anchorOffset)&&Hh(d.node,d.offset,u.focusNode,u.focusOffset))return;let x=!1;if((f.extend||e==s)&&!(p&&nc)){f.collapse(A.node,A.offset);try{e!=s&&f.extend(d.node,d.offset),x=!0}catch{}}if(!x){if(e>s){let j=A;A=d,d=j}let m=document.createRange();m.setEnd(d.node,d.offset),m.setStart(A.node,A.offset),f.removeAllRanges(),f.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,s){for(let n=0,a=0;a<this.children.length;a++){let i=this.children[a],c=n+i.size;if(n==c?e<=c&&s>=n:e<c&&s>n){let A=n+i.border,d=c-i.border;if(e>=A&&s<=d){this.dirty=e==n||s==c?yh:fN,e==A&&s==d&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=CA:i.markDirty(e-A,s-A);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?yh:CA}n=c}this.dirty=yh}markParentsDirty(){let e=1;for(let s=this.parent;s;s=s.parent,e++){let n=e==1?yh:fN;s.dirty<n&&(s.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class hC extends Jp{constructor(e,s,n,a){let i,c=s.type.toDOM;if(typeof c=="function"&&(c=c(n,()=>{if(!i)return a;if(i.parent)return i.parent.posBeforeChild(i)})),!s.type.spec.raw){if(c.nodeType!=1){let A=document.createElement("span");A.appendChild(c),c=A}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=s,this.widget=s,i=this}matchesWidget(e){return this.dirty==ac&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let s=this.widget.spec.stopEvent;return s?s(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class eO extends Jp{constructor(e,s,n,a){super(e,[],s,null),this.textDOM=n,this.text=a}get size(){return this.text.length}localPosFromDOM(e,s){return e!=this.textDOM?this.posAtStart+(s?this.size:0):this.posAtStart+s}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Ph extends Jp{constructor(e,s,n,a,i){super(e,[],n,a),this.mark=s,this.spec=i}static create(e,s,n,a){let i=a.nodeViews[s.type.name],c=i&&i(s,a,n);return(!c||!c.dom)&&(c=Gh.renderSpec(document,s.type.spec.toDOM(s,n),null,s.attrs)),new Ph(e,s,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&CA||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=CA&&this.mark.eq(e)}markDirty(e,s){if(super.markDirty(e,s),this.dirty!=ac){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=ac}}slice(e,s,n){let a=Ph.create(this.parent,this.mark,!0,n),i=this.children,c=this.size;s<c&&(i=oy(i,s,c,n)),e>0&&(i=oy(i,0,e,n));for(let A=0;A<i.length;A++)i[A].parent=a;return a.children=i,a}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Bu extends Jp{constructor(e,s,n,a,i,c,A,d,f){super(e,[],i,c),this.node=s,this.outerDeco=n,this.innerDeco=a,this.nodeDOM=A}static create(e,s,n,a,i,c){let A=i.nodeViews[s.type.name],d,f=A&&A(s,i,()=>{if(!d)return c;if(d.parent)return d.parent.posBeforeChild(d)},n,a),u=f&&f.dom,p=f&&f.contentDOM;if(s.isText){if(!u)u=document.createTextNode(s.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:p}=Gh.renderSpec(document,s.type.spec.toDOM(s),null,s.attrs));!p&&!s.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),s.type.spec.draggable&&(u.draggable=!0));let x=u;return u=gC(u,n,s),f?d=new tO(e,s,n,a,u,p||null,x,f,i,c+1):s.isText?new gb(e,s,n,a,u,x,i):new Bu(e,s,n,a,u,p||null,x,i,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let s=this.children.length-1;s>=0;s--){let n=this.children[s];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>St.empty)}return e}matchesNode(e,s,n){return this.dirty==ac&&e.eq(this.node)&&ox(s,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,s){let n=this.node.inlineContent,a=s,i=e.composing?this.localCompositionInfo(e,s):null,c=i&&i.pos>-1?i:null,A=i&&i.pos<0,d=new rO(this,c&&c.node,e);iO(this.node,this.innerDeco,(f,u,p)=>{f.spec.marks?d.syncToMarks(f.spec.marks,n,e):f.type.side>=0&&!p&&d.syncToMarks(u==this.node.childCount?an.none:this.node.child(u).marks,n,e),d.placeWidget(f,e,a)},(f,u,p,x)=>{d.syncToMarks(f.marks,n,e);let m;d.findNodeMatch(f,u,p,x)||A&&e.state.selection.from>a&&e.state.selection.to<a+f.nodeSize&&(m=d.findIndexWithChild(i.node))>-1&&d.updateNodeAt(f,u,p,m,e)||d.updateNextNode(f,u,p,e,x,a)||d.addNode(f,u,p,e,a),a+=f.nodeSize}),d.syncToMarks([],n,e),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==yh)&&(c&&this.protectLocalComposition(e,c),pC(this.contentDOM,this.children,e),$f&&lO(this.dom))}localCompositionInfo(e,s){let{from:n,to:a}=e.state.selection;if(!(e.state.selection instanceof Fs)||n<s||a>s+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let c=i.nodeValue,A=oO(this.node.content,c,n-s,a-s);return A<0?null:{node:i,pos:A,text:c}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:s,pos:n,text:a}){if(this.getDesc(s))return;let i=s;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let c=new eO(this,i,s,a);e.input.compositionNodes.push(c),this.children=oy(this.children,n,n+a.length,e,c)}update(e,s,n,a){return this.dirty==CA||!e.sameMarkup(this.node)?!1:(this.updateInner(e,s,n,a),!0)}updateInner(e,s,n,a){this.updateOuterDeco(s),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(a,this.posAtStart),this.dirty=ac}updateOuterDeco(e){if(ox(e,this.outerDeco))return;let s=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=mC(this.dom,this.nodeDOM,ly(this.outerDeco,this.node,s),ly(e,this.node,s)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function pN(t,e,s,n,a){gC(n,e,t);let i=new Bu(void 0,t,e,s,n,n,n,a,0);return i.contentDOM&&i.updateChildren(a,0),i}class gb extends Bu{constructor(e,s,n,a,i,c,A){super(e,s,n,a,i,null,c,A,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,s,n,a){return this.dirty==CA||this.dirty!=ac&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(s),(this.dirty!=ac||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,a.trackWrites==this.nodeDOM&&(a.trackWrites=null)),this.node=e,this.dirty=ac,!0)}inParent(){let e=this.parent.contentDOM;for(let s=this.nodeDOM;s;s=s.parentNode)if(s==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,s,n){return e==this.nodeDOM?this.posAtStart+Math.min(s,this.node.text.length):super.localPosFromDOM(e,s,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,s,n){let a=this.node.cut(e,s),i=document.createTextNode(a.text);return new gb(this.parent,a,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,s){super.markDirty(e,s),this.dom!=this.nodeDOM&&(e==0||s==this.nodeDOM.nodeValue.length)&&(this.dirty=CA)}get domAtom(){return!1}isText(e){return this.node.text==e}}class fC extends Jp{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ac&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class tO extends Bu{constructor(e,s,n,a,i,c,A,d,f,u){super(e,s,n,a,i,c,A,f,u),this.spec=d}update(e,s,n,a){if(this.dirty==CA)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,s,n);return i&&this.updateInner(e,s,n,a),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,s,n,a)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,s,n,a){this.spec.setSelection?this.spec.setSelection(e,s,n.root):super.setSelection(e,s,n,a)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function pC(t,e,s){let n=t.firstChild,a=!1;for(let i=0;i<e.length;i++){let c=e[i],A=c.dom;if(A.parentNode==t){for(;A!=n;)n=mN(n),a=!0;n=n.nextSibling}else a=!0,t.insertBefore(A,n);if(c instanceof Ph){let d=n?n.previousSibling:t.lastChild;pC(c.contentDOM,c.children,s),n=d?d.nextSibling:t.firstChild}}for(;n;)n=mN(n),a=!0;a&&s.trackWrites==t&&(s.trackWrites=null)}const gp=function(t){t&&(this.nodeName=t)};gp.prototype=Object.create(null);const wh=[new gp];function ly(t,e,s){if(t.length==0)return wh;let n=s?wh[0]:new gp,a=[n];for(let i=0;i<t.length;i++){let c=t[i].type.attrs;if(c){c.nodeName&&a.push(n=new gp(c.nodeName));for(let A in c){let d=c[A];d!=null&&(s&&a.length==1&&a.push(n=new gp(e.isInline?"span":"div")),A=="class"?n.class=(n.class?n.class+" ":"")+d:A=="style"?n.style=(n.style?n.style+";":"")+d:A!="nodeName"&&(n[A]=d))}}}return a}function mC(t,e,s,n){if(s==wh&&n==wh)return e;let a=e;for(let i=0;i<n.length;i++){let c=n[i],A=s[i];if(i){let d;A&&A.nodeName==c.nodeName&&a!=t&&(d=a.parentNode)&&d.nodeName.toLowerCase()==c.nodeName||(d=document.createElement(c.nodeName),d.pmIsDeco=!0,d.appendChild(a),A=wh[0]),a=d}sO(a,A||wh[0],c)}return a}function sO(t,e,s){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in s)&&t.removeAttribute(n);for(let n in s)n!="class"&&n!="style"&&n!="nodeName"&&s[n]!=e[n]&&t.setAttribute(n,s[n]);if(e.class!=s.class){let n=e.class?e.class.split(" ").filter(Boolean):[],a=s.class?s.class.split(" ").filter(Boolean):[];for(let i=0;i<n.length;i++)a.indexOf(n[i])==-1&&t.classList.remove(n[i]);for(let i=0;i<a.length;i++)n.indexOf(a[i])==-1&&t.classList.add(a[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=s.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,a;for(;a=n.exec(e.style);)t.style.removeProperty(a[1])}s.style&&(t.style.cssText+=s.style)}}function gC(t,e,s){return mC(t,t,wh,ly(e,s,t.nodeType!=1))}function ox(t,e){if(t.length!=e.length)return!1;for(let s=0;s<t.length;s++)if(!t[s].type.eq(e[s].type))return!1;return!0}function mN(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class rO{constructor(e,s,n){this.lock=s,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=nO(e.node.content,e)}destroyBetween(e,s){if(e!=s){for(let n=e;n<s;n++)this.top.children[n].destroy();this.top.children.splice(e,s-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,s,n){let a=0,i=this.stack.length>>1,c=Math.min(i,e.length);for(;a<c&&(a==i-1?this.top:this.stack[a+1<<1]).matchesMark(e[a])&&e[a].type.spec.spanning!==!1;)a++;for(;a<i;)this.destroyRest(),this.top.dirty=ac,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let A=-1;for(let d=this.index;d<Math.min(this.index+3,this.top.children.length);d++){let f=this.top.children[d];if(f.matchesMark(e[i])&&!this.isLocked(f.dom)){A=d;break}}if(A>-1)A>this.index&&(this.changed=!0,this.destroyBetween(this.index,A)),this.top=this.top.children[this.index];else{let d=Ph.create(this.top,e[i],s,n);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,i++}}findNodeMatch(e,s,n,a){let i=-1,c;if(a>=this.preMatch.index&&(c=this.preMatch.matches[a-this.preMatch.index]).parent==this.top&&c.matchesNode(e,s,n))i=this.top.children.indexOf(c,this.index);else for(let A=this.index,d=Math.min(this.top.children.length,A+5);A<d;A++){let f=this.top.children[A];if(f.matchesNode(e,s,n)&&!this.preMatch.matched.has(f)){i=A;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,s,n,a,i){let c=this.top.children[a];return c.dirty==CA&&c.dom==c.contentDOM&&(c.dirty=yh),c.update(e,s,n,i)?(this.destroyBetween(this.index,a),this.index++,!0):!1}findIndexWithChild(e){for(;;){let s=e.parentNode;if(!s)return-1;if(s==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let a=this.index;a<this.top.children.length;a++)if(this.top.children[a]==n)return a}return-1}e=s}}updateNextNode(e,s,n,a,i,c){for(let A=this.index;A<this.top.children.length;A++){let d=this.top.children[A];if(d instanceof Bu){let f=this.preMatch.matched.get(d);if(f!=null&&f!=i)return!1;let u=d.dom,p,x=this.isLocked(u)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=CA&&ox(s,d.outerDeco));if(!x&&d.update(e,s,n,a))return this.destroyBetween(this.index,A),d.dom!=u&&(this.changed=!0),this.index++,!0;if(!x&&(p=this.recreateWrapper(d,e,s,n,a,c)))return this.destroyBetween(this.index,A),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=yh,p.updateChildren(a,c+1),p.dirty=ac),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,s,n,a,i,c){if(e.dirty||s.isAtom||!e.children.length||!e.node.content.eq(s.content)||!ox(n,e.outerDeco)||!a.eq(e.innerDeco))return null;let A=Bu.create(this.top,s,n,a,i,c);if(A.contentDOM){A.children=e.children,e.children=[];for(let d of A.children)d.parent=A}return e.destroy(),A}addNode(e,s,n,a,i){let c=Bu.create(this.top,e,s,n,a,i);c.contentDOM&&c.updateChildren(a,i+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,s,n){let a=this.index<this.top.children.length?this.top.children[this.index]:null;if(a&&a.matchesWidget(e)&&(e==a.widget||!a.widget.type.toDOM.parentNode))this.index++;else{let i=new hC(this.top,e,s,n);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],s=this.top;for(;e instanceof Ph;)s=e,e=s.children[s.children.length-1];(!e||!(e instanceof gb)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((sl||si)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",s),this.addHackNode("BR",this.top))}addHackNode(e,s){if(s==this.top&&this.index<s.children.length&&s.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let a=new fC(this.top,[],n,null);s!=this.top?s.children.push(a):s.children.splice(this.index++,0,a),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function nO(t,e){let s=e,n=s.children.length,a=t.childCount,i=new Map,c=[];e:for(;a>0;){let A;for(;;)if(n){let f=s.children[n-1];if(f instanceof Ph)s=f,n=f.children.length;else{A=f,n--;break}}else{if(s==e)break e;n=s.parent.children.indexOf(s),s=s.parent}let d=A.node;if(d){if(d!=t.child(a-1))break;--a,i.set(A,a),c.push(A)}}return{index:a,matched:i,matches:c.reverse()}}function aO(t,e){return t.type.side-e.type.side}function iO(t,e,s,n){let a=e.locals(t),i=0;if(a.length==0){for(let f=0;f<t.childCount;f++){let u=t.child(f);n(u,a,e.forChild(i,u),f),i+=u.nodeSize}return}let c=0,A=[],d=null;for(let f=0;;){let u,p;for(;c<a.length&&a[c].to==i;){let S=a[c++];S.widget&&(u?(p||(p=[u])).push(S):u=S)}if(u)if(p){p.sort(aO);for(let S=0;S<p.length;S++)s(p[S],f,!!d)}else s(u,f,!!d);let x,m;if(d)m=-1,x=d,d=null;else if(f<t.childCount)m=f,x=t.child(f++);else break;for(let S=0;S<A.length;S++)A[S].to<=i&&A.splice(S--,1);for(;c<a.length&&a[c].from<=i&&a[c].to>i;)A.push(a[c++]);let j=i+x.nodeSize;if(x.isText){let S=j;c<a.length&&a[c].from<S&&(S=a[c].from);for(let C=0;C<A.length;C++)A[C].to<S&&(S=A[C].to);S<j&&(d=x.cut(S-i),x=x.cut(0,S-i),j=S,m=-1)}else for(;c<a.length&&a[c].to<j;)c++;let w=x.isInline&&!x.isLeaf?A.filter(S=>!S.inline):A.slice();n(x,w,e.forChild(i,x),m),i=j}}function lO(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function oO(t,e,s,n){for(let a=0,i=0;a<t.childCount&&i<=n;){let c=t.child(a++),A=i;if(i+=c.nodeSize,!c.isText)continue;let d=c.text;for(;a<t.childCount;){let f=t.child(a++);if(i+=f.nodeSize,!f.isText)break;d+=f.text}if(i>=s){if(i>=n&&d.slice(n-e.length-A,n-A)==e)return n-e.length;let f=A<n?d.lastIndexOf(e,n-A-1):-1;if(f>=0&&f+e.length+A>=s)return A+f;if(s==n&&d.length>=n+e.length-A&&d.slice(n-A,n-A+e.length)==e)return n}}return-1}function oy(t,e,s,n,a){let i=[];for(let c=0,A=0;c<t.length;c++){let d=t[c],f=A,u=A+=d.size;f>=s||u<=e?i.push(d):(f<e&&i.push(d.slice(0,e-f,n)),a&&(i.push(a),a=void 0),u>s&&i.push(d.slice(s-f,d.size,n)))}return i}function i2(t,e=null){let s=t.domSelectionRange(),n=t.state.doc;if(!s.focusNode)return null;let a=t.docView.nearestDesc(s.focusNode),i=a&&a.size==0,c=t.docView.posFromDOM(s.focusNode,s.focusOffset,1);if(c<0)return null;let A=n.resolve(c),d,f;if(mb(s)){for(d=c;a&&!a.node;)a=a.parent;let p=a.node;if(a&&p.isAtom&&ys.isSelectable(p)&&a.parent&&!(p.isInline&&Q7(s.focusNode,s.focusOffset,a.dom))){let x=a.posBefore;f=new ys(c==x?A:n.resolve(x))}}else{if(s instanceof t.dom.ownerDocument.defaultView.Selection&&s.rangeCount>1){let p=c,x=c;for(let m=0;m<s.rangeCount;m++){let j=s.getRangeAt(m);p=Math.min(p,t.docView.posFromDOM(j.startContainer,j.startOffset,1)),x=Math.max(x,t.docView.posFromDOM(j.endContainer,j.endOffset,-1))}if(p<0)return null;[d,c]=x==t.state.selection.anchor?[x,p]:[p,x],A=n.resolve(c)}else d=t.docView.posFromDOM(s.anchorNode,s.anchorOffset,1);if(d<0)return null}let u=n.resolve(d);if(!f){let p=e=="pointer"||t.state.selection.head<A.pos&&!i?1:-1;f=l2(t,u,A,p)}return f}function xC(t){return t.editable?t.hasFocus():vC(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function pd(t,e=!1){let s=t.state.selection;if(bC(t,s),!!xC(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&si){let n=t.domSelectionRange(),a=t.domObserver.currentSelection;if(n.anchorNode&&a.anchorNode&&Hh(n.anchorNode,n.anchorOffset,a.anchorNode,a.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)AO(t);else{let{anchor:n,head:a}=s,i,c;gN&&!(s instanceof Fs)&&(s.$from.parent.inlineContent||(i=xN(t,s.from)),!s.empty&&!s.$from.parent.inlineContent&&(c=xN(t,s.to))),t.docView.setSelection(n,a,t,e),gN&&(i&&bN(i),c&&bN(c)),s.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&cO(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const gN=sl||si&&aC<63;function xN(t,e){let{node:s,offset:n}=t.docView.domFromPos(e,0),a=n<s.childNodes.length?s.childNodes[n]:null,i=n?s.childNodes[n-1]:null;if(sl&&a&&a.contentEditable=="false")return sv(a);if((!a||a.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(a)return sv(a);if(i)return sv(i)}}function sv(t){return t.contentEditable="true",sl&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function bN(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function cO(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let s=t.domSelectionRange(),n=s.anchorNode,a=s.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(s.anchorNode!=n||s.anchorOffset!=a)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!xC(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function AO(t){let e=t.domSelection();if(!e)return;let s=t.cursorWrapper.dom,n=s.nodeName=="IMG";n?e.collapse(s.parentNode,vi(s)+1):e.collapse(s,0),!n&&!t.state.selection.visible&&$l&&Nu<=11&&(s.disabled=!0,s.disabled=!1)}function bC(t,e){if(e instanceof ys){let s=t.docView.descAt(e.from);s!=t.lastSelectedViewDesc&&(vN(t),s&&s.selectNode(),t.lastSelectedViewDesc=s)}else vN(t)}function vN(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function l2(t,e,s,n){return t.someProp("createSelectionBetween",a=>a(t,e,s))||Fs.between(e,s,n)}function yN(t){return t.editable&&!t.hasFocus()?!1:vC(t)}function vC(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function dO(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),s=t.domSelectionRange();return Hh(e.node,e.offset,s.anchorNode,s.anchorOffset)}function cy(t,e){let{$anchor:s,$head:n}=t.selection,a=e>0?s.max(n):s.min(n),i=a.parent.inlineContent?a.depth?t.doc.resolve(e>0?a.after():a.before()):null:a;return i&&Vs.findFrom(i,e)}function cu(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function wN(t,e,s){let n=t.state.selection;if(n instanceof Fs)if(s.indexOf("s")>-1){let{$head:a}=n,i=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let c=t.state.doc.resolve(a.pos+i.nodeSize*(e<0?-1:1));return cu(t,new Fs(n.$anchor,c))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let a=cy(t.state,e);return a&&a instanceof ys?cu(t,a):!1}else if(!(Zo&&s.indexOf("m")>-1)){let a=n.$head,i=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter,c;if(!i||i.isText)return!1;let A=e<0?a.pos-i.nodeSize:a.pos;return i.isAtom||(c=t.docView.descAt(A))&&!c.contentDOM?ys.isSelectable(i)?cu(t,new ys(e<0?t.state.doc.resolve(a.pos-i.nodeSize):a)):Yp?cu(t,new Fs(t.state.doc.resolve(e<0?A:A+i.nodeSize))):!1:!1}}else return!1;else{if(n instanceof ys&&n.node.isInline)return cu(t,new Fs(e>0?n.$to:n.$from));{let a=cy(t.state,e);return a?cu(t,a):!1}}}function cx(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function xp(t,e){let s=t.pmViewDesc;return s&&s.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Cf(t,e){return e<0?uO(t):hO(t)}function uO(t){let e=t.domSelectionRange(),s=e.focusNode,n=e.focusOffset;if(!s)return;let a,i,c=!1;for(nc&&s.nodeType==1&&n<cx(s)&&xp(s.childNodes[n],-1)&&(c=!0);;)if(n>0){if(s.nodeType!=1)break;{let A=s.childNodes[n-1];if(xp(A,-1))a=s,i=--n;else if(A.nodeType==3)s=A,n=s.nodeValue.length;else break}}else{if(yC(s))break;{let A=s.previousSibling;for(;A&&xp(A,-1);)a=s.parentNode,i=vi(A),A=A.previousSibling;if(A)s=A,n=cx(s);else{if(s=s.parentNode,s==t.dom)break;n=0}}}c?Ay(t,s,n):a&&Ay(t,a,i)}function hO(t){let e=t.domSelectionRange(),s=e.focusNode,n=e.focusOffset;if(!s)return;let a=cx(s),i,c;for(;;)if(n<a){if(s.nodeType!=1)break;let A=s.childNodes[n];if(xp(A,1))i=s,c=++n;else break}else{if(yC(s))break;{let A=s.nextSibling;for(;A&&xp(A,1);)i=A.parentNode,c=vi(A)+1,A=A.nextSibling;if(A)s=A,n=0,a=cx(s);else{if(s=s.parentNode,s==t.dom)break;n=a=0}}}i&&Ay(t,i,c)}function yC(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function fO(t,e){for(;t&&e==t.childNodes.length&&!qp(t);)e=vi(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let s=t.childNodes[e];if(s.nodeType==3)return s;if(s.nodeType==1&&s.contentEditable=="false")break;t=s,e=0}}function pO(t,e){for(;t&&!e&&!qp(t);)e=vi(t),t=t.parentNode;for(;t&&e;){let s=t.childNodes[e-1];if(s.nodeType==3)return s;if(s.nodeType==1&&s.contentEditable=="false")break;t=s,e=t.childNodes.length}}function Ay(t,e,s){if(e.nodeType!=3){let i,c;(c=fO(e,s))?(e=c,s=0):(i=pO(e,s))&&(e=i,s=i.nodeValue.length)}let n=t.domSelection();if(!n)return;if(mb(n)){let i=document.createRange();i.setEnd(e,s),i.setStart(e,s),n.removeAllRanges(),n.addRange(i)}else n.extend&&n.extend(e,s);t.domObserver.setCurSelection();let{state:a}=t;setTimeout(()=>{t.state==a&&pd(t)},50)}function jN(t,e){let s=t.state.doc.resolve(e);if(!(si||iC)&&s.parent.inlineContent){let a=t.coordsAtPos(e);if(e>s.start()){let i=t.coordsAtPos(e-1),c=(i.top+i.bottom)/2;if(c>a.top&&c<a.bottom&&Math.abs(i.left-a.left)>1)return i.left<a.left?"ltr":"rtl"}if(e<s.end()){let i=t.coordsAtPos(e+1),c=(i.top+i.bottom)/2;if(c>a.top&&c<a.bottom&&Math.abs(i.left-a.left)>1)return i.left>a.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function NN(t,e,s){let n=t.state.selection;if(n instanceof Fs&&!n.empty||s.indexOf("s")>-1||Zo&&s.indexOf("m")>-1)return!1;let{$from:a,$to:i}=n;if(!a.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let c=cy(t.state,e);if(c&&c instanceof ys)return cu(t,c)}if(!a.parent.inlineContent){let c=e<0?a:i,A=n instanceof Bo?Vs.near(c,e):Vs.findFrom(c,e);return A?cu(t,A):!1}return!1}function BN(t,e){if(!(t.state.selection instanceof Fs))return!0;let{$head:s,$anchor:n,empty:a}=t.state.selection;if(!s.sameParent(n))return!0;if(!a)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!s.textOffset&&(e<0?s.nodeBefore:s.nodeAfter);if(i&&!i.isText){let c=t.state.tr;return e<0?c.delete(s.pos-i.nodeSize,s.pos):c.delete(s.pos,s.pos+i.nodeSize),t.dispatch(c),!0}return!1}function kN(t,e,s){t.domObserver.stop(),e.contentEditable=s,t.domObserver.start()}function mO(t){if(!sl||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:s}=t.domSelectionRange();if(e&&e.nodeType==1&&s==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;kN(t,n,"true"),setTimeout(()=>kN(t,n,"false"),20)}return!1}function gO(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function xO(t,e){let s=e.keyCode,n=gO(e);if(s==8||Zo&&s==72&&n=="c")return BN(t,-1)||Cf(t,-1);if(s==46&&!e.shiftKey||Zo&&s==68&&n=="c")return BN(t,1)||Cf(t,1);if(s==13||s==27)return!0;if(s==37||Zo&&s==66&&n=="c"){let a=s==37?jN(t,t.state.selection.from)=="ltr"?-1:1:-1;return wN(t,a,n)||Cf(t,a)}else if(s==39||Zo&&s==70&&n=="c"){let a=s==39?jN(t,t.state.selection.from)=="ltr"?1:-1:1;return wN(t,a,n)||Cf(t,a)}else{if(s==38||Zo&&s==80&&n=="c")return NN(t,-1,n)||Cf(t,-1);if(s==40||Zo&&s==78&&n=="c")return mO(t)||NN(t,1,n)||Cf(t,1);if(n==(Zo?"m":"c")&&(s==66||s==73||s==89||s==90))return!0}return!1}function o2(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let s=[],{content:n,openStart:a,openEnd:i}=e;for(;a>1&&i>1&&n.childCount==1&&n.firstChild.childCount==1;){a--,i--;let m=n.firstChild;s.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),n=m.content}let c=t.someProp("clipboardSerializer")||Gh.fromSchema(t.state.schema),A=CC(),d=A.createElement("div");d.appendChild(c.serializeFragment(n,{document:A}));let f=d.firstChild,u,p=0;for(;f&&f.nodeType==1&&(u=kC[f.nodeName.toLowerCase()]);){for(let m=u.length-1;m>=0;m--){let j=A.createElement(u[m]);for(;d.firstChild;)j.appendChild(d.firstChild);d.appendChild(j),p++}f=d.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${a} ${i}${p?` -${p}`:""} ${JSON.stringify(s)}`);let x=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:x,slice:e}}function wC(t,e,s,n,a){let i=a.parent.type.spec.code,c,A;if(!s&&!e)return null;let d=!!e&&(n||i||!s);if(d){if(t.someProp("transformPastedText",x=>{e=x(e,i||n,t)}),i)return A=new Jt(St.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",x=>{A=x(A,t,!0)}),A;let p=t.someProp("clipboardTextParser",x=>x(e,a,n,t));if(p)A=p;else{let x=a.marks(),{schema:m}=t.state,j=Gh.fromSchema(m);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let S=c.appendChild(document.createElement("p"));w&&S.appendChild(j.serializeNode(m.text(w,x)))})}}else t.someProp("transformPastedHTML",p=>{s=p(s,t)}),c=wO(s),Yp&&jO(c);let f=c&&c.querySelector("[data-pm-slice]"),u=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let p=+u[3];p>0;p--){let x=c.firstChild;for(;x&&x.nodeType!=1;)x=x.nextSibling;if(!x)break;c=x}if(A||(A=(t.someProp("clipboardParser")||t.someProp("domParser")||pp.fromSchema(t.state.schema)).parseSlice(c,{preserveWhitespace:!!(d||u),context:a,ruleFromNode(x){return x.nodeName=="BR"&&!x.nextSibling&&x.parentNode&&!bO.test(x.parentNode.nodeName)?{ignore:!0}:null}})),u)A=NO(CN(A,+u[1],+u[2]),u[4]);else if(A=Jt.maxOpen(vO(A.content,a),!0),A.openStart||A.openEnd){let p=0,x=0;for(let m=A.content.firstChild;p<A.openStart&&!m.type.spec.isolating;p++,m=m.firstChild);for(let m=A.content.lastChild;x<A.openEnd&&!m.type.spec.isolating;x++,m=m.lastChild);A=CN(A,p,x)}return t.someProp("transformPasted",p=>{A=p(A,t,d)}),A}const bO=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function vO(t,e){if(t.childCount<2)return t;for(let s=e.depth;s>=0;s--){let a=e.node(s).contentMatchAt(e.index(s)),i,c=[];if(t.forEach(A=>{if(!c)return;let d=a.findWrapping(A.type),f;if(!d)return c=null;if(f=c.length&&i.length&&NC(d,i,A,c[c.length-1],0))c[c.length-1]=f;else{c.length&&(c[c.length-1]=BC(c[c.length-1],i.length));let u=jC(A,d);c.push(u),a=a.matchType(u.type),i=d}}),c)return St.from(c)}return t}function jC(t,e,s=0){for(let n=e.length-1;n>=s;n--)t=e[n].create(null,St.from(t));return t}function NC(t,e,s,n,a){if(a<t.length&&a<e.length&&t[a]==e[a]){let i=NC(t,e,s,n.lastChild,a+1);if(i)return n.copy(n.content.replaceChild(n.childCount-1,i));if(n.contentMatchAt(n.childCount).matchType(a==t.length-1?s.type:t[a+1]))return n.copy(n.content.append(St.from(jC(s,t,a+1))))}}function BC(t,e){if(e==0)return t;let s=t.content.replaceChild(t.childCount-1,BC(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(St.empty,!0);return t.copy(s.append(n))}function dy(t,e,s,n,a,i){let c=e<0?t.firstChild:t.lastChild,A=c.content;return t.childCount>1&&(i=0),a<n-1&&(A=dy(A,e,s,n,a+1,i)),a>=s&&(A=e<0?c.contentMatchAt(0).fillBefore(A,i<=a).append(A):A.append(c.contentMatchAt(c.childCount).fillBefore(St.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,c.copy(A))}function CN(t,e,s){return e<t.openStart&&(t=new Jt(dy(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),s<t.openEnd&&(t=new Jt(dy(t.content,1,s,t.openEnd,0,0),t.openStart,s)),t}const kC={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let SN=null;function CC(){return SN||(SN=document.implementation.createHTMLDocument("title"))}let rv=null;function yO(t){let e=window.trustedTypes;return e?(rv||(rv=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:s=>s})),rv.createHTML(t)):t}function wO(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let s=CC().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),a;if((a=n&&kC[n[1].toLowerCase()])&&(t=a.map(i=>"<"+i+">").join("")+t+a.map(i=>"</"+i+">").reverse().join("")),s.innerHTML=yO(t),a)for(let i=0;i<a.length;i++)s=s.querySelector(a[i])||s;return s}function jO(t){let e=t.querySelectorAll(si?"span:not([class]):not([style])":"span.Apple-converted-space");for(let s=0;s<e.length;s++){let n=e[s];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function NO(t,e){if(!t.size)return t;let s=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:a,openStart:i,openEnd:c}=t;for(let A=n.length-2;A>=0;A-=2){let d=s.nodes[n[A]];if(!d||d.hasRequiredAttrs())break;a=St.from(d.create(n[A+1],a)),i++,c++}return new Jt(a,i,c)}const wl={},jl={},BO={touchstart:!0,touchmove:!0};class kO{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function CO(t){for(let e in wl){let s=wl[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{EO(t,n)&&!c2(t,n)&&(t.editable||!(n.type in jl))&&s(t,n)},BO[e]?{passive:!0}:void 0)}sl&&t.dom.addEventListener("input",()=>null),uy(t)}function bu(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function SO(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function uy(t){t.someProp("handleDOMEvents",e=>{for(let s in e)t.input.eventHandlers[s]||t.dom.addEventListener(s,t.input.eventHandlers[s]=n=>c2(t,n))})}function c2(t,e){return t.someProp("handleDOMEvents",s=>{let n=s[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function EO(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let s=e.target;s!=t.dom;s=s.parentNode)if(!s||s.nodeType==11||s.pmViewDesc&&s.pmViewDesc.stopEvent(e))return!1;return!0}function TO(t,e){!c2(t,e)&&wl[e.type]&&(t.editable||!(e.type in jl))&&wl[e.type](t,e)}jl.keydown=(t,e)=>{let s=e;if(t.input.shiftKey=s.keyCode==16||s.shiftKey,!EC(t,s)&&(t.input.lastKeyCode=s.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ud&&si&&s.keyCode==13)))if(s.keyCode!=229&&t.domObserver.forceFlush(),$f&&s.keyCode==13&&!s.ctrlKey&&!s.altKey&&!s.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",a=>a(t,bh(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,s))||xO(t,s)?s.preventDefault():bu(t,"key")};jl.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};jl.keypress=(t,e)=>{let s=e;if(EC(t,s)||!s.charCode||s.ctrlKey&&!s.altKey||Zo&&s.metaKey)return;if(t.someProp("handleKeyPress",a=>a(t,s))){s.preventDefault();return}let n=t.state.selection;if(!(n instanceof Fs)||!n.$from.sameParent(n.$to)){let a=String.fromCharCode(s.charCode),i=()=>t.state.tr.insertText(a).scrollIntoView();!/[\r\n]/.test(a)&&!t.someProp("handleTextInput",c=>c(t,n.$from.pos,n.$to.pos,a,i))&&t.dispatch(i()),s.preventDefault()}};function xb(t){return{left:t.clientX,top:t.clientY}}function UO(t,e){let s=e.x-t.clientX,n=e.y-t.clientY;return s*s+n*n<100}function A2(t,e,s,n,a){if(n==-1)return!1;let i=t.state.doc.resolve(n);for(let c=i.depth+1;c>0;c--)if(t.someProp(e,A=>c>i.depth?A(t,s,i.nodeAfter,i.before(c),a,!0):A(t,s,i.node(c),i.before(c),a,!1)))return!0;return!1}function _f(t,e,s){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function FO(t,e){if(e==-1)return!1;let s=t.state.doc.resolve(e),n=s.nodeAfter;return n&&n.isAtom&&ys.isSelectable(n)?(_f(t,new ys(s)),!0):!1}function LO(t,e){if(e==-1)return!1;let s=t.state.selection,n,a;s instanceof ys&&(n=s.node);let i=t.state.doc.resolve(e);for(let c=i.depth+1;c>0;c--){let A=c>i.depth?i.nodeAfter:i.node(c);if(ys.isSelectable(A)){n&&s.$from.depth>0&&c>=s.$from.depth&&i.before(s.$from.depth+1)==s.$from.pos?a=i.before(s.$from.depth):a=i.before(c);break}}return a!=null?(_f(t,ys.create(t.state.doc,a)),!0):!1}function MO(t,e,s,n,a){return A2(t,"handleClickOn",e,s,n)||t.someProp("handleClick",i=>i(t,e,n))||(a?LO(t,s):FO(t,s))}function QO(t,e,s,n){return A2(t,"handleDoubleClickOn",e,s,n)||t.someProp("handleDoubleClick",a=>a(t,e,n))}function _O(t,e,s,n){return A2(t,"handleTripleClickOn",e,s,n)||t.someProp("handleTripleClick",a=>a(t,e,n))||IO(t,s,n)}function IO(t,e,s){if(s.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(_f(t,Fs.create(n,0,n.content.size)),!0):!1;let a=n.resolve(e);for(let i=a.depth+1;i>0;i--){let c=i>a.depth?a.nodeAfter:a.node(i),A=a.before(i);if(c.inlineContent)_f(t,Fs.create(n,A+1,A+1+c.content.size));else if(ys.isSelectable(c))_f(t,ys.create(n,A));else continue;return!0}}function d2(t){return Ax(t)}const SC=Zo?"metaKey":"ctrlKey";wl.mousedown=(t,e)=>{let s=e;t.input.shiftKey=s.shiftKey;let n=d2(t),a=Date.now(),i="singleClick";a-t.input.lastClick.time<500&&UO(s,t.input.lastClick)&&!s[SC]&&t.input.lastClick.button==s.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:a,x:s.clientX,y:s.clientY,type:i,button:s.button};let c=t.posAtCoords(xb(s));c&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new OO(t,c,s,!!n)):(i=="doubleClick"?QO:_O)(t,c.pos,c.inside,s)?s.preventDefault():bu(t,"pointer"))};class OO{constructor(e,s,n,a){this.view=e,this.pos=s,this.event=n,this.flushed=a,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[SC],this.allowDefault=n.shiftKey;let i,c;if(s.inside>-1)i=e.state.doc.nodeAt(s.inside),c=s.inside;else{let u=e.state.doc.resolve(s.pos);i=u.parent,c=u.depth?u.before():0}const A=a?null:n.target,d=A?e.docView.nearestDesc(A,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:f}=e.state;(n.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||f instanceof ys&&f.from<=c&&f.to>c)&&(this.mightDrag={node:i,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&nc&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),bu(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>pd(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let s=this.pos;this.view.state.doc!=this.startDoc&&(s=this.view.posAtCoords(xb(e))),this.updateAllowDefault(e),this.allowDefault||!s?bu(this.view,"pointer"):MO(this.view,s.pos,s.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||sl&&this.mightDrag&&!this.mightDrag.node.isAtom||si&&!this.view.state.selection.visible&&Math.min(Math.abs(s.pos-this.view.state.selection.from),Math.abs(s.pos-this.view.state.selection.to))<=2)?(_f(this.view,Vs.near(this.view.state.doc.resolve(s.pos))),e.preventDefault()):bu(this.view,"pointer")}move(e){this.updateAllowDefault(e),bu(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}wl.touchstart=t=>{t.input.lastTouch=Date.now(),d2(t),bu(t,"pointer")};wl.touchmove=t=>{t.input.lastTouch=Date.now(),bu(t,"pointer")};wl.contextmenu=t=>d2(t);function EC(t,e){return t.composing?!0:sl&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const DO=ud?5e3:-1;jl.compositionstart=jl.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,s=e.selection.$to;if(e.selection instanceof Fs&&(e.storedMarks||!s.textOffset&&s.parentOffset&&s.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||si&&iC&&RO(t)))t.markCursor=t.state.storedMarks||s.marks(),Ax(t,!0),t.markCursor=null;else if(Ax(t,!e.selection.empty),nc&&e.selection.empty&&s.parentOffset&&!s.textOffset&&s.nodeBefore.marks.length){let n=t.domSelectionRange();for(let a=n.focusNode,i=n.focusOffset;a&&a.nodeType==1&&i!=0;){let c=i<0?a.lastChild:a.childNodes[i-1];if(!c)break;if(c.nodeType==3){let A=t.domSelection();A&&A.collapse(c,c.nodeValue.length);break}else a=c,i=-1}}t.input.composing=!0}TC(t,DO)};function RO(t){let{focusNode:e,focusOffset:s}=t.domSelectionRange();if(!e||e.nodeType!=1||s>=e.childNodes.length)return!1;let n=e.childNodes[s];return n.nodeType==1&&n.contentEditable=="false"}jl.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,TC(t,20))};function TC(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Ax(t),e))}function UC(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=PO());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function HO(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let s=L7(e.focusNode,e.focusOffset),n=M7(e.focusNode,e.focusOffset);if(s&&n&&s!=n){let a=n.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(s==i||n==i)return i;if(!a||!a.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let c=s.pmViewDesc;if(!(!c||!c.isText(s.nodeValue)))return n}}return s||n}function PO(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Ax(t,e=!1){if(!(ud&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),UC(t),e||t.docView&&t.docView.dirty){let s=i2(t),n=t.state.selection;return s&&!s.eq(n)?t.dispatch(t.state.tr.setSelection(s)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function zO(t,e){if(!t.dom.parentNode)return;let s=t.dom.parentNode.appendChild(document.createElement("div"));s.appendChild(e),s.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),a=document.createRange();a.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(a),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),t.focus()},50)}const _p=$l&&Nu<15||$f&&O7<604;wl.copy=jl.cut=(t,e)=>{let s=e,n=t.state.selection,a=s.type=="cut";if(n.empty)return;let i=_p?null:s.clipboardData,c=n.content(),{dom:A,text:d}=o2(t,c);i?(s.preventDefault(),i.clearData(),i.setData("text/html",A.innerHTML),i.setData("text/plain",d)):zO(t,A),a&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function KO(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function VO(t,e){if(!t.dom.parentNode)return;let s=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(s?"textarea":"div"));s||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let a=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),s?Ip(t,n.value,null,a,e):Ip(t,n.textContent,n.innerHTML,a,e)},50)}function Ip(t,e,s,n,a){let i=wC(t,e,s,n,t.state.selection.$from);if(t.someProp("handlePaste",d=>d(t,a,i||Jt.empty)))return!0;if(!i)return!1;let c=KO(i),A=c?t.state.tr.replaceSelectionWith(c,n):t.state.tr.replaceSelection(i);return t.dispatch(A.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function FC(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let s=t.getData("text/uri-list");return s?s.replace(/\r?\n/g," "):""}jl.paste=(t,e)=>{let s=e;if(t.composing&&!ud)return;let n=_p?null:s.clipboardData,a=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&Ip(t,FC(n),n.getData("text/html"),a,s)?s.preventDefault():VO(t,s)};class LC{constructor(e,s,n){this.slice=e,this.move=s,this.node=n}}const $O=Zo?"altKey":"ctrlKey";function MC(t,e){let s=t.someProp("dragCopies",n=>!n(e));return s??!e[$O]}wl.dragstart=(t,e)=>{let s=e,n=t.input.mouseDown;if(n&&n.done(),!s.dataTransfer)return;let a=t.state.selection,i=a.empty?null:t.posAtCoords(xb(s)),c;if(!(i&&i.pos>=a.from&&i.pos<=(a instanceof ys?a.to-1:a.to))){if(n&&n.mightDrag)c=ys.create(t.state.doc,n.mightDrag.pos);else if(s.target&&s.target.nodeType==1){let p=t.docView.nearestDesc(s.target,!0);p&&p.node.type.spec.draggable&&p!=t.docView&&(c=ys.create(t.state.doc,p.posBefore))}}let A=(c||t.state.selection).content(),{dom:d,text:f,slice:u}=o2(t,A);(!s.dataTransfer.files.length||!si||aC>120)&&s.dataTransfer.clearData(),s.dataTransfer.setData(_p?"Text":"text/html",d.innerHTML),s.dataTransfer.effectAllowed="copyMove",_p||s.dataTransfer.setData("text/plain",f),t.dragging=new LC(u,MC(t,s),c)};wl.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};jl.dragover=jl.dragenter=(t,e)=>e.preventDefault();jl.drop=(t,e)=>{try{GO(t,e,t.dragging)}finally{t.dragging=null}};function GO(t,e,s){if(!e.dataTransfer)return;let n=t.posAtCoords(xb(e));if(!n)return;let a=t.state.doc.resolve(n.pos),i=s&&s.slice;i?t.someProp("transformPasted",m=>{i=m(i,t,!1)}):i=wC(t,FC(e.dataTransfer),_p?null:e.dataTransfer.getData("text/html"),!1,a);let c=!!(s&&MC(t,e));if(t.someProp("handleDrop",m=>m(t,e,i||Jt.empty,c))){e.preventDefault();return}if(!i)return;e.preventDefault();let A=i?Ok(t.state.doc,a.pos,i):a.pos;A==null&&(A=a.pos);let d=t.state.tr;if(c){let{node:m}=s;m?m.replace(d):d.deleteSelection()}let f=d.mapping.map(A),u=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,p=d.doc;if(u?d.replaceRangeWith(f,f,i.content.firstChild):d.replaceRange(f,f,i),d.doc.eq(p))return;let x=d.doc.resolve(f);if(u&&ys.isSelectable(i.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(i.content.firstChild))d.setSelection(new ys(x));else{let m=d.mapping.map(A);d.mapping.maps[d.mapping.maps.length-1].forEach((j,w,S,C)=>m=C),d.setSelection(l2(t,x,d.doc.resolve(m)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))}wl.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&pd(t)},20))};wl.blur=(t,e)=>{let s=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),s.relatedTarget&&t.dom.contains(s.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};wl.beforeinput=(t,e)=>{if(si&&ud&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,bh(8,"Backspace")))))return;let{$cursor:a}=t.state.selection;a&&a.pos>0&&t.dispatch(t.state.tr.delete(a.pos-1,a.pos).scrollIntoView())},50)}};for(let t in jl)wl[t]=jl[t];function Op(t,e){if(t==e)return!0;for(let s in t)if(t[s]!==e[s])return!1;for(let s in e)if(!(s in t))return!1;return!0}class dx{constructor(e,s){this.toDOM=e,this.spec=s||Fh,this.side=this.spec.side||0}map(e,s,n,a){let{pos:i,deleted:c}=e.mapResult(s.from+a,this.side<0?-1:1);return c?null:new vl(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof dx&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Op(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ku{constructor(e,s){this.attrs=e,this.spec=s||Fh}map(e,s,n,a){let i=e.map(s.from+a,this.spec.inclusiveStart?-1:1)-n,c=e.map(s.to+a,this.spec.inclusiveEnd?1:-1)-n;return i>=c?null:new vl(i,c,this)}valid(e,s){return s.from<s.to}eq(e){return this==e||e instanceof ku&&Op(this.attrs,e.attrs)&&Op(this.spec,e.spec)}static is(e){return e.type instanceof ku}destroy(){}}class u2{constructor(e,s){this.attrs=e,this.spec=s||Fh}map(e,s,n,a){let i=e.mapResult(s.from+a,1);if(i.deleted)return null;let c=e.mapResult(s.to+a,-1);return c.deleted||c.pos<=i.pos?null:new vl(i.pos-n,c.pos-n,this)}valid(e,s){let{index:n,offset:a}=e.content.findIndex(s.from),i;return a==s.from&&!(i=e.child(n)).isText&&a+i.nodeSize==s.to}eq(e){return this==e||e instanceof u2&&Op(this.attrs,e.attrs)&&Op(this.spec,e.spec)}destroy(){}}class vl{constructor(e,s,n){this.from=e,this.to=s,this.type=n}copy(e,s){return new vl(e,s,this.type)}eq(e,s=0){return this.type.eq(e.type)&&this.from+s==e.from&&this.to+s==e.to}map(e,s,n){return this.type.map(e,this,s,n)}static widget(e,s,n){return new vl(e,e,new dx(s,n))}static inline(e,s,n,a){return new vl(e,s,new ku(n,a))}static node(e,s,n,a){return new vl(e,s,new u2(n,a))}get spec(){return this.type.spec}get inline(){return this.type instanceof ku}get widget(){return this.type instanceof dx}}const Uf=[],Fh={};class Pn{constructor(e,s){this.local=e.length?e:Uf,this.children=s.length?s:Uf}static create(e,s){return s.length?ux(s,e,0,Fh):el}find(e,s,n){let a=[];return this.findInner(e??0,s??1e9,a,0,n),a}findInner(e,s,n,a,i){for(let c=0;c<this.local.length;c++){let A=this.local[c];A.from<=s&&A.to>=e&&(!i||i(A.spec))&&n.push(A.copy(A.from+a,A.to+a))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<s&&this.children[c+1]>e){let A=this.children[c]+1;this.children[c+2].findInner(e-A,s-A,n,a+A,i)}}map(e,s,n){return this==el||e.maps.length==0?this:this.mapInner(e,s,0,0,n||Fh)}mapInner(e,s,n,a,i){let c;for(let A=0;A<this.local.length;A++){let d=this.local[A].map(e,n,a);d&&d.type.valid(s,d)?(c||(c=[])).push(d):i.onRemove&&i.onRemove(this.local[A].spec)}return this.children.length?qO(this.children,c||[],e,s,n,a,i):c?new Pn(c.sort(Lh),Uf):el}add(e,s){return s.length?this==el?Pn.create(e,s):this.addInner(e,s,0):this}addInner(e,s,n){let a,i=0;e.forEach((A,d)=>{let f=d+n,u;if(u=_C(s,A,f)){for(a||(a=this.children.slice());i<a.length&&a[i]<d;)i+=3;a[i]==d?a[i+2]=a[i+2].addInner(A,u,f+1):a.splice(i,0,d,d+A.nodeSize,ux(u,A,f+1,Fh)),i+=3}});let c=QC(i?IC(s):s,-n);for(let A=0;A<c.length;A++)c[A].type.valid(e,c[A])||c.splice(A--,1);return new Pn(c.length?this.local.concat(c).sort(Lh):this.local,a||this.children)}remove(e){return e.length==0||this==el?this:this.removeInner(e,0)}removeInner(e,s){let n=this.children,a=this.local;for(let i=0;i<n.length;i+=3){let c,A=n[i]+s,d=n[i+1]+s;for(let u=0,p;u<e.length;u++)(p=e[u])&&p.from>A&&p.to<d&&(e[u]=null,(c||(c=[])).push(p));if(!c)continue;n==this.children&&(n=this.children.slice());let f=n[i+2].removeInner(c,A+1);f!=el?n[i+2]=f:(n.splice(i,3),i-=3)}if(a.length){for(let i=0,c;i<e.length;i++)if(c=e[i])for(let A=0;A<a.length;A++)a[A].eq(c,s)&&(a==this.local&&(a=this.local.slice()),a.splice(A--,1))}return n==this.children&&a==this.local?this:a.length||n.length?new Pn(a,n):el}forChild(e,s){if(this==el)return this;if(s.isLeaf)return Pn.empty;let n,a;for(let A=0;A<this.children.length;A+=3)if(this.children[A]>=e){this.children[A]==e&&(n=this.children[A+2]);break}let i=e+1,c=i+s.content.size;for(let A=0;A<this.local.length;A++){let d=this.local[A];if(d.from<c&&d.to>i&&d.type instanceof ku){let f=Math.max(i,d.from)-i,u=Math.min(c,d.to)-i;f<u&&(a||(a=[])).push(d.copy(f,u))}}if(a){let A=new Pn(a.sort(Lh),Uf);return n?new hu([A,n]):A}return n||el}eq(e){if(this==e)return!0;if(!(e instanceof Pn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let s=0;s<this.local.length;s++)if(!this.local[s].eq(e.local[s]))return!1;for(let s=0;s<this.children.length;s+=3)if(this.children[s]!=e.children[s]||this.children[s+1]!=e.children[s+1]||!this.children[s+2].eq(e.children[s+2]))return!1;return!0}locals(e){return h2(this.localsInner(e))}localsInner(e){if(this==el)return Uf;if(e.inlineContent||!this.local.some(ku.is))return this.local;let s=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof ku||s.push(this.local[n]);return s}forEachSet(e){e(this)}}Pn.empty=new Pn([],[]);Pn.removeOverlap=h2;const el=Pn.empty;class hu{constructor(e){this.members=e}map(e,s){const n=this.members.map(a=>a.map(e,s,Fh));return hu.from(n)}forChild(e,s){if(s.isLeaf)return Pn.empty;let n=[];for(let a=0;a<this.members.length;a++){let i=this.members[a].forChild(e,s);i!=el&&(i instanceof hu?n=n.concat(i.members):n.push(i))}return hu.from(n)}eq(e){if(!(e instanceof hu)||e.members.length!=this.members.length)return!1;for(let s=0;s<this.members.length;s++)if(!this.members[s].eq(e.members[s]))return!1;return!0}locals(e){let s,n=!0;for(let a=0;a<this.members.length;a++){let i=this.members[a].localsInner(e);if(i.length)if(!s)s=i;else{n&&(s=s.slice(),n=!1);for(let c=0;c<i.length;c++)s.push(i[c])}}return s?h2(n?s:s.sort(Lh)):Uf}static from(e){switch(e.length){case 0:return el;case 1:return e[0];default:return new hu(e.every(s=>s instanceof Pn)?e:e.reduce((s,n)=>s.concat(n instanceof Pn?n:n.members),[]))}}forEachSet(e){for(let s=0;s<this.members.length;s++)this.members[s].forEachSet(e)}}function qO(t,e,s,n,a,i,c){let A=t.slice();for(let f=0,u=i;f<s.maps.length;f++){let p=0;s.maps[f].forEach((x,m,j,w)=>{let S=w-j-(m-x);for(let C=0;C<A.length;C+=3){let F=A[C+1];if(F<0||x>F+u-p)continue;let U=A[C]+u-p;m>=U?A[C+1]=x<=U?-2:-1:x>=u&&S&&(A[C]+=S,A[C+1]+=S)}p+=S}),u=s.maps[f].map(u,-1)}let d=!1;for(let f=0;f<A.length;f+=3)if(A[f+1]<0){if(A[f+1]==-2){d=!0,A[f+1]=-1;continue}let u=s.map(t[f]+i),p=u-a;if(p<0||p>=n.content.size){d=!0;continue}let x=s.map(t[f+1]+i,-1),m=x-a,{index:j,offset:w}=n.content.findIndex(p),S=n.maybeChild(j);if(S&&w==p&&w+S.nodeSize==m){let C=A[f+2].mapInner(s,S,u+1,t[f]+i+1,c);C!=el?(A[f]=p,A[f+1]=m,A[f+2]=C):(A[f+1]=-2,d=!0)}else d=!0}if(d){let f=YO(A,t,e,s,a,i,c),u=ux(f,n,0,c);e=u.local;for(let p=0;p<A.length;p+=3)A[p+1]<0&&(A.splice(p,3),p-=3);for(let p=0,x=0;p<u.children.length;p+=3){let m=u.children[p];for(;x<A.length&&A[x]<m;)x+=3;A.splice(x,0,u.children[p],u.children[p+1],u.children[p+2])}}return new Pn(e.sort(Lh),A)}function QC(t,e){if(!e||!t.length)return t;let s=[];for(let n=0;n<t.length;n++){let a=t[n];s.push(new vl(a.from+e,a.to+e,a.type))}return s}function YO(t,e,s,n,a,i,c){function A(d,f){for(let u=0;u<d.local.length;u++){let p=d.local[u].map(n,a,f);p?s.push(p):c.onRemove&&c.onRemove(d.local[u].spec)}for(let u=0;u<d.children.length;u+=3)A(d.children[u+2],d.children[u]+f+1)}for(let d=0;d<t.length;d+=3)t[d+1]==-1&&A(t[d+2],e[d]+i+1);return s}function _C(t,e,s){if(e.isLeaf)return null;let n=s+e.nodeSize,a=null;for(let i=0,c;i<t.length;i++)(c=t[i])&&c.from>s&&c.to<n&&((a||(a=[])).push(c),t[i]=null);return a}function IC(t){let e=[];for(let s=0;s<t.length;s++)t[s]!=null&&e.push(t[s]);return e}function ux(t,e,s,n){let a=[],i=!1;e.forEach((A,d)=>{let f=_C(t,A,d+s);if(f){i=!0;let u=ux(f,A,s+d+1,n);u!=el&&a.push(d,d+A.nodeSize,u)}});let c=QC(i?IC(t):t,-s).sort(Lh);for(let A=0;A<c.length;A++)c[A].type.valid(e,c[A])||(n.onRemove&&n.onRemove(c[A].spec),c.splice(A--,1));return c.length||a.length?new Pn(c,a):el}function Lh(t,e){return t.from-e.from||t.to-e.to}function h2(t){let e=t;for(let s=0;s<e.length-1;s++){let n=e[s];if(n.from!=n.to)for(let a=s+1;a<e.length;a++){let i=e[a];if(i.from==n.from){i.to!=n.to&&(e==t&&(e=t.slice()),e[a]=i.copy(i.from,n.to),EN(e,a+1,i.copy(n.to,i.to)));continue}else{i.from<n.to&&(e==t&&(e=t.slice()),e[s]=n.copy(n.from,i.from),EN(e,a,n.copy(i.from,n.to)));break}}}return e}function EN(t,e,s){for(;e<t.length&&Lh(s,t[e])>0;)e++;t.splice(e,0,s)}function nv(t){let e=[];return t.someProp("decorations",s=>{let n=s(t.state);n&&n!=el&&e.push(n)}),t.cursorWrapper&&e.push(Pn.create(t.state.doc,[t.cursorWrapper.deco])),hu.from(e)}const JO={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},WO=$l&&Nu<=11;class XO{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class ZO{constructor(e,s){this.view=e,this.handleDOMChange=s,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new XO,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let a=0;a<n.length;a++)this.queue.push(n[a]);$l&&Nu<=11&&n.some(a=>a.type=="childList"&&a.removedNodes.length||a.type=="characterData"&&a.oldValue.length>a.target.nodeValue.length)?this.flushSoon():this.flush()}),WO&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,JO)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let s=0;s<e.length;s++)this.queue.push(e[s]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(yN(this.view)){if(this.suppressingSelectionUpdates)return pd(this.view);if($l&&Nu<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Hh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let s=new Set,n;for(let i=e.focusNode;i;i=Vf(i))s.add(i);for(let i=e.anchorNode;i;i=Vf(i))if(s.has(i)){n=i;break}let a=n&&this.view.docView.nearestDesc(n);if(a&&a.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let s=this.pendingRecords();s.length&&(this.queue=[]);let n=e.domSelectionRange(),a=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&yN(e)&&!this.ignoreSelectionChange(n),i=-1,c=-1,A=!1,d=[];if(e.editable)for(let u=0;u<s.length;u++){let p=this.registerMutation(s[u],d);p&&(i=i<0?p.from:Math.min(p.from,i),c=c<0?p.to:Math.max(p.to,c),p.typeOver&&(A=!0))}if(nc&&d.length){let u=d.filter(p=>p.nodeName=="BR");if(u.length==2){let[p,x]=u;p.parentNode&&p.parentNode.parentNode==x.parentNode?x.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let x of u){let m=x.parentNode;m&&m.nodeName=="LI"&&(!p||sD(e,p)!=m)&&x.remove()}}}else if((si||sl)&&d.some(u=>u.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let u of d)if(u.nodeName=="BR"&&u.parentNode){let p=u.nextSibling;p&&p.nodeType==1&&p.contentEditable=="false"&&u.parentNode.removeChild(u)}}let f=null;i<0&&a&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&mb(n)&&(f=i2(e))&&f.eq(Vs.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,pd(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||a)&&(i>-1&&(e.docView.markDirty(i,c),eD(e)),this.handleDOMChange(i,c,A,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||pd(e),this.currentSelection.set(n))}registerMutation(e,s){if(s.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let p=e.addedNodes[u];s.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let a=e.previousSibling,i=e.nextSibling;if($l&&Nu<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:p,nextSibling:x}=e.addedNodes[u];(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(a=p),(!x||Array.prototype.indexOf.call(e.addedNodes,x)<0)&&(i=x)}let c=a&&a.parentNode==e.target?vi(a)+1:0,A=n.localPosFromDOM(e.target,c,-1),d=i&&i.parentNode==e.target?vi(i):e.target.childNodes.length,f=n.localPosFromDOM(e.target,d,1);return{from:A,to:f}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let TN=new WeakMap,UN=!1;function eD(t){if(!TN.has(t)&&(TN.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=nc,UN)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),UN=!0}}function FN(t,e){let s=e.startContainer,n=e.startOffset,a=e.endContainer,i=e.endOffset,c=t.domAtPos(t.state.selection.anchor);return Hh(c.node,c.offset,a,i)&&([s,n,a,i]=[a,i,s,n]),{anchorNode:s,anchorOffset:n,focusNode:a,focusOffset:i}}function tD(t,e){if(e.getComposedRanges){let a=e.getComposedRanges(t.root)[0];if(a)return FN(t,a)}let s;function n(a){a.preventDefault(),a.stopImmediatePropagation(),s=a.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),s?FN(t,s):null}function sD(t,e){for(let s=e.parentNode;s&&s!=t.dom;s=s.parentNode){let n=t.docView.nearestDesc(s,!0);if(n&&n.node.isBlock)return s}return null}function rD(t,e,s){let{node:n,fromOffset:a,toOffset:i,from:c,to:A}=t.docView.parseRange(e,s),d=t.domSelectionRange(),f,u=d.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(f=[{node:u,offset:d.anchorOffset}],mb(d)||f.push({node:d.focusNode,offset:d.focusOffset})),si&&t.input.lastKeyCode===8)for(let S=i;S>a;S--){let C=n.childNodes[S-1],F=C.pmViewDesc;if(C.nodeName=="BR"&&!F){i=S;break}if(!F||F.size)break}let p=t.state.doc,x=t.someProp("domParser")||pp.fromSchema(t.state.schema),m=p.resolve(c),j=null,w=x.parse(n,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:a,to:i,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:nD,context:m});if(f&&f[0].pos!=null){let S=f[0].pos,C=f[1]&&f[1].pos;C==null&&(C=S),j={anchor:S+c,head:C+c}}return{doc:w,sel:j,from:c,to:A}}function nD(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(sl&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let s=document.createElement("div");return s.appendChild(document.createElement("li")),{skip:s}}else if(t.parentNode.lastChild==t||sl&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const aD=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function iD(t,e,s,n,a){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let H=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,ee=i2(t,H);if(ee&&!t.state.selection.eq(ee)){if(si&&ud&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",ce=>ce(t,bh(13,"Enter"))))return;let $=t.state.tr.setSelection(ee);H=="pointer"?$.setMeta("pointer",!0):H=="key"&&$.scrollIntoView(),i&&$.setMeta("composition",i),t.dispatch($)}return}let c=t.state.doc.resolve(e),A=c.sharedDepth(s);e=c.before(A+1),s=t.state.doc.resolve(s).after(A+1);let d=t.state.selection,f=rD(t,e,s),u=t.state.doc,p=u.slice(f.from,f.to),x,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(x=t.state.selection.to,m="end"):(x=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let j=cD(p.content,f.doc.content,f.from,x,m);if(j&&t.input.domChangeCount++,($f&&t.input.lastIOSEnter>Date.now()-225||ud)&&a.some(H=>H.nodeType==1&&!aD.test(H.nodeName))&&(!j||j.endA>=j.endB)&&t.someProp("handleKeyDown",H=>H(t,bh(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!j)if(n&&d instanceof Fs&&!d.empty&&d.$head.sameParent(d.$anchor)&&!t.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))j={start:d.from,endA:d.to,endB:d.to};else{if(f.sel){let H=LN(t,t.state.doc,f.sel);if(H&&!H.eq(t.state.selection)){let ee=t.state.tr.setSelection(H);i&&ee.setMeta("composition",i),t.dispatch(ee)}}return}t.state.selection.from<t.state.selection.to&&j.start==j.endB&&t.state.selection instanceof Fs&&(j.start>t.state.selection.from&&j.start<=t.state.selection.from+2&&t.state.selection.from>=f.from?j.start=t.state.selection.from:j.endA<t.state.selection.to&&j.endA>=t.state.selection.to-2&&t.state.selection.to<=f.to&&(j.endB+=t.state.selection.to-j.endA,j.endA=t.state.selection.to)),$l&&Nu<=11&&j.endB==j.start+1&&j.endA==j.start&&j.start>f.from&&f.doc.textBetween(j.start-f.from-1,j.start-f.from+1)==" "&&(j.start--,j.endA--,j.endB--);let w=f.doc.resolveNoCache(j.start-f.from),S=f.doc.resolveNoCache(j.endB-f.from),C=u.resolve(j.start),F=w.sameParent(S)&&w.parent.inlineContent&&C.end()>=j.endA;if(($f&&t.input.lastIOSEnter>Date.now()-225&&(!F||a.some(H=>H.nodeName=="DIV"||H.nodeName=="P"))||!F&&w.pos<f.doc.content.size&&(!w.sameParent(S)||!w.parent.inlineContent)&&w.pos<S.pos&&!/\S/.test(f.doc.textBetween(w.pos,S.pos,"","")))&&t.someProp("handleKeyDown",H=>H(t,bh(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>j.start&&oD(u,j.start,j.endA,w,S)&&t.someProp("handleKeyDown",H=>H(t,bh(8,"Backspace")))){ud&&si&&t.domObserver.suppressSelectionUpdates();return}si&&j.endB==j.start&&(t.input.lastChromeDelete=Date.now()),ud&&!F&&w.start()!=S.start()&&S.parentOffset==0&&w.depth==S.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==j.endA&&(j.endB-=2,S=f.doc.resolveNoCache(j.endB-f.from),setTimeout(()=>{t.someProp("handleKeyDown",function(H){return H(t,bh(13,"Enter"))})},20));let U=j.start,_=j.endA,z=H=>{let ee=H||t.state.tr.replace(U,_,f.doc.slice(j.start-f.from,j.endB-f.from));if(f.sel){let $=LN(t,ee.doc,f.sel);$&&!(si&&t.composing&&$.empty&&(j.start!=j.endB||t.input.lastChromeDelete<Date.now()-100)&&($.head==U||$.head==ee.mapping.map(_)-1)||$l&&$.empty&&$.head==U)&&ee.setSelection($)}return i&&ee.setMeta("composition",i),ee.scrollIntoView()},I;if(F)if(w.pos==S.pos){$l&&Nu<=11&&w.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>pd(t),20));let H=z(t.state.tr.delete(U,_)),ee=u.resolve(j.start).marksAcross(u.resolve(j.endA));ee&&H.ensureMarks(ee),t.dispatch(H)}else if(j.endA==j.endB&&(I=lD(w.parent.content.cut(w.parentOffset,S.parentOffset),C.parent.content.cut(C.parentOffset,j.endA-C.start())))){let H=z(t.state.tr);I.type=="add"?H.addMark(U,_,I.mark):H.removeMark(U,_,I.mark),t.dispatch(H)}else if(w.parent.child(w.index()).isText&&w.index()==S.index()-(S.textOffset?0:1)){let H=w.parent.textBetween(w.parentOffset,S.parentOffset),ee=()=>z(t.state.tr.insertText(H,U,_));t.someProp("handleTextInput",$=>$(t,U,_,H,ee))||t.dispatch(ee())}else t.dispatch(z());else t.dispatch(z())}function LN(t,e,s){return Math.max(s.anchor,s.head)>e.content.size?null:l2(t,e.resolve(s.anchor),e.resolve(s.head))}function lD(t,e){let s=t.firstChild.marks,n=e.firstChild.marks,a=s,i=n,c,A,d;for(let u=0;u<n.length;u++)a=n[u].removeFromSet(a);for(let u=0;u<s.length;u++)i=s[u].removeFromSet(i);if(a.length==1&&i.length==0)A=a[0],c="add",d=u=>u.mark(A.addToSet(u.marks));else if(a.length==0&&i.length==1)A=i[0],c="remove",d=u=>u.mark(A.removeFromSet(u.marks));else return null;let f=[];for(let u=0;u<e.childCount;u++)f.push(d(e.child(u)));if(St.from(f).eq(t))return{mark:A,type:c}}function oD(t,e,s,n,a){if(s-e<=a.pos-n.pos||av(n,!0,!1)<a.pos)return!1;let i=t.resolve(e);if(!n.parent.isTextblock){let A=i.nodeAfter;return A!=null&&s==e+A.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let c=t.resolve(av(i,!0,!0));return!c.parent.isTextblock||c.pos>s||av(c,!0,!1)<s?!1:n.parent.content.cut(n.parentOffset).eq(c.parent.content)}function av(t,e,s){let n=t.depth,a=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,a++,e=!1;if(s){let i=t.node(n).maybeChild(t.indexAfter(n));for(;i&&!i.isLeaf;)i=i.firstChild,a++}return a}function cD(t,e,s,n,a){let i=t.findDiffStart(e,s);if(i==null)return null;let{a:c,b:A}=t.findDiffEnd(e,s+t.size,s+e.size);if(a=="end"){let d=Math.max(0,i-Math.min(c,A));n-=c+d-i}if(c<i&&t.size<e.size){let d=n<=i&&n>=c?i-n:0;i-=d,i&&i<e.size&&MN(e.textBetween(i-1,i+1))&&(i+=d?1:-1),A=i+(A-c),c=i}else if(A<i){let d=n<=i&&n>=A?i-n:0;i-=d,i&&i<t.size&&MN(t.textBetween(i-1,i+1))&&(i+=d?1:-1),c=i+(c-A),A=i}return{start:i,endA:c,endB:A}}function MN(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),s=t.charCodeAt(1);return e>=56320&&e<=57343&&s>=55296&&s<=56319}class OC{constructor(e,s){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new kO,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=s,this.state=s.state,this.directPlugins=s.plugins||[],this.directPlugins.forEach(DN),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=IN(this),_N(this),this.nodeViews=ON(this),this.docView=pN(this.state.doc,QN(this),nv(this),this.dom,this),this.domObserver=new ZO(this,(n,a,i,c)=>iD(this,n,a,i,c)),this.domObserver.start(),CO(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let s in e)this._props[s]=e[s];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&uy(this);let s=this._props;this._props=e,e.plugins&&(e.plugins.forEach(DN),this.directPlugins=e.plugins),this.updateStateInner(e.state,s)}setProps(e){let s={};for(let n in this._props)s[n]=this._props[n];s.state=this.state;for(let n in e)s[n]=e[n];this.update(s)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,s){var n;let a=this.state,i=!1,c=!1;e.storedMarks&&this.composing&&(UC(this),c=!0),this.state=e;let A=a.plugins!=e.plugins||this._props.plugins!=s.plugins;if(A||this._props.plugins!=s.plugins||this._props.nodeViews!=s.nodeViews){let m=ON(this);dD(m,this.nodeViews)&&(this.nodeViews=m,i=!0)}(A||s.handleDOMEvents!=this._props.handleDOMEvents)&&uy(this),this.editable=IN(this),_N(this);let d=nv(this),f=QN(this),u=a.plugins!=e.plugins&&!a.doc.eq(e.doc)?"reset":e.scrollToSelection>a.scrollToSelection?"to selection":"preserve",p=i||!this.docView.matchesNode(e.doc,f,d);(p||!e.selection.eq(a.selection))&&(c=!0);let x=u=="preserve"&&c&&this.dom.style.overflowAnchor==null&&H7(this);if(c){this.domObserver.stop();let m=p&&($l||si)&&!this.composing&&!a.selection.empty&&!e.selection.empty&&AD(a.selection,e.selection);if(p){let j=si?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=HO(this)),(i||!this.docView.update(e.doc,f,d,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=pN(e.doc,f,d,this.dom,this)),j&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&dO(this))?pd(this,m):(bC(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(a),!((n=this.dragging)===null||n===void 0)&&n.node&&!a.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,a),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():x&&P7(x)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",s=>s(this)))if(this.state.selection instanceof ys){let s=this.docView.domAfterPos(this.state.selection.from);s.nodeType==1&&cN(this,s.getBoundingClientRect(),e)}else cN(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let s=0;s<this.directPlugins.length;s++){let n=this.directPlugins[s];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let s=0;s<this.state.plugins.length;s++){let n=this.state.plugins[s];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let s=0;s<this.pluginViews.length;s++){let n=this.pluginViews[s];n.update&&n.update(this,e)}}updateDraggedNode(e,s){let n=e.node,a=-1;if(this.state.doc.nodeAt(n.from)==n.node)a=n.from;else{let i=n.from+(this.state.doc.content.size-s.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==n.node&&(a=i)}this.dragging=new LC(e.slice,e.move,a<0?void 0:ys.create(this.state.doc,a))}someProp(e,s){let n=this._props&&this._props[e],a;if(n!=null&&(a=s?s(n):n))return a;for(let c=0;c<this.directPlugins.length;c++){let A=this.directPlugins[c].props[e];if(A!=null&&(a=s?s(A):A))return a}let i=this.state.plugins;if(i)for(let c=0;c<i.length;c++){let A=i[c].props[e];if(A!=null&&(a=s?s(A):A))return a}}hasFocus(){if($l){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&z7(this.dom),pd(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let s=this.dom.parentNode;s;s=s.parentNode)if(s.nodeType==9||s.nodeType==11&&s.host)return s.getSelection||(Object.getPrototypeOf(s).getSelection=()=>s.ownerDocument.getSelection()),this._root=s}return e||document}updateRoot(){this._root=null}posAtCoords(e){return q7(this,e)}coordsAtPos(e,s=1){return dC(this,e,s)}domAtPos(e,s=0){return this.docView.domFromPos(e,s)}nodeDOM(e){let s=this.docView.descAt(e);return s?s.nodeDOM:null}posAtDOM(e,s,n=-1){let a=this.docView.posFromDOM(e,s,n);if(a==null)throw new RangeError("DOM position not inside the editor");return a}endOfTextblock(e,s){return Z7(this,s||this.state,e)}pasteHTML(e,s){return Ip(this,"",e,!1,s||new ClipboardEvent("paste"))}pasteText(e,s){return Ip(this,e,null,!0,s||new ClipboardEvent("paste"))}serializeForClipboard(e){return o2(this,e)}destroy(){this.docView&&(SO(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],nv(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,U7())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return TO(this,e)}domSelectionRange(){let e=this.domSelection();return e?sl&&this.root.nodeType===11&&_7(this.dom.ownerDocument)==this.dom&&tD(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}OC.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function QN(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",s=>{if(typeof s=="function"&&(s=s(t.state)),s)for(let n in s)n=="class"?e.class+=" "+s[n]:n=="style"?e.style=(e.style?e.style+";":"")+s[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(s[n]))}),e.translate||(e.translate="no"),[vl.node(0,t.state.doc.content.size,e)]}function _N(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:vl.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function IN(t){return!t.someProp("editable",e=>e(t.state)===!1)}function AD(t,e){let s=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(s)!=e.$anchor.start(s)}function ON(t){let e=Object.create(null);function s(n){for(let a in n)Object.prototype.hasOwnProperty.call(e,a)||(e[a]=n[a])}return t.someProp("nodeViews",s),t.someProp("markViews",s),e}function dD(t,e){let s=0,n=0;for(let a in t){if(t[a]!=e[a])return!0;s++}for(let a in e)n++;return s!=n}function DN(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Eu={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},hx={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},uD=typeof navigator<"u"&&/Mac/.test(navigator.platform),hD=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var yi=0;yi<10;yi++)Eu[48+yi]=Eu[96+yi]=String(yi);for(var yi=1;yi<=24;yi++)Eu[yi+111]="F"+yi;for(var yi=65;yi<=90;yi++)Eu[yi]=String.fromCharCode(yi+32),hx[yi]=String.fromCharCode(yi);for(var iv in Eu)hx.hasOwnProperty(iv)||(hx[iv]=Eu[iv]);function fD(t){var e=uD&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||hD&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",s=!e&&t.key||(t.shiftKey?hx:Eu)[t.keyCode]||t.key||"Unidentified";return s=="Esc"&&(s="Escape"),s=="Del"&&(s="Delete"),s=="Left"&&(s="ArrowLeft"),s=="Up"&&(s="ArrowUp"),s=="Right"&&(s="ArrowRight"),s=="Down"&&(s="ArrowDown"),s}const pD=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),mD=typeof navigator<"u"&&/Win/.test(navigator.platform);function gD(t){let e=t.split(/-(?!$)/),s=e[e.length-1];s=="Space"&&(s=" ");let n,a,i,c;for(let A=0;A<e.length-1;A++){let d=e[A];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))n=!0;else if(/^(c|ctrl|control)$/i.test(d))a=!0;else if(/^s(hift)?$/i.test(d))i=!0;else if(/^mod$/i.test(d))pD?c=!0:a=!0;else throw new Error("Unrecognized modifier name: "+d)}return n&&(s="Alt-"+s),a&&(s="Ctrl-"+s),c&&(s="Meta-"+s),i&&(s="Shift-"+s),s}function xD(t){let e=Object.create(null);for(let s in t)e[gD(s)]=t[s];return e}function lv(t,e,s=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),s&&e.shiftKey&&(t="Shift-"+t),t}function bD(t){return new Vn({props:{handleKeyDown:DC(t)}})}function DC(t){let e=xD(t);return function(s,n){let a=fD(n),i,c=e[lv(a,n)];if(c&&c(s.state,s.dispatch,s))return!0;if(a.length==1&&a!=" "){if(n.shiftKey){let A=e[lv(a,n,!1)];if(A&&A(s.state,s.dispatch,s))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(mD&&n.ctrlKey&&n.altKey)&&(i=Eu[n.keyCode])&&i!=a){let A=e[lv(i,n)];if(A&&A(s.state,s.dispatch,s))return!0}}return!1}}var vD=Object.defineProperty,f2=(t,e)=>{for(var s in e)vD(t,s,{get:e[s],enumerable:!0})};function bb(t){const{state:e,transaction:s}=t;let{selection:n}=s,{doc:a}=s,{storedMarks:i}=s;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return n},get doc(){return a},get tr(){return n=s.selection,a=s.doc,i=s.storedMarks,s}}}var vb=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:s}=this,{view:n}=e,{tr:a}=s,i=this.buildProps(a);return Object.fromEntries(Object.entries(t).map(([c,A])=>[c,(...f)=>{const u=A(...f)(i);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(a),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:s,editor:n,state:a}=this,{view:i}=n,c=[],A=!!t,d=t||a.tr,f=()=>(!A&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(d),c.every(p=>p===!0)),u={...Object.fromEntries(Object.entries(s).map(([p,x])=>[p,(...j)=>{const w=this.buildProps(d,e),S=x(...j)(w);return c.push(S),u}])),run:f};return u}createCan(t){const{rawCommands:e,state:s}=this,n=!1,a=t||s.tr,i=this.buildProps(a,n);return{...Object.fromEntries(Object.entries(e).map(([A,d])=>[A,(...f)=>d(...f)({...i,dispatch:void 0})])),chain:()=>this.createChain(a,n)}}buildProps(t,e=!0){const{rawCommands:s,editor:n,state:a}=this,{view:i}=n,c={tr:t,editor:n,view:i,state:bb({state:a,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(s).map(([A,d])=>[A,(...f)=>d(...f)(c)]))}};return c}},RC={};f2(RC,{blur:()=>yD,clearContent:()=>wD,clearNodes:()=>jD,command:()=>ND,createParagraphNear:()=>BD,cut:()=>kD,deleteCurrentNode:()=>CD,deleteNode:()=>SD,deleteRange:()=>ED,deleteSelection:()=>TD,enter:()=>UD,exitCode:()=>FD,extendMarkRange:()=>LD,first:()=>MD,focus:()=>_D,forEach:()=>ID,insertContent:()=>OD,insertContentAt:()=>HD,joinBackward:()=>KD,joinDown:()=>zD,joinForward:()=>VD,joinItemBackward:()=>$D,joinItemForward:()=>GD,joinTextblockBackward:()=>qD,joinTextblockForward:()=>YD,joinUp:()=>PD,keyboardShortcut:()=>WD,lift:()=>XD,liftEmptyBlock:()=>ZD,liftListItem:()=>eR,newlineInCode:()=>tR,resetAttributes:()=>sR,scrollIntoView:()=>rR,selectAll:()=>nR,selectNodeBackward:()=>aR,selectNodeForward:()=>iR,selectParentNode:()=>lR,selectTextblockEnd:()=>oR,selectTextblockStart:()=>cR,setContent:()=>AR,setMark:()=>TR,setMeta:()=>UR,setNode:()=>FR,setNodeSelection:()=>LR,setTextDirection:()=>MR,setTextSelection:()=>QR,sinkListItem:()=>_R,splitBlock:()=>IR,splitListItem:()=>OR,toggleList:()=>DR,toggleMark:()=>RR,toggleNode:()=>HR,toggleWrap:()=>PR,undoInputRule:()=>zR,unsetAllMarks:()=>KR,unsetMark:()=>VR,unsetTextDirection:()=>$R,updateAttributes:()=>GR,wrapIn:()=>qR,wrapInList:()=>YR});var yD=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var s;t.isDestroyed||(e.dom.blur(),(s=window==null?void 0:window.getSelection())==null||s.removeAllRanges())}),!0),wD=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),jD=()=>({state:t,tr:e,dispatch:s})=>{const{selection:n}=e,{ranges:a}=n;return s&&a.forEach(({$from:i,$to:c})=>{t.doc.nodesBetween(i.pos,c.pos,(A,d)=>{if(A.type.isText)return;const{doc:f,mapping:u}=e,p=f.resolve(u.map(d)),x=f.resolve(u.map(d+A.nodeSize)),m=p.blockRange(x);if(!m)return;const j=s0(m);if(A.type.isTextblock){const{defaultType:w}=p.parent.contentMatchAt(p.index());e.setNodeMarkup(m.start,w)}(j||j===0)&&e.lift(m,j)})}),!0},ND=t=>e=>t(e),BD=()=>({state:t,dispatch:e})=>eC(t,e),kD=(t,e)=>({editor:s,tr:n})=>{const{state:a}=s,i=a.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const c=n.mapping.map(e);return n.insert(c,i.content),n.setSelection(new Fs(n.doc.resolve(Math.max(c-1,0)))),!0},CD=()=>({tr:t,dispatch:e})=>{const{selection:s}=t,n=s.$anchor.node();if(n.content.size>0)return!1;const a=t.selection.$anchor;for(let i=a.depth;i>0;i-=1)if(a.node(i).type===n.type){if(e){const A=a.before(i),d=a.after(i);t.delete(A,d).scrollIntoView()}return!0}return!1};function Ua(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var SD=t=>({tr:e,state:s,dispatch:n})=>{const a=Ua(t,s.schema),i=e.selection.$anchor;for(let c=i.depth;c>0;c-=1)if(i.node(c).type===a){if(n){const d=i.before(c),f=i.after(c);e.delete(d,f).scrollIntoView()}return!0}return!1},ED=t=>({tr:e,dispatch:s})=>{const{from:n,to:a}=t;return s&&e.delete(n,a),!0},TD=()=>({state:t,dispatch:e})=>e2(t,e),UD=()=>({commands:t})=>t.keyboardShortcut("Enter"),FD=()=>({state:t,dispatch:e})=>m7(t,e);function p2(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function fx(t,e,s={strict:!0}){const n=Object.keys(e);return n.length?n.every(a=>s.strict?e[a]===t[a]:p2(e[a])?e[a].test(t[a]):e[a]===t[a]):!0}function HC(t,e,s={}){return t.find(n=>n.type===e&&fx(Object.fromEntries(Object.keys(s).map(a=>[a,n.attrs[a]])),s))}function RN(t,e,s={}){return!!HC(t,e,s)}function m2(t,e,s){var n;if(!t||!e)return;let a=t.parent.childAfter(t.parentOffset);if((!a.node||!a.node.marks.some(u=>u.type===e))&&(a=t.parent.childBefore(t.parentOffset)),!a.node||!a.node.marks.some(u=>u.type===e)||(s=s||((n=a.node.marks[0])==null?void 0:n.attrs),!HC([...a.node.marks],e,s)))return;let c=a.index,A=t.start()+a.offset,d=c+1,f=A+a.node.nodeSize;for(;c>0&&RN([...t.parent.child(c-1).marks],e,s);)c-=1,A-=t.parent.child(c).nodeSize;for(;d<t.parent.childCount&&RN([...t.parent.child(d).marks],e,s);)f+=t.parent.child(d).nodeSize,d+=1;return{from:A,to:f}}function gd(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var LD=(t,e={})=>({tr:s,state:n,dispatch:a})=>{const i=gd(t,n.schema),{doc:c,selection:A}=s,{$from:d,from:f,to:u}=A;if(a){const p=m2(d,i,e);if(p&&p.from<=f&&p.to>=u){const x=Fs.create(c,p.from,p.to);s.setSelection(x)}}return!0},MD=t=>e=>{const s=typeof t=="function"?t(e):t;for(let n=0;n<s.length;n+=1)if(s[n](e))return!0;return!1};function PC(t){return t instanceof Fs}function jh(t=0,e=0,s=0){return Math.min(Math.max(t,e),s)}function zC(t,e=null){if(!e)return null;const s=Vs.atStart(t),n=Vs.atEnd(t);if(e==="start"||e===!0)return s;if(e==="end")return n;const a=s.from,i=n.to;return e==="all"?Fs.create(t,jh(0,a,i),jh(t.content.size,a,i)):Fs.create(t,jh(e,a,i),jh(e,a,i))}function QD(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function g2(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var _D=(t=null,e={})=>({editor:s,view:n,tr:a,dispatch:i})=>{e={scrollIntoView:!0,...e};const c=()=>{(g2()||QD())&&n.dom.focus(),requestAnimationFrame(()=>{s.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&s.commands.scrollIntoView())})};if(n.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!PC(s.state.selection))return c(),!0;const A=zC(a.doc,t)||s.state.selection,d=s.state.selection.eq(A);return i&&(d||a.setSelection(A),d&&a.storedMarks&&a.setStoredMarks(a.storedMarks),c()),!0},ID=(t,e)=>s=>t.every((n,a)=>e(n,{...s,index:a})),OD=(t,e)=>({tr:s,commands:n})=>n.insertContentAt({from:s.selection.from,to:s.selection.to},t,e),KC=t=>{const e=t.childNodes;for(let s=e.length-1;s>=0;s-=1){const n=e[s];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&KC(n)}return t};function Ag(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,s=new window.DOMParser().parseFromString(e,"text/html").body;return KC(s)}function Dp(t,e,s){if(t instanceof ju||t instanceof St)return t;s={slice:!0,parseOptions:{},...s};const n=typeof t=="object"&&t!==null,a=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return St.fromArray(t.map(A=>e.nodeFromJSON(A)));const c=e.nodeFromJSON(t);return s.errorOnInvalidContent&&c.check(),c}catch(i){if(s.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),Dp("",e,s)}if(a){if(s.errorOnInvalidContent){let c=!1,A="";const d=new Ck({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(c=!0,A=typeof f=="string"?f:f.outerHTML,null)}]}})});if(s.slice?pp.fromSchema(d).parseSlice(Ag(t),s.parseOptions):pp.fromSchema(d).parse(Ag(t),s.parseOptions),s.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${A}`)})}const i=pp.fromSchema(e);return s.slice?i.parseSlice(Ag(t),s.parseOptions).content:i.parse(Ag(t),s.parseOptions)}return Dp("",e,s)}function DD(t,e,s){const n=t.steps.length-1;if(n<e)return;const a=t.steps[n];if(!(a instanceof ti||a instanceof ri))return;const i=t.mapping.maps[n];let c=0;i.forEach((A,d,f,u)=>{c===0&&(c=u)}),t.setSelection(Vs.near(t.doc.resolve(c),s))}var RD=t=>!("type"in t),HD=(t,e,s)=>({tr:n,dispatch:a,editor:i})=>{var c;if(a){s={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...s};let A;const d=S=>{i.emit("contentError",{editor:i,error:S,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...s.parseOptions};if(!s.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Dp(e,i.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(S){d(S)}try{A=Dp(e,i.schema,{parseOptions:f,errorOnInvalidContent:(c=s.errorOnInvalidContent)!=null?c:i.options.enableContentCheck})}catch(S){return d(S),!1}let{from:u,to:p}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},x=!0,m=!0;if((RD(A)?A:[A]).forEach(S=>{S.check(),x=x?S.isText&&S.marks.length===0:!1,m=m?S.isBlock:!1}),u===p&&m){const{parent:S}=n.doc.resolve(u);S.isTextblock&&!S.type.spec.code&&!S.childCount&&(u-=1,p+=1)}let w;if(x){if(Array.isArray(e))w=e.map(S=>S.text||"").join("");else if(e instanceof St){let S="";e.forEach(C=>{C.text&&(S+=C.text)}),w=S}else typeof e=="object"&&e&&e.text?w=e.text:w=e;n.insertText(w,u,p)}else{w=A;const S=n.doc.resolve(u),C=S.node(),F=S.parentOffset===0,U=C.isText||C.isTextblock,_=C.content.size>0;F&&U&&_&&(u=Math.max(0,u-1)),n.replaceWith(u,p,w)}s.updateSelection&&DD(n,n.steps.length-1,-1),s.applyInputRules&&n.setMeta("applyInputRules",{from:u,text:w}),s.applyPasteRules&&n.setMeta("applyPasteRules",{from:u,text:w})}return!0},PD=()=>({state:t,dispatch:e})=>h7(t,e),zD=()=>({state:t,dispatch:e})=>f7(t,e),KD=()=>({state:t,dispatch:e})=>Gk(t,e),VD=()=>({state:t,dispatch:e})=>Wk(t,e),$D=()=>({state:t,dispatch:e,tr:s})=>{try{const n=hb(t.doc,t.selection.$from.pos,-1);return n==null?!1:(s.join(n,2),e&&e(s),!0)}catch{return!1}},GD=()=>({state:t,dispatch:e,tr:s})=>{try{const n=hb(t.doc,t.selection.$from.pos,1);return n==null?!1:(s.join(n,2),e&&e(s),!0)}catch{return!1}},qD=()=>({state:t,dispatch:e})=>d7(t,e),YD=()=>({state:t,dispatch:e})=>u7(t,e);function VC(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function JD(t){const e=t.split(/-(?!$)/);let s=e[e.length-1];s==="Space"&&(s=" ");let n,a,i,c;for(let A=0;A<e.length-1;A+=1){const d=e[A];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))n=!0;else if(/^(c|ctrl|control)$/i.test(d))a=!0;else if(/^s(hift)?$/i.test(d))i=!0;else if(/^mod$/i.test(d))g2()||VC()?c=!0:a=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return n&&(s=`Alt-${s}`),a&&(s=`Ctrl-${s}`),c&&(s=`Meta-${s}`),i&&(s=`Shift-${s}`),s}var WD=t=>({editor:e,view:s,tr:n,dispatch:a})=>{const i=JD(t).split(/-(?!$)/),c=i.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),A=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{s.someProp("handleKeyDown",f=>f(s,A))});return d==null||d.steps.forEach(f=>{const u=f.map(n.mapping);u&&a&&n.maybeStep(u)}),!0};function Tu(t,e,s={}){const{from:n,to:a,empty:i}=t.selection,c=e?Ua(e,t.schema):null,A=[];t.doc.nodesBetween(n,a,(p,x)=>{if(p.isText)return;const m=Math.max(n,x),j=Math.min(a,x+p.nodeSize);A.push({node:p,from:m,to:j})});const d=a-n,f=A.filter(p=>c?c.name===p.node.type.name:!0).filter(p=>fx(p.node.attrs,s,{strict:!1}));return i?!!f.length:f.reduce((p,x)=>p+x.to-x.from,0)>=d}var XD=(t,e={})=>({state:s,dispatch:n})=>{const a=Ua(t,s.schema);return Tu(s,a,e)?p7(s,n):!1},ZD=()=>({state:t,dispatch:e})=>tC(t,e),eR=t=>({state:e,dispatch:s})=>{const n=Ua(t,e.schema);return C7(n)(e,s)},tR=()=>({state:t,dispatch:e})=>Zk(t,e);function yb(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function HN(t,e){const s=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,a)=>(s.includes(a)||(n[a]=t[a]),n),{})}var sR=(t,e)=>({tr:s,state:n,dispatch:a})=>{let i=null,c=null;const A=yb(typeof t=="string"?t:t.name,n.schema);if(!A)return!1;A==="node"&&(i=Ua(t,n.schema)),A==="mark"&&(c=gd(t,n.schema));let d=!1;return s.selection.ranges.forEach(f=>{n.doc.nodesBetween(f.$from.pos,f.$to.pos,(u,p)=>{i&&i===u.type&&(d=!0,a&&s.setNodeMarkup(p,void 0,HN(u.attrs,e))),c&&u.marks.length&&u.marks.forEach(x=>{c===x.type&&(d=!0,a&&s.addMark(p,p+u.nodeSize,c.create(HN(x.attrs,e))))})})}),d},rR=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),nR=()=>({tr:t,dispatch:e})=>{if(e){const s=new Bo(t.doc);t.setSelection(s)}return!0},aR=()=>({state:t,dispatch:e})=>Yk(t,e),iR=()=>({state:t,dispatch:e})=>Xk(t,e),lR=()=>({state:t,dispatch:e})=>b7(t,e),oR=()=>({state:t,dispatch:e})=>w7(t,e),cR=()=>({state:t,dispatch:e})=>y7(t,e);function hy(t,e,s={},n={}){return Dp(t,e,{slice:!1,parseOptions:s,errorOnInvalidContent:n.errorOnInvalidContent})}var AR=(t,{errorOnInvalidContent:e,emitUpdate:s=!0,parseOptions:n={}}={})=>({editor:a,tr:i,dispatch:c,commands:A})=>{const{doc:d}=i;if(n.preserveWhitespace!=="full"){const f=hy(t,a.schema,n,{errorOnInvalidContent:e??a.options.enableContentCheck});return c&&i.replaceWith(0,d.content.size,f).setMeta("preventUpdate",!s),!0}return c&&i.setMeta("preventUpdate",!s),A.insertContentAt({from:0,to:d.content.size},t,{parseOptions:n,errorOnInvalidContent:e??a.options.enableContentCheck})};function $C(t,e){const s=gd(e,t.schema),{from:n,to:a,empty:i}=t.selection,c=[];i?(t.storedMarks&&c.push(...t.storedMarks),c.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,a,d=>{c.push(...d.marks)});const A=c.find(d=>d.type.name===s.name);return A?{...A.attrs}:{}}function GC(t,e){const s=new zk(t);return e.forEach(n=>{n.steps.forEach(a=>{s.step(a)})}),s}function dR(t){for(let e=0;e<t.edgeCount;e+=1){const{type:s}=t.edge(e);if(s.isTextblock&&!s.hasRequiredAttrs())return s}return null}function uR(t,e,s){const n=[];return t.nodesBetween(e.from,e.to,(a,i)=>{s(a)&&n.push({node:a,pos:i})}),n}function hR(t,e){for(let s=t.depth;s>0;s-=1){const n=t.node(s);if(e(n))return{pos:s>0?t.before(s):0,start:t.start(s),depth:s,node:n}}}function wb(t){return e=>hR(e.$from,t)}function xs(t,e,s){return t.config[e]===void 0&&t.parent?xs(t.parent,e,s):typeof t.config[e]=="function"?t.config[e].bind({...s,parent:t.parent?xs(t.parent,e,s):null}):t.config[e]}function x2(t){return t.map(e=>{const s={name:e.name,options:e.options,storage:e.storage},n=xs(e,"addExtensions",s);return n?[e,...x2(n())]:e}).flat(10)}function b2(t,e){const s=Gh.fromSchema(e).serializeFragment(t),a=document.implementation.createHTMLDocument().createElement("div");return a.appendChild(s),a.innerHTML}function qC(t){return typeof t=="function"}function Dr(t,e=void 0,...s){return qC(t)?e?t.bind(e)(...s):t(...s):t}function fR(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Gf(t){const e=t.filter(a=>a.type==="extension"),s=t.filter(a=>a.type==="node"),n=t.filter(a=>a.type==="mark");return{baseExtensions:e,nodeExtensions:s,markExtensions:n}}function YC(t){const e=[],{nodeExtensions:s,markExtensions:n}=Gf(t),a=[...s,...n],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(c=>{const A={name:c.name,options:c.options,storage:c.storage,extensions:a},d=xs(c,"addGlobalAttributes",A);if(!d)return;d().forEach(u=>{u.types.forEach(p=>{Object.entries(u.attributes).forEach(([x,m])=>{e.push({type:p,name:x,attribute:{...i,...m}})})})})}),a.forEach(c=>{const A={name:c.name,options:c.options,storage:c.storage},d=xs(c,"addAttributes",A);if(!d)return;const f=d();Object.entries(f).forEach(([u,p])=>{const x={...i,...p};typeof(x==null?void 0:x.default)=="function"&&(x.default=x.default()),x!=null&&x.isRequired&&(x==null?void 0:x.default)===void 0&&delete x.default,e.push({type:c.name,name:u,attribute:x})})}),e}function Kn(...t){return t.filter(e=>!!e).reduce((e,s)=>{const n={...e};return Object.entries(s).forEach(([a,i])=>{if(!n[a]){n[a]=i;return}if(a==="class"){const A=i?String(i).split(" "):[],d=n[a]?n[a].split(" "):[],f=A.filter(u=>!d.includes(u));n[a]=[...d,...f].join(" ")}else if(a==="style"){const A=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],d=n[a]?n[a].split(";").map(u=>u.trim()).filter(Boolean):[],f=new Map;d.forEach(u=>{const[p,x]=u.split(":").map(m=>m.trim());f.set(p,x)}),A.forEach(u=>{const[p,x]=u.split(":").map(m=>m.trim());f.set(p,x)}),n[a]=Array.from(f.entries()).map(([u,p])=>`${u}: ${p}`).join("; ")}else n[a]=i}),n},{})}function px(t,e){return e.filter(s=>s.type===t.type.name).filter(s=>s.attribute.rendered).map(s=>s.attribute.renderHTML?s.attribute.renderHTML(t.attrs)||{}:{[s.name]:t.attrs[s.name]}).reduce((s,n)=>Kn(s,n),{})}function pR(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function PN(t,e){return"style"in t?t:{...t,getAttrs:s=>{const n=t.getAttrs?t.getAttrs(s):t.attrs;if(n===!1)return!1;const a=e.reduce((i,c)=>{const A=c.attribute.parseHTML?c.attribute.parseHTML(s):pR(s.getAttribute(c.name));return A==null?i:{...i,[c.name]:A}},{});return{...n,...a}}}}function zN(t){return Object.fromEntries(Object.entries(t).filter(([e,s])=>e==="attrs"&&fR(s)?!1:s!=null))}function KN(t){var e,s;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((s=t==null?void 0:t.attribute)==null?void 0:s.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function mR(t,e){var s;const n=YC(t),{nodeExtensions:a,markExtensions:i}=Gf(t),c=(s=a.find(f=>xs(f,"topNode")))==null?void 0:s.name,A=Object.fromEntries(a.map(f=>{const u=n.filter(C=>C.type===f.name),p={name:f.name,options:f.options,storage:f.storage,editor:e},x=t.reduce((C,F)=>{const U=xs(F,"extendNodeSchema",p);return{...C,...U?U(f):{}}},{}),m=zN({...x,content:Dr(xs(f,"content",p)),marks:Dr(xs(f,"marks",p)),group:Dr(xs(f,"group",p)),inline:Dr(xs(f,"inline",p)),atom:Dr(xs(f,"atom",p)),selectable:Dr(xs(f,"selectable",p)),draggable:Dr(xs(f,"draggable",p)),code:Dr(xs(f,"code",p)),whitespace:Dr(xs(f,"whitespace",p)),linebreakReplacement:Dr(xs(f,"linebreakReplacement",p)),defining:Dr(xs(f,"defining",p)),isolating:Dr(xs(f,"isolating",p)),attrs:Object.fromEntries(u.map(KN))}),j=Dr(xs(f,"parseHTML",p));j&&(m.parseDOM=j.map(C=>PN(C,u)));const w=xs(f,"renderHTML",p);w&&(m.toDOM=C=>w({node:C,HTMLAttributes:px(C,u)}));const S=xs(f,"renderText",p);return S&&(m.toText=S),[f.name,m]})),d=Object.fromEntries(i.map(f=>{const u=n.filter(S=>S.type===f.name),p={name:f.name,options:f.options,storage:f.storage,editor:e},x=t.reduce((S,C)=>{const F=xs(C,"extendMarkSchema",p);return{...S,...F?F(f):{}}},{}),m=zN({...x,inclusive:Dr(xs(f,"inclusive",p)),excludes:Dr(xs(f,"excludes",p)),group:Dr(xs(f,"group",p)),spanning:Dr(xs(f,"spanning",p)),code:Dr(xs(f,"code",p)),attrs:Object.fromEntries(u.map(KN))}),j=Dr(xs(f,"parseHTML",p));j&&(m.parseDOM=j.map(S=>PN(S,u)));const w=xs(f,"renderHTML",p);return w&&(m.toDOM=S=>w({mark:S,HTMLAttributes:px(S,u)})),[f.name,m]}));return new Ck({topNode:c,nodes:A,marks:d})}function gR(t){const e=t.filter((s,n)=>t.indexOf(s)!==n);return Array.from(new Set(e))}function v2(t){return t.sort((s,n)=>{const a=xs(s,"priority")||100,i=xs(n,"priority")||100;return a>i?-1:a<i?1:0})}function JC(t){const e=v2(x2(t)),s=gR(e.map(n=>n.name));return s.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${s.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function WC(t,e,s){const{from:n,to:a}=e,{blockSeparator:i=`

`,textSerializers:c={}}=s||{};let A="";return t.nodesBetween(n,a,(d,f,u,p)=>{var x;d.isBlock&&f>n&&(A+=i);const m=c==null?void 0:c[d.type.name];if(m)return u&&(A+=m({node:d,pos:f,parent:u,index:p,range:e})),!1;d.isText&&(A+=(x=d==null?void 0:d.text)==null?void 0:x.slice(Math.max(n,f)-f,a-f))}),A}function xR(t,e){const s={from:0,to:t.content.size};return WC(t,s,e)}function XC(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,s])=>[e,s.spec.toText]))}function bR(t,e){const s=Ua(e,t.schema),{from:n,to:a}=t.selection,i=[];t.doc.nodesBetween(n,a,A=>{i.push(A)});const c=i.reverse().find(A=>A.type.name===s.name);return c?{...c.attrs}:{}}function ZC(t,e){const s=yb(typeof e=="string"?e:e.name,t.schema);return s==="node"?bR(t,e):s==="mark"?$C(t,e):{}}function vR(t,e=JSON.stringify){const s={};return t.filter(n=>{const a=e(n);return Object.prototype.hasOwnProperty.call(s,a)?!1:s[a]=!0})}function yR(t){const e=vR(t);return e.length===1?e:e.filter((s,n)=>!e.filter((i,c)=>c!==n).some(i=>s.oldRange.from>=i.oldRange.from&&s.oldRange.to<=i.oldRange.to&&s.newRange.from>=i.newRange.from&&s.newRange.to<=i.newRange.to))}function e3(t){const{mapping:e,steps:s}=t,n=[];return e.maps.forEach((a,i)=>{const c=[];if(a.ranges.length)a.forEach((A,d)=>{c.push({from:A,to:d})});else{const{from:A,to:d}=s[i];if(A===void 0||d===void 0)return;c.push({from:A,to:d})}c.forEach(({from:A,to:d})=>{const f=e.slice(i).map(A,-1),u=e.slice(i).map(d),p=e.invert().map(f,-1),x=e.invert().map(u);n.push({oldRange:{from:p,to:x},newRange:{from:f,to:u}})})}),yR(n)}function y2(t,e,s){const n=[];return t===e?s.resolve(t).marks().forEach(a=>{const i=s.resolve(t),c=m2(i,a.type);c&&n.push({mark:a,...c})}):s.nodesBetween(t,e,(a,i)=>{!a||(a==null?void 0:a.nodeSize)===void 0||n.push(...a.marks.map(c=>({from:i,to:i+a.nodeSize,mark:c})))}),n}var wR=(t,e,s,n=20)=>{const a=t.doc.resolve(s);let i=n,c=null;for(;i>0&&c===null;){const A=a.node(i);(A==null?void 0:A.type.name)===e?c=A:i-=1}return[c,i]};function ov(t,e){return e.nodes[t]||e.marks[t]||null}function Fg(t,e,s){return Object.fromEntries(Object.entries(s).filter(([n])=>{const a=t.find(i=>i.type===e&&i.name===n);return a?a.attribute.keepOnSplit:!1}))}var jR=(t,e=500)=>{let s="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(a,i,c,A)=>{var d,f;const u=((f=(d=a.type.spec).toText)==null?void 0:f.call(d,{node:a,pos:i,parent:c,index:A}))||a.textContent||"%leaf%";s+=a.isAtom&&!a.isText?u:u.slice(0,Math.max(0,n-i))}),s};function fy(t,e,s={}){const{empty:n,ranges:a}=t.selection,i=e?gd(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(p=>i?i.name===p.type.name:!0).find(p=>fx(p.attrs,s,{strict:!1}));let c=0;const A=[];if(a.forEach(({$from:p,$to:x})=>{const m=p.pos,j=x.pos;t.doc.nodesBetween(m,j,(w,S)=>{if(!w.isText&&!w.marks.length)return;const C=Math.max(m,S),F=Math.min(j,S+w.nodeSize),U=F-C;c+=U,A.push(...w.marks.map(_=>({mark:_,from:C,to:F})))})}),c===0)return!1;const d=A.filter(p=>i?i.name===p.mark.type.name:!0).filter(p=>fx(p.mark.attrs,s,{strict:!1})).reduce((p,x)=>p+x.to-x.from,0),f=A.filter(p=>i?p.mark.type!==i&&p.mark.type.excludes(i):!0).reduce((p,x)=>p+x.to-x.from,0);return(d>0?d+f:d)>=c}function NR(t,e,s={}){if(!e)return Tu(t,null,s)||fy(t,null,s);const n=yb(e,t.schema);return n==="node"?Tu(t,e,s):n==="mark"?fy(t,e,s):!1}var BR=(t,e)=>{const{$from:s,$to:n,$anchor:a}=t.selection;if(e){const i=wb(A=>A.type.name===e)(t.selection);if(!i)return!1;const c=t.doc.resolve(i.pos+1);return a.pos+1===c.end()}return!(n.parentOffset<n.parent.nodeSize-2||s.pos!==n.pos)},kR=t=>{const{$from:e,$to:s}=t.selection;return!(e.parentOffset>0||e.pos!==s.pos)};function VN(t,e){return Array.isArray(e)?e.some(s=>(typeof s=="string"?s:s.name)===t.name):e}function $N(t,e){const{nodeExtensions:s}=Gf(e),n=s.find(c=>c.name===t);if(!n)return!1;const a={name:n.name,options:n.options,storage:n.storage},i=Dr(xs(n,"group",a));return typeof i!="string"?!1:i.split(" ").includes("list")}function jb(t,{checkChildren:e=!0,ignoreWhitespace:s=!1}={}){var n;if(s){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let a=!0;return t.content.forEach(i=>{a!==!1&&(jb(i,{ignoreWhitespace:s,checkChildren:e})||(a=!1))}),a}return!1}function t3(t){return t instanceof ys}var s3=class r3{constructor(e){this.position=e}static fromJSON(e){return new r3(e.position)}toJSON(){return{position:this.position}}};function CR(t,e){const s=e.mapping.mapResult(t.position);return{position:new s3(s.pos),mapResult:s}}function SR(t){return new s3(t)}function ER(t,e,s){var n;const{selection:a}=e;let i=null;if(PC(a)&&(i=a.$cursor),i){const A=(n=t.storedMarks)!=null?n:i.marks();return i.parent.type.allowsMarkType(s)&&(!!s.isInSet(A)||!A.some(f=>f.type.excludes(s)))}const{ranges:c}=a;return c.some(({$from:A,$to:d})=>{let f=A.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(s):!1;return t.doc.nodesBetween(A.pos,d.pos,(u,p,x)=>{if(f)return!1;if(u.isInline){const m=!x||x.type.allowsMarkType(s),j=!!s.isInSet(u.marks)||!u.marks.some(w=>w.type.excludes(s));f=m&&j}return!f}),f})}var TR=(t,e={})=>({tr:s,state:n,dispatch:a})=>{const{selection:i}=s,{empty:c,ranges:A}=i,d=gd(t,n.schema);if(a)if(c){const f=$C(n,d);s.addStoredMark(d.create({...f,...e}))}else A.forEach(f=>{const u=f.$from.pos,p=f.$to.pos;n.doc.nodesBetween(u,p,(x,m)=>{const j=Math.max(m,u),w=Math.min(m+x.nodeSize,p);x.marks.find(C=>C.type===d)?x.marks.forEach(C=>{d===C.type&&s.addMark(j,w,d.create({...C.attrs,...e}))}):s.addMark(j,w,d.create(e))})});return ER(n,s,d)},UR=(t,e)=>({tr:s})=>(s.setMeta(t,e),!0),FR=(t,e={})=>({state:s,dispatch:n,chain:a})=>{const i=Ua(t,s.schema);let c;return s.selection.$anchor.sameParent(s.selection.$head)&&(c=s.selection.$anchor.parent.attrs),i.isTextblock?a().command(({commands:A})=>iN(i,{...c,...e})(s)?!0:A.clearNodes()).command(({state:A})=>iN(i,{...c,...e})(A,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},LR=t=>({tr:e,dispatch:s})=>{if(s){const{doc:n}=e,a=jh(t,0,n.content.size),i=ys.create(n,a);e.setSelection(i)}return!0},MR=(t,e)=>({tr:s,state:n,dispatch:a})=>{const{selection:i}=n;let c,A;return typeof e=="number"?(c=e,A=e):e&&"from"in e&&"to"in e?(c=e.from,A=e.to):(c=i.from,A=i.to),a&&s.doc.nodesBetween(c,A,(d,f)=>{d.isText||s.setNodeMarkup(f,void 0,{...d.attrs,dir:t})}),!0},QR=t=>({tr:e,dispatch:s})=>{if(s){const{doc:n}=e,{from:a,to:i}=typeof t=="number"?{from:t,to:t}:t,c=Fs.atStart(n).from,A=Fs.atEnd(n).to,d=jh(a,c,A),f=jh(i,c,A),u=Fs.create(n,d,f);e.setSelection(u)}return!0},_R=t=>({state:e,dispatch:s})=>{const n=Ua(t,e.schema);return T7(n)(e,s)};function GN(t,e){const s=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(s){const n=s.filter(a=>e==null?void 0:e.includes(a.type.name));t.tr.ensureMarks(n)}}var IR=({keepMarks:t=!0}={})=>({tr:e,state:s,dispatch:n,editor:a})=>{const{selection:i,doc:c}=e,{$from:A,$to:d}=i,f=a.extensionManager.attributes,u=Fg(f,A.node().type.name,A.node().attrs);if(i instanceof ys&&i.node.isBlock)return!A.parentOffset||!fd(c,A.pos)?!1:(n&&(t&&GN(s,a.extensionManager.splittableMarks),e.split(A.pos).scrollIntoView()),!0);if(!A.parent.isBlock)return!1;const p=d.parentOffset===d.parent.content.size,x=A.depth===0?void 0:dR(A.node(-1).contentMatchAt(A.indexAfter(-1)));let m=p&&x?[{type:x,attrs:u}]:void 0,j=fd(e.doc,e.mapping.map(A.pos),1,m);if(!m&&!j&&fd(e.doc,e.mapping.map(A.pos),1,x?[{type:x}]:void 0)&&(j=!0,m=x?[{type:x,attrs:u}]:void 0),n){if(j&&(i instanceof Fs&&e.deleteSelection(),e.split(e.mapping.map(A.pos),1,m),x&&!p&&!A.parentOffset&&A.parent.type!==x)){const w=e.mapping.map(A.before()),S=e.doc.resolve(w);A.node(-1).canReplaceWith(S.index(),S.index()+1,x)&&e.setNodeMarkup(e.mapping.map(A.before()),x)}t&&GN(s,a.extensionManager.splittableMarks),e.scrollIntoView()}return j},OR=(t,e={})=>({tr:s,state:n,dispatch:a,editor:i})=>{var c;const A=Ua(t,n.schema),{$from:d,$to:f}=n.selection,u=n.selection.node;if(u&&u.isBlock||d.depth<2||!d.sameParent(f))return!1;const p=d.node(-1);if(p.type!==A)return!1;const x=i.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==A||d.index(-2)!==d.node(-2).childCount-1)return!1;if(a){let C=St.empty;const F=d.index(-1)?1:d.index(-2)?2:3;for(let ee=d.depth-F;ee>=d.depth-3;ee-=1)C=St.from(d.node(ee).copy(C));const U=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,_={...Fg(x,d.node().type.name,d.node().attrs),...e},z=((c=A.contentMatch.defaultType)==null?void 0:c.createAndFill(_))||void 0;C=C.append(St.from(A.createAndFill(null,z)||void 0));const I=d.before(d.depth-(F-1));s.replace(I,d.after(-U),new Jt(C,4-F,0));let H=-1;s.doc.nodesBetween(I,s.doc.content.size,(ee,$)=>{if(H>-1)return!1;ee.isTextblock&&ee.content.size===0&&(H=$+1)}),H>-1&&s.setSelection(Fs.near(s.doc.resolve(H))),s.scrollIntoView()}return!0}const m=f.pos===d.end()?p.contentMatchAt(0).defaultType:null,j={...Fg(x,p.type.name,p.attrs),...e},w={...Fg(x,d.node().type.name,d.node().attrs),...e};s.delete(d.pos,f.pos);const S=m?[{type:A,attrs:j},{type:m,attrs:w}]:[{type:A,attrs:j}];if(!fd(s.doc,d.pos,2))return!1;if(a){const{selection:C,storedMarks:F}=n,{splittableMarks:U}=i.extensionManager,_=F||C.$to.parentOffset&&C.$from.marks();if(s.split(d.pos,2,S).scrollIntoView(),!_||!a)return!0;const z=_.filter(I=>U.includes(I.type.name));s.ensureMarks(z)}return!0},cv=(t,e)=>{const s=wb(c=>c.type===e)(t.selection);if(!s)return!0;const n=t.doc.resolve(Math.max(0,s.pos-1)).before(s.depth);if(n===void 0)return!0;const a=t.doc.nodeAt(n);return s.node.type===(a==null?void 0:a.type)&&Mu(t.doc,s.pos)&&t.join(s.pos),!0},Av=(t,e)=>{const s=wb(c=>c.type===e)(t.selection);if(!s)return!0;const n=t.doc.resolve(s.start).after(s.depth);if(n===void 0)return!0;const a=t.doc.nodeAt(n);return s.node.type===(a==null?void 0:a.type)&&Mu(t.doc,n)&&t.join(n),!0},DR=(t,e,s,n={})=>({editor:a,tr:i,state:c,dispatch:A,chain:d,commands:f,can:u})=>{const{extensions:p,splittableMarks:x}=a.extensionManager,m=Ua(t,c.schema),j=Ua(e,c.schema),{selection:w,storedMarks:S}=c,{$from:C,$to:F}=w,U=C.blockRange(F),_=S||w.$to.parentOffset&&w.$from.marks();if(!U)return!1;const z=wb(I=>$N(I.type.name,p))(w);if(U.depth>=1&&z&&U.depth-z.depth<=1){if(z.node.type===m)return f.liftListItem(j);if($N(z.node.type.name,p)&&m.validContent(z.node.content)&&A)return d().command(()=>(i.setNodeMarkup(z.pos,m),!0)).command(()=>cv(i,m)).command(()=>Av(i,m)).run()}return!s||!_||!A?d().command(()=>u().wrapInList(m,n)?!0:f.clearNodes()).wrapInList(m,n).command(()=>cv(i,m)).command(()=>Av(i,m)).run():d().command(()=>{const I=u().wrapInList(m,n),H=_.filter(ee=>x.includes(ee.type.name));return i.ensureMarks(H),I?!0:f.clearNodes()}).wrapInList(m,n).command(()=>cv(i,m)).command(()=>Av(i,m)).run()},RR=(t,e={},s={})=>({state:n,commands:a})=>{const{extendEmptyMarkRange:i=!1}=s,c=gd(t,n.schema);return fy(n,c,e)?a.unsetMark(c,{extendEmptyMarkRange:i}):a.setMark(c,e)},HR=(t,e,s={})=>({state:n,commands:a})=>{const i=Ua(t,n.schema),c=Ua(e,n.schema),A=Tu(n,i,s);let d;return n.selection.$anchor.sameParent(n.selection.$head)&&(d=n.selection.$anchor.parent.attrs),A?a.setNode(c,d):a.setNode(i,{...d,...s})},PR=(t,e={})=>({state:s,commands:n})=>{const a=Ua(t,s.schema);return Tu(s,a,e)?n.lift(a):n.wrapIn(a,e)},zR=()=>({state:t,dispatch:e})=>{const s=t.plugins;for(let n=0;n<s.length;n+=1){const a=s[n];let i;if(a.spec.isInputRules&&(i=a.getState(t))){if(e){const c=t.tr,A=i.transform;for(let d=A.steps.length-1;d>=0;d-=1)c.step(A.steps[d].invert(A.docs[d]));if(i.text){const d=c.doc.resolve(i.from).marks();c.replaceWith(i.from,i.to,t.schema.text(i.text,d))}else c.delete(i.from,i.to)}return!0}}return!1},KR=()=>({tr:t,dispatch:e})=>{const{selection:s}=t,{empty:n,ranges:a}=s;return n||e&&a.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},VR=(t,e={})=>({tr:s,state:n,dispatch:a})=>{var i;const{extendEmptyMarkRange:c=!1}=e,{selection:A}=s,d=gd(t,n.schema),{$from:f,empty:u,ranges:p}=A;if(!a)return!0;if(u&&c){let{from:x,to:m}=A;const j=(i=f.marks().find(S=>S.type===d))==null?void 0:i.attrs,w=m2(f,d,j);w&&(x=w.from,m=w.to),s.removeMark(x,m,d)}else p.forEach(x=>{s.removeMark(x.$from.pos,x.$to.pos,d)});return s.removeStoredMark(d),!0},$R=t=>({tr:e,state:s,dispatch:n})=>{const{selection:a}=s;let i,c;return typeof t=="number"?(i=t,c=t):t&&"from"in t&&"to"in t?(i=t.from,c=t.to):(i=a.from,c=a.to),n&&e.doc.nodesBetween(i,c,(A,d)=>{if(A.isText)return;const f={...A.attrs};delete f.dir,e.setNodeMarkup(d,void 0,f)}),!0},GR=(t,e={})=>({tr:s,state:n,dispatch:a})=>{let i=null,c=null;const A=yb(typeof t=="string"?t:t.name,n.schema);if(!A)return!1;A==="node"&&(i=Ua(t,n.schema)),A==="mark"&&(c=gd(t,n.schema));let d=!1;return s.selection.ranges.forEach(f=>{const u=f.$from.pos,p=f.$to.pos;let x,m,j,w;s.selection.empty?n.doc.nodesBetween(u,p,(S,C)=>{i&&i===S.type&&(d=!0,j=Math.max(C,u),w=Math.min(C+S.nodeSize,p),x=C,m=S)}):n.doc.nodesBetween(u,p,(S,C)=>{C<u&&i&&i===S.type&&(d=!0,j=Math.max(C,u),w=Math.min(C+S.nodeSize,p),x=C,m=S),C>=u&&C<=p&&(i&&i===S.type&&(d=!0,a&&s.setNodeMarkup(C,void 0,{...S.attrs,...e})),c&&S.marks.length&&S.marks.forEach(F=>{if(c===F.type&&(d=!0,a)){const U=Math.max(C,u),_=Math.min(C+S.nodeSize,p);s.addMark(U,_,c.create({...F.attrs,...e}))}}))}),m&&(x!==void 0&&a&&s.setNodeMarkup(x,void 0,{...m.attrs,...e}),c&&m.marks.length&&m.marks.forEach(S=>{c===S.type&&a&&s.addMark(j,w,c.create({...S.attrs,...e}))}))}),d},qR=(t,e={})=>({state:s,dispatch:n})=>{const a=Ua(t,s.schema);return j7(a,e)(s,n)},YR=(t,e={})=>({state:s,dispatch:n})=>{const a=Ua(t,s.schema);return N7(a,e)(s,n)},JR=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const s=this.callbacks[t];return s&&s.forEach(n=>n.apply(this,e)),this}off(t,e){const s=this.callbacks[t];return s&&(e?this.callbacks[t]=s.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const s=(...n)=>{this.off(t,s),e.apply(this,n)};return this.on(t,s)}removeAllListeners(){this.callbacks={}}},Nb=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},WR=(t,e)=>{if(p2(e))return e.exec(t);const s=e(t);if(!s)return null;const n=[s.text];return n.index=s.index,n.input=t,n.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(s.replaceWith)),n};function dg(t){var e;const{editor:s,from:n,to:a,text:i,rules:c,plugin:A}=t,{view:d}=s;if(d.composing)return!1;const f=d.state.doc.resolve(n);if(f.parent.type.spec.code||(e=f.nodeBefore||f.nodeAfter)!=null&&e.marks.find(x=>x.type.spec.code))return!1;let u=!1;const p=jR(f)+i;return c.forEach(x=>{if(u)return;const m=WR(p,x.find);if(!m)return;const j=d.state.tr,w=bb({state:d.state,transaction:j}),S={from:n-(m[0].length-i.length),to:a},{commands:C,chain:F,can:U}=new vb({editor:s,state:w});x.handler({state:w,range:S,match:m,commands:C,chain:F,can:U})===null||!j.steps.length||(x.undoable&&j.setMeta(A,{transform:j,from:n,to:a,text:i}),d.dispatch(j),u=!0)}),u}function XR(t){const{editor:e,rules:s}=t,n=new Vn({state:{init(){return null},apply(a,i,c){const A=a.getMeta(n);if(A)return A;const d=a.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:u}=d;typeof u=="string"?u=u:u=b2(St.from(u),c.schema);const{from:p}=d,x=p+u.length;dg({editor:e,from:p,to:x,text:u,rules:s,plugin:n})}),a.selectionSet||a.docChanged?null:i}},props:{handleTextInput(a,i,c,A){return dg({editor:e,from:i,to:c,text:A,rules:s,plugin:n})},handleDOMEvents:{compositionend:a=>(setTimeout(()=>{const{$cursor:i}=a.state.selection;i&&dg({editor:e,from:i.pos,to:i.pos,text:"",rules:s,plugin:n})}),!1)},handleKeyDown(a,i){if(i.key!=="Enter")return!1;const{$cursor:c}=a.state.selection;return c?dg({editor:e,from:c.pos,to:c.pos,text:`
`,rules:s,plugin:n}):!1}},isInputRules:!0});return n}function ZR(t){return Object.prototype.toString.call(t).slice(8,-1)}function ug(t){return ZR(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function n3(t,e){const s={...t};return ug(t)&&ug(e)&&Object.keys(e).forEach(n=>{ug(e[n])&&ug(t[n])?s[n]=n3(t[n],e[n]):s[n]=e[n]}),s}var w2=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Dr(xs(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Dr(xs(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>n3(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},xd=class a3 extends w2{constructor(){super(...arguments),this.type="mark"}static create(e={}){const s=typeof e=="function"?e():e;return new a3(s)}static handleExit({editor:e,mark:s}){const{tr:n}=e.state,a=e.state.selection.$from;if(a.pos===a.end()){const c=a.marks();if(!!!c.find(f=>(f==null?void 0:f.type.name)===s.name))return!1;const d=c.find(f=>(f==null?void 0:f.type.name)===s.name);return d&&n.removeStoredMark(d),n.insertText(" ",a.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const s=typeof e=="function"?e():e;return super.extend(s)}};function e9(t){return typeof t=="number"}var t9=class{constructor(t){this.find=t.find,this.handler=t.handler}},s9=(t,e,s)=>{if(p2(e))return[...t.matchAll(e)];const n=e(t,s);return n?n.map(a=>{const i=[a.text];return i.index=a.index,i.input=t,i.data=a.data,a.replaceWith&&(a.text.includes(a.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(a.replaceWith)),i}):[]};function r9(t){const{editor:e,state:s,from:n,to:a,rule:i,pasteEvent:c,dropEvent:A}=t,{commands:d,chain:f,can:u}=new vb({editor:e,state:s}),p=[];return s.doc.nodesBetween(n,a,(m,j)=>{var w,S,C,F,U;if((S=(w=m.type)==null?void 0:w.spec)!=null&&S.code||!(m.isText||m.isTextblock||m.isInline))return;const _=(U=(F=(C=m.content)==null?void 0:C.size)!=null?F:m.nodeSize)!=null?U:0,z=Math.max(n,j),I=Math.min(a,j+_);if(z>=I)return;const H=m.isText?m.text||"":m.textBetween(z-j,I-j,void 0,"");s9(H,i.find,c).forEach($=>{if($.index===void 0)return;const ce=z+$.index+1,Q=ce+$[0].length,q={from:s.tr.mapping.map(ce),to:s.tr.mapping.map(Q)},te=i.handler({state:s,range:q,match:$,commands:d,chain:f,can:u,pasteEvent:c,dropEvent:A});p.push(te)})}),p.every(m=>m!==null)}var hg=null,n9=t=>{var e;const s=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=s.clipboardData)==null||e.setData("text/html",t),s};function a9(t){const{editor:e,rules:s}=t;let n=null,a=!1,i=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,A;try{A=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{A=null}const d=({state:u,from:p,to:x,rule:m,pasteEvt:j})=>{const w=u.tr,S=bb({state:u,transaction:w});if(!(!r9({editor:e,state:S,from:Math.max(p-1,0),to:x.b-1,rule:m,pasteEvent:j,dropEvent:A})||!w.steps.length)){try{A=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{A=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return s.map(u=>new Vn({view(p){const x=j=>{var w;n=(w=p.dom.parentElement)!=null&&w.contains(j.target)?p.dom.parentElement:null,n&&(hg=e)},m=()=>{hg&&(hg=null)};return window.addEventListener("dragstart",x),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",x),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(p,x)=>{if(i=n===p.dom.parentElement,A=x,!i){const m=hg;m!=null&&m.isEditable&&setTimeout(()=>{const j=m.state.selection;j&&m.commands.deleteRange({from:j.from,to:j.to})},10)}return!1},paste:(p,x)=>{var m;const j=(m=x.clipboardData)==null?void 0:m.getData("text/html");return c=x,a=!!(j!=null&&j.includes("data-pm-slice")),!1}}},appendTransaction:(p,x,m)=>{const j=p[0],w=j.getMeta("uiEvent")==="paste"&&!a,S=j.getMeta("uiEvent")==="drop"&&!i,C=j.getMeta("applyPasteRules"),F=!!C;if(!w&&!S&&!F)return;if(F){let{text:z}=C;typeof z=="string"?z=z:z=b2(St.from(z),m.schema);const{from:I}=C,H=I+z.length,ee=n9(z);return d({rule:u,state:m,from:I,to:{b:H},pasteEvt:ee})}const U=x.doc.content.findDiffStart(m.doc.content),_=x.doc.content.findDiffEnd(m.doc.content);if(!(!e9(U)||!_||U===_.b))return d({rule:u,state:m,from:U,to:_,pasteEvt:c})}}))}var Bb=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=JC(t),this.schema=mR(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const s={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ov(e.name,this.schema)},n=xs(e,"addCommands",s);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return v2([...this.extensions].reverse()).flatMap(n=>{const a={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ov(n.name,this.schema)},i=[],c=xs(n,"addKeyboardShortcuts",a);let A={};if(n.type==="mark"&&xs(n,"exitable",a)&&(A.ArrowRight=()=>xd.handleExit({editor:t,mark:n})),c){const x=Object.fromEntries(Object.entries(c()).map(([m,j])=>[m,()=>j({editor:t})]));A={...A,...x}}const d=bD(A);i.push(d);const f=xs(n,"addInputRules",a);if(VN(n,t.options.enableInputRules)&&f){const x=f();if(x&&x.length){const m=XR({editor:t,rules:x}),j=Array.isArray(m)?m:[m];i.push(...j)}}const u=xs(n,"addPasteRules",a);if(VN(n,t.options.enablePasteRules)&&u){const x=u();if(x&&x.length){const m=a9({editor:t,rules:x});i.push(...m)}}const p=xs(n,"addProseMirrorPlugins",a);if(p){const x=p();i.push(...x)}return i})}get attributes(){return YC(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Gf(this.extensions);return Object.fromEntries(e.filter(s=>!!xs(s,"addNodeView")).map(s=>{const n=this.attributes.filter(d=>d.type===s.name),a={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:t,type:Ua(s.name,this.schema)},i=xs(s,"addNodeView",a);if(!i)return[];const c=i();if(!c)return[];const A=(d,f,u,p,x)=>{const m=px(d,n);return c({node:d,view:f,getPos:u,decorations:p,innerDecorations:x,editor:t,extension:s,HTMLAttributes:m})};return[s.name,A]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=Gf(this.extensions);return Object.fromEntries(e.filter(s=>!!xs(s,"addMarkView")).map(s=>{const n=this.attributes.filter(A=>A.type===s.name),a={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:t,type:gd(s.name,this.schema)},i=xs(s,"addMarkView",a);if(!i)return[];const c=(A,d,f)=>{const u=px(A,n);return i()({mark:A,view:d,inline:f,editor:t,extension:s,HTMLAttributes:u,updateAttributes:p=>{v9(A,t,p)}})};return[s.name,c]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var s;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ov(e.name,this.schema)};e.type==="mark"&&((s=Dr(xs(e,"keepOnSplit",n)))==null||s)&&this.splittableMarks.push(e.name);const a=xs(e,"onBeforeCreate",n),i=xs(e,"onCreate",n),c=xs(e,"onUpdate",n),A=xs(e,"onSelectionUpdate",n),d=xs(e,"onTransaction",n),f=xs(e,"onFocus",n),u=xs(e,"onBlur",n),p=xs(e,"onDestroy",n);a&&this.editor.on("beforeCreate",a),i&&this.editor.on("create",i),c&&this.editor.on("update",c),A&&this.editor.on("selectionUpdate",A),d&&this.editor.on("transaction",d),f&&this.editor.on("focus",f),u&&this.editor.on("blur",u),p&&this.editor.on("destroy",p)})}};Bb.resolve=JC;Bb.sort=v2;Bb.flatten=x2;var i9={};f2(i9,{ClipboardTextSerializer:()=>l3,Commands:()=>o3,Delete:()=>c3,Drop:()=>A3,Editable:()=>d3,FocusEvents:()=>h3,Keymap:()=>f3,Paste:()=>p3,Tabindex:()=>m3,TextDirection:()=>g3,focusEventsPluginKey:()=>u3});var Yr=class i3 extends w2{constructor(){super(...arguments),this.type="extension"}static create(e={}){const s=typeof e=="function"?e():e;return new i3(s)}configure(e){return super.configure(e)}extend(e){const s=typeof e=="function"?e():e;return super.extend(s)}},l3=Yr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Vn({key:new Ka("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:s}=t,{doc:n,selection:a}=e,{ranges:i}=a,c=Math.min(...i.map(u=>u.$from.pos)),A=Math.max(...i.map(u=>u.$to.pos)),d=XC(s);return WC(n,{from:c,to:A},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),o3=Yr.create({name:"commands",addCommands(){return{...RC}}}),c3=Yr.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var s,n,a;const i=()=>{var c,A,d,f;if((f=(d=(A=(c=this.editor.options.coreExtensionOptions)==null?void 0:c.delete)==null?void 0:A.filterTransaction)==null?void 0:d.call(A,t))!=null?f:t.getMeta("y-sync$"))return;const u=GC(t.before,[t,...e]);e3(u).forEach(m=>{u.mapping.mapResult(m.oldRange.from).deletedAfter&&u.mapping.mapResult(m.oldRange.to).deletedBefore&&u.before.nodesBetween(m.oldRange.from,m.oldRange.to,(j,w)=>{const S=w+j.nodeSize-2,C=m.oldRange.from<=w&&S<=m.oldRange.to;this.editor.emit("delete",{type:"node",node:j,from:w,to:S,newFrom:u.mapping.map(w),newTo:u.mapping.map(S),deletedRange:m.oldRange,newRange:m.newRange,partial:!C,editor:this.editor,transaction:t,combinedTransform:u})})});const x=u.mapping;u.steps.forEach((m,j)=>{var w,S;if(m instanceof _c){const C=x.slice(j).map(m.from,-1),F=x.slice(j).map(m.to),U=x.invert().map(C,-1),_=x.invert().map(F),z=(w=u.doc.nodeAt(C-1))==null?void 0:w.marks.some(H=>H.eq(m.mark)),I=(S=u.doc.nodeAt(F))==null?void 0:S.marks.some(H=>H.eq(m.mark));this.editor.emit("delete",{type:"mark",mark:m.mark,from:m.from,to:m.to,deletedRange:{from:U,to:_},newRange:{from:C,to:F},partial:!!(I||z),editor:this.editor,transaction:t,combinedTransform:u})}})};(a=(n=(s=this.editor.options.coreExtensionOptions)==null?void 0:s.delete)==null?void 0:n.async)==null||a?setTimeout(i,0):i()}}),A3=Yr.create({name:"drop",addProseMirrorPlugins(){return[new Vn({key:new Ka("tiptapDrop"),props:{handleDrop:(t,e,s,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:s,moved:n})}}})]}}),d3=Yr.create({name:"editable",addProseMirrorPlugins(){return[new Vn({key:new Ka("editable"),props:{editable:()=>this.editor.options.editable}})]}}),u3=new Ka("focusEvents"),h3=Yr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Vn({key:u3,props:{handleDOMEvents:{focus:(e,s)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:s}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,s)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:s}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),f3=Yr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:A})=>{const{selection:d,doc:f}=A,{empty:u,$anchor:p}=d,{pos:x,parent:m}=p,j=p.parent.isTextblock&&x>0?A.doc.resolve(x-1):p,w=j.parent.type.spec.isolating,S=p.pos-p.parentOffset,C=w&&j.parent.childCount===1?S===p.pos:Vs.atStart(f).from===x;return!u||!m.type.isTextblock||m.textContent.length||!C||C&&p.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},a={...n},i={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return g2()||VC()?i:a},addProseMirrorPlugins(){return[new Vn({key:new Ka("clearDocument"),appendTransaction:(t,e,s)=>{if(t.some(w=>w.getMeta("composition")))return;const n=t.some(w=>w.docChanged)&&!e.doc.eq(s.doc),a=t.some(w=>w.getMeta("preventClearDocument"));if(!n||a)return;const{empty:i,from:c,to:A}=e.selection,d=Vs.atStart(e.doc).from,f=Vs.atEnd(e.doc).to;if(i||!(c===d&&A===f)||!jb(s.doc))return;const x=s.tr,m=bb({state:s,transaction:x}),{commands:j}=new vb({editor:this.editor,state:m});if(j.clearNodes(),!!x.steps.length)return x}})]}}),p3=Yr.create({name:"paste",addProseMirrorPlugins(){return[new Vn({key:new Ka("tiptapPaste"),props:{handlePaste:(t,e,s)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:s})}}})]}}),m3=Yr.create({name:"tabindex",addProseMirrorPlugins(){return[new Vn({key:new Ka("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),g3=Yr.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Gf(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const s=e.getAttribute("dir");return s&&(s==="ltr"||s==="rtl"||s==="auto")?s:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Vn({key:new Ka("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),l9=class Ff{constructor(e,s,n=!1,a=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=s,this.currentNode=a}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let s=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}s=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:s,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),s=this.resolvedPos.doc.resolve(e);return new Ff(s,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ff(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ff(e,this.editor)}get children(){const e=[];return this.node.content.forEach((s,n)=>{const a=s.isBlock&&!s.isTextblock,i=s.isAtom&&!s.isText,c=this.pos+n+(i?0:1);if(c<0||c>this.resolvedPos.doc.nodeSize-2)return;const A=this.resolvedPos.doc.resolve(c);if(!a&&A.depth<=this.depth)return;const d=new Ff(A,this.editor,a,a?s:null);a&&(d.actualDepth=this.depth+1),e.push(new Ff(A,this.editor,a,a?s:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,s={}){let n=null,a=this.parent;for(;a&&!n;){if(a.node.type.name===e)if(Object.keys(s).length>0){const i=a.node.attrs,c=Object.keys(s);for(let A=0;A<c.length;A+=1){const d=c[A];if(i[d]!==s[d])break}}else n=a;a=a.parent}return n}querySelector(e,s={}){return this.querySelectorAll(e,s,!0)[0]||null}querySelectorAll(e,s={},n=!1){let a=[];if(!this.children||this.children.length===0)return a;const i=Object.keys(s);return this.children.forEach(c=>{n&&a.length>0||(c.node.type.name===e&&i.every(d=>s[d]===c.node.attrs[d])&&a.push(c),!(n&&a.length>0)&&(a=a.concat(c.querySelectorAll(e,s,n))))}),a}setAttribute(e){const{tr:s}=this.editor.state;s.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(s)}},o9=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function c9(t,e,s){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const a=document.createElement("style");return e&&a.setAttribute("nonce",e),a.setAttribute("data-tiptap-style",""),a.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(a),a}var A9=class extends JR{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:CR,createMappablePosition:SR},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:a,moved:i})=>this.options.onDrop(n,a,i)),this.on("paste",({event:n,slice:a})=>this.options.onPaste(n,a)),this.on("delete",this.options.onDelete);const e=this.createDoc(),s=zC(e,this.options.autofocus);this.editorState=Mf.create({doc:e,schema:this.schema,selection:s||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=c9(o9,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const s=qC(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:s});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let s=e;if([].concat(t).forEach(a=>{const i=typeof a=="string"?`${a}$`:a.key;s=s.filter(c=>!c.key.startsWith(i))}),e.length===s.length)return;const n=this.state.reconfigure({plugins:s});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[d3,l3.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),o3,h3,f3,m3,A3,p3,c3,g3.configure({direction:this.options.textDirection})].filter(a=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[a.name]!==!1:!0):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a==null?void 0:a.type));this.extensionManager=new Bb(n,this)}createCommandManager(){this.commandManager=new vb({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=hy(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(s=>s.name!=="collaboration"),this.createExtensionManager()}}),t=hy(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new OC(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const n=this.view.dom;n.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(f=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(f)});return}const{state:e,transactions:s}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),a=s.includes(t),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!a)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:s.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const c=s.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),A=c==null?void 0:c.getMeta("focus"),d=c==null?void 0:c.getMeta("blur");A&&this.emit("focus",{editor:this,event:A.event,transaction:c}),d&&this.emit("blur",{editor:this,event:d.event,transaction:c}),!(t.getMeta("preventUpdate")||!s.some(f=>f.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:s.slice(1)})}getAttributes(t){return ZC(this.state,t)}isActive(t,e){const s=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return NR(this.state,s,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return b2(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:s={}}=t||{};return xR(this.state.doc,{blockSeparator:e,textSerializers:{...XC(this.schema),...s}})}get isEmpty(){return jb(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var s;return((s=this.$doc)==null?void 0:s.querySelector(t,e))||null}$nodes(t,e){var s;return((s=this.$doc)==null?void 0:s.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new l9(e,this)}get $doc(){return this.$pos(0)}};function zh(t){return new Nb({find:t.find,handler:({state:e,range:s,match:n})=>{const a=Dr(t.getAttributes,void 0,n);if(a===!1||a===null)return null;const{tr:i}=e,c=n[n.length-1],A=n[0];if(c){const d=A.search(/\S/),f=s.from+A.indexOf(c),u=f+c.length;if(y2(s.from,s.to,e.doc).filter(m=>m.mark.type.excluded.find(w=>w===t.type&&w!==m.mark.type)).filter(m=>m.to>f).length)return null;u<s.to&&i.delete(u,s.to),f>s.from&&i.delete(s.from+d,f);const x=s.from+d+c.length;i.addMark(s.from+d,x,t.type.create(a||{})),i.removeStoredMark(t.type)}},undoable:t.undoable})}function x3(t){return new Nb({find:t.find,handler:({state:e,range:s,match:n})=>{const a=Dr(t.getAttributes,void 0,n)||{},{tr:i}=e,c=s.from;let A=s.to;const d=t.type.create(a);if(n[1]){const f=n[0].lastIndexOf(n[1]);let u=c+f;u>A?u=A:A=u+n[1].length;const p=n[0][n[0].length-1];i.insertText(p,c+n[0].length-1),i.replaceWith(u,A,d)}else if(n[0]){const f=t.type.isInline?c:c-1;i.insert(f,t.type.create(a)).delete(i.mapping.map(c),i.mapping.map(A))}i.scrollIntoView()},undoable:t.undoable})}function py(t){return new Nb({find:t.find,handler:({state:e,range:s,match:n})=>{const a=e.doc.resolve(s.from),i=Dr(t.getAttributes,void 0,n)||{};if(!a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),t.type))return null;e.tr.delete(s.from,s.to).setBlockType(s.from,s.from,t.type,i)},undoable:t.undoable})}function qf(t){return new Nb({find:t.find,handler:({state:e,range:s,match:n,chain:a})=>{const i=Dr(t.getAttributes,void 0,n)||{},c=e.tr.delete(s.from,s.to),d=c.doc.resolve(s.from).blockRange(),f=d&&Xy(d,t.type,i);if(!f)return null;if(c.wrap(d,f),t.keepMarks&&t.editor){const{selection:p,storedMarks:x}=e,{splittableMarks:m}=t.editor.extensionManager,j=x||p.$to.parentOffset&&p.$from.marks();if(j){const w=j.filter(S=>m.includes(S.type.name));c.ensureMarks(w)}}if(t.keepAttributes){const p=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";a().updateAttributes(p,i).run()}const u=c.doc.resolve(s.from-1).nodeBefore;u&&u.type===t.type&&Mu(c.doc,s.from-1)&&(!t.joinPredicate||t.joinPredicate(n,u))&&c.join(s.from-1)},undoable:t.undoable})}var d9=t=>"touches"in t,u9=class{constructor(t){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=A=>{if(!this.isResizing||!this.activeHandle)return;const d=A.clientX-this.startX,f=A.clientY-this.startY;this.handleResize(d,f)},this.handleTouchMove=A=>{if(!this.isResizing||!this.activeHandle)return;const d=A.touches[0];if(!d)return;const f=d.clientX-this.startX,u=d.clientY-this.startY;this.handleResize(f,u)},this.handleMouseUp=()=>{if(!this.isResizing)return;const A=this.element.offsetWidth,d=this.element.offsetHeight;this.onCommit(A,d),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=A=>{A.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=A=>{A.key==="Shift"&&(this.isShiftKeyPressed=!1)};var e,s,n,a,i,c;this.node=t.node,this.editor=t.editor,this.element=t.element,this.contentElement=t.contentElement,this.getPos=t.getPos,this.onResize=t.onResize,this.onCommit=t.onCommit,this.onUpdate=t.onUpdate,(e=t.options)!=null&&e.min&&(this.minSize={...this.minSize,...t.options.min}),(s=t.options)!=null&&s.max&&(this.maxSize=t.options.max),(n=t==null?void 0:t.options)!=null&&n.directions&&(this.directions=t.options.directions),(a=t.options)!=null&&a.preserveAspectRatio&&(this.preserveAspectRatio=t.options.preserveAspectRatio),(i=t.options)!=null&&i.className&&(this.classNames={container:t.options.className.container||"",wrapper:t.options.className.wrapper||"",handle:t.options.className.handle||"",resizing:t.options.className.resizing||""}),(c=t.options)!=null&&c.createCustomHandle&&(this.createCustomHandle=t.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){return this.contentElement}handleEditorUpdate(){const t=this.editor.isEditable;t!==this.lastEditableState&&(this.lastEditableState=t,t?t&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(t,e,s){return t.type!==this.node.type?!1:(this.node=t,this.onUpdate?this.onUpdate(t,e,s):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const t=document.createElement("div");return t.dataset.resizeContainer="",t.dataset.node=this.node.type.name,t.style.display="flex",this.classNames.container&&(t.className=this.classNames.container),t.appendChild(this.wrapper),t}createWrapper(){const t=document.createElement("div");return t.style.position="relative",t.style.display="block",t.dataset.resizeWrapper="",this.classNames.wrapper&&(t.className=this.classNames.wrapper),t.appendChild(this.element),t}createHandle(t){const e=document.createElement("div");return e.dataset.resizeHandle=t,e.style.position="absolute",this.classNames.handle&&(e.className=this.classNames.handle),e}positionHandle(t,e){const s=e.includes("top"),n=e.includes("bottom"),a=e.includes("left"),i=e.includes("right");s&&(t.style.top="0"),n&&(t.style.bottom="0"),a&&(t.style.left="0"),i&&(t.style.right="0"),(e==="top"||e==="bottom")&&(t.style.left="0",t.style.right="0"),(e==="left"||e==="right")&&(t.style.top="0",t.style.bottom="0")}attachHandles(){this.directions.forEach(t=>{let e;this.createCustomHandle?e=this.createCustomHandle(t):e=this.createHandle(t),e instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${t}") did not return an HTMLElement. Falling back to default handle.`),e=this.createHandle(t)),this.createCustomHandle||this.positionHandle(e,t),e.addEventListener("mousedown",s=>this.handleResizeStart(s,t)),e.addEventListener("touchstart",s=>this.handleResizeStart(s,t)),this.handleMap.set(t,e),this.wrapper.appendChild(e)})}removeHandles(){this.handleMap.forEach(t=>t.remove()),this.handleMap.clear()}applyInitialSize(){const t=this.node.attrs.width,e=this.node.attrs.height;t?(this.element.style.width=`${t}px`,this.initialWidth=t):this.initialWidth=this.element.offsetWidth,e?(this.element.style.height=`${e}px`,this.initialHeight=e):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(t,e){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.activeHandle=e,d9(t)?(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):(this.startX=t.clientX,this.startY=t.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(t,e){if(!this.activeHandle)return;const s=this.preserveAspectRatio||this.isShiftKeyPressed,{width:n,height:a}=this.calculateNewDimensions(this.activeHandle,t,e),i=this.applyConstraints(n,a,s);this.element.style.width=`${i.width}px`,this.element.style.height=`${i.height}px`,this.onResize&&this.onResize(i.width,i.height)}calculateNewDimensions(t,e,s){let n=this.startWidth,a=this.startHeight;const i=t.includes("right"),c=t.includes("left"),A=t.includes("bottom"),d=t.includes("top");return i?n=this.startWidth+e:c&&(n=this.startWidth-e),A?a=this.startHeight+s:d&&(a=this.startHeight-s),(t==="right"||t==="left")&&(n=this.startWidth+(i?e:-e)),(t==="top"||t==="bottom")&&(a=this.startHeight+(A?s:-s)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(n,a,t):{width:n,height:a}}applyConstraints(t,e,s){var n,a,i,c;if(!s){let f=Math.max(this.minSize.width,t),u=Math.max(this.minSize.height,e);return(n=this.maxSize)!=null&&n.width&&(f=Math.min(this.maxSize.width,f)),(a=this.maxSize)!=null&&a.height&&(u=Math.min(this.maxSize.height,u)),{width:f,height:u}}let A=t,d=e;return A<this.minSize.width&&(A=this.minSize.width,d=A/this.aspectRatio),d<this.minSize.height&&(d=this.minSize.height,A=d*this.aspectRatio),(i=this.maxSize)!=null&&i.width&&A>this.maxSize.width&&(A=this.maxSize.width,d=A/this.aspectRatio),(c=this.maxSize)!=null&&c.height&&d>this.maxSize.height&&(d=this.maxSize.height,A=d*this.aspectRatio),{width:A,height:d}}applyAspectRatio(t,e,s){const n=s==="left"||s==="right",a=s==="top"||s==="bottom";return n?{width:t,height:t/this.aspectRatio}:a?{width:e*this.aspectRatio,height:e}:{width:t,height:t/this.aspectRatio}}};function h9(t,e){const{selection:s}=t,{$from:n}=s;if(s instanceof ys){const i=n.index();return n.parent.canReplaceWith(i,i+1,e)}let a=n.depth;for(;a>=0;){const i=n.index(a);if(n.node(a).contentMatchAt(i).matchType(e))return!0;a-=1}return!1}var f9={};f2(f9,{createAtomBlockMarkdownSpec:()=>p9,createBlockMarkdownSpec:()=>m9,createInlineMarkdownSpec:()=>b9,parseAttributes:()=>j2,parseIndentedBlocks:()=>my,renderNestedMarkdownContent:()=>B2,serializeAttributes:()=>N2});function j2(t){if(!(t!=null&&t.trim()))return{};const e={},s=[],n=t.replace(/["']([^"']*)["']/g,f=>(s.push(f),`__QUOTED_${s.length-1}__`)),a=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(a){const f=a.map(u=>u.trim().slice(1));e.class=f.join(" ")}const i=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(e.id=i[1]);const c=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(c)).forEach(([,f,u])=>{var p;const x=parseInt(((p=u.match(/__QUOTED_(\d+)__/))==null?void 0:p[1])||"0",10),m=s[x];m&&(e[f]=m.slice(1,-1))});const d=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(e[u]=!0)}),e}function N2(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([s,n])=>{s==="class"||s==="id"||(n===!0?e.push(s):n!==!1&&n!=null&&e.push(`${s}="${String(n)}"`))}),e.join(" ")}function p9(t){const{nodeName:e,name:s,parseAttributes:n=j2,serializeAttributes:a=N2,defaultAttributes:i={},requiredAttributes:c=[],allowedAttributes:A}=t,d=s||e,f=u=>{if(!A)return u;const p={};return A.forEach(x=>{x in u&&(p[x]=u[x])}),p};return{parseMarkdown:(u,p)=>{const x={...i,...u.attributes};return p.createNode(e,x,[])},markdownTokenizer:{name:e,level:"block",start(u){var p;const x=new RegExp(`^:::${d}(?:\\s|$)`,"m"),m=(p=u.match(x))==null?void 0:p.index;return m!==void 0?m:-1},tokenize(u,p,x){const m=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),j=u.match(m);if(!j)return;const w=j[1]||"",S=n(w);if(!c.find(F=>!(F in S)))return{type:e,raw:j[0],attributes:S}}},renderMarkdown:u=>{const p=f(u.attrs||{}),x=a(p),m=x?` {${x}}`:"";return`:::${d}${m} :::`}}}function m9(t){const{nodeName:e,name:s,getContent:n,parseAttributes:a=j2,serializeAttributes:i=N2,defaultAttributes:c={},content:A="block",allowedAttributes:d}=t,f=s||e,u=p=>{if(!d)return p;const x={};return d.forEach(m=>{m in p&&(x[m]=p[m])}),x};return{parseMarkdown:(p,x)=>{let m;if(n){const w=n(p);m=typeof w=="string"?[{type:"text",text:w}]:w}else A==="block"?m=x.parseChildren(p.tokens||[]):m=x.parseInline(p.tokens||[]);const j={...c,...p.attributes};return x.createNode(e,j,m)},markdownTokenizer:{name:e,level:"block",start(p){var x;const m=new RegExp(`^:::${f}`,"m"),j=(x=p.match(m))==null?void 0:x.index;return j!==void 0?j:-1},tokenize(p,x,m){var j;const w=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),S=p.match(w);if(!S)return;const[C,F=""]=S,U=a(F);let _=1;const z=C.length;let I="";const H=/^:::([\w-]*)(\s.*)?/gm,ee=p.slice(z);for(H.lastIndex=0;;){const $=H.exec(ee);if($===null)break;const ce=$.index,Q=$[1];if(!((j=$[2])!=null&&j.endsWith(":::"))){if(Q)_+=1;else if(_-=1,_===0){const q=ee.slice(0,ce);I=q.trim();const te=p.slice(0,z+ce+$[0].length);let X=[];if(I)if(A==="block")for(X=m.blockTokens(q),X.forEach(Ae=>{Ae.text&&(!Ae.tokens||Ae.tokens.length===0)&&(Ae.tokens=m.inlineTokens(Ae.text))});X.length>0;){const Ae=X[X.length-1];if(Ae.type==="paragraph"&&(!Ae.text||Ae.text.trim()===""))X.pop();else break}else X=m.inlineTokens(I);return{type:e,raw:te,attributes:U,content:I,tokens:X}}}}}},renderMarkdown:(p,x)=>{const m=u(p.attrs||{}),j=i(m),w=j?` {${j}}`:"",S=x.renderChildren(p.content||[],`

`);return`:::${f}${w}

${S}

:::`}}}function g9(t){if(!t.trim())return{};const e={},s=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=s.exec(t);for(;n!==null;){const[,a,i,c]=n;e[a]=i||c,n=s.exec(t)}return e}function x9(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,s])=>`${e}="${s}"`).join(" ")}function b9(t){const{nodeName:e,name:s,getContent:n,parseAttributes:a=g9,serializeAttributes:i=x9,defaultAttributes:c={},selfClosing:A=!1,allowedAttributes:d}=t,f=s||e,u=x=>{if(!d)return x;const m={};return d.forEach(j=>{const w=typeof j=="string"?j:j.name,S=typeof j=="string"?void 0:j.skipIfDefault;if(w in x){const C=x[w];if(S!==void 0&&C===S)return;m[w]=C}}),m},p=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(x,m)=>{const j={...c,...x.attributes};if(A)return m.createNode(e,j);const w=n?n(x):x.content||"";return w?m.createNode(e,j,[m.createTextNode(w)]):m.createNode(e,j,[])},markdownTokenizer:{name:e,level:"inline",start(x){const m=A?new RegExp(`\\[${p}\\s*[^\\]]*\\]`):new RegExp(`\\[${p}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${p}\\]`),j=x.match(m),w=j==null?void 0:j.index;return w!==void 0?w:-1},tokenize(x,m,j){const w=A?new RegExp(`^\\[${p}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${p}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${p}\\]`),S=x.match(w);if(!S)return;let C="",F="";if(A){const[,_]=S;F=_}else{const[,_,z]=S;F=_,C=z||""}const U=a(F.trim());return{type:e,raw:S[0],content:C.trim(),attributes:U}}},renderMarkdown:x=>{let m="";n?m=n(x):x.content&&x.content.length>0&&(m=x.content.filter(C=>C.type==="text").map(C=>C.text).join(""));const j=u(x.attrs||{}),w=i(j),S=w?` ${w}`:"";return A?`[${f}${S}]`:`[${f}${S}]${m}[/${f}]`}}}function my(t,e,s){var n,a,i,c;const A=t.split(`
`),d=[];let f="",u=0;const p=e.baseIndentSize||2;for(;u<A.length;){const x=A[u],m=x.match(e.itemPattern);if(!m){if(d.length>0)break;if(x.trim()===""){u+=1,f=`${f}${x}
`;continue}else return}const j=e.extractItemData(m),{indentLevel:w,mainContent:S}=j;f=`${f}${x}
`;const C=[S];for(u+=1;u<A.length;){const z=A[u];if(z.trim()===""){const H=A.slice(u+1).findIndex(ce=>ce.trim()!=="");if(H===-1)break;if((((a=(n=A[u+1+H].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:a.length)||0)>w){C.push(z),f=`${f}${z}
`,u+=1;continue}else break}if((((c=(i=z.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:c.length)||0)>w)C.push(z),f=`${f}${z}
`,u+=1;else break}let F;const U=C.slice(1);if(U.length>0){const z=U.map(I=>I.slice(w+p)).join(`
`);z.trim()&&(e.customNestedParser?F=e.customNestedParser(z):F=s.blockTokens(z))}const _=e.createToken(j,F);d.push(_)}if(d.length!==0)return{items:d,raw:f}}function B2(t,e,s,n){if(!t||!Array.isArray(t.content))return"";const a=typeof s=="function"?s(n):s,[i,...c]=t.content,A=e.renderChildren([i]),d=[`${a}${A}`];return c&&c.length>0&&c.forEach(f=>{const u=e.renderChildren([f]);if(u){const p=u.split(`
`).map(x=>x?e.indent(x):"").join(`
`);d.push(p)}}),d.join(`
`)}function v9(t,e,s={}){const{state:n}=e,{doc:a,tr:i}=n,c=t;a.descendants((A,d)=>{const f=i.mapping.map(d),u=i.mapping.map(d)+A.nodeSize;let p=null;if(A.marks.forEach(m=>{if(m!==c)return!1;p=m}),!p)return;let x=!1;if(Object.keys(s).forEach(m=>{s[m]!==p.attrs[m]&&(x=!0)}),x){const m=t.type.create({...t.attrs,...s});i.removeMark(f,u,t.type),i.addMark(f,u,m)}}),i.docChanged&&e.view.dispatch(i)}var Yl=class b3 extends w2{constructor(){super(...arguments),this.type="node"}static create(e={}){const s=typeof e=="function"?e():e;return new b3(s)}configure(e){return super.configure(e)}extend(e){const s=typeof e=="function"?e():e;return super.extend(s)}};function Uu(t){return new t9({find:t.find,handler:({state:e,range:s,match:n,pasteEvent:a})=>{const i=Dr(t.getAttributes,void 0,n,a);if(i===!1||i===null)return null;const{tr:c}=e,A=n[n.length-1],d=n[0];let f=s.to;if(A){const u=d.search(/\S/),p=s.from+d.indexOf(A),x=p+A.length;if(y2(s.from,s.to,e.doc).filter(j=>j.mark.type.excluded.find(S=>S===t.type&&S!==j.mark.type)).filter(j=>j.to>p).length)return null;x<s.to&&c.delete(x,s.to),p>s.from&&c.delete(s.from+u,p),f=s.from+u+A.length,c.addMark(s.from+u,f,t.type.create(i||{})),c.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:y9,getOwnPropertySymbols:w9}=Object,{hasOwnProperty:j9}=Object.prototype;function dv(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function fg(t){return function(s,n,a){if(!s||!n||typeof s!="object"||typeof n!="object")return t(s,n,a);const{cache:i}=a,c=i.get(s),A=i.get(n);if(c&&A)return c===n&&A===s;i.set(s,n),i.set(n,s);const d=t(s,n,a);return i.delete(s),i.delete(n),d}}function N9(t){return t!=null?t[Symbol.toStringTag]:void 0}function qN(t){return y9(t).concat(w9(t))}const B9=Object.hasOwn||((t,e)=>j9.call(t,e));function qh(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const k9="__v",C9="__o",S9="_owner",{getOwnPropertyDescriptor:YN,keys:JN}=Object;function E9(t,e){return t.byteLength===e.byteLength&&mx(new Uint8Array(t),new Uint8Array(e))}function T9(t,e,s){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!s.equals(t[n],e[n],n,n,t,e,s))return!1;return!0}function U9(t,e){return t.byteLength===e.byteLength&&mx(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function F9(t,e){return qh(t.getTime(),e.getTime())}function L9(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function M9(t,e){return t===e}function WN(t,e,s){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.entries();let c,A,d=0;for(;(c=i.next())&&!c.done;){const f=e.entries();let u=!1,p=0;for(;(A=f.next())&&!A.done;){if(a[p]){p++;continue}const x=c.value,m=A.value;if(s.equals(x[0],m[0],d,p,t,e,s)&&s.equals(x[1],m[1],x[0],m[0],t,e,s)){u=a[p]=!0;break}p++}if(!u)return!1;d++}return!0}const Q9=qh;function _9(t,e,s){const n=JN(t);let a=n.length;if(JN(e).length!==a)return!1;for(;a-- >0;)if(!v3(t,e,s,n[a]))return!1;return!0}function X0(t,e,s){const n=qN(t);let a=n.length;if(qN(e).length!==a)return!1;let i,c,A;for(;a-- >0;)if(i=n[a],!v3(t,e,s,i)||(c=YN(t,i),A=YN(e,i),(c||A)&&(!c||!A||c.configurable!==A.configurable||c.enumerable!==A.enumerable||c.writable!==A.writable)))return!1;return!0}function I9(t,e){return qh(t.valueOf(),e.valueOf())}function O9(t,e){return t.source===e.source&&t.flags===e.flags}function XN(t,e,s){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.values();let c,A;for(;(c=i.next())&&!c.done;){const d=e.values();let f=!1,u=0;for(;(A=d.next())&&!A.done;){if(!a[u]&&s.equals(c.value,A.value,c.value,A.value,t,e,s)){f=a[u]=!0;break}u++}if(!f)return!1}return!0}function mx(t,e){let s=t.byteLength;if(e.byteLength!==s||t.byteOffset!==e.byteOffset)return!1;for(;s-- >0;)if(t[s]!==e[s])return!1;return!0}function D9(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function v3(t,e,s,n){return(n===S9||n===C9||n===k9)&&(t.$$typeof||e.$$typeof)?!0:B9(e,n)&&s.equals(t[n],e[n],n,n,t,e,s)}const R9="[object ArrayBuffer]",H9="[object Arguments]",P9="[object Boolean]",z9="[object DataView]",K9="[object Date]",V9="[object Error]",$9="[object Map]",G9="[object Number]",q9="[object Object]",Y9="[object RegExp]",J9="[object Set]",W9="[object String]",X9={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Z9="[object URL]",eH=Object.prototype.toString;function tH({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:s,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:c,areNumbersEqual:A,areObjectsEqual:d,arePrimitiveWrappersEqual:f,areRegExpsEqual:u,areSetsEqual:p,areTypedArraysEqual:x,areUrlsEqual:m,unknownTagComparators:j}){return function(S,C,F){if(S===C)return!0;if(S==null||C==null)return!1;const U=typeof S;if(U!==typeof C)return!1;if(U!=="object")return U==="number"?A(S,C,F):U==="function"?i(S,C,F):!1;const _=S.constructor;if(_!==C.constructor)return!1;if(_===Object)return d(S,C,F);if(Array.isArray(S))return e(S,C,F);if(_===Date)return n(S,C,F);if(_===RegExp)return u(S,C,F);if(_===Map)return c(S,C,F);if(_===Set)return p(S,C,F);const z=eH.call(S);if(z===K9)return n(S,C,F);if(z===Y9)return u(S,C,F);if(z===$9)return c(S,C,F);if(z===J9)return p(S,C,F);if(z===q9)return typeof S.then!="function"&&typeof C.then!="function"&&d(S,C,F);if(z===Z9)return m(S,C,F);if(z===V9)return a(S,C,F);if(z===H9)return d(S,C,F);if(X9[z])return x(S,C,F);if(z===R9)return t(S,C,F);if(z===z9)return s(S,C,F);if(z===P9||z===G9||z===W9)return f(S,C,F);if(j){let I=j[z];if(!I){const H=N9(S);H&&(I=j[H])}if(I)return I(S,C,F)}return!1}}function sH({circular:t,createCustomConfig:e,strict:s}){let n={areArrayBuffersEqual:E9,areArraysEqual:s?X0:T9,areDataViewsEqual:U9,areDatesEqual:F9,areErrorsEqual:L9,areFunctionsEqual:M9,areMapsEqual:s?dv(WN,X0):WN,areNumbersEqual:Q9,areObjectsEqual:s?X0:_9,arePrimitiveWrappersEqual:I9,areRegExpsEqual:O9,areSetsEqual:s?dv(XN,X0):XN,areTypedArraysEqual:s?dv(mx,X0):mx,areUrlsEqual:D9,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const a=fg(n.areArraysEqual),i=fg(n.areMapsEqual),c=fg(n.areObjectsEqual),A=fg(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:c,areSetsEqual:A})}return n}function rH(t){return function(e,s,n,a,i,c,A){return t(e,s,A)}}function nH({circular:t,comparator:e,createState:s,equals:n,strict:a}){if(s)return function(A,d){const{cache:f=t?new WeakMap:void 0,meta:u}=s();return e(A,d,{cache:f,equals:n,meta:u,strict:a})};if(t)return function(A,d){return e(A,d,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(A,d){return e(A,d,i)}}const aH=_u();_u({strict:!0});_u({circular:!0});_u({circular:!0,strict:!0});_u({createInternalComparator:()=>qh});_u({strict:!0,createInternalComparator:()=>qh});_u({circular:!0,createInternalComparator:()=>qh});_u({circular:!0,createInternalComparator:()=>qh,strict:!0});function _u(t={}){const{circular:e=!1,createInternalComparator:s,createState:n,strict:a=!1}=t,i=sH(t),c=tH(i),A=s?s(c):rH(c);return nH({circular:e,comparator:c,createState:n,equals:A,strict:a})}var uv={exports:{}},hv={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZN;function iH(){if(ZN)return hv;ZN=1;var t=Pp(),e=Ak();function s(f,u){return f===u&&(f!==0||1/f===1/u)||f!==f&&u!==u}var n=typeof Object.is=="function"?Object.is:s,a=e.useSyncExternalStore,i=t.useRef,c=t.useEffect,A=t.useMemo,d=t.useDebugValue;return hv.useSyncExternalStoreWithSelector=function(f,u,p,x,m){var j=i(null);if(j.current===null){var w={hasValue:!1,value:null};j.current=w}else w=j.current;j=A(function(){function C(I){if(!F){if(F=!0,U=I,I=x(I),m!==void 0&&w.hasValue){var H=w.value;if(m(H,I))return _=H}return _=I}if(H=_,n(U,I))return H;var ee=x(I);return m!==void 0&&m(H,ee)?(U=I,H):(U=I,_=ee)}var F=!1,U,_,z=p===void 0?null:p;return[function(){return C(u())},z===null?void 0:function(){return C(z())}]},[u,p,x,m]);var S=a(f,j[0],j[1]);return c(function(){w.hasValue=!0,w.value=S},[S]),d(S),S},hv}var e4;function lH(){return e4||(e4=1,uv.exports=iH()),uv.exports}var oH=lH(),cH=(...t)=>e=>{t.forEach(s=>{typeof s=="function"?s(e):s&&(s.current=e)})},AH=({contentComponent:t})=>{const e=dk.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return r.jsx(r.Fragment,{children:Object.values(e)})};function dH(){const t=new Set;let e={};return{subscribe(s){return t.add(s),()=>{t.delete(s)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(s,n){e={...e,[s]:E4.createPortal(n.reactElement,n.element,s)},t.forEach(a=>a())},removeRenderer(s){const n={...e};delete n[s],e=n,t.forEach(a=>a())}}}var uH=class extends wi.Component{constructor(t){var e;super(t),this.editorContentRef=wi.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const s=this.editorContentRef.current;s.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:s}),e.contentComponent=dH(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const s=document.createElement("div");s.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:s})}catch{}}}render(){const{editor:t,innerRef:e,...s}=this.props;return r.jsxs(r.Fragment,{children:[r.jsx("div",{ref:cH(e,this.editorContentRef),...s}),(t==null?void 0:t.contentComponent)&&r.jsx(AH,{contentComponent:t.contentComponent})]})}},hH=L.forwardRef((t,e)=>{const s=wi.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return wi.createElement(uH,{key:s,innerRef:e,...t})}),fH=wi.memo(hH),pH=typeof window<"u"?L.useLayoutEffect:L.useEffect,mH=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},s=this.editor;return s.on("transaction",e),()=>{s.off("transaction",e)}}}};function gH(t){var e;const[s]=L.useState(()=>new mH(t.editor)),n=oH.useSyncExternalStoreWithSelector(s.subscribe,s.getSnapshot,s.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:aH);return pH(()=>s.watch(t.editor),[t.editor,s]),L.useDebugValue(n),n}var xH=!1,gy=typeof window>"u",bH=gy||!!(typeof window<"u"&&window.next),vH=class y3{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(s=>s())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?gy||bH?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var a,i;return(i=(a=this.options.current).onBeforeCreate)==null?void 0:i.call(a,...n)},onBlur:(...n)=>{var a,i;return(i=(a=this.options.current).onBlur)==null?void 0:i.call(a,...n)},onCreate:(...n)=>{var a,i;return(i=(a=this.options.current).onCreate)==null?void 0:i.call(a,...n)},onDestroy:(...n)=>{var a,i;return(i=(a=this.options.current).onDestroy)==null?void 0:i.call(a,...n)},onFocus:(...n)=>{var a,i;return(i=(a=this.options.current).onFocus)==null?void 0:i.call(a,...n)},onSelectionUpdate:(...n)=>{var a,i;return(i=(a=this.options.current).onSelectionUpdate)==null?void 0:i.call(a,...n)},onTransaction:(...n)=>{var a,i;return(i=(a=this.options.current).onTransaction)==null?void 0:i.call(a,...n)},onUpdate:(...n)=>{var a,i;return(i=(a=this.options.current).onUpdate)==null?void 0:i.call(a,...n)},onContentError:(...n)=>{var a,i;return(i=(a=this.options.current).onContentError)==null?void 0:i.call(a,...n)},onDrop:(...n)=>{var a,i;return(i=(a=this.options.current).onDrop)==null?void 0:i.call(a,...n)},onPaste:(...n)=>{var a,i;return(i=(a=this.options.current).onPaste)==null?void 0:i.call(a,...n)},onDelete:(...n)=>{var a,i;return(i=(a=this.options.current).onDelete)==null?void 0:i.call(a,...n)}};return new A9(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,s){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&s.extensions?e.extensions.length!==s.extensions.length?!1:e.extensions.every((a,i)=>{var c;return a===((c=s.extensions)==null?void 0:c[i])}):e[n]===s[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?y3.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,a)=>n===e[a]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,s=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){s&&s.setOptions(this.options.current);return}s&&!s.isDestroyed&&(s.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function yH(t={},e=[]){const s=L.useRef(t);s.current=t;const[n]=L.useState(()=>new vH(s)),a=dk.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return L.useDebugValue(a),L.useEffect(n.onRender(e)),gH({editor:a,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&i===0?0:i+1}),a}var wH=L.createContext({editor:null});wH.Consumer;var jH=L.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),NH=()=>L.useContext(jH);wi.forwardRef((t,e)=>{const{onDragStart:s}=NH(),n=t.as||"div";return r.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:s,style:{whiteSpace:"normal",...t.style}})});wi.createContext({markViewContentRef:()=>{}});var gx=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:s,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,s]},BH=/^\s*>\s$/,kH=Yl.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return gx("blockquote",{...Kn(this.options.HTMLAttributes,t),children:gx("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const s=">",n=[];return t.content.forEach(a=>{const A=e.renderChildren([a]).split(`
`).map(d=>d.trim()===""?s:`${s} ${d}`);n.push(A.join(`
`))}),n.join(`
${s}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[qf({find:BH,type:this.type})]}}),CH=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,SH=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,EH=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,TH=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,UH=xd.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return gx("strong",{...Kn(this.options.HTMLAttributes,t),children:gx("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[zh({find:CH,type:this.type}),zh({find:EH,type:this.type})]},addPasteRules(){return[Uu({find:SH,type:this.type}),Uu({find:TH,type:this.type})]}}),FH=/(^|[^`])`([^`]+)`(?!`)$/,LH=/(^|[^`])`([^`]+)`(?!`)/g,MH=xd.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Kn(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[zh({find:FH,type:this.type})]},addPasteRules(){return[Uu({find:LH,type:this.type})]}}),fv=4,QH=/^```([a-z]+)?[\s\n]$/,_H=/^~~~([a-z]+)?[\s\n]$/,IH=Yl.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:fv,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:s}=this.options;if(!s)return null;const i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(c=>c.startsWith(s)).map(c=>c.replace(s,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Kn(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var s;return((s=t.raw)==null?void 0:s.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var s;let n="";const a=((s=t.attrs)==null?void 0:s.language)||"";return t.content?n=[`\`\`\`${a}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${a}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,s=e.pos===1;return!t||e.parent.type.name!==this.name?!1:s||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const s=(e=this.options.tabSize)!=null?e:fv,{state:n}=t,{selection:a}=n,{$from:i,empty:c}=a;if(i.parent.type!==this.type)return!1;const A=" ".repeat(s);return c?t.commands.insertContent(A):t.commands.command(({tr:d})=>{const{from:f,to:u}=a,m=n.doc.textBetween(f,u,`
`,`
`).split(`
`).map(j=>A+j).join(`
`);return d.replaceWith(f,u,n.schema.text(m)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const s=(e=this.options.tabSize)!=null?e:fv,{state:n}=t,{selection:a}=n,{$from:i,empty:c}=a;return i.parent.type!==this.type?!1:c?t.commands.command(({tr:A})=>{var d;const{pos:f}=i,u=i.start(),p=i.end(),m=n.doc.textBetween(u,p,`
`,`
`).split(`
`);let j=0,w=0;const S=f-u;for(let I=0;I<m.length;I+=1){if(w+m[I].length>=S){j=I;break}w+=m[I].length+1}const F=((d=m[j].match(/^ */))==null?void 0:d[0])||"",U=Math.min(F.length,s);if(U===0)return!0;let _=u;for(let I=0;I<j;I+=1)_+=m[I].length+1;return A.delete(_,_+U),f-_<=U&&A.setSelection(Fs.create(A.doc,_)),!0}):t.commands.command(({tr:A})=>{const{from:d,to:f}=a,x=n.doc.textBetween(d,f,`
`,`
`).split(`
`).map(m=>{var j;const w=((j=m.match(/^ */))==null?void 0:j[0])||"",S=Math.min(w.length,s);return m.slice(S)}).join(`
`);return A.replaceWith(d,f,n.schema.text(x)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:s}=e,{$from:n,empty:a}=s;if(!a||n.parent.type!==this.type)return!1;const i=n.parentOffset===n.parent.nodeSize-2,c=n.parent.textContent.endsWith(`

`);return!i||!c?!1:t.chain().command(({tr:A})=>(A.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:s,doc:n}=e,{$from:a,empty:i}=s;if(!i||a.parent.type!==this.type||!(a.parentOffset===a.parent.nodeSize-2))return!1;const A=a.after();return A===void 0?!1:n.nodeAt(A)?t.commands.command(({tr:f})=>(f.setSelection(Vs.near(n.resolve(A))),!0)):t.commands.exitCode()}}},addInputRules(){return[py({find:QH,type:this.type,getAttributes:t=>({language:t[1]})}),py({find:_H,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Vn({key:new Ka("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const s=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),a=n?JSON.parse(n):void 0,i=a==null?void 0:a.mode;if(!s||!i)return!1;const{tr:c,schema:A}=t.state,d=A.text(s.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:i},d)),c.selection.$from.parent.type!==this.type&&c.setSelection(Fs.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),t.dispatch(c),!0}}})]}}),OH=Yl.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),DH=Yl.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Kn(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:s,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:a,storedMarks:i}=s;if(a.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:A}=n.extensionManager,d=i||a.$to.parentOffset&&a.$from.marks();return e().insertContent({type:this.name}).command(({tr:f,dispatch:u})=>{if(u&&d&&c){const p=d.filter(x=>A.includes(x.type.name));f.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),RH=Yl.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Kn(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var s;const n=(s=t.attrs)!=null&&s.level?parseInt(t.attrs.level,10):1,a="#".repeat(n);return t.content?`${a} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>py({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),HH=Yl.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Kn(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!h9(e,e.schema.nodes[this.name]))return!1;const{selection:s}=e,{$to:n}=s,a=t();return t3(s)?a.insertContentAt(n.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({state:i,tr:c,dispatch:A})=>{if(A){const{$to:d}=c.selection,f=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?c.setSelection(Fs.create(c.doc,d.pos+1)):d.nodeAfter.isBlock?c.setSelection(ys.create(c.doc,d.pos)):c.setSelection(Fs.create(c.doc,d.pos));else{const u=i.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,p=u==null?void 0:u.create();p&&(c.insert(f,p),c.setSelection(Fs.create(c.doc,f+1)))}c.scrollIntoView()}return!0}).run()}}},addInputRules(){return[x3({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),PH=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,zH=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,KH=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,VH=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,$H=xd.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Kn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[zh({find:PH,type:this.type}),zh({find:KH,type:this.type})]},addPasteRules(){return[Uu({find:zH,type:this.type}),Uu({find:VH,type:this.type})]}});const GH="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",qH="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",xy="numeric",by="ascii",vy="alpha",bp="asciinumeric",ap="alphanumeric",yy="domain",w3="emoji",YH="scheme",JH="slashscheme",pv="whitespace";function WH(t,e){return t in e||(e[t]=[]),e[t]}function Nh(t,e,s){e[xy]&&(e[bp]=!0,e[ap]=!0),e[by]&&(e[bp]=!0,e[vy]=!0),e[bp]&&(e[ap]=!0),e[vy]&&(e[ap]=!0),e[ap]&&(e[yy]=!0),e[w3]&&(e[yy]=!0);for(const n in e){const a=WH(n,s);a.indexOf(t)<0&&a.push(t)}}function XH(t,e){const s={};for(const n in e)e[n].indexOf(t)>=0&&(s[n]=!0);return s}function zl(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}zl.groups={};zl.prototype={accepts(){return!!this.t},go(t){const e=this,s=e.j[t];if(s)return s;for(let n=0;n<e.jr.length;n++){const a=e.jr[n][0],i=e.jr[n][1];if(i&&a.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,s,n){for(let a=0;a<t.length;a++)this.tt(t[a],e,s,n)},tr(t,e,s,n){n=n||zl.groups;let a;return e&&e.j?a=e:(a=new zl(e),s&&n&&Nh(e,s,n)),this.jr.push([t,a]),a},ts(t,e,s,n){let a=this;const i=t.length;if(!i)return a;for(let c=0;c<i-1;c++)a=a.tt(t[c]);return a.tt(t[i-1],e,s,n)},tt(t,e,s,n){n=n||zl.groups;const a=this;if(e&&e.j)return a.j[t]=e,e;const i=e;let c,A=a.go(t);if(A?(c=new zl,Object.assign(c.j,A.j),c.jr.push.apply(c.jr,A.jr),c.jd=A.jd,c.t=A.t):c=new zl,i){if(n)if(c.t&&typeof c.t=="string"){const d=Object.assign(XH(c.t,n),s);Nh(i,d,n)}else s&&Nh(i,s,n);c.t=i}return a.j[t]=c,c}};const zs=(t,e,s,n,a)=>t.ta(e,s,n,a),Jn=(t,e,s,n,a)=>t.tr(e,s,n,a),t4=(t,e,s,n,a)=>t.ts(e,s,n,a),Lt=(t,e,s,n,a)=>t.tt(e,s,n,a),cd="WORD",wy="UWORD",j3="ASCIINUMERICAL",N3="ALPHANUMERICAL",Rp="LOCALHOST",jy="TLD",Ny="UTLD",Lg="SCHEME",Lf="SLASH_SCHEME",k2="NUM",By="WS",C2="NL",vp="OPENBRACE",yp="CLOSEBRACE",xx="OPENBRACKET",bx="CLOSEBRACKET",vx="OPENPAREN",yx="CLOSEPAREN",wx="OPENANGLEBRACKET",jx="CLOSEANGLEBRACKET",Nx="FULLWIDTHLEFTPAREN",Bx="FULLWIDTHRIGHTPAREN",kx="LEFTCORNERBRACKET",Cx="RIGHTCORNERBRACKET",Sx="LEFTWHITECORNERBRACKET",Ex="RIGHTWHITECORNERBRACKET",Tx="FULLWIDTHLESSTHAN",Ux="FULLWIDTHGREATERTHAN",Fx="AMPERSAND",Lx="APOSTROPHE",Mx="ASTERISK",Au="AT",Qx="BACKSLASH",_x="BACKTICK",Ix="CARET",fu="COLON",S2="COMMA",Ox="DOLLAR",pA="DOT",Dx="EQUALS",E2="EXCLAMATION",Xo="HYPHEN",wp="PERCENT",Rx="PIPE",Hx="PLUS",Px="POUND",jp="QUERY",T2="QUOTE",B3="FULLWIDTHMIDDLEDOT",U2="SEMI",mA="SLASH",Np="TILDE",zx="UNDERSCORE",k3="EMOJI",Kx="SYM";var C3=Object.freeze({__proto__:null,ALPHANUMERICAL:N3,AMPERSAND:Fx,APOSTROPHE:Lx,ASCIINUMERICAL:j3,ASTERISK:Mx,AT:Au,BACKSLASH:Qx,BACKTICK:_x,CARET:Ix,CLOSEANGLEBRACKET:jx,CLOSEBRACE:yp,CLOSEBRACKET:bx,CLOSEPAREN:yx,COLON:fu,COMMA:S2,DOLLAR:Ox,DOT:pA,EMOJI:k3,EQUALS:Dx,EXCLAMATION:E2,FULLWIDTHGREATERTHAN:Ux,FULLWIDTHLEFTPAREN:Nx,FULLWIDTHLESSTHAN:Tx,FULLWIDTHMIDDLEDOT:B3,FULLWIDTHRIGHTPAREN:Bx,HYPHEN:Xo,LEFTCORNERBRACKET:kx,LEFTWHITECORNERBRACKET:Sx,LOCALHOST:Rp,NL:C2,NUM:k2,OPENANGLEBRACKET:wx,OPENBRACE:vp,OPENBRACKET:xx,OPENPAREN:vx,PERCENT:wp,PIPE:Rx,PLUS:Hx,POUND:Px,QUERY:jp,QUOTE:T2,RIGHTCORNERBRACKET:Cx,RIGHTWHITECORNERBRACKET:Ex,SCHEME:Lg,SEMI:U2,SLASH:mA,SLASH_SCHEME:Lf,SYM:Kx,TILDE:Np,TLD:jy,UNDERSCORE:zx,UTLD:Ny,UWORD:wy,WORD:cd,WS:By});const ld=/[a-z]/,Z0=new RegExp("\\p{L}","u"),mv=new RegExp("\\p{Emoji}","u"),od=/\d/,gv=/\s/,s4="\r",xv=`
`,ZH="",eP="",bv="";let pg=null,mg=null;function tP(t=[]){const e={};zl.groups=e;const s=new zl;pg==null&&(pg=r4(GH)),mg==null&&(mg=r4(qH)),Lt(s,"'",Lx),Lt(s,"{",vp),Lt(s,"}",yp),Lt(s,"[",xx),Lt(s,"]",bx),Lt(s,"(",vx),Lt(s,")",yx),Lt(s,"<",wx),Lt(s,">",jx),Lt(s,"",Nx),Lt(s,"",Bx),Lt(s,"",kx),Lt(s,"",Cx),Lt(s,"",Sx),Lt(s,"",Ex),Lt(s,"",Tx),Lt(s,"",Ux),Lt(s,"&",Fx),Lt(s,"*",Mx),Lt(s,"@",Au),Lt(s,"`",_x),Lt(s,"^",Ix),Lt(s,":",fu),Lt(s,",",S2),Lt(s,"$",Ox),Lt(s,".",pA),Lt(s,"=",Dx),Lt(s,"!",E2),Lt(s,"-",Xo),Lt(s,"%",wp),Lt(s,"|",Rx),Lt(s,"+",Hx),Lt(s,"#",Px),Lt(s,"?",jp),Lt(s,'"',T2),Lt(s,"/",mA),Lt(s,";",U2),Lt(s,"~",Np),Lt(s,"_",zx),Lt(s,"\\",Qx),Lt(s,"",B3);const n=Jn(s,od,k2,{[xy]:!0});Jn(n,od,n);const a=Jn(n,ld,j3,{[bp]:!0}),i=Jn(n,Z0,N3,{[ap]:!0}),c=Jn(s,ld,cd,{[by]:!0});Jn(c,od,a),Jn(c,ld,c),Jn(a,od,a),Jn(a,ld,a);const A=Jn(s,Z0,wy,{[vy]:!0});Jn(A,ld),Jn(A,od,i),Jn(A,Z0,A),Jn(i,od,i),Jn(i,ld),Jn(i,Z0,i);const d=Lt(s,xv,C2,{[pv]:!0}),f=Lt(s,s4,By,{[pv]:!0}),u=Jn(s,gv,By,{[pv]:!0});Lt(s,bv,u),Lt(f,xv,d),Lt(f,bv,u),Jn(f,gv,u),Lt(u,s4),Lt(u,xv),Jn(u,gv,u),Lt(u,bv,u);const p=Jn(s,mv,k3,{[w3]:!0});Lt(p,"#"),Jn(p,mv,p),Lt(p,ZH,p);const x=Lt(p,eP);Lt(x,"#"),Jn(x,mv,p);const m=[[ld,c],[od,a]],j=[[ld,null],[Z0,A],[od,i]];for(let w=0;w<pg.length;w++)lu(s,pg[w],jy,cd,m);for(let w=0;w<mg.length;w++)lu(s,mg[w],Ny,wy,j);Nh(jy,{tld:!0,ascii:!0},e),Nh(Ny,{utld:!0,alpha:!0},e),lu(s,"file",Lg,cd,m),lu(s,"mailto",Lg,cd,m),lu(s,"http",Lf,cd,m),lu(s,"https",Lf,cd,m),lu(s,"ftp",Lf,cd,m),lu(s,"ftps",Lf,cd,m),Nh(Lg,{scheme:!0,ascii:!0},e),Nh(Lf,{slashscheme:!0,ascii:!0},e),t=t.sort((w,S)=>w[0]>S[0]?1:-1);for(let w=0;w<t.length;w++){const S=t[w][0],F=t[w][1]?{[YH]:!0}:{[JH]:!0};S.indexOf("-")>=0?F[yy]=!0:ld.test(S)?od.test(S)?F[bp]=!0:F[by]=!0:F[xy]=!0,t4(s,S,S,F)}return t4(s,"localhost",Rp,{ascii:!0}),s.jd=new zl(Kx),{start:s,tokens:Object.assign({groups:e},C3)}}function S3(t,e){const s=sP(e.replace(/[A-Z]/g,A=>A.toLowerCase())),n=s.length,a=[];let i=0,c=0;for(;c<n;){let A=t,d=null,f=0,u=null,p=-1,x=-1;for(;c<n&&(d=A.go(s[c]));)A=d,A.accepts()?(p=0,x=0,u=A):p>=0&&(p+=s[c].length,x++),f+=s[c].length,i+=s[c].length,c++;i-=p,c-=x,f-=p,a.push({t:u.t,v:e.slice(i-f,i),s:i-f,e:i})}return a}function sP(t){const e=[],s=t.length;let n=0;for(;n<s;){let a=t.charCodeAt(n),i,c=a<55296||a>56319||n+1===s||(i=t.charCodeAt(n+1))<56320||i>57343?t[n]:t.slice(n,n+2);e.push(c),n+=c.length}return e}function lu(t,e,s,n,a){let i;const c=e.length;for(let A=0;A<c-1;A++){const d=e[A];t.j[d]?i=t.j[d]:(i=new zl(n),i.jr=a.slice(),t.j[d]=i),t=i}return i=new zl(s),i.jr=a.slice(),t.j[e[c-1]]=i,i}function r4(t){const e=[],s=[];let n=0,a="0123456789";for(;n<t.length;){let i=0;for(;a.indexOf(t[n+i])>=0;)i++;if(i>0){e.push(s.join(""));for(let c=parseInt(t.substring(n,n+i),10);c>0;c--)s.pop();n+=i}else s.push(t[n]),n++}return e}const Hp={defaultProtocol:"http",events:null,format:n4,formatHref:n4,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function F2(t,e=null){let s=Object.assign({},Hp);t&&(s=Object.assign(s,t instanceof F2?t.o:t));const n=s.ignoreTags,a=[];for(let i=0;i<n.length;i++)a.push(n[i].toUpperCase());this.o=s,e&&(this.defaultRender=e),this.ignoreTags=a}F2.prototype={o:Hp,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,s){const n=e!=null;let a=this.o[t];return a&&(typeof a=="object"?(a=s.t in a?a[s.t]:Hp[t],typeof a=="function"&&n&&(a=a(e,s))):typeof a=="function"&&n&&(a=a(e,s.t,s)),a)},getObj(t,e,s){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,s.t,s)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function n4(t){return t}function E3(t,e){this.t="token",this.v=t,this.tk=e}E3.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),s=t.get("truncate",e,this),n=t.get("format",e,this);return s&&n.length>s?n.substring(0,s)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Hp.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,s=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",s,this),a=t.get("tagName",s,e),i=this.toFormattedString(t),c={},A=t.get("className",s,e),d=t.get("target",s,e),f=t.get("rel",s,e),u=t.getObj("attributes",s,e),p=t.getObj("events",s,e);return c.href=n,A&&(c.class=A),d&&(c.target=d),f&&(c.rel=f),u&&Object.assign(c,u),{tagName:a,attributes:c,content:i,eventListeners:p}}};function kb(t,e){class s extends E3{constructor(a,i){super(a,i),this.t=t}}for(const n in e)s.prototype[n]=e[n];return s.t=t,s}const a4=kb("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),i4=kb("text"),rP=kb("nl"),gg=kb("url",{isLink:!0,toHref(t=Hp.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Rp&&t[1].t===fu}}),Wo=t=>new zl(t);function nP({groups:t}){const e=t.domain.concat([Fx,Mx,Au,Qx,_x,Ix,Ox,Dx,Xo,k2,wp,Rx,Hx,Px,mA,Kx,Np,zx]),s=[Lx,fu,S2,pA,E2,wp,jp,T2,U2,wx,jx,vp,yp,bx,xx,vx,yx,Nx,Bx,kx,Cx,Sx,Ex,Tx,Ux],n=[Fx,Lx,Mx,Qx,_x,Ix,Ox,Dx,Xo,vp,yp,wp,Rx,Hx,Px,jp,mA,Kx,Np,zx],a=Wo(),i=Lt(a,Np);zs(i,n,i),zs(i,t.domain,i);const c=Wo(),A=Wo(),d=Wo();zs(a,t.domain,c),zs(a,t.scheme,A),zs(a,t.slashscheme,d),zs(c,n,i),zs(c,t.domain,c);const f=Lt(c,Au);Lt(i,Au,f),Lt(A,Au,f),Lt(d,Au,f);const u=Lt(i,pA);zs(u,n,i),zs(u,t.domain,i);const p=Wo();zs(f,t.domain,p),zs(p,t.domain,p);const x=Lt(p,pA);zs(x,t.domain,p);const m=Wo(a4);zs(x,t.tld,m),zs(x,t.utld,m),Lt(f,Rp,m);const j=Lt(p,Xo);Lt(j,Xo,j),zs(j,t.domain,p),zs(m,t.domain,p),Lt(m,pA,x),Lt(m,Xo,j);const w=Lt(m,fu);zs(w,t.numeric,a4);const S=Lt(c,Xo),C=Lt(c,pA);Lt(S,Xo,S),zs(S,t.domain,c),zs(C,n,i),zs(C,t.domain,c);const F=Wo(gg);zs(C,t.tld,F),zs(C,t.utld,F),zs(F,t.domain,c),zs(F,n,i),Lt(F,pA,C),Lt(F,Xo,S),Lt(F,Au,f);const U=Lt(F,fu),_=Wo(gg);zs(U,t.numeric,_);const z=Wo(gg),I=Wo();zs(z,e,z),zs(z,s,I),zs(I,e,z),zs(I,s,I),Lt(F,mA,z),Lt(_,mA,z);const H=Lt(A,fu),ee=Lt(d,fu),$=Lt(ee,mA),ce=Lt($,mA);zs(A,t.domain,c),Lt(A,pA,C),Lt(A,Xo,S),zs(d,t.domain,c),Lt(d,pA,C),Lt(d,Xo,S),zs(H,t.domain,z),Lt(H,mA,z),Lt(H,jp,z),zs(ce,t.domain,z),zs(ce,e,z),Lt(ce,mA,z);const Q=[[vp,yp],[xx,bx],[vx,yx],[wx,jx],[Nx,Bx],[kx,Cx],[Sx,Ex],[Tx,Ux]];for(let q=0;q<Q.length;q++){const[te,X]=Q[q],Ae=Lt(z,te);Lt(I,te,Ae),Lt(Ae,X,z);const W=Wo(gg);zs(Ae,e,W);const se=Wo();zs(Ae,s),zs(W,e,W),zs(W,s,se),zs(se,e,W),zs(se,s,se),Lt(W,X,z),Lt(se,X,z)}return Lt(a,Rp,F),Lt(a,C2,rP),{start:a,tokens:C3}}function aP(t,e,s){let n=s.length,a=0,i=[],c=[];for(;a<n;){let A=t,d=null,f=null,u=0,p=null,x=-1;for(;a<n&&!(d=A.go(s[a].t));)c.push(s[a++]);for(;a<n&&(f=d||A.go(s[a].t));)d=null,A=f,A.accepts()?(x=0,p=A):x>=0&&x++,a++,u++;if(x<0)a-=u,a<n&&(c.push(s[a]),a++);else{c.length>0&&(i.push(vv(i4,e,c)),c=[]),a-=x,u-=x;const m=p.t,j=s.slice(a-u,a);i.push(vv(m,e,j))}}return c.length>0&&i.push(vv(i4,e,c)),i}function vv(t,e,s){const n=s[0].s,a=s[s.length-1].e,i=e.slice(n,a);return new t(i,s)}const iP=typeof console<"u"&&console&&console.warn||(()=>{}),lP="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",bn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function oP(){return zl.groups={},bn.scanner=null,bn.parser=null,bn.tokenQueue=[],bn.pluginQueue=[],bn.customSchemes=[],bn.initialized=!1,bn}function l4(t,e=!1){if(bn.initialized&&iP(`linkifyjs: already initialized - will not register custom scheme "${t}" ${lP}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);bn.customSchemes.push([t,e])}function cP(){bn.scanner=tP(bn.customSchemes);for(let t=0;t<bn.tokenQueue.length;t++)bn.tokenQueue[t][1]({scanner:bn.scanner});bn.parser=nP(bn.scanner.tokens);for(let t=0;t<bn.pluginQueue.length;t++)bn.pluginQueue[t][1]({scanner:bn.scanner,parser:bn.parser});return bn.initialized=!0,bn}function L2(t){return bn.initialized||cP(),aP(bn.parser.start,t,S3(bn.scanner.start,t))}L2.scan=S3;function T3(t,e=null,s=null){if(e&&typeof e=="object"){if(s)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);s=e,e=null}const n=new F2(s),a=L2(t),i=[];for(let c=0;c<a.length;c++){const A=a[c];A.isLink&&(!e||A.t===e)&&n.check(A)&&i.push(A.toFormattedObject(n))}return i}var M2="[\0- -\u2029]",AP=new RegExp(M2),dP=new RegExp(`${M2}$`),uP=new RegExp(M2,"g");function hP(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function fP(t){return new Vn({key:new Ka("autolink"),appendTransaction:(e,s,n)=>{const a=e.some(f=>f.docChanged)&&!s.doc.eq(n.doc),i=e.some(f=>f.getMeta("preventAutolink"));if(!a||i)return;const{tr:c}=n,A=GC(s.doc,[...e]);if(e3(A).forEach(({newRange:f})=>{const u=uR(n.doc,f,m=>m.isTextblock);let p,x;if(u.length>1)p=u[0],x=n.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(u.length){const m=n.doc.textBetween(f.from,f.to," "," ");if(!dP.test(m))return;p=u[0],x=n.doc.textBetween(p.pos,f.to,void 0," ")}if(p&&x){const m=x.split(AP).filter(Boolean);if(m.length<=0)return!1;const j=m[m.length-1],w=p.pos+x.lastIndexOf(j);if(!j)return!1;const S=L2(j).map(C=>C.toObject(t.defaultProtocol));if(!hP(S))return!1;S.filter(C=>C.isLink).map(C=>({...C,from:w+C.start+1,to:w+C.end+1})).filter(C=>n.schema.marks.code?!n.doc.rangeHasMark(C.from,C.to,n.schema.marks.code):!0).filter(C=>t.validate(C.value)).filter(C=>t.shouldAutoLink(C.value)).forEach(C=>{y2(C.from,C.to,n.doc).some(F=>F.mark.type===t.type)||c.addMark(C.from,C.to,t.type.create({href:C.href}))})}}),!!c.steps.length)return c}})}function pP(t){return new Vn({key:new Ka("handleClickLink"),props:{handleClick:(e,s,n)=>{var a,i;if(n.button!==0||!e.editable)return!1;let c=!1;if(t.enableClickSelection&&(c=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){let A=null;if(n.target instanceof HTMLAnchorElement)A=n.target;else{let p=n.target;const x=[];for(;p.nodeName!=="DIV";)x.push(p),p=p.parentNode;A=x.find(m=>m.nodeName==="A")}if(!A)return c;const d=ZC(e.state,t.type.name),f=(a=A==null?void 0:A.href)!=null?a:d.href,u=(i=A==null?void 0:A.target)!=null?i:d.target;A&&f&&(window.open(f,u),c=!0)}return c}}})}function mP(t){return new Vn({key:new Ka("handlePasteLink"),props:{handlePaste:(e,s,n)=>{const{shouldAutoLink:a}=t,{state:i}=e,{selection:c}=i,{empty:A}=c;if(A)return!1;let d="";n.content.forEach(u=>{d+=u.textContent});const f=T3(d,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===d);return!d||!f||a!==void 0&&!a(f.href)?!1:t.editor.commands.setMark(t.type,{href:f.href})}}})}function ph(t,e){const s=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const a=typeof n=="string"?n:n.scheme;a&&s.push(a)}),!t||t.replace(uP,"").match(new RegExp(`^(?:(?:${s.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var U3=xd.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){l4(t);return}l4(t.scheme,t.optionalSlashes)})},onDestroy(){oP()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!ph(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:s=>!!ph(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!ph(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Kn(this.options.HTMLAttributes,t),0]:["a",Kn(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var s;const n=((s=t.attrs)==null?void 0:s.href)||"";return`[${e.renderChildren(t)}](${n})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:s}=t;return this.options.isAllowedUri(s,{defaultValidate:n=>!!ph(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:s}=t||{};return s&&!this.options.isAllowedUri(s,{defaultValidate:n=>!!ph(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Uu({find:t=>{const e=[];if(t){const{protocols:s,defaultProtocol:n}=this.options,a=T3(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:c=>!!ph(c,s),protocols:s,defaultProtocol:n}));a.length&&a.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:s}=this.options;return this.options.autolink&&t.push(fP({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:a=>!!ph(a,e),protocols:e,defaultProtocol:s}),shouldAutoLink:this.options.shouldAutoLink})),t.push(pP({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(mP({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),gP=Object.defineProperty,xP=(t,e)=>{for(var s in e)gP(t,s,{get:e[s],enumerable:!0})},bP="listItem",o4="textStyle",c4=/^\s*([-+*])\s$/,F3=Yl.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Kn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(bP,this.editor.getAttributes(o4)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=qf({find:c4,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=qf({find:c4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(o4),editor:this.editor})),[t]}}),L3=Yl.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Kn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let s=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(a=>a.type==="paragraph"))s=e.parseChildren(t.tokens);else{const a=t.tokens[0];if(a&&a.type==="text"&&a.tokens&&a.tokens.length>0){if(s=[{type:"paragraph",content:e.parseInline(a.tokens)}],t.tokens.length>1){const c=t.tokens.slice(1),A=e.parseChildren(c);s.push(...A)}}else s=e.parseChildren(t.tokens)}return s.length===0&&(s=[{type:"paragraph",content:[]}]),{type:"listItem",content:s}},renderMarkdown:(t,e,s)=>B2(t,e,n=>n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${n.index+1}. `:"- ",s),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),vP={};xP(vP,{findListItemPos:()=>Wp,getNextListDepth:()=>Q2,handleBackspace:()=>ky,handleDelete:()=>Cy,hasListBefore:()=>M3,hasListItemAfter:()=>yP,hasListItemBefore:()=>Q3,listItemHasSubList:()=>_3,nextListIsDeeper:()=>I3,nextListIsHigher:()=>O3});var Wp=(t,e)=>{const{$from:s}=e.selection,n=Ua(t,e.schema);let a=null,i=s.depth,c=s.pos,A=null;for(;i>0&&A===null;)a=s.node(i),a.type===n?A=i:(i-=1,c-=1);return A===null?null:{$pos:e.doc.resolve(c),depth:A}},Q2=(t,e)=>{const s=Wp(t,e);if(!s)return!1;const[,n]=wR(e,t,s.$pos.pos+4);return n},M3=(t,e,s)=>{const{$anchor:n}=t.selection,a=Math.max(0,n.pos-2),i=t.doc.resolve(a).node();return!(!i||!s.includes(i.type.name))},Q3=(t,e)=>{var s;const{$anchor:n}=e.selection,a=e.doc.resolve(n.pos-2);return!(a.index()===0||((s=a.nodeBefore)==null?void 0:s.type.name)!==t)},_3=(t,e,s)=>{if(!s)return!1;const n=Ua(t,e.schema);let a=!1;return s.descendants(i=>{i.type===n&&(a=!0)}),a},ky=(t,e,s)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Tu(t.state,e)&&M3(t.state,e,s)){const{$anchor:A}=t.state.selection,d=t.state.doc.resolve(A.before()-1),f=[];d.node().descendants((x,m)=>{x.type.name===e&&f.push({node:x,pos:m})});const u=f.at(-1);if(!u)return!1;const p=t.state.doc.resolve(d.start()+u.pos+1);return t.chain().cut({from:A.start()-1,to:A.end()+1},p.end()).joinForward().run()}if(!Tu(t.state,e)||!kR(t.state))return!1;const n=Wp(e,t.state);if(!n)return!1;const i=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),c=_3(e,t.state,i);return Q3(e,t.state)&&!c?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},I3=(t,e)=>{const s=Q2(t,e),n=Wp(t,e);return!n||!s?!1:s>n.depth},O3=(t,e)=>{const s=Q2(t,e),n=Wp(t,e);return!n||!s?!1:s<n.depth},Cy=(t,e)=>{if(!Tu(t.state,e)||!BR(t.state,e))return!1;const{selection:s}=t.state,{$from:n,$to:a}=s;return!s.empty&&n.sameParent(a)?!1:I3(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():O3(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},yP=(t,e)=>{var s;const{$anchor:n}=e.selection,a=e.doc.resolve(n.pos-n.parentOffset-2);return!(a.index()===a.parent.childCount-1||((s=a.nodeAfter)==null?void 0:s.type.name)!==t)},D3=Yr.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:s})=>{t.state.schema.nodes[s]!==void 0&&Cy(t,s)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:s})=>{t.state.schema.nodes[s]!==void 0&&Cy(t,s)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:s,wrapperNames:n})=>{t.state.schema.nodes[s]!==void 0&&ky(t,s,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:s,wrapperNames:n})=>{t.state.schema.nodes[s]!==void 0&&ky(t,s,n)&&(e=!0)}),e}}}}),A4=/^(\s*)(\d+)\.\s+(.*)$/,wP=/^\s/;function jP(t){const e=[];let s=0,n=0;for(;s<t.length;){const a=t[s],i=a.match(A4);if(!i)break;const[,c,A,d]=i,f=c.length;let u=d,p=s+1;const x=[a];for(;p<t.length;){const m=t[p];if(m.match(A4))break;if(m.trim()==="")x.push(m),u+=`
`,p+=1;else if(m.match(wP))x.push(m),u+=`
${m.slice(f+2)}`,p+=1;else break}e.push({indent:f,number:parseInt(A,10),content:u.trim(),raw:x.join(`
`)}),n=p,s=p}return[e,n]}function R3(t,e,s){var n;const a=[];let i=0;for(;i<t.length;){const c=t[i];if(c.indent===e){const A=c.content.split(`
`),d=((n=A[0])==null?void 0:n.trim())||"",f=[];d&&f.push({type:"paragraph",raw:d,tokens:s.inlineTokens(d)});const u=A.slice(1).join(`
`).trim();if(u){const m=s.blockTokens(u);f.push(...m)}let p=i+1;const x=[];for(;p<t.length&&t[p].indent>e;)x.push(t[p]),p+=1;if(x.length>0){const m=Math.min(...x.map(w=>w.indent)),j=R3(x,m,s);f.push({type:"list",ordered:!0,start:x[0].number,items:j,raw:x.map(w=>w.raw).join(`
`)})}a.push({type:"list_item",raw:c.raw,tokens:f}),i=p}else i+=1}return a}function NP(t,e){return t.map(s=>{if(s.type!=="list_item")return e.parseChildren([s])[0];const n=[];return s.tokens&&s.tokens.length>0&&s.tokens.forEach(a=>{if(a.type==="paragraph"||a.type==="list"||a.type==="blockquote"||a.type==="code")n.push(...e.parseChildren([a]));else if(a.type==="text"&&a.tokens){const i=e.parseChildren([a]);n.push({type:"paragraph",content:i})}else{const i=e.parseChildren([a]);i.length>0&&n.push(...i)}}),{type:"listItem",content:n}})}var BP="listItem",d4="textStyle",u4=/^(\d+)\.\s$/,H3=Yl.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...s}=t;return e===1?["ol",Kn(this.options.HTMLAttributes,s),0]:["ol",Kn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const s=t.start||1,n=t.items?NP(t.items,e):[];return s!==1?{type:"orderedList",attrs:{start:s},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),s=e==null?void 0:e.index;return s!==void 0?s:-1},tokenize:(t,e,s)=>{var n;const a=t.split(`
`),[i,c]=jP(a);if(i.length===0)return;const A=R3(i,0,s);return A.length===0?void 0:{type:"list",ordered:!0,start:((n=i[0])==null?void 0:n.number)||1,items:A,raw:a.slice(0,c).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(BP,this.editor.getAttributes(d4)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=qf({find:u4,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,s)=>s.childCount+s.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=qf({find:u4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(d4)}),joinPredicate:(e,s)=>s.childCount+s.attrs.start===+e[1],editor:this.editor})),[t]}}),kP=/^\s*(\[([( |x])?\])\s$/,CP=Yl.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Kn(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const s=[];if(t.tokens&&t.tokens.length>0?s.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?s.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):s.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);s.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},s)},renderMarkdown:(t,e)=>{var s;const a=`- [${(s=t.attrs)!=null&&s.checked?"x":" "}] `;return B2(t,e,a)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:s,editor:n})=>{const a=document.createElement("li"),i=document.createElement("label"),c=document.createElement("span"),A=document.createElement("input"),d=document.createElement("div"),f=u=>{var p,x;A.ariaLabel=((x=(p=this.options.a11y)==null?void 0:p.checkboxLabel)==null?void 0:x.call(p,u,A.checked))||`Task item checkbox for ${u.textContent||"empty task item"}`};return f(t),i.contentEditable="false",A.type="checkbox",A.addEventListener("mousedown",u=>u.preventDefault()),A.addEventListener("change",u=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){A.checked=!A.checked;return}const{checked:p}=u.target;n.isEditable&&typeof s=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:x})=>{const m=s();if(typeof m!="number")return!1;const j=x.doc.nodeAt(m);return x.setNodeMarkup(m,void 0,{...j==null?void 0:j.attrs,checked:p}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,p)||(A.checked=!A.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([u,p])=>{a.setAttribute(u,p)}),a.dataset.checked=t.attrs.checked,A.checked=t.attrs.checked,i.append(A,c),a.append(i,d),Object.entries(e).forEach(([u,p])=>{a.setAttribute(u,p)}),{dom:a,contentDOM:d,update:u=>u.type!==this.type?!1:(a.dataset.checked=u.attrs.checked,A.checked=u.attrs.checked,f(u),!0)}}},addInputRules(){return[qf({find:kP,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),SP=Yl.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Kn(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const s=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return s!==void 0?s:-1},tokenize(t,e,s){const n=i=>{const c=my(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:A=>({indentLevel:A[1].length,mainContent:A[4],checked:A[3].toLowerCase()==="x"}),createToken:(A,d)=>({type:"taskItem",raw:"",mainContent:A.mainContent,indentLevel:A.indentLevel,checked:A.checked,text:A.mainContent,tokens:s.inlineTokens(A.mainContent),nestedTokens:d}),customNestedParser:n},s);return c?[{type:"taskList",raw:c.raw,items:c.items}]:s.blockTokens(i)},a=my(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,c)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:s.inlineTokens(i.mainContent),nestedTokens:c}),customNestedParser:n},s);if(a)return{type:"taskList",raw:a.raw,items:a.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Yr.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(F3.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(L3.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(D3.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(H3.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(CP.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(SP.configure(this.options.taskList)),t}});var EP=Yl.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Kn(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const s=t.tokens||[];return s.length===1&&s[0].type==="image"?e.parseChildren([s[0]]):e.createNode("paragraph",void 0,e.parseInline(s))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),TP=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,UP=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,FP=xd.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Kn(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[zh({find:TP,type:this.type})]},addPasteRules(){return[Uu({find:UP,type:this.type})]}}),LP=Yl.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),P3=xd.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Kn(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,s){const a=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!a)return;const i=a[2].trim();return{type:"underline",raw:a[0],text:i,tokens:s.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function MP(t={}){return new Vn({view(e){return new QP(e,t)}})}class QP{constructor(e,s){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=s.width)!==null&&n!==void 0?n:1,this.color=s.color===!1?void 0:s.color||"black",this.class=s.class,this.handlers=["dragover","dragend","drop","dragleave"].map(a=>{let i=c=>{this[a](c)};return e.dom.addEventListener(a,i),{name:a,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:s})=>this.editorView.dom.removeEventListener(e,s))}update(e,s){this.cursorPos!=null&&s.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),s=!e.parent.inlineContent,n,a=this.editorView.dom,i=a.getBoundingClientRect(),c=i.width/a.offsetWidth,A=i.height/a.offsetHeight;if(s){let p=e.nodeBefore,x=e.nodeAfter;if(p||x){let m=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(m){let j=m.getBoundingClientRect(),w=p?j.bottom:j.top;p&&x&&(w=(w+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let S=this.width/2*A;n={left:j.left,right:j.right,top:w-S,bottom:w+S}}}}if(!n){let p=this.editorView.coordsAtPos(this.cursorPos),x=this.width/2*c;n={left:p.left-x,right:p.left+x,top:p.top,bottom:p.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",s),this.element.classList.toggle("prosemirror-dropcursor-inline",!s);let f,u;if(!d||d==document.body&&getComputedStyle(d).position=="static")f=-pageXOffset,u=-pageYOffset;else{let p=d.getBoundingClientRect(),x=p.width/d.offsetWidth,m=p.height/d.offsetHeight;f=p.left-d.scrollLeft*x,u=p.top-d.scrollTop*m}this.element.style.left=(n.left-f)/c+"px",this.element.style.top=(n.top-u)/A+"px",this.element.style.width=(n.right-n.left)/c+"px",this.element.style.height=(n.bottom-n.top)/A+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let s=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=s&&s.inside>=0&&this.editorView.state.doc.nodeAt(s.inside),a=n&&n.type.spec.disableDropCursor,i=typeof a=="function"?a(this.editorView,s,e):a;if(s&&!i){let c=s.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let A=Ok(this.editorView.state.doc,c,this.editorView.dragging.slice);A!=null&&(c=A)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Zn extends Vs{constructor(e){super(e,e)}map(e,s){let n=e.resolve(s.map(this.head));return Zn.valid(n)?new Zn(n):Vs.near(n)}content(){return Jt.empty}eq(e){return e instanceof Zn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,s){if(typeof s.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Zn(e.resolve(s.pos))}getBookmark(){return new _2(this.anchor)}static valid(e){let s=e.parent;if(s.isTextblock||!_P(e)||!IP(e))return!1;let n=s.type.spec.allowGapCursor;if(n!=null)return n;let a=s.contentMatchAt(e.index()).defaultType;return a&&a.isTextblock}static findGapCursorFrom(e,s,n=!1){e:for(;;){if(!n&&Zn.valid(e))return e;let a=e.pos,i=null;for(let c=e.depth;;c--){let A=e.node(c);if(s>0?e.indexAfter(c)<A.childCount:e.index(c)>0){i=A.child(s>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;a+=s;let d=e.doc.resolve(a);if(Zn.valid(d))return d}for(;;){let c=s>0?i.firstChild:i.lastChild;if(!c){if(i.isAtom&&!i.isText&&!ys.isSelectable(i)){e=e.doc.resolve(a+i.nodeSize*s),n=!1;continue e}break}i=c,a+=s;let A=e.doc.resolve(a);if(Zn.valid(A))return A}return null}}}Zn.prototype.visible=!1;Zn.findFrom=Zn.findGapCursorFrom;Vs.jsonID("gapcursor",Zn);class _2{constructor(e){this.pos=e}map(e){return new _2(e.map(this.pos))}resolve(e){let s=e.resolve(this.pos);return Zn.valid(s)?new Zn(s):Vs.near(s)}}function z3(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function _P(t){for(let e=t.depth;e>=0;e--){let s=t.index(e),n=t.node(e);if(s==0){if(n.type.spec.isolating)return!0;continue}for(let a=n.child(s-1);;a=a.lastChild){if(a.childCount==0&&!a.inlineContent||z3(a.type))return!0;if(a.inlineContent)return!1}}return!0}function IP(t){for(let e=t.depth;e>=0;e--){let s=t.indexAfter(e),n=t.node(e);if(s==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let a=n.child(s);;a=a.firstChild){if(a.childCount==0&&!a.inlineContent||z3(a.type))return!0;if(a.inlineContent)return!1}}return!0}function OP(){return new Vn({props:{decorations:PP,createSelectionBetween(t,e,s){return e.pos==s.pos&&Zn.valid(s)?new Zn(s):null},handleClick:RP,handleKeyDown:DP,handleDOMEvents:{beforeinput:HP}}})}const DP=DC({ArrowLeft:xg("horiz",-1),ArrowRight:xg("horiz",1),ArrowUp:xg("vert",-1),ArrowDown:xg("vert",1)});function xg(t,e){const s=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,a,i){let c=n.selection,A=e>0?c.$to:c.$from,d=c.empty;if(c instanceof Fs){if(!i.endOfTextblock(s)||A.depth==0)return!1;d=!1,A=n.doc.resolve(e>0?A.after():A.before())}let f=Zn.findGapCursorFrom(A,e,d);return f?(a&&a(n.tr.setSelection(new Zn(f))),!0):!1}}function RP(t,e,s){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!Zn.valid(n))return!1;let a=t.posAtCoords({left:s.clientX,top:s.clientY});return a&&a.inside>-1&&ys.isSelectable(t.state.doc.nodeAt(a.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Zn(n))),!0)}function HP(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Zn))return!1;let{$from:s}=t.state.selection,n=s.parent.contentMatchAt(s.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let a=St.empty;for(let c=n.length-1;c>=0;c--)a=St.from(n[c].createAndFill(null,a));let i=t.state.tr.replace(s.pos,s.pos,new Jt(a,0,0));return i.setSelection(Fs.near(i.doc.resolve(s.pos+1))),t.dispatch(i),!1}function PP(t){if(!(t.selection instanceof Zn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Pn.create(t.doc,[vl.widget(t.selection.head,e,{key:"gapcursor"})])}var Vx=200,ni=function(){};ni.prototype.append=function(e){return e.length?(e=ni.from(e),!this.length&&e||e.length<Vx&&this.leafAppend(e)||this.length<Vx&&e.leafPrepend(this)||this.appendInner(e)):this};ni.prototype.prepend=function(e){return e.length?ni.from(e).append(this):this};ni.prototype.appendInner=function(e){return new zP(this,e)};ni.prototype.slice=function(e,s){return e===void 0&&(e=0),s===void 0&&(s=this.length),e>=s?ni.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,s))};ni.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ni.prototype.forEach=function(e,s,n){s===void 0&&(s=0),n===void 0&&(n=this.length),s<=n?this.forEachInner(e,s,n,0):this.forEachInvertedInner(e,s,n,0)};ni.prototype.map=function(e,s,n){s===void 0&&(s=0),n===void 0&&(n=this.length);var a=[];return this.forEach(function(i,c){return a.push(e(i,c))},s,n),a};ni.from=function(e){return e instanceof ni?e:e&&e.length?new K3(e):ni.empty};var K3=(function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var s={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(a,i){return a==0&&i==this.length?this:new e(this.values.slice(a,i))},e.prototype.getInner=function(a){return this.values[a]},e.prototype.forEachInner=function(a,i,c,A){for(var d=i;d<c;d++)if(a(this.values[d],A+d)===!1)return!1},e.prototype.forEachInvertedInner=function(a,i,c,A){for(var d=i-1;d>=c;d--)if(a(this.values[d],A+d)===!1)return!1},e.prototype.leafAppend=function(a){if(this.length+a.length<=Vx)return new e(this.values.concat(a.flatten()))},e.prototype.leafPrepend=function(a){if(this.length+a.length<=Vx)return new e(a.flatten().concat(this.values))},s.length.get=function(){return this.values.length},s.depth.get=function(){return 0},Object.defineProperties(e.prototype,s),e})(ni);ni.empty=new K3([]);var zP=(function(t){function e(s,n){t.call(this),this.left=s,this.right=n,this.length=s.length+n.length,this.depth=Math.max(s.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,a,i,c){var A=this.left.length;if(a<A&&this.left.forEachInner(n,a,Math.min(i,A),c)===!1||i>A&&this.right.forEachInner(n,Math.max(a-A,0),Math.min(this.length,i)-A,c+A)===!1)return!1},e.prototype.forEachInvertedInner=function(n,a,i,c){var A=this.left.length;if(a>A&&this.right.forEachInvertedInner(n,a-A,Math.max(i,A)-A,c+A)===!1||i<A&&this.left.forEachInvertedInner(n,Math.min(a,A),i,c)===!1)return!1},e.prototype.sliceInner=function(n,a){if(n==0&&a==this.length)return this;var i=this.left.length;return a<=i?this.left.slice(n,a):n>=i?this.right.slice(n-i,a-i):this.left.slice(n,i).append(this.right.slice(0,a-i))},e.prototype.leafAppend=function(n){var a=this.right.leafAppend(n);if(a)return new e(this.left,a)},e.prototype.leafPrepend=function(n){var a=this.left.leafPrepend(n);if(a)return new e(a,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e})(ni);const KP=500;class Qc{constructor(e,s){this.items=e,this.eventCount=s}popEvent(e,s){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let a,i;s&&(a=this.remapping(n,this.items.length),i=a.maps.length);let c=e.tr,A,d,f=[],u=[];return this.items.forEach((p,x)=>{if(!p.step){a||(a=this.remapping(n,x+1),i=a.maps.length),i--,u.push(p);return}if(a){u.push(new gA(p.map));let m=p.step.map(a.slice(i)),j;m&&c.maybeStep(m).doc&&(j=c.mapping.maps[c.mapping.maps.length-1],f.push(new gA(j,void 0,void 0,f.length+u.length))),i--,j&&a.appendMap(j,i)}else c.maybeStep(p.step);if(p.selection)return A=a?p.selection.map(a.slice(i)):p.selection,d=new Qc(this.items.slice(0,n).append(u.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:c,selection:A}}addTransform(e,s,n,a){let i=[],c=this.eventCount,A=this.items,d=!a&&A.length?A.get(A.length-1):null;for(let u=0;u<e.steps.length;u++){let p=e.steps[u].invert(e.docs[u]),x=new gA(e.mapping.maps[u],p,s),m;(m=d&&d.merge(x))&&(x=m,u?i.pop():A=A.slice(0,A.length-1)),i.push(x),s&&(c++,s=void 0),a||(d=x)}let f=c-n.depth;return f>$P&&(A=VP(A,f),c-=f),new Qc(A.append(i),c)}remapping(e,s){let n=new Mp;return this.items.forEach((a,i)=>{let c=a.mirrorOffset!=null&&i-a.mirrorOffset>=e?n.maps.length-a.mirrorOffset:void 0;n.appendMap(a.map,c)},e,s),n}addMaps(e){return this.eventCount==0?this:new Qc(this.items.append(e.map(s=>new gA(s))),this.eventCount)}rebased(e,s){if(!this.eventCount)return this;let n=[],a=Math.max(0,this.items.length-s),i=e.mapping,c=e.steps.length,A=this.eventCount;this.items.forEach(x=>{x.selection&&A--},a);let d=s;this.items.forEach(x=>{let m=i.getMirror(--d);if(m==null)return;c=Math.min(c,m);let j=i.maps[m];if(x.step){let w=e.steps[m].invert(e.docs[m]),S=x.selection&&x.selection.map(i.slice(d+1,m));S&&A++,n.push(new gA(j,w,S))}else n.push(new gA(j))},a);let f=[];for(let x=s;x<c;x++)f.push(new gA(i.maps[x]));let u=this.items.slice(0,a).append(f).append(n),p=new Qc(u,A);return p.emptyItemCount()>KP&&(p=p.compress(this.items.length-n.length)),p}emptyItemCount(){let e=0;return this.items.forEach(s=>{s.step||e++}),e}compress(e=this.items.length){let s=this.remapping(0,e),n=s.maps.length,a=[],i=0;return this.items.forEach((c,A)=>{if(A>=e)a.push(c),c.selection&&i++;else if(c.step){let d=c.step.map(s.slice(n)),f=d&&d.getMap();if(n--,f&&s.appendMap(f,n),d){let u=c.selection&&c.selection.map(s.slice(n));u&&i++;let p=new gA(f.invert(),d,u),x,m=a.length-1;(x=a.length&&a[m].merge(p))?a[m]=x:a.push(p)}}else c.map&&n--},this.items.length,0),new Qc(ni.from(a.reverse()),i)}}Qc.empty=new Qc(ni.empty,0);function VP(t,e){let s;return t.forEach((n,a)=>{if(n.selection&&e--==0)return s=a,!1}),t.slice(s)}class gA{constructor(e,s,n,a){this.map=e,this.step=s,this.selection=n,this.mirrorOffset=a}merge(e){if(this.step&&e.step&&!e.selection){let s=e.step.merge(this.step);if(s)return new gA(s.getMap().invert(),s,this.selection)}}}class du{constructor(e,s,n,a,i){this.done=e,this.undone=s,this.prevRanges=n,this.prevTime=a,this.prevComposition=i}}const $P=20;function GP(t,e,s,n){let a=s.getMeta(Mh),i;if(a)return a.historyState;s.getMeta(JP)&&(t=new du(t.done,t.undone,null,0,-1));let c=s.getMeta("appendedTransaction");if(s.steps.length==0)return t;if(c&&c.getMeta(Mh))return c.getMeta(Mh).redo?new du(t.done.addTransform(s,void 0,n,Mg(e)),t.undone,h4(s.mapping.maps),t.prevTime,t.prevComposition):new du(t.done,t.undone.addTransform(s,void 0,n,Mg(e)),null,t.prevTime,t.prevComposition);if(s.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let A=s.getMeta("composition"),d=t.prevTime==0||!c&&t.prevComposition!=A&&(t.prevTime<(s.time||0)-n.newGroupDelay||!qP(s,t.prevRanges)),f=c?yv(t.prevRanges,s.mapping):h4(s.mapping.maps);return new du(t.done.addTransform(s,d?e.selection.getBookmark():void 0,n,Mg(e)),Qc.empty,f,s.time,A??t.prevComposition)}else return(i=s.getMeta("rebased"))?new du(t.done.rebased(s,i),t.undone.rebased(s,i),yv(t.prevRanges,s.mapping),t.prevTime,t.prevComposition):new du(t.done.addMaps(s.mapping.maps),t.undone.addMaps(s.mapping.maps),yv(t.prevRanges,s.mapping),t.prevTime,t.prevComposition)}function qP(t,e){if(!e)return!1;if(!t.docChanged)return!0;let s=!1;return t.mapping.maps[0].forEach((n,a)=>{for(let i=0;i<e.length;i+=2)n<=e[i+1]&&a>=e[i]&&(s=!0)}),s}function h4(t){let e=[];for(let s=t.length-1;s>=0&&e.length==0;s--)t[s].forEach((n,a,i,c)=>e.push(i,c));return e}function yv(t,e){if(!t)return null;let s=[];for(let n=0;n<t.length;n+=2){let a=e.map(t[n],1),i=e.map(t[n+1],-1);a<=i&&s.push(a,i)}return s}function YP(t,e,s){let n=Mg(e),a=Mh.get(e).spec.config,i=(s?t.undone:t.done).popEvent(e,n);if(!i)return null;let c=i.selection.resolve(i.transform.doc),A=(s?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),a,n),d=new du(s?A:i.remaining,s?i.remaining:A,null,0,-1);return i.transform.setSelection(c).setMeta(Mh,{redo:s,historyState:d})}let wv=!1,f4=null;function Mg(t){let e=t.plugins;if(f4!=e){wv=!1,f4=e;for(let s=0;s<e.length;s++)if(e[s].spec.historyPreserveItems){wv=!0;break}}return wv}const Mh=new Ka("history"),JP=new Ka("closeHistory");function WP(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Vn({key:Mh,state:{init(){return new du(Qc.empty,Qc.empty,null,0,-1)},apply(e,s,n){return GP(s,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,s){let n=s.inputType,a=n=="historyUndo"?$3:n=="historyRedo"?G3:null;return!a||!e.editable?!1:(s.preventDefault(),a(e.state,e.dispatch))}}}})}function V3(t,e){return(s,n)=>{let a=Mh.getState(s);if(!a||(t?a.undone:a.done).eventCount==0)return!1;if(n){let i=YP(a,s,t);i&&n(e?i.scrollIntoView():i)}return!0}}const $3=V3(!1,!0),G3=V3(!0,!0);Yr.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,s=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(s)}},addProseMirrorPlugins(){let t=!1;return[new Vn({key:new Ka("characterCount"),appendTransaction:(e,s,n)=>{if(t)return;const a=this.options.limit;if(a==null||a===0){t=!0;return}const i=this.storage.characters({node:n.doc});if(i>a){const c=i-a,A=0,d=c;console.warn(`[CharacterCount] Initial content exceeded limit of ${a} characters. Content was automatically trimmed.`);const f=n.tr.deleteRange(A,d);return t=!0,f}t=!0},filterTransaction:(e,s)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const a=this.storage.characters({node:s.doc}),i=this.storage.characters({node:e.doc});if(i<=n||a>n&&i>n&&i<=a)return!0;if(a>n&&i>n&&i>a||!e.getMeta("paste"))return!1;const A=e.selection.$head.pos,d=i-n,f=A-d,u=A;return e.deleteRange(f,u),!(this.storage.characters({node:e.doc})>n)}})]}});var XP=Yr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[MP(this.options)]}});Yr.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Vn({key:new Ka("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:s,isFocused:n}=this.editor,{anchor:a}=e,i=[];if(!s||!n)return Pn.create(t,[]);let c=0;this.options.mode==="deepest"&&t.descendants((d,f)=>{if(d.isText)return;if(!(a>=f&&a<=f+d.nodeSize-1))return!1;c+=1});let A=0;return t.descendants((d,f)=>{if(d.isText||!(a>=f&&a<=f+d.nodeSize-1))return!1;if(A+=1,this.options.mode==="deepest"&&c-A>0||this.options.mode==="shallowest"&&A>1)return this.options.mode==="deepest";i.push(vl.node(f,f+d.nodeSize,{class:this.options.className}))}),Pn.create(t,i)}}})]}});var ZP=Yr.create({name:"gapCursor",addProseMirrorPlugins(){return[OP()]},extendNodeSchema(t){var e;const s={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Dr(xs(t,"allowGapCursor",s)))!=null?e:null}}}),ez=Yr.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Vn({key:new Ka("placeholder"),props:{decorations:({doc:t,selection:e})=>{const s=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,a=[];if(!s)return null;const i=this.editor.isEmpty;return t.descendants((c,A)=>{const d=n>=A&&n<=A+c.nodeSize,f=!c.isLeaf&&jb(c);if((d||!this.options.showOnlyCurrent)&&f){const u=[this.options.emptyNodeClass];i&&u.push(this.options.emptyEditorClass);const p=vl.node(A,A+c.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:c,pos:A,hasAnchor:d}):this.options.placeholder});a.push(p)}return this.options.includeChildren}),Pn.create(t,a)}}})]}});Yr.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Vn({key:new Ka("selection"),props:{decorations(s){return s.selection.empty||t.isFocused||!t.isEditable||t3(s.selection)||t.view.dragging?null:Pn.create(s.doc,[vl.inline(s.selection.from,s.selection.to,{class:e.className})])}}})]}});function p4({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var tz=Yr.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Ka(this.name),s=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,a])=>a).filter(a=>(this.options.notAfter||[]).concat(s).includes(a.name));return[new Vn({key:e,appendTransaction:(a,i,c)=>{const{doc:A,tr:d,schema:f}=c,u=e.getState(c),p=A.content.size,x=f.nodes[s];if(u)return d.insert(p,x.create())},state:{init:(a,i)=>{const c=i.tr.doc.lastChild;return!p4({node:c,types:n})},apply:(a,i)=>{if(!a.docChanged||a.getMeta("__uniqueIDTransaction"))return i;const c=a.doc.lastChild;return!p4({node:c,types:n})}}})]}}),sz=Yr.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>$3(t,e),redo:()=>({state:t,dispatch:e})=>G3(t,e)}},addProseMirrorPlugins(){return[WP(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),rz=Yr.create({name:"starterKit",addExtensions(){var t,e,s,n;const a=[];return this.options.bold!==!1&&a.push(UH.configure(this.options.bold)),this.options.blockquote!==!1&&a.push(kH.configure(this.options.blockquote)),this.options.bulletList!==!1&&a.push(F3.configure(this.options.bulletList)),this.options.code!==!1&&a.push(MH.configure(this.options.code)),this.options.codeBlock!==!1&&a.push(IH.configure(this.options.codeBlock)),this.options.document!==!1&&a.push(OH.configure(this.options.document)),this.options.dropcursor!==!1&&a.push(XP.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&a.push(ZP.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&a.push(DH.configure(this.options.hardBreak)),this.options.heading!==!1&&a.push(RH.configure(this.options.heading)),this.options.undoRedo!==!1&&a.push(sz.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&a.push(HH.configure(this.options.horizontalRule)),this.options.italic!==!1&&a.push($H.configure(this.options.italic)),this.options.listItem!==!1&&a.push(L3.configure(this.options.listItem)),this.options.listKeymap!==!1&&a.push(D3.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&a.push(U3.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&a.push(H3.configure(this.options.orderedList)),this.options.paragraph!==!1&&a.push(EP.configure(this.options.paragraph)),this.options.strike!==!1&&a.push(FP.configure(this.options.strike)),this.options.text!==!1&&a.push(LP.configure(this.options.text)),this.options.underline!==!1&&a.push(P3.configure((s=this.options)==null?void 0:s.underline)),this.options.trailingNode!==!1&&a.push(tz.configure((n=this.options)==null?void 0:n.trailingNode)),a}}),nz=rz,az=Yr.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(s=>e.updateAttributes(s,{textAlign:t})).some(s=>s):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:t=>({editor:e,commands:s})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?s.unsetTextAlign():s.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),iz=20,q3=(t,e=0)=>{const s=[];return!t.children.length||e>iz||Array.from(t.children).forEach(n=>{n.tagName==="SPAN"?s.push(n):n.children.length&&s.push(...q3(n,e+1))}),s},lz=t=>{if(!t.children.length)return;const e=q3(t);e&&e.forEach(s=>{var n,a;const i=s.getAttribute("style"),c=(a=(n=s.parentElement)==null?void 0:n.closest("span"))==null?void 0:a.getAttribute("style");s.setAttribute("style",`${c};${i}`)})},Y3=xd.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&lz(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Kn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(s,n)=>{if(s.isTextblock)return!0;s.marks.filter(a=>a.type===this.type).some(a=>Object.values(a.attrs).some(i=>!!i))||t.removeMark(n,n+s.nodeSize,this.type)}),!0}}}}),oz=Yr.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const s=t.getAttribute("style");if(s){const n=s.split(";").map(a=>a.trim()).filter(Boolean);for(let a=n.length-1;a>=0;a-=1){const i=n[a].split(":");if(i.length>=2){const c=i[0].trim().toLowerCase(),A=i.slice(1).join(":").trim();if(c==="background-color")return A.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),J3=Yr.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const s=t.getAttribute("style");if(s){const n=s.split(";").map(a=>a.trim()).filter(Boolean);for(let a=n.length-1;a>=0;a-=1){const i=n[a].split(":");if(i.length>=2){const c=i[0].trim().toLowerCase(),A=i.slice(1).join(":").trim();if(c==="color")return A.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),cz=Yr.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),Az=Yr.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),dz=Yr.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});Yr.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(oz.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(J3.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(cz.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(Az.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(dz.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(Y3.configure(this.options.textStyle)),t}});var uz=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,hz=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,fz=xd.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",Kn(this.options.HTMLAttributes,t),0]},renderMarkdown:(t,e)=>`==${e.renderChildren(t)}==`,parseMarkdown:(t,e)=>e.applyMark("highlight",e.parseInline(t.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:t=>t.indexOf("=="),tokenize(t,e,s){const a=/^(==)([^=]+)(==)/.exec(t);if(a){const i=a[2].trim(),c=s.inlineTokens(i);return{type:"highlight",raw:a[0],text:i,tokens:c}}}},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[zh({find:uz,type:this.type})]},addPasteRules(){return[Uu({find:hz,type:this.type})]}}),pz=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,mz=Yl.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",Kn(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,s,n,a,i,c;const A=(s=(e=t.attrs)==null?void 0:e.src)!=null?s:"",d=(a=(n=t.attrs)==null?void 0:n.alt)!=null?a:"",f=(c=(i=t.attrs)==null?void 0:i.title)!=null?c:"";return f?`![${d}](${A} "${f}")`:`![${d}](${A})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:t,minWidth:e,minHeight:s,alwaysPreserveAspectRatio:n}=this.options.resize;return({node:a,getPos:i,HTMLAttributes:c,editor:A})=>{const d=document.createElement("img");Object.entries(c).forEach(([p,x])=>{if(x!=null)switch(p){case"width":case"height":break;default:d.setAttribute(p,x);break}}),d.src=c.src;const f=new u9({element:d,editor:A,node:a,getPos:i,onResize:(p,x)=>{d.style.width=`${p}px`,d.style.height=`${x}px`},onCommit:(p,x)=>{const m=i();m!==void 0&&this.editor.chain().setNodeSelection(m).updateAttributes(this.name,{width:p,height:x}).run()},onUpdate:(p,x,m)=>p.type===a.type,options:{directions:t,min:{width:e,height:s},preserveAspectRatio:n===!0}}),u=f.dom;return u.style.visibility="hidden",u.style.pointerEvents="none",d.onload=()=>{u.style.visibility="",u.style.pointerEvents=""},f}},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[x3({find:pz,type:this.type,getAttributes:t=>{const[,,e,s,n]=t;return{src:s,alt:e,title:n}}})]}});const Wn=({onClick:t,isActive:e,disabled:s,children:n,title:a})=>r.jsx("button",{type:"button",onClick:t,disabled:s,title:a,className:`p-1.5 rounded-lg transition-all ${e?"bg-blue-100 text-blue-600":"text-slate-500 hover:bg-slate-100 hover:text-slate-700"} ${s?"opacity-40 cursor-not-allowed":""}`,children:n}),gz=({editor:t})=>{const[e,s]=L.useState(!1),[n,a]=L.useState(!1);if(!t)return null;const i=()=>{const d=window.prompt("Enter image URL:");d&&t.chain().focus().setImage({src:d}).run()},c=()=>{const d=t.getAttributes("link").href,f=window.prompt("Enter URL:",d);if(f!==null){if(f===""){t.chain().focus().extendMarkRange("link").unsetLink().run();return}t.chain().focus().extendMarkRange("link").setLink({href:f}).run()}},A=["#000000","#374151","#6b7280","#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#8b5cf6","#ec4899"];return r.jsxs("div",{className:"flex flex-wrap items-center gap-0.5 p-2 border-b border-slate-200 bg-slate-50/80",children:[r.jsx(Wn,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"Undo",children:r.jsx(V8,{size:16})}),r.jsx(Wn,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"Redo",children:r.jsx(GU,{size:16})}),r.jsx("div",{className:"w-px h-6 bg-slate-200 mx-1"}),r.jsx(Wn,{onClick:()=>t.chain().focus().toggleHeading({level:1}).run(),isActive:t.isActive("heading",{level:1}),title:"Heading 1",children:r.jsx(BT,{size:16})}),r.jsx(Wn,{onClick:()=>t.chain().focus().toggleHeading({level:2}).run(),isActive:t.isActive("heading",{level:2}),title:"Heading 2",children:r.jsx(CT,{size:16})}),r.jsx(Wn,{onClick:()=>t.chain().focus().toggleHeading({level:3}).run(),isActive:t.isActive("heading",{level:3}),title:"Heading 3",children:r.jsx(ET,{size:16})}),r.jsx("div",{className:"w-px h-6 bg-slate-200 mx-1"}),r.jsx(Wn,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Bold",children:r.jsx(B6,{size:16})}),r.jsx(Wn,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Italic",children:r.jsx(RT,{size:16})}),r.jsx(Wn,{onClick:()=>t.chain().focus().toggleUnderline().run(),isActive:t.isActive("underline"),title:"Underline",children:r.jsx(z8,{size:16})}),r.jsx(Wn,{onClick:()=>t.chain().focus().toggleStrike().run(),isActive:t.isActive("strike"),title:"Strikethrough",children:r.jsx(b8,{size:16})}),r.jsx("div",{className:"w-px h-6 bg-slate-200 mx-1"}),r.jsxs("div",{className:"relative",children:[r.jsx(Wn,{onClick:()=>s(!e),title:"Text Color",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(H8,{size:14}),r.jsx("div",{className:"w-3 h-1 rounded-sm mt-0.5",style:{backgroundColor:t.getAttributes("textStyle").color||"#000"}})]})}),e&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 p-3 bg-white rounded-xl shadow-xl border border-slate-200 z-50 grid grid-cols-5 gap-2 w-[180px]",children:[A.map(d=>r.jsx("button",{type:"button",onClick:()=>{t.chain().focus().setColor(d).run(),s(!1)},className:"w-6 h-6 rounded-full border border-slate-200 hover:scale-110 transition-transform shadow-sm",style:{backgroundColor:d},title:d},d)),r.jsx("button",{type:"button",onClick:()=>{t.chain().focus().unsetColor().run(),s(!1)},className:"w-6 h-6 rounded-full border border-slate-200 text-xs text-slate-400 hover:bg-slate-100 flex items-center justify-center",title:"Reset Color",children:""})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Wn,{onClick:()=>a(!n),isActive:t.isActive("highlight"),title:"Highlight",children:r.jsx(NU,{size:16})}),n&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 p-3 bg-white rounded-xl shadow-xl border border-slate-200 z-50 grid grid-cols-5 gap-2 w-[180px]",children:[["#fef08a","#bbf7d0","#bfdbfe","#ddd6fe","#fecdd3"].map(d=>r.jsx("button",{type:"button",onClick:()=>{t.chain().focus().toggleHighlight({color:d}).run(),a(!1)},className:"w-6 h-6 rounded-full border border-slate-200 hover:scale-110 transition-transform shadow-sm",style:{backgroundColor:d}},d)),r.jsx("button",{type:"button",onClick:()=>{t.chain().focus().unsetHighlight().run(),a(!1)},className:"w-6 h-6 rounded-full border border-slate-200 text-xs text-slate-400 hover:bg-slate-100 flex items-center justify-center",title:"Reset Highlight",children:""})]})]}),r.jsx("div",{className:"w-px h-6 bg-slate-200 mx-1"}),r.jsx(Wn,{onClick:()=>t.chain().focus().setTextAlign("left").run(),isActive:t.isActive({textAlign:"left"}),title:"Align Left",children:r.jsx(U8,{size:16})}),r.jsx(Wn,{onClick:()=>t.chain().focus().setTextAlign("center").run(),isActive:t.isActive({textAlign:"center"}),title:"Align Center",children:r.jsx(B8,{size:16})}),r.jsx(Wn,{onClick:()=>t.chain().focus().setTextAlign("right").run(),isActive:t.isActive({textAlign:"right"}),title:"Align Right",children:r.jsx(C8,{size:16})}),r.jsx(Wn,{onClick:()=>t.chain().focus().setTextAlign("justify").run(),isActive:t.isActive({textAlign:"justify"}),title:"Justify",children:r.jsx(E8,{size:16})}),r.jsx("div",{className:"w-px h-6 bg-slate-200 mx-1"}),r.jsx(Wn,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Bullet List",children:r.jsx(tU,{size:16})}),r.jsx(Wn,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Ordered List",children:r.jsx(ZT,{size:16})}),r.jsx("div",{className:"w-px h-6 bg-slate-200 mx-1"}),r.jsx(Wn,{onClick:()=>t.chain().focus().toggleBlockquote().run(),isActive:t.isActive("blockquote"),title:"Quote",children:r.jsx(KU,{size:16})}),r.jsx(Wn,{onClick:()=>t.chain().focus().toggleCodeBlock().run(),isActive:t.isActive("codeBlock"),title:"Code Block",children:r.jsx(X6,{size:16})}),r.jsx(Wn,{onClick:()=>t.chain().focus().setHorizontalRule().run(),title:"Horizontal Rule",children:r.jsx(mU,{size:16})}),r.jsx("div",{className:"w-px h-6 bg-slate-200 mx-1"}),r.jsx(Wn,{onClick:c,isActive:t.isActive("link"),title:"Link",children:r.jsx(tb,{size:16})}),r.jsx(Wn,{onClick:i,title:"Image",children:r.jsx(Rf,{size:16})})]})},W3=({content:t,onChange:e,placeholder:s="Write your article content here..."})=>{const n=yH({extensions:[nz.configure({heading:{levels:[1,2,3]}}),P3,az.configure({types:["heading","paragraph"]}),Y3,J3,fz.configure({multicolor:!0}),U3.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 underline"}}),mz.configure({HTMLAttributes:{class:"max-w-full h-auto rounded-lg"}}),ez.configure({placeholder:s})],content:t,onUpdate:({editor:a})=>{e(a.getHTML())}});return L.useEffect(()=>{n&&t!==n.getHTML()&&n.commands.setContent(t)},[t,n]),r.jsxs("div",{className:"tiptap-editor-wrapper bg-white border border-slate-200 rounded-xl overflow-hidden focus-within:ring-2 focus-within:ring-blue-500/20 focus-within:border-blue-500 transition-all",children:[r.jsx(gz,{editor:n}),r.jsx(fH,{editor:n,className:"tiptap-content"})]})},xz=({value:t,onChange:e,className:s=""})=>{const[n,a]=L.useState(!1),[i,c]=L.useState(!1),[A,d]=L.useState(""),[f,u]=L.useState(!1),[p,x]=L.useState(""),[m,j]=L.useState(""),w=L.useRef(null);wi.useEffect(()=>{t&&!n&&j(t)},[t,n]);const S=async I=>{if(!["image/jpeg","image/png","image/gif","image/webp"].includes(I.type)){x("Please select a valid image file (JPEG, PNG, GIF, or WebP)");return}if(I.size>5*1024*1024){x("Image must be less than 5MB");return}x(""),a(!0);const ee=URL.createObjectURL(I);j(ee);try{const $=new FormData;$.append("image",I);const ce=await fetch(`${_e}/api/blogs/upload-image`,{method:"POST",credentials:"include",body:$});if(ce.ok){const Q=await ce.json();if(Q.success&&Q.url)e(Q.url);else throw new Error(Q.error||"Upload failed")}else throw new Error("Upload failed")}catch($){console.error("Image upload failed:",$),x("Failed to upload image. Please try again."),j(""),e("")}finally{a(!1)}},C=I=>{I.preventDefault(),u(!1);const H=I.dataTransfer.files[0];H&&S(H)},F=I=>{I.preventDefault(),u(!0)},U=()=>{u(!1)},_=()=>{A.trim()&&(e(A.trim()),d(""),c(!1))},z=()=>{e(""),x("")};return m||t?r.jsxs("div",{className:`relative group aspect-video rounded-2xl overflow-hidden ${s}`,children:[r.jsx("img",{src:m||t,alt:"Cover",className:"w-full h-full object-cover"}),r.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-4",children:[r.jsx("button",{type:"button",onClick:()=>{var I;return(I=w.current)==null?void 0:I.click()},className:"p-3 bg-white/20 hover:bg-white/30 rounded-full transition-colors",title:"Change image",children:r.jsx(Pf,{className:"w-5 h-5 text-white"})}),r.jsx("button",{type:"button",onClick:z,className:"p-3 bg-red-500/80 hover:bg-red-500 rounded-full transition-colors",title:"Remove image",children:r.jsx(As,{className:"w-5 h-5 text-white"})})]}),n&&r.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:r.jsx(Xt,{className:"w-8 h-8 text-white animate-spin"})}),r.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:I=>{var H;return((H=I.target.files)==null?void 0:H[0])&&S(I.target.files[0])},className:"hidden"})]}):r.jsxs("div",{className:`${s}`,children:[r.jsxs("div",{onDrop:C,onDragOver:F,onDragLeave:U,className:`relative aspect-video rounded-2xl border-2 border-dashed transition-all cursor-pointer ${f?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-slate-200 dark:border-slate-700 hover:border-indigo-500 bg-slate-50 dark:bg-slate-800"}`,children:[n?r.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[r.jsx(Xt,{className:"w-10 h-10 text-indigo-600 animate-spin mb-2"}),r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Uploading..."})]}):i?r.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md space-y-3",children:[r.jsx("input",{type:"url",value:A,onChange:I=>d(I.target.value),placeholder:"Paste image URL...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-700 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",autoFocus:!0}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:_,disabled:!A.trim(),className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium hover:bg-indigo-500 transition-colors disabled:opacity-50",children:"Add Image"}),r.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-xl font-medium hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancel"})]})]})}):r.jsxs("div",{onClick:()=>{var I;return(I=w.current)==null?void 0:I.click()},className:"absolute inset-0 flex flex-col items-center justify-center",children:[r.jsx(Rf,{className:"w-10 h-10 text-slate-400 mb-3"}),r.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Drop an image here or click to upload"}),r.jsx("p",{className:"text-xs text-slate-400",children:"JPEG, PNG, GIF, WebP up to 5MB"}),r.jsxs("div",{className:"flex gap-3 mt-4",children:[r.jsxs("button",{type:"button",onClick:I=>{var H;I.stopPropagation(),(H=w.current)==null||H.click()},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-medium hover:bg-indigo-500 transition-colors",children:[r.jsx(Pf,{className:"w-4 h-4"}),"Upload"]}),r.jsxs("button",{type:"button",onClick:I=>{I.stopPropagation(),c(!0)},className:"flex items-center gap-2 px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-xl text-sm font-medium hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:[r.jsx(tb,{className:"w-4 h-4"}),"URL"]})]})]}),r.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:I=>{var H;return((H=I.target.files)==null?void 0:H[0])&&S(I.target.files[0])},className:"hidden"})]}),p&&r.jsx("p",{className:"mt-2 text-sm text-red-500",children:p})]})},I2=({onClose:t,onSuccess:e,initialData:s})=>{var u;const[n,a]=L.useState(!1),i=lb(),[c,A]=L.useState({title:(s==null?void 0:s.title)||"",content:(s==null?void 0:s.content)||"",category:(s==null?void 0:s.category)||"",tags:((u=s==null?void 0:s.tags)==null?void 0:u.join(", "))||"",coverImage:(s==null?void 0:s.coverImage)||""}),d=["Travel","Food","Tips","Experience","Culture","Gear"],f=async(p,x)=>{p.preventDefault(),a(!0);try{const m=document.createElement("div");m.innerHTML=c.content;const j=m.textContent||m.innerText||"",w=j.slice(0,150)+(j.length>150?"...":""),S=s?`${_e}/api/blogs/${s.id}`:`${_e}/api/blogs/create`;(await fetch(S,{method:s?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({...c,excerpt:w,status:x,tags:c.tags.split(",").map(U=>U.trim()).filter(Boolean)})})).ok?(i.success(s?"Story updated successfully!":x==="draft"?"Draft saved successfully!":"Story submitted for review!"),e()):i.error(s?"Failed to update story.":"Failed to save story. Please try again.")}catch(m){console.error(s?"Failed to update blog:":"Failed to create blog:",m),i.error("An error occurred. Please try again.")}finally{a(!1)}};return E4.createPortal(r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-4xl h-[90vh] rounded-3xl shadow-2xl flex flex-col overflow-hidden animate-scale-in",children:[r.jsxs("div",{className:"px-8 py-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:s?"Edit Story":"Write a Story"}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:r.jsx(As,{className:"w-6 h-6 text-slate-500"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:r.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[r.jsx(xz,{value:c.coverImage,onChange:p=>A({...c,coverImage:p})}),r.jsx("input",{type:"text",placeholder:"Article Title...",className:"w-full text-4xl font-bold bg-transparent border-none placeholder:text-slate-300 dark:placeholder:text-slate-700 focus:ring-0 px-0 text-slate-900 dark:text-white",value:c.title,onChange:p=>A({...c,title:p.target.value})}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("select",{className:"px-4 py-2 bg-slate-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-indigo-500 text-slate-900 dark:text-white",value:c.category,onChange:p=>A({...c,category:p.target.value}),children:[r.jsx("option",{value:"",children:"Select Category"}),d.map(p=>r.jsx("option",{value:p,children:p},p))]}),r.jsx("input",{type:"text",placeholder:"Tags (comma separated)...",className:"flex-1 px-4 py-2 bg-slate-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-indigo-500 text-slate-900 dark:text-white",value:c.tags,onChange:p=>A({...c,tags:p.target.value})})]}),r.jsx(W3,{content:c.content,onChange:p=>A({...c,content:p}),placeholder:"Tell your story..."})]})}),r.jsxs("div",{className:"px-8 py-6 border-t border-slate-100 dark:border-slate-800 flex justify-end gap-3 bg-white dark:bg-slate-900",children:[r.jsx("button",{onClick:p=>f(p,"draft"),className:"px-6 py-2.5 text-slate-600 font-bold hover:bg-slate-100 rounded-xl transition-colors",children:"Save as Draft"}),r.jsx("button",{onClick:p=>f(p,"pending"),disabled:n||!c.title||!c.content,className:"px-8 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-500/20 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?r.jsx(Xt,{className:"w-5 h-5 animate-spin"}):s?"Save Changes":"Submit for Review"})]})]})}),document.body)},bz=({blogId:t,user:e,onBack:s})=>{za();const[n,a]=L.useState(null),[i,c]=L.useState([]),[A,d]=L.useState(!0),[f,u]=L.useState(""),[p,x]=L.useState(!1),[m,j]=L.useState(!1),[w,S]=L.useState(!1),[C,F]=L.useState(!1),[U,_]=L.useState("inappropriate"),[z,I]=L.useState(""),H=lb();L.useEffect(()=>{ee()},[t]);const ee=async()=>{try{const W=await fetch(`${_e}/api/blogs/${t}`,{credentials:"include"});if(W.ok){const Z=await W.json();Z.success&&Z.blog&&a(Z.blog)}const se=await fetch(`${_e}/api/blogs/${t}/comments`,{credentials:"include"});if(se.ok){const Z=await se.json();Z.success&&Z.comments&&c(Z.comments)}}catch(W){console.error("Error fetching blog details:",W),H.error("Failed to load story details")}finally{d(!1)}},$=()=>{S(!0)},ce=async()=>{if(n)try{const W=await fetch(`${_e}/api/blogs/${t}/report`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({reason:U,description:z})}),se=await W.json();W.ok&&se.success?(H.success("Report submitted successfully"),F(!1),I(""),_("inappropriate")):H.error(se.error||"Failed to submit report")}catch{H.error("Failed to submit report")}},Q=async()=>{if(n)try{navigator.share?await navigator.share({title:n.title,text:n.excerpt,url:window.location.href}):(await navigator.clipboard.writeText(window.location.href),H.success("Link copied to clipboard!"))}catch(W){console.error("Error sharing:",W)}},q=async()=>{if(!(!n||!window.confirm("Are you sure you want to delete this story?")))try{(await fetch(`${_e}/api/blogs/${t}`,{method:"DELETE",credentials:"include"})).ok?(H.success("Story deleted successfully"),s()):H.error("Failed to delete story")}catch(W){console.error("Error deleting blog:",W),H.error("Failed to delete story")}},te=async()=>{if(!n)return;const W=n.isLiked;try{a(se=>se?{...se,isLiked:!se.isLiked,likesCount:se.isLiked?se.likesCount-1:se.likesCount+1}:null),await fetch(`${_e}/api/blogs/${t}/like`,{method:"POST",credentials:"include"}),H.success(W?"Removed from favorites":"Added to favorites")}catch(se){console.error("Error toggling like:",se),a(Z=>Z?{...Z,isLiked:W,likesCount:W?Z.likesCount+1:Z.likesCount-1}:null),H.error("Failed to update. Please try again.")}},X=async()=>{if(f.trim()){x(!0);try{const W=await fetch(`${_e}/api/blogs/${t}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({content:f})});if(W.ok){const se=await W.json();se.success&&se.comment&&(c(Z=>[se.comment,...Z]),u(""),a(Z=>Z?{...Z,commentsCount:Z.commentsCount+1}:null),H.success("Comment posted!"))}else H.error("Failed to post comment")}catch(W){console.error("Error posting comment:",W),H.error("Failed to post comment. Please try again.")}finally{x(!1)}}},Ae=async()=>{if(!n)return;const W=m;try{j(se=>!se),await fetch(`${_e}/api/blogs/authors/${n.authorId}/subscribe`,{method:"POST",credentials:"include"}),H.success(W?`Unfollowed ${n.authorName}`:`Now following ${n.authorName}`)}catch(se){console.error("Error toggling follow:",se),j(Z=>!Z),H.error("Failed to update subscription")}};return A?r.jsx(fI,{}):n?r.jsxs("div",{className:"max-w-4xl mx-auto pb-20 animate-fade-in-up",children:[r.jsxs("button",{onClick:s,className:"mb-6 flex items-center gap-2 text-slate-500 hover:text-slate-900 dark:hover:text-white transition-colors",children:[r.jsx(jA,{className:"w-5 h-5"}),r.jsx("span",{className:"font-bold",children:"Back to Feed"})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex gap-2 mb-4",children:r.jsx("span",{className:"px-3 py-1 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-full text-xs font-bold uppercase tracking-wide",children:n.category})}),r.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-slate-900 dark:text-white mb-6 leading-tight",children:n.title}),r.jsxs("div",{className:"flex items-center justify-between py-6 border-b border-slate-100 dark:border-slate-800",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:n.authorAvatar&&r.jsx("img",{src:n.authorAvatar,alt:n.authorName,className:"w-full h-full object-cover"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:n.authorName}),r.jsx("button",{onClick:Ae,className:`text-xs font-bold hover:underline ${m?"text-slate-500":"text-indigo-600 dark:text-indigo-400"}`,children:m?"Following":"Follow"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm",children:[r.jsx("span",{children:new Date(n.publishedAt||"").toLocaleDateString()}),r.jsx("span",{children:""}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(on,{className:"w-3 h-3"})," 5 min read"]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[e&&n.authorId===e.id&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:$,className:"p-2 text-slate-400 hover:bg-blue-50 hover:text-blue-600 rounded-full transition-colors",title:"Edit Story",children:r.jsx(Oy,{className:"w-5 h-5"})}),r.jsx("button",{onClick:q,className:"p-2 text-slate-400 hover:bg-red-50 hover:text-red-500 rounded-full transition-colors",title:"Delete Story",children:r.jsx(na,{className:"w-5 h-5"})})]}),r.jsx("button",{onClick:Q,className:"p-2 text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:r.jsx(Yg,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>F(!0),className:"p-2 text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:r.jsx($g,{className:"w-5 h-5"})})]})]})]}),n.coverImage&&r.jsx("div",{className:"rounded-3xl overflow-hidden mb-10 shadow-lg",children:r.jsx("img",{src:n.coverImage,alt:n.title,className:"w-full h-auto object-cover"})}),r.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none mb-12 text-slate-600 dark:text-slate-300",dangerouslySetInnerHTML:{__html:n.content}}),r.jsx("div",{className:"flex items-center justify-between py-6 border-t border-b border-slate-100 dark:border-slate-800 mb-12",children:r.jsxs("div",{className:"flex gap-6",children:[r.jsxs("button",{onClick:te,className:`flex items-center gap-2 font-bold transition-colors ${n.isLiked?"text-rose-500":"text-slate-500 hover:text-rose-500"}`,children:[r.jsx(_h,{className:`w-6 h-6 ${n.isLiked?"fill-current":""}`}),n.likesCount]}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-bold",children:[r.jsx(ic,{className:"w-6 h-6"}),n.commentsCount]})]})}),r.jsxs("div",{className:"space-y-8",children:[r.jsxs("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["Comments (",i.length,")"]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden shrink-0",children:(e==null?void 0:e.avatarUrl)&&r.jsx("img",{src:e.avatarUrl,alt:"Me",className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("textarea",{value:f,onChange:W=>u(W.target.value),placeholder:"Share your thoughts...",className:"w-full bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white rounded-2xl p-4 border-none focus:ring-2 focus:ring-indigo-500 min-h-[100px] resize-none"}),r.jsx("div",{className:"flex justify-end mt-2",children:r.jsx("button",{onClick:X,disabled:!f.trim()||p,className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-500 transition-colors disabled:opacity-50",children:"Post Comment"})})]})]}),r.jsx("div",{className:"space-y-6",children:i.map(W=>r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden shrink-0",children:W.userAvatar&&r.jsx("img",{src:W.userAvatar,alt:W.userName,className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-2xl rounded-tl-none",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:W.userName}),r.jsx("span",{className:"text-xs text-slate-400",children:new Date(W.createdAt||"").toLocaleDateString()})]}),r.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:W.content})]}),r.jsxs("div",{className:"flex gap-4 mt-2 pl-4",children:[r.jsx("button",{className:"text-xs font-bold text-slate-500 hover:text-indigo-600",children:"Reply"}),r.jsx("button",{className:"text-xs font-bold text-slate-500 hover:text-indigo-600",children:"Like"})]})]})]},W.id))})]}),w&&n&&r.jsx(I2,{initialData:n,onClose:()=>S(!1),onSuccess:()=>{S(!1),ee()}}),C&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-xl p-6 animate-scale-in",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(ga,{className:"w-5 h-5 text-amber-500"}),"Report Story"]}),r.jsx("button",{onClick:()=>F(!1),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full",children:r.jsx(As,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Reason"}),r.jsxs("select",{value:U,onChange:W=>_(W.target.value),className:"w-full p-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-indigo-500",children:[r.jsx("option",{value:"spam",children:"Spam"}),r.jsx("option",{value:"inappropriate",children:"Inappropriate Content"}),r.jsx("option",{value:"harassment",children:"Harassment"}),r.jsx("option",{value:"misinformation",children:"Misinformation"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Description (Optional)"}),r.jsx("textarea",{value:z,onChange:W=>I(W.target.value),className:"w-full p-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white min-h-[100px] focus:ring-2 focus:ring-indigo-500 resize-none",placeholder:"Please provide more details..."})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[r.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 text-slate-600 font-medium hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{onClick:ce,className:"px-4 py-2 bg-red-600 text-white font-medium rounded-lg hover:bg-red-700 transition-colors shadow-lg shadow-red-500/20",children:"Submit Report"})]})]})]})})]}):r.jsx("div",{className:"p-8 text-center text-slate-500",children:"Story not found"})},vz=({className:t=""})=>r.jsxs("div",{className:`bg-white dark:bg-slate-800/60 rounded-3xl overflow-hidden shadow-sm border border-slate-100 dark:border-slate-700/50 ${t}`,children:[r.jsx(Is,{variant:"rectangular",className:"w-full h-48"}),r.jsxs("div",{className:"p-5 space-y-4",children:[r.jsx(Is,{variant:"rounded",className:"w-20 h-6"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Is,{variant:"text",className:"w-full h-6"}),r.jsx(Is,{variant:"text",className:"w-3/4 h-6"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(Is,{variant:"text",className:"w-full h-4"}),r.jsx(Is,{variant:"text",className:"w-5/6 h-4"})]}),r.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[r.jsx(Is,{variant:"circular",className:"w-10 h-10"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx(Is,{variant:"text",className:"w-24 h-4"}),r.jsx(Is,{variant:"text",className:"w-32 h-3"})]})]}),r.jsxs("div",{className:"flex items-center gap-4 pt-2 border-t border-slate-100 dark:border-slate-700/50",children:[r.jsx(Is,{variant:"rounded",className:"w-16 h-5"}),r.jsx(Is,{variant:"rounded",className:"w-16 h-5"}),r.jsx(Is,{variant:"rounded",className:"w-16 h-5"})]})]})]}),yz=({user:t,onBack:e})=>{const[s,n]=L.useState([]),[a,i]=L.useState(!0),[c,A]=L.useState(""),[d,f]=L.useState("all"),[u,p]=L.useState(!1),[x,m]=L.useState(null),j=lb();L.useEffect(()=>{w()},[]);const w=async()=>{i(!0);try{const I=await fetch(`${_e}/api/blogs/my?status=all`,{credentials:"include"});if(I.ok){const H=await I.json();H.success&&n(H.blogs||[])}}catch(I){console.error("Failed to fetch my blogs:",I),j.error("Failed to load your stories")}finally{i(!1)}},S=async I=>{if(window.confirm("Are you sure you want to delete this story? This action cannot be undone."))try{(await fetch(`${_e}/api/blogs/${I}`,{method:"DELETE",credentials:"include"})).ok?(j.success("Story deleted successfully"),n(ee=>ee.filter($=>$.id!==I))):j.error("Failed to delete story")}catch{j.error("Failed to delete story")}},C=s.filter(I=>{const H=I.title.toLowerCase().includes(c.toLowerCase()),ee=d==="all"||I.status===d;return H&&ee}),F=s.reduce((I,H)=>I+(H.views||0),0),U=s.reduce((I,H)=>I+(H.likesCount||0),0),_=s.reduce((I,H)=>I+(H.commentsCount||0),0),z=I=>{switch(I){case"published":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"pending":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400";case"rejected":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";default:return"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-400"}};return r.jsxs("div",{className:"animate-fade-in-up",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:r.jsx(jA,{className:"w-6 h-6 text-slate-500"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Story Studio"}),r.jsx("p",{className:"text-slate-500",children:"Manage your content and analytics"})]})]}),r.jsxs("button",{onClick:()=>{m(null),p(!0)},className:"px-5 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl shadow-lg shadow-indigo-500/20 transition-all flex items-center gap-2",children:[r.jsx(ln,{className:"w-5 h-5"}),"Create New"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-800/50 p-6 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:r.jsx(Kl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),r.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Total Stories"})]}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:s.length})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800/50 p-6 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-2 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg",children:r.jsx(yn,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),r.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Total Views"})]}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:F})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800/50 p-6 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-2 bg-rose-50 dark:bg-rose-900/20 rounded-lg",children:r.jsx(_h,{className:"w-5 h-5 text-rose-600 dark:text-rose-400"})}),r.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Total Likes"})]}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:U})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800/50 p-6 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-2 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:r.jsx(ic,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),r.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Comments"})]}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:_})]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-700 flex flex-col md:flex-row gap-4 justify-between",children:[r.jsxs("div",{className:"relative flex-1 max-w-md",children:[r.jsx(tl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Search your stories...",value:c,onChange:I=>A(I.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 text-slate-900 dark:text-white"})]}),r.jsxs("select",{value:d,onChange:I=>f(I.target.value),className:"px-4 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl focus:ring-2 focus:ring-indigo-500 text-slate-900 dark:text-white",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"published",children:"Published"}),r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"rejected",children:"Rejected"})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-left",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Story"}),r.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Stats"}),r.jsx("th",{className:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider text-right",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:a?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"Loading stories..."})}):C.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No stories found"})}):C.map(I=>r.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-10 rounded-lg bg-slate-200 dark:bg-slate-700 overflow-hidden flex-shrink-0",children:I.coverImage?r.jsx("img",{src:I.coverImage,alt:"",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full bg-gradient-to-br from-indigo-400 to-purple-500"})}),r.jsxs("div",{className:"min-w-0 max-w-xs",children:[r.jsx("p",{className:"font-bold text-slate-900 dark:text-white truncate",children:I.title}),r.jsx("p",{className:"text-xs text-slate-500 truncate",children:I.category})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-bold uppercase tracking-wider ${z(I.status)}`,children:I.status})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:new Date(I.createdAt||"").toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[r.jsxs("span",{className:"flex items-center gap-1",title:"Views",children:[r.jsx(yn,{className:"w-4 h-4"})," ",I.views]}),r.jsxs("span",{className:"flex items-center gap-1",title:"Likes",children:[r.jsx(_h,{className:"w-4 h-4"})," ",I.likesCount]})]})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>{m(I),p(!0)},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors",title:"Edit",children:r.jsx(Oy,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>S(I.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete",children:r.jsx(na,{className:"w-4 h-4"})})]})})]},I.id))})]})})]}),u&&r.jsx(I2,{initialData:x||void 0,onClose:()=>{p(!1),m(null)},onSuccess:()=>{p(!1),m(null),w()}})]})},wz=({user:t})=>{const[e,s]=L.useState("list"),[n,a]=L.useState(null),[i,c]=L.useState(!1),[A,d]=L.useState([]),[f,u]=L.useState(!0),[p,x]=L.useState("All"),[m,j]=L.useState(""),w=lb(),S=["All","Travel","Food","Tips","Experience"];L.useEffect(()=>{C()},[p]);const C=async()=>{u(!0);try{const U=new URLSearchParams;p!=="All"&&U.append("category",p),m&&U.append("search",m);const _=`${_e}/api/blogs/feed${U.toString()?"?"+U.toString():""}`,z=await fetch(_,{credentials:"include"});if(z.ok){const I=await z.json();I.success?d(I.blogs||[]):d([])}else d([])}catch(U){console.error("Failed to fetch blogs:",U),d([]),w.error("Failed to load stories. Please try again.")}finally{u(!1)}},F=U=>{a(U),s("detail")};return e==="studio"?r.jsx(yz,{user:t,onBack:()=>s("list")}):e==="detail"&&n?r.jsx(bz,{blogId:n,user:t,onBack:()=>{s("list"),a(null)}}):r.jsxs("div",{className:"p-6 md:p-8 w-full mx-auto space-y-8 animate-fade-in-up",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-4xl font-bold text-slate-900 dark:text-white tracking-tight flex items-center gap-3",children:[r.jsx(Kg,{className:"w-10 h-10 text-indigo-500"}),"Travel Stories"]}),r.jsx("p",{className:"text-lg font-medium text-slate-500 dark:text-slate-400 mt-2",children:"Discover and share adventures from around the world."})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>s("studio"),className:"px-5 py-3 bg-white dark:bg-slate-800 text-slate-700 dark:text-white rounded-2xl font-bold shadow-sm border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all flex items-center gap-2",children:[r.jsx(Iy,{className:"w-5 h-5"}),"My Studio"]}),r.jsxs("button",{onClick:()=>c(!0),className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-2xl font-bold shadow-lg shadow-indigo-500/20 transition-all active:scale-95 flex items-center gap-2",children:[r.jsx(ln,{className:"w-5 h-5"}),"Write Story"]})]})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 justify-between items-center bg-white dark:bg-slate-800/50 p-2 rounded-3xl border border-slate-100 dark:border-slate-700/50 shadow-sm",children:[r.jsx("div",{className:"flex gap-1 overflow-x-auto w-full lg:w-auto p-1 no-scrollbar",children:S.map(U=>r.jsx("button",{onClick:()=>x(U),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all ${p===U?"bg-slate-900 dark:bg-white text-white dark:text-slate-900 shadow-md":"text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:U},U))}),r.jsxs("div",{className:"relative w-full lg:w-96 group",children:[r.jsx(tl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 group-focus-within:text-indigo-500 transition-colors"}),r.jsx("input",{type:"text",placeholder:"Search stories, authors, tags...",value:m,onChange:U=>j(U.target.value),className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-2xl pl-12 pr-4 py-3 font-medium focus:ring-2 focus:ring-indigo-500 transition-all text-slate-900 dark:text-white"})]})]}),f?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(U=>r.jsx(vz,{},U))}):A.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((U,_)=>r.jsx("div",{style:{animationDelay:`${_*50}ms`},className:"animate-fade-in-up",children:r.jsx(hI,{blog:U,onClick:()=>F(U.id)})},U.id))}):r.jsxs("div",{className:"text-center py-20 bg-slate-50 dark:bg-slate-800/50 rounded-3xl border border-dashed border-slate-200 dark:border-slate-700",children:[r.jsx(Kg,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"No stories found"}),r.jsx("p",{className:"text-slate-500",children:"Be the first to share your adventure in this category!"})]}),i&&r.jsx(I2,{onClose:()=>c(!1),onSuccess:()=>{c(!1),C(),w.success("Your story has been submitted for review!")}})]})},jz=(t,e,s)=>e?`${_e}/proxy_image?place_id=${e}`:s?`${_e}/proxy_image?name=${encodeURIComponent(s)}`:`${_e}/proxy_image/default`,Nz=({type:t,className:e="w-4 h-4"})=>{switch(t){case"food":return r.jsx(No,{className:e});case"attraction":return r.jsx(Xx,{className:e});case"cafe":return r.jsx(Vp,{className:e});case"hotel":return r.jsx(eb,{className:e});case"shopping":return r.jsx(ab,{className:e});case"transport":return r.jsx(Wx,{className:e});default:return r.jsx(ra,{className:e})}},Bz=({slot:t})=>{const e={morning:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400",lunch:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",afternoon:"bg-sky-100 text-sky-700 dark:bg-sky-900/30 dark:text-sky-400",evening:"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-400",night:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400"};return r.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider ${e[t]||e.morning}`,children:t})},kz=({plan:t,onClose:e})=>{const[s,n]=L.useState(0),a=t.days[s],i=()=>n(A=>Math.max(0,A-1)),c=()=>n(A=>Math.min(t.days.length-1,A+1));return r.jsxs("div",{className:"fixed inset-0 z-[100] bg-white dark:bg-slate-900 flex flex-col overflow-hidden animate-in fade-in duration-200",children:[r.jsx("div",{className:"shrink-0 border-b border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-colors",children:r.jsx(As,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white line-clamp-1",children:t.title}),r.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-2",children:[r.jsx("span",{children:t.duration}),r.jsx("span",{children:""}),r.jsx("span",{children:t.total_budget_estimate})]})]})]}),r.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider bg-slate-100 dark:bg-slate-800 px-3 py-1.5 rounded-full",children:"Read Only"})]})}),r.jsx("div",{className:"shrink-0 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 py-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:i,disabled:s===0,className:"p-2 hover:bg-white dark:hover:bg-slate-800 rounded-lg disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:r.jsx(Lu,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex-1 flex gap-2 overflow-x-auto py-1 [&::-webkit-scrollbar]:hidden",children:t.days.map((A,d)=>r.jsx("button",{onClick:()=>n(d),className:`shrink-0 px-4 py-2 rounded-xl font-medium text-sm transition-all ${s===d?"bg-sky-500 text-white shadow-md shadow-sky-500/20":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-sky-50 dark:hover:bg-slate-700 border border-slate-200 dark:border-slate-700"}`,children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("span",{className:"font-bold",children:["Day ",A.day_number]}),r.jsx("span",{className:"text-[10px] opacity-75",children:A.theme})]})},A.day_number))}),r.jsx("button",{onClick:c,disabled:s===t.days.length-1,className:"p-2 hover:bg-white dark:hover:bg-slate-800 rounded-lg disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:r.jsx(ai,{className:"w-5 h-5"})})]})})}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-8",children:[a.top_locations&&a.top_locations.length>0&&r.jsxs("section",{children:[r.jsxs("h2",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[r.jsx(Qn,{className:"w-4 h-4"})," Highlights"]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:a.top_locations.map((A,d)=>r.jsxs("div",{className:"relative h-48 rounded-2xl overflow-hidden group shadow-lg",children:[r.jsx("img",{src:jz(A.image_url,A.place_id,A.name),alt:A.name,className:"w-full h-full object-cover",onError:f=>{f.currentTarget.src=`${_e}/proxy_image/default`}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[r.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:A.name}),r.jsx("p",{className:"text-white/80 text-xs",children:A.highlight_reason})]})]},d))})]}),r.jsx("section",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-5 border border-slate-100 dark:border-slate-700",children:r.jsxs("div",{className:"flex flex-wrap gap-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-sky-100 dark:bg-sky-900/30 rounded-lg",children:r.jsx(Mn,{className:"w-5 h-5 text-sky-600 dark:text-sky-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Activities"}),r.jsxs("p",{className:"font-bold text-slate-900 dark:text-white",children:[a.day_summary.total_activities," Items"]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:r.jsx(Kh,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Est. Budget"}),r.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:a.day_summary.total_budget})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg",children:r.jsx(Wx,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Transport"}),r.jsx("p",{className:"font-bold text-slate-900 dark:text-white text-sm",children:a.day_summary.transport_notes})]})]})]})}),r.jsxs("section",{children:[r.jsxs("h2",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[r.jsx(on,{className:"w-4 h-4"})," Itinerary"]}),r.jsx("div",{className:"space-y-4",children:a.activities.map((A,d)=>r.jsxs("div",{className:"relative pl-8 group",children:[d<a.activities.length-1&&r.jsx("div",{className:"absolute left-[11px] top-10 bottom-0 w-0.5 bg-slate-200 dark:bg-slate-700"}),r.jsx("div",{className:`absolute left-0 top-2 w-6 h-6 rounded-full flex items-center justify-center shadow-md ${A.activity_type==="food"?"bg-orange-500":A.activity_type==="attraction"?"bg-sky-500":A.activity_type==="cafe"?"bg-amber-500":"bg-slate-500"}`,children:r.jsx(Nz,{type:A.activity_type,className:"w-3 h-3 text-white"})}),r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-100 dark:border-slate-700 p-5 shadow-sm",children:[r.jsx("div",{className:"flex items-start justify-between mb-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bz,{slot:A.time_slot}),r.jsxs("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:[A.start_time," - ",A.end_time]})]})}),r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1",children:A.place_name}),r.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center gap-1 mb-3",children:[r.jsx(ra,{className:"w-3 h-3"}),A.place_address]}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed mb-4",children:A.description}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[r.jsx("span",{className:"px-2 py-1 bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-400 rounded-lg font-bold",children:A.budget_estimate}),A.dietary_info&&r.jsx("span",{className:"px-2 py-1 bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-400 rounded-lg font-medium",children:A.dietary_info}),A.tips&&r.jsxs("span",{className:"text-slate-400 flex items-center gap-1",children:[r.jsx(Pa,{className:"w-3 h-3"})," ",A.tips]})]})]})]},d))})]}),t.practical_info&&r.jsxs("section",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-2xl p-5 border border-amber-100 dark:border-amber-800/30",children:[r.jsxs("h2",{className:"text-sm font-bold text-amber-800 dark:text-amber-400 mb-3 flex items-center gap-2",children:[r.jsx(Pa,{className:"w-4 h-4"})," Practical Info"]}),r.jsxs("div",{className:"space-y-2 text-sm text-amber-700 dark:text-amber-300",children:[t.practical_info.best_transport&&r.jsxs("p",{children:[r.jsx("strong",{children:"Transport:"})," ",t.practical_info.best_transport]}),t.practical_info.weather_advisory&&r.jsxs("p",{children:[r.jsx("strong",{children:"Weather:"})," ",t.practical_info.weather_advisory]}),t.practical_info.booking_recommendations&&t.practical_info.booking_recommendations.length>0&&r.jsxs("div",{children:[r.jsx("strong",{children:"Booking Tips:"}),r.jsx("ul",{className:"list-disc list-inside mt-1",children:t.practical_info.booking_recommendations.map((A,d)=>r.jsx("li",{children:A},d))})]})]})]})]})})]})},Cz=({suggestion:t})=>{var e;return r.jsxs("div",{className:"w-full md:w-auto md:min-w-[280px] md:max-w-[320px] bg-white dark:bg-slate-900/80 backdrop-blur-md border border-slate-200 dark:border-slate-700/50 rounded-2xl flex-shrink-0 snap-start",children:[r.jsxs("div",{className:"h-36 overflow-hidden relative rounded-t-2xl",children:[r.jsx("img",{src:t.imageUrl||`${_e}/proxy_image/default`,alt:t.title,className:"w-full h-full object-cover",onError:s=>{s.currentTarget.src=`${_e}/proxy_image/default`}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),r.jsx("div",{className:"absolute bottom-3 left-4",children:r.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:t.title})})]}),r.jsxs("div",{className:"p-5 space-y-4",children:[r.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 leading-relaxed line-clamp-2",children:t.description}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(e=t.tags)==null?void 0:e.slice(0,3).map(s=>r.jsx("span",{className:"text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300 px-2.5 py-1 rounded-lg uppercase tracking-wider",children:s},s))}),t.priceEstimate&&r.jsxs("div",{className:"pt-3 border-t border-slate-100 dark:border-slate-700/50",children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Est. Cost"}),r.jsx("p",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400",children:t.priceEstimate})]})]})]})},Sz=({plan:t,onViewDetails:e})=>{var a,i,c;const s=((a=t.days)==null?void 0:a.reduce((A,d)=>{var f;return A+(((f=d.activities)==null?void 0:f.length)||0)},0))||0,n=()=>{var d,f,u;const A=(u=(f=(d=t.days)==null?void 0:d[0])==null?void 0:f.top_locations)==null?void 0:u[0];return A!=null&&A.place_id?`${_e}/proxy_image?place_id=${A.place_id}`:A!=null&&A.name?`${_e}/proxy_image?name=${encodeURIComponent(A.name)}`:`${_e}/proxy_image/default`};return r.jsxs("div",{className:"w-full md:w-auto md:min-w-[320px] md:max-w-[380px] bg-white dark:bg-slate-900/80 backdrop-blur-md border border-slate-200 dark:border-slate-700/50 rounded-2xl flex-shrink-0 snap-start transition-all hover:shadow-lg",children:[r.jsxs("div",{className:"h-40 overflow-hidden relative rounded-t-2xl bg-gradient-to-br from-sky-400 to-blue-600",children:[r.jsx("img",{src:n(),alt:t.title,className:"w-full h-full object-cover",onError:A=>{A.currentTarget.src=`${_e}/proxy_image/default`}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"}),r.jsxs("div",{className:"absolute top-3 left-3 px-3 py-1 bg-sky-500/90 backdrop-blur-sm rounded-full text-white text-xs font-bold flex items-center gap-1.5",children:[r.jsx(Mn,{className:"w-3 h-3"}),t.duration]}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:r.jsx("h4",{className:"text-white font-bold text-lg leading-tight drop-shadow-md",children:t.title})})]}),r.jsxs("div",{className:"p-5 space-y-4",children:[r.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 leading-relaxed line-clamp-2",children:t.description}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(i=t.tags)==null?void 0:i.slice(0,4).map(A=>r.jsx("span",{className:"text-[10px] font-bold bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300 px-2.5 py-1 rounded-lg uppercase tracking-wider",children:A},A))}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 dark:text-slate-400",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Mn,{className:"w-3.5 h-3.5"}),((c=t.days)==null?void 0:c.length)||0," days"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ra,{className:"w-3.5 h-3.5"}),s," activities"]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-100 dark:border-slate-700/50",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Est. Budget"}),r.jsx("p",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400",children:t.total_budget_estimate})]}),r.jsxs("button",{onClick:()=>e(t),className:"flex items-center gap-1.5 px-4 py-2 rounded-xl text-xs font-bold bg-sky-600 hover:bg-sky-500 text-white transition-all",children:[r.jsx(Pa,{className:"w-3.5 h-3.5"}),"View Itinerary"]})]})]})]})},Ez=({place:t})=>r.jsxs("div",{className:"bg-white dark:bg-slate-900/80 border border-slate-200 dark:border-slate-700/50 rounded-xl p-4",children:[r.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:t.name}),t.address&&r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:t.address}),r.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[t.rating&&r.jsxs("span",{className:"flex items-center gap-1 text-sm",children:[r.jsx(yA,{className:"w-4 h-4 text-amber-400 fill-current"}),t.rating]}),t.cuisine&&r.jsx("span",{className:"text-xs bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded",children:t.cuisine}),t.price_level&&r.jsx("span",{className:"text-xs text-emerald-600",children:t.price_level})]})]}),Tz=t=>t.map((e,s)=>{const n=()=>e.id||e.place_id?`${_e}/proxy_image?place_id=${e.id||e.place_id}`:e.name?`${_e}/proxy_image?name=${encodeURIComponent(e.name)}`:`${_e}/proxy_image/default`;return{id:e.id||`shared-place-${s}`,title:e.title||e.name||"Unknown",description:e.description||e.address||"",duration:e.duration||"Place",priceEstimate:e.priceEstimate||(e.price_level?"$".repeat(e.price_level.length):"N/A"),tags:e.tags||(e.business_status==="OPERATIONAL"?["Open","Place"]:["Place"]),imageUrl:n(),itinerary:e.itinerary||null,reviews:e.review_list||[],fullAddress:e.address,rating:e.rating}}),Uz=t=>{let e=t.content,s,n,a;if(e.startsWith("DAILY_PLAN::"))try{const i=JSON.parse(e.substring(12));n=[i],e=`Generated a ${i.duration} trip plan:`}catch(i){console.error("Failed to parse daily plan:",i)}else if(e.startsWith("FOOD_DATA::"))try{const i=JSON.parse(e.substring(11));i.recommendations&&(a=i.recommendations,e=`Found ${i.recommendations.length} food recommendations:`)}catch(i){console.error("Failed to parse food data:",i)}else if(e.startsWith("POPUP_DATA::"))try{const i=JSON.parse(e.substring(12));s=Tz(i),e=`Found ${s.length} recommendations:`}catch(i){console.error("Failed to parse places data:",i)}return{text:e,suggestions:s,dailyPlans:n,foodRecommendations:a}},Fz=()=>{const{shareToken:t}=Jx(),e=za(),[s,n]=L.useState(null),[a,i]=L.useState(!0),[c,A]=L.useState(null),[d,f]=L.useState(null),u=L.useRef(null);return L.useEffect(()=>{(async()=>{if(!t){A("Invalid share link"),i(!1);return}try{const x=await fetch(`${_e}/api/shared/${t}`);if(!x.ok){x.status===404?A("This conversation is no longer available or has been unshared."):A("Failed to load conversation"),i(!1);return}const m=await x.json();n(m.conversation)}catch(x){console.error("Failed to fetch shared conversation:",x),A("Failed to load conversation. Please try again.")}finally{i(!1)}})()},[t]),L.useEffect(()=>{var p;s&&((p=u.current)==null||p.scrollIntoView({behavior:"smooth"}))},[s]),a?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900",children:r.jsxs("div",{className:"text-center space-y-4",children:[r.jsx(Xt,{className:"w-10 h-10 text-sky-500 animate-spin mx-auto"}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Loading shared conversation..."})]})}):c||!s?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900 p-4",children:r.jsxs("div",{className:"text-center space-y-6 max-w-md",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto",children:r.jsx(ur,{className:"w-8 h-8 text-red-500"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Conversation Not Found"}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:c||"This shared conversation could not be found."})]}),r.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center gap-2 px-6 py-3 bg-sky-500 hover:bg-sky-600 text-white font-bold rounded-xl transition-colors",children:[r.jsx(jA,{className:"w-4 h-4"}),"Go to Home"]})]})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900",children:[r.jsx("div",{className:"sticky top-0 z-10 px-4 py-3 border-b border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm",children:r.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e("/"),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:r.jsx(jA,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white truncate",children:s.title}),r.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Shared conversation - ",s.messageCount," messages"]})]}),r.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 dark:bg-slate-800 rounded-full",children:[r.jsx(qg,{className:"w-3.5 h-3.5 text-sky-500"}),r.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300",children:"GogoTrip"})]})]})}),r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-8 py-8",children:[r.jsx("div",{className:"flex flex-col space-y-8",children:s.messages.map(p=>{const x=p.role==="user",{text:m,suggestions:j,dailyPlans:w,foodRecommendations:S}=Uz(p);return r.jsxs("div",{className:`flex w-full flex-col ${x?"items-end":"items-start"}`,children:[r.jsxs("div",{className:`flex gap-4 max-w-[90%] md:max-w-[70%] ${x?"flex-row-reverse":"flex-row"}`,children:[r.jsx("div",{className:"flex-shrink-0 mt-2",children:x?r.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-300 dark:bg-slate-700 flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:"U"})}):r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-sky-500 to-blue-600 flex items-center justify-center shadow-md",children:r.jsx(If,{className:"w-5 h-5 text-white"})})}),r.jsxs("div",{className:`flex flex-col gap-1 p-5 rounded-[1.5rem] shadow-sm ${x?"bg-sky-600 dark:bg-indigo-600 text-white rounded-tr-sm":"bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-200 border border-slate-100 dark:border-slate-800 rounded-tl-sm"}`,children:[r.jsx("p",{className:"text-[15px] leading-relaxed whitespace-pre-wrap font-medium",children:m}),r.jsx("span",{className:`text-[10px] font-bold ${x?"text-sky-100":"text-slate-400"} self-end mt-1`,children:new Date(p.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),j&&j.length>0&&r.jsx("div",{className:"mt-8 ml-0 md:ml-14 w-full md:w-auto md:max-w-[95%]",children:r.jsx("div",{className:"flex flex-row gap-4 overflow-x-auto pb-4 pl-1 [&::-webkit-scrollbar]:hidden scroll-smooth snap-x",children:j.map((C,F)=>r.jsx(Cz,{suggestion:C},C.id||F))})}),w&&w.length>0&&r.jsx("div",{className:"mt-8 ml-0 md:ml-14 w-full md:w-auto md:max-w-[95%]",children:r.jsx("div",{className:"flex flex-row gap-4 overflow-x-auto pb-4 pl-1 [&::-webkit-scrollbar]:hidden scroll-smooth snap-x",children:w.map((C,F)=>r.jsx(Sz,{plan:C,onViewDetails:f},`${C.title}-${F}`))})}),S&&S.length>0&&r.jsx("div",{className:"mt-8 ml-0 md:ml-14 w-full md:w-auto md:max-w-[95%]",children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:S.slice(0,6).map((C,F)=>r.jsx(Ez,{place:C},`${C.name}-${F}`))})})]},p.id)})}),r.jsx("div",{ref:u})]}),r.jsx("div",{className:"border-t border-slate-200 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 text-center",children:[r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"This is a shared conversation. Want to plan your own trip?"}),r.jsxs("button",{onClick:()=>e("/chat"),className:"inline-flex items-center gap-2 px-6 py-3 bg-sky-500 hover:bg-sky-600 text-white font-bold rounded-xl transition-colors",children:[r.jsx(qg,{className:"w-4 h-4"}),"Start Planning"]})]})}),d&&r.jsx(kz,{plan:d,onClose:()=>f(null)})]})},bl={SUPER_ADMIN:"super_admin",ADMIN:"admin",USER:"user"},Lz={Administrator:bl.SUPER_ADMIN,Admin:bl.ADMIN,User:bl.USER,administrator:bl.SUPER_ADMIN,ADMIN:bl.ADMIN,USER:bl.USER,admin:bl.ADMIN,user:bl.USER,super_admin:bl.SUPER_ADMIN};function $x(t){return t?Object.values(bl).includes(t)?t:Lz[t]??bl.USER:bl.USER}function Sy(t){const e=$x(t);return e===bl.SUPER_ADMIN||e===bl.ADMIN}function Ey(t){return $x(t)===bl.SUPER_ADMIN}const Mz=({user:t,onLogout:e,onSwitchToAdmin:s})=>{const n=za();Jf();const[a,i]=L.useState(!1),[c,A]=L.useState(!1),[d,f]=L.useState([]),[u,p]=L.useState(!1);L.useEffect(()=>{(async()=>{try{const _=await fetch(`${_e}/api/notifications/user`,{credentials:"include"});if(_.ok){const z=await _.json();z.success&&f(z.notifications||[])}}catch(_){console.error("Failed to fetch notifications",_)}})()},[]);const x=()=>A(U=>!U),m=()=>p(!0),j=()=>{p(!1),e()},w=U=>{console.log("Update user:",U)},S=U=>{n(U),i(!1)},C=t?{...t,subscription:t.subscription??(t.isPremium?{status:"active"}:void 0)}:null,F=Sy(t.role);return r.jsx(uF,{children:r.jsx("div",{className:`${c?"dark":""} h-full`,children:r.jsxs("div",{className:"min-h-screen flex bg-gradient-to-br from-blue-100 via-sky-50 to-white dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 text-slate-900 dark:text-slate-200",children:[r.jsx(hF,{isOpen:a,isAdminUser:F,onSwitchToAdmin:s,onChangeView:S}),r.jsxs("main",{className:"flex-1 flex flex-col min-w-0 relative",children:[r.jsx(fF,{onToggleSidebar:()=>i(U=>!U),title:"GogoTrip",isDarkMode:c,onToggleTheme:x,user:t,notifications:d,onLogout:m,onNavigate:S}),r.jsx("div",{className:"flex-1 overflow-y-auto relative pt-28",children:r.jsx("div",{className:"relative",children:r.jsxs(ZE,{children:[r.jsx(Ra,{path:"/",element:r.jsx(bL,{user:C})}),r.jsx(Ra,{path:"/chat",element:r.jsx(b5,{user:C})}),r.jsx(Ra,{path:"/chat/:conversationId",element:r.jsx(b5,{user:C})}),r.jsx(Ra,{path:"/shared/:shareToken",element:r.jsx(Fz,{})}),r.jsx(Ra,{path:"/trips",element:r.jsx(XL,{user:C})}),r.jsx(Ra,{path:"/blogs",element:r.jsx(wz,{user:C})}),r.jsx(Ra,{path:"/calendar",element:r.jsx(qL,{user:C})}),r.jsx(Ra,{path:"/scheduler",element:r.jsx(eM,{user:C})}),r.jsx(Ra,{path:"/translate",element:r.jsx(nM,{user:C})}),r.jsx(Ra,{path:"/expenses",element:r.jsx(lM,{user:C})}),r.jsx(Ra,{path:"/support",element:r.jsx(fL,{user:C})}),r.jsx(Ra,{path:"/support/:id",element:r.jsx(mL,{user:C})}),r.jsx(Ra,{path:"/settings",element:r.jsx(oM,{user:t,onUpdateUser:w})}),r.jsx(Ra,{path:"/billing",element:r.jsx(cM,{user:t,onUpdateUser:w,onNavigate:S})}),r.jsx(Ra,{path:"/receipt",element:r.jsx(oI,{})}),r.jsx(Ra,{path:"/announcements",element:r.jsx(dI,{})}),r.jsx(Ra,{path:"/announcements/:id",element:r.jsx(uI,{})}),r.jsx(Ra,{path:"*",element:r.jsx(WE,{to:"/",replace:!0})})]})})})]}),a&&r.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 md:hidden",onClick:()=>i(!1)}),u&&r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 max-w-sm w-full",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4 text-red-600",children:r.jsx(ga,{})}),r.jsx("h3",{className:"text-lg font-bold mb-2",children:"Sign Out"}),r.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Are you sure you want to sign out?"}),r.jsxs("div",{className:"flex gap-3 w-full",children:[r.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2 rounded-xl bg-slate-100",children:"Cancel"}),r.jsxs("button",{onClick:j,className:"flex-1 px-4 py-2 rounded-xl bg-red-600 text-white flex items-center justify-center gap-2",children:[r.jsx(sb,{size:18}),"Sign Out"]})]})]})})})]})})})},Qz=({activeItem:t,onNavigate:e,onSwitchToUser:s,onLogout:n})=>{const a=[{id:"Home",label:"Dashboard",icon:r.jsx(Iy,{size:20})},{id:"Info Blog",label:"Info Blog",icon:r.jsx(Kl,{size:20})},{id:"Blog Moderation",label:"Blog Moderation",icon:r.jsx(Kg,{size:20})},{id:"Blog Reports",label:"Blog Reports",icon:r.jsx($g,{size:20})},{id:"Notifications",label:"Notifications",icon:r.jsx(sc,{size:20})},{id:"Advertisement",label:"Advertisements",icon:r.jsx(Rf,{size:20})},{id:"Login Hero",label:"Login Background",icon:r.jsx(Rf,{size:20})},{id:"Subscription",label:"Subscriptions",icon:r.jsx(Df,{size:20})},{id:"Support Tickets",label:"Support Tickets",icon:r.jsx(ic,{size:20})},{id:"Voucher Managment",label:"Voucher Managment",icon:r.jsx(L8,{size:20})},{id:"Plan Managment",label:"Plan Managment",icon:r.jsx(vA,{size:20})},{id:"Admin Messages",label:"Admin Messages",icon:r.jsx(ko,{size:20})},{id:"Admin Chat",label:"Admin Chat",icon:r.jsx(ic,{size:20})},{id:"Inquiries",label:"Inquiries",icon:r.jsx(Sp,{size:20})}],i=[{id:"User",label:"Users",icon:r.jsx(Gl,{size:20})},{id:"Place",label:"Places",icon:r.jsx(ra,{size:20})},{id:"Trip",label:"Trips",icon:r.jsx(NA,{size:20})},{id:"Trip Item",label:"Trip Items",icon:r.jsx(Mn,{size:20})}],c=[{id:"Settings",label:"Settings",icon:r.jsx(nb,{size:20})}],A=d=>{const f=t===d.id;return r.jsxs("button",{onClick:()=>e(d.id),className:`
          w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200
          ${f?"bg-blue-50 text-blue-600 shadow-sm":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}
        `,children:[r.jsx("span",{className:`${f?"text-blue-500":"text-slate-400"} transition-colors`,children:d.icon}),r.jsx("span",{className:"flex-1 text-left",children:d.label}),d.badge&&r.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-600 text-xs font-bold rounded-full",children:d.badge}),f&&r.jsx(ai,{size:16,className:"text-blue-400"})]},d.id)};return r.jsxs("aside",{className:"w-64 h-screen bg-white border-r border-slate-200 flex flex-col",children:[r.jsx("div",{className:"p-6 border-b border-slate-100",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/20",children:r.jsx(NA,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-lg font-bold text-slate-900",children:"GogoTrip"}),r.jsx("p",{className:"text-xs text-slate-400",children:"Admin Panel"})]})]})}),r.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Main Menu"}),r.jsx("div",{className:"space-y-1",children:a.map(A)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"Data Management"}),r.jsx("div",{className:"space-y-1",children:i.map(A)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"px-4 text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2",children:"System"}),r.jsx("div",{className:"space-y-1",children:c.map(A)})]})]}),r.jsxs("div",{className:"p-4 border-t border-slate-100 space-y-2",children:[r.jsxs("button",{onClick:s,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors",children:[r.jsx(u6,{size:20,className:"text-slate-400"}),"Switch to User View"]}),r.jsxs("button",{onClick:n,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-red-600 hover:bg-red-50 transition-colors",children:[r.jsx(sb,{size:20}),"Sign Out"]})]})]})},_z=({onLogout:t,onNavigate:e,user:s})=>{const[n,a]=L.useState(!1),[i,c]=L.useState(!1),[A,d]=L.useState(""),[f,u]=L.useState(null),p=L.useRef(null),x=L.useRef(null);L.useEffect(()=>{const F=U=>{p.current&&!p.current.contains(U.target)&&a(!1),x.current&&!x.current.contains(U.target)&&c(!1)};return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]);const m=F=>{e("Settings"),a(!1)},j=[{id:1,text:"New user registered: Sarah J.",time:"2 min ago",unread:!0},{id:2,text:"System backup completed successfully.",time:"1 hour ago",unread:!1},{id:3,text:"Trip #1029 reported by user.",time:"3 hours ago",unread:!0}],w=F=>{switch(F){case"success":return r.jsx(zn,{size:18});case"warning":return r.jsx(ga,{size:18});default:return r.jsx(Pa,{size:18})}},S=F=>{switch(F){case"success":return"bg-white border-green-100 text-green-800";case"warning":return"bg-white border-amber-100 text-amber-800";default:return"bg-white border-blue-100 text-blue-800"}},C=F=>{switch(F){case"success":return"bg-green-100 text-green-600";case"warning":return"bg-amber-100 text-amber-600";default:return"bg-blue-100 text-blue-600"}};return r.jsxs("header",{className:"flex flex-col md:flex-row items-center justify-between gap-4 py-4 px-8 bg-white border-b border-slate-200 z-20 relative",children:[f&&r.jsxs("div",{className:`fixed top-24 right-6 z-[100] flex items-center gap-3 px-4 py-3 rounded-xl shadow-xl border animate-in slide-in-from-top-4 duration-300 ${S(f.type)}`,children:[r.jsx("div",{className:`p-1 rounded-full ${C(f.type)}`,children:w(f.type)}),r.jsx("p",{className:"text-sm font-medium",children:f.message}),r.jsx("button",{onClick:()=>u(null),className:"ml-2 opacity-50 hover:opacity-100 transition-opacity",children:r.jsx(As,{size:16})})]}),r.jsx("div",{children:r.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:"Admin Dashboard"})}),r.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[r.jsx("div",{className:"relative",ref:x,children:i&&r.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white rounded-xl shadow-xl border border-slate-100 overflow-hidden animate-in fade-in zoom-in-95 duration-200 z-50",children:[r.jsxs("div",{className:"p-4 border-b border-slate-50 flex justify-between items-center",children:[r.jsx("h3",{className:"font-semibold text-slate-800 text-sm",children:"Notifications"}),r.jsx("button",{className:"text-xs text-blue-600 hover:underline",children:"Mark all read"})]}),r.jsx("div",{className:"max-h-64 overflow-y-auto",children:j.map(F=>r.jsxs("div",{className:`p-4 border-b border-slate-50 hover:bg-slate-50 transition-colors cursor-pointer flex gap-3 ${F.unread?"bg-blue-50/30":""}`,children:[r.jsx("div",{className:`w-2 h-2 mt-1.5 rounded-full shrink-0 ${F.unread?"bg-blue-500":"bg-slate-300"}`}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-700",children:F.text}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:F.time})]})]},F.id))}),r.jsx("div",{className:"p-3 text-center border-t border-slate-50",children:r.jsx("button",{className:"text-xs text-slate-500 hover:text-slate-800 font-medium",children:"View All"})})]})}),r.jsxs("div",{className:"relative pl-2 border-l border-slate-200",ref:p,children:[r.jsxs("button",{onClick:()=>a(!n),className:"flex items-center gap-3 hover:bg-slate-50 rounded-lg p-1.5 transition-colors group",children:[r.jsxs("div",{className:"text-right hidden md:block",children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 group-hover:text-slate-900",children:(s==null?void 0:s.name)||"Admin User"}),r.jsx("p",{className:"text-xs text-slate-400",children:(s==null?void 0:s.email)||"admin@gogotrip.com"})]}),r.jsx("div",{className:"w-9 h-9 rounded-full bg-slate-200 overflow-hidden shrink-0 ring-2 ring-transparent group-hover:ring-slate-100 transition-all",children:r.jsx("img",{src:(s==null?void 0:s.avatarUrl)||"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin",alt:"User",className:"w-full h-full object-cover"})})]}),r.jsxs("div",{className:`
                   absolute top-full right-0 mt-3 w-64 bg-white dark:bg-slate-900 rounded-[1.5rem] shadow-2xl border border-slate-100 dark:border-slate-800 overflow-hidden transition-all duration-300 origin-top-right z-50
                   ${n?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 -translate-y-2 pointer-events-none"}
                `,children:[r.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-800",children:[r.jsx("p",{className:"text-base font-bold text-slate-900 dark:text-white truncate",children:s.name}),r.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mt-0.5 truncate",children:s.email||"alex.chen@example.com"})]}),r.jsx("div",{className:"p-2 space-y-0.5",children:r.jsxs("button",{onClick:()=>m(),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors group",children:[r.jsx(ta,{className:"w-4 h-4 text-slate-400 group-hover:text-sky-600 dark:group-hover:text-indigo-400 transition-colors"}),"Account Settings"]})}),r.jsx("div",{className:"p-2 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/20",children:r.jsxs("button",{onClick:t,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-bold text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[r.jsx(sb,{className:"w-4 h-4"}),"Sign Out"]})})]})]})]})]})},Iz=({data:t})=>{const e=Math.max(...t,1),s=t.map((n,a)=>{const i=a/(t.length-1)*100,c=100-n/e*100;return`${i},${c}`}).join(" ");return r.jsxs("div",{className:"w-full h-64 relative animate-in fade-in duration-500",children:[r.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"w-full h-full overflow-visible",children:[r.jsx("line",{x1:"0",y1:"25",x2:"100",y2:"25",stroke:"#e2e8f0",strokeWidth:"0.5"}),r.jsx("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"#e2e8f0",strokeWidth:"0.5"}),r.jsx("line",{x1:"0",y1:"75",x2:"100",y2:"75",stroke:"#e2e8f0",strokeWidth:"0.5"}),r.jsx("polyline",{fill:"none",stroke:"#3B82F6",strokeWidth:"2",points:s,vectorEffect:"non-scaling-stroke",className:"drop-shadow-sm transition-all duration-500 ease-in-out"}),r.jsx("polygon",{fill:"url(#gradient)",points:`0,100 ${s} 100,100`,opacity:"0.1",className:"transition-all duration-500 ease-in-out"}),r.jsx("defs",{children:r.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[r.jsx("stop",{offset:"0%",stopColor:"#3B82F6"}),r.jsx("stop",{offset:"100%",stopColor:"#3B82F6",stopOpacity:"0"})]})})]}),r.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-2 font-medium",children:[r.jsx("span",{children:"Start"}),r.jsx("span",{children:"Mid"}),r.jsx("span",{children:"End"})]})]})},Oz=({onNavigate:t})=>{const[e,s]=L.useState("Last 12 Months"),[n,a]=L.useState({totalUsers:0,verifiedUsers:0,totalTrips:0,totalArticles:0,totalSubscriptions:0,revenueThisMonth:0,userGrowth:0,verifiedGrowth:0,tripGrowth:0,chartData:[0,0,0,0,0,0,0,0,0,0,0,0]}),[i,c]=L.useState(!0);L.useEffect(()=>{A(e)},[e]);const A=async f=>{c(!0);try{const u=new URLSearchParams({range:f}),p=await fetch(`${_e}/api/admin/dashboard-stats?${u}`,{credentials:"include"});if(p.ok){const x=await p.json(),m={totalUsers:x.total_users??x.totalUsers??0,verifiedUsers:x.active_users??x.verifiedUsers??0,totalTrips:x.total_trips??x.totalTrips??0,totalArticles:x.total_articles??x.totalArticles??0,totalSubscriptions:x.total_subscriptions??x.totalSubscriptions??0,revenueThisMonth:x.revenue_this_month??x.revenueThisMonth??0,userGrowth:x.user_growth??x.userGrowth??0,verifiedGrowth:x.verified_growth??x.verifiedGrowth??0,tripGrowth:x.trip_growth??x.tripGrowth??0,chartData:x.chart_data??x.chartData??[0,0,0,0,0,0,0,0,0,0,0,0]};console.log("Dashboard stats loaded:",m),a(m)}else console.error("Failed to fetch dashboard stats:",p.status)}catch(u){console.error("Error fetching dashboard stats:",u)}finally{c(!1)}},d=f=>{s(f.target.value)};return i?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex flex-col hover:shadow-md transition-all cursor-pointer hover:-translate-y-1",onClick:()=>t("User"),children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-2 bg-blue-50 text-blue-600 rounded-lg",children:r.jsx(Gl,{size:20})}),r.jsxs("span",{className:`flex items-center text-xs font-semibold px-2 py-1 rounded ${(n.userGrowth??0)>=0?"text-green-600 bg-green-50":"text-red-600 bg-red-50"}`,children:[(n.userGrowth??0)>=0?r.jsx(jg,{size:12,className:"mr-1"}):r.jsx(wg,{size:12,className:"mr-1"}),Math.abs(n.userGrowth??0),"%"]})]}),r.jsx("h3",{className:"text-2xl font-bold text-slate-800",children:(n.totalUsers??0).toLocaleString()}),r.jsx("p",{className:"text-sm text-slate-500",children:"Total Registered Users"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex flex-col hover:shadow-md transition-all cursor-pointer hover:-translate-y-1",onClick:()=>t("User"),children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-2 bg-green-50 text-green-600 rounded-lg",children:r.jsx(Hf,{size:20})}),r.jsxs("span",{className:`flex items-center text-xs font-semibold px-2 py-1 rounded ${(n.verifiedGrowth??0)>=0?"text-green-600 bg-green-50":"text-red-600 bg-red-50"}`,children:[(n.verifiedGrowth??0)>=0?r.jsx(jg,{size:12,className:"mr-1"}):r.jsx(wg,{size:12,className:"mr-1"}),Math.abs(n.verifiedGrowth??0),"%"]})]}),r.jsx("h3",{className:"text-2xl font-bold text-slate-800",children:(n.verifiedUsers??0).toLocaleString()}),r.jsx("p",{className:"text-sm text-slate-500",children:"Verified Accounts"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex flex-col hover:shadow-md transition-all cursor-pointer hover:-translate-y-1",onClick:()=>t("Trip"),children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-2 bg-purple-50 text-purple-600 rounded-lg",children:r.jsx(NA,{size:20})}),r.jsxs("span",{className:`flex items-center text-xs font-semibold px-2 py-1 rounded ${(n.tripGrowth??0)>=0?"text-green-600 bg-green-50":"text-red-600 bg-red-50"}`,children:[(n.tripGrowth??0)>=0?r.jsx(jg,{size:12,className:"mr-1"}):r.jsx(wg,{size:12,className:"mr-1"}),Math.abs(n.tripGrowth??0),"%"]})]}),r.jsx("h3",{className:"text-2xl font-bold text-slate-800",children:(n.totalTrips??0).toLocaleString()}),r.jsx("p",{className:"text-sm text-slate-500",children:"Total Trips Created"})]}),r.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex flex-col hover:shadow-md transition-all cursor-pointer hover:-translate-y-1",onClick:()=>t("Info Blog"),children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"p-2 bg-amber-50 text-amber-600 rounded-lg",children:r.jsx(Kl,{size:20})})}),r.jsx("h3",{className:"text-2xl font-bold text-slate-800",children:(n.totalArticles??0).toLocaleString()}),r.jsx("p",{className:"text-sm text-slate-500",children:"Published Articles"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 bg-emerald-50 text-emerald-600 rounded-lg",children:r.jsx(Cv,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Revenue This Month"}),r.jsx("p",{className:"text-sm text-slate-500",children:"From premium subscriptions"})]})]}),r.jsxs("p",{className:"text-3xl font-bold text-slate-800",children:["RM ",(n.revenueThisMonth??0).toFixed(2)]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg",children:r.jsx(Gl,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Active Subscriptions"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Premium members"})]})]}),r.jsx("p",{className:"text-3xl font-bold text-slate-800",children:(n.totalSubscriptions??0).toLocaleString()})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"User Growth"}),r.jsxs("p",{className:"text-sm text-slate-500",children:["New signups over ",e.toLowerCase()]})]}),r.jsxs("select",{className:"text-sm border-slate-200 rounded-lg text-slate-600 focus:ring-blue-500 focus:border-blue-500 p-2 border bg-white cursor-pointer",onChange:d,value:e,children:[r.jsx("option",{children:"Last 12 Months"}),r.jsx("option",{children:"Last 30 Days"}),r.jsx("option",{children:"Last 7 Days"})]})]}),r.jsx(Iz,{data:n.chartData??[0,0,0,0,0,0,0,0,0,0,0,0]})]})]})},ei={SUPER_ADMIN:"super_admin",ADMIN:"admin",USER:"user"},m4={[ei.SUPER_ADMIN]:{label:"Super Admin",color:"text-purple-700",bgColor:"bg-purple-50 border-purple-200",icon:r.jsx(Hf,{className:"w-3 h-3"})},[ei.ADMIN]:{label:"Admin",color:"text-blue-700",bgColor:"bg-blue-50 border-blue-200",icon:r.jsx(jo,{className:"w-3 h-3"})},[ei.USER]:{label:"User",color:"text-slate-600",bgColor:"bg-slate-50 border-slate-200",icon:r.jsx(q8,{className:"w-3 h-3"})}},Dz=()=>{const[t,e]=L.useState([]),[s,n]=L.useState([]),[a,i]=L.useState(!0),[c,A]=L.useState(""),[d,f]=L.useState(1),u=10,[p,x]=L.useState(ei.ADMIN),[m,j]=L.useState(!1),[w,S]=L.useState([{value:ei.USER,label:"User",description:"Regular user"}]),[C,F]=L.useState(!1),[U,_]=L.useState(null),[z,I]=L.useState(!1),[H,ee]=L.useState({email:"",role:ei.USER,status:"active"}),[$,ce]=L.useState({isOpen:!1,user:null,type:null}),[Q,q]=L.useState(null),[te,X]=L.useState(null);L.useEffect(()=>{se(),W()},[]);const Ae=(Be,tt)=>{X({type:Be,message:tt}),setTimeout(()=>X(null),4e3)},W=async()=>{try{const Be=await fetch("/api/admin/available-roles");if(Be.ok){const tt=await Be.json();S(tt.availableRoles||[{value:ei.USER,label:"User",description:"Regular user"}]),x(tt.currentRole||ei.ADMIN),j(tt.canManageAdmins||!1)}}catch(Be){console.error("Failed to fetch available roles:",Be)}},se=async()=>{try{const Be=await fetch("/api/admin/users");if(Be.ok){const tt=await Be.json();e(Array.isArray(tt)?tt:tt.users||[]),tt.currentAdminRole&&x(tt.currentAdminRole),typeof tt.canManageAdmins=="boolean"&&j(tt.canManageAdmins)}else console.error("Failed to fetch users"),Ae("error","Failed to fetch user list")}catch(Be){console.error("Error:",Be),Ae("error","Network error")}finally{i(!1)}},Z=Be=>{const tt=(Be==null?void 0:Be.toLowerCase())||"user",Xe=m4[tt]||m4[ei.USER];return r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border ${Xe.bgColor} ${Xe.color}`,children:[Xe.icon,Xe.label]})},re=(Be,tt)=>Be==="pending_verification"||!tt?{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200",icon:r.jsx(on,{className:"w-3 h-3"}),label:"Pending Verification"}:Be==="active"?{bg:"bg-green-50",text:"text-green-700",border:"border-green-200",icon:r.jsx(zn,{className:"w-3 h-3"}),label:"Active"}:Be==="suspended"?{bg:"bg-red-50",text:"text-red-700",border:"border-red-200",icon:r.jsx(rc,{className:"w-3 h-3"}),label:"Suspended"}:{bg:"bg-slate-50",text:"text-slate-700",border:"border-slate-200",icon:r.jsx(ga,{className:"w-3 h-3"}),label:Be},ve=Be=>{if(!Be)return"N/A";const tt=new Date(Be),et=new Date().getTime()-tt.getTime(),Tt=Math.floor(et/(1e3*60*60*24));return Tt===0?"Today":Tt===1?"Yesterday":Tt<7?`${Tt} days ago`:Tt<30?`${Math.floor(Tt/7)} weeks ago`:Tt<365?`${Math.floor(Tt/30)} months ago`:tt.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},ae=async Be=>{if(Be.status!=="pending_verification"){Ae("error","User is already verified");return}q(Be.id);try{const tt=await fetch(`/api/admin/users/${Be.id}/resend-verification`,{method:"POST",headers:{"Content-Type":"application/json"}});if(tt.ok)Ae("success",`Verification email sent to ${Be.email}`);else{const Xe=await tt.json();Ae("error",Xe.message||"Failed to send verification email")}}catch(tt){console.error("Error:",tt),Ae("error","Network error occurred")}finally{q(null)}},R=Be=>{var et;const tt=(et=Be.role)==null?void 0:et.toLowerCase();if(!m&&(tt===ei.ADMIN||tt===ei.SUPER_ADMIN)){Ae("error","Permission denied: Cannot delete admin users");return}const Xe=Be.status==="pending_verification"?"pending":"active";ce({isOpen:!0,user:Be,type:Xe})},P=async()=>{const{user:Be}=$;if(Be)try{const tt=await fetch(`/api/admin/users/${Be.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(tt.ok)e(t.filter(Xe=>Xe.id!==Be.id)),Ae("success",`User ${Be.email} deleted successfully`),ce({isOpen:!1,user:null,type:null});else{const Xe=await tt.json();Ae("error",Xe.error||"Failed to delete user")}}catch(tt){console.error("Error:",tt),Ae("error","Network error occurred")}},V=Be=>{var Xe;const tt=(Xe=Be.role)==null?void 0:Xe.toLowerCase();if(!m&&(tt===ei.ADMIN||tt===ei.SUPER_ADMIN)){Ae("error","Permission denied: Cannot edit admin users");return}_({...Be}),F(!0)},K=async()=>{if(U)try{const Be=await fetch(`/api/admin/users/${U.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:U.email,role:U.role,status:U.status})});if(Be.ok){const tt=await Be.json();e(t.map(Xe=>Xe.id===U.id?{...Xe,...tt}:Xe)),F(!1),_(null),Ae("success","User updated successfully")}else{const tt=await Be.json();Ae("error",tt.error||"Failed to update user")}}catch(Be){console.error("Update error:",Be),Ae("error","Update failed due to network error")}},ne=()=>{ee({email:"",role:ei.USER,status:"active"}),I(!0)},pe=async()=>{if(H.email)try{const Be={email:H.email,role:H.role||ei.USER,status:H.status||"active"},tt=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)});if(tt.ok){const Xe=await tt.json();e([Xe,...t]),I(!1),ee({email:"",role:ei.USER,status:"active"}),Ae("success","User added successfully. Temporary password sent via email.")}else{const Xe=await tt.json();Ae("error",Xe.error||"Failed to add user")}}catch(Be){console.error("Add error:",Be),Ae("error","Network error occurred")}},Ce=()=>{const Be=s.length>0?t.filter(rt=>s.includes(rt.id)):t,tt=["User ID","Email","Full Name","Role","Status","Email Verified","Last Login","Created At","Updated At","Deleted At","Is Premium","Plan Name","Plan Level","Sub End Date","Is Lifetime","Remaining Days","Stripe Customer ID","Has Google Calendar","Has Password","Has Google ID","Total Trips","Total Expenses","Total Calendar Events","Scheduler Items","Total Notifications"],Xe=Be.map(rt=>{var Ot,Dt,Oe,Ge,ft;const Ut=ht=>{if(ht==null)return"";const vt=String(ht);return vt.includes(",")?`"${vt}"`:vt},rs=ht=>ht?"Yes":"No";return[Ut(rt.id),Ut(rt.email),Ut(rt.name),Ut(rt.role),Ut(rt.status),rs(rt.isVerified),Ut(rt.lastLogin),Ut(rt.createdAt),Ut(rt.updatedAt),Ut(rt.deletedAt),rs(rt.isPremium),Ut(rt.currentPlanName),Ut(rt.currentPlanLevel),Ut(rt.subscriptionEndDate),rs(rt.isLifetime),Ut(rt.remainingDays),Ut(rt.stripeCustomerId),rs(rt.hasGoogleCalendar),rs(rt.hasPassword),rs(rt.hasGoogleId),Ut(((Ot=rt.relatedData)==null?void 0:Ot.trips)||0),Ut(((Dt=rt.relatedData)==null?void 0:Dt.expenses)||0),Ut(((Oe=rt.relatedData)==null?void 0:Oe.calendarEvents)||0),Ut(((Ge=rt.relatedData)==null?void 0:Ge.schedulerItems)||0),Ut(((ft=rt.relatedData)==null?void 0:ft.notifications)||0)].join(",")}).join(`
`),et=`${tt.join(",")}
${Xe}`,Tt=new Blob([et],{type:"text/csv;charset=utf-8;"}),Nt=URL.createObjectURL(Tt),Mt=document.createElement("a");Mt.href=Nt;const Qt=s.length>0?"selected":"full_database",pt=new Date().toISOString().split("T")[0];Mt.setAttribute("download",`gogotrip_users_${Qt}_${pt}.csv`),document.body.appendChild(Mt),Mt.click(),document.body.removeChild(Mt),Ae("success",`Export completed (${Be.length} records)`)},Ue=Be=>{f(Be)},Ne=()=>{s.length===gt.length?n([]):n(gt.map(Be=>Be.id))},Ie=Be=>{s.includes(Be)?n(s.filter(tt=>tt!==Be)):n([...s,Be])},Pe=t.filter(Be=>Be.email.toLowerCase().includes(c.toLowerCase())||Be.role.toLowerCase().includes(c.toLowerCase())||Be.status.toLowerCase().includes(c.toLowerCase())),ze=Math.ceil(Pe.length/u),gt=Pe.slice((d-1)*u,d*u),ie=Be=>{var Xe;if(m)return!0;const tt=(Xe=Be.role)==null?void 0:Xe.toLowerCase();return tt!==ei.ADMIN&&tt!==ei.SUPER_ADMIN};return a?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(yl,{className:"w-8 h-8 text-blue-500 animate-spin"})}):r.jsxs("div",{className:"space-y-6",children:[te&&r.jsxs("div",{className:`fixed top-4 right-4 z-50 flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg animate-in slide-in-from-right duration-300 ${te.type==="success"?"bg-green-50 border border-green-200 text-green-800":te.type==="error"?"bg-red-50 border border-red-200 text-red-800":te.type==="info"?"bg-blue-50 border border-blue-200 text-blue-800":"bg-amber-50 border border-amber-200 text-amber-800"}`,children:[te.type==="success"&&r.jsx(sa,{className:"w-5 h-5"}),te.type==="error"&&r.jsx(ur,{className:"w-5 h-5"}),te.type==="warning"&&r.jsx(ga,{className:"w-5 h-5"}),te.type==="info"&&r.jsx(Pa,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:te.message}),r.jsx("button",{onClick:()=>X(null),children:r.jsx(As,{className:"w-4 h-4 opacity-60 hover:opacity-100"})})]}),r.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg border ${m?"bg-purple-50 border-purple-200":"bg-blue-50 border-blue-200"}`,children:[m?r.jsx(Hf,{className:"w-5 h-5 text-purple-600"}):r.jsx(jo,{className:"w-5 h-5 text-blue-600"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:`text-sm font-medium ${m?"text-purple-800":"text-blue-800"}`,children:m?"Super Admin Access":"Admin Access"}),r.jsx("span",{className:`text-sm ml-2 ${m?"text-purple-600":"text-blue-600"}`,children:m?" You can view and manage all users including other admins":" You can only view and manage regular users"})]}),r.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${m?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:p})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"User Management"}),r.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[Pe.length," ",Pe.length===1?"user":"users"," found",!m&&" (regular users only)"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:Ce,className:"px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-2",children:[r.jsx(ip,{size:16}),"Export ",s.length>0?`(${s.length})`:"All"]}),r.jsxs("button",{onClick:ne,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 flex items-center gap-2",children:[r.jsx(ln,{size:16}),"Add User"]})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(tl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Search by email, role, or status...",value:c,onChange:Be=>{A(Be.target.value),f(1)},className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200",children:[r.jsx("th",{className:"px-4 py-3 text-left",children:r.jsx("input",{type:"checkbox",checked:s.length===gt.length&&gt.length>0,onChange:Ne,className:"rounded border-slate-300"})}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"User"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Role"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Created"}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:gt.map(Be=>{const tt=re(Be.status,Be.isVerified??!0),Xe=ie(Be);return r.jsxs("tr",{className:`hover:bg-slate-50/50 transition-colors ${Xe?"":"bg-slate-50/30"}`,children:[r.jsx("td",{className:"px-4 py-4",children:r.jsx("input",{type:"checkbox",checked:s.includes(Be.id),onChange:()=>Ie(Be.id),className:"rounded border-slate-300"})}),r.jsx("td",{className:"px-4 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-medium text-sm",children:Be.email.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-slate-800",children:Be.email}),r.jsxs("div",{className:"text-xs text-slate-400",children:["ID: ",Be.id]})]})]})}),r.jsx("td",{className:"px-4 py-4",children:Z(Be.role)}),r.jsx("td",{className:"px-4 py-4",children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border ${tt.bg} ${tt.text} ${tt.border}`,children:[tt.icon,tt.label]}),Be.status==="pending_verification"&&r.jsxs("button",{onClick:()=>ae(Be),disabled:Q===Be.id,className:"inline-flex items-center gap-1 text-xs text-blue-600 hover:text-blue-700 disabled:opacity-50",children:[Q===Be.id?r.jsx(yl,{className:"w-3 h-3 animate-spin"}):r.jsx(ko,{className:"w-3 h-3"}),"Resend Email"]})]})}),r.jsx("td",{className:"px-4 py-4",children:r.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-slate-500",children:[r.jsx(Mn,{className:"w-3.5 h-3.5"}),ve(Be.createdAt)]})}),r.jsx("td",{className:"px-4 py-4",children:r.jsx("div",{className:"flex items-center justify-end gap-1",children:Xe?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>V(Be),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit user",children:r.jsx(rb,{size:16})}),r.jsx("button",{onClick:()=>R(Be),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete user",children:r.jsx(na,{size:16})})]}):r.jsx("span",{className:"text-xs text-slate-400 px-2 py-1 bg-slate-100 rounded",children:"Protected"})})})]},Be.id)})})]})}),ze>1&&r.jsxs("div",{className:"px-4 py-3 border-t border-slate-200 flex items-center justify-between bg-slate-50/50",children:[r.jsxs("div",{className:"text-sm text-slate-500",children:["Showing ",(d-1)*u+1," to ",Math.min(d*u,Pe.length)," of ",Pe.length]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("button",{onClick:()=>Ue(d-1),disabled:d===1,className:"px-3 py-1 text-sm border border-slate-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-100",children:"Previous"}),Array.from({length:Math.min(5,ze)},(Be,tt)=>{let Xe;return ze<=5||d<=3?Xe=tt+1:d>=ze-2?Xe=ze-4+tt:Xe=d-2+tt,r.jsx("button",{onClick:()=>Ue(Xe),className:`px-3 py-1 text-sm border rounded-lg ${d===Xe?"bg-blue-600 text-white border-blue-600":"border-slate-200 hover:bg-slate-100"}`,children:Xe},Xe)}),r.jsx("button",{onClick:()=>Ue(d+1),disabled:d===ze,className:"px-3 py-1 text-sm border border-slate-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-100",children:"Next"})]})]})]}),$.isOpen&&$.user&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:`p-6 flex items-start gap-4 ${$.type==="active"?"bg-red-50":"bg-amber-50"}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${$.type==="active"?"bg-red-100 text-red-600":"bg-amber-100 text-amber-600"}`,children:$.type==="active"?r.jsx(r8,{size:20}):r.jsx(ga,{size:20})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:$.type==="active"?"Delete Active User?":"Delete Pending User?"}),r.jsx("p",{className:"text-sm text-slate-600",children:$.type==="active"?"This user has an active account with data. This action cannot be undone.":"This user has not completed email verification yet."})]})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-4 p-4 bg-slate-50 rounded-lg",children:[r.jsx("div",{className:"text-sm text-slate-600 mb-2",children:"You are about to delete:"}),r.jsx("div",{className:"font-medium text-slate-900",children:$.user.email}),r.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Status: ",$.user.status," | Role: ",$.user.role]})]}),$.type==="active"&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ur,{className:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-sm text-red-800",children:[r.jsx("div",{className:"font-medium mb-1",children:"Warning: Active User"}),r.jsx("div",{className:"text-xs text-red-700",children:"This will permanently delete all associated data including trips, expenses, and scheduler items. Consider suspending instead of deleting."})]})]})})]}),r.jsxs("div",{className:"p-6 border-t border-slate-200 bg-slate-50/50 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>ce({isOpen:!1,user:null,type:null}),className:"px-4 py-2 border border-slate-200 rounded-lg text-sm text-slate-600 hover:bg-slate-50",children:"Cancel"}),r.jsxs("button",{onClick:P,className:`px-4 py-2 rounded-lg text-sm font-medium text-white flex items-center gap-2 ${$.type==="active"?"bg-red-600 hover:bg-red-700":"bg-amber-600 hover:bg-amber-700"}`,children:[r.jsx(na,{size:16}),$.type==="active"?"Delete User":"Delete Pending User"]})]})]})}),C&&U&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Edit User"}),r.jsx("button",{onClick:()=>F(!1),children:r.jsx(As,{size:20,className:"text-slate-400"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email Address"}),r.jsx("input",{type:"email",value:U.email,onChange:Be=>_({...U,email:Be.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Role"}),r.jsx("select",{value:U.role,onChange:Be=>_({...U,role:Be.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",children:w.map(Be=>r.jsx("option",{value:Be.value,children:Be.label},Be.value))}),!m&&r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Only super_admin can assign admin roles"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),r.jsxs("select",{value:U.status,onChange:Be=>_({...U,status:Be.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"pending_verification",children:"Pending Verification"}),r.jsx("option",{value:"suspended",children:"Suspended"})]})]})]})]}),r.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>F(!1),className:"px-4 py-2 border border-slate-200 rounded-lg text-sm text-slate-600 hover:bg-slate-50",children:"Cancel"}),r.jsxs("button",{onClick:K,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 flex items-center gap-2",children:[r.jsx(md,{size:16})," Save Changes"]})]})]})}),z&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Add New User"}),r.jsx("button",{onClick:()=>I(!1),children:r.jsx(As,{size:20,className:"text-slate-400"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email Address"}),r.jsx("input",{type:"email",placeholder:"e.g. user@example.com",value:H.email,onChange:Be=>ee({...H,email:Be.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Role"}),r.jsx("select",{value:H.role,onChange:Be=>ee({...H,role:Be.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",children:w.map(Be=>r.jsx("option",{value:Be.value,children:Be.label},Be.value))}),!m&&r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Only super_admin can create admin users"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),r.jsxs("select",{value:H.status,onChange:Be=>ee({...H,status:Be.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"pending_verification",children:"Pending Verification"})]})]})]}),r.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ko,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("div",{className:"font-medium mb-1",children:"Automatic Email"}),r.jsx("div",{className:"text-xs text-blue-700",children:"A temporary password will be automatically generated and sent to the user's email."})]})]})})]}),r.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 border border-slate-200 rounded-lg text-sm text-slate-600 hover:bg-slate-50",children:"Cancel"}),r.jsxs("button",{onClick:pe,disabled:!H.email,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed flex items-center gap-2",children:[r.jsx(ln,{size:16})," Create User"]})]})]})})]})},Rz=()=>{const[t,e]=L.useState([]),[s,n]=L.useState(!0),[a,i]=L.useState(""),[c,A]=L.useState(1),d=10,[f,u]=L.useState(null),[p,x]=L.useState(null);L.useEffect(()=>{j()},[]);const m=(_,z)=>{u({type:_,message:z}),setTimeout(()=>u(null),3e3)},j=async()=>{try{const _=await fetch("/api/admin/email_verifications");if(_.ok){const z=await _.json();e(z)}}catch(_){console.error("Error fetching data:",_),m("error","Failed to fetch data")}finally{n(!1)}},w=_=>{x(_)},S=async()=>{if(p)try{(await fetch(`/api/admin/email_verifications/${p}`,{method:"DELETE"})).ok?(e(t.filter(z=>z.id!==p)),m("success","Record deleted successfully")):m("error","Failed to delete record")}catch(_){console.error(_),m("error","An error occurred")}finally{x(null)}},C=t.filter(_=>_.email.toLowerCase().includes(a.toLowerCase())||_.code.includes(a)),F=Math.ceil(C.length/d),U=C.slice((c-1)*d,c*d);return s?r.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-10 flex justify-center items-center h-full min-h-[400px]",children:r.jsx("div",{className:"text-slate-500 animate-pulse",children:"Loading verification data..."})}):r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col h-full relative",children:[f&&r.jsxs("div",{className:`fixed top-6 right-6 z-[100] flex items-center gap-3 px-4 py-3 rounded-xl shadow-xl border animate-in slide-in-from-top-4 duration-300 ${f.type==="success"?"bg-white border-green-100 text-green-800":"bg-white border-red-100 text-red-800"}`,children:[r.jsx("div",{className:`p-1 rounded-full ${f.type==="success"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:f.type==="success"?r.jsx(zn,{size:18}):r.jsx(rc,{size:18})}),r.jsx("p",{className:"text-sm font-medium",children:f.message}),r.jsx("button",{onClick:()=>u(null),className:"ml-2 text-slate-400 hover:text-slate-600",children:r.jsx(As,{size:16})})]}),r.jsxs("div",{className:"p-5 border-b border-slate-200 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Email Verifications"}),r.jsx("p",{className:"text-sm text-slate-500",children:"View and manage OTP codes."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"Search email...",className:"pl-9 pr-4 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64",value:a,onChange:_=>i(_.target.value)}),r.jsx(tl,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),r.jsx("button",{onClick:j,className:"p-2 border border-slate-200 rounded-lg hover:bg-slate-50 text-slate-600",children:r.jsx(yl,{size:16})})]})]}),r.jsx("div",{className:"overflow-x-auto min-h-[300px]",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:[r.jsx("th",{className:"p-4",children:"ID"}),r.jsx("th",{className:"p-4",children:"Email Address"}),r.jsx("th",{className:"p-4",children:"Code"}),r.jsx("th",{className:"p-4",children:"Status"}),r.jsx("th",{className:"p-4",children:"Created / Expires"}),r.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),r.jsx("tbody",{className:"text-sm divide-y divide-slate-100",children:U.map(_=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsxs("td",{className:"p-4 text-slate-500",children:["#",_.id]}),r.jsxs("td",{className:"p-4 font-medium text-slate-800 flex items-center gap-2",children:[r.jsx(ko,{size:14,className:"text-slate-400"})," ",_.email]}),r.jsx("td",{className:"p-4 font-mono text-slate-600 bg-slate-50 w-fit px-2 rounded border border-slate-100",children:_.code}),r.jsx("td",{className:"p-4",children:_.is_verified?r.jsxs("span",{className:"inline-flex items-center gap-1 text-green-600 bg-green-50 px-2 py-1 rounded-full text-xs font-medium",children:[r.jsx(zn,{size:12})," Verified"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 text-slate-500 bg-slate-100 px-2 py-1 rounded-full text-xs font-medium",children:[r.jsx(rc,{size:12})," Pending"]})}),r.jsxs("td",{className:"p-4 text-xs text-slate-500",children:[r.jsxs("div",{children:["C: ",new Date(_.created_at).toLocaleString()]}),r.jsxs("div",{className:"text-red-400",children:["E: ",new Date(_.expires_at).toLocaleString()]})]}),r.jsx("td",{className:"p-4 text-right",children:r.jsx("button",{onClick:()=>w(_.id),className:"text-slate-400 hover:text-red-600 transition-colors",title:"Delete",children:r.jsx(na,{size:16})})})]},_.id))})]})}),r.jsxs("div",{className:"p-4 border-t border-slate-200 flex justify-end gap-2",children:[r.jsx("button",{disabled:c===1,onClick:()=>A(_=>_-1),className:"px-3 py-1 border rounded disabled:opacity-50 hover:bg-slate-50 transition-colors",children:"Prev"}),r.jsxs("span",{className:"px-3 py-1 text-sm text-slate-500",children:["Page ",c," of ",F]}),r.jsx("button",{disabled:c===F,onClick:()=>A(_=>_+1),className:"px-3 py-1 border rounded disabled:opacity-50 hover:bg-slate-50 transition-colors",children:"Next"})]}),p&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200 p-6 border border-slate-200",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4 text-red-600",children:r.jsx(ga,{size:24})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Delete Verification?"}),r.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Are you sure you want to delete this verification record? This action cannot be undone."}),r.jsxs("div",{className:"flex gap-3 w-full",children:[r.jsx("button",{onClick:()=>x(null),className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 text-slate-600 text-sm font-semibold rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),r.jsx("button",{onClick:S,className:"flex-1 px-4 py-2.5 bg-red-600 text-white text-sm font-semibold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-500/20",children:"Delete"})]})]})})})]})},Hz=()=>{const[t,e]=L.useState([]),[s,n]=L.useState(!0),[a,i]=L.useState(""),[c,A]=L.useState(!1),[d,f]=L.useState("select"),[u,p]=L.useState(null),[x,m]=L.useState(""),[j,w]=L.useState([]),[S,C]=L.useState(!1),[F,U]=L.useState(null),[_,z]=L.useState(!1),I=L.useRef(null),[H,ee]=L.useState({name:"",address:"",rating:"",phone:"",website:"",price_level:"",lat:"",lng:""}),[$,ce]=L.useState(!1),[Q,q]=L.useState(null),[te,X]=L.useState(null);L.useEffect(()=>{W()},[]),L.useEffect(()=>{if(d!=="google"||x.length<2){w([]);return}return I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{se(x)},400),()=>{I.current&&clearTimeout(I.current)}},[x,d]);const Ae=(ne,pe)=>{q({type:ne,message:pe}),setTimeout(()=>q(null),3500)},W=async()=>{try{const ne=await fetch(`/api/admin/places?t=${Date.now()}`);if(ne.ok){const pe=await ne.json();e(pe.places||pe)}}catch(ne){console.error(ne),Ae("error","Failed to load places")}finally{n(!1)}},se=async ne=>{C(!0);try{const pe=await fetch(`/api/admin/places/google/search?q=${encodeURIComponent(ne)}`);if(pe.ok){const Ce=await pe.json();w(Ce)}}catch(pe){console.error(pe)}finally{C(!1)}},Z=async()=>{if(F){z(!0);try{const ne=await fetch("/api/admin/places/google/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({place_id:F.place_id})}),pe=await ne.json();ne.ok?(Ae("success",pe.is_new?"Place imported successfully!":"Place already exists"),P(),W()):Ae("error",pe.error||"Import failed")}catch{Ae("error","Network error during import")}finally{z(!1)}}},re=ne=>{var pe,Ce,Ue;p(ne),f("manual"),ee({name:ne.name,address:ne.address,rating:((pe=ne.rating)==null?void 0:pe.toString())||"",phone:ne.phone||"",website:ne.website||"",price_level:ne.price_level||"",lat:((Ce=ne.coordinates)==null?void 0:Ce.lat.toString())||"",lng:((Ue=ne.coordinates)==null?void 0:Ue.lng.toString())||""}),A(!0)},ve=async()=>{if(u){if(!H.name.trim()||!H.address.trim()){Ae("error","Name and Address are required");return}ce(!0);try{const ne={name:H.name.trim(),address:H.address.trim(),is_manual:!0,rating:H.rating?parseFloat(H.rating):null,phone:H.phone?H.phone.trim():null,website:H.website?H.website.trim():null,price_level:H.price_level||null};H.lat&&H.lng&&(ne.coordinates={lat:parseFloat(H.lat),lng:parseFloat(H.lng)});const pe=await fetch(`/api/admin/places/${u.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)});if(pe.ok)Ae("success","Place updated successfully!"),P(),W();else{const Ce=await pe.json();Ae("error",Ce.error||"Update failed")}}catch{Ae("error","Network error")}finally{ce(!1)}}},ae=async()=>{if(!H.name.trim()||!H.address.trim()){Ae("error","Name and Address are required");return}ce(!0);try{const ne={name:H.name.trim(),address:H.address.trim(),is_manual:!0};H.rating&&(ne.rating=parseFloat(H.rating)),H.phone&&(ne.phone=H.phone.trim()),H.website&&(ne.website=H.website.trim()),H.price_level&&(ne.price_level=H.price_level),H.lat&&H.lng&&(ne.coordinates={lat:parseFloat(H.lat),lng:parseFloat(H.lng)});const pe=await fetch("/api/admin/places/manual",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)}),Ce=await pe.json();pe.ok?(Ae("success","Place created successfully!"),P(),W()):Ae("error",Ce.error||"Creation failed")}catch{Ae("error","Network error")}finally{ce(!1)}},R=async()=>{if(te)try{(await fetch(`/api/admin/places/${te}`,{method:"DELETE"})).ok?(e(t.filter(pe=>pe.id!==te)),Ae("success","Place deleted successfully")):Ae("error","Failed to delete place")}catch{Ae("error","Network error")}finally{X(null)}},P=()=>{A(!1),f("select"),p(null),m(""),w([]),U(null),ee({name:"",address:"",rating:"",phone:"",website:"",price_level:"",lat:"",lng:""})},V=ne=>({"Food & Drink":"bg-orange-100 text-orange-700",Accommodation:"bg-purple-100 text-purple-700",Culture:"bg-indigo-100 text-indigo-700",Nature:"bg-emerald-100 text-emerald-700",Shopping:"bg-pink-100 text-pink-700",Landmark:"bg-amber-100 text-amber-700"})[ne||""]||"bg-slate-100 text-slate-600",K=t.filter(ne=>{var pe,Ce;return((pe=ne.name)==null?void 0:pe.toLowerCase().includes(a.toLowerCase()))||((Ce=ne.address)==null?void 0:Ce.toLowerCase().includes(a.toLowerCase()))});return s?r.jsx("div",{className:"flex items-center justify-center h-64 bg-white rounded-xl border border-slate-200",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx(Xt,{className:"w-8 h-8 animate-spin text-blue-500"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Loading places..."})]})}):r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col h-full relative",children:[Q&&r.jsxs("div",{className:`fixed top-6 right-6 z-[100] flex items-center gap-3 px-4 py-3 rounded-xl shadow-xl border animate-in slide-in-from-top-4 duration-300 ${Q.type==="success"?"bg-white border-emerald-200 text-emerald-800":"bg-white border-red-200 text-red-800"}`,children:[r.jsx("div",{className:`p-1.5 rounded-full ${Q.type==="success"?"bg-emerald-100":"bg-red-100"}`,children:Q.type==="success"?r.jsx(zn,{size:16}):r.jsx(ur,{size:16})}),r.jsx("p",{className:"text-sm font-medium",children:Q.message}),r.jsx("button",{onClick:()=>q(null),className:"ml-2 text-slate-400 hover:text-slate-600",children:r.jsx(As,{size:14})})]}),r.jsxs("div",{className:"p-5 border-b border-slate-200 flex justify-between items-center gap-4 bg-gradient-to-r from-slate-50 to-white",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(z4,{size:20,className:"text-blue-600"}),"Places Management"]}),r.jsxs("p",{className:"text-sm text-slate-500 mt-0.5",children:[t.length," destinations in database"]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"Search places...",className:"pl-9 pr-4 py-2.5 w-64 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",value:a,onChange:ne=>i(ne.target.value)}),r.jsx(tl,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"})]}),r.jsxs("button",{onClick:()=>A(!0),className:"px-4 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white text-sm font-semibold rounded-lg hover:from-blue-700 hover:to-blue-800 flex items-center gap-2 transition-all shadow-lg shadow-blue-500/25 active:scale-[0.98]",children:[r.jsx(ln,{size:16,strokeWidth:2.5})," Add Place"]})]})]}),r.jsx("div",{className:"overflow-x-auto flex-1",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50/80 border-b border-slate-200 text-xs font-semibold text-slate-500 uppercase tracking-wide",children:[r.jsx("th",{className:"p-4",children:"Place Name"}),r.jsx("th",{className:"p-4",children:"Address"}),r.jsx("th",{className:"p-4",children:"Category"}),r.jsx("th",{className:"p-4",children:"Rating"}),r.jsx("th",{className:"p-4",children:"Source"}),r.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),r.jsx("tbody",{className:"text-sm divide-y divide-slate-100",children:K.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:6,className:"p-12 text-center text-slate-400",children:[r.jsx(ra,{size:32,className:"mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"No places found"})]})}):K.map(ne=>{var pe;return r.jsxs("tr",{className:"hover:bg-blue-50/30 transition-colors group",children:[r.jsx("td",{className:"p-4",children:r.jsx("span",{className:"font-medium text-slate-800",children:ne.name})}),r.jsx("td",{className:"p-4 text-slate-500 max-w-xs",children:r.jsxs("div",{className:"flex items-center gap-2 truncate",children:[r.jsx(ra,{size:13,className:"shrink-0 text-slate-400"}),r.jsx("span",{className:"truncate",children:ne.address})]})}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${V(ne.category)}`,children:ne.category||"General"})}),r.jsx("td",{className:"p-4",children:ne.rating?r.jsxs("div",{className:"flex items-center gap-1.5 text-amber-500 font-medium",children:[r.jsx(yA,{size:13,fill:"currentColor"}),r.jsx("span",{children:ne.rating.toFixed(1)})]}):r.jsx("span",{className:"text-slate-300",children:""})}),r.jsx("td",{className:"p-4",children:ne.is_manual===!0||(pe=ne.google_place_id)!=null&&pe.startsWith("manual_")?r.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-slate-500 bg-slate-100 px-2 py-1 rounded",children:[r.jsx(i5,{size:11})," Manual"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[r.jsx(Gg,{size:11})," Google"]})}),r.jsx("td",{className:"p-4 text-right",children:r.jsxs("div",{className:"flex justify-end gap-1.5 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:()=>re(ne),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",children:r.jsx(rb,{size:14})}),r.jsx("button",{onClick:()=>X(ne.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",children:r.jsx(na,{size:14})})]})})]},ne.id)})})]})}),te&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200 p-6",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-14 h-14 bg-red-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(ga,{size:26,className:"text-red-600"})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Delete Place?"}),r.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"This action cannot be undone. The place will be permanently removed."}),r.jsxs("div",{className:"flex gap-3 w-full",children:[r.jsx("button",{onClick:()=>X(null),className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 text-slate-600 text-sm font-semibold rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),r.jsx("button",{onClick:R,className:"flex-1 px-4 py-2.5 bg-red-600 text-white text-sm font-semibold rounded-xl hover:bg-red-700 transition-all",children:"Delete"})]})]})})}),c&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-xl overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:u?"Edit Place":"Add New Place"}),r.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:u?"Update place details manually":"Choose how you want to add a place"})]}),r.jsx("button",{onClick:P,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-white/80 rounded-lg transition-all",children:r.jsx(As,{size:20})})]}),d==="select"&&!u&&r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>f("google"),className:"group relative p-5 rounded-xl border-2 border-slate-200 hover:border-blue-400 hover:bg-blue-50/50 transition-all text-left",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center mb-4 shadow-lg shadow-blue-500/25",children:r.jsx(Gg,{size:22,className:"text-white"})}),r.jsx("h4",{className:"font-semibold text-slate-800 mb-1",children:"Google Places"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Search and import from Google Maps with full details"}),r.jsx(ai,{size:18,className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-300 group-hover:text-blue-500 group-hover:translate-x-1 transition-all"})]}),r.jsxs("button",{onClick:()=>f("manual"),className:"group relative p-5 rounded-xl border-2 border-slate-200 hover:border-emerald-400 hover:bg-emerald-50/50 transition-all text-left",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center mb-4 shadow-lg shadow-emerald-500/25",children:r.jsx(i5,{size:22,className:"text-white"})}),r.jsx("h4",{className:"font-semibold text-slate-800 mb-1",children:"Manual Entry"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Enter place details manually without API"}),r.jsx(ai,{size:18,className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-300 group-hover:text-emerald-500 group-hover:translate-x-1 transition-all"})]})]})}),d==="google"&&r.jsxs("div",{className:"p-6",children:[r.jsx("button",{onClick:()=>f("select"),className:"text-sm text-slate-500 hover:text-slate-700 flex items-center gap-1 mb-4",children:" Back to options"}),r.jsxs("div",{className:"relative mb-4",children:[r.jsx("input",{type:"text",placeholder:"Search Google Places...",value:x,onChange:ne=>m(ne.target.value),className:"w-full pl-11 pr-4 py-3 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all",autoFocus:!0}),S?r.jsx(Xt,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-blue-500 animate-spin"}):r.jsx(tl,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"})]}),r.jsxs("div",{className:"max-h-72 overflow-y-auto space-y-2",children:[j.length===0&&x.length>=2&&!S&&r.jsx("p",{className:"text-center text-slate-400 py-8 text-sm",children:"No results found"}),j.map(ne=>r.jsx("button",{onClick:()=>U(ne),className:`w-full p-4 rounded-xl border-2 text-left transition-all ${(F==null?void 0:F.place_id)===ne.place_id?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-blue-300 hover:bg-slate-50"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${(F==null?void 0:F.place_id)===ne.place_id?"bg-blue-500 text-white":"bg-slate-100 text-slate-500"}`,children:r.jsx(ra,{size:18})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h5",{className:"font-medium text-slate-800 truncate",children:ne.name}),r.jsx("p",{className:"text-sm text-slate-500 truncate",children:ne.address}),r.jsxs("div",{className:"flex items-center gap-3 mt-1.5",children:[ne.rating&&r.jsxs("span",{className:"flex items-center gap-1 text-xs text-amber-600",children:[r.jsx(yA,{size:11,fill:"currentColor"})," ",ne.rating]}),ne.types[0]&&r.jsx("span",{className:"text-xs text-slate-400",children:ne.types[0].replace(/_/g," ")})]})]}),(F==null?void 0:F.place_id)===ne.place_id&&r.jsx(zn,{size:20,className:"text-blue-500 shrink-0"})]})},ne.place_id))]}),F&&r.jsx("button",{onClick:Z,disabled:_,className:"mt-4 w-full py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg shadow-blue-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:_?r.jsxs(r.Fragment,{children:[r.jsx(Xt,{size:18,className:"animate-spin"}),"Importing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Qn,{size:18}),'Import "',F.name,'"']})})]}),d==="manual"&&r.jsxs("div",{className:"p-6",children:[!u&&r.jsx("button",{onClick:()=>f("select"),className:"text-sm text-slate-500 hover:text-slate-700 flex items-center gap-1 mb-4",children:" Back to options"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:["Place Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",placeholder:"e.g. Petronas Twin Towers",value:H.name,onChange:ne=>ee({...H,name:ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:["Address ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",placeholder:"Full address",value:H.address,onChange:ne=>ee({...H,address:ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Rating"}),r.jsx("input",{type:"number",step:"0.1",min:"0",max:"5",placeholder:"0.0 - 5.0",value:H.rating,onChange:ne=>ee({...H,rating:ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Price Level"}),r.jsxs("select",{value:H.price_level,onChange:ne=>ee({...H,price_level:ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all bg-white",children:[r.jsx("option",{value:"",children:"Select..."}),r.jsx("option",{value:"Free",children:"Free"}),r.jsx("option",{value:"$",children:"$ Budget"}),r.jsx("option",{value:"$$",children:"$$ Moderate"}),r.jsx("option",{value:"$$$",children:"$$$ Expensive"}),r.jsx("option",{value:"$$$$",children:"$$$$ Luxury"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Phone"}),r.jsx("input",{type:"tel",placeholder:"+60 12-345 6789",value:H.phone,onChange:ne=>ee({...H,phone:ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:"Website"}),r.jsx("input",{type:"url",placeholder:"https://...",value:H.website,onChange:ne=>ee({...H,website:ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:["Coordinates ",r.jsx("span",{className:"text-slate-400 font-normal",children:"(optional)"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("input",{type:"number",step:"any",placeholder:"Latitude",value:H.lat,onChange:ne=>ee({...H,lat:ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all"}),r.jsx("input",{type:"number",step:"any",placeholder:"Longitude",value:H.lng,onChange:ne=>ee({...H,lng:ne.target.value}),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/20 focus:border-emerald-500 transition-all"})]})]}),r.jsx("button",{onClick:u?ve:ae,disabled:$||!H.name.trim()||!H.address.trim(),className:"mt-2 w-full py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white font-semibold rounded-xl hover:from-emerald-700 hover:to-teal-700 transition-all shadow-lg shadow-emerald-500/25 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:$?r.jsxs(r.Fragment,{children:[r.jsx(Xt,{size:18,className:"animate-spin"}),u?"Updating...":"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(md,{size:18}),u?"Update Place":"Save Place"]})})]})]})]})})]})},Pz=()=>{const[t,e]=L.useState([]),[s,n]=L.useState(!0);return L.useEffect(()=>{fetch("/api/admin/trip_items").then(a=>a.ok?a.json():[]).then(a=>e(a)).catch(console.error).finally(()=>n(!1))},[]),s?r.jsx("div",{className:"p-10 text-center text-slate-500",children:"Loading itinerary items..."}):r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col h-full",children:[r.jsxs("div",{className:"p-5 border-b border-slate-200",children:[r.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Trip Itinerary Items"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Granular view of all scheduled activities."})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs font-semibold text-slate-500 uppercase",children:[r.jsx("th",{className:"p-4",children:"Item ID"}),r.jsx("th",{className:"p-4",children:"Trip Ref"}),r.jsx("th",{className:"p-4",children:"Place / Activity"}),r.jsx("th",{className:"p-4",children:"Timing"}),r.jsx("th",{className:"p-4",children:"Notes"})]})}),r.jsx("tbody",{className:"text-sm divide-y divide-slate-100",children:t.map(a=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsxs("td",{className:"p-4 text-slate-400",children:["#",a.id]}),r.jsx("td",{className:"p-4",children:r.jsxs("span",{className:"flex items-center gap-1 text-blue-600 hover:underline cursor-pointer",children:[r.jsx(Cp,{size:12})," Trip #",a.trip_id]})}),r.jsxs("td",{className:"p-4 font-medium text-slate-800 flex items-center gap-2",children:[r.jsx(ra,{size:14,className:"text-purple-500"})," ",a.place_name]}),r.jsxs("td",{className:"p-4 text-slate-600",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(on,{size:12})," Day ",a.day_number]}),r.jsxs("div",{className:"text-xs text-slate-400",children:["Order: ",a.order_index]})]}),r.jsx("td",{className:"p-4 text-slate-500 italic truncate max-w-xs",children:a.notes||"-"})]},a.id))})]})})]})},zz=()=>{const[t,e]=L.useState([]),[s,n]=L.useState(!0),[a,i]=L.useState(""),[c,A]=L.useState(null),[d,f]=L.useState(null);L.useEffect(()=>{(async()=>{try{const w=await fetch("/api/admin/trips");w.ok&&e(await w.json())}catch(w){console.error(w)}finally{n(!1)}})()},[]);const u=(j,w)=>{A({type:j,message:w}),setTimeout(()=>A(null),3e3)},p=j=>{f(j)},x=async()=>{if(d)try{e(t.filter(j=>j.id!==d)),u("success","Trip deleted successfully")}catch{u("error","Failed to delete trip")}finally{f(null)}},m=t.filter(j=>j.title.toLowerCase().includes(a.toLowerCase()));return s?r.jsx("div",{className:"p-10 text-center text-slate-500",children:"Loading trips..."}):r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col h-full relative",children:[c&&r.jsxs("div",{className:`fixed top-6 right-6 z-[100] flex items-center gap-3 px-4 py-3 rounded-xl shadow-xl border animate-in slide-in-from-top-4 duration-300 ${c.type==="success"?"bg-white border-green-100 text-green-800":"bg-white border-red-100 text-red-800"}`,children:[r.jsx("div",{className:`p-1 rounded-full ${c.type==="success"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:c.type==="success"?r.jsx(zn,{size:18}):r.jsx(ur,{size:18})}),r.jsx("p",{className:"text-sm font-medium",children:c.message}),r.jsx("button",{onClick:()=>A(null),className:"ml-2 text-slate-400 hover:text-slate-600",children:r.jsx(As,{size:16})})]}),r.jsxs("div",{className:"p-5 border-b border-slate-200 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Trips"}),r.jsx("p",{className:"text-sm text-slate-500",children:"Overview of user travel plans."})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"Search trips...",className:"pl-9 pr-4 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",value:a,onChange:j=>i(j.target.value)}),r.jsx(tl,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200 text-xs font-semibold text-slate-500 uppercase",children:[r.jsx("th",{className:"p-4",children:"Trip Details"}),r.jsx("th",{className:"p-4",children:"User"}),r.jsx("th",{className:"p-4",children:"Dates"}),r.jsx("th",{className:"p-4",children:"Status"}),r.jsx("th",{className:"p-4",children:"Est. Budget"}),r.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),r.jsx("tbody",{className:"text-sm divide-y divide-slate-100",children:m.map(j=>r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsxs("td",{className:"p-4",children:[r.jsx("div",{className:"font-bold text-slate-800",children:j.title}),r.jsxs("div",{className:"text-xs text-slate-400",children:["ID: #",j.id]})]}),r.jsxs("td",{className:"p-4 text-slate-600 flex items-center gap-2",children:[r.jsx(ta,{size:14,className:"text-slate-400"})," ",j.user_email]}),r.jsxs("td",{className:"p-4 text-slate-500 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Mn,{size:12})," ",j.start_date]}),r.jsxs("div",{className:"pl-4",children:["to ",j.end_date]})]}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${j.status==="Completed"?"bg-green-100 text-green-700":j.status==="Cancelled"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:j.status})}),r.jsxs("td",{className:"p-4 font-mono text-slate-600",children:["$",j.total_expenses]}),r.jsxs("td",{className:"p-4 text-right",children:[r.jsx("button",{className:"text-slate-400 hover:text-blue-600 p-1 mr-1 transition-colors",children:r.jsx(yn,{size:16})}),r.jsx("button",{onClick:()=>p(j.id),className:"text-slate-400 hover:text-red-600 p-1 transition-colors",children:r.jsx(na,{size:16})})]})]},j.id))})]})}),d&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200 p-6 border border-slate-200",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4 text-red-600",children:r.jsx(ga,{size:24})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Delete Trip?"}),r.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Are you sure you want to delete this trip? This will remove all associated itinerary items and expenses."}),r.jsxs("div",{className:"flex gap-3 w-full",children:[r.jsx("button",{onClick:()=>f(null),className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 text-slate-600 text-sm font-semibold rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),r.jsx("button",{onClick:x,className:"flex-1 px-4 py-2.5 bg-red-600 text-white text-sm font-semibold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-500/20",children:"Delete"})]})]})})})]})},Kz=({user:t,onUpdateUser:e})=>{const[s,n]=L.useState({name:t.name,email:t.email||"alex.chen@example.com",avatarUrl:t.avatarUrl}),[a,i]=L.useState({currentPassword:"",newPassword:""}),[c,A]=L.useState("idle"),[d,f]=L.useState(""),[u,p]=L.useState(!0),[x,m]=L.useState(!0),[j,w]=L.useState(null),[S,C]=L.useState(!1),[F,U]=L.useState(!1),[_,z]=L.useState(null),I=L.useRef(null),H=(Q,q)=>{z({type:Q,message:q}),setTimeout(()=>z(null),3e3)},ee=async()=>{if(!a.currentPassword||!a.newPassword){A("error"),f("Please fill in both fields.");return}A("loading");try{const Q=await fetch(`${_e}/auth/change-password`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(a)}),q=await Q.json();Q.ok&&q.status==="success"?(A("success"),f("Password changed successfully!"),i({currentPassword:"",newPassword:""}),setTimeout(()=>{A("idle"),f("")},3e3),H("success","Password updated successfully")):(A("error"),f(q.message||"Failed to update password."))}catch{A("error"),f("Network error.")}},$=Q=>{var te;const q=(te=Q.target.files)==null?void 0:te[0];if(q){if(q.size>1048576){H("error","File is too large! Please upload an image smaller than 1MB."),Q.target.value="";return}w(q);const Ae=new FileReader;Ae.onloadend=()=>{n(W=>({...W,avatarUrl:Ae.result}))},Ae.readAsDataURL(q)}},ce=async()=>{C(!0);try{const Q=new FormData;Q.append("name",s.name),j&&Q.append("avatar",j);const q=await fetch(`${_e}/user/update-profile`,{method:"PUT",headers:{},credentials:"include",body:Q}),te=await q.json();q.ok?(U(!0),H("success","Profile updated successfully!"),setTimeout(()=>U(!1),3e3),te.user&&e(te.user),w(null)):H("error",te.message||"Update failed")}catch(Q){console.error("Upload error:",Q),H("error","Network error occurred")}finally{C(!1)}};return r.jsxs("div",{className:"p-6 md:p-8 w-full max-w-4xl mx-auto animate-fade-in-up relative",children:[_&&r.jsxs("div",{className:`fixed top-6 right-6 z-[100] flex items-center gap-3 px-4 py-3 rounded-xl shadow-xl border animate-in slide-in-from-top-4 duration-300 ${_.type==="success"?"bg-white border-green-100 text-green-800":"bg-white border-red-100 text-red-800"}`,children:[r.jsx("div",{className:`p-1 rounded-full ${_.type==="success"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:_.type==="success"?r.jsx(sa,{size:18}):r.jsx(ur,{size:18})}),r.jsx("p",{className:"text-sm font-medium",children:_.message}),r.jsx("button",{onClick:()=>z(null),className:"ml-2 text-slate-400 hover:text-slate-600",children:r.jsx(As,{size:16})})]}),r.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:r.jsx(ta,{className:"w-6 h-6 text-slate-600 dark:text-slate-300"})}),r.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight",children:"General Settings"})]}),r.jsxs("div",{className:"bg-white/60 dark:bg-slate-900/60 backdrop-blur-xl rounded-[2.5rem] p-8 shadow-sm border border-transparent hover:border-sky-300 dark:hover:border-indigo-500 transition-all duration-500 ease-out",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 mb-10 pb-10 border-b border-slate-200 dark:border-slate-800",children:[r.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var Q;return(Q=I.current)==null?void 0:Q.click()},children:[r.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-white dark:border-slate-800 shadow-xl ring-2 ring-slate-100 dark:ring-slate-700",children:r.jsx("img",{src:s.avatarUrl,alt:"Profile",className:"w-full h-full object-cover"})}),r.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:r.jsx(Xx,{className:"w-8 h-8 text-white"})}),r.jsx("input",{type:"file",ref:I,className:"hidden",accept:"image/*",onChange:$})]}),r.jsxs("div",{className:"text-center md:text-left",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Profile Photo"}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1 mb-4",children:"Click the image to upload a new photo. JPG, GIF or PNG."}),r.jsx("button",{onClick:()=>{var Q;return(Q=I.current)==null?void 0:Q.click()},className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-lg text-sm font-bold hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:"Change Photo"})]})]}),r.jsxs("div",{className:"space-y-6 max-w-2xl",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Personal Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Full Name"}),r.jsxs("div",{className:"relative",children:[r.jsx(ta,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",value:s.name,onChange:Q=>n({...s,name:Q.target.value}),className:"w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl py-3 pl-12 pr-4 font-medium outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 transition-all"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(ko,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"email",value:s.email,onChange:Q=>n({...s,email:Q.target.value}),className:"w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl py-3 pl-12 pr-4 font-medium outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 transition-all"})]})]})]}),r.jsxs("div",{className:"pt-6 mt-6 border-t border-slate-200 dark:border-slate-800",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:"Security"}),t.authProvider==="google"||!t.email?r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4 flex items-center gap-3 text-slate-500 border border-slate-200 dark:border-slate-700",children:[r.jsx(jo,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm",children:"You are logged in via Google. Password change is not applicable."})]}):r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/30 rounded-2xl p-6 border border-slate-200 dark:border-slate-700/50",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Current Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Vl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"password",placeholder:"",value:a.currentPassword,onChange:Q=>i({...a,currentPassword:Q.target.value}),className:"w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl py-3 pl-10 pr-4 text-sm font-medium outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 transition-all"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Vl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"password",placeholder:"Min 8 characters",value:a.newPassword,onChange:Q=>i({...a,newPassword:Q.target.value}),className:"w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl py-3 pl-10 pr-4 text-sm font-medium outline-none focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 transition-all"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[c==="error"&&r.jsx("p",{className:"text-xs font-bold text-red-500",children:d}),c==="success"&&r.jsx("p",{className:"text-xs font-bold text-emerald-500",children:d})]}),r.jsx("button",{onClick:ee,disabled:c==="loading",className:"px-5 py-2 bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-white rounded-xl text-xs font-bold hover:bg-slate-50 dark:hover:bg-slate-600 transition-all shadow-sm flex items-center gap-2",children:c==="loading"?r.jsx(Xt,{className:"w-3 h-3 animate-spin"}):"Update Password"})]})]})]}),r.jsx("div",{className:"pt-6 mt-6 flex justify-end",children:r.jsxs("button",{onClick:ce,disabled:S,className:"px-8 py-3 bg-gradient-to-r from-sky-500 to-indigo-600 hover:from-sky-600 hover:to-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-sky-500/20 transition-all flex items-center gap-2 active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed",children:[S?r.jsx(Xt,{className:"w-5 h-5 animate-spin"}):F?r.jsx(sa,{className:"w-5 h-5"}):r.jsx(md,{className:"w-5 h-5"}),F?"Saved":S?"Saving...":"Save Changes"]})})]})]})]})},Vz=({onNavigate:t})=>{const[e,s]=L.useState([]),[n,a]=L.useState(!0),[i,c]=L.useState(""),[A,d]=L.useState(!1),[f,u]=L.useState(null),[p,x]=L.useState(""),[m,j]=L.useState(null),[w,S]=L.useState(null),[C,F]=L.useState(null),[U,_]=L.useState({title:"",category:"",status:"Published",content:"",coverImage:null}),z=["Travel Tips","Destinations","Food & Dining","Accommodation","Events & News","Safety Guides"],I=(re,ve)=>{S({message:re,type:ve}),setTimeout(()=>S(null),3e3)},H=async()=>{try{const re=await fetch("/api/articles/list");if(re.ok){const ve=await re.json();s(ve)}}catch(re){console.error("Failed to fetch articles",re),I("Failed to load articles","error")}finally{a(!1)}};L.useEffect(()=>{H()},[]);const ee=re=>{const{name:ve,value:ae}=re.target;_(R=>({...R,[ve]:ae}))},$=re=>{_(ve=>({...ve,content:re}))},ce=re=>{re.target.files&&re.target.files[0]&&_(ve=>({...ve,coverImage:re.target.files[0]}))},Q=()=>{u(null),j(null),_({title:"",category:"",status:"Published",content:"",coverImage:null}),d(!0)},q=re=>{u(re.id),j(re.coverImage),_({title:re.title,category:re.category,status:re.status,content:re.content||"",coverImage:null}),d(!0)},te=re=>{F(re)},X=async()=>{if(C)try{(await fetch(`/api/articles/${C}`,{method:"DELETE"})).ok?(I("Article deleted successfully","success"),H()):I("Failed to delete article","error")}catch(re){console.error("Error deleting:",re),I("Error occurred while deleting","error")}finally{F(null)}},Ae=async re=>{re.preventDefault();const ve=new FormData;ve.append("title",U.title),ve.append("category",U.category),ve.append("status",U.status),ve.append("content",U.content),U.coverImage&&ve.append("coverImage",U.coverImage);try{const ae=f?`/api/articles/${f}`:"/api/articles/create",P=await fetch(ae,{method:f?"PUT":"POST",body:ve}),V=await P.json();P.ok?(I(f?"Article Updated!":"Article Created!","success"),d(!1),H(),u(null),_({title:"",category:"",status:"Published",content:"",coverImage:null})):I(V.message||"Operation failed","error")}catch(ae){console.error("Error saving article",ae),I("Network error occurred","error")}},W=e.filter(re=>{var R,P;const ve=((R=re.title)==null?void 0:R.toLowerCase().includes(p.toLowerCase()))||((P=re.category)==null?void 0:P.toLowerCase().includes(p.toLowerCase())),ae=!i||re.category===i;return ve&&ae}),se=re=>re?re.startsWith("http")?re:`http://127.0.0.1:5000${re}`:null,Z=re=>re&&new DOMParser().parseFromString(re,"text/html").body.textContent||"";return r.jsxs("div",{className:"p-6 space-y-6",children:[w&&r.jsxs("div",{className:`fixed top-6 right-6 z-[100] flex items-center gap-3 px-5 py-3 rounded-xl shadow-2xl text-white text-sm font-medium animate-in slide-in-from-right-10 duration-300
          ${w.type==="success"?"bg-gradient-to-r from-emerald-500 to-teal-500":"bg-gradient-to-r from-red-500 to-rose-500"}`,children:[w.type==="success"?r.jsx(sa,{size:18}):r.jsx(rc,{size:18}),w.message]}),r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-slate-800 flex items-center gap-3",children:[r.jsx(Kl,{className:"w-8 h-8 text-blue-500"}),"Info Website Manager"]}),r.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:"Manage and publish articles for your public-facing site."})]}),r.jsxs("button",{onClick:Q,className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-sm font-semibold rounded-xl hover:shadow-lg hover:shadow-blue-500/30 transition-all duration-200 active:scale-95",children:[r.jsx(ln,{size:18}),"New Article"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center text-blue-500",children:r.jsx(Kl,{size:24})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.length}),r.jsx("p",{className:"text-xs text-slate-500 font-medium uppercase tracking-wider",children:"Total Articles"})]})]}),r.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-xl flex items-center justify-center text-green-500",children:r.jsx(sa,{size:24})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.filter(re=>re.status==="Published").length}),r.jsx("p",{className:"text-xs text-slate-500 font-medium uppercase tracking-wider",children:"Published"})]})]}),r.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-amber-50 rounded-xl flex items-center justify-center text-amber-500",children:r.jsx(V4,{size:24})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-slate-800",children:e.reduce((re,ve)=>re+(ve.views||0),0).toLocaleString()}),r.jsx("p",{className:"text-xs text-slate-500 font-medium uppercase tracking-wider",children:"Total Views"})]})]})]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[r.jsxs("div",{className:"relative flex-1 w-full",children:[r.jsx(tl,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-400",size:18}),r.jsx("input",{type:"text",placeholder:"Search by title...",value:p,onChange:re=>x(re.target.value),className:`w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm\r
            focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all`})]}),r.jsxs("select",{value:i,onChange:re=>c(re.target.value),className:`w-full md:w-56 px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm\r
          focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all cursor-pointer`,children:[r.jsx("option",{value:"",children:"All Categories"}),z.map(re=>r.jsx("option",{value:re,children:re},re))]})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50/50",children:[r.jsx("th",{className:"text-left px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Article"}),r.jsx("th",{className:"text-left px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"text-left px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"text-left px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Views"}),r.jsx("th",{className:"text-left px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:n?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400",children:"Loading..."})}):W.length>0?W.map(re=>r.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-12 bg-slate-100 rounded-lg overflow-hidden shrink-0",children:re.coverImage?r.jsx("img",{src:se(re.coverImage),alt:"",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300",children:r.jsx(Kl,{size:20})})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-800 line-clamp-1",children:re.title}),r.jsxs("p",{className:"text-xs text-slate-400 line-clamp-1",children:[Z(re.content).substring(0,60),"..."]})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 text-xs font-bold uppercase tracking-wider rounded-full
                      ${re.status==="Published"?"bg-green-100 text-green-700":re.status==="Draft"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:re.status})}),r.jsx("td",{className:"px-6 py-4 text-sm text-slate-500",children:re.date}),r.jsxs("td",{className:"px-6 py-4 text-sm text-slate-500 font-medium flex items-center gap-1.5",children:[r.jsx(yn,{size:14}),re.views]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>q(re),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit",children:r.jsx(Wf,{size:16})}),r.jsx("button",{onClick:()=>te(re.id),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete",children:r.jsx(na,{size:16})})]})})]},re.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(tl,{size:32,className:"mb-2 opacity-20"}),r.jsx("p",{children:"No articles found matching your criteria."})]})})})})]})})}),C&&r.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200 p-6",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4 text-red-600",children:r.jsx(ga,{size:24})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Delete Article?"}),r.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Are you sure you want to delete this article? This action cannot be undone."}),r.jsxs("div",{className:"flex gap-3 w-full",children:[r.jsx("button",{onClick:()=>F(null),className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 text-slate-600 text-sm font-semibold rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),r.jsx("button",{onClick:X,className:"flex-1 px-4 py-2.5 bg-red-600 text-white text-sm font-semibold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-500/20",children:"Delete"})]})]})})}),A&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl overflow-hidden animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:f?"Edit Article":"Create New Article"}),r.jsx("p",{className:"text-xs text-slate-500",children:"Fill in the details to publish content to your info site."})]}),r.jsx("button",{onClick:()=>d(!1),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-200/50 rounded-full transition-all",children:r.jsx(As,{size:20})})]}),r.jsxs("form",{onSubmit:Ae,children:[r.jsxs("div",{className:"p-6 space-y-5 max-h-[70vh] overflow-y-auto custom-scrollbar",children:[r.jsxs("div",{className:"group relative h-48 bg-slate-50 rounded-xl border-2 border-dashed border-slate-200 flex flex-col items-center justify-center hover:border-blue-400 hover:bg-blue-50/30 transition-all cursor-pointer overflow-hidden",children:[U.coverImage?r.jsx("img",{src:URL.createObjectURL(U.coverImage),className:"w-full h-full object-cover",alt:"New Preview"}):m?r.jsx("img",{src:se(m),className:"w-full h-full object-cover",alt:"Existing"}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-3 bg-white rounded-full shadow-sm text-slate-400 mb-2 group-hover:scale-110 transition-transform",children:r.jsx(Pf,{size:24})}),r.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Click to upload cover image"}),r.jsx("p",{className:"text-xs text-slate-400",children:"JPG, PNG or WEBP (Max. 2MB)"})]}),r.jsx("input",{type:"file",onChange:ce,accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Title"}),r.jsx("input",{type:"text",name:"title",placeholder:"e.g. Exploring New Frontiers",value:U.title,onChange:ee,required:!0,className:"w-full px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Category"}),r.jsxs("select",{name:"category",value:U.category,onChange:ee,required:!0,className:"w-full px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all cursor-pointer appearance-none",children:[r.jsx("option",{value:"",disabled:!0,children:"Select a category"}),z.map(re=>r.jsx("option",{value:re,children:re},re))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Status"}),r.jsxs("select",{name:"status",value:U.status,onChange:ee,className:"w-full px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all cursor-pointer",children:[r.jsx("option",{value:"Published",children:"Published"}),r.jsx("option",{value:"Draft",children:"Draft"}),r.jsx("option",{value:"Archived",children:"Archived"})]})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Content"}),r.jsx(W3,{content:U.content,onChange:$}),r.jsx("p",{className:"text-xs text-slate-400 mt-1.5",children:"Use the toolbar above to format your content with headings, lists, colors, and more."})]})]})]}),r.jsxs("div",{className:"px-6 py-4 border-t border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-xs font-medium",children:[r.jsx(ur,{size:14}),"Changes will be visible immediately."]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 bg-white border border-slate-200 text-slate-600 text-sm font-semibold rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),r.jsxs("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white text-sm font-semibold rounded-xl hover:bg-blue-700 transition-all flex items-center gap-2 shadow-lg shadow-blue-500/20",children:[r.jsx(md,{size:18}),f?"Save Changes":"Publish Article"]})]})]})]})]})})]})},bg={SUPER_ADMIN:"super_admin",ADMIN:"admin",USER:"user"},$z=()=>{const[t,e]=L.useState([]),[s,n]=L.useState(null),[a,i]=L.useState([]),[c,A]=L.useState(null),[d,f]=L.useState(""),[u,p]=L.useState(!1),[x,m]=L.useState(!1),[j,w]=L.useState(bg.ADMIN),[S,C]=L.useState(!1),[F,U]=L.useState(null),[_,z]=L.useState(null),[I,H]=L.useState("preset"),[ee,$]=L.useState("monthly"),[ce,Q]=L.useState("30"),[q,te]=L.useState("0.00"),[X,Ae]=L.useState("");L.useEffect(()=>{W(),se()},[]);const W=async()=>{try{const V=await fetch(`${_e}/api/admin-subscription/statistics`,{credentials:"include"});if(V.ok){const K=await V.json();A(K),K.currentAdminRole&&(w(K.currentAdminRole),C(K.currentAdminRole===bg.SUPER_ADMIN))}}catch(V){console.error("Error fetching statistics:",V)}},se=async(V="")=>{try{p(!0);const K=V?`${_e}/api/admin-subscription/users?search=${encodeURIComponent(V)}`:`${_e}/api/admin-subscription/users`,ne=await fetch(K,{credentials:"include"});if(ne.ok){const pe=await ne.json();e(pe.users),pe.currentAdminRole&&(w(pe.currentAdminRole),C(pe.canManageAdmins||!1))}else ne.status===403&&R("error","Admin access required")}catch(K){console.error("Error fetching users:",K),R("error","Failed to load users")}finally{p(!1)}},Z=async V=>{try{const K=await fetch(`${_e}/api/admin-subscription/users/${V}/subscriptions`,{credentials:"include"});if(K.ok){const ne=await K.json();i(ne.subscriptions),n(ne.user)}else K.status===403&&R("error","Permission denied: Cannot access admin users")}catch(K){console.error("Error fetching user subscriptions:",K)}},re=async()=>{if(s)try{p(!0);const V={user_id:s.id,subscription_type:I,amount:parseFloat(q)||0};I==="preset"?V.plan_type=ee:V.custom_days=parseInt(ce);const K=await fetch(`${_e}/api/admin-subscription/add-subscription`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(V)}),ne=await K.json();K.ok?(R("success","Subscription added successfully!"),m(!1),Z(s.id),W(),se(d),H("preset"),$("monthly"),Q("30"),te("0.00")):K.status===403?R("error","Permission denied: Cannot modify admin users"):R("error",ne.error||"Failed to add subscription")}catch{R("error","Network error occurred")}finally{p(!1)}},ve=V=>{z(V)},ae=async()=>{if(_)try{const V=await fetch(`${_e}/api/admin-subscription/cancel-subscription`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({user_id:_})});V.ok?(R("success","Subscription cancelled successfully"),(s==null?void 0:s.id)===_&&Z(_),se(d),W()):V.status===403?R("error","Permission denied: Cannot modify admin users"):R("error","Failed to cancel subscription")}catch{R("error","Network error occurred")}finally{z(null)}},R=(V,K)=>{U({type:V,text:K}),setTimeout(()=>U(null),5e3)},P=V=>{const K=(V==null?void 0:V.toLowerCase())||"user";return K===bg.SUPER_ADMIN?r.jsx("span",{className:"px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 text-xs font-medium rounded-full",children:"Super Admin"}):K===bg.ADMIN?r.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-xs font-medium rounded-full",children:"Admin"}):null};return r.jsxs("div",{className:"p-6 md:p-8 w-full max-w-7xl mx-auto relative",children:[F&&r.jsxs("div",{className:`fixed top-6 right-6 z-[100] flex items-center gap-3 px-4 py-3 rounded-xl shadow-xl border animate-in slide-in-from-top-4 duration-300 ${F.type==="success"?"bg-white border-emerald-100 text-emerald-800 dark:bg-slate-800 dark:border-emerald-900/50 dark:text-emerald-400":F.type==="info"?"bg-white border-blue-100 text-blue-800 dark:bg-slate-800 dark:border-blue-900/50 dark:text-blue-400":"bg-white border-red-100 text-red-800 dark:bg-slate-800 dark:border-red-900/50 dark:text-red-400"}`,children:[r.jsx("div",{className:`p-1 rounded-full ${F.type==="success"?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30":F.type==="info"?"bg-blue-100 text-blue-600 dark:bg-blue-900/30":"bg-red-100 text-red-600 dark:bg-red-900/30"}`,children:F.type==="success"?r.jsx(ea,{className:"w-4 h-4"}):F.type==="info"?r.jsx(Pa,{className:"w-4 h-4"}):r.jsx(ur,{className:"w-4 h-4"})}),r.jsx("p",{className:"text-sm font-medium",children:F.text}),r.jsx("button",{onClick:()=>U(null),className:"ml-2 opacity-50 hover:opacity-100 transition-opacity",children:r.jsx(As,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Subscription Management"}),r.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage user subscriptions and premium access"})]}),r.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-lg border mb-6 ${S?"bg-purple-50 border-purple-200 dark:bg-purple-900/20 dark:border-purple-800":"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800"}`,children:[S?r.jsx(Hf,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}):r.jsx(jo,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:`text-sm font-medium ${S?"text-purple-800 dark:text-purple-300":"text-blue-800 dark:text-blue-300"}`,children:S?"Super Admin Access":"Admin Access"}),r.jsx("span",{className:`text-sm ml-2 ${S?"text-purple-600 dark:text-purple-400":"text-blue-600 dark:text-blue-400"}`,children:S?" You can view and manage subscriptions for all users":" You can only view and manage subscriptions for regular users"})]}),r.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${S?"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300":"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300"}`,children:j})]}),c&&r.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Gl,{className:"w-5 h-5 text-blue-600"}),r.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Total Users"})]}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:c.total_users}),!S&&r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Regular users only"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-6 border border-amber-200 dark:border-amber-800",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(wo,{className:"w-5 h-5 text-amber-600"}),r.jsx("span",{className:"text-sm text-amber-700 dark:text-amber-400",children:"Premium Users"})]}),r.jsx("p",{className:"text-3xl font-bold text-amber-900 dark:text-amber-100",children:c.premium_users}),r.jsxs("p",{className:"text-sm text-amber-600 dark:text-amber-500 mt-1",children:[c.premium_percentage,"% of total"]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(ib,{className:"w-5 h-5 text-emerald-600"}),r.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Monthly Revenue"})]}),r.jsxs("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:["RM ",c.monthly_revenue.toFixed(2)]})]}),r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 border border-slate-200 dark:border-slate-800",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(on,{className:"w-5 h-5 text-orange-600"}),r.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Expiring Soon"})]}),r.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:c.expiring_soon}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Within 7 days"})]})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx(tl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Search users by email or name...",value:d,onChange:V=>{f(V.target.value),se(V.target.value)},className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]})}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[r.jsx("h2",{className:"font-bold text-lg text-slate-900 dark:text-white",children:"Users"}),r.jsxs("span",{className:"text-sm text-slate-500",children:[t.length," ",t.length===1?"user":"users"]})]}),r.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-800 max-h-[600px] overflow-y-auto",children:u?r.jsx("div",{className:"p-8 text-center",children:r.jsx(Xt,{className:"w-6 h-6 animate-spin mx-auto text-slate-400"})}):t.length===0?r.jsx("div",{className:"p-8 text-center text-slate-500",children:"No users found"}):t.map(V=>r.jsx("div",{onClick:()=>Z(V.id),className:`p-4 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors ${(s==null?void 0:s.id)===V.id?"bg-amber-50 dark:bg-amber-900/20":""}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:V.full_name||"No name"}),V.is_premium&&r.jsx(wo,{className:"w-4 h-4 text-amber-600"}),P(V.role)]}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:V.email}),V.subscription_end_date&&r.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:["Expires: ",new Date(V.subscription_end_date).toLocaleDateString()]})]}),V.is_premium&&r.jsx("span",{className:"px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 text-xs font-medium rounded-full",children:"Premium"})]})},V.id))})]}),r.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:s?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-800",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"font-bold text-lg text-slate-900 dark:text-white",children:s.full_name}),P(s.role)]}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:s.email})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:()=>m(!0),className:"px-3 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[r.jsx(ln,{className:"w-4 h-4"}),"Add"]}),s.is_premium&&r.jsxs("button",{onClick:()=>ve(s.id),className:"px-3 py-2 bg-red-100 hover:bg-red-200 text-red-700 dark:bg-red-900/30 dark:hover:bg-red-900/50 dark:text-red-400 rounded-lg flex items-center gap-2 text-sm font-medium transition-colors",children:[r.jsx(v6,{className:"w-4 h-4"}),"Cancel"]})]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Status:"}),s.is_premium?r.jsxs("span",{className:"flex items-center gap-1 text-amber-600",children:[r.jsx(wo,{className:"w-4 h-4"})," Premium"]}):r.jsx("span",{className:"text-slate-500",children:"Free"})]}),s.subscription_end_date&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Expires:"}),r.jsx("span",{className:"text-slate-900 dark:text-white",children:new Date(s.subscription_end_date).toLocaleDateString()})]})]})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"font-medium text-slate-900 dark:text-white mb-3",children:"Subscription History"}),r.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:a.length===0?r.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No subscription history"}):a.map(V=>r.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-slate-900 dark:text-white capitalize",children:[V.plan_type," Plan"]}),r.jsx("p",{className:"text-xs text-slate-500",children:V.order_reference})]}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${V.status==="active"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":V.status==="cancelled"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400"}`,children:V.status})]}),r.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400 space-y-1",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Amount:"})," RM ",V.amount.toFixed(2)]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Start:"})," ",new Date(V.start_date).toLocaleDateString()]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"End:"})," ",V.end_date?new Date(V.end_date).toLocaleDateString():"Lifetime"]})]})]},V.id))})]})]}):r.jsxs("div",{className:"p-12 text-center text-slate-500",children:[r.jsx(Gl,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),r.jsx("p",{children:"Select a user to view details"})]})})]}),_&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200 p-6 border border-slate-200 dark:border-slate-800",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mb-4 text-red-600 dark:text-red-400",children:r.jsx(ga,{size:24})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2",children:"Cancel Subscription?"}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6",children:"Are you sure you want to cancel this user's premium status? This action will immediately revert them to a free user."}),r.jsxs("div",{className:"flex gap-3 w-full",children:[r.jsx("button",{onClick:()=>z(null),className:"flex-1 px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 text-sm font-semibold rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition-all",children:"Keep It"}),r.jsx("button",{onClick:ae,className:"flex-1 px-4 py-2.5 bg-red-600 text-white text-sm font-semibold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-500/20",children:"Yes, Cancel"})]})]})})}),x&&s&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-800",children:[r.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Add Subscription"}),r.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:r.jsx(As,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:s.full_name}),P(s.role)]}),r.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:s.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-900 dark:text-white mb-2",children:"Subscription Type"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("button",{onClick:()=>H("preset"),className:`p-3 rounded-lg border-2 transition-all ${I==="preset"?"border-amber-500 bg-amber-50 dark:bg-amber-900/20":"border-slate-200 dark:border-slate-700"}`,children:[r.jsx(Qh,{className:"w-5 h-5 mx-auto mb-1 text-amber-600"}),r.jsx("p",{className:"text-sm font-medium",children:"Preset Plans"})]}),r.jsxs("button",{onClick:()=>H("custom"),className:`p-3 rounded-lg border-2 transition-all ${I==="custom"?"border-amber-500 bg-amber-50 dark:bg-amber-900/20":"border-slate-200 dark:border-slate-700"}`,children:[r.jsx(Mn,{className:"w-5 h-5 mx-auto mb-1 text-amber-600"}),r.jsx("p",{className:"text-sm font-medium",children:"Custom Days"})]})]})]}),I==="preset"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-900 dark:text-white mb-2",children:"Select Plan"}),r.jsx("div",{className:"space-y-2",children:[{value:"monthly",label:"Monthly",days:"30 days",price:"RM 29.90"},{value:"yearly",label:"Yearly",days:"365 days",price:"RM 299.00"},{value:"lifetime",label:"Lifetime",days:"Forever",price:"RM 999.00"}].map(V=>r.jsx("button",{onClick:()=>$(V.value),className:`w-full p-3 rounded-lg border-2 text-left transition-all ${ee===V.value?"border-amber-500 bg-amber-50 dark:bg-amber-900/20":"border-slate-200 dark:border-slate-700 hover:border-amber-300"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:V.label}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:V.days})]}),r.jsx("p",{className:"text-sm font-medium text-amber-600",children:V.price})]})},V.value))})]}),I==="custom"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-900 dark:text-white mb-2",children:"Number of Days"}),r.jsx("input",{type:"number",min:"1",value:ce,onChange:V=>Q(V.target.value),className:"w-full px-4 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"e.g., 7, 14, 30..."}),r.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Subscription will expire in ",ce||"0"," days"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-900 dark:text-white mb-2",children:"Amount (RM)"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:q,onChange:V=>te(V.target.value),className:"w-full px-4 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"0.00"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Set to 0.00 for free/gifted subscriptions"})]}),r.jsx("button",{onClick:re,disabled:u,className:"w-full py-3 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white font-bold rounded-lg transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:u?r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"w-5 h-5 animate-spin"}),"Adding..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ln,{className:"w-5 h-5"}),"Add Subscription"]})})]})]})})]})},Gz=()=>{const[t,e]=L.useState([]),[s,n]=L.useState(!0),[a,i]=L.useState(!1),[c,A]=L.useState(null),[d,f]=L.useState({title:"",description:"",link:"",status:"active",priority:1}),[u,p]=L.useState(null),[x,m]=L.useState(""),[j,w]=L.useState(null),[S,C]=L.useState(null);L.useEffect(()=>{U()},[]);const F=(Q,q)=>{w({type:Q,message:q}),setTimeout(()=>w(null),3e3)},U=async()=>{try{const Q=await fetch(`${_e}/api/advertisements/list`,{credentials:"include"});if(Q.ok){const q=await Q.json();e(q)}}catch(Q){console.error("Error fetching advertisements:",Q),F("error","Failed to fetch advertisements")}finally{n(!1)}},_=Q=>{var te;const q=(te=Q.target.files)==null?void 0:te[0];if(q){p(q);const X=new FileReader;X.onloadend=()=>{m(X.result)},X.readAsDataURL(q)}},z=async Q=>{Q.preventDefault();const q=new FormData;q.append("title",d.title),q.append("description",d.description),q.append("link",d.link),q.append("status",d.status),q.append("priority",d.priority.toString()),u&&q.append("image",u);try{const te=c?`${_e}/api/advertisements/${c.id}`:`${_e}/api/advertisements/create`;(await fetch(te,{method:c?"PUT":"POST",credentials:"include",body:q})).ok?(F("success",c?"Advertisement updated successfully!":"Advertisement created successfully!"),await U(),$()):F("error","Failed to save advertisement.")}catch(te){console.error("Error saving advertisement:",te),F("error","Network error occurred.")}},I=Q=>{C(Q)},H=async()=>{if(S)try{(await fetch(`${_e}/api/advertisements/${S}`,{method:"DELETE",credentials:"include"})).ok?(F("success","Advertisement deleted successfully"),await U()):F("error","Failed to delete advertisement")}catch(Q){console.error("Error deleting advertisement:",Q),F("error","Error occurred while deleting")}finally{C(null)}},ee=Q=>{A(Q),f({title:Q.title,description:Q.description,link:Q.link,status:Q.status,priority:Q.priority}),m(Q.imageUrl?`${_e}${Q.imageUrl}`:""),i(!0)},$=()=>{i(!1),A(null),f({title:"",description:"",link:"",status:"active",priority:0}),p(null),m("")},ce=async Q=>{const q=Q.status==="active"?"paused":"active",te=new FormData;te.append("title",Q.title),te.append("description",Q.description),te.append("link",Q.link),te.append("status",q),te.append("priority",Q.priority.toString());try{(await fetch(`${_e}/api/advertisements/${Q.id}`,{method:"PUT",credentials:"include",body:te})).ok?(F("success",`Advertisement ${q==="active"?"activated":"paused"}`),await U()):F("error","Failed to update status")}catch(X){console.error("Error toggling advertisement status:",X),F("error","Network error")}};return s?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.jsxs("div",{className:"space-y-6 relative animate-in fade-in slide-in-from-bottom-2 duration-500",children:[j&&r.jsxs("div",{className:`fixed top-6 right-6 z-[100] flex items-center gap-3 px-4 py-3 rounded-xl shadow-xl border animate-in slide-in-from-top-4 duration-300 ${j.type==="success"?"bg-white border-green-100 text-green-800":"bg-white border-red-100 text-red-800"}`,children:[r.jsx("div",{className:`p-1 rounded-full ${j.type==="success"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:j.type==="success"?r.jsx(zn,{size:18}):r.jsx(ur,{size:18})}),r.jsx("p",{className:"text-sm font-medium",children:j.message}),r.jsx("button",{onClick:()=>w(null),className:"ml-2 text-slate-400 hover:text-slate-600",children:r.jsx(As,{size:16})})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Advertisement Management"}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Manage advertisements shown to non-premium users"})]}),r.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-lg shadow-blue-500/20 active:scale-95",children:[r.jsx(ln,{size:20}),"Create Advertisement"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-50 text-blue-600 rounded-lg",children:r.jsx(ib,{size:20})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-500",children:"Total Ads"}),r.jsx("p",{className:"text-2xl font-bold text-slate-800",children:t.length})]})]})}),r.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-50 text-green-600 rounded-lg",children:r.jsx(Ev,{size:20})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-500",children:"Active"}),r.jsx("p",{className:"text-2xl font-bold text-slate-800",children:t.filter(Q=>Q.status==="active").length})]})]})}),r.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-50 text-purple-600 rounded-lg",children:r.jsx(yn,{size:20})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-500",children:"Total Views"}),r.jsx("p",{className:"text-2xl font-bold text-slate-800",children:t.reduce((Q,q)=>Q+q.views,0).toLocaleString()})]})]})}),r.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-orange-50 text-orange-600 rounded-lg",children:r.jsx(c5,{size:20})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-500",children:"Total Clicks"}),r.jsx("p",{className:"text-2xl font-bold text-slate-800",children:t.reduce((Q,q)=>Q+q.clicks,0).toLocaleString()})]})]})})]}),r.jsx("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-600",children:"Advertisement"}),r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-600",children:"Link"}),r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-600",children:"Status"}),r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-600",children:"Priority"}),r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-600",children:"Stats"}),r.jsx("th",{className:"text-left p-4 text-sm font-semibold text-slate-600",children:"Actions"})]})}),r.jsx("tbody",{children:t.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"text-center p-8 text-slate-500",children:"No advertisements yet. Create your first one!"})}):t.map(Q=>r.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[Q.imageUrl&&r.jsx("img",{src:`${_e}${Q.imageUrl}`,alt:Q.title,className:"w-16 h-16 object-cover rounded-lg border border-slate-200"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-800",children:Q.title}),r.jsx("p",{className:"text-sm text-slate-500 line-clamp-1",children:Q.description})]})]})}),r.jsx("td",{className:"p-4",children:r.jsxs("a",{href:Q.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center gap-1 text-sm",children:["View Link",r.jsx(Cp,{size:14})]})}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold ${Q.status==="active"?"bg-green-100 text-green-700":Q.status==="paused"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:Q.status.charAt(0).toUpperCase()+Q.status.slice(1)})}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:"text-slate-700 font-medium",children:Q.priority})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"text-sm space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[r.jsx(yn,{size:14,className:"text-slate-400"}),r.jsxs("span",{children:[Q.views.toLocaleString()," views"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[r.jsx(c5,{size:14,className:"text-slate-400"}),r.jsxs("span",{children:[Q.clicks.toLocaleString()," clicks"]})]}),r.jsxs("div",{className:"text-slate-500 text-xs mt-1",children:["CTR: ",Q.ctr,"%"]})]})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>ce(Q),className:`p-2 rounded-lg transition-colors ${Q.status==="active"?"hover:bg-amber-50 text-amber-600":"hover:bg-green-50 text-green-600"}`,title:Q.status==="active"?"Pause":"Activate",children:Q.status==="active"?r.jsx(J4,{size:18}):r.jsx(Ev,{size:18})}),r.jsx("button",{onClick:()=>ee(Q),className:"p-2 hover:bg-blue-50 text-blue-600 rounded-lg transition-colors",title:"Edit",children:r.jsx(Wf,{size:18})}),r.jsx("button",{onClick:()=>I(Q.id),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",title:"Delete",children:r.jsx(na,{size:18})})]})})]},Q.id))})]})}),S&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-in zoom-in-95 duration-200 p-6",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4 text-red-600",children:r.jsx(ga,{size:24})}),r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-2",children:"Delete Advertisement?"}),r.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Are you sure you want to delete this ad? This action cannot be undone and tracking data will be lost."}),r.jsxs("div",{className:"flex gap-3 w-full",children:[r.jsx("button",{onClick:()=>C(null),className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 text-slate-600 text-sm font-semibold rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),r.jsx("button",{onClick:H,className:"flex-1 px-4 py-2.5 bg-red-600 text-white text-sm font-semibold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-500/20",children:"Delete"})]})]})})}),a&&r.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-in fade-in duration-300",children:r.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",children:[r.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-800",children:c?"Edit Advertisement":"Create New Advertisement"}),r.jsx("button",{onClick:$,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-200/50 rounded-full transition-all",children:r.jsx(As,{size:20})})]}),r.jsxs("form",{onSubmit:z,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Title *"}),r.jsx("input",{type:"text",required:!0,value:d.title,onChange:Q=>f({...d,title:Q.target.value}),className:"w-full px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all",placeholder:"Enter advertisement title"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Description"}),r.jsx("textarea",{value:d.description,onChange:Q=>f({...d,description:Q.target.value}),className:"w-full px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all resize-none",rows:3,placeholder:"Enter advertisement description"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Target Link *"}),r.jsxs("div",{className:"relative",children:[r.jsx(Cp,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),r.jsx("input",{type:"url",required:!0,value:d.link,onChange:Q=>f({...d,link:Q.target.value}),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all",placeholder:"https://example.com"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Status"}),r.jsxs("select",{value:d.status,onChange:Q=>f({...d,status:Q.target.value}),className:"w-full px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"paused",children:"Paused"}),r.jsx("option",{value:"expired",children:"Expired"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Priority"}),r.jsx("input",{type:"number",value:d.priority,onChange:Q=>f({...d,priority:parseInt(Q.target.value)||0}),className:"w-full px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/10 focus:border-blue-500 outline-none transition-all",placeholder:"0",min:"1"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Advertisement Image"}),r.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-4 hover:bg-slate-50 transition-colors",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:_,className:`block w-full text-sm text-slate-500\r
                      file:mr-4 file:py-2 file:px-4\r
                      file:rounded-full file:border-0\r
                      file:text-sm file:font-semibold\r
                      file:bg-blue-50 file:text-blue-700\r
                      hover:file:bg-blue-100\r
                    `}),x&&r.jsx("div",{className:"mt-4 relative rounded-lg overflow-hidden border border-slate-200",children:r.jsx("img",{src:x,alt:"Preview",className:"w-full h-48 object-cover"})})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:$,className:"flex-1 px-4 py-2.5 border border-slate-200 text-slate-700 font-semibold rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 text-white font-semibold rounded-xl hover:bg-blue-700 transition-colors shadow-lg shadow-blue-500/20",children:c?"Update Advertisement":"Create Advertisement"})]})]})]})})]})},qz=()=>{var R;const[t,e]=L.useState([]),[s,n]=L.useState([]),[a,i]=L.useState([]),[c,A]=L.useState(!0),[d,f]=L.useState("configs"),[u,p]=L.useState(null),[x,m]=L.useState(!1),[j,w]=L.useState(null),[S,C]=L.useState(null),[F,U]=L.useState(!1),[_,z]=L.useState(null),[I,H]=L.useState(null),ee=L.useRef(null);L.useEffect(()=>{$()},[]),L.useEffect(()=>{const P=()=>H(null);return I!==null&&document.addEventListener("click",P),()=>document.removeEventListener("click",P)},[I]);const $=async()=>{try{A(!0);const[P,V,K]=await Promise.all([fetch(`${_e}/api/admin/login-hero/configs`,{credentials:"include"}),fetch(`${_e}/api/admin/login-hero/images`,{credentials:"include"}),fetch(`${_e}/api/admin/login-hero/available-places`,{credentials:"include"})]),ne=await P.json(),pe=await V.json(),Ce=await K.json();ne.status==="success"&&e(ne.configs),pe.status==="success"&&n(pe.images),Ce.status==="success"&&i(Ce.places)}catch{w("Failed to load data")}finally{A(!1)}},ce=()=>{m(!0),p({displayMode:"single",transitionInterval:5,autoPlay:!0,imageSource:"url",imagesConfig:[{url:"",alt:""}],title:null,subtitle:null,description:null,enableGradient:!0,isActive:!1})},Q=async()=>{if(u)try{A(!0),w(null);const P=x?`${_e}/api/admin/login-hero/configs`:`${_e}/api/admin/login-hero/configs/${u.id}`,ne=await(await fetch(P,{method:x?"POST":"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(u)})).json();ne.status==="success"?(C(x?"Configuration created!":"Configuration updated!"),p(null),m(!1),$()):w(ne.message)}catch{w("Failed to save configuration")}finally{A(!1)}},q=async P=>{try{A(!0),(await(await fetch(`${_e}/api/admin/login-hero/configs/${P}/activate`,{method:"POST",credentials:"include"})).json()).status==="success"&&(C("Configuration activated!"),$())}catch{w("Failed to activate configuration")}finally{A(!1)}},te=async P=>{if(confirm("Are you sure you want to delete this configuration?"))try{A(!0),(await(await fetch(`${_e}/api/admin/login-hero/configs/${P}`,{method:"DELETE",credentials:"include"})).json()).status==="success"&&(C("Configuration deleted!"),$())}catch{w("Failed to delete configuration")}finally{A(!1)}},X=()=>{if(!u)return;const P=u.imageSource==="url"?{url:"",alt:""}:u.imageSource==="database"?{image_id:null}:{place_id:null};p({...u,imagesConfig:[...u.imagesConfig||[],P]})},Ae=P=>{if(!u)return;const V=[...u.imagesConfig||[]];V.splice(P,1),p({...u,imagesConfig:V})},W=(P,V)=>{if(!u)return;const K=[...u.imagesConfig||[]];K[P]={...K[P],...V},p({...u,imagesConfig:K})},se=async P=>{var ne;const V=(ne=P.target.files)==null?void 0:ne[0];if(!V)return;if(!["image/png","image/jpeg","image/jpg","image/gif","image/webp"].includes(V.type)){w("Invalid file type. Please upload PNG, JPG, GIF, or WebP images.");return}if(V.size>5*1024*1024){w("File size too large. Maximum 5MB allowed.");return}try{U(!0),w(null);const pe=new FormData;pe.append("file",V),pe.append("title",V.name.replace(/\.[^/.]+$/,"")),pe.append("altText",V.name);const Ue=await(await fetch(`${_e}/api/admin/login-hero/images/upload`,{method:"POST",credentials:"include",body:pe})).json();Ue.status==="success"?(C("Image uploaded successfully!"),$(),ee.current&&(ee.current.value="")):w(Ue.message)}catch{w("Failed to upload image")}finally{U(!1)}},Z=async(P,V)=>{try{A(!0),w(null);const ne=await(await fetch(`${_e}/api/admin/login-hero/images/from-place`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({placeId:P,title:V,altText:V})})).json();ne.status==="success"?(C("Image added from place!"),$()):w(ne.message)}catch{w("Failed to add image from place")}finally{A(!1)}},re=async P=>{if(confirm("Delete this image from library?"))try{A(!0),(await(await fetch(`${_e}/api/admin/login-hero/images/${P}`,{method:"DELETE",credentials:"include"})).json()).status==="success"&&(C("Image deleted from library!"),$())}catch{w("Failed to delete image")}finally{A(!1)}},ve=async(P,V)=>{try{A(!0),(await(await fetch(`${_e}/api/admin/login-hero/images/${P}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({isActive:!V})})).json()).status==="success"&&(C(`Image ${V?"deactivated":"activated"}!`),$())}catch{w("Failed to update image status")}finally{A(!1)}},ae=(P,V,K)=>{const ne=V.startsWith("/")?`${_e}${V}`:V,pe=260,Ce=180,Ue=15;let Ne=P.clientX+Ue,Ie=P.clientY+Ue;Ne+pe>window.innerWidth&&(Ne=P.clientX-pe-Ue),Ie+Ce>window.innerHeight&&(Ie=P.clientY-Ce-Ue),z({url:ne,title:K,x:Ne,y:Ie})};return c&&t.length===0?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Xt,{className:"w-8 h-8 animate-spin text-blue-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Login Background Management"}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Configure the hero section of the login page"})]}),d==="configs"&&r.jsxs("button",{onClick:ce,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(ln,{size:20}),"New Configuration"]})]}),j&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3 text-red-700",children:[r.jsx(ur,{size:20}),j]}),S&&r.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-3 text-green-700",children:[r.jsx(ea,{size:20}),S]}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-200",children:[r.jsxs("button",{onClick:()=>f("configs"),className:`px-4 py-2 font-medium transition-colors ${d==="configs"?"text-blue-600 border-b-2 border-blue-600":"text-slate-600 hover:text-slate-800"}`,children:[r.jsx(nb,{className:"w-4 h-4 inline mr-2"}),"Configurations"]}),r.jsxs("button",{onClick:()=>f("images"),className:`px-4 py-2 font-medium transition-colors ${d==="images"?"text-blue-600 border-b-2 border-blue-600":"text-slate-600 hover:text-slate-800"}`,children:[r.jsx(Rf,{className:"w-4 h-4 inline mr-2"}),"Image Library"]})]}),d==="configs"?r.jsxs("div",{className:"space-y-4",children:[u&&r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:x?"Create New Configuration":"Edit Configuration"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Display Mode"}),r.jsxs("select",{value:u.displayMode,onChange:P=>p({...u,displayMode:P.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"single",children:"Single Image"}),r.jsx("option",{value:"carousel",children:"Carousel"}),r.jsx("option",{value:"fade",children:"Fade Transition"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Image Source"}),r.jsxs("select",{value:u.imageSource,onChange:P=>p({...u,imageSource:P.target.value,imagesConfig:[]}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"url",children:"External URL - Direct image links"}),r.jsx("option",{value:"database",children:"Image Library - Uploaded or saved images"}),r.jsx("option",{value:"places",children:"Places - Images from Places database"})]}),r.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:[u.imageSource==="url"&&" Enter direct image URLs (e.g., from Unsplash, Pexels)",u.imageSource==="database"&&" Select from your uploaded images or images added from Places in the Image Library",u.imageSource==="places"&&" Directly select images from Places database (loaded via proxy API)"]})]}),u.displayMode!=="single"&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Transition Interval (seconds)"}),r.jsx("input",{type:"number",min:"1",max:"60",value:u.transitionInterval,onChange:P=>p({...u,transitionInterval:parseInt(P.target.value)}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Auto Play"}),r.jsxs("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u.autoPlay,onChange:P=>p({...u,autoPlay:P.target.checked}),className:"w-5 h-5 text-blue-600 border-slate-300 rounded focus:ring-2 focus:ring-blue-500"}),r.jsx("span",{className:"ml-2 text-sm text-slate-700",children:"Enable"})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Images"}),r.jsxs("button",{onClick:X,className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[r.jsx(ln,{size:16}),"Add Image"]})]}),r.jsx("div",{className:"space-y-3",children:(R=u.imagesConfig)==null?void 0:R.map((P,V)=>{var K,ne;return r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg relative",children:[u.imageSource==="url"&&r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"text",placeholder:"Image URL",value:P.url||"",onChange:pe=>W(V,{url:pe.target.value}),className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg text-sm"}),r.jsx("input",{type:"text",placeholder:"Alt text",value:P.alt||"",onChange:pe=>W(V,{alt:pe.target.value}),className:"w-32 px-3 py-2 border border-slate-200 rounded-lg text-sm"})]}),u.imageSource==="database"&&r.jsxs("div",{className:"flex-1 relative",children:[r.jsxs("div",{onClick:pe=>{pe.stopPropagation(),H(I===V?null:V)},className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm cursor-pointer flex items-center justify-between hover:border-blue-400 transition-colors",children:[r.jsx("span",{className:P.image_id?"text-slate-800 truncate":"text-slate-400",children:P.image_id?((K=s.find(pe=>pe.id===P.image_id))==null?void 0:K.title)||"Unknown Image":"Select an image from library"}),r.jsx(Of,{size:16,className:"text-slate-500"})]}),I===V&&r.jsxs("div",{className:"absolute z-50 top-full left-0 right-0 mt-1 max-h-60 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-xl py-1",children:[r.jsx("div",{onClick:()=>{W(V,{image_id:null}),H(null)},className:"px-3 py-2 text-sm text-slate-500 hover:bg-slate-50 cursor-pointer",children:"Select an image from library"}),s.filter(pe=>pe.isActive).map(pe=>{var Ce;return r.jsxs("div",{onClick:()=>{W(V,{image_id:pe.id}),H(null)},onMouseEnter:Ue=>ae(Ue,pe.imageUrl,pe.title),onMouseLeave:()=>z(null),className:`px-3 py-2 text-sm cursor-pointer flex items-center justify-between ${P.image_id===pe.id?"bg-blue-50 text-blue-700":"text-slate-700 hover:bg-slate-50"}`,children:[r.jsx("span",{className:"truncate",children:pe.title}),r.jsx("span",{className:"text-xs text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded ml-2",children:(Ce=pe.source)==null?void 0:Ce.toUpperCase()})]},pe.id)})]})]}),u.imageSource==="places"&&r.jsxs("div",{className:"flex-1 relative",children:[r.jsxs("div",{onClick:pe=>{pe.stopPropagation(),H(I===V?null:V)},className:"w-full px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm cursor-pointer flex items-center justify-between hover:border-blue-400 transition-colors",children:[r.jsx("span",{className:P.place_id?"text-slate-800 truncate":"text-slate-400",children:P.place_id?((ne=a.find(pe=>pe.id===P.place_id))==null?void 0:ne.name)||"Unknown Place":"Select a place"}),r.jsx(Of,{size:16,className:"text-slate-500"})]}),I===V&&r.jsxs("div",{className:"absolute z-50 top-full left-0 right-0 mt-1 max-h-60 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-xl py-1",children:[r.jsx("div",{onClick:()=>{W(V,{place_id:null}),H(null)},className:"px-3 py-2 text-sm text-slate-500 hover:bg-slate-50 cursor-pointer",children:"Select a place"}),a.map(pe=>r.jsx("div",{onClick:()=>{W(V,{place_id:pe.id}),H(null)},onMouseEnter:Ce=>ae(Ce,`${_e}/proxy_image?ref=${pe.photoUrl}`,pe.name),onMouseLeave:()=>z(null),className:`px-3 py-2 text-sm cursor-pointer flex items-center justify-between ${P.place_id===pe.id?"bg-blue-50 text-blue-700":"text-slate-700 hover:bg-slate-50"}`,children:r.jsx("span",{className:"truncate",children:pe.name})},pe.id))]})]}),r.jsx("button",{onClick:()=>Ae(V),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx(na,{size:16})})]},V)})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Title (Optional - overrides default)"}),r.jsx("input",{type:"text",value:u.title||"",onChange:P=>p({...u,title:P.target.value}),placeholder:"Plan your next great adventure...",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description (Optional)"}),r.jsx("textarea",{value:u.description||"",onChange:P=>p({...u,description:P.target.value}),placeholder:"Join thousands of travelers...",rows:3,className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u.enableGradient,onChange:P=>p({...u,enableGradient:P.target.checked}),className:"w-5 h-5 text-blue-600 border-slate-300 rounded focus:ring-2 focus:ring-blue-500"}),r.jsx("span",{className:"ml-2 text-sm text-slate-700",children:"Enable Gradient Overlay"})]}),r.jsxs("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u.isActive,onChange:P=>p({...u,isActive:P.target.checked}),className:"w-5 h-5 text-blue-600 border-slate-300 rounded focus:ring-2 focus:ring-blue-500"}),r.jsx("span",{className:"ml-2 text-sm text-slate-700",children:"Set as Active"})]})]}),r.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-200",children:[r.jsxs("button",{onClick:Q,disabled:c,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[r.jsx(md,{size:18}),c?"Saving...":"Save Configuration"]}),r.jsx("button",{onClick:()=>{p(null),m(!1)},className:"px-6 py-2 border border-slate-200 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"})]})]})]}),r.jsx("div",{className:"grid gap-4",children:t.map(P=>r.jsx("div",{className:`bg-white rounded-xl border p-6 shadow-sm ${P.isActive?"border-green-500 ring-2 ring-green-100":"border-slate-200"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsxs("h3",{className:"text-lg font-bold text-slate-800",children:[P.displayMode.charAt(0).toUpperCase()+P.displayMode.slice(1)," ","Mode"]}),P.isActive&&r.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:"ACTIVE"})]}),r.jsxs("div",{className:"space-y-1 text-sm text-slate-600",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Source:"})," ",P.imageSource.toUpperCase()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Images:"})," ",P.imagesConfig.length]}),P.displayMode!=="single"&&r.jsxs("p",{children:[r.jsx("strong",{children:"Interval:"})," ",P.transitionInterval,"s"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Updated:"})," ",P.updatedAt]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[!P.isActive&&r.jsx("button",{onClick:()=>q(P.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Activate",children:r.jsx(yn,{size:18})}),r.jsx("button",{onClick:()=>{p(P),m(!1)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:r.jsx(Oy,{size:18})}),r.jsx("button",{onClick:()=>te(P.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",disabled:P.isActive,children:r.jsx(na,{size:18})})]})]})},P.id))})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Hero Image Library"}),r.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Upload images or add from Places to reuse in configurations"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{ref:ee,type:"file",accept:"image/png,image/jpeg,image/jpg,image/gif,image/webp",onChange:se,className:"hidden"}),r.jsx("button",{onClick:()=>{var P;return(P=ee.current)==null?void 0:P.click()},disabled:F,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:F?r.jsxs(r.Fragment,{children:[r.jsx(Xt,{size:20,className:"animate-spin"}),"Uploading..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Pf,{size:20}),"Upload Image"]})})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.length===0?r.jsxs("div",{className:"col-span-full p-8 text-center text-slate-500",children:[r.jsx(Rf,{size:48,className:"mx-auto mb-4 text-slate-300"}),r.jsx("p",{children:"No images in library yet"}),r.jsx("p",{className:"text-sm mt-2",children:"Add images to reuse them in configurations"})]}):s.map(P=>{var V;return r.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"relative h-48 bg-slate-100",children:[r.jsx("img",{src:P.imageUrl.startsWith("/")?`${_e}${P.imageUrl}`:P.imageUrl,alt:P.altText,className:"w-full h-full object-cover",onError:K=>{K.target.src="https://via.placeholder.com/400x300?text=Image+Not+Available"}}),!P.isActive&&r.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 bg-red-500 text-white text-xs font-bold rounded",children:"INACTIVE"}),r.jsxs("div",{className:"absolute top-2 left-2 px-2 py-1 bg-blue-600 text-white text-xs font-bold rounded flex items-center gap-1",children:[P.source==="places"&&r.jsx(ra,{size:12}),P.source==="external"&&r.jsx(tb,{size:12}),P.source==="uploaded"&&r.jsx(Pf,{size:12}),((V=P.source)==null?void 0:V.toUpperCase())||"UNKNOWN"]})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("h4",{className:"font-bold text-slate-800 mb-1",children:P.title}),r.jsx("p",{className:"text-xs text-slate-500 mb-2 line-clamp-2",children:P.description||P.altText}),P.place&&r.jsxs("p",{className:"text-xs text-blue-600 mb-2",children:[r.jsx(ra,{size:10,className:"inline mr-1"}),P.place.name]}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsxs("button",{onClick:()=>re(P.id),className:"flex-1 py-2 px-3 text-sm bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors",children:[r.jsx(na,{size:14,className:"inline mr-1"}),"Delete"]}),r.jsx("button",{onClick:()=>ve(P.id,P.isActive),className:`flex-1 py-2 px-3 text-sm rounded-lg transition-colors ${P.isActive?"bg-slate-50 text-slate-600 hover:bg-slate-100":"bg-green-50 text-green-600 hover:bg-green-100"}`,children:P.isActive?r.jsxs(r.Fragment,{children:[r.jsx(xA,{size:14,className:"inline mr-1"}),"Deactivate"]}):r.jsxs(r.Fragment,{children:[r.jsx(yn,{size:14,className:"inline mr-1"}),"Activate"]})})]})]})]},P.id)})}),a.length>0&&r.jsxs("div",{className:"mt-8",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Quick Add from Places"}),r.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Add place images to your library with one click"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3",children:a.slice(0,12).map(P=>r.jsxs("button",{onClick:()=>{confirm(`Add "${P.name}" to image library?`)&&Z(P.id,P.name)},onMouseEnter:V=>ae(V,`${_e}/proxy_image?ref=${P.photoUrl}`,P.name),onMouseLeave:()=>z(null),disabled:F||c,className:"relative group rounded-lg overflow-hidden border-2 border-slate-200 hover:border-blue-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("div",{className:"aspect-square bg-slate-100",children:r.jsx("img",{src:`${_e}/proxy_image?ref=${P.photoUrl}`,alt:P.name,className:"w-full h-full object-cover",onError:V=>{V.target.style.display="none"}})}),r.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:r.jsx(ln,{size:32,className:"text-white"})}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-2",children:r.jsx("p",{className:"text-white text-xs font-medium truncate",children:P.name})})]},P.id))})]})]}),_&&r.jsxs("div",{className:"fixed z-[9999] bg-white rounded-lg shadow-2xl border border-slate-200 overflow-hidden pointer-events-none transition-all duration-150",style:{top:_.y,left:_.x,width:"260px"},children:[r.jsx("div",{className:"aspect-video w-full bg-slate-100 relative",children:r.jsx("img",{src:_.url,alt:"Preview",className:"w-full h-full object-cover",onError:P=>{P.target.src="https://via.placeholder.com/260x146?text=Preview+Error"}})}),r.jsx("div",{className:"p-2 bg-white",children:r.jsx("p",{className:"text-xs font-bold text-slate-800 truncate",children:_.title})})]})]})},mh=`${_e}/api/notifications`,gh={getTabs:async(t="all")=>(await fetch(`${mh}/admin/tabs?status=${t}`,{credentials:"include"})).json(),createTab:async t=>(await fetch(`${mh}/admin/tabs`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json(),updateTab:async(t,e)=>(await fetch(`${mh}/admin/tabs/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)})).json(),deleteTab:async t=>(await fetch(`${mh}/admin/tabs/${t}`,{method:"DELETE",credentials:"include"})).json(),sendNotification:async t=>(await fetch(`${mh}/admin/send`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).json(),getNotifications:async()=>(await fetch(`${mh}/admin/list`,{credentials:"include"})).json(),getStats:async()=>(await fetch(`${mh}/admin/stats`,{credentials:"include"})).json()},Yz=()=>{const[t,e]=L.useState("overview"),[s,n]=L.useState([]),[a,i]=L.useState([]),[c,A]=L.useState(null),[d,f]=L.useState(!0),[u,p]=L.useState(!1),[x,m]=L.useState(null);L.useEffect(()=>{j()},[]);const j=async()=>{f(!0);try{const[I,H,ee]=await Promise.all([gh.getTabs(),gh.getNotifications(),gh.getStats()]);I.success&&n(I.tabs||[]),H.success&&i(H.notifications||[]),ee.success&&A(ee.stats)}catch(I){console.error("Failed to load data:",I)}f(!1)},w=async I=>{if(!confirm("Tab"))return;(await gh.deleteTab(I)).success&&n(s.filter(ee=>ee.id!==I))},S=()=>r.jsx("div",{className:"flex gap-1 p-1 bg-slate-100 dark:bg-slate-800 rounded-xl mb-6",children:[{key:"overview",label:"Overview",icon:V4},{key:"tabs",label:"Content Tabs",icon:Kl},{key:"send",label:"Send Notification",icon:vu},{key:"history",label:"History",icon:on}].map(({key:I,label:H,icon:ee})=>r.jsxs("button",{onClick:()=>e(I),className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg text-sm font-medium transition-all ${t===I?"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"}`,children:[r.jsx(ee,{size:16}),r.jsx("span",{className:"hidden sm:inline",children:H})]},I))}),C=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Total Tabs",value:(c==null?void 0:c.totalTabs)||0,icon:Kl,color:"blue"},{label:"Active Tabs",value:(c==null?void 0:c.activeTabs)||0,icon:zn,color:"green"},{label:"Total Sent",value:(c==null?void 0:c.totalNotifications)||0,icon:vu,color:"purple"},{label:"This Week",value:(c==null?void 0:c.recentNotifications)||0,icon:Mn,color:"orange"}].map(({label:I,value:H,icon:ee,color:$})=>r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-5 border border-slate-200 dark:border-slate-700",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl bg-${$}-100 dark:bg-${$}-900/30 flex items-center justify-center mb-3`,children:r.jsx(ee,{className:`text-${$}-600 dark:text-${$}-400`,size:20})}),r.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:H}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:I})]},I))}),(c==null?void 0:c.topTabs)&&c.topTabs.length>0&&r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 border border-slate-200 dark:border-slate-700",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[r.jsx(yn,{size:20}),"Most Viewed Tabs"]}),r.jsx("div",{className:"space-y-3",children:c.topTabs.map((I,H)=>r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 dark:border-slate-700 last:border-0",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${H===0?"bg-yellow-100 text-yellow-700":H===1?"bg-slate-200 text-slate-600":H===2?"bg-orange-100 text-orange-700":"bg-slate-100 text-slate-500"}`,children:H+1}),r.jsx("span",{className:"text-slate-800 dark:text-slate-200",children:I.title})]}),r.jsxs("span",{className:"text-sm text-slate-500",children:[I.views," views"]})]},I.id))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>{m(null),p(!0)},className:"flex items-center gap-4 p-5 bg-gradient-to-r from-blue-500 to-blue-600 rounded-2xl text-white hover:from-blue-600 hover:to-blue-700 transition-all group",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(ln,{size:24})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-semibold",children:"Create New Tab"}),r.jsx("p",{className:"text-sm text-blue-100",children:"Build announcement content"})]}),r.jsx(ai,{className:"ml-auto opacity-50 group-hover:opacity-100 group-hover:translate-x-1 transition-all"})]}),r.jsxs("button",{onClick:()=>e("send"),className:"flex items-center gap-4 p-5 bg-gradient-to-r from-purple-500 to-purple-600 rounded-2xl text-white hover:from-purple-600 hover:to-purple-700 transition-all group",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(vA,{size:24})}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"font-semibold",children:"Send Notification"}),r.jsx("p",{className:"text-sm text-purple-100",children:"Broadcast to users"})]}),r.jsx(ai,{className:"ml-auto opacity-50 group-hover:opacity-100 group-hover:translate-x-1 transition-all"})]})]})]}),F=()=>r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Content Tabs"}),r.jsxs("button",{onClick:()=>{m(null),p(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors",children:[r.jsx(ln,{size:16}),"New Tab"]})]}),s.length===0?r.jsxs("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800/50 rounded-2xl",children:[r.jsx(Kl,{className:"mx-auto text-slate-300 dark:text-slate-600 mb-4",size:48}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No content tabs yet"}),r.jsx("button",{onClick:()=>{m(null),p(!0)},className:"mt-4 text-blue-600 hover:underline",children:"Create your first tab"})]}):r.jsx("div",{className:"grid gap-4",children:s.map(I=>r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-5 border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all",children:r.jsxs("div",{className:"flex items-start gap-4",children:[I.coverImage?r.jsx("img",{src:I.coverImage,alt:"",className:"w-20 h-20 rounded-xl object-cover"}):r.jsx("div",{className:"w-20 h-20 rounded-xl bg-slate-100 dark:bg-slate-700 flex items-center justify-center",children:r.jsx(Kl,{className:"text-slate-400",size:24})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white truncate",children:I.title}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${I.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":I.status==="draft"?"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300":I.status==="scheduled"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":"bg-slate-100 text-slate-500"}`,children:I.status})]}),I.subtitle&&r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2 truncate",children:I.subtitle}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(yn,{size:12})," ",I.views]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(d5,{size:12})," ",I.targetAudience]}),r.jsx("span",{children:I.createdAt})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>{m(I),p(!0)},className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",children:r.jsx(Wf,{size:16})}),r.jsx("button",{onClick:()=>w(I.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",children:r.jsx(na,{size:16})})]})]})},I.id))})]}),U=()=>{const[I,H]=L.useState({sendType:"broadcast",title:"",text:"",type:"info",icon:"",tabId:"",targetAudience:"all",targetUserIds:"",sendEmail:!1}),[ee,$]=L.useState(!1),[ce,Q]=L.useState(null),q=async()=>{if(!I.text.trim()){alert("Please enter notification text");return}$(!0),Q(null);try{const te={...I,tabId:I.tabId?parseInt(I.tabId):null,targetUserIds:I.targetUserIds?I.targetUserIds.split(",").map(Ae=>parseInt(Ae.trim())).filter(Ae=>!isNaN(Ae)):[],sendEmail:I.sendEmail},X=await gh.sendNotification(te);Q({success:X.success,message:X.message||X.error}),X.success&&(H({...I,title:"",text:"",sendEmail:!1}),j())}catch{Q({success:!1,message:"Failed to send notification"})}$(!1)};return r.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 border border-slate-200 dark:border-slate-700",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[r.jsx(vA,{size:20}),"Send Notification"]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Send Type"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"broadcast",label:"Broadcast All",icon:vA},{value:"targeted",label:"By Audience",icon:Gl},{value:"single",label:"Specific Users",icon:d5}].map(({value:te,label:X,icon:Ae})=>r.jsxs("button",{onClick:()=>H({...I,sendType:te}),className:`p-3 rounded-xl border-2 text-sm font-medium transition-all flex flex-col items-center gap-2 ${I.sendType===te?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"border-slate-200 dark:border-slate-700 hover:border-slate-300 text-slate-600 dark:text-slate-400"}`,children:[r.jsx(Ae,{size:20}),X]},te))})]}),I.sendType==="targeted"&&r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Target Audience"}),r.jsxs("select",{value:I.targetAudience,onChange:te=>H({...I,targetAudience:te.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"All Users"}),r.jsx("option",{value:"premium",children:"Premium Users Only"}),r.jsx("option",{value:"free",children:"Free Users Only"})]})]}),I.sendType==="single"&&r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"User IDs (comma separated)"}),r.jsx("input",{type:"text",value:I.targetUserIds,onChange:te=>H({...I,targetUserIds:te.target.value}),placeholder:"1, 2, 3",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Title (optional)"}),r.jsx("input",{type:"text",value:I.title,onChange:te=>H({...I,title:te.target.value}),placeholder:" Special Announcement",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Message *"}),r.jsx("textarea",{value:I.text,onChange:te=>H({...I,text:te.target.value}),placeholder:"Enter your notification message...",rows:3,className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 resize-none"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Type"}),r.jsx("div",{className:"flex gap-2",children:[{value:"info",label:"Info",color:"blue"},{value:"success",label:"Success",color:"green"},{value:"warning",label:"Warning",color:"yellow"},{value:"alert",label:"Alert",color:"red"}].map(({value:te,label:X,color:Ae})=>r.jsx("button",{onClick:()=>H({...I,type:te}),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${I.type===te?`bg-${Ae}-100 text-${Ae}-700 dark:bg-${Ae}-900/30 dark:text-${Ae}-400 ring-2 ring-${Ae}-500`:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-200"}`,children:X},te))})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Link to Content Tab (optional)"}),r.jsxs("select",{value:I.tabId,onChange:te=>H({...I,tabId:te.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"No linked tab"}),s.filter(te=>te.status==="active").map(te=>r.jsx("option",{value:te.id,children:te.title},te.id))]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:'Users will see "View Details" when a tab is linked'})]}),r.jsx("div",{className:"mb-6 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-200 dark:border-slate-700",children:r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:I.sendEmail,onChange:te=>H({...I,sendEmail:te.target.checked}),className:"w-5 h-5 mt-0.5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-slate-900 dark:text-white flex items-center gap-2",children:" Also Send Email"}),r.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Send email notification to users who have opted in to email notifications. Users who have disabled email notifications in Settings will not receive emails."})]})]})}),ce&&r.jsx("div",{className:`p-4 rounded-xl mb-4 ${ce.success?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400"}`,children:ce.message}),r.jsx("button",{onClick:q,disabled:ee||!I.text.trim(),className:"w-full py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-xl hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:ee?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx(vu,{size:18}),"Send Notification"]})})]})})},_=()=>r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Notification History"}),a.length===0?r.jsxs("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800/50 rounded-2xl",children:[r.jsx(sc,{className:"mx-auto text-slate-300 dark:text-slate-600 mb-4",size:48}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No notifications sent yet"})]}):r.jsx("div",{className:"space-y-3",children:a.map(I=>r.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700 flex items-center gap-4",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${I.type==="success"?"bg-green-100 text-green-600":I.type==="warning"?"bg-yellow-100 text-yellow-600":I.type==="alert"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:r.jsx(sc,{size:18})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[I.title&&r.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:I.title}),r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 truncate",children:I.text})]}),r.jsxs("div",{className:"text-right text-xs text-slate-400",children:[r.jsx("p",{children:I.isBroadcast?"Broadcast":"Single"}),r.jsx("p",{children:I.createdAt})]})]},I.id))})]}),z=()=>{const[I,H]=L.useState(x||{title:"",subtitle:"",content:"",contentType:"markdown",coverImage:"",bannerImage:"",ctaText:"",ctaLink:"",ctaStyle:"primary",targetAudience:"all",category:"announcement",priority:0,status:"draft",startAt:"",endAt:""}),[ee,$]=L.useState(!1),ce=async()=>{if(!I.title||!I.content){alert("Title and content are required");return}$(!0);try{let Q;x?Q=await gh.updateTab(x.id,I):Q=await gh.createTab(I),Q.success?(p(!1),j()):alert(Q.error||"Failed to save")}catch{alert("Failed to save tab")}$(!1)};return u?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-3xl w-full max-w-3xl max-h-[90vh] overflow-hidden shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-800",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:x?"Edit Content Tab":"Create Content Tab"}),r.jsx("button",{onClick:()=>p(!1),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:r.jsx(As,{size:20})})]}),r.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)] space-y-5",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Title *"}),r.jsx("input",{type:"text",value:I.title||"",onChange:Q=>H({...I,title:Q.target.value}),placeholder:"Announcement Title",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtitle"}),r.jsx("input",{type:"text",value:I.subtitle||"",onChange:Q=>H({...I,subtitle:Q.target.value}),placeholder:"Brief description",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Content * (Markdown supported)"}),r.jsx("textarea",{value:I.content||"",onChange:Q=>H({...I,content:Q.target.value}),placeholder:"Write your announcement content here...",rows:8,className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 font-mono text-sm"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cover Image URL"}),r.jsx("input",{type:"text",value:I.coverImage||"",onChange:Q=>H({...I,coverImage:Q.target.value}),placeholder:"https://...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Banner Image URL"}),r.jsx("input",{type:"text",value:I.bannerImage||"",onChange:Q=>H({...I,bannerImage:Q.target.value}),placeholder:"https://...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"CTA Button Text"}),r.jsx("input",{type:"text",value:I.ctaText||"",onChange:Q=>H({...I,ctaText:Q.target.value}),placeholder:"Learn More",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"CTA Link"}),r.jsx("input",{type:"text",value:I.ctaLink||"",onChange:Q=>H({...I,ctaLink:Q.target.value}),placeholder:"/billing",className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"CTA Style"}),r.jsxs("select",{value:I.ctaStyle||"primary",onChange:Q=>H({...I,ctaStyle:Q.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"primary",children:"Primary (Blue)"}),r.jsx("option",{value:"secondary",children:"Secondary (Gray)"}),r.jsx("option",{value:"danger",children:"Danger (Red)"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Category"}),r.jsxs("select",{value:I.category||"announcement",onChange:Q=>H({...I,category:Q.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"announcement",children:" Announcement"}),r.jsx("option",{value:"promotion",children:" Promotion"}),r.jsx("option",{value:"update",children:" Update"}),r.jsx("option",{value:"alert",children:" Alert"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Target Audience"}),r.jsxs("select",{value:I.targetAudience||"all",onChange:Q=>H({...I,targetAudience:Q.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:" All Users"}),r.jsx("option",{value:"premium",children:" Premium Only"}),r.jsx("option",{value:"free",children:" Free Users"}),r.jsx("option",{value:"new_users",children:" New Users"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Status"}),r.jsxs("select",{value:I.status||"draft",onChange:Q=>H({...I,status:Q.target.value}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"draft",children:" Draft"}),r.jsx("option",{value:"active",children:" Active"}),r.jsx("option",{value:"scheduled",children:" Scheduled"}),r.jsx("option",{value:"archived",children:" Archived"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Start Date (optional)"}),r.jsx("input",{type:"datetime-local",value:I.startAt?I.startAt.slice(0,16):"",onChange:Q=>H({...I,startAt:Q.target.value?new Date(Q.target.value).toISOString():void 0}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"End Date (optional)"}),r.jsx("input",{type:"datetime-local",value:I.endAt?I.endAt.slice(0,16):"",onChange:Q=>H({...I,endAt:Q.target.value?new Date(Q.target.value).toISOString():void 0}),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50",children:[r.jsx("button",{onClick:()=>p(!1),className:"px-6 py-3 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl font-medium transition-colors",children:"Cancel"}),r.jsx("button",{onClick:ce,disabled:ee,className:"px-6 py-3 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center gap-2",children:ee?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(zn,{size:18}),x?"Update Tab":"Create Tab"]})})]})]})}):null};return d?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx("div",{className:"w-8 h-8 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"})}):r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3",children:[r.jsx(sc,{className:"text-blue-500"}),"Notification Center"]}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"Create announcements and send notifications to users"})]}),r.jsx(S,{}),t==="overview"&&r.jsx(C,{}),t==="tabs"&&r.jsx(F,{}),t==="send"&&r.jsx(U,{}),t==="history"&&r.jsx(_,{}),r.jsx(z,{})]})},ep={getTickets:async(t={})=>{const e=new URLSearchParams(t),n=await(await fetch(`${_e}/api/tickets/admin?${e}`,{credentials:"include"})).json();return n.success?{tickets:n.tickets,stats:n.stats}:{tickets:[],stats:{}}},getTicketDetail:async t=>{const s=await(await fetch(`${_e}/api/tickets/admin/${t}`,{credentials:"include"})).json();return s.success?{ticket:s.ticket,messages:s.messages}:null},acceptTicket:async t=>(await fetch(`${_e}/api/tickets/admin/${t}/accept`,{method:"POST",credentials:"include"})).json(),resolveTicket:async t=>(await fetch(`${_e}/api/tickets/admin/${t}/resolve`,{method:"POST",credentials:"include"})).json()},g4=({status:t,size:e="md"})=>{const s={pending:{color:"yellow",icon:r.jsx(on,{className:e==="sm"?"w-3 h-3":"w-4 h-4"}),label:"Pending"},accepted:{color:"blue",icon:r.jsx(zn,{className:e==="sm"?"w-3 h-3":"w-4 h-4"}),label:"Accepted"},in_progress:{color:"indigo",icon:r.jsx(ic,{className:e==="sm"?"w-3 h-3":"w-4 h-4"}),label:"In Progress"},resolved:{color:"green",icon:r.jsx(I6,{className:e==="sm"?"w-3 h-3":"w-4 h-4"}),label:"Resolved"},expired:{color:"red",icon:r.jsx(ga,{className:e==="sm"?"w-3 h-3":"w-4 h-4"}),label:"Expired"},closed:{color:"slate",icon:r.jsx(rc,{className:e==="sm"?"w-3 h-3":"w-4 h-4"}),label:"Closed"}},{color:n,icon:a,label:i}=s[t]||s.pending,c={yellow:"bg-yellow-100 text-yellow-700 border-yellow-200",blue:"bg-blue-100 text-blue-700 border-blue-200",indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",green:"bg-green-100 text-green-700 border-green-200",red:"bg-red-100 text-red-700 border-red-200",slate:"bg-slate-100 text-slate-700 border-slate-200"};return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium border ${c[n]}`,children:[a,i]})},Jz=({priority:t})=>{const e={urgent:"bg-red-500 text-white",high:"bg-orange-500 text-white",normal:"bg-slate-200 text-slate-700",low:"bg-slate-100 text-slate-500"};return r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${e[t]||e.normal}`,children:t.charAt(0).toUpperCase()+t.slice(1)})},x4=t=>{if(t<=0)return"Expired";const e=Math.floor(t/3600),s=Math.floor(t%3600/60);return e>0?`${e}h ${s}m`:`${s}m`},Wz=()=>{const{isConnected:t,joinTicket:e,leaveTicket:s,sendTicketMessage:n,sendTypingStatus:a,onNewTicketMessage:i,onUserTyping:c,onNewTicket:A,onTicketActivity:d}=$p(),[f,u]=L.useState([]),[p,x]=L.useState(null),[m,j]=L.useState(!0),[w,S]=L.useState(null),[C,F]=L.useState([]),[U,_]=L.useState(""),[z,I]=L.useState(!1),[H,ee]=L.useState(null),[$,ce]=L.useState("all"),[Q,q]=L.useState("all"),[te,X]=L.useState(""),Ae=L.useRef(null),W=L.useRef(null),se=L.useRef();L.useEffect(()=>{Z()},[$,Q]),L.useEffect(()=>{const K=A(ne=>{u(pe=>[{id:ne.ticketId,subject:ne.subject,userName:ne.userName,userAvatar:ne.userAvatar,category:ne.category,priority:ne.priority,status:"pending",timeRemaining:86400,isExpired:!1,createdAt:ne.createdAt},...pe]),x(pe=>pe&&{...pe,pending:pe.pending+1,total:pe.total+1})});return()=>K()},[A]),L.useEffect(()=>{const K=d(ne=>{u(pe=>pe.map(Ce=>Ce.id===ne.ticketId?{...Ce,lastMessage:{text:ne.preview,senderType:"user",time:"now"}}:Ce))});return()=>K()},[d]),L.useEffect(()=>{if(w&&t)return e(w.id),()=>{s(w.id)}},[w==null?void 0:w.id,t,e,s]),L.useEffect(()=>{const K=i(ne=>{w&&ne.ticketId===w.id&&(F(pe=>pe.some(Ce=>Ce.id===ne.id)?pe:[...pe,ne]),ee(null))});return()=>K()},[w==null?void 0:w.id,i]),L.useEffect(()=>{const K=c(ne=>{w&&ne.ticketId===w.id&&!ne.isAdmin&&(ne.isTyping?ee(ne.userName):ee(null))});return()=>K()},[w==null?void 0:w.id,c]),L.useEffect(()=>{var K;(K=Ae.current)==null||K.scrollIntoView({behavior:"smooth"})},[C,H]);const Z=async()=>{const K={};$!=="all"&&(K.status=$),Q!=="all"&&(K.assigned=Q);const ne=await ep.getTickets(K);u(ne.tickets),x(ne.stats),j(!1)},re=async K=>{const ne=await ep.getTicketDetail(K);ne&&(S(ne.ticket),F(ne.messages))},ve=async()=>{if(!w)return;const K=await ep.acceptTicket(w.id);if(K.success){S(K.ticket),Z();const ne=await ep.getTicketDetail(w.id);ne&&F(ne.messages)}},ae=L.useCallback(()=>{var K;!w||!U.trim()||!t||(I(!0),n(w.id,U.trim()),_(""),I(!1),(K=W.current)==null||K.focus(),a(w.id,!1))},[w,U,t,n,a]),R=K=>{_(K.target.value),w&&t&&(a(w.id,!0),se.current&&clearTimeout(se.current),se.current=setTimeout(()=>{a(w.id,!1)},2e3))},P=async()=>{if(!w||!confirm("Mark this ticket as resolved?"))return;(await ep.resolveTicket(w.id)).success&&(Z(),S(null))},V=f.filter(K=>K.subject.toLowerCase().includes(te.toLowerCase())||K.userName.toLowerCase().includes(te.toLowerCase()));return r.jsxs("div",{className:"flex h-[calc(100vh-180px)] bg-white rounded-xl border border-slate-200 overflow-hidden",children:[r.jsxs("div",{className:`${w?"hidden md:flex":"flex"} flex-col w-full md:w-96 border-r border-slate-200`,children:[r.jsxs("div",{className:"p-4 border-b border-slate-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Support Tickets"}),r.jsxs("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-xs ${t?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[t?r.jsx(Zf,{className:"w-3 h-3"}):r.jsx(Xf,{className:"w-3 h-3"}),t?"Live":"Offline"]})]}),r.jsx("button",{onClick:Z,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(yl,{className:"w-4 h-4 text-slate-500"})})]}),r.jsxs("div",{className:"relative mb-3",children:[r.jsx(tl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Search tickets...",value:te,onChange:K=>X(K.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:$,onChange:K=>ce(K.target.value),className:"flex-1 px-3 py-1.5 bg-slate-50 border border-slate-200 rounded-lg text-xs",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"accepted",children:"Accepted"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"resolved",children:"Resolved"})]}),r.jsxs("select",{value:Q,onChange:K=>q(K.target.value),className:"flex-1 px-3 py-1.5 bg-slate-50 border border-slate-200 rounded-lg text-xs",children:[r.jsx("option",{value:"all",children:"All Tickets"}),r.jsx("option",{value:"me",children:"My Tickets"}),r.jsx("option",{value:"unassigned",children:"Unassigned"})]})]})]}),p&&r.jsxs("div",{className:"px-4 py-3 bg-slate-50 border-b border-slate-100 flex gap-4 text-xs",children:[r.jsxs("span",{className:"text-yellow-600",children:[p.pending," pending"]}),r.jsxs("span",{className:"text-blue-600",children:[p.inProgress," active"]}),r.jsxs("span",{className:"text-green-600",children:[p.resolved," resolved"]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:m?r.jsx("div",{className:"flex items-center justify-center h-40",children:r.jsx(yl,{className:"w-6 h-6 animate-spin text-slate-400"})}):V.length===0?r.jsxs("div",{className:"text-center py-12 text-slate-400",children:[r.jsx(Sp,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No tickets found"})]}):V.map(K=>r.jsx("div",{onClick:()=>re(K.id),className:`p-4 border-b border-slate-100 cursor-pointer hover:bg-slate-50 transition-colors ${(w==null?void 0:w.id)===K.id?"bg-blue-50":""}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 overflow-hidden shrink-0",children:K.userAvatar?r.jsx("img",{src:K.userAvatar,alt:"",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(ta,{className:"w-5 h-5 text-slate-400"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(g4,{status:K.status,size:"sm"}),r.jsx(Jz,{priority:K.priority})]}),r.jsx("h3",{className:"font-medium text-slate-800 text-sm truncate",children:K.subject}),r.jsx("p",{className:"text-xs text-slate-500 truncate",children:K.userName}),r.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-slate-400",children:[r.jsx("span",{children:K.createdAt}),K.status==="pending"&&!K.isExpired&&r.jsxs("span",{className:"flex items-center gap-1 text-orange-500",children:[r.jsx(Tv,{className:"w-3 h-3"}),x4(K.timeRemaining)]})]})]})]})},K.id))})]}),r.jsx("div",{className:`${w?"flex":"hidden md:flex"} flex-1 flex-col`,children:w?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-slate-100",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>S(null),className:"md:hidden p-2 hover:bg-slate-100 rounded-lg",children:r.jsx(As,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold text-slate-800",children:w.subject}),r.jsxs("span",{className:"text-xs text-slate-400",children:["#",w.id]})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(g4,{status:w.status,size:"sm"}),r.jsx("span",{className:"text-sm text-slate-500",children:w.userName})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[w.status==="pending"&&!w.isExpired&&r.jsx("button",{onClick:ve,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Accept Ticket"}),["accepted","in_progress"].includes(w.status)&&r.jsx("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors",children:"Mark Resolved"})]})]}),w.status!=="resolved"&&w.status!=="closed"&&!w.isExpired&&r.jsxs("div",{className:"mt-3 p-2 bg-orange-50 rounded-lg flex items-center gap-2 text-xs text-orange-600",children:[r.jsx(Tv,{className:"w-4 h-4"}),r.jsxs("span",{children:["Time remaining: ",x4(w.timeRemaining)]})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50",children:[C.map(K=>r.jsx("div",{className:`flex ${K.senderType==="admin"?"justify-end":"justify-start"}`,children:K.senderType==="system"?r.jsx("div",{className:"text-center text-xs text-slate-400 py-2 w-full",children:K.content}):r.jsxs("div",{className:`flex items-end gap-2 max-w-[70%] ${K.senderType==="admin"?"flex-row-reverse":""}`,children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 overflow-hidden shrink-0",children:K.senderAvatar?r.jsx("img",{src:K.senderAvatar,alt:"",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(ta,{className:"w-4 h-4 text-slate-400"})})}),r.jsxs("div",{children:[r.jsx("div",{className:`px-4 py-3 rounded-2xl ${K.senderType==="admin"?"bg-blue-600 text-white rounded-br-md":"bg-white border border-slate-200 rounded-bl-md"}`,children:r.jsx("p",{className:"text-sm",children:K.content})}),r.jsx("div",{className:`text-xs text-slate-400 mt-1 ${K.senderType==="admin"?"text-right":""}`,children:new Date(K.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},K.id)),H&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-white border border-slate-200 px-4 py-3 rounded-2xl rounded-bl-md",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[r.jsxs("span",{className:"flex gap-1",children:[r.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),r.jsxs("span",{children:[H," is typing..."]})]})})}),r.jsx("div",{ref:Ae})]}),["accepted","in_progress"].includes(w.status)?r.jsx("div",{className:"p-4 border-t border-slate-100",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("input",{ref:W,type:"text",value:U,onChange:R,onKeyDown:K=>K.key==="Enter"&&!K.shiftKey&&ae(),placeholder:t?"Type your reply...":"Connecting...",disabled:!t,className:"flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50"}),r.jsx("button",{onClick:ae,disabled:z||!U.trim()||!t,className:"px-4 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 transition-colors",children:r.jsx(vu,{className:"w-5 h-5"})})]})}):w.status==="pending"?r.jsx("div",{className:"p-4 bg-yellow-50 text-center text-sm text-yellow-700",children:"Accept this ticket to start chatting"}):r.jsxs("div",{className:"p-4 bg-slate-100 text-center text-sm text-slate-500",children:["This ticket is ",w.status]})]}):r.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-400",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ic,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Select a ticket to view details"})]})})})]})},vg={getMessages:async(t="all")=>{const s=await(await fetch(`${_e}/api/admin-messages?type=${t}`,{credentials:"include"})).json();return s.success?{messages:s.messages,unreadCount:s.unreadCount}:{messages:[],unreadCount:0}},getAdmins:async()=>{const e=await(await fetch(`${_e}/api/admin-messages/admins`,{credentials:"include"})).json();return e.success?e.admins:[]},markRead:async t=>{await fetch(`${_e}/api/admin-messages/${t}/read`,{method:"POST",credentials:"include"})},getSystemNotifications:async()=>{const e=await(await fetch(`${_e}/api/admin-messages/system-notifications`,{credentials:"include"})).json();return e.success?{notifications:e.notifications,unreadCount:e.unreadCount}:{notifications:[],unreadCount:0}}},b4=({priority:t})=>{const e={urgent:"bg-red-100 text-red-700",high:"bg-orange-100 text-orange-700",normal:"bg-slate-100 text-slate-600",low:"bg-slate-50 text-slate-400"};return r.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${e[t]||e.normal}`,children:t})},Xz=()=>{const{isConnected:t,sendAdminMessage:e,onNewAdminMessage:s}=$p(),[n,a]=L.useState("messages"),[i,c]=L.useState("all"),[A,d]=L.useState([]),[f,u]=L.useState([]),[p,x]=L.useState([]),[m,j]=L.useState(0),[w,S]=L.useState(0),[C,F]=L.useState(!0),[U,_]=L.useState(!1),[z,I]=L.useState(null);L.useEffect(()=>{H()},[i]),L.useEffect(()=>{const $=s(ce=>{const Q={id:ce.id,senderId:ce.senderId,senderName:ce.senderName,senderAvatar:ce.senderAvatar,recipientId:ce.recipientId,recipientName:ce.recipientName,isBroadcast:ce.isBroadcast,subject:ce.subject,content:ce.content,messageType:"message",priority:ce.priority,createdAt:ce.createdAt,isRead:!1};d(q=>[Q,...q]),j(q=>q+1)});return()=>$()},[s]);const H=async()=>{F(!0);const[$,ce,Q]=await Promise.all([vg.getMessages(i),vg.getSystemNotifications(),vg.getAdmins()]);d($.messages),j($.unreadCount),u(ce.notifications),S(ce.unreadCount),x(Q),F(!1)},ee=async $=>{I($),$.isRead||(await vg.markRead($.id),d(ce=>ce.map(Q=>Q.id===$.id?{...Q,isRead:!0}:Q)),j(ce=>Math.max(0,ce-1)))};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Admin Communications"}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Internal messages and system notifications"})]}),r.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs ${t?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[t?r.jsx(Zf,{className:"w-3 h-3"}):r.jsx(Xf,{className:"w-3 h-3"}),t?"Live":"Offline"]})]}),r.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors",children:[r.jsx(ln,{className:"w-4 h-4"}),"New Message"]})]}),r.jsxs("div",{className:"flex gap-2 border-b border-slate-200",children:[r.jsx("button",{onClick:()=>a("messages"),className:`px-4 py-3 font-medium text-sm border-b-2 transition-colors ${n==="messages"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Cu,{className:"w-4 h-4"}),"Messages",m>0&&r.jsx("span",{className:"px-1.5 py-0.5 bg-blue-500 text-white text-xs rounded-full",children:m})]})}),r.jsx("button",{onClick:()=>a("notifications"),className:`px-4 py-3 font-medium text-sm border-b-2 transition-colors ${n==="notifications"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(sc,{className:"w-4 h-4"}),"System Notifications",w>0&&r.jsx("span",{className:"px-1.5 py-0.5 bg-red-500 text-white text-xs rounded-full",children:w})]})})]}),r.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:n==="messages"?r.jsxs("div",{className:"flex h-[500px]",children:[r.jsxs("div",{className:"w-full md:w-1/2 lg:w-2/5 border-r border-slate-200 flex flex-col",children:[r.jsx("div",{className:"p-3 border-b border-slate-100 flex gap-2",children:["all","received","sent"].map($=>r.jsx("button",{onClick:()=>c($),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${i===$?"bg-blue-100 text-blue-700":"bg-slate-50 text-slate-600 hover:bg-slate-100"}`,children:$.charAt(0).toUpperCase()+$.slice(1)},$))}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:C?r.jsx("div",{className:"flex items-center justify-center h-40",children:r.jsx(yl,{className:"w-6 h-6 animate-spin text-slate-400"})}):A.length===0?r.jsxs("div",{className:"text-center py-12 text-slate-400",children:[r.jsx(ko,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No messages"})]}):A.map($=>r.jsx("div",{onClick:()=>ee($),className:`p-4 border-b border-slate-100 cursor-pointer hover:bg-slate-50 transition-colors ${$.isRead?"":"bg-blue-50/50"} ${(z==null?void 0:z.id)===$.id?"bg-blue-50":""}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 overflow-hidden shrink-0 flex items-center justify-center",children:$.senderAvatar?r.jsx("img",{src:$.senderAvatar,alt:"",className:"w-full h-full object-cover"}):$.isBroadcast?r.jsx(vA,{className:"w-5 h-5 text-slate-500"}):r.jsx(ta,{className:"w-5 h-5 text-slate-400"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[$.isBroadcast&&r.jsx("span",{className:"px-1.5 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:"Broadcast"}),r.jsx(b4,{priority:$.priority})]}),r.jsx("h4",{className:`text-sm truncate ${$.isRead?"":"font-semibold"}`,children:$.subject||"No subject"}),r.jsxs("p",{className:"text-xs text-slate-500 truncate mt-0.5",children:[$.senderName,"  ",$.isBroadcast?"All Admins":$.recipientName]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date($.createdAt).toLocaleString()})]}),!$.isRead&&r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full shrink-0 mt-2"})]})},$.id))})]}),r.jsx("div",{className:"hidden md:flex flex-1 flex-col",children:z?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-slate-100",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[z.isBroadcast&&r.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-lg flex items-center gap-1",children:[r.jsx(vA,{className:"w-3 h-3"}),"Broadcast"]}),r.jsx(b4,{priority:z.priority})]}),r.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:z.subject||"No subject"}),r.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-slate-500",children:[r.jsxs("span",{children:["From: ",z.senderName]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["To: ",z.isBroadcast?"All Admins":z.recipientName]})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(z.createdAt).toLocaleString()})]}),r.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:r.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:z.content})})]}):r.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-400",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ko,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Select a message to view"})]})})})]}):r.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:C?r.jsx("div",{className:"flex items-center justify-center h-40",children:r.jsx(yl,{className:"w-6 h-6 animate-spin text-slate-400"})}):f.length===0?r.jsxs("div",{className:"text-center py-12 text-slate-400",children:[r.jsx(sc,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No notifications"})]}):f.map($=>r.jsx("div",{className:`p-4 border-b border-slate-100 hover:bg-slate-50 transition-colors ${$.isRead?"":"bg-blue-50/50"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${$.notificationType.includes("ticket")?"bg-blue-100 text-blue-600":$.notificationType==="new_user"?"bg-green-100 text-green-600":"bg-slate-100 text-slate-600"}`,children:r.jsx(sc,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:`text-sm ${$.isRead?"":"font-semibold"}`,children:$.title}),$.content&&r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:$.content}),r.jsx("p",{className:"text-xs text-slate-400 mt-2",children:new Date($.createdAt).toLocaleString()})]})]})},$.id))})}),U&&r.jsx(Zz,{admins:p,isConnected:t,onSend:e,onClose:()=>_(!1),onSent:()=>{_(!1),H()}})]})},Zz=({admins:t,isConnected:e,onSend:s,onClose:n,onSent:a})=>{const[i,c]=L.useState(!0),[A,d]=L.useState(null),[f,u]=L.useState(""),[p,x]=L.useState(""),[m,j]=L.useState("normal"),[w,S]=L.useState(""),C=()=>{if(!p.trim()){S("Please enter a message");return}if(!i&&!A){S("Please select a recipient");return}if(!e){S("Not connected to server");return}s(i?null:A,p,f,m),a()},F=t.filter(U=>!U.isCurrentUser);return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"New Message"}),r.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 rounded-lg",children:r.jsx(As,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[w&&r.jsxs("div",{className:"p-3 bg-red-50 text-red-600 rounded-lg text-sm flex items-center gap-2",children:[r.jsx(ur,{className:"w-4 h-4"}),w]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Send To"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{type:"button",onClick:()=>{c(!0),d(null)},className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border transition-colors ${i?"border-blue-500 bg-blue-50 text-blue-600":"border-slate-200 hover:border-slate-300"}`,children:[r.jsx(vA,{className:"w-4 h-4"}),"All Admins"]}),r.jsxs("button",{type:"button",onClick:()=>c(!1),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl border transition-colors ${i?"border-slate-200 hover:border-slate-300":"border-blue-500 bg-blue-50 text-blue-600"}`,children:[r.jsx(ta,{className:"w-4 h-4"}),"Specific Admin"]})]})]}),!i&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Recipient"}),r.jsxs("select",{value:A||"",onChange:U=>d(Number(U.target.value)||null),className:"w-full px-4 py-3 rounded-xl border border-slate-200 bg-white",children:[r.jsx("option",{value:"",children:"Select admin..."}),F.map(U=>r.jsxs("option",{value:U.id,children:[U.name," (",U.email,")"]},U.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Subject (optional)"}),r.jsx("input",{type:"text",value:f,onChange:U=>u(U.target.value),placeholder:"Message subject",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Priority"}),r.jsx("div",{className:"flex gap-2",children:["low","normal","high","urgent"].map(U=>r.jsx("button",{type:"button",onClick:()=>j(U),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${m===U?U==="urgent"?"bg-red-100 text-red-700":U==="high"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700":"bg-slate-50 text-slate-600 hover:bg-slate-100"}`,children:U.charAt(0).toUpperCase()+U.slice(1)},U))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Message *"}),r.jsx("textarea",{value:p,onChange:U=>x(U.target.value),placeholder:"Type your message...",rows:5,className:"w-full px-4 py-3 rounded-xl border border-slate-200 resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsxs("div",{className:"p-4 border-t border-slate-200 flex gap-3",children:[r.jsx("button",{onClick:n,className:"flex-1 px-4 py-3 bg-slate-100 rounded-xl font-medium hover:bg-slate-200 transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:C,disabled:!e,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[r.jsx(vu,{className:"w-4 h-4"}),"Send ",i?"Broadcast":"Message"]})]})]})})},yg={getRooms:async()=>{const e=await(await fetch(`${_e}/api/admin-chat/rooms`,{credentials:"include"})).json();return e.success?e.rooms:[]},getAdmins:async()=>{const e=await(await fetch(`${_e}/api/admin-chat/admins`,{credentials:"include"})).json();return e.success?e.admins:[]},startChat:async t=>{const s=await(await fetch(`${_e}/api/admin-chat/start/${t}`,{method:"POST",credentials:"include"})).json();return s.success?s.room:null},getMessages:async(t,e)=>{const s=e?`${_e}/api/admin-chat/rooms/${t}/messages?before=${e}`:`${_e}/api/admin-chat/rooms/${t}/messages`,a=await(await fetch(s,{credentials:"include"})).json();return a.success?{messages:a.messages,hasMore:a.hasMore}:{messages:[],hasMore:!1}},markRead:async t=>{await fetch(`${_e}/api/admin-chat/rooms/${t}/read`,{method:"POST",credentials:"include"})}},eK=()=>{var Ae,W;const{socket:t,isConnected:e}=$p(),[s,n]=L.useState([]),[a,i]=L.useState([]),[c,A]=L.useState(null),[d,f]=L.useState([]),[u,p]=L.useState(""),[x,m]=L.useState(!0),[j,w]=L.useState(!1),[S,C]=L.useState(""),[F,U]=L.useState(null),_=L.useRef(null),z=L.useRef(null),I=L.useRef(null);L.useEffect(()=>{H(),ee()},[]),L.useEffect(()=>{if(!t)return;const se=ve=>{c&&ve.roomId===c.id&&(f(ae=>ae.some(R=>R.id===ve.id)?ae:[...ae,ve]),U(null)),n(ae=>ae.map(R=>R.id===ve.roomId?{...R,lastMessagePreview:ve.content.slice(0,50),lastMessageAt:ve.createdAt,unreadCount:(c==null?void 0:c.id)===ve.roomId?0:R.unreadCount+1}:R).sort((R,P)=>new Date(P.lastMessageAt||0).getTime()-new Date(R.lastMessageAt||0).getTime()))},Z=ve=>{c&&ve.roomId===c.id&&U(ve.isTyping?ve.userName:null)},re=ve=>{console.log(` New message from ${ve.senderName}`)};return t.on("new_admin_chat_message",se),t.on("admin_chat_user_typing",Z),t.on("admin_chat_notification",re),()=>{t.off("new_admin_chat_message",se),t.off("admin_chat_user_typing",Z),t.off("admin_chat_notification",re)}},[t,c]),L.useEffect(()=>{if(!(!t||!c))return t.emit("join_admin_chat",{roomId:c.id}),()=>{t.emit("leave_admin_chat",{roomId:c.id})}},[t,c==null?void 0:c.id]),L.useEffect(()=>{var se;(se=_.current)==null||se.scrollIntoView({behavior:"smooth"})},[d,F]);const H=async()=>{const se=await yg.getRooms();n(se),m(!1)},ee=async()=>{const se=await yg.getAdmins();i(se)},$=async se=>{A(se);const Z=await yg.getMessages(se.id);f(Z.messages),n(re=>re.map(ve=>ve.id===se.id?{...ve,unreadCount:0}:ve)),setTimeout(()=>{var re;return(re=z.current)==null?void 0:re.focus()},100)},ce=async se=>{const Z=await yg.startChat(se.id);Z&&(s.find(ve=>ve.id===Z.id)||n(ve=>[Z,...ve]),$(Z),w(!1))},Q=L.useCallback(()=>{var se;!u.trim()||!c||!t||!e||(t.emit("admin_chat_message",{roomId:c.id,content:u.trim()}),p(""),(se=z.current)==null||se.focus(),t.emit("admin_chat_typing",{roomId:c.id,isTyping:!1}))},[u,c,t,e]),q=se=>{p(se.target.value),c&&t&&e&&(t.emit("admin_chat_typing",{roomId:c.id,isTyping:!0}),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{t.emit("admin_chat_typing",{roomId:c.id,isTyping:!1})},2e3))},te=se=>{const Z=new Date(se),ve=new Date().getTime()-Z.getTime();return ve<6e4?"Just now":ve<36e5?`${Math.floor(ve/6e4)}m ago`:ve<864e5?Z.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):Z.toLocaleDateString([],{month:"short",day:"numeric"})},X=a.filter(se=>se.name.toLowerCase().includes(S.toLowerCase())||se.email.toLowerCase().includes(S.toLowerCase()));return r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden h-[600px] flex",children:[r.jsxs("div",{className:`${c?"hidden md:flex":"flex"} flex-col w-full md:w-80 border-r border-slate-200`,children:[r.jsx("div",{className:"p-4 border-b border-slate-100",children:r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Admin Chat"}),r.jsxs("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-xs ${e?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[e?r.jsx(Zf,{className:"w-3 h-3"}):r.jsx(Xf,{className:"w-3 h-3"}),e?"Live":"Offline"]})]}),r.jsx("button",{onClick:()=>w(!0),className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:r.jsx(ln,{className:"w-4 h-4"})})]})}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:x?r.jsx("div",{className:"flex items-center justify-center h-40 text-slate-400",children:"Loading..."}):s.length===0?r.jsxs("div",{className:"text-center py-12 px-4",children:[r.jsx(ic,{className:"w-12 h-12 mx-auto mb-3 text-slate-200"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"No conversations yet"}),r.jsx("button",{onClick:()=>w(!0),className:"mt-4 px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700",children:"Start a Chat"})]}):s.map(se=>{var Z;return r.jsx("div",{onClick:()=>$(se),className:`p-4 border-b border-slate-100 cursor-pointer hover:bg-slate-50 transition-colors ${(c==null?void 0:c.id)===se.id?"bg-blue-50":""}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 overflow-hidden flex items-center justify-center",children:(Z=se.otherMember)!=null&&Z.avatar?r.jsx("img",{src:se.otherMember.avatar,alt:"",className:"w-full h-full object-cover"}):r.jsx(ta,{className:"w-6 h-6 text-slate-400"})}),se.unreadCount>0&&r.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-blue-600 text-white text-xs rounded-full flex items-center justify-center",children:se.unreadCount>9?"9+":se.unreadCount})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:`font-medium truncate ${se.unreadCount>0?"text-slate-900":"text-slate-700"}`,children:se.name}),se.lastMessageAt&&r.jsx("span",{className:"text-xs text-slate-400",children:te(se.lastMessageAt)})]}),se.lastMessagePreview&&r.jsx("p",{className:`text-sm truncate mt-0.5 ${se.unreadCount>0?"text-slate-600 font-medium":"text-slate-400"}`,children:se.lastMessagePreview})]})]})},se.id)})})]}),r.jsx("div",{className:`${c?"flex":"hidden md:flex"} flex-1 flex-col`,children:c?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center gap-3",children:[r.jsx("button",{onClick:()=>A(null),className:"md:hidden p-2 hover:bg-slate-100 rounded-lg",children:r.jsx(jA,{className:"w-5 h-5"})}),r.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 overflow-hidden flex items-center justify-center",children:(Ae=c.otherMember)!=null&&Ae.avatar?r.jsx("img",{src:c.otherMember.avatar,alt:"",className:"w-full h-full object-cover"}):r.jsx(ta,{className:"w-5 h-5 text-slate-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-slate-800",children:c.name}),r.jsx("p",{className:"text-xs text-slate-400",children:(W=c.otherMember)==null?void 0:W.role})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-slate-50",children:[d.map(se=>{var Z,re,ve,ae,R;return r.jsx("div",{className:`flex ${se.senderId===((Z=c.otherMember)==null?void 0:Z.id)?"justify-start":"justify-end"}`,children:r.jsxs("div",{className:`flex items-end gap-2 max-w-[75%] ${se.senderId!==((re=c.otherMember)==null?void 0:re.id)?"flex-row-reverse":""}`,children:[se.senderId===((ve=c.otherMember)==null?void 0:ve.id)&&r.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 overflow-hidden shrink-0",children:se.senderAvatar?r.jsx("img",{src:se.senderAvatar,alt:"",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(ta,{className:"w-4 h-4 text-slate-400"})})}),r.jsxs("div",{children:[r.jsx("div",{className:`px-4 py-2.5 rounded-2xl ${se.senderId===((ae=c.otherMember)==null?void 0:ae.id)?"bg-white border border-slate-200 rounded-bl-md":"bg-blue-600 text-white rounded-br-md"}`,children:r.jsx("p",{className:"text-sm",children:se.content})}),r.jsx("p",{className:`text-xs text-slate-400 mt-1 ${se.senderId!==((R=c.otherMember)==null?void 0:R.id)?"text-right":""}`,children:te(se.createdAt)})]})]})},se.id)}),F&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-white border border-slate-200 px-4 py-2.5 rounded-2xl rounded-bl-md",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[r.jsxs("span",{className:"flex gap-1",children:[r.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),r.jsxs("span",{children:[F," is typing..."]})]})})}),r.jsx("div",{ref:_})]}),r.jsx("div",{className:"p-4 border-t border-slate-100",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{ref:z,type:"text",value:u,onChange:q,onKeyDown:se=>se.key==="Enter"&&!se.shiftKey&&Q(),placeholder:e?"Type a message...":"Connecting...",disabled:!e,className:"flex-1 px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50"}),r.jsx("button",{onClick:Q,disabled:!u.trim()||!e,className:"px-4 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 disabled:opacity-50 transition-colors",children:r.jsx(vu,{className:"w-5 h-5"})})]})})]}):r.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-400",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ic,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Select a conversation or start a new chat"})]})})}),j&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[80vh] overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"New Conversation"}),r.jsx("button",{onClick:()=>w(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:r.jsx(As,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"p-4 border-b border-slate-100",children:r.jsxs("div",{className:"relative",children:[r.jsx(tl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Search admins...",value:S,onChange:se=>C(se.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),r.jsx("div",{className:"max-h-80 overflow-y-auto",children:X.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-400",children:[r.jsx(ta,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"text-sm",children:"No admins found"})]}):X.map(se=>r.jsx("div",{onClick:()=>ce(se),className:"p-4 hover:bg-slate-50 cursor-pointer transition-colors border-b border-slate-100 last:border-0",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-200 overflow-hidden flex items-center justify-center",children:se.avatar?r.jsx("img",{src:se.avatar,alt:"",className:"w-full h-full object-cover"}):r.jsx(ta,{className:"w-6 h-6 text-slate-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-medium text-slate-800",children:se.name}),r.jsx("p",{className:"text-sm text-slate-500",children:se.email}),r.jsx("span",{className:"text-xs text-slate-400",children:se.role})]})]})},se.id))})]})})]})},v4={code:"",name:"",description:"",voucherType:"discount",discountType:"percentage",discountValue:10,minAmount:0,maxDiscount:null,activationDays:30,activationPlanId:null,maxUses:100,maxUsesPerUser:1,applicablePlans:[],validFrom:"",validUntil:"",status:"active"},tK=()=>{const[t,e]=L.useState([]),[s,n]=L.useState([]),[a,i]=L.useState(!0),[c,A]=L.useState(!1),[d,f]=L.useState(null),[u,p]=L.useState(v4),[x,m]=L.useState(""),[j,w]=L.useState(!1),[S,C]=L.useState("all"),[F,U]=L.useState("all"),[_,z]=L.useState(""),[I,H]=L.useState(!1),[ee,$]=L.useState(null),[ce,Q]=L.useState([]),[q,te]=L.useState(!1);L.useEffect(()=>{Ae(),X()},[S,F]);const X=async()=>{try{const ne=await(await fetch(`${_e}/api/admin-subscription/plans?include_inactive=true`,{credentials:"include"})).json();n(ne.plans||[])}catch(K){console.error("Error fetching plans:",K)}},Ae=async()=>{i(!0);try{let K=`${_e}/api/admin-subscription/vouchers`;const ne=new URLSearchParams;S!=="all"&&ne.append("status",S),F!=="all"&&ne.append("type",F),ne.toString()&&(K+=`?${ne.toString()}`);const Ce=await(await fetch(K,{credentials:"include"})).json();e(Ce.vouchers||[])}catch(K){console.error("Error fetching vouchers:",K)}finally{i(!1)}},W=async K=>{te(!0);try{const pe=await(await fetch(`${_e}/api/admin-subscription/vouchers/${K}/usages`,{credentials:"include"})).json();Q(pe.usages||[])}catch(ne){console.error("Error fetching usages:",ne)}finally{te(!1)}},se=K=>{var ne,pe;K?(f(K),p({code:K.code,name:K.name||"",description:K.description||"",voucherType:K.voucherType,discountType:K.discountType||"percentage",discountValue:K.discountValue||10,minAmount:K.minAmount||0,maxDiscount:K.maxDiscount,activationDays:K.activationDays||30,activationPlanId:K.activationPlanId,maxUses:K.maxUses,maxUsesPerUser:K.maxUsesPerUser,applicablePlans:K.applicablePlans||[],validFrom:((ne=K.validFrom)==null?void 0:ne.split(" ")[0])||"",validUntil:((pe=K.validUntil)==null?void 0:pe.split(" ")[0])||"",status:K.status})):(f(null),p(v4)),m(""),A(!0)},Z=()=>{A(!1),f(null),m("")},re=async()=>{if(!u.code.trim()){m("Voucher code is required");return}if(u.voucherType==="discount"&&(!u.discountValue||u.discountValue<=0)){m("Discount value must be greater than 0");return}w(!0),m("");try{const K=d?`${_e}/api/admin-subscription/vouchers/${d.id}`:`${_e}/api/admin-subscription/vouchers`,pe=await fetch(K,{method:d?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({code:u.code.toUpperCase().trim(),name:u.name,description:u.description,voucherType:u.voucherType,discountType:u.discountType,discountValue:u.discountValue,minAmount:u.minAmount,maxDiscount:u.maxDiscount,activationDays:u.voucherType==="activation"?u.activationDays:null,activationPlanId:u.voucherType==="activation"?u.activationPlanId:null,maxUses:u.maxUses,maxUsesPerUser:u.maxUsesPerUser,applicablePlans:u.applicablePlans,validFrom:u.validFrom||null,validUntil:u.validUntil||null,status:u.status})}),Ce=await pe.json();pe.ok?(Ae(),Z()):m(Ce.error||"Failed to save voucher")}catch{m("Failed to save voucher")}finally{w(!1)}},ve=async K=>{try{await fetch(`${_e}/api/admin-subscription/vouchers/${K}/toggle-status`,{method:"POST",credentials:"include"}),Ae()}catch(ne){console.error("Error toggling status:",ne)}},ae=K=>{$(K.id),H(!0),W(K.id)},R=t.filter(K=>{var ne;if(_){const pe=_.toLowerCase();return K.code.toLowerCase().includes(pe)||((ne=K.name)==null?void 0:ne.toLowerCase().includes(pe))}return!0}),P=K=>K==="discount"?r.jsx(A5,{className:"w-5 h-5 text-green-500"}):r.jsx(o5,{className:"w-5 h-5 text-purple-500"}),V=K=>{const ne={active:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",inactive:"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400",exhausted:"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400"};return ne[K]||ne.inactive};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Voucher Management"}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Create and manage discount codes and activation codes"})]}),r.jsxs("button",{onClick:()=>se(),className:"flex items-center gap-2 px-4 py-2.5 bg-amber-500 hover:bg-amber-600 text-white font-medium rounded-lg transition-colors",children:[r.jsx(ln,{size:18})," Create Voucher"]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(tl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Search by code or name...",value:_,onChange:K=>z(K.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg"})]}),r.jsxs("select",{value:F,onChange:K=>U(K.target.value),className:"px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"discount",children:"Discount"}),r.jsx("option",{value:"activation",children:"Activation"})]}),r.jsxs("select",{value:S,onChange:K=>C(K.target.value),className:"px-3 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"exhausted",children:"Exhausted"})]})]}),a?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx(Xt,{className:"w-8 h-8 animate-spin text-amber-500"})}):R.length===0?r.jsxs("div",{className:"text-center py-12 text-slate-500",children:[r.jsx(Qh,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"No vouchers found"})]}):r.jsx("div",{className:"grid gap-4",children:R.map(K=>r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-5 border border-slate-200 dark:border-slate-700",children:r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[P(K.voucherType),r.jsx("span",{className:"font-mono font-bold text-lg text-slate-900 dark:text-white",children:K.code}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${V(K.status)}`,children:K.status}),!K.isValid&&K.status==="active"&&r.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs",children:"Expired"})]}),K.name&&r.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:K.name}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-500 dark:text-slate-400",children:[K.voucherType==="discount"?r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Jg,{size:14}),K.discountType==="percentage"?`${K.discountValue}% off`:`RM${K.discountValue} off`]}):r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(on,{size:14}),K.activationDays?`${K.activationDays} days`:"Lifetime"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Gl,{size:14}),K.currentUses,"/",K.maxUses," used"]}),K.validUntil&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Mn,{size:14}),"Until ",K.validUntil.split(" ")[0]]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>ae(K),className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Usages",children:r.jsx(yn,{size:18})}),r.jsx("button",{onClick:()=>se(K),className:"p-2 text-slate-500 hover:text-amber-600 hover:bg-amber-50 rounded-lg transition-colors",title:"Edit",children:r.jsx(Wf,{size:18})}),r.jsx("button",{onClick:()=>ve(K.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${K.status==="active"?"bg-red-100 text-red-600 hover:bg-red-200 dark:bg-red-900/30 dark:text-red-400":"bg-green-100 text-green-600 hover:bg-green-200 dark:bg-green-900/30 dark:text-green-400"}`,children:K.status==="active"?"Deactivate":"Activate"})]})]})},K.id))}),c&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 w-full max-w-lg my-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:d?"Edit Voucher":"Create Voucher"}),r.jsx("button",{onClick:Z,className:"text-slate-400 hover:text-slate-600",children:r.jsx(As,{size:20})})]}),x&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-600 dark:text-red-400 text-sm",children:[r.jsx(ur,{size:16}),x]}),r.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Voucher Code *"}),r.jsx("input",{type:"text",value:u.code,onChange:K=>p({...u,code:K.target.value.toUpperCase()}),placeholder:"e.g., SAVE20",className:"w-full px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg font-mono uppercase",disabled:!!d})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Display Name"}),r.jsx("input",{type:"text",value:u.name,onChange:K=>p({...u,name:K.target.value}),placeholder:"e.g., New Year Promotion",className:"w-full px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Voucher Type *"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>p({...u,voucherType:"discount"}),className:`p-3 rounded-lg border-2 flex items-center gap-2 transition-colors ${u.voucherType==="discount"?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-slate-200 dark:border-slate-700"}`,children:[r.jsx(A5,{size:18,className:u.voucherType==="discount"?"text-green-500":"text-slate-400"}),r.jsx("span",{className:"font-medium",children:"Discount"})]}),r.jsxs("button",{type:"button",onClick:()=>p({...u,voucherType:"activation"}),className:`p-3 rounded-lg border-2 flex items-center gap-2 transition-colors ${u.voucherType==="activation"?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-slate-200 dark:border-slate-700"}`,children:[r.jsx(o5,{size:18,className:u.voucherType==="activation"?"text-purple-500":"text-slate-400"}),r.jsx("span",{className:"font-medium",children:"Activation"})]})]})]}),u.voucherType==="discount"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Discount Type"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("button",{type:"button",onClick:()=>p({...u,discountType:"percentage"}),className:`p-2 rounded-lg border text-center transition-colors ${u.discountType==="percentage"?"border-amber-500 bg-amber-50 dark:bg-amber-900/20":"border-slate-200 dark:border-slate-700"}`,children:"Percentage (%)"}),r.jsx("button",{type:"button",onClick:()=>p({...u,discountType:"fixed"}),className:`p-2 rounded-lg border text-center transition-colors ${u.discountType==="fixed"?"border-amber-500 bg-amber-50 dark:bg-amber-900/20":"border-slate-200 dark:border-slate-700"}`,children:"Fixed (RM)"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Discount Value *"}),r.jsx("input",{type:"number",value:u.discountValue,onChange:K=>p({...u,discountValue:parseFloat(K.target.value)||0}),className:"w-full px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Min Amount (RM)"}),r.jsx("input",{type:"number",value:u.minAmount,onChange:K=>p({...u,minAmount:parseFloat(K.target.value)||0}),className:"w-full px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg"})]})]}),u.discountType==="percentage"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Max Discount (RM) - Optional"}),r.jsx("input",{type:"number",value:u.maxDiscount||"",onChange:K=>p({...u,maxDiscount:K.target.value?parseFloat(K.target.value):null}),placeholder:"No limit",className:"w-full px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg"})]})]}),u.voucherType==="activation"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Activation Days (leave empty for lifetime)"}),r.jsx("input",{type:"number",value:u.activationDays||"",onChange:K=>p({...u,activationDays:K.target.value?parseInt(K.target.value):null}),placeholder:"e.g., 30 (or leave empty for lifetime)",className:"w-full px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Total Uses"}),r.jsx("input",{type:"number",value:u.maxUses,onChange:K=>p({...u,maxUses:parseInt(K.target.value)||1}),min:"1",className:"w-full px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Per User Limit"}),r.jsx("input",{type:"number",value:u.maxUsesPerUser,onChange:K=>p({...u,maxUsesPerUser:parseInt(K.target.value)||1}),min:"1",className:"w-full px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Valid From"}),r.jsx("input",{type:"date",value:u.validFrom,onChange:K=>p({...u,validFrom:K.target.value}),className:"w-full px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Valid Until"}),r.jsx("input",{type:"date",value:u.validUntil,onChange:K=>p({...u,validUntil:K.target.value}),className:"w-full px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Description"}),r.jsx("textarea",{value:u.description,onChange:K=>p({...u,description:K.target.value}),placeholder:"Internal notes or description...",rows:2,className:"w-full px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg resize-none"})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-200 dark:border-slate-700",children:[r.jsx("button",{onClick:Z,className:"flex-1 py-2.5 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:re,disabled:j,className:"flex-1 py-2.5 bg-amber-500 hover:bg-amber-600 text-white font-medium rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:j?r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):d?"Update Voucher":"Create Voucher"})]})]})}),I&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 w-full max-w-lg",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Usage History"}),r.jsx("button",{onClick:()=>H(!1),className:"text-slate-400 hover:text-slate-600",children:r.jsx(As,{size:20})})]}),q?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(Xt,{className:"w-6 h-6 animate-spin text-amber-500"})}):ce.length===0?r.jsxs("div",{className:"text-center py-8 text-slate-500",children:[r.jsx(Gl,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"No usage history yet"})]}):r.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:ce.map(K=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:K.userName||K.userEmail||`User #${K.userId}`}),r.jsx("p",{className:"text-xs text-slate-500",children:K.createdAt})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:`text-xs px-2 py-1 rounded ${K.usageType==="activation"?"bg-purple-100 text-purple-700":"bg-green-100 text-green-700"}`,children:K.usageType}),K.discountAmount>0&&r.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["-RM ",K.discountAmount.toFixed(2)]})]})]},K.id))})]})})]})},y4={name:"",slug:"",description:"",price:0,currency:"MYR",durationDays:30,durationType:"days",status:"active",isFeatured:!1,sortOrder:0},sK=t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""),rK=(t,e)=>t===null?"Lifetime":e==="months"||t===30?t===30?"1 Month":`${Math.round(t/30)} Months`:e==="years"||t===365?t===365?"1 Year":`${Math.round(t/365)} Years`:`${t} Days`,nK=(t,e="MYR")=>`${e} ${t.toFixed(2)}`,w4=[{label:"7 Days",days:7,type:"days"},{label:"14 Days",days:14,type:"days"},{label:"1 Month",days:30,type:"months"},{label:"3 Months",days:90,type:"months"},{label:"6 Months",days:180,type:"months"},{label:"1 Year",days:365,type:"years"},{label:"Lifetime",days:null,type:"lifetime"}],aK=()=>{const[t,e]=L.useState([]),[s,n]=L.useState(!0),[a,i]=L.useState(!1),[c,A]=L.useState(!0),[d,f]=L.useState(""),[u,p]=L.useState(!1),[x,m]=L.useState(null),[j,w]=L.useState(y4),[S,C]=L.useState(!1),[F,U]=L.useState(""),[_,z]=L.useState(null),I=async(Z=!0)=>{Z?n(!0):i(!0);try{const ve=await(await fetch(`${_e}/api/admin-subscription/plans?include_inactive=${c}`,{credentials:"include"})).json();ve.plans&&e(ve.plans)}catch(re){console.error("Error fetching plans:",re),H("error","Failed to load plans")}finally{n(!1),i(!1)}};L.useEffect(()=>{I()},[c]);const H=(Z,re)=>{z({type:Z,text:re}),setTimeout(()=>z(null),3e3)},ee=Z=>{Z?(m(Z),w({name:Z.name,slug:Z.slug,description:Z.description||"",price:Z.price,currency:Z.currency,durationDays:Z.durationDays,durationType:Z.durationType,status:Z.status,isFeatured:Z.isFeatured,sortOrder:Z.sortOrder})):(m(null),w({...y4,sortOrder:t.length})),U(""),p(!0)},$=()=>{p(!1),m(null),U("")},ce=Z=>{w(re=>({...re,name:Z,slug:x?re.slug:sK(Z)}))},Q=Z=>{w(re=>({...re,durationDays:Z.days,durationType:Z.type}))},q=async()=>{if(!j.name.trim()){U("Plan name is required");return}if(!j.slug.trim()){U("Plan slug is required");return}if(j.price<0){U("Price must be 0 or greater");return}C(!0),U("");try{const Z=x?`${_e}/api/admin-subscription/plans/${x.id}`:`${_e}/api/admin-subscription/plans`,ve=await fetch(Z,{method:x?"PUT":"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(j)}),ae=await ve.json();ve.ok&&ae.success?(H("success",x?"Plan updated successfully":"Plan created successfully"),I(!1),$()):U(ae.error||"Failed to save plan")}catch{U("Network error occurred")}finally{C(!1)}},te=async Z=>{try{const re=await fetch(`${_e}/api/admin-subscription/plans/${Z}/toggle-status`,{method:"POST",credentials:"include"}),ve=await re.json();re.ok&&ve.success?(H("success",ve.message||"Status updated"),I(!1)):H("error",ve.error||"Failed to update status")}catch{H("error","Network error occurred")}},X=async Z=>{try{(await fetch(`${_e}/api/admin-subscription/plans/${Z.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({isFeatured:!Z.isFeatured})})).ok&&(H("success",Z.isFeatured?"Removed from featured":"Marked as featured"),I(!1))}catch{H("error","Failed to update")}},Ae=async(Z,re)=>{try{await fetch(`${_e}/api/admin-subscription/plans/${Z}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({sortOrder:re})}),I(!1)}catch{console.error("Failed to update sort order")}},W=t.filter(Z=>{if(!d)return!0;const re=d.toLowerCase();return Z.name.toLowerCase().includes(re)||Z.slug.toLowerCase().includes(re)}).sort((Z,re)=>Z.sortOrder-re.sortOrder),se={total:t.length,active:t.filter(Z=>Z.status==="active").length,inactive:t.filter(Z=>Z.status==="inactive").length,featured:t.filter(Z=>Z.isFeatured).length};return r.jsxs("div",{className:"space-y-6",children:[_&&r.jsxs("div",{className:`fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg flex items-center gap-2 animate-in slide-in-from-top ${_.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[_.type==="success"?r.jsx(zn,{size:18}):r.jsx(ur,{size:18}),_.text]}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(p1,{className:"w-6 h-6 text-amber-500"}),"Subscription Plans"]}),r.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Manage your subscription plans and pricing"})]}),r.jsxs("button",{onClick:()=>ee(),className:"flex items-center gap-2 px-4 py-2.5 bg-amber-500 hover:bg-amber-600 text-white font-medium rounded-lg transition-colors shadow-lg shadow-amber-500/20",children:[r.jsx(ln,{size:18})," Create Plan"]})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:r.jsx(p1,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:se.total}),r.jsx("p",{className:"text-xs text-slate-500",children:"Total Plans"})]})]})}),r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center",children:r.jsx(yn,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:se.active}),r.jsx("p",{className:"text-xs text-slate-500",children:"Active"})]})]})}),r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:r.jsx(xA,{className:"w-5 h-5 text-gray-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-500",children:se.inactive}),r.jsx("p",{className:"text-xs text-slate-500",children:"Inactive"})]})]})}),r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-amber-100 dark:bg-amber-900/30 rounded-lg flex items-center justify-center",children:r.jsx(yA,{className:"w-5 h-5 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-amber-600",children:se.featured}),r.jsx("p",{className:"text-xs text-slate-500",children:"Featured"})]})]})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(tl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Search plans...",value:d,onChange:Z=>f(Z.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg"})]}),r.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:c,onChange:Z=>A(Z.target.checked),className:"rounded border-slate-300"}),r.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Show Inactive"})]}),r.jsx("button",{onClick:()=>I(!1),disabled:a,className:"p-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:r.jsx(yl,{className:`w-5 h-5 text-slate-500 ${a?"animate-spin":""}`})})]}),s?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx(Xt,{className:"w-8 h-8 animate-spin text-amber-500"})}):W.length===0?r.jsxs("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[r.jsx(p1,{className:"w-12 h-12 mx-auto mb-3 text-slate-300 dark:text-slate-600"}),r.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:d?"No plans found":"No subscription plans yet"}),r.jsx("button",{onClick:()=>ee(),className:"mt-4 px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600",children:"Create First Plan"})]}):r.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-900/50 border-b border-slate-200 dark:border-slate-700",children:[r.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Order"}),r.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Plan"}),r.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Price"}),r.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Duration"}),r.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"text-center px-4 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Featured"}),r.jsx("th",{className:"text-right px-4 py-3 text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:W.map((Z,re)=>r.jsxs("tr",{className:`hover:bg-slate-50 dark:hover:bg-slate-900/30 transition-colors ${Z.status==="inactive"?"opacity-60":""}`,children:[r.jsx("td",{className:"px-4 py-4",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>re>0&&Ae(Z.id,Z.sortOrder-1),disabled:re===0,className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded disabled:opacity-30",children:r.jsx(jg,{size:14})}),r.jsx("span",{className:"text-sm text-slate-500 w-6 text-center",children:Z.sortOrder}),r.jsx("button",{onClick:()=>re<W.length-1&&Ae(Z.id,Z.sortOrder+1),disabled:re===W.length-1,className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded disabled:opacity-30",children:r.jsx(wg,{size:14})})]})}),r.jsx("td",{className:"px-4 py-4",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:Z.name}),r.jsx("p",{className:"text-xs text-slate-500 font-mono",children:Z.slug})]})}),r.jsx("td",{className:"px-4 py-4",children:r.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:nK(Z.price,Z.currency)})}),r.jsx("td",{className:"px-4 py-4",children:r.jsxs("div",{className:"flex items-center gap-1.5",children:[Z.isLifetime?r.jsx(IT,{className:"w-4 h-4 text-amber-500"}):r.jsx(on,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:rK(Z.durationDays,Z.durationType)})]})}),r.jsx("td",{className:"px-4 py-4 text-center",children:r.jsx("button",{onClick:()=>te(Z.id),className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium transition-colors ${Z.status==="active"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 hover:bg-green-200":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-200"}`,children:Z.status==="active"?r.jsxs(r.Fragment,{children:[r.jsx(yn,{size:12})," Active"]}):r.jsxs(r.Fragment,{children:[r.jsx(xA,{size:12})," Inactive"]})})}),r.jsx("td",{className:"px-4 py-4 text-center",children:r.jsx("button",{onClick:()=>X(Z),className:`p-2 rounded-lg transition-colors ${Z.isFeatured?"text-amber-500 bg-amber-50 dark:bg-amber-900/20 hover:bg-amber-100":"text-slate-400 hover:text-amber-500 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:Z.isFeatured?r.jsx(yA,{size:18,fill:"currentColor"}):r.jsx(f8,{size:18})})}),r.jsx("td",{className:"px-4 py-4 text-right",children:r.jsxs("button",{onClick:()=>ee(Z),className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm text-amber-600 hover:text-amber-700 hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-lg transition-colors",children:[r.jsx(Wf,{size:14}),"Edit"]})})]},Z.id))})]})})}),u&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto border border-slate-200 dark:border-slate-800",children:[r.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between sticky top-0 bg-white dark:bg-slate-900",children:[r.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:x?"Edit Plan":"Create New Plan"}),r.jsx("button",{onClick:$,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:r.jsx(As,{size:20})})]}),r.jsxs("div",{className:"p-6 space-y-5",children:[F&&r.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-600 dark:text-red-400 text-sm",children:[r.jsx(ur,{size:16}),F]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Plan Name *"}),r.jsx("input",{type:"text",value:j.name,onChange:Z=>ce(Z.target.value),placeholder:"e.g., Monthly Premium",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Slug *"}),r.jsx("input",{type:"text",value:j.slug,onChange:Z=>w({...j,slug:Z.target.value}),placeholder:"e.g., monthly",disabled:!!x,className:"w-full px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent font-mono text-sm disabled:opacity-50 disabled:cursor-not-allowed"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"URL-friendly identifier. Cannot be changed after creation."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Price (MYR) *"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",children:"RM"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:j.price,onChange:Z=>w({...j,price:parseFloat(Z.target.value)||0}),className:"w-full pl-14 pr-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Duration"}),r.jsx("div",{className:"grid grid-cols-4 gap-2 mb-3",children:w4.slice(0,4).map(Z=>r.jsx("button",{type:"button",onClick:()=>Q(Z),className:`px-3 py-2 text-sm rounded-lg border transition-colors ${j.durationDays===Z.days?"border-amber-500 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-400":"border-slate-200 dark:border-slate-700 hover:border-amber-300"}`,children:Z.label},Z.label))}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:w4.slice(4).map(Z=>r.jsx("button",{type:"button",onClick:()=>Q(Z),className:`px-3 py-2 text-sm rounded-lg border transition-colors ${j.durationDays===Z.days?"border-amber-500 bg-amber-50 dark:bg-amber-900/20 text-amber-700 dark:text-amber-400":"border-slate-200 dark:border-slate-700 hover:border-amber-300"}`,children:Z.label},Z.label))}),j.durationDays!==null&&r.jsxs("div",{className:"mt-3",children:[r.jsx("label",{className:"text-xs text-slate-500 mb-1 block",children:"Custom Days"}),r.jsx("input",{type:"number",min:"1",value:j.durationDays||"",onChange:Z=>w({...j,durationDays:parseInt(Z.target.value)||null,durationType:"days"}),className:"w-full px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Description"}),r.jsx("textarea",{value:j.description,onChange:Z=>w({...j,description:Z.target.value}),placeholder:"Brief description of this plan...",rows:3,className:"w-full px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent resize-none"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Status"}),r.jsxs("select",{value:j.status,onChange:Z=>w({...j,status:Z.target.value}),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"Sort Order"}),r.jsx("input",{type:"number",min:"0",value:j.sortOrder,onChange:Z=>w({...j,sortOrder:parseInt(Z.target.value)||0}),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg"})]})]}),r.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800 rounded-lg cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:j.isFeatured,onChange:Z=>w({...j,isFeatured:Z.target.checked}),className:"w-5 h-5 rounded border-slate-300 text-amber-500 focus:ring-amber-500"}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-slate-900 dark:text-white flex items-center gap-2",children:[r.jsx(yA,{size:16,className:"text-amber-500"}),"Mark as Featured"]}),r.jsx("p",{className:"text-xs text-slate-500",children:"Featured plans are highlighted to users"})]})]})]}),r.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-800 flex gap-3",children:[r.jsx("button",{onClick:$,className:"flex-1 py-2.5 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:q,disabled:S,className:"flex-1 py-2.5 bg-amber-500 hover:bg-amber-600 text-white font-medium rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:S?r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(md,{size:16}),x?"Update Plan":"Create Plan"]})})]})]})})]})};async function iK(){try{const t=await fetch(`${_e}/check_login_status`,{credentials:"include"});if(!t.ok)return null;const e=await t.json();if(!e.logged_in)return null;const s=e.user;return{id:s.id,name:s.full_name||s.name||s.email||"Admin",email:s.email||"",role:e.role||s.role||"admin"}}catch{return null}}async function lK(t){const e=new URLSearchParams;t.type&&t.type!=="all"&&e.set("type",t.type),t.status&&t.status!=="all"&&e.set("status",t.status),t.page&&e.set("page",t.page.toString()),t.limit&&e.set("limit",t.limit.toString()),t.assignedTo&&e.set("assigned_to",t.assignedTo.toString());const s=await fetch(`${_e}/api/admin/inquiries?${e}`,{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch inquiries");return s.json()}async function oK(t){const e=await fetch(`${_e}/api/admin/inquiries/${t}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch inquiry");return(await e.json()).data}async function cK(t,e){const s=await fetch(`${_e}/api/admin/inquiries/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)});if(!s.ok){const a=await s.json().catch(()=>({}));throw new Error(a.error||"Failed to update inquiry")}return(await s.json()).data}async function AK(){const t=await fetch(`${_e}/api/admin/inquiries/stats`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch stats");return(await t.json()).data}async function dK(){try{const t=await fetch(`${_e}/api/admin/users/admins`,{credentials:"include"});return t.ok?(await t.json()).data||[]:[]}catch{return[]}}const X3=({status:t})=>{const e={pending:{bg:"bg-amber-50",text:"text-amber-700",icon:r.jsx(on,{className:"w-3 h-3"})},in_progress:{bg:"bg-blue-50",text:"text-blue-700",icon:r.jsx(Xt,{className:"w-3 h-3"})},resolved:{bg:"bg-green-50",text:"text-green-700",icon:r.jsx(sa,{className:"w-3 h-3"})},closed:{bg:"bg-slate-100",text:"text-slate-600",icon:r.jsx(As,{className:"w-3 h-3"})}},{bg:s,text:n,icon:a}=e[t]||e.pending;return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${s} ${n}`,children:[a,t.replace("_"," ").replace(/\b\w/g,i=>i.toUpperCase())]})},uK=({priority:t})=>{const e={low:{bg:"bg-slate-100",text:"text-slate-600"},normal:{bg:"bg-blue-50",text:"text-blue-600"},high:{bg:"bg-red-50",text:"text-red-600"}},{bg:s,text:n}=e[t]||e.normal;return r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${s} ${n}`,children:t.charAt(0).toUpperCase()+t.slice(1)})},Z3=({type:t})=>{const e=t==="contact";return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium ${e?"bg-purple-50 text-purple-700":"bg-emerald-50 text-emerald-700"}`,children:[e?r.jsx(Cu,{className:"w-3 h-3"}):r.jsx(Dy,{className:"w-3 h-3"}),e?"Contact":"Merchant"]})},hK=({stats:t,loading:e})=>{var n,a;if(e||!t)return r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[1,2,3,4].map(i=>r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-slate-200 rounded w-20 mb-2"}),r.jsx("div",{className:"h-8 bg-slate-200 rounded w-12"})]},i))});const s=[{label:"Total Inquiries",value:t.total,icon:Sp,color:"text-slate-600",bg:"bg-slate-50"},{label:"Pending",value:t.pending,icon:on,color:"text-amber-600",bg:"bg-amber-50"},{label:"Contact",value:((n=t.byType)==null?void 0:n.contact)||0,icon:Cu,color:"text-purple-600",bg:"bg-purple-50"},{label:"Merchant",value:((a=t.byType)==null?void 0:a.merchant)||0,icon:Dy,color:"text-emerald-600",bg:"bg-emerald-50"}];return r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:s.map((i,c)=>r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm text-slate-500",children:i.label}),r.jsx("div",{className:`w-8 h-8 rounded-lg ${i.bg} flex items-center justify-center`,children:r.jsx(i.icon,{className:`w-4 h-4 ${i.color}`})})]}),r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:i.value})]},c))})},fK=({inquiry:t,isOpen:e,onClose:s,onUpdate:n,admins:a,currentUser:i})=>{const[c,A]=L.useState(!1),[d,f]=L.useState({status:"",priority:"",assignedAdminId:"",adminNotes:""}),[u,p]=L.useState(!1),[x,m]=L.useState(null),j=Ey(i.role),w=j||(t==null?void 0:t.assignedAdminId)===i.id;L.useEffect(()=>{var U;t&&(f({status:t.status,priority:t.priority,assignedAdminId:((U=t.assignedAdminId)==null?void 0:U.toString())||"",adminNotes:t.adminNotes||""}),A(!1),m(null))},[t]);const S=async()=>{if(t){m(null),p(!0);try{const U={status:d.status,priority:d.priority,adminNotes:d.adminNotes};j&&(U.assignedAdminId=d.assignedAdminId?parseInt(d.assignedAdminId):null),await n(t.id,U),A(!1)}catch(U){m(U.message||"Failed to update inquiry")}finally{p(!1)}}};if(!e||!t)return null;const C=t.assignedAdminId===i.id,F=!t.assignedAdminId;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black/30 z-40",onClick:s}),r.jsxs("div",{className:"fixed right-0 top-0 h-full w-full max-w-xl bg-white shadow-2xl z-50 overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Z3,{type:t.inquiryType}),r.jsxs("span",{className:"text-slate-400",children:["#",t.id]})]}),r.jsx("button",{onClick:s,className:"p-2 hover:bg-slate-100 rounded-lg",children:r.jsx(As,{className:"w-5 h-5 text-slate-500"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[!j&&!C&&!F&&r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-start gap-3",children:[r.jsx(Vl,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-amber-800",children:"View Only"}),r.jsx("p",{className:"text-sm text-amber-700",children:"This inquiry is assigned to another admin."})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide",children:"Contact Information"}),r.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ta,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"font-medium text-slate-800",children:t.name})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ko,{className:"w-4 h-4 text-slate-400"}),r.jsx("a",{href:`mailto:${t.email}`,className:"text-blue-600 hover:underline",children:t.email})]}),t.businessName&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(z4,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-700",children:t.businessName})]}),t.subject&&r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Jg,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-700",children:t.subject})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide",children:"Message"}),r.jsx("div",{className:"bg-slate-50 rounded-xl p-4",children:r.jsx("p",{className:"text-slate-700 whitespace-pre-wrap leading-relaxed",children:t.message})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide",children:"Status & Assignment"}),!c&&w&&r.jsx("button",{onClick:()=>A(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Edit"})]}),x&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700",children:x}),c?r.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Status"}),r.jsxs("select",{value:d.status,onChange:U=>f({...d,status:U.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg bg-white",children:[r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"resolved",children:"Resolved"}),r.jsx("option",{value:"closed",children:"Closed"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),r.jsxs("select",{value:d.priority,onChange:U=>f({...d,priority:U.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg bg-white",children:[r.jsx("option",{value:"low",children:"Low"}),r.jsx("option",{value:"normal",children:"Normal"}),r.jsx("option",{value:"high",children:"High"})]})]}),j?r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r.jsxs("span",{className:"flex items-center gap-2",children:["Assigned Admin",r.jsx(jo,{className:"w-3 h-3 text-purple-500"})]})}),r.jsxs("select",{value:d.assignedAdminId,onChange:U=>f({...d,assignedAdminId:U.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-lg bg-white",children:[r.jsx("option",{value:"",children:"Unassigned"}),a.map(U=>r.jsxs("option",{value:U.id,children:[U.name," (",U.email,")"]},U.id))]})]}):r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:r.jsxs("span",{className:"flex items-center gap-2",children:["Assigned Admin",r.jsx(Vl,{className:"w-3 h-3 text-slate-400"})]})}),r.jsxs("div",{className:"w-full px-3 py-2 border border-slate-200 rounded-lg bg-slate-100 text-slate-600",children:[t.assignedAdminName||"Unassigned",r.jsx("span",{className:"text-xs text-slate-400 ml-2",children:"(Super Admin only)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Admin Notes"}),r.jsx("textarea",{value:d.adminNotes,onChange:U=>f({...d,adminNotes:U.target.value}),rows:3,placeholder:"Internal notes...",className:"w-full px-3 py-2 border border-slate-200 rounded-lg bg-white"})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsxs("button",{onClick:S,disabled:u,className:"flex-1 px-4 py-2 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[u?r.jsx(Xt,{className:"w-4 h-4 animate-spin"}):r.jsx(sa,{className:"w-4 h-4"}),"Save Changes"]}),r.jsx("button",{onClick:()=>{A(!1),m(null)},className:"px-4 py-2 bg-white border border-slate-200 text-slate-600 font-medium rounded-lg hover:bg-slate-50",children:"Cancel"})]})]}):r.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-slate-500",children:"Status"}),r.jsx(X3,{status:t.status})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-slate-500",children:"Priority"}),r.jsx(uK,{priority:t.priority})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-slate-500",children:"Assigned To"}),r.jsxs("span",{className:"text-sm font-medium text-slate-700 flex items-center gap-2",children:[t.assignedAdminName||"Unassigned",C&&r.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"You"})]})]}),t.adminNotes&&r.jsxs("div",{className:"pt-2 border-t border-slate-200",children:[r.jsxs("span",{className:"text-sm text-slate-500 flex items-center gap-1 mb-1",children:[r.jsx(Z4,{className:"w-3 h-3"})," Admin Notes"]}),r.jsx("p",{className:"text-sm text-slate-600",children:t.adminNotes})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-sm font-semibold text-slate-500 uppercase tracking-wide",children:"Timeline"}),r.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("span",{className:"text-slate-500 flex items-center gap-2",children:[r.jsx(Mn,{className:"w-3 h-3"})," Created"]}),r.jsx("span",{className:"text-slate-700",children:new Date(t.createdAt).toLocaleString()})]}),t.resolvedAt&&r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("span",{className:"text-slate-500 flex items-center gap-2",children:[r.jsx(sa,{className:"w-3 h-3 text-green-500"})," Resolved"]}),r.jsx("span",{className:"text-green-600 font-medium",children:new Date(t.resolvedAt).toLocaleString()})]})]})]})]}),r.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50",children:r.jsxs("a",{href:`mailto:${t.email}?subject=Re: ${t.subject||"Your Inquiry"}`,className:"w-full px-4 py-3 bg-blue-600 text-white font-medium rounded-xl hover:bg-blue-700 flex items-center justify-center gap-2",children:[r.jsx(ko,{className:"w-4 h-4"}),"Reply via Email",r.jsx(g6,{className:"w-4 h-4"})]})})]})]})},pK=()=>{const[t,e]=L.useState(null),[s,n]=L.useState(!0),[a,i]=L.useState("all"),[c,A]=L.useState("all"),[d,f]=L.useState("all"),[u,p]=L.useState(""),[x,m]=L.useState([]),[j,w]=L.useState(null),[S,C]=L.useState([]),[F,U]=L.useState(!0),[_,z]=L.useState(!0),[I,H]=L.useState(null),[ee,$]=L.useState(!1),[ce,Q]=L.useState(1),[q,te]=L.useState(null),X=t?Ey(t.role):!1,Ae=t?Ey(t.role):!1;L.useEffect(()=>{(async()=>{n(!0);const V=await iK();e(V),n(!1)})()},[]);const W=async()=>{if(t){U(!0);try{let P;(!X&&d==="all"||d==="mine")&&(P=t.id);const V=await lK({type:a,status:c,page:ce,limit:20,assignedTo:P});m(V.data||[]),te(V.pagination)}catch(P){console.error("Failed to load inquiries:",P)}finally{U(!1)}}},se=async()=>{z(!0);try{const P=await AK();w(P)}catch(P){console.error("Failed to load stats:",P)}finally{z(!1)}},Z=async()=>{if(Ae){const P=await dK();C(P)}};L.useEffect(()=>{t&&W()},[t,a,c,d,ce]),L.useEffect(()=>{t&&(se(),Z())},[t]);const re=async P=>{try{const V=await oK(P.id);H(V),$(!0)}catch(V){console.error("Failed to load inquiry detail:",V)}},ve=async(P,V)=>{const K=await cK(P,V);H(K),W(),se()},ae=()=>{W(),se()},R=x.filter(P=>{var K,ne;if(!u)return!0;const V=u.toLowerCase();return P.name.toLowerCase().includes(V)||P.email.toLowerCase().includes(V)||((K=P.businessName)==null?void 0:K.toLowerCase().includes(V))||((ne=P.subject)==null?void 0:ne.toLowerCase().includes(V))||P.message.toLowerCase().includes(V)});return s?r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsx(Xt,{className:"w-8 h-8 text-blue-600 animate-spin"})}):t?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:["Inquiry Management",Ae&&r.jsxs("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs font-medium rounded-full flex items-center gap-1",children:[r.jsx(jo,{className:"w-3 h-3"})," Super Admin"]})]}),r.jsx("p",{className:"text-slate-500 text-sm mt-1",children:X?"Manage contact and merchant partnership inquiries":"View and handle inquiries assigned to you"})]}),r.jsxs("button",{onClick:ae,className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 text-slate-600",children:[r.jsx(yl,{className:"w-4 h-4"}),"Refresh"]})]}),r.jsx(hK,{stats:j,loading:_}),r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[r.jsx("div",{className:"flex border-b border-slate-200",children:[{id:"all",label:"All Inquiries",icon:Sp},{id:"contact",label:"Contact",icon:Cu},{id:"merchant",label:"Merchant",icon:Dy}].map(P=>{var V;return r.jsxs("button",{onClick:()=>{i(P.id),Q(1)},className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 -mb-px ${a===P.id?"border-blue-600 text-blue-600 bg-blue-50/50":"border-transparent text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:[r.jsx(P.icon,{className:"w-4 h-4"}),P.label,P.id!=="all"&&j&&r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${a===P.id?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600"}`,children:((V=j.byType)==null?void 0:V[P.id])||0})]},P.id)})}),r.jsxs("div",{className:"p-4 border-b border-slate-100 flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(tl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Search by name, email, or message...",value:u,onChange:P=>p(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg"})]}),X&&r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:d,onChange:P=>{f(P.target.value),Q(1)},className:"appearance-none px-4 py-2 pr-10 border border-slate-200 rounded-lg bg-white text-slate-600",children:[r.jsx("option",{value:"all",children:"All Assignments"}),r.jsx("option",{value:"mine",children:"Assigned to Me"}),r.jsx("option",{value:"unassigned",children:"Unassigned"})]}),r.jsx(Of,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:c,onChange:P=>{A(P.target.value),Q(1)},className:"appearance-none px-4 py-2 pr-10 border border-slate-200 rounded-lg bg-white text-slate-600",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"resolved",children:"Resolved"}),r.jsx("option",{value:"closed",children:"Closed"})]}),r.jsx(Of,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),r.jsx("div",{className:"overflow-x-auto",children:F?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Xt,{className:"w-8 h-8 text-blue-600 animate-spin"})}):R.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-500",children:[r.jsx(Sp,{className:"w-12 h-12 text-slate-300 mb-3"}),r.jsx("p",{className:"font-medium",children:"No inquiries found"}),r.jsx("p",{className:"text-sm",children:X?"Try adjusting your filters":"No inquiries are assigned to you yet"})]}):r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase",children:"Type"}),r.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase",children:"Contact"}),r.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase",children:"Subject / Business"}),r.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase",children:"Status"}),r.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase",children:"Assigned"}),r.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase",children:"Created"}),r.jsx("th",{className:"text-left px-4 py-3 text-xs font-semibold text-slate-500 uppercase"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:R.map(P=>{const V=P.assignedAdminId===t.id;return r.jsxs("tr",{className:"hover:bg-slate-50 cursor-pointer",onClick:()=>re(P),children:[r.jsx("td",{className:"px-4 py-3",children:r.jsx(Z3,{type:P.inquiryType})}),r.jsxs("td",{className:"px-4 py-3",children:[r.jsx("div",{className:"font-medium text-slate-800",children:P.name}),r.jsx("div",{className:"text-sm text-slate-500",children:P.email})]}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("div",{className:"max-w-xs truncate text-slate-600",children:P.inquiryType==="merchant"?P.businessName:P.subject||"-"})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx(X3,{status:P.status})}),r.jsx("td",{className:"px-4 py-3",children:r.jsxs("span",{className:"text-sm text-slate-600 flex items-center gap-1",children:[P.assignedAdminName||r.jsx("span",{className:"text-slate-400 italic",children:"Unassigned"}),V&&r.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded ml-1",children:"You"})]})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("span",{className:"text-sm text-slate-500",children:new Date(P.createdAt).toLocaleDateString()})}),r.jsx("td",{className:"px-4 py-3",children:r.jsx("button",{onClick:K=>{K.stopPropagation(),re(P)},className:"p-2 hover:bg-slate-100 rounded-lg",children:r.jsx(yn,{className:"w-4 h-4 text-slate-400"})})})]},P.id)})})]})}),q&&q.pages>1&&r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-200 bg-slate-50",children:[r.jsxs("span",{className:"text-sm text-slate-500",children:["Showing ",(ce-1)*20+1," - ",Math.min(ce*20,q.total)," of ",q.total]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Q(P=>Math.max(1,P-1)),disabled:ce===1,className:"px-3 py-1 border border-slate-200 rounded-lg text-sm disabled:opacity-50",children:"Previous"}),r.jsx("button",{onClick:()=>Q(P=>Math.min(q.pages,P+1)),disabled:ce===q.pages,className:"px-3 py-1 border border-slate-200 rounded-lg text-sm disabled:opacity-50",children:"Next"})]})]})]}),t&&r.jsx(fK,{inquiry:I,isOpen:ee,onClose:()=>{$(!1),H(null)},onUpdate:ve,admins:S,currentUser:t})]}):r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[r.jsx(ur,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),r.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"Authentication Required"}),r.jsx("p",{className:"text-red-600 mt-1",children:"Please log in to access the inquiry management."})]})},mK=({onNavigate:t})=>{const[e,s]=L.useState([]),[n,a]=L.useState(null),[i,c]=L.useState(null),[A,d]=L.useState(!0),[f,u]=L.useState(null),[p,x]=L.useState("all"),[m,j]=L.useState(""),[w,S]=L.useState(1),[C,F]=L.useState(null),[U,_]=L.useState(""),[z,I]=L.useState(!1),[H,ee]=L.useState(null);L.useEffect(()=>{$()},[p,w]);const $=async()=>{d(!0);try{const X=new URLSearchParams({page:w.toString(),per_page:"20"});p&&p!=="all"&&X.append("status",p),m&&X.append("search",m);const Ae=await fetch(`${_e}/api/blogs/admin/all?${X}`,{credentials:"include"});if(Ae.ok){const W=await Ae.json();W.success&&(s(W.blogs||[]),a(W.stats||null),c(W.pagination||null))}}catch(X){console.error("Failed to fetch blogs:",X)}finally{d(!1)}},ce=async X=>{F(X);try{(await fetch(`${_e}/api/blogs/admin/${X}/approve`,{method:"POST",credentials:"include"})).ok&&$()}catch(Ae){console.error("Failed to approve blog:",Ae)}finally{F(null)}},Q=async()=>{if(H){F(H);try{(await fetch(`${_e}/api/blogs/admin/${H}/reject`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:U||"Content does not meet community guidelines"})})).ok&&(I(!1),ee(null),_(""),$())}catch(X){console.error("Failed to reject blog:",X)}finally{F(null)}}},q=async X=>{F(X);try{(await fetch(`${_e}/api/blogs/admin/${X}/hide`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:"Hidden by admin"})})).ok&&$()}catch(Ae){console.error("Failed to hide blog:",Ae)}finally{F(null)}},te=X=>{const Ae={draft:{color:"bg-slate-100 text-slate-600",icon:r.jsx(on,{className:"w-3 h-3"}),text:"Draft"},pending:{color:"bg-yellow-100 text-yellow-700",icon:r.jsx(ur,{className:"w-3 h-3"}),text:"Pending Review"},published:{color:"bg-green-100 text-green-700",icon:r.jsx(zn,{className:"w-3 h-3"}),text:"Published"},rejected:{color:"bg-red-100 text-red-700",icon:r.jsx(rc,{className:"w-3 h-3"}),text:"Rejected"},hidden:{color:"bg-orange-100 text-orange-700",icon:r.jsx(xA,{className:"w-3 h-3"}),text:"Hidden"}},W=Ae[X]||Ae.draft;return r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${W.color}`,children:[W.icon,W.text]})};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[r.jsx(Kl,{className:"w-7 h-7 text-blue-600"}),"Blog Moderation"]}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Review and manage user blog posts"})]})}),n&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 shadow-sm",children:[r.jsx("div",{className:"text-2xl font-bold text-slate-900",children:n.total}),r.jsx("div",{className:"text-sm text-slate-500",children:"Total Blogs"})]}),r.jsxs("div",{className:"bg-yellow-50 rounded-2xl p-4 border border-yellow-100",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:n.pending}),r.jsx("div",{className:"text-sm text-yellow-600",children:"Pending Review"})]}),r.jsxs("div",{className:"bg-green-50 rounded-2xl p-4 border border-green-100",children:[r.jsx("div",{className:"text-2xl font-bold text-green-700",children:n.published}),r.jsx("div",{className:"text-sm text-green-600",children:"Published"})]}),r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-100",children:[r.jsx("div",{className:"text-2xl font-bold text-slate-700",children:n.draft}),r.jsx("div",{className:"text-sm text-slate-500",children:"Drafts"})]}),r.jsxs("div",{className:"bg-red-50 rounded-2xl p-4 border border-red-100",children:[r.jsx("div",{className:"text-2xl font-bold text-red-700",children:n.rejected}),r.jsx("div",{className:"text-sm text-red-600",children:"Rejected"})]})]}),r.jsx("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 shadow-sm",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(tl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",placeholder:"Search blogs by title or content...",value:m,onChange:X=>j(X.target.value),onKeyDown:X=>X.key==="Enter"&&$(),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($4,{className:"w-5 h-5 text-slate-400"}),r.jsxs("select",{value:p,onChange:X=>{x(X.target.value),S(1)},className:"px-4 py-2.5 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending Review"}),r.jsx("option",{value:"published",children:"Published"}),r.jsx("option",{value:"draft",children:"Draft"}),r.jsx("option",{value:"rejected",children:"Rejected"}),r.jsx("option",{value:"hidden",children:"Hidden"})]})]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[A?r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsx(Xt,{className:"w-8 h-8 text-blue-600 animate-spin"})}):e.length===0?r.jsxs("div",{className:"text-center py-20",children:[r.jsx(Kl,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"No blogs found"}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Adjust your filters or check back later"})]}):r.jsx("div",{className:"divide-y divide-slate-100",children:e.map(X=>r.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-xl bg-slate-100 overflow-hidden flex-shrink-0",children:X.coverImage?r.jsx("img",{src:X.coverImage,alt:X.title,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-purple-500"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-slate-900 line-clamp-1",children:X.title}),r.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-slate-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ta,{className:"w-4 h-4"}),X.authorName]}),r.jsx("span",{children:X.createdAt}),r.jsx("span",{className:"px-2 py-0.5 bg-slate-100 rounded text-xs",children:X.category})]}),r.jsx("p",{className:"text-sm text-slate-500 mt-2 line-clamp-2",children:X.excerpt})]}),te(X.status)]}),r.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-slate-100",children:[r.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[r.jsxs("span",{children:[X.views," views"]}),r.jsxs("span",{children:[X.likesCount," likes"]}),r.jsxs("span",{children:[X.commentsCount," comments"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>u(X),className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:r.jsx(yn,{className:"w-4 h-4"})}),(X.status==="pending"||X.status==="draft")&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>ce(X.id),disabled:C===X.id,className:"flex items-center gap-1.5 px-3 py-1.5 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[C===X.id?r.jsx(Xt,{className:"w-4 h-4 animate-spin"}):r.jsx(ea,{className:"w-4 h-4"}),X.status==="draft"?"Publish":"Approve"]}),r.jsxs("button",{onClick:()=>{ee(X.id),I(!0)},disabled:C===X.id,className:"flex items-center gap-1.5 px-3 py-1.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:[r.jsx(As,{className:"w-4 h-4"}),"Reject"]})]}),X.status==="published"&&r.jsxs("button",{onClick:()=>q(X.id),disabled:C===X.id,className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50",children:[C===X.id?r.jsx(Xt,{className:"w-4 h-4 animate-spin"}):r.jsx(xA,{className:"w-4 h-4"}),"Hide"]})]})]})]})]})},X.id))}),i&&i.pages>1&&r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-100",children:[r.jsxs("div",{className:"text-sm text-slate-500",children:["Showing page ",i.page," of ",i.pages," (",i.total," total)"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>S(X=>Math.max(1,X-1)),disabled:!i.hasPrev,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors",children:r.jsx(Lu,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>S(X=>Math.min(i.pages,X+1)),disabled:!i.hasNext,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors",children:r.jsx(ai,{className:"w-4 h-4"})})]})]})]}),f&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-100",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Blog Details"}),r.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(As,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[f.coverImage&&r.jsx("img",{src:f.coverImage,alt:f.title,className:"w-full h-64 object-cover rounded-xl mb-6"}),r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[te(f.status),r.jsx("span",{className:"px-2.5 py-1 bg-slate-100 rounded-full text-xs font-medium text-slate-600",children:f.category})]}),r.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:f.title}),r.jsxs("div",{className:"flex items-center gap-4 mb-6 text-sm text-slate-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ta,{className:"w-4 h-4"}),f.authorName]}),r.jsx("span",{children:f.createdAt})]}),r.jsx("div",{className:"prose prose-slate max-w-none",dangerouslySetInnerHTML:{__html:f.content}}),f.rejectionReason&&r.jsxs("div",{className:"mt-6 p-4 bg-red-50 rounded-xl border border-red-100",children:[r.jsx("h4",{className:"font-medium text-red-700 mb-1",children:"Rejection Reason"}),r.jsx("p",{className:"text-red-600 text-sm",children:f.rejectionReason})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-100 bg-slate-50",children:[(f.status==="pending"||f.status==="draft")&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{ce(f.id),u(null)},className:"px-4 py-2 bg-green-600 text-white font-medium rounded-xl hover:bg-green-700 transition-colors",children:f.status==="draft"?"Publish":"Approve & Publish"}),r.jsx("button",{onClick:()=>{ee(f.id),I(!0),u(null)},className:"px-4 py-2 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 transition-colors",children:"Reject"})]}),r.jsx("button",{onClick:()=>u(null),className:"px-4 py-2 bg-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-300 transition-colors",children:"Close"})]})]})}),z&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[r.jsx("div",{className:"px-6 py-4 border-b border-slate-100",children:r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Reject Blog"})}),r.jsxs("div",{className:"p-6",children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Reason for rejection (optional)"}),r.jsx("textarea",{value:U,onChange:X=>_(X.target.value),placeholder:"Content does not meet community guidelines...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-red-500 focus:ring-2 focus:ring-red-500/20 transition-all resize-none",rows:4})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-100 bg-slate-50 rounded-b-2xl",children:[r.jsx("button",{onClick:()=>{I(!1),ee(null),_("")},className:"px-4 py-2 bg-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-300 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:Q,disabled:C!==null,className:"px-4 py-2 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50",children:C?r.jsx(Xt,{className:"w-4 h-4 animate-spin"}):"Reject Blog"})]})]})})]})},gK=({onNavigate:t})=>{const[e,s]=L.useState([]),[n,a]=L.useState(null),[i,c]=L.useState(null),[A,d]=L.useState(!0),[f,u]=L.useState(null),[p,x]=L.useState("pending"),[m,j]=L.useState(1),[w,S]=L.useState(null),[C,F]=L.useState(!1),[U,_]=L.useState(null),[z,I]=L.useState(""),[H,ee]=L.useState("none");L.useEffect(()=>{$()},[p,m]);const $=async()=>{d(!0);try{const X=new URLSearchParams({page:m.toString(),per_page:"20"});p&&p!=="all"&&X.append("status",p);const Ae=await fetch(`${_e}/api/blogs/admin/reports?${X}`,{credentials:"include"});if(Ae.ok){const W=await Ae.json();W.success&&(s(W.reports||[]),a(W.stats||null),c(W.pagination||null))}}catch(X){console.error("Failed to fetch reports:",X)}finally{d(!1)}},ce=async X=>{if(U){S(U.id);try{(await fetch(`${_e}/api/blogs/admin/reports/${U.id}/review`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:H,adminNotes:z,status:X})})).ok&&(F(!1),_(null),I(""),ee("none"),$())}catch(Ae){console.error("Failed to review report:",Ae)}finally{S(null)}}},Q=X=>{const Ae={pending:{color:"bg-yellow-100 text-yellow-700",icon:r.jsx(on,{className:"w-3 h-3"}),text:"Pending"},reviewed:{color:"bg-blue-100 text-blue-700",icon:r.jsx(yn,{className:"w-3 h-3"}),text:"Reviewed"},resolved:{color:"bg-green-100 text-green-700",icon:r.jsx(zn,{className:"w-3 h-3"}),text:"Resolved"},dismissed:{color:"bg-slate-100 text-slate-600",icon:r.jsx(rc,{className:"w-3 h-3"}),text:"Dismissed"}},W=Ae[X]||Ae.pending;return r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${W.color}`,children:[W.icon,W.text]})},q=X=>{const Ae={spam:{color:"bg-orange-100 text-orange-700",text:"Spam"},inappropriate:{color:"bg-red-100 text-red-700",text:"Inappropriate"},harassment:{color:"bg-purple-100 text-purple-700",text:"Harassment"},misinformation:{color:"bg-blue-100 text-blue-700",text:"Misinformation"},other:{color:"bg-slate-100 text-slate-600",text:"Other"}},W=Ae[X]||Ae.other;return r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${W.color}`,children:W.text})},te=X=>{if(!X||X==="none")return null;const W={warning:{color:"bg-yellow-100 text-yellow-700",icon:r.jsx(ur,{className:"w-3 h-3"}),text:"Warning Sent"},hidden:{color:"bg-orange-100 text-orange-700",icon:r.jsx(xA,{className:"w-3 h-3"}),text:"Content Hidden"},deleted:{color:"bg-red-100 text-red-700",icon:r.jsx(na,{className:"w-3 h-3"}),text:"Content Deleted"}}[X];return W?r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${W.color}`,children:[W.icon,W.text]}):null};return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[r.jsx($g,{className:"w-7 h-7 text-red-600"}),"Blog Reports"]}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Review and manage user-reported blog content"})]})}),n&&r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 shadow-sm",children:[r.jsx("div",{className:"text-2xl font-bold text-slate-900",children:n.total}),r.jsx("div",{className:"text-sm text-slate-500",children:"Total Reports"})]}),r.jsxs("div",{className:"bg-yellow-50 rounded-2xl p-4 border border-yellow-100",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:n.pending}),r.jsx("div",{className:"text-sm text-yellow-600",children:"Pending"})]}),r.jsxs("div",{className:"bg-blue-50 rounded-2xl p-4 border border-blue-100",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-700",children:n.reviewed}),r.jsx("div",{className:"text-sm text-blue-600",children:"Reviewed"})]}),r.jsxs("div",{className:"bg-green-50 rounded-2xl p-4 border border-green-100",children:[r.jsx("div",{className:"text-2xl font-bold text-green-700",children:n.resolved}),r.jsx("div",{className:"text-sm text-green-600",children:"Resolved"})]}),r.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-100",children:[r.jsx("div",{className:"text-2xl font-bold text-slate-700",children:n.dismissed}),r.jsx("div",{className:"text-sm text-slate-500",children:"Dismissed"})]})]}),r.jsx("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx($4,{className:"w-5 h-5 text-slate-400"}),r.jsxs("select",{value:p,onChange:X=>{x(X.target.value),j(1)},className:"px-4 py-2.5 rounded-xl border border-slate-200 focus:border-red-500 focus:ring-2 focus:ring-red-500/20 transition-all",children:[r.jsx("option",{value:"all",children:"All Reports"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"reviewed",children:"Reviewed"}),r.jsx("option",{value:"resolved",children:"Resolved"}),r.jsx("option",{value:"dismissed",children:"Dismissed"})]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden",children:[A?r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsx(Xt,{className:"w-8 h-8 text-red-600 animate-spin"})}):e.length===0?r.jsxs("div",{className:"text-center py-20",children:[r.jsx($g,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"No reports found"}),r.jsx("p",{className:"text-slate-500 mt-1",children:"All clear! No reports match your filters."})]}):r.jsx("div",{className:"divide-y divide-slate-100",children:e.map(X=>r.jsx("div",{className:"p-4 hover:bg-slate-50 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[Q(X.status),q(X.reason),te(X.actionTaken)]}),r.jsxs("h3",{className:"font-semibold text-slate-900 mt-2 flex items-center gap-2",children:[r.jsx(Kl,{className:"w-4 h-4 text-slate-400"}),X.blogTitle]}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-slate-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ta,{className:"w-4 h-4"}),"Reported by: ",X.reporterName]}),r.jsxs("span",{children:["Blog Author: ",X.blogAuthorName]}),r.jsx("span",{children:X.createdAt})]}),X.description&&r.jsxs("p",{className:"text-sm text-slate-600 mt-2 bg-slate-50 p-3 rounded-lg",children:['"',X.description,'"']}),X.adminNotes&&r.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-xs font-medium text-blue-700 mb-1",children:"Admin Notes:"}),r.jsx("p",{className:"text-sm text-blue-600",children:X.adminNotes}),X.reviewerName&&r.jsxs("p",{className:"text-xs text-blue-500 mt-1",children:["Reviewed by ",X.reviewerName," on ",X.reviewedAt]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>u(X),className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:r.jsx(yn,{className:"w-4 h-4"})}),X.status==="pending"&&r.jsxs("button",{onClick:()=>{_(X),F(!0)},className:"flex items-center gap-1.5 px-3 py-1.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors",children:[r.jsx(jo,{className:"w-4 h-4"}),"Review"]})]})]})},X.id))}),i&&i.pages>1&&r.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-slate-100",children:[r.jsxs("div",{className:"text-sm text-slate-500",children:["Showing page ",i.page," of ",i.pages," (",i.total," total)"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>j(X=>Math.max(1,X-1)),disabled:!i.hasPrev,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors",children:r.jsx(Lu,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>j(X=>Math.min(i.pages,X+1)),disabled:!i.hasNext,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-50 transition-colors",children:r.jsx(ai,{className:"w-4 h-4"})})]})]})]}),f&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-100",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Report Details"}),r.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:r.jsx(As,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)] space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[Q(f.status),q(f.reason),te(f.actionTaken)]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[r.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide mb-1",children:"Reported Blog"}),r.jsx("p",{className:"font-semibold text-slate-900",children:f.blogTitle}),r.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["By ",f.blogAuthorName]})]}),r.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[r.jsx("p",{className:"text-xs font-medium text-slate-500 uppercase tracking-wide mb-1",children:"Reporter"}),r.jsx("p",{className:"font-semibold text-slate-900",children:f.reporterName}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:f.createdAt})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-slate-700 mb-2",children:"Report Reason"}),r.jsxs("p",{className:"text-slate-600 bg-red-50 p-4 rounded-xl",children:[r.jsx("span",{className:"font-medium",children:f.reason}),f.description&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),r.jsx("span",{className:"text-sm mt-2 block",children:f.description})]})]})]}),f.adminNotes&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-slate-700 mb-2",children:"Admin Notes"}),r.jsx("p",{className:"text-slate-600 bg-blue-50 p-4 rounded-xl",children:f.adminNotes}),f.reviewerName&&r.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["Reviewed by ",f.reviewerName," on ",f.reviewedAt]})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-100 bg-slate-50",children:[f.status==="pending"&&r.jsx("button",{onClick:()=>{_(f),F(!0),u(null)},className:"px-4 py-2 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 transition-colors",children:"Take Action"}),r.jsx("button",{onClick:()=>u(null),className:"px-4 py-2 bg-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-300 transition-colors",children:"Close"})]})]})}),C&&U&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-slate-100",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Review Report"}),r.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Report on: ",U.blogTitle]})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Action to take"}),r.jsxs("select",{value:H,onChange:X=>ee(X.target.value),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 focus:border-red-500 focus:ring-2 focus:ring-red-500/20 transition-all",children:[r.jsx("option",{value:"none",children:"No action needed"}),r.jsx("option",{value:"warning",children:"Send warning to author"}),r.jsx("option",{value:"hidden",children:"Hide the blog post"}),r.jsx("option",{value:"deleted",children:"Delete the blog post"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Admin notes"}),r.jsx("textarea",{value:z,onChange:X=>I(X.target.value),placeholder:"Add notes about this report...",className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-red-500 focus:ring-2 focus:ring-red-500/20 transition-all resize-none",rows:4})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-slate-100 bg-slate-50 rounded-b-2xl",children:[r.jsx("button",{onClick:()=>{F(!1),_(null),I(""),ee("none")},className:"px-4 py-2 bg-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-300 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:()=>ce("dismissed"),disabled:w!==null,className:"px-4 py-2 bg-slate-600 text-white font-medium rounded-xl hover:bg-slate-700 transition-colors disabled:opacity-50",children:"Dismiss"}),r.jsx("button",{onClick:()=>ce("resolved"),disabled:w!==null,className:"px-4 py-2 bg-red-600 text-white font-medium rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:w?r.jsx(Xt,{className:"w-4 h-4 animate-spin"}):"Resolve"})]})]})})]})},xK=({user:t,onSwitchToUser:e,onLogout:s})=>{const[n,a]=L.useState("Home"),[i,c]=L.useState(!1),A=f=>{console.log("Admin updated profile:",f)},d=()=>{switch(n){case"Home":return r.jsx(Oz,{onNavigate:a});case"Info Blog":return r.jsx(Vz,{onNavigate:a});case"Blog Moderation":return r.jsx(mK,{});case"Blog Reports":return r.jsx(gK,{});case"Subscription":return r.jsx($z,{});case"Advertisement":return r.jsx(Gz,{});case"Login Hero":return r.jsx(qz,{});case"Notifications":return r.jsx(Yz,{});case"Admin Chat":return r.jsx(eK,{});case"Support Tickets":return r.jsx(Wz,{});case"Admin Messages":return r.jsx(Xz,{});case"Plan Managment":return r.jsx(aK,{});case"Voucher Managment":return r.jsx(tK,{});case"Inquiries":return r.jsx(pK,{});case"User":return r.jsx(Dz,{});case"Email Verification":return r.jsx(Rz,{});case"Place":return r.jsx(Hz,{});case"Trip":return r.jsx(zz,{});case"Trip Item":return r.jsx(Pz,{});case"Settings":return r.jsx(Kz,{user:t,onUpdateUser:A});default:return r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center shadow-sm min-h-[400px] flex flex-col items-center justify-center animate-in fade-in duration-300",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-50 text-slate-400 rounded-full flex items-center justify-center mb-4",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:n}),r.jsx("p",{className:"text-slate-500 max-w-sm mx-auto mb-6",children:"This module is currently in development."}),r.jsx("button",{onClick:()=>a("Home"),className:"px-4 py-2 bg-white border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Back to Dashboard"})]})}};return r.jsxs("div",{className:"min-h-screen flex bg-slate-50 font-sans text-slate-600",children:[r.jsx("div",{className:"md:hidden fixed top-4 right-20 z-50",children:r.jsx("button",{onClick:()=>c(!i),className:"p-2 bg-white rounded-lg shadow border border-slate-200 text-slate-700",children:r.jsx(G4,{size:24})})}),r.jsx("div",{className:`${i?"flex fixed inset-0 z-40 bg-white/95 p-0":"hidden"} md:flex md:relative`,children:r.jsx(Qz,{activeItem:n,onNavigate:f=>{a(f),c(!1)},onSwitchToUser:e,onLogout:s})}),r.jsxs("div",{className:"flex-1 flex flex-col h-screen overflow-hidden",children:[r.jsx(_z,{user:t,onLogout:s,onNavigate:a}),r.jsxs("main",{className:"flex-1 overflow-y-auto p-4 md:p-8 custom-scrollbar",children:[r.jsx("div",{className:"max-w-7xl mx-auto flex flex-col gap-6 animate-in fade-in duration-300",children:d()}),r.jsxs("footer",{className:"py-8 text-center text-xs text-slate-400",children:[" ",new Date().getFullYear()," GogoTrip Admin Panel."]})]})]})]})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ty=function(){return Ty=Object.assign||function(t){for(var e,s=1,n=arguments.length;s<n;s++)for(var a in e=arguments[s])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},Ty.apply(this,arguments)},Uy,bK=function(t){var e;t?(function(s){if(s)for(;s.lastChild;)s.lastChild.remove()})(typeof t=="string"?document.getElementById(t):t):(e=document.querySelector(".grecaptcha-badge"))&&e.parentNode&&document.body.removeChild(e.parentNode)},vK=function(t,e){bK(e),window.___grecaptcha_cfg=void 0;var s=document.querySelector("#"+t);s&&s.remove(),(function(){var n=document.querySelector('script[src^="https://www.gstatic.com/recaptcha/releases"]');n&&n.remove()})()},yK=function(t){var e=t.render,s=t.onLoadCallbackName,n=t.language,a=t.onLoad,i=t.useRecaptchaNet,c=t.useEnterprise,A=t.scriptProps,d=A===void 0?{}:A,f=d.nonce,u=f===void 0?"":f,p=d.defer,x=p!==void 0&&p,m=d.async,j=m!==void 0&&m,w=d.id,S=w===void 0?"":w,C=d.appendTo,F=S||"google-recaptcha-v3";if((function(z){return!!document.querySelector("#"+z)})(F))a();else{var U=(function(z){return"https://www."+(z.useRecaptchaNet?"recaptcha.net":"google.com")+"/recaptcha/"+(z.useEnterprise?"enterprise.js":"api.js")})({useEnterprise:c,useRecaptchaNet:i}),_=document.createElement("script");_.id=F,_.src=U+"?render="+e+(e==="explicit"?"&onload="+s:"")+(n?"&hl="+n:""),u&&(_.nonce=u),_.defer=!!x,_.async=!!j,_.onload=a,(C==="body"?document.body:document.getElementsByTagName("head")[0]).appendChild(_)}},j4=function(t){console.warn(t)};(function(t){t.SCRIPT_NOT_AVAILABLE="Recaptcha script is not available"})(Uy||(Uy={}));var O2=L.createContext({executeRecaptcha:function(){throw Error("GoogleReCaptcha Context has not yet been implemented, if you are using useGoogleReCaptcha hook, make sure the hook is called inside component wrapped by GoogleRecaptchaProvider")}});O2.Consumer;function wK(t){var e=t.reCaptchaKey,s=t.useEnterprise,n=s!==void 0&&s,a=t.useRecaptchaNet,i=a!==void 0&&a,c=t.scriptProps,A=t.language,d=t.container,f=t.children,u=L.useState(null),p=u[0],x=u[1],m=L.useRef(e),j=JSON.stringify(c),w=JSON.stringify(d==null?void 0:d.parameters);L.useEffect((function(){if(e){var F=(c==null?void 0:c.id)||"google-recaptcha-v3",U=(c==null?void 0:c.onLoadCallbackName)||"onRecaptchaLoadCallback";return window[U]=function(){var _=n?window.grecaptcha.enterprise:window.grecaptcha,z=Ty({badge:"inline",size:"invisible",sitekey:e},(d==null?void 0:d.parameters)||{});m.current=_.render(d==null?void 0:d.element,z)},yK({render:d!=null&&d.element?"explicit":e,onLoadCallbackName:U,useEnterprise:n,useRecaptchaNet:i,scriptProps:c,language:A,onLoad:function(){if(window&&window.grecaptcha){var _=n?window.grecaptcha.enterprise:window.grecaptcha;_.ready((function(){x(_)}))}else j4("<GoogleRecaptchaProvider /> "+Uy.SCRIPT_NOT_AVAILABLE)}}),function(){vK(F,d==null?void 0:d.element)}}j4("<GoogleReCaptchaProvider /> recaptcha key not provided")}),[n,i,j,w,A,e,d==null?void 0:d.element]);var S=L.useCallback((function(F){if(!p||!p.execute)throw new Error("<GoogleReCaptchaProvider /> Google Recaptcha has not been loaded");return p.execute(m.current,{action:F})}),[p,m]),C=L.useMemo((function(){return{executeRecaptcha:p?S:void 0,container:d==null?void 0:d.element}}),[S,p,d==null?void 0:d.element]);return wi.createElement(O2.Provider,{value:C},f)}var jK=function(){return L.useContext(O2)};function eS(t,e){return t(e={exports:{}},e.exports),e.exports;/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */}var ii=typeof Symbol=="function"&&Symbol.for,Fy=ii?Symbol.for("react.element"):60103,Ly=ii?Symbol.for("react.portal"):60106,Qg=ii?Symbol.for("react.fragment"):60107,_g=ii?Symbol.for("react.strict_mode"):60108,Ig=ii?Symbol.for("react.profiler"):60114,Og=ii?Symbol.for("react.provider"):60109,Dg=ii?Symbol.for("react.context"):60110,My=ii?Symbol.for("react.async_mode"):60111,Gx=ii?Symbol.for("react.concurrent_mode"):60111,Rg=ii?Symbol.for("react.forward_ref"):60112,Hg=ii?Symbol.for("react.suspense"):60113,NK=ii?Symbol.for("react.suspense_list"):60120,Pg=ii?Symbol.for("react.memo"):60115,zg=ii?Symbol.for("react.lazy"):60116,BK=ii?Symbol.for("react.block"):60121,kK=ii?Symbol.for("react.fundamental"):60117,CK=ii?Symbol.for("react.responder"):60118,SK=ii?Symbol.for("react.scope"):60119;function bo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Fy:switch(t=t.type){case My:case Gx:case Qg:case Ig:case _g:case Hg:return t;default:switch(t=t&&t.$$typeof){case Dg:case Rg:case zg:case Pg:case Og:return t;default:return e}}case Ly:return e}}}function N4(t){return bo(t)===Gx}var EK={AsyncMode:My,ConcurrentMode:Gx,ContextConsumer:Dg,ContextProvider:Og,Element:Fy,ForwardRef:Rg,Fragment:Qg,Lazy:zg,Memo:Pg,Portal:Ly,Profiler:Ig,StrictMode:_g,Suspense:Hg,isAsyncMode:function(t){return N4(t)||bo(t)===My},isConcurrentMode:N4,isContextConsumer:function(t){return bo(t)===Dg},isContextProvider:function(t){return bo(t)===Og},isElement:function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fy},isForwardRef:function(t){return bo(t)===Rg},isFragment:function(t){return bo(t)===Qg},isLazy:function(t){return bo(t)===zg},isMemo:function(t){return bo(t)===Pg},isPortal:function(t){return bo(t)===Ly},isProfiler:function(t){return bo(t)===Ig},isStrictMode:function(t){return bo(t)===_g},isSuspense:function(t){return bo(t)===Hg},isValidElementType:function(t){return typeof t=="string"||typeof t=="function"||t===Qg||t===Gx||t===Ig||t===_g||t===Hg||t===NK||typeof t=="object"&&t!==null&&(t.$$typeof===zg||t.$$typeof===Pg||t.$$typeof===Og||t.$$typeof===Dg||t.$$typeof===Rg||t.$$typeof===kK||t.$$typeof===CK||t.$$typeof===SK||t.$$typeof===BK)},typeOf:bo},qr=eS((function(t,e){})),B4=(qr.AsyncMode,qr.ConcurrentMode,qr.ContextConsumer,qr.ContextProvider,qr.Element,qr.ForwardRef,qr.Fragment,qr.Lazy,qr.Memo,qr.Portal,qr.Profiler,qr.StrictMode,qr.Suspense,qr.isAsyncMode,qr.isConcurrentMode,qr.isContextConsumer,qr.isContextProvider,qr.isElement,qr.isForwardRef,qr.isFragment,qr.isLazy,qr.isMemo,qr.isPortal,qr.isProfiler,qr.isStrictMode,qr.isSuspense,qr.isValidElementType,qr.typeOf,eS((function(t){t.exports=EK}))),TK={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},k4={};k4[B4.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},k4[B4.Memo]=TK;const tS=wi.memo(({config:t})=>{const[e,s]=L.useState(0),n=(a,i)=>i||a.startsWith("/proxy_image")?`${_e}${a}`:a;return L.useEffect(()=>{if(!t||t.displayMode==="single"||!t.autoPlay)return;const a=setInterval(()=>{s(i=>(i+1)%t.images.length)},t.transitionInterval*1e3);return()=>clearInterval(a)},[t]),t?r.jsxs("div",{className:"hidden lg:flex lg:w-1/2 flex-shrink-0 relative overflow-hidden",children:[t.displayMode==="single"?r.jsx("img",{src:n(t.images[0].url,t.images[0].isProxy),alt:t.images[0].alt,className:"absolute inset-0 w-full h-full object-cover"}):t.images.map((a,i)=>r.jsx("img",{src:n(a.url,a.isProxy),alt:a.alt,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ${i===e?"opacity-100":"opacity-0"}`},`hero-img-${i}`)),t.enableGradient&&r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900/60 via-slate-900/40 to-transparent"}),r.jsxs("div",{className:"absolute inset-0 flex flex-col items-start justify-end p-16 text-white z-10",children:[t.title&&r.jsx("h1",{className:"text-5xl font-black leading-tight mb-4 max-w-xl drop-shadow-2xl",children:t.title}),t.description&&r.jsx("p",{className:"text-lg text-white/90 max-w-md leading-relaxed drop-shadow-lg",children:t.description})]})]}):r.jsx("div",{className:"hidden lg:flex lg:w-1/2 flex-shrink-0 relative overflow-hidden bg-gradient-to-br from-slate-200 to-slate-300",children:r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"text-slate-400 text-sm",children:"Loading..."})})})});tS.displayName="HeroSection";const UK=({email:t,onRedirect:e})=>{const[s,n]=L.useState(3);return L.useEffect(()=>{const a=setInterval(()=>{n(i=>i<=1?(clearInterval(a),setTimeout(e,500),0):i-1)},1e3);return()=>clearInterval(a)},[e]),r.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsx("div",{className:"text-center mb-8 animate-in zoom-in-95 fade-in duration-500",children:r.jsxs("div",{className:"relative inline-block",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full blur-3xl opacity-30 animate-pulse"}),r.jsx("div",{className:"relative bg-gradient-to-br from-green-500 to-emerald-600 w-32 h-32 rounded-full flex items-center justify-center shadow-2xl",children:r.jsx(sa,{className:"w-16 h-16 text-white animate-in zoom-in duration-300 delay-200"})}),r.jsx("div",{className:"absolute -top-2 -right-2 animate-in zoom-in duration-300 delay-300",children:r.jsx(Qn,{className:"w-8 h-8 text-yellow-400"})}),r.jsx("div",{className:"absolute -bottom-2 -left-2 animate-in zoom-in duration-300 delay-400",children:r.jsx(FU,{className:"w-8 h-8 text-pink-400"})})]})}),r.jsxs("div",{className:"text-center space-y-4 animate-in fade-in-up duration-500 delay-300",children:[r.jsx("h1",{className:"text-4xl font-black text-slate-900 mb-2",children:"Email Verified! "}),r.jsx("p",{className:"text-lg text-slate-600 font-medium",children:"Welcome aboard! Your account has been successfully verified."}),r.jsx("div",{className:"p-4 bg-white/80 backdrop-blur-sm border border-green-200 rounded-xl",children:r.jsxs("p",{className:"text-sm text-slate-700",children:[r.jsx("strong",{className:"text-green-700",children:t})," is now verified and ready to go!"]})})]}),r.jsx("div",{className:"mt-8 text-center animate-in fade-in duration-500 delay-500",children:r.jsxs("div",{className:"inline-flex items-center gap-3 px-6 py-3 bg-white/80 backdrop-blur-sm border border-slate-200 rounded-full shadow-lg",children:[r.jsx(Xt,{className:"w-5 h-5 text-green-600 animate-spin"}),r.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Redirecting in ",r.jsx("span",{className:"text-green-600 font-bold text-lg",children:s}),"s..."]})]})}),r.jsx("div",{className:"mt-6 text-center animate-in fade-in duration-500 delay-700",children:r.jsx("button",{onClick:e,className:"text-sm text-slate-600 hover:text-slate-900 font-medium underline decoration-dotted underline-offset-4",children:"Skip waiting and go now "})})]})})},FK=()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-gradient-to-br from-blue-50 via-sky-50 to-cyan-50",children:r.jsxs("div",{className:"max-w-md w-full text-center",children:[r.jsx("div",{className:"mb-8 animate-in zoom-in-95 fade-in duration-500",children:r.jsxs("div",{className:"relative inline-block",children:[r.jsx("div",{className:"w-32 h-32 rounded-full border-8 border-blue-100 border-t-blue-600 animate-spin"}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx(jo,{className:"w-12 h-12 text-blue-600 animate-pulse"})})]})}),r.jsxs("div",{className:"space-y-4 animate-in fade-in-up duration-500 delay-200",children:[r.jsx("h2",{className:"text-3xl font-black text-slate-900",children:"Verifying Your Email..."}),r.jsx("p",{className:"text-lg text-slate-600",children:"Please wait while we confirm your account."}),r.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-500 mt-6",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),r.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),r.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})]})}),LK=({email:t,token:e,verificationConfig:s,onVerified:n,onResend:a,onBack:i})=>{const[c,A]=L.useState(""),[d,f]=L.useState(!1),[u,p]=L.useState(null),[x,m]=L.useState(null),[j,w]=L.useState(!1),[S,C]=L.useState(0),[F,U]=L.useState(e),[_,z]=L.useState(!1),I=L.useRef(null),H=L.useRef(null);L.useEffect(()=>{if(S>0){const ce=setTimeout(()=>{C(Q=>Q-1)},1e3);return()=>clearTimeout(ce)}},[S]),L.useEffect(()=>{try{H.current=new BroadcastChannel("gogotrip_verification"),H.current.onmessage=Q=>{Q.data.type==="VERIFICATION_COMPLETE"&&Q.data.email===t&&(console.log(" Received verification complete from another tab"),m(" Email verified in another tab! Redirecting..."),setTimeout(()=>{Q.data.user&&n(Q.data.user)},1500))}}catch{console.log("BroadcastChannel not supported, using polling only")}const ce=async()=>{try{z(!0);const q=await(await fetch(`${_e}/auth/check-verification-status`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:t,token:F})})).json();q.verified&&q.user&&(console.log(" Email verified detected via polling"),m(" Email verified! Redirecting..."),H.current&&H.current.postMessage({type:"VERIFICATION_COMPLETE",email:t,user:q.user}),I.current&&clearInterval(I.current),setTimeout(()=>{n(q.user)},1500))}catch(Q){console.log("Status check failed:",Q)}finally{z(!1)}};return I.current=setInterval(ce,5e3),()=>{I.current&&clearInterval(I.current),H.current&&H.current.close()}},[t,F,n]);const ee=async ce=>{if(ce.preventDefault(),!c||c.length!==s.codeLength){p(`Please enter a ${s.codeLength}-digit code`);return}f(!0),p(null);try{const q=await(await fetch(`${_e}/auth/signup-verify-v2`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:F,code:c})})).json();q.status==="success"?(m(" Email verified successfully!"),H.current&&H.current.postMessage({type:"VERIFICATION_COMPLETE",email:t,user:q.user}),setTimeout(()=>{n(q.user)},1500)):p(q.message||"Verification failed")}catch{p("Network error. Please try again.")}finally{f(!1)}},$=async()=>{var ce;if(!(S>0||j)){w(!0),p(null),m(null);try{const Q=await a();if(Q.success)Q.token&&U(Q.token),m(" Verification email sent! Check your inbox."),C(60);else{if((ce=Q.message)!=null&&ce.includes("wait")){const q=Q.message.match(/(\d+)/);q&&C(parseInt(q[1]))}p(Q.message||"Failed to resend")}}catch{p("Failed to resend verification email")}finally{w(!1)}}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(ko,{className:"w-8 h-8 text-white"})}),r.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-2",children:"Verify Your Email"}),r.jsxs("p",{className:"text-slate-600",children:["We've sent a verification code to",r.jsx("br",{}),r.jsx("strong",{className:"text-slate-900",children:t})]})]}),u&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3 animate-in fade-in-down",children:[r.jsx(ur,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm font-bold text-red-700",children:u})]}),x&&r.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-xl flex items-start gap-3 animate-in fade-in-down",children:[r.jsx(sa,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm font-bold text-green-700",children:x})]}),_&&r.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-500",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),r.jsx("span",{children:"Checking verification status..."})]}),r.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider pl-1",children:"Verification Code"}),r.jsx("div",{className:"relative",children:r.jsx("input",{type:"text",required:!0,value:c,onChange:ce=>{const Q=ce.target.value.toUpperCase();s.codeType==="numeric"?/^\d*$/.test(Q)&&A(Q):A(Q)},maxLength:s.codeLength,placeholder:`Enter ${s.codeLength}-digit code`,className:"w-full bg-white border border-slate-200 rounded-xl py-4 px-4 font-mono text-2xl tracking-[0.5em] text-center font-bold focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 outline-none transition-all uppercase"})}),r.jsx("p",{className:"text-xs text-slate-500 text-center mt-2",children:"Enter the code from your email or click the verification link"})]}),r.jsx("button",{type:"submit",disabled:d||c.length!==s.codeLength,className:"w-full py-3.5 bg-slate-900 text-white font-bold rounded-xl shadow-lg hover:bg-slate-800 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:d?r.jsx(Xt,{className:"w-5 h-5 animate-spin"}):r.jsxs(r.Fragment,{children:["Verify Email",r.jsx(hd,{className:"w-4 h-4"})]})})]}),r.jsxs("div",{className:"text-center pt-4 border-t border-slate-200",children:[r.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Didn't receive the email?"}),r.jsx("button",{type:"button",onClick:$,disabled:j||S>0,className:`inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${S>0?"bg-slate-100 text-slate-400 cursor-not-allowed":j?"bg-slate-100 text-slate-500":"bg-sky-50 text-sky-600 hover:bg-sky-100"}`,children:j?r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):S>0?r.jsxs(r.Fragment,{children:[r.jsx(on,{className:"w-4 h-4"}),"Resend in ",S,"s"]}):r.jsxs(r.Fragment,{children:[r.jsx(yl,{className:"w-4 h-4"}),"Resend Code"]})})]}),r.jsx("div",{className:"text-center",children:r.jsx("button",{type:"button",onClick:i,className:"text-sm text-slate-500 hover:text-slate-700 font-medium",children:" Back to Sign Up"})})]})},MK=({onLogin:t})=>{const[e,s]=L.useState("LOGIN"),[n,a]=L.useState(!1),[i,c]=L.useState(null),[A,d]=L.useState(null),[f,u]=L.useState(!1),[p,x]=L.useState({codeType:"numeric",codeLength:6,expiryMinutes:10}),[m,j]=L.useState(null),[w,S]=L.useState(""),[C,F]=L.useState(""),[U,_]=L.useState(""),[z,I]=L.useState(!1),[H,ee]=L.useState(!1),{executeRecaptcha:$}=jK(),[ce,Q]=L.useState(null),[q,te]=L.useState({name:"",email:"",password:"",verificationCode:""}),[X,Ae]=L.useState({hasLength:!1,hasUpper:!1,hasLower:!1,hasNumber:!1,hasSpecial:!1}),[W,se]=L.useState(!1),Z=L.useRef(!1),re=Ne=>{const Ie={hasLength:Ne.length>=8,hasUpper:/[A-Z]/.test(Ne),hasLower:/[a-z]/.test(Ne),hasNumber:/[0-9]/.test(Ne),hasSpecial:/[!@#$%^&*(),.?":{}|<>]/.test(Ne)};Ae(Ie),se(Object.values(Ie).every(Boolean))};L.useEffect(()=>{e==="SIGNUP"?re(q.password):e==="FORGOT_VERIFY"&&re(C)},[q.password,C,e]),L.useEffect(()=>{(async()=>{try{const Pe=await(await fetch(`${_e}/api/login-hero/active`)).json();Pe.status==="success"&&Pe.config&&Q(Pe.config)}catch(Ie){console.error("Failed to load hero config:",Ie),Q({displayMode:"single",transitionInterval:5,autoPlay:!0,imageSource:"url",enableGradient:!0,images:[{url:"https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?auto=format&fit=crop&q=80&w=2000",alt:"Travel"}],title:"Plan your next great adventure in seconds.",subtitle:null,description:"Join thousands of travelers using AI to craft the perfect itinerary, track expenses, and explore the world."})}})()},[]),L.useEffect(()=>{if(Z.current)return;const Ne=new URLSearchParams(window.location.search),Ie=Ne.get("token"),Pe=Ne.get("error");if(Pe){Pe==="account_suspended"?c("Your account has been suspended. Please contact support."):Pe==="account_deleted"?c("This account has been deleted."):Pe==="oauth_failed"&&c("Google login failed. Please try again."),window.history.replaceState({},"",window.location.pathname);return}Ie&&(console.log(" Detected token in URL, starting One-Click verification..."),Z.current=!0,s("VERIFYING"),ve(Ie))},[]);const ve=async Ne=>{try{console.log(" Starting One-Click verification...");const Pe=await(await fetch(`${_e}/auth/verify-onetap`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:Ne})})).json();if(console.log(" Token info:",Pe),Pe.status!=="success")throw new Error(Pe.message||"Invalid verification link");const gt=await(await fetch(`${_e}/auth/signup-verify-v2`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:Ne,code:Pe.data.code})})).json();if(console.log(" Verification result:",gt),gt.status==="success"){S(Pe.data.email),window.history.replaceState({},"",window.location.pathname),s("VERIFIED");try{const ie=new BroadcastChannel("gogotrip_verification");ie.postMessage({type:"VERIFICATION_COMPLETE",email:Pe.data.email,user:gt.user}),ie.close()}catch{console.log("BroadcastChannel not available")}setTimeout(()=>{t(gt.user)},3e3)}else throw new Error(gt.message||"Verification failed")}catch(Ie){console.error(" One-Click verification failed:",Ie),s("LOGIN"),c(Ie.message||"Verification link expired or invalid. Please try again.")}},ae=L.useCallback(()=>{w&&console.log("Redirecting...")},[w]),R=()=>{a(!0),c(null),window.location.href=`${_e}/authorize`},P=async Ne=>{if(Ne.preventDefault(),!W){c("Password is too weak. Please follow the requirements below.");return}if(q.password!==U){c("Passwords do not match.");return}if(!q.email||!q.password||!q.name){c("Please fill in all fields.");return}a(!0),c(null),d(null);try{if(!$){c("reCAPTCHA not ready"),a(!1);return}const Ie=await $("signup"),ze=await(await fetch(`${_e}/auth/send-code-v2`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:q.email,password:q.password,name:q.name,code_type:p.codeType,code_length:p.codeLength,expiry_minutes:p.expiryMinutes,recaptcha_token:Ie})})).json();ze.status==="success"?(j(ze.token),s("VERIFY")):c(ze.message||"Failed to send code")}catch{c("Network error. Please try again.")}finally{a(!1)}},V=async()=>{try{if(!$)return{success:!1,message:"reCAPTCHA not ready"};const Ne=await $("resend"),Pe=await(await fetch(`${_e}/auth/resend-verification`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:q.email,token:m,recaptcha_token:Ne})})).json();return Pe.status==="success"?{success:!0,token:Pe.token}:{success:!1,message:Pe.message}}catch{return{success:!1,message:"Network error"}}},K=async Ne=>{Ne.preventDefault(),a(!0),c(null);try{const Pe=await(await fetch(`${_e}/auth/login-email`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:q.email,password:q.password})})).json();Pe.status==="success"?t(Pe.user):Pe.needs_verification?c("Please verify your email first. Check your inbox for the verification link."):c(Pe.message||"Login failed")}catch{c("Network error. Please try again.")}finally{a(!1)}},ne=async Ne=>{Ne.preventDefault(),a(!0),c(null),d(null);try{if(!$){c("reCAPTCHA not ready"),a(!1);return}const Ie=await $("forgot_password"),ze=await(await fetch(`${_e}/auth/forgot-password/send-code-v2`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:q.email,code_type:p.codeType,code_length:p.codeLength,expiry_minutes:p.expiryMinutes,recaptcha_token:Ie})})).json();ze.status==="success"?(j(ze.token),s("FORGOT_VERIFY"),d(` Verification code sent to ${q.email}!`)):c(ze.message||"Failed to send code")}catch{c("Network error. Please try again.")}finally{a(!1)}},pe=async Ne=>{if(Ne.preventDefault(),!W){c("Password is too weak.");return}if(C!==U){c("Passwords do not match.");return}a(!0),c(null);try{const Pe=await(await fetch(`${_e}/auth/reset-password-v2`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:m,code:q.verificationCode,new_password:C})})).json();Pe.status==="success"?(d(" Password reset successful! Please login."),setTimeout(()=>s("LOGIN"),2e3)):c(Pe.message||"Reset failed")}catch{c("Network error. Please try again.")}finally{a(!1)}},Ce=()=>r.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-br from-blue-50 to-sky-50 rounded-xl border border-sky-200",children:[r.jsxs("button",{type:"button",onClick:()=>u(!f),className:"w-full flex items-center justify-between text-sm font-bold text-slate-700 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jo,{className:"w-4 h-4 text-sky-600"}),r.jsx("span",{children:"Verification Options"})]}),r.jsx("span",{className:"text-xs text-sky-600",children:f?" Hide":" Customize"})]}),f&&r.jsxs("div",{className:"space-y-4 animate-in fade-in-down",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-bold text-slate-500 mb-2 flex items-center gap-2",children:[r.jsx(l5,{className:"w-3 h-3"}),"Code Type"]}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:["numeric","alphanumeric","alpha"].map(Ne=>r.jsxs("button",{type:"button",onClick:()=>x(Ie=>({...Ie,codeType:Ne})),className:`py-2 px-3 rounded-lg text-xs font-bold transition-all ${p.codeType===Ne?"bg-sky-600 text-white shadow-lg":"bg-white text-slate-600 hover:bg-slate-50"}`,children:[Ne==="numeric"&&"123456",Ne==="alphanumeric"&&"A1B2C3",Ne==="alpha"&&"ABCDEF"]},Ne))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-bold text-slate-500 mb-2 flex items-center gap-2",children:[r.jsx(l5,{className:"w-3 h-3"}),"Code Length"]}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:[4,6,8].map(Ne=>r.jsxs("button",{type:"button",onClick:()=>x(Ie=>({...Ie,codeLength:Ne})),className:`py-2 px-3 rounded-lg text-xs font-bold transition-all ${p.codeLength===Ne?"bg-sky-600 text-white shadow-lg":"bg-white text-slate-600 hover:bg-slate-50"}`,children:[Ne," digits"]},Ne))})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-bold text-slate-500 mb-2 flex items-center gap-2",children:[r.jsx(on,{className:"w-3 h-3"}),"Expiry Time"]}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:[5,10,15].map(Ne=>r.jsxs("button",{type:"button",onClick:()=>x(Ie=>({...Ie,expiryMinutes:Ne})),className:`py-2 px-3 rounded-lg text-xs font-bold transition-all ${p.expiryMinutes===Ne?"bg-sky-600 text-white shadow-lg":"bg-white text-slate-600 hover:bg-slate-50"}`,children:[Ne," min"]},Ne))})]})]})]}),Ue=()=>r.jsxs("div",{className:"mt-2 space-y-2",children:[r.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Password Requirements:"}),Object.entries({hasLength:"At least 8 characters",hasUpper:"One uppercase letter",hasLower:"One lowercase letter",hasNumber:"One number",hasSpecial:"One special character (!@#$...)"}).map(([Ne,Ie])=>r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[X[Ne]?r.jsx(ea,{className:"w-4 h-4 text-green-600 flex-shrink-0"}):r.jsx(As,{className:"w-4 h-4 text-slate-300 flex-shrink-0"}),r.jsx("span",{className:X[Ne]?"text-green-700 font-medium":"text-slate-500",children:Ie})]},Ne))]});return e==="VERIFYING"?r.jsx(FK,{}):e==="VERIFIED"?r.jsx(UK,{email:w,onRedirect:ae}):r.jsxs("div",{className:"min-h-screen flex overflow-hidden bg-slate-50",children:[r.jsx(tS,{config:ce}),r.jsx("div",{className:"flex-1 min-w-0 flex items-center justify-center p-6 lg:p-12 relative overflow-y-auto",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"mb-8 text-center",children:[r.jsxs("h2",{className:"text-3xl font-black text-slate-900 mb-2",children:[e==="LOGIN"&&"Welcome Back",e==="SIGNUP"&&"Create Account",e==="VERIFY"&&"Verify Your Email",e==="FORGOT"&&"Reset Password",e==="FORGOT_VERIFY"&&"Reset Password"]}),r.jsxs("p",{className:"text-slate-500 font-medium",children:[e==="LOGIN"&&"Sign in to continue your journey",e==="SIGNUP"&&"Start planning your next adventure",e==="VERIFY"&&"Check your email for the verification code",e==="FORGOT"&&"Enter your email to receive a reset code",e==="FORGOT_VERIFY"&&"Enter code and new password"]})]}),i&&e!=="VERIFY"&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3 animate-in fade-in-down",children:[r.jsx(ur,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm font-bold text-red-700",children:i})]}),A&&e!=="VERIFY"&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-start gap-3 animate-in fade-in-down",children:[r.jsx(sa,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm font-bold text-green-700",children:A})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-8 shadow-xl",children:[e==="VERIFY"&&m&&r.jsx(LK,{email:q.email,token:m,verificationConfig:p,onVerified:t,onResend:V,onBack:()=>{s("SIGNUP"),c(null),d(null)}}),e==="FORGOT_VERIFY"&&r.jsxs("form",{onSubmit:pe,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider pl-1",children:"Verification Code"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",required:!0,value:q.verificationCode,onChange:Ne=>{const Ie=Ne.target.value.toUpperCase();p.codeType==="numeric"?/^\d*$/.test(Ie)&&te({...q,verificationCode:Ie}):te({...q,verificationCode:Ie})},maxLength:p.codeLength,placeholder:`Enter ${p.codeLength}-digit code`,className:"w-full bg-white border border-slate-200 rounded-xl py-3.5 pl-12 pr-12 font-mono text-lg tracking-widest text-center font-bold focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 outline-none transition-all uppercase"}),r.jsx(jo,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider pl-1",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Vl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:z?"text":"password",required:!0,value:C,onChange:Ne=>F(Ne.target.value),placeholder:"",className:`w-full bg-white border rounded-xl py-3.5 pl-12 pr-12 font-medium focus:ring-2 outline-none transition-all ${!W&&C.length>0?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-slate-200 focus:ring-sky-500/20 focus:border-sky-500"}`}),r.jsx("button",{type:"button",onClick:()=>I(!z),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:z?r.jsx(xA,{className:"w-5 h-5"}):r.jsx(yn,{className:"w-5 h-5"})})]}),r.jsx(Ue,{})]}),W&&r.jsxs("div",{className:"space-y-1 animate-in fade-in-down",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider pl-1",children:"Confirm New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Vl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:H?"text":"password",required:!0,value:U,onChange:Ne=>_(Ne.target.value),placeholder:"Confirm password",className:`w-full bg-white border rounded-xl py-3.5 pl-12 pr-12 font-medium focus:ring-2 outline-none transition-all ${U.length>0&&U!==C?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-slate-200 focus:ring-sky-500/20 focus:border-sky-500"}`}),r.jsx("button",{type:"button",onClick:()=>ee(!H),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:H?r.jsx(xA,{className:"w-5 h-5"}):r.jsx(yn,{className:"w-5 h-5"})})]}),U.length>0&&U!==C&&r.jsx("p",{className:"text-xs text-red-500 font-bold ml-1",children:"Passwords do not match"})]}),r.jsx("button",{type:"submit",disabled:n||!W||C!==U,className:"w-full py-3.5 bg-slate-900 text-white font-bold rounded-xl shadow-lg hover:bg-slate-800 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?r.jsx(Xt,{className:"w-5 h-5 animate-spin"}):r.jsxs(r.Fragment,{children:["Reset Password",r.jsx(hd,{className:"w-4 h-4"})]})})]}),e==="FORGOT"&&r.jsxs("form",{onSubmit:ne,className:"space-y-6",children:[r.jsx(Ce,{}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider pl-1",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(ko,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"email",required:!0,value:q.email,onChange:Ne=>te({...q,email:Ne.target.value}),placeholder:"you@example.com",className:"w-full bg-white border border-slate-200 rounded-xl py-3.5 pl-12 pr-4 font-medium focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 outline-none transition-all"})]})]}),r.jsx("button",{type:"submit",disabled:n,className:"w-full py-3.5 bg-slate-900 text-white font-bold rounded-xl shadow-lg hover:bg-slate-800 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?r.jsx(Xt,{className:"w-5 h-5 animate-spin"}):r.jsxs(r.Fragment,{children:["Send Reset Code",r.jsx(hd,{className:"w-4 h-4"})]})}),r.jsx("button",{type:"button",onClick:()=>{s("LOGIN"),c(null)},className:"w-full text-sm text-sky-600 font-bold hover:underline",children:" Back to Login"})]}),(e==="LOGIN"||e==="SIGNUP")&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("button",{type:"button",onClick:R,disabled:n,className:"w-full py-3.5 bg-white border border-slate-200 rounded-xl font-bold text-slate-700 hover:bg-slate-50 hover:border-slate-300 transition-all flex items-center justify-center gap-3 relative group overflow-hidden",children:[r.jsx("img",{src:"https://www.svgrepo.com/show/475656/google-color.svg",alt:"Google",className:"w-5 h-5 relative z-10"}),r.jsx("span",{className:"relative z-10",children:"Continue with Google"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-slate-200"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-white px-2 text-slate-400 font-bold",children:"Or continue with email"})})]}),e==="SIGNUP"&&r.jsx(Ce,{}),r.jsxs("form",{onSubmit:e==="LOGIN"?K:P,className:"space-y-4",children:[e==="SIGNUP"&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider pl-1",children:"Full Name"}),r.jsxs("div",{className:"relative",children:[r.jsx(ta,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"text",required:!0,value:q.name,onChange:Ne=>te({...q,name:Ne.target.value}),placeholder:"John Doe",className:"w-full bg-white border border-slate-200 rounded-xl py-3.5 pl-12 pr-4 font-medium focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 outline-none transition-all"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider pl-1",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(ko,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:"email",required:!0,value:q.email,onChange:Ne=>te({...q,email:Ne.target.value}),placeholder:"you@example.com",className:"w-full bg-white border border-slate-200 rounded-xl py-3.5 pl-12 pr-4 font-medium focus:ring-2 focus:ring-sky-500/20 focus:border-sky-500 outline-none transition-all"})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider pl-1",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Vl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:z?"text":"password",required:!0,value:q.password,onChange:Ne=>te({...q,password:Ne.target.value}),placeholder:"",className:`w-full bg-white border rounded-xl py-3.5 pl-12 pr-12 font-medium focus:ring-2 outline-none transition-all ${e==="SIGNUP"&&!W&&q.password.length>0?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-slate-200 focus:ring-sky-500/20 focus:border-sky-500"}`}),r.jsx("button",{type:"button",onClick:()=>I(!z),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:z?r.jsx(xA,{className:"w-5 h-5"}):r.jsx(yn,{className:"w-5 h-5"})})]}),e==="SIGNUP"&&r.jsx(Ue,{})]}),e==="SIGNUP"&&W&&r.jsxs("div",{className:"space-y-1 animate-in fade-in-down",children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider pl-1",children:"Confirm Password"}),r.jsxs("div",{className:"relative",children:[r.jsx(Vl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),r.jsx("input",{type:H?"text":"password",required:!0,value:U,onChange:Ne=>_(Ne.target.value),placeholder:"Confirm password",className:`w-full bg-white border rounded-xl py-3.5 pl-12 pr-12 font-medium focus:ring-2 outline-none transition-all ${U.length>0&&U!==q.password?"border-red-300 focus:ring-red-200 focus:border-red-400":"border-slate-200 focus:ring-sky-500/20 focus:border-sky-500"}`}),r.jsx("button",{type:"button",onClick:()=>ee(!H),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:H?r.jsx(xA,{className:"w-5 h-5"}):r.jsx(yn,{className:"w-5 h-5"})})]}),U.length>0&&U!==q.password&&r.jsx("p",{className:"text-xs text-red-500 font-bold ml-1",children:"Passwords do not match"})]}),e==="LOGIN"&&r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"button",onClick:()=>{s("FORGOT"),c(null),d(null)},className:"text-sm font-bold text-sky-600 hover:text-sky-500",children:"Forgot password?"})}),r.jsx("button",{type:"submit",disabled:n||e==="SIGNUP"&&(!W||q.password!==U),className:"w-full py-3.5 bg-slate-900 text-white font-bold rounded-xl shadow-lg hover:bg-slate-800 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-4",children:n?r.jsx(Xt,{className:"w-5 h-5 animate-spin"}):r.jsxs(r.Fragment,{children:[e==="LOGIN"?"Sign In":"Create Account",r.jsx(hd,{className:"w-4 h-4"})]})})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-slate-500 font-medium text-sm",children:[e==="LOGIN"?"Don't have an account? ":"Already have an account? ",r.jsx("button",{onClick:()=>{s(e==="LOGIN"?"SIGNUP":"LOGIN"),c(null),d(null),te({...q,password:"",verificationCode:""}),_(""),I(!1),ee(!1),Ae({hasLength:!1,hasUpper:!1,hasLower:!1,hasNumber:!1,hasSpecial:!1})},className:"text-sky-600 font-bold hover:underline",children:e==="LOGIN"?"Sign Up":"Log In"})]}),r.jsxs("div",{className:"mt-4 text-[10px] text-slate-400",children:["This site is protected by reCAPTCHA and the Google",r.jsx("a",{href:"https://policies.google.com/privacy",className:"underline ml-1",children:"Privacy Policy"})," and",r.jsx("a",{href:"https://policies.google.com/terms",className:"underline ml-1",children:"Terms of Service"})," apply."]})]})]})]})]})})]})},QK=()=>{const[t,e]=L.useState(null),[s,n]=L.useState(!1),[a,i]=L.useState(!0);L.useEffect(()=>{(async()=>{try{const d=await fetch(`${_e}/check_login_status`,{credentials:"include"});if(d.ok){const f=await d.json();if(f.logged_in&&f.user){const u={...f.user,role:$x(f.user.role||f.role)};e(u),Sy(u.role)&&n(!0)}}}catch(d){console.error("Auth check failed:",d)}finally{i(!1)}})()},[]);const c=async()=>{try{await fetch(`${_e}/auth/logout`,{method:"POST",credentials:"include"})}catch(A){console.error("Logout request failed",A)}finally{e(null),n(!1),window.location.href="/"}};return a?r.jsx("div",{className:"h-screen flex items-center justify-center",children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),r.jsx("span",{className:"text-slate-500 text-sm",children:"Loading..."})]})}):t?r.jsx(uL,{userId:t.id,isAuthenticated:!!t,children:s?r.jsx(xK,{user:t,onSwitchToUser:()=>n(!1),onLogout:c}):r.jsx(Mz,{user:t,onLogout:c,onSwitchToAdmin:()=>n(!0)})}):r.jsx(wK,{reCaptchaKey:"6LewjjUsAAAAAKFHuvd4JdyTZ06TK14FTHZSZSTF",scriptProps:{async:!1,defer:!1,appendTo:"head"},children:r.jsx(MK,{onLogin:A=>{const d={...A,role:$x(A.role)};e(d),Sy(d.role)&&n(!0)}})})},sS=document.getElementById("root");if(!sS)throw new Error("Root not found");const _K=lE.createRoot(sS);_K.render(r.jsx(wi.StrictMode,{children:r.jsx(r6,{children:r.jsx(QK,{})})}));export{Rr as _,$m as c,qx as g};
